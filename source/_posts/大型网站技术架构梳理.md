---
title: 大型网站技术架构梳理
tags:
  - 架构
categories:
  - 思维导图
date: 2017-2-10 22:22:00
toc: false
---

本文是对《大型网站架构设计》(李智慧 著)一书的梳理。

图谱持续更新中，访问地址：
https://www.processon.com/view/link/589da510e4b07ac8fc8fc8d9

### 大型网站演化进程
- **初始阶段的网站架构**：一台服务器，上面同时拥有应用程序，数据库，文件，等所有资源。例如 LAMP 架构
- **应用和数据服务分离**：三台服务器（硬件资源各不相同），分别是应用服务器，文件服务器和数据库服务器
- **使用缓存改善网站性能**：分为两种，缓存在应用服务器上的本地缓存和缓存在专门的分布式缓存服务器的远程缓存
- **使用应用服务器集群改善网站并发处理能力**：通过负载均衡调度服务器来将访问请求分发到应用服务器集群中的任何一台机器
- **数据库读写分离**：数据库采用主从热备，应用服务器在写数据时访问主数据库，主数据库通过主从复制机制将数据更新同步到从数据库。应用服务器使用专门的数据访问模块从而对应用透明
- **使用反向代理和 CDN 加速网站响应**：这两者基本原理都是缓存。反向代理部署在网站的中心机房，CDN 部署在网络提供商的机房
- **使用分布式文件系统和分布式数据库系统**：数据库拆分的最后手段，更常用的是业务分库
- **使用 NoSQL 和搜索引擎**：对可伸缩的分布式有更好的支持
- **业务拆分**：将整个网站业务拆分成不同的应用，每个应用独立部署维护，应用之间通过超链接建立联系/消息队列进行数据分发/访问同一数据存储系统
- **分布式服务**：公共业务提取出来独立部署

![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E6%A2%B3%E7%90%86%E6%A2%B3%E7%90%86/1.png)

<!-- more -->

**演化的价值观**
- 大型网站架构的核心价值是随网站所需灵活应对
- 驱动大型网站技术发展的主要力量是网站的业务发展

**演化误区**
- 一味追随大公司的解决方案
- 为了技术而技术
- 企图用技术解决所有问题

---

### 架构模式
模式的关键在于模式的可重复性
- 分层：横向切分
- 分割：纵向切分
- 分布式：分层和分割的主要目的是为了切分后的模块便于分布式部署。常用方案：
 - 分布式应用和服务
 - 分布式静态资源
 - 分布式数据和存储
 - 分布式计算
 - 分布式配置，分布式锁，分布式文件，等等
- 集群：多台服务器部署相同的应用构成一个集群，通过负载均衡设备共同对外提供服务
- 缓存：将数据放距离计算最近的位置加快处理速度，改善性能第一手段，可以加快访问速度，减小后端负载压力。使用缓存 两个前提条件 ：1.数据访问热点不均衡；2.数据某时段内有效，不会很快过期
 - CDN
 - 反向代理
 - 本地缓存
 - 分布式缓存
- 异步：旨在系统解耦。异步架构是典型的消费者生产者模式，特性如下：
 - 提高系统可用性
 - 加快网站访问速度
 - 消除并发访问高峰
- 冗余：实现高可用。数据库的冷备份和热备份
- 自动化：包括发布过程自动化，自动化代码管理，自动化测试，自动化安全检测，自动化部署，自动化监控，自动化报警，自动化失效转移，自动化失效恢复，自动化降级，自动化分配资源
- 安全：密码，手机校验码，加密，验证码，过滤，风险控制

---

### 核心要素
架构是“最高层次的规划，难以改变的规定”。主要关注五个要素：
- 性能
- 可用性(Availability)
- 伸缩性(Scalability)
- 扩展性(Extensibility)
- 安全性

![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E6%A2%B3%E7%90%86%E6%A2%B3%E7%90%86/2.png)

